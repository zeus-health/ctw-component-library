var p=Object.defineProperty;var l=(e,i,t)=>i in e?p(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t;var s=(e,i,t)=>(l(e,typeof i!="symbol"?i+"":i,t),t);import{R as n,r as I}from"./index-6f814c40.js";import{c as f}from"./index-74f03c09.js";import{u as h}from"./resource-details-drawer-11a3e21b.js";import{C as _}from"./coding-list-1d7c950f.js";import{w}from"./error-boundary-bffcb5f1.js";import{F as z,ah as g,ai as y,a as C,w as v,s as D,aj as R,u as E}from"./patient-helper-7499a61c.js";import{T}from"./table-781acd98.js";import{V as N}from"./view-fhir-6266c459.js";import"./_baseToString-4993715b.js";import{o as P}from"./sortBy-df4456c4.js";import"./_baseClone-25b1595e.js";import"./sortBy-d677d734.js";import"./_equalByTag-aaf39779.js";import"./_baseForOwn-d8306f34.js";import{i as b}from"./isEqual-b08f36b0.js";import"./_createSet-12ef9b81.js";import{u as x}from"./details-card-fe427194.js";import{u as F}from"./patient-provider-aad0ed3a.js";import{u as M}from"./use-breakpoints-4dbacb86.js";const V=[{title:"Date",render:e=>n.createElement("div",{className:"group-hover:ctw-underline"},e.occurrence)},{title:"Description",dataIndex:"description"},{title:"CVX Code",dataIndex:"cvxCode"}];class k extends z{constructor(){super(...arguments);s(this,"kind","Immunization")}get description(){return this.resource.vaccineCode.text}get cvxCode(){const t=g(y,this.resource.vaccineCode);return t==null?void 0:t.code}get occurrence(){return this.resource.occurrenceDateTime?C(this.resource.occurrenceDateTime):this.resource.occurrenceString}}const a=e=>{const i=e.map(o=>new k(o));return x(i,(o,r)=>b(c(o),c(r)))},c=e=>[e.description,e.cvxCode,e.occurrence];try{a.displayName="applyImmunizationFilters",a.__docgenInfo={description:"",displayName:"applyImmunizationFilters",props:{}}}catch{}function S(){return F(R,[],v(async(e,i)=>{try{const{bundle:t,resources:o}=await D("Immunization",e,{patientUPID:i.UPID});return P(a(o),[r=>r.occurrence??""],["desc"])}catch(t){throw new Error(`Failed fetching immunization information for patient: ${t}`)}},"req.patient_immunizations"))}const q=({record:e})=>n.createElement(N,{name:"Immunization Resource",resource:e.resource});function B({className:e}){const i=I.useRef(null),t=M(i),{featureFlags:o}=E(),r=S(),u=h({header:d=>d.description,details:L});return n.createElement("div",{ref:i,"data-zus-telemetry-namespace":"Immunizations",className:f("ctw-patient-immunizations ctw-scrollable-pass-through-height ctw-bg-white",e,{"ctw-stacked":t.sm})},n.createElement(T,{RowActions:o!=null&&o.enableViewFhirButton?q:void 0,stacked:t.sm,isLoading:r.isLoading,records:r.data??[],columns:V,handleRowClick:u}))}const m=w(B,"PatientImmunizations"),L=e=>[{label:"Date",value:e.occurrence},{label:"Description",value:e.description},{label:"Vaccine Code",value:e.resource.vaccineCode.coding?n.createElement(_,{codings:e.resource.vaccineCode.coding}):void 0}];try{m.displayName="PatientImmunizations",m.__docgenInfo={description:"",displayName:"PatientImmunizations",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{m as P};
