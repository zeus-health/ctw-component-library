import{R as N,r as st}from"./index-6f814c40.js";import{j as tn,q as rn}from"./request-47bfd586.js";import{c as Mr}from"./index-74f03c09.js";import"./_baseToString-7c0e3f59.js";import{p as nn,d as an,e as yt,_ as Ur,f as on}from"./table-8acfb15e.js";import"./_baseClone-17ec433b.js";import{h as sn,u as un}from"./sortBy-a390368e.js";import{z as ln,b as Ke}from"./_equalByTag-eda72788.js";import{t as cn,b as pn,l as hn,g as br}from"./_baseForOwn-7324d3a8.js";import"./_createSet-6ff8e1d4.js";import{a1 as mn,a2 as kr,a3 as Dt,a4 as dn,a5 as ne,a6 as Vr,a7 as gn,a8 as Sr,H as yn,a9 as En,F as xn,u as vn}from"./patient-allergies-e85d9bda.js";import{r as yr}from"./action-list-fa5a295c.js";import{W as Bt,v as _r,X as An}from"./drawer-39fcad7e.js";var wn=yr,Nn=mn,Tn=Nn(function(i,a,u){return a=a.toLowerCase(),i+(u?wn(a):a)}),bn=Tn,Sn=cn,$r=/[\\^$.*+?()[\]{}|]/g,_n=RegExp($r.source);function Dn(i){return i=Sn(i),i&&_n.test(i)?i.replace($r,"\\$&"):i}var Cn=Dn,Rn=sn;function Fn(i,a){var u;return Rn(i,function(l,f,E){return u=a(l,f,E),!u}),!!u}var On=Fn,In=ln,Bn=pn,Ln=On,Pn=Ke,Mn=un;function Un(i,a,u){var l=Pn(i)?In:Ln;return u&&Mn(i,a,u)&&(a=void 0),l(i,Bn(a))}var kn=Un;function Vn(i,a){kr(2,arguments);var u=Dt(i),l=Dt(a);return u.getTime()<l.getTime()}function $n(i,a){kr(2,arguments);var u=Dt(i),l=Dt(a);return u.getTime()===l.getTime()}const Gt=({isOpen:i,onAfterClosed:a,children:u,className:l})=>N.createElement(Bt,{appear:!0,show:i,as:st.Fragment},N.createElement(_r,{as:"div",className:"ctw-relative ctw-z-[10100]",onClose:()=>{}},N.createElement(Bt.Child,{as:st.Fragment,enter:"ctw-ease-out ctw-duration-300",enterFrom:"ctw-opacity-0",enterTo:"ctw-opacity-100",leave:"ctw-ease-in ctw-duration-200",leaveFrom:"ctw-opacity-100",leaveTo:"ctw-opacity-0",afterLeave:a},N.createElement("div",{className:"ctw-fixed ctw-inset-0  ctw-transition-opacity"},N.createElement("div",{className:"ctw-h-full ctw-w-full ctw-bg-content-light ctw-opacity-75"}))),N.createElement("div",{className:"ctw-fixed ctw-inset-0 ctw-overflow-auto"},N.createElement("div",{className:"ctw-flex ctw-min-h-full ctw-items-center ctw-justify-center ctw-p-4 ctw-text-center"},N.createElement(Bt.Child,{as:st.Fragment,enter:"ctw-ease-out ctw-duration-300",enterFrom:"ctw-opacity-0 ctw-scale-95",enterTo:"ctw-opacity-100 ctw-scale-100",leave:"ctw-ease-in ctw-duration-200",leaveFrom:"ctw-opacity-100 ctw-scale-100",leaveTo:"ctw-opacity-0 ctw-scale-95"},N.createElement(_r.Panel,{className:Mr("ctw-min-w-fit ctw-max-w-lg ctw-transform ctw-rounded-lg ctw-bg-white ctw-py-10 ctw-px-10 ctw-align-middle ctw-shadow-xl",l)},N.createElement("div",{className:"ctw-flex ctw-h-full ctw-flex-col ctw-space-y-6"},u)))))));try{Gt.displayName="Modal",Gt.__docgenInfo={description:"",displayName:"Modal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onAfterClosed:{defaultValue:null,description:"",name:"onAfterClosed",required:!1,type:{name:"(() => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const zt=({onClick:i,text:a})=>N.createElement("button",{type:"button",className:"ctw-btn-clear ctw-link ctw-flex ctw-items-center ctw-space-x-2",onClick:i},N.createElement("div",null,a),N.createElement(dn,{height:12}));try{zt.displayName="DocumentButton",zt.__docgenInfo={description:"",displayName:"DocumentButton",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLButtonElement>"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}}}catch{}var Hn=tn(),qt={},Ft={};Ft.byteLength=qn;Ft.toByteArray=Yn;Ft.fromByteArray=Qn;var tt=[],Ge=[],Gn=typeof Uint8Array<"u"?Uint8Array:Array,Lt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var gt=0,zn=Lt.length;gt<zn;++gt)tt[gt]=Lt[gt],Ge[Lt.charCodeAt(gt)]=gt;Ge["-".charCodeAt(0)]=62;Ge["_".charCodeAt(0)]=63;function Hr(i){var a=i.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=i.indexOf("=");u===-1&&(u=a);var l=u===a?0:4-u%4;return[u,l]}function qn(i){var a=Hr(i),u=a[0],l=a[1];return(u+l)*3/4-l}function Wn(i,a,u){return(a+u)*3/4-u}function Yn(i){var a,u=Hr(i),l=u[0],f=u[1],E=new Gn(Wn(i,l,f)),v=0,m=f>0?l-4:l,_;for(_=0;_<m;_+=4)a=Ge[i.charCodeAt(_)]<<18|Ge[i.charCodeAt(_+1)]<<12|Ge[i.charCodeAt(_+2)]<<6|Ge[i.charCodeAt(_+3)],E[v++]=a>>16&255,E[v++]=a>>8&255,E[v++]=a&255;return f===2&&(a=Ge[i.charCodeAt(_)]<<2|Ge[i.charCodeAt(_+1)]>>4,E[v++]=a&255),f===1&&(a=Ge[i.charCodeAt(_)]<<10|Ge[i.charCodeAt(_+1)]<<4|Ge[i.charCodeAt(_+2)]>>2,E[v++]=a>>8&255,E[v++]=a&255),E}function jn(i){return tt[i>>18&63]+tt[i>>12&63]+tt[i>>6&63]+tt[i&63]}function Xn(i,a,u){for(var l,f=[],E=a;E<u;E+=3)l=(i[E]<<16&16711680)+(i[E+1]<<8&65280)+(i[E+2]&255),f.push(jn(l));return f.join("")}function Qn(i){for(var a,u=i.length,l=u%3,f=[],E=16383,v=0,m=u-l;v<m;v+=E)f.push(Xn(i,v,v+E>m?m:v+E));return l===1?(a=i[u-1],f.push(tt[a>>2]+tt[a<<4&63]+"==")):l===2&&(a=(i[u-2]<<8)+i[u-1],f.push(tt[a>>10]+tt[a>>4&63]+tt[a<<2&63]+"=")),f.join("")}var Er={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Er.read=function(i,a,u,l,f){var E,v,m=f*8-l-1,_=(1<<m)-1,U=_>>1,G=-7,j=u?f-1:0,ue=u?-1:1,ae=i[a+j];for(j+=ue,E=ae&(1<<-G)-1,ae>>=-G,G+=m;G>0;E=E*256+i[a+j],j+=ue,G-=8);for(v=E&(1<<-G)-1,E>>=-G,G+=l;G>0;v=v*256+i[a+j],j+=ue,G-=8);if(E===0)E=1-U;else{if(E===_)return v?NaN:(ae?-1:1)*(1/0);v=v+Math.pow(2,l),E=E-U}return(ae?-1:1)*v*Math.pow(2,E-l)};Er.write=function(i,a,u,l,f,E){var v,m,_,U=E*8-f-1,G=(1<<U)-1,j=G>>1,ue=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,ae=l?0:E-1,Te=l?1:-1,qe=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(m=isNaN(a)?1:0,v=G):(v=Math.floor(Math.log(a)/Math.LN2),a*(_=Math.pow(2,-v))<1&&(v--,_*=2),v+j>=1?a+=ue/_:a+=ue*Math.pow(2,1-j),a*_>=2&&(v++,_/=2),v+j>=G?(m=0,v=G):v+j>=1?(m=(a*_-1)*Math.pow(2,f),v=v+j):(m=a*Math.pow(2,j-1)*Math.pow(2,f),v=0));f>=8;i[u+ae]=m&255,ae+=Te,m/=256,f-=8);for(v=v<<f|m,U+=f;U>0;i[u+ae]=v&255,ae+=Te,v/=256,U-=8);i[u+ae-Te]|=qe*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){var a=Ft,u=Er,l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=m,i.SlowBuffer=le,i.INSPECT_MAX_BYTES=50;var f=2147483647;i.kMaxLength=f,m.TYPED_ARRAY_SUPPORT=E(),!m.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{var o=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(o,r),o.foo()===42}catch{return!1}}Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}});function v(o){if(o>f)throw new RangeError('The value "'+o+'" is invalid for option "size"');var r=new Uint8Array(o);return Object.setPrototypeOf(r,m.prototype),r}function m(o,r,n){if(typeof o=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return j(o)}return _(o,r,n)}m.poolSize=8192;function _(o,r,n){if(typeof o=="string")return ue(o,r);if(ArrayBuffer.isView(o))return Te(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(O(o,ArrayBuffer)||o&&O(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(O(o,SharedArrayBuffer)||o&&O(o.buffer,SharedArrayBuffer)))return qe(o,r,n);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var s=o.valueOf&&o.valueOf();if(s!=null&&s!==o)return m.from(s,r,n);var y=it(o);if(y)return y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return m.from(o[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}m.from=function(o,r,n){return _(o,r,n)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array);function U(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function G(o,r,n){return U(o),o<=0?v(o):r!==void 0?typeof n=="string"?v(o).fill(r,n):v(o).fill(r):v(o)}m.alloc=function(o,r,n){return G(o,r,n)};function j(o){return U(o),v(o<0?0:A(o)|0)}m.allocUnsafe=function(o){return j(o)},m.allocUnsafeSlow=function(o){return j(o)};function ue(o,r){if((typeof r!="string"||r==="")&&(r="utf8"),!m.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var n=Ze(o,r)|0,s=v(n),y=s.write(o,r);return y!==n&&(s=s.slice(0,y)),s}function ae(o){for(var r=o.length<0?0:A(o.length)|0,n=v(r),s=0;s<r;s+=1)n[s]=o[s]&255;return n}function Te(o){if(O(o,Uint8Array)){var r=new Uint8Array(o);return qe(r.buffer,r.byteOffset,r.byteLength)}return ae(o)}function qe(o,r,n){if(r<0||o.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');var s;return r===void 0&&n===void 0?s=new Uint8Array(o):n===void 0?s=new Uint8Array(o,r):s=new Uint8Array(o,r,n),Object.setPrototypeOf(s,m.prototype),s}function it(o){if(m.isBuffer(o)){var r=A(o.length)|0,n=v(r);return n.length===0||o.copy(n,0,0,r),n}if(o.length!==void 0)return typeof o.length!="number"||rt(o.length)?v(0):ae(o);if(o.type==="Buffer"&&Array.isArray(o.data))return ae(o.data)}function A(o){if(o>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return o|0}function le(o){return+o!=o&&(o=0),m.alloc(+o)}m.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==m.prototype},m.compare=function(r,n){if(O(r,Uint8Array)&&(r=m.from(r,r.offset,r.byteLength)),O(n,Uint8Array)&&(n=m.from(n,n.offset,n.byteLength)),!m.isBuffer(r)||!m.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;for(var s=r.length,y=n.length,w=0,T=Math.min(s,y);w<T;++w)if(r[w]!==n[w]){s=r[w],y=n[w];break}return s<y?-1:y<s?1:0},m.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(r,n){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return m.alloc(0);var s;if(n===void 0)for(n=0,s=0;s<r.length;++s)n+=r[s].length;var y=m.allocUnsafe(n),w=0;for(s=0;s<r.length;++s){var T=r[s];if(O(T,Uint8Array))w+T.length>y.length?m.from(T).copy(y,w):Uint8Array.prototype.set.call(y,T,w);else if(m.isBuffer(T))T.copy(y,w);else throw new TypeError('"list" argument must be an Array of Buffers');w+=T.length}return y};function Ze(o,r){if(m.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||O(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);var n=o.length,s=arguments.length>2&&arguments[2]===!0;if(!s&&n===0)return 0;for(var y=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return F(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return ie(o).length;default:if(y)return s?-1:F(o).length;r=(""+r).toLowerCase(),y=!0}}m.byteLength=Ze;function X(o,r,n){var s=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,r>>>=0,n<=r))return"";for(o||(o="utf8");;)switch(o){case"hex":return Pe(this,r,n);case"utf8":case"utf-8":return ge(this,r,n);case"ascii":return Be(this,r,n);case"latin1":case"binary":return Le(this,r,n);case"base64":return oe(this,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,r,n);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),s=!0}}m.prototype._isBuffer=!0;function fe(o,r,n){var s=o[r];o[r]=o[n],o[n]=s}m.prototype.swap16=function(){var r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<r;n+=2)fe(this,n,n+1);return this},m.prototype.swap32=function(){var r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<r;n+=4)fe(this,n,n+3),fe(this,n+1,n+2);return this},m.prototype.swap64=function(){var r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<r;n+=8)fe(this,n,n+7),fe(this,n+1,n+6),fe(this,n+2,n+5),fe(this,n+3,n+4);return this},m.prototype.toString=function(){var r=this.length;return r===0?"":arguments.length===0?ge(this,0,r):X.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(r){if(!m.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:m.compare(this,r)===0},m.prototype.inspect=function(){var r="",n=i.INSPECT_MAX_BYTES;return r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(r+=" ... "),"<Buffer "+r+">"},l&&(m.prototype[l]=m.prototype.inspect),m.prototype.compare=function(r,n,s,y,w){if(O(r,Uint8Array)&&(r=m.from(r,r.offset,r.byteLength)),!m.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(n===void 0&&(n=0),s===void 0&&(s=r?r.length:0),y===void 0&&(y=0),w===void 0&&(w=this.length),n<0||s>r.length||y<0||w>this.length)throw new RangeError("out of range index");if(y>=w&&n>=s)return 0;if(y>=w)return-1;if(n>=s)return 1;if(n>>>=0,s>>>=0,y>>>=0,w>>>=0,this===r)return 0;for(var T=w-y,$=s-n,q=Math.min(T,$),D=this.slice(y,w),C=r.slice(n,s),J=0;J<q;++J)if(D[J]!==C[J]){T=D[J],$=C[J];break}return T<$?-1:$<T?1:0};function he(o,r,n,s,y){if(o.length===0)return-1;if(typeof n=="string"?(s=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,rt(n)&&(n=y?0:o.length-1),n<0&&(n=o.length+n),n>=o.length){if(y)return-1;n=o.length-1}else if(n<0)if(y)n=0;else return-1;if(typeof r=="string"&&(r=m.from(r,s)),m.isBuffer(r))return r.length===0?-1:W(o,r,n,s,y);if(typeof r=="number")return r=r&255,typeof Uint8Array.prototype.indexOf=="function"?y?Uint8Array.prototype.indexOf.call(o,r,n):Uint8Array.prototype.lastIndexOf.call(o,r,n):W(o,[r],n,s,y);throw new TypeError("val must be string, number or Buffer")}function W(o,r,n,s,y){var w=1,T=o.length,$=r.length;if(s!==void 0&&(s=String(s).toLowerCase(),s==="ucs2"||s==="ucs-2"||s==="utf16le"||s==="utf-16le")){if(o.length<2||r.length<2)return-1;w=2,T/=2,$/=2,n/=2}function q(ke,$e){return w===1?ke[$e]:ke.readUInt16BE($e*w)}var D;if(y){var C=-1;for(D=n;D<T;D++)if(q(o,D)===q(r,C===-1?0:D-C)){if(C===-1&&(C=D),D-C+1===$)return C*w}else C!==-1&&(D-=D-C),C=-1}else for(n+$>T&&(n=T-$),D=n;D>=0;D--){for(var J=!0,pe=0;pe<$;pe++)if(q(o,D+pe)!==q(r,pe)){J=!1;break}if(J)return D}return-1}m.prototype.includes=function(r,n,s){return this.indexOf(r,n,s)!==-1},m.prototype.indexOf=function(r,n,s){return he(this,r,n,s,!0)},m.prototype.lastIndexOf=function(r,n,s){return he(this,r,n,s,!1)};function Re(o,r,n,s){n=Number(n)||0;var y=o.length-n;s?(s=Number(s),s>y&&(s=y)):s=y;var w=r.length;s>w/2&&(s=w/2);for(var T=0;T<s;++T){var $=parseInt(r.substr(T*2,2),16);if(rt($))return T;o[n+T]=$}return T}function Fe(o,r,n,s){return M(F(r,o.length-n),o,n,s)}function Oe(o,r,n,s){return M(Me(r),o,n,s)}function Ie(o,r,n,s){return M(ie(r),o,n,s)}function be(o,r,n,s){return M(ve(r,o.length-n),o,n,s)}m.prototype.write=function(r,n,s,y){if(n===void 0)y="utf8",s=this.length,n=0;else if(s===void 0&&typeof n=="string")y=n,s=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(s)?(s=s>>>0,y===void 0&&(y="utf8")):(y=s,s=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var w=this.length-n;if((s===void 0||s>w)&&(s=w),r.length>0&&(s<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");y||(y="utf8");for(var T=!1;;)switch(y){case"hex":return Re(this,r,n,s);case"utf8":case"utf-8":return Fe(this,r,n,s);case"ascii":case"latin1":case"binary":return Oe(this,r,n,s);case"base64":return Ie(this,r,n,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,r,n,s);default:if(T)throw new TypeError("Unknown encoding: "+y);y=(""+y).toLowerCase(),T=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function oe(o,r,n){return r===0&&n===o.length?a.fromByteArray(o):a.fromByteArray(o.slice(r,n))}function ge(o,r,n){n=Math.min(o.length,n);for(var s=[],y=r;y<n;){var w=o[y],T=null,$=w>239?4:w>223?3:w>191?2:1;if(y+$<=n){var q,D,C,J;switch($){case 1:w<128&&(T=w);break;case 2:q=o[y+1],(q&192)===128&&(J=(w&31)<<6|q&63,J>127&&(T=J));break;case 3:q=o[y+1],D=o[y+2],(q&192)===128&&(D&192)===128&&(J=(w&15)<<12|(q&63)<<6|D&63,J>2047&&(J<55296||J>57343)&&(T=J));break;case 4:q=o[y+1],D=o[y+2],C=o[y+3],(q&192)===128&&(D&192)===128&&(C&192)===128&&(J=(w&15)<<18|(q&63)<<12|(D&63)<<6|C&63,J>65535&&J<1114112&&(T=J))}}T===null?(T=65533,$=1):T>65535&&(T-=65536,s.push(T>>>10&1023|55296),T=56320|T&1023),s.push(T),y+=$}return xe(s)}var ye=4096;function xe(o){var r=o.length;if(r<=ye)return String.fromCharCode.apply(String,o);for(var n="",s=0;s<r;)n+=String.fromCharCode.apply(String,o.slice(s,s+=ye));return n}function Be(o,r,n){var s="";n=Math.min(o.length,n);for(var y=r;y<n;++y)s+=String.fromCharCode(o[y]&127);return s}function Le(o,r,n){var s="";n=Math.min(o.length,n);for(var y=r;y<n;++y)s+=String.fromCharCode(o[y]);return s}function Pe(o,r,n){var s=o.length;(!r||r<0)&&(r=0),(!n||n<0||n>s)&&(n=s);for(var y="",w=r;w<n;++w)y+=ct[o[w]];return y}function Se(o,r,n){for(var s=o.slice(r,n),y="",w=0;w<s.length-1;w+=2)y+=String.fromCharCode(s[w]+s[w+1]*256);return y}m.prototype.slice=function(r,n){var s=this.length;r=~~r,n=n===void 0?s:~~n,r<0?(r+=s,r<0&&(r=0)):r>s&&(r=s),n<0?(n+=s,n<0&&(n=0)):n>s&&(n=s),n<r&&(n=r);var y=this.subarray(r,n);return Object.setPrototypeOf(y,m.prototype),y};function Z(o,r,n){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+r>n)throw new RangeError("Trying to access beyond buffer length")}m.prototype.readUintLE=m.prototype.readUIntLE=function(r,n,s){r=r>>>0,n=n>>>0,s||Z(r,n,this.length);for(var y=this[r],w=1,T=0;++T<n&&(w*=256);)y+=this[r+T]*w;return y},m.prototype.readUintBE=m.prototype.readUIntBE=function(r,n,s){r=r>>>0,n=n>>>0,s||Z(r,n,this.length);for(var y=this[r+--n],w=1;n>0&&(w*=256);)y+=this[r+--n]*w;return y},m.prototype.readUint8=m.prototype.readUInt8=function(r,n){return r=r>>>0,n||Z(r,1,this.length),this[r]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(r,n){return r=r>>>0,n||Z(r,2,this.length),this[r]|this[r+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(r,n){return r=r>>>0,n||Z(r,2,this.length),this[r]<<8|this[r+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(r,n){return r=r>>>0,n||Z(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(r,n){return r=r>>>0,n||Z(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])},m.prototype.readIntLE=function(r,n,s){r=r>>>0,n=n>>>0,s||Z(r,n,this.length);for(var y=this[r],w=1,T=0;++T<n&&(w*=256);)y+=this[r+T]*w;return w*=128,y>=w&&(y-=Math.pow(2,8*n)),y},m.prototype.readIntBE=function(r,n,s){r=r>>>0,n=n>>>0,s||Z(r,n,this.length);for(var y=n,w=1,T=this[r+--y];y>0&&(w*=256);)T+=this[r+--y]*w;return w*=128,T>=w&&(T-=Math.pow(2,8*n)),T},m.prototype.readInt8=function(r,n){return r=r>>>0,n||Z(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]},m.prototype.readInt16LE=function(r,n){r=r>>>0,n||Z(r,2,this.length);var s=this[r]|this[r+1]<<8;return s&32768?s|4294901760:s},m.prototype.readInt16BE=function(r,n){r=r>>>0,n||Z(r,2,this.length);var s=this[r+1]|this[r]<<8;return s&32768?s|4294901760:s},m.prototype.readInt32LE=function(r,n){return r=r>>>0,n||Z(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},m.prototype.readInt32BE=function(r,n){return r=r>>>0,n||Z(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},m.prototype.readFloatLE=function(r,n){return r=r>>>0,n||Z(r,4,this.length),u.read(this,r,!0,23,4)},m.prototype.readFloatBE=function(r,n){return r=r>>>0,n||Z(r,4,this.length),u.read(this,r,!1,23,4)},m.prototype.readDoubleLE=function(r,n){return r=r>>>0,n||Z(r,8,this.length),u.read(this,r,!0,52,8)},m.prototype.readDoubleBE=function(r,n){return r=r>>>0,n||Z(r,8,this.length),u.read(this,r,!1,52,8)};function P(o,r,n,s,y,w){if(!m.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>y||r<w)throw new RangeError('"value" argument is out of bounds');if(n+s>o.length)throw new RangeError("Index out of range")}m.prototype.writeUintLE=m.prototype.writeUIntLE=function(r,n,s,y){if(r=+r,n=n>>>0,s=s>>>0,!y){var w=Math.pow(2,8*s)-1;P(this,r,n,s,w,0)}var T=1,$=0;for(this[n]=r&255;++$<s&&(T*=256);)this[n+$]=r/T&255;return n+s},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(r,n,s,y){if(r=+r,n=n>>>0,s=s>>>0,!y){var w=Math.pow(2,8*s)-1;P(this,r,n,s,w,0)}var T=s-1,$=1;for(this[n+T]=r&255;--T>=0&&($*=256);)this[n+T]=r/$&255;return n+s},m.prototype.writeUint8=m.prototype.writeUInt8=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,1,255,0),this[n]=r&255,n+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,2,65535,0),this[n]=r&255,this[n+1]=r>>>8,n+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,2,65535,0),this[n]=r>>>8,this[n+1]=r&255,n+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,4,4294967295,0),this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=r&255,n+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,4,4294967295,0),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255,n+4},m.prototype.writeIntLE=function(r,n,s,y){if(r=+r,n=n>>>0,!y){var w=Math.pow(2,8*s-1);P(this,r,n,s,w-1,-w)}var T=0,$=1,q=0;for(this[n]=r&255;++T<s&&($*=256);)r<0&&q===0&&this[n+T-1]!==0&&(q=1),this[n+T]=(r/$>>0)-q&255;return n+s},m.prototype.writeIntBE=function(r,n,s,y){if(r=+r,n=n>>>0,!y){var w=Math.pow(2,8*s-1);P(this,r,n,s,w-1,-w)}var T=s-1,$=1,q=0;for(this[n+T]=r&255;--T>=0&&($*=256);)r<0&&q===0&&this[n+T+1]!==0&&(q=1),this[n+T]=(r/$>>0)-q&255;return n+s},m.prototype.writeInt8=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,1,127,-128),r<0&&(r=255+r+1),this[n]=r&255,n+1},m.prototype.writeInt16LE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,2,32767,-32768),this[n]=r&255,this[n+1]=r>>>8,n+2},m.prototype.writeInt16BE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,2,32767,-32768),this[n]=r>>>8,this[n+1]=r&255,n+2},m.prototype.writeInt32LE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,4,2147483647,-2147483648),this[n]=r&255,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24,n+4},m.prototype.writeInt32BE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255,n+4};function ut(o,r,n,s,y,w){if(n+s>o.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function se(o,r,n,s,y){return r=+r,n=n>>>0,y||ut(o,r,n,4),u.write(o,r,n,s,23,4),n+4}m.prototype.writeFloatLE=function(r,n,s){return se(this,r,n,!0,s)},m.prototype.writeFloatBE=function(r,n,s){return se(this,r,n,!1,s)};function lt(o,r,n,s,y){return r=+r,n=n>>>0,y||ut(o,r,n,8),u.write(o,r,n,s,52,8),n+8}m.prototype.writeDoubleLE=function(r,n,s){return lt(this,r,n,!0,s)},m.prototype.writeDoubleBE=function(r,n,s){return lt(this,r,n,!1,s)},m.prototype.copy=function(r,n,s,y){if(!m.isBuffer(r))throw new TypeError("argument should be a Buffer");if(s||(s=0),!y&&y!==0&&(y=this.length),n>=r.length&&(n=r.length),n||(n=0),y>0&&y<s&&(y=s),y===s||r.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("sourceEnd out of bounds");y>this.length&&(y=this.length),r.length-n<y-s&&(y=r.length-n+s);var w=y-s;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,s,y):Uint8Array.prototype.set.call(r,this.subarray(s,y),n),w},m.prototype.fill=function(r,n,s,y){if(typeof r=="string"){if(typeof n=="string"?(y=n,n=0,s=this.length):typeof s=="string"&&(y=s,s=this.length),y!==void 0&&typeof y!="string")throw new TypeError("encoding must be a string");if(typeof y=="string"&&!m.isEncoding(y))throw new TypeError("Unknown encoding: "+y);if(r.length===1){var w=r.charCodeAt(0);(y==="utf8"&&w<128||y==="latin1")&&(r=w)}}else typeof r=="number"?r=r&255:typeof r=="boolean"&&(r=Number(r));if(n<0||this.length<n||this.length<s)throw new RangeError("Out of range index");if(s<=n)return this;n=n>>>0,s=s===void 0?this.length:s>>>0,r||(r=0);var T;if(typeof r=="number")for(T=n;T<s;++T)this[T]=r;else{var $=m.isBuffer(r)?r:m.from(r,y),q=$.length;if(q===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(T=0;T<s-n;++T)this[T+n]=$[T%q]}return this};var ee=/[^+/0-9A-Za-z-_]/g;function R(o){if(o=o.split("=")[0],o=o.trim().replace(ee,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function F(o,r){r=r||1/0;for(var n,s=o.length,y=null,w=[],T=0;T<s;++T){if(n=o.charCodeAt(T),n>55295&&n<57344){if(!y){if(n>56319){(r-=3)>-1&&w.push(239,191,189);continue}else if(T+1===s){(r-=3)>-1&&w.push(239,191,189);continue}y=n;continue}if(n<56320){(r-=3)>-1&&w.push(239,191,189),y=n;continue}n=(y-55296<<10|n-56320)+65536}else y&&(r-=3)>-1&&w.push(239,191,189);if(y=null,n<128){if((r-=1)<0)break;w.push(n)}else if(n<2048){if((r-=2)<0)break;w.push(n>>6|192,n&63|128)}else if(n<65536){if((r-=3)<0)break;w.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((r-=4)<0)break;w.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return w}function Me(o){for(var r=[],n=0;n<o.length;++n)r.push(o.charCodeAt(n)&255);return r}function ve(o,r){for(var n,s,y,w=[],T=0;T<o.length&&!((r-=2)<0);++T)n=o.charCodeAt(T),s=n>>8,y=n%256,w.push(y),w.push(s);return w}function ie(o){return a.toByteArray(R(o))}function M(o,r,n,s){for(var y=0;y<s&&!(y+n>=r.length||y>=o.length);++y)r[y+n]=o[y];return y}function O(o,r){return o instanceof r||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===r.name}function rt(o){return o!==o}var ct=function(){for(var o="0123456789abcdef",r=new Array(256),n=0;n<16;++n)for(var s=n*16,y=0;y<16;++y)r[s+y]=o[n]+o[y];return r}()})(qt);var x={};(function(i){var a=i;(function(u){function l(e){var t=Array.prototype.slice,c=e.length,h=function(d,I){return function(){return I.apply(this,d.concat(t.call(arguments)))}},p=function(){var d=t.call(arguments);return d.length<c?h(d,p):e.apply(this,t.apply(arguments,[0,c]))};return p}var f=function(e,t){for(var c=0;c<t.length;c+=1)e(t[c],c,t)},E=function(e,t,c){var h=t;return f(function(p,d){h=e(h,p,d)},c),h},v=function(e,t){var c=new Array(t.length);return f(function(h,p){c[p]=e(h)},t),c},m=function(e,t){var c=[];return f(function(h,p){e(h,p)&&c.push(h)},t),c},_=function(e,t){for(var c=0;c<e.length;c+=1)if(e[c]===t)return!0;return!1};function U(e){return function(){return e}}function G(e){return e.toString()}var j=function(e,t){return t.join(e)},ue=function(e,t,c){return e+c+t},ae=Array.prototype.concat,Te=32767;function qe(e){for(var t=[],c=0;c<e.length;c+=Te){var h=e.slice(c,c+Te);t=ae.apply(t,h)}return t}function it(e,t){for(var c=Object(e),h=1;h<arguments.length;h++){var p=arguments[h];if(p!=null)for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(c[d]=p[d])}return c}A.prototype=new Object,A.prototype.constructor=A,A.superclass=Object.prototype;function A(){this.init()}A.prototype.init=function(){this.reduceActions=[],this.reduceActions[3]=function(e){return new Re(e[0],e[2])},this.reduceActions[5]=function(e){return new Fe(e[0],e[2])},this.reduceActions[7]=function(e){return new Oe(e[0],e[2])},this.reduceActions[8]=function(e){return new Ie(e[0],e[2])},this.reduceActions[10]=function(e){return new be(e[0],e[2])},this.reduceActions[11]=function(e){return new oe(e[0],e[2])},this.reduceActions[12]=function(e){return new ge(e[0],e[2])},this.reduceActions[13]=function(e){return new ye(e[0],e[2])},this.reduceActions[15]=function(e){return new xe(e[0],e[2])},this.reduceActions[16]=function(e){return new Be(e[0],e[2])},this.reduceActions[18]=function(e){return new Le(e[0],e[2])},this.reduceActions[19]=function(e){return new Pe(e[0],e[2])},this.reduceActions[20]=function(e){return new Se(e[0],e[2])},this.reduceActions[22]=function(e){return new he(e[1])},this.reduceActions[24]=function(e){return new Z(e[0],e[2])},this.reduceActions[25]=function(e){return new P(void 0,void 0,e[0])},this.reduceActions[27]=function(e){return e[0].locationPath=e[2],e[0]},this.reduceActions[28]=function(e){return e[0].locationPath=e[2],e[0].locationPath.steps.unshift(new R(R.DESCENDANTORSELF,F.nodeTest,[])),e[0]},this.reduceActions[29]=function(e){return new P(e[0],[],void 0)},this.reduceActions[30]=function(e){return C.instance_of(e[0],P)?(e[0].filterPredicates==null&&(e[0].filterPredicates=[]),e[0].filterPredicates.push(e[1]),e[0]):new P(e[0],[e[1]],void 0)},this.reduceActions[32]=function(e){return e[1]},this.reduceActions[33]=function(e){return new M(e[0])},this.reduceActions[34]=function(e){return new O(e[0])},this.reduceActions[36]=function(e){return new ve(e[0],[])},this.reduceActions[37]=function(e){return new ve(e[0],e[2])},this.reduceActions[38]=function(e){return[e[0]]},this.reduceActions[39]=function(e){return e[2].unshift(e[0]),e[2]},this.reduceActions[43]=function(e){return new ee(!0,[])},this.reduceActions[44]=function(e){return e[1].absolute=!0,e[1]},this.reduceActions[46]=function(e){return new ee(!1,[e[0]])},this.reduceActions[47]=function(e){return e[0].steps.push(e[2]),e[0]},this.reduceActions[49]=function(e){return new R(e[0],e[1],[])},this.reduceActions[50]=function(e){return new R(R.CHILD,e[0],[])},this.reduceActions[51]=function(e){return new R(e[0],e[1],e[2])},this.reduceActions[52]=function(e){return new R(R.CHILD,e[0],e[1])},this.reduceActions[54]=function(e){return[e[0]]},this.reduceActions[55]=function(e){return e[1].unshift(e[0]),e[1]},this.reduceActions[56]=function(e){return e[0]=="ancestor"?R.ANCESTOR:e[0]=="ancestor-or-self"?R.ANCESTORORSELF:e[0]=="attribute"?R.ATTRIBUTE:e[0]=="child"?R.CHILD:e[0]=="descendant"?R.DESCENDANT:e[0]=="descendant-or-self"?R.DESCENDANTORSELF:e[0]=="following"?R.FOLLOWING:e[0]=="following-sibling"?R.FOLLOWINGSIBLING:e[0]=="namespace"?R.NAMESPACE:e[0]=="parent"?R.PARENT:e[0]=="preceding"?R.PRECEDING:e[0]=="preceding-sibling"?R.PRECEDINGSIBLING:e[0]=="self"?R.SELF:-1},this.reduceActions[57]=function(e){return R.ATTRIBUTE},this.reduceActions[59]=function(e){return e[0]=="comment"?F.commentTest:e[0]=="text"?F.textTest:e[0]=="processing-instruction"?F.anyPiTest:e[0]=="node"?F.nodeTest:new F(-1,void 0)},this.reduceActions[60]=function(e){return new F.PITest(e[2])},this.reduceActions[61]=function(e){return e[1]},this.reduceActions[63]=function(e){return e[1].absolute=!0,e[1].steps.unshift(new R(R.DESCENDANTORSELF,F.nodeTest,[])),e[1]},this.reduceActions[64]=function(e){return e[0].steps.push(new R(R.DESCENDANTORSELF,F.nodeTest,[])),e[0].steps.push(e[2]),e[0]},this.reduceActions[65]=function(e){return new R(R.SELF,F.nodeTest,[])},this.reduceActions[66]=function(e){return new R(R.PARENT,F.nodeTest,[])},this.reduceActions[67]=function(e){return new Me(e[1])},this.reduceActions[68]=function(e){return F.nameTestAny},this.reduceActions[69]=function(e){return new F.NameTestPrefixAny(e[0].split(":")[0])},this.reduceActions[70]=function(e){return new F.NameTestQName(e[0])}},A.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "],A.actionTableNumber=[` 1 0        /.-,+*)('    & %$  #  "!`,"                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               ",` 1 0        /.-,+*)('    & %$  #  "!`,`K1  KKKKKKKK .  +*)('KKKKKK  KK# K" `,` 1 0        /.-,+*)('    & %$  #  "!`,"                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       ",` 1           .  +*)('          #  " `,"b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               ",` 1 0        /.-,+*)('    & %$m #  "!`,"_  f________         ______e __  _  ",` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('      %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1           .  +*)('          #  " `,` 1           .  +*)('          #  " `,">  >>>>>>>>>         >>>>>>> >> >>  ",` 1           .  +*)('          #  " `,` 1           .  +*)('          #  " `,"Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                                   ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                                   ","                             F     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                   ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  ",` 1 0        /.-,+*)('    & %$  #  "!`,"]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "],A.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         =>?@ AB  CDEFGH IJ ","456789:;<=>?@ AB  CDEFGH IJ","                    EFGH IJ ","                    EFGH IJ ","                             ","                      GH IJ ","                      GH IJ ","              i             ","              i             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABqCDEFGH IJ ","                             ","                             "],A.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]],A.DOUBLEDOT=2,A.DOUBLECOLON=3,A.DOUBLESLASH=4,A.NOTEQUAL=5,A.LESSTHANOREQUAL=6,A.GREATERTHANOREQUAL=7,A.AND=8,A.OR=9,A.MOD=10,A.DIV=11,A.MULTIPLYOPERATOR=12,A.FUNCTIONNAME=13,A.AXISNAME=14,A.LITERAL=15,A.NUMBER=16,A.ASTERISKNAMETEST=17,A.QNAME=18,A.NCNAMECOLONASTERISK=19,A.NODETYPE=20,A.PROCESSINGINSTRUCTIONWITHLITERAL=21,A.EQUALS=22,A.LESSTHAN=23,A.GREATERTHAN=24,A.PLUS=25,A.MINUS=26,A.BAR=27,A.SLASH=28,A.LEFTPARENTHESIS=29,A.RIGHTPARENTHESIS=30,A.COMMA=31,A.AT=32,A.LEFTBRACKET=33,A.RIGHTBRACKET=34,A.DOT=35,A.DOLLAR=36,A.prototype.tokenize=function(e){for(var t=[],c=[],h=e+"\0",p=0,d=h.charAt(p++);;){for(;d==" "||d=="	"||d=="\r"||d==`
`;)d=h.charAt(p++);if(d=="\0"||p>=h.length)break;if(d=="("){t.push(A.LEFTPARENTHESIS),c.push(d),d=h.charAt(p++);continue}if(d==")"){t.push(A.RIGHTPARENTHESIS),c.push(d),d=h.charAt(p++);continue}if(d=="["){t.push(A.LEFTBRACKET),c.push(d),d=h.charAt(p++);continue}if(d=="]"){t.push(A.RIGHTBRACKET),c.push(d),d=h.charAt(p++);continue}if(d=="@"){t.push(A.AT),c.push(d),d=h.charAt(p++);continue}if(d==","){t.push(A.COMMA),c.push(d),d=h.charAt(p++);continue}if(d=="|"){t.push(A.BAR),c.push(d),d=h.charAt(p++);continue}if(d=="+"){t.push(A.PLUS),c.push(d),d=h.charAt(p++);continue}if(d=="-"){t.push(A.MINUS),c.push(d),d=h.charAt(p++);continue}if(d=="="){t.push(A.EQUALS),c.push(d),d=h.charAt(p++);continue}if(d=="$"){t.push(A.DOLLAR),c.push(d),d=h.charAt(p++);continue}if(d=="."){if(d=h.charAt(p++),d=="."){t.push(A.DOUBLEDOT),c.push(".."),d=h.charAt(p++);continue}if(d>="0"&&d<="9"){var I="."+d;for(d=h.charAt(p++);d>="0"&&d<="9";)I+=d,d=h.charAt(p++);t.push(A.NUMBER),c.push(I);continue}t.push(A.DOT),c.push(".");continue}if(d=="'"||d=='"'){for(var k=d,Q="";p<h.length&&(d=h.charAt(p))!==k;)Q+=d,p+=1;if(d!==k)throw J.fromMessage("Unterminated string literal: "+k+Q);p+=1,t.push(A.LITERAL),c.push(Q),d=h.charAt(p++);continue}if(d>="0"&&d<="9"){var I=d;for(d=h.charAt(p++);d>="0"&&d<="9";)I+=d,d=h.charAt(p++);if(d=="."&&h.charAt(p)>="0"&&h.charAt(p)<="9")for(I+=d,I+=h.charAt(p++),d=h.charAt(p++);d>="0"&&d<="9";)I+=d,d=h.charAt(p++);t.push(A.NUMBER),c.push(I);continue}if(d=="*"){if(t.length>0){var B=t[t.length-1];if(B!=A.AT&&B!=A.DOUBLECOLON&&B!=A.LEFTPARENTHESIS&&B!=A.LEFTBRACKET&&B!=A.AND&&B!=A.OR&&B!=A.MOD&&B!=A.DIV&&B!=A.MULTIPLYOPERATOR&&B!=A.SLASH&&B!=A.DOUBLESLASH&&B!=A.BAR&&B!=A.PLUS&&B!=A.MINUS&&B!=A.EQUALS&&B!=A.NOTEQUAL&&B!=A.LESSTHAN&&B!=A.LESSTHANOREQUAL&&B!=A.GREATERTHAN&&B!=A.GREATERTHANOREQUAL){t.push(A.MULTIPLYOPERATOR),c.push(d),d=h.charAt(p++);continue}}t.push(A.ASTERISKNAMETEST),c.push(d),d=h.charAt(p++);continue}if(d==":"&&h.charAt(p)==":"){t.push(A.DOUBLECOLON),c.push("::"),p++,d=h.charAt(p++);continue}if(d=="/"){if(d=h.charAt(p++),d=="/"){t.push(A.DOUBLESLASH),c.push("//"),d=h.charAt(p++);continue}t.push(A.SLASH),c.push("/");continue}if(d=="!"&&h.charAt(p)=="="){t.push(A.NOTEQUAL),c.push("!="),p++,d=h.charAt(p++);continue}if(d=="<"){if(h.charAt(p)=="="){t.push(A.LESSTHANOREQUAL),c.push("<="),p++,d=h.charAt(p++);continue}t.push(A.LESSTHAN),c.push("<"),d=h.charAt(p++);continue}if(d==">"){if(h.charAt(p)=="="){t.push(A.GREATERTHANOREQUAL),c.push(">="),p++,d=h.charAt(p++);continue}t.push(A.GREATERTHAN),c.push(">"),d=h.charAt(p++);continue}if(d=="_"||C.isLetter(d.charCodeAt(0))){var H=d;for(d=h.charAt(p++);C.isNCNameChar(d.charCodeAt(0));)H+=d,d=h.charAt(p++);if(t.length>0){var B=t[t.length-1];if(B!=A.AT&&B!=A.DOUBLECOLON&&B!=A.LEFTPARENTHESIS&&B!=A.LEFTBRACKET&&B!=A.AND&&B!=A.OR&&B!=A.MOD&&B!=A.DIV&&B!=A.MULTIPLYOPERATOR&&B!=A.SLASH&&B!=A.DOUBLESLASH&&B!=A.BAR&&B!=A.PLUS&&B!=A.MINUS&&B!=A.EQUALS&&B!=A.NOTEQUAL&&B!=A.LESSTHAN&&B!=A.LESSTHANOREQUAL&&B!=A.GREATERTHAN&&B!=A.GREATERTHANOREQUAL){if(H=="and"){t.push(A.AND),c.push(H);continue}if(H=="or"){t.push(A.OR),c.push(H);continue}if(H=="mod"){t.push(A.MOD),c.push(H);continue}if(H=="div"){t.push(A.DIV),c.push(H);continue}}}if(d==":"){if(h.charAt(p)=="*"){t.push(A.NCNAMECOLONASTERISK),c.push(H+":*"),p++,d=h.charAt(p++);continue}if(h.charAt(p)=="_"||C.isLetter(h.charCodeAt(p))){for(H+=":",d=h.charAt(p++);C.isNCNameChar(d.charCodeAt(0));)H+=d,d=h.charAt(p++);if(d=="("){t.push(A.FUNCTIONNAME),c.push(H);continue}t.push(A.QNAME),c.push(H);continue}if(h.charAt(p)==":"){t.push(A.AXISNAME),c.push(H);continue}}if(d=="("){if(H=="comment"||H=="text"||H=="node"){t.push(A.NODETYPE),c.push(H);continue}if(H=="processing-instruction"){h.charAt(p)==")"?t.push(A.NODETYPE):t.push(A.PROCESSINGINSTRUCTIONWITHLITERAL),c.push(H);continue}t.push(A.FUNCTIONNAME),c.push(H);continue}t.push(A.QNAME),c.push(H);continue}throw new Error("Unexpected character "+d)}return t.push(1),c.push("[EOF]"),[t,c]},A.SHIFT="s",A.REDUCE="r",A.ACCEPT="a",A.prototype.parse=function(Q){var t,c,h=this.tokenize(Q);if(h!=null){t=h[0],c=h[1];var p=0,d=[],I=[],k=[],Q,B,H;for(d.push(0),I.push(1),k.push("_S"),B=t[p],H=c[p++];;)switch(Q=d[d.length-1],A.actionTable[Q].charAt(B-1)){case A.SHIFT:I.push(-B),k.push(H),d.push(A.actionTableNumber[Q].charCodeAt(B-1)-32),B=t[p],H=c[p++];break;case A.REDUCE:for(var Ae=A.productions[A.actionTableNumber[Q].charCodeAt(B-1)-32][1],te=[],We=0;We<Ae;We++)I.pop(),te.unshift(k.pop()),d.pop();var et=d[d.length-1];I.push(A.productions[A.actionTableNumber[Q].charCodeAt(B-1)-32][0]),this.reduceActions[A.actionTableNumber[Q].charCodeAt(B-1)-32]==null?k.push(te[0]):k.push(this.reduceActions[A.actionTableNumber[Q].charCodeAt(B-1)-32](te)),d.push(A.gotoTable[et].charCodeAt(A.productions[A.actionTableNumber[Q].charCodeAt(B-1)-32][0]-2)-33);break;case A.ACCEPT:return new le(k.pop());default:throw new Error("XPath parse error")}}},le.prototype=new Object,le.prototype.constructor=le,le.superclass=Object.prototype;function le(e){this.expression=e}le.prototype.toString=function(){return this.expression.toString()};function Ze(e,t,c){t in e||(e[t]=c)}le.prototype.evaluate=function(e){return e.contextNode=e.expressionContextNode,e.contextSize=1,e.contextPosition=1,e.isHtml&&(Ze(e,"caseInsensitive",!0),Ze(e,"allowAnyNamespaceForNoPrefix",!0)),Ze(e,"caseInsensitive",!1),this.expression.evaluate(e)},le.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace",le.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/",X.prototype=new Object,X.prototype.constructor=X,X.superclass=Object.prototype;function X(){}X.prototype.init=function(){},X.prototype.toString=function(){return"<Expression>"},X.prototype.evaluate=function(e){throw new Error("Could not evaluate expression.")},fe.prototype=new X,fe.prototype.constructor=fe,fe.superclass=X.prototype;function fe(e){arguments.length>0&&this.init(e)}fe.prototype.init=function(e){this.rhs=e},he.prototype=new fe,he.prototype.constructor=he,he.superclass=fe.prototype;function he(e){arguments.length>0&&this.init(e)}he.prototype.init=function(e){he.superclass.init.call(this,e)},he.prototype.evaluate=function(e){return this.rhs.evaluate(e).number().negate()},he.prototype.toString=function(){return"-"+this.rhs.toString()},W.prototype=new X,W.prototype.constructor=W,W.superclass=X.prototype;function W(e,t){arguments.length>0&&this.init(e,t)}W.prototype.init=function(e,t){this.lhs=e,this.rhs=t},Re.prototype=new W,Re.prototype.constructor=Re,Re.superclass=W.prototype;function Re(e,t){arguments.length>0&&this.init(e,t)}Re.prototype.init=function(e,t){Re.superclass.init.call(this,e,t)},Re.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"},Re.prototype.evaluate=function(e){var t=this.lhs.evaluate(e).bool();return t.booleanValue()?t:this.rhs.evaluate(e).bool()},Fe.prototype=new W,Fe.prototype.constructor=Fe,Fe.superclass=W.prototype;function Fe(e,t){arguments.length>0&&this.init(e,t)}Fe.prototype.init=function(e,t){Fe.superclass.init.call(this,e,t)},Fe.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"},Fe.prototype.evaluate=function(e){var t=this.lhs.evaluate(e).bool();return t.booleanValue()?this.rhs.evaluate(e).bool():t},Oe.prototype=new W,Oe.prototype.constructor=Oe,Oe.superclass=W.prototype;function Oe(e,t){arguments.length>0&&this.init(e,t)}Oe.prototype.init=function(e,t){Oe.superclass.init.call(this,e,t)},Oe.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"},Oe.prototype.evaluate=function(e){return this.lhs.evaluate(e).equals(this.rhs.evaluate(e))},Ie.prototype=new W,Ie.prototype.constructor=Ie,Ie.superclass=W.prototype;function Ie(e,t){arguments.length>0&&this.init(e,t)}Ie.prototype.init=function(e,t){Ie.superclass.init.call(this,e,t)},Ie.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"},Ie.prototype.evaluate=function(e){return this.lhs.evaluate(e).notequal(this.rhs.evaluate(e))},be.prototype=new W,be.prototype.constructor=be,be.superclass=W.prototype;function be(e,t){arguments.length>0&&this.init(e,t)}be.prototype.init=function(e,t){be.superclass.init.call(this,e,t)},be.prototype.evaluate=function(e){return this.lhs.evaluate(e).lessthan(this.rhs.evaluate(e))},be.prototype.toString=function(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"},oe.prototype=new W,oe.prototype.constructor=oe,oe.superclass=W.prototype;function oe(e,t){arguments.length>0&&this.init(e,t)}oe.prototype.init=function(e,t){oe.superclass.init.call(this,e,t)},oe.prototype.evaluate=function(e){return this.lhs.evaluate(e).greaterthan(this.rhs.evaluate(e))},oe.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"},ge.prototype=new W,ge.prototype.constructor=ge,ge.superclass=W.prototype;function ge(e,t){arguments.length>0&&this.init(e,t)}ge.prototype.init=function(e,t){ge.superclass.init.call(this,e,t)},ge.prototype.evaluate=function(e){return this.lhs.evaluate(e).lessthanorequal(this.rhs.evaluate(e))},ge.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"},ye.prototype=new W,ye.prototype.constructor=ye,ye.superclass=W.prototype;function ye(e,t){arguments.length>0&&this.init(e,t)}ye.prototype.init=function(e,t){ye.superclass.init.call(this,e,t)},ye.prototype.evaluate=function(e){return this.lhs.evaluate(e).greaterthanorequal(this.rhs.evaluate(e))},ye.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"},xe.prototype=new W,xe.prototype.constructor=xe,xe.superclass=W.prototype;function xe(e,t){arguments.length>0&&this.init(e,t)}xe.prototype.init=function(e,t){xe.superclass.init.call(this,e,t)},xe.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().plus(this.rhs.evaluate(e).number())},xe.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"},Be.prototype=new W,Be.prototype.constructor=Be,Be.superclass=W.prototype;function Be(e,t){arguments.length>0&&this.init(e,t)}Be.prototype.init=function(e,t){Be.superclass.init.call(this,e,t)},Be.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().minus(this.rhs.evaluate(e).number())},Be.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"},Le.prototype=new W,Le.prototype.constructor=Le,Le.superclass=W.prototype;function Le(e,t){arguments.length>0&&this.init(e,t)}Le.prototype.init=function(e,t){Le.superclass.init.call(this,e,t)},Le.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().multiply(this.rhs.evaluate(e).number())},Le.prototype.toString=function(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"},Pe.prototype=new W,Pe.prototype.constructor=Pe,Pe.superclass=W.prototype;function Pe(e,t){arguments.length>0&&this.init(e,t)}Pe.prototype.init=function(e,t){Pe.superclass.init.call(this,e,t)},Pe.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().div(this.rhs.evaluate(e).number())},Pe.prototype.toString=function(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"},Se.prototype=new W,Se.prototype.constructor=Se,Se.superclass=W.prototype;function Se(e,t){arguments.length>0&&this.init(e,t)}Se.prototype.init=function(e,t){Se.superclass.init.call(this,e,t)},Se.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().mod(this.rhs.evaluate(e).number())},Se.prototype.toString=function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"},Z.prototype=new W,Z.prototype.constructor=Z,Z.superclass=W.prototype;function Z(e,t){arguments.length>0&&this.init(e,t)}Z.prototype.init=function(e,t){Z.superclass.init.call(this,e,t)},Z.prototype.evaluate=function(e){return this.lhs.evaluate(e).nodeset().union(this.rhs.evaluate(e).nodeset())},Z.prototype.toString=function(){return v(G,[this.lhs,this.rhs]).join(" | ")},P.prototype=new X,P.prototype.constructor=P,P.superclass=X.prototype;function P(e,t,c){arguments.length>0&&this.init(e,t,c)}P.prototype.init=function(e,t,c){P.superclass.init.call(this),this.filter=e,this.filterPredicates=t,this.locationPath=c};function ut(e){for(;e&&e.parentNode;)e=e.parentNode;return e}P.applyPredicates=function(e,t,c){if(e.length===0)return c;var h=t.extend({});return E(function(p,d){return h.contextSize=p.length,m(function(I,k){return h.contextNode=I,h.contextPosition=k+1,P.predicateMatches(d,h)},p)},c,e)},P.getRoot=function(e,t){var c=t[0];if(c.nodeType===9)return c;if(e.virtualRoot)return e.virtualRoot;var h=c.ownerDocument;if(h)return h;for(var p=c;p.parentNode!=null;)p=p.parentNode;return p},P.applyStep=function(e,t,c){var h=[];switch(t.contextNode=c,e.axis){case R.ANCESTOR:if(t.contextNode===t.virtualRoot)break;var p;for(t.contextNode.nodeType==2?p=P.getOwnerElement(t.contextNode):p=t.contextNode.parentNode;p!=null&&(e.nodeTest.matches(p,t)&&h.push(p),p!==t.virtualRoot);)p=p.parentNode;break;case R.ANCESTORORSELF:for(var p=t.contextNode;p!=null&&(e.nodeTest.matches(p,t)&&h.push(p),p!==t.virtualRoot);p=p.nodeType==2?P.getOwnerElement(p):p.parentNode);break;case R.ATTRIBUTE:var d=t.contextNode.attributes;if(d!=null)for(var I=0;I<d.length;I++){var p=d.item(I);e.nodeTest.matches(p,t)&&h.push(p)}break;case R.CHILD:for(var p=t.contextNode.firstChild;p!=null;p=p.nextSibling)e.nodeTest.matches(p,t)&&h.push(p);break;case R.DESCENDANT:for(var te=[t.contextNode.firstChild];te.length>0;)for(var p=te.pop();p!=null;)e.nodeTest.matches(p,t)&&h.push(p),p.firstChild!=null?(te.push(p.nextSibling),p=p.firstChild):p=p.nextSibling;break;case R.DESCENDANTORSELF:e.nodeTest.matches(t.contextNode,t)&&h.push(t.contextNode);for(var te=[t.contextNode.firstChild];te.length>0;)for(var p=te.pop();p!=null;)e.nodeTest.matches(p,t)&&h.push(p),p.firstChild!=null?(te.push(p.nextSibling),p=p.firstChild):p=p.nextSibling;break;case R.FOLLOWING:if(t.contextNode===t.virtualRoot)break;var te=[];t.contextNode.firstChild!=null?te.unshift(t.contextNode.firstChild):te.unshift(t.contextNode.nextSibling);for(var p=t.contextNode.parentNode;p!=null&&p.nodeType!=9&&p!==t.virtualRoot;p=p.parentNode)te.unshift(p.nextSibling);do for(var p=te.pop();p!=null;)e.nodeTest.matches(p,t)&&h.push(p),p.firstChild!=null?(te.push(p.nextSibling),p=p.firstChild):p=p.nextSibling;while(te.length>0);break;case R.FOLLOWINGSIBLING:if(t.contextNode===t.virtualRoot)break;for(var p=t.contextNode.nextSibling;p!=null;p=p.nextSibling)e.nodeTest.matches(p,t)&&h.push(p);break;case R.NAMESPACE:var k={};if(t.contextNode.nodeType==1){k.xml=le.XML_NAMESPACE_URI,k.xmlns=le.XMLNS_NAMESPACE_URI;for(var p=t.contextNode;p!=null&&p.nodeType==1;p=p.parentNode)for(var I=0;I<p.attributes.length;I++){var Q=p.attributes.item(I),B=String(Q.name);if(B=="xmlns")k[""]==null&&(k[""]=Q.value);else if(B.length>6&&B.substring(0,6)=="xmlns:"){var H=B.substring(6,B.length);k[H]==null&&(k[H]=Q.value)}}for(var H in k){var Ae=new y(H,k[H],t.contextNode);e.nodeTest.matches(Ae,t)&&h.push(Ae)}}break;case R.PARENT:p=null,t.contextNode!==t.virtualRoot&&(t.contextNode.nodeType==2?p=P.getOwnerElement(t.contextNode):p=t.contextNode.parentNode),p!=null&&e.nodeTest.matches(p,t)&&h.push(p);break;case R.PRECEDING:var te;t.virtualRoot!=null?te=[t.virtualRoot]:te=[ut(t.contextNode)];e:for(;te.length>0;)for(var p=te.pop();p!=null;){if(p==t.contextNode)break e;e.nodeTest.matches(p,t)&&h.unshift(p),p.firstChild!=null?(te.push(p.nextSibling),p=p.firstChild):p=p.nextSibling}break;case R.PRECEDINGSIBLING:if(t.contextNode===t.virtualRoot)break;for(var p=t.contextNode.previousSibling;p!=null;p=p.previousSibling)e.nodeTest.matches(p,t)&&h.push(p);break;case R.SELF:e.nodeTest.matches(t.contextNode,t)&&h.push(t.contextNode);break}return h};function se(e,t,c){return P.applyPredicates(e.predicates,t,P.applyStep(e,t,c))}function lt(e,t,c){return qe(v(se.bind(null,c,e),t))}P.applySteps=function(e,t,c){return E(lt.bind(null,t),c,e)},P.prototype.applyFilter=function(e,t){if(!this.filter)return{nodes:[e.contextNode]};var c=this.filter.evaluate(e);if(!C.instance_of(c,s)){if(this.filterPredicates!=null&&this.filterPredicates.length>0||this.locationPath!=null)throw new Error("Path expression filter must evaluate to a nodeset if predicates or location path are used");return{nonNodes:c}}return{nodes:P.applyPredicates(this.filterPredicates||[],t,c.toUnsortedArray())}},P.applyLocationPath=function(e,t,c){if(!e)return c;var h=e.absolute?[P.getRoot(t,c)]:c;return P.applySteps(e.steps,t,h)},P.prototype.evaluate=function(e){var t=it(new w,e),c=this.applyFilter(e,t);if("nonNodes"in c)return c.nonNodes;var h=new s;return h.addArray(P.applyLocationPath(this.locationPath,t,c.nodes)),h},P.predicateMatches=function(e,t){var c=e.evaluate(t);return C.instance_of(c,O)?t.contextPosition===c.numberValue():c.booleanValue()},P.predicateString=function(e){return ue("[","]",e.toString())},P.predicatesString=function(e){return j("",v(P.predicateString,e))},P.prototype.toString=function(){if(this.filter!=null){var e=G(this.filter);return C.instance_of(this.filter,M)?ue("'","'",e):this.filterPredicates!=null&&this.filterPredicates.length?ue("(",")",e)+P.predicatesString(this.filterPredicates):this.locationPath!=null?e+(this.locationPath.absolute?"":"/")+G(this.locationPath):e}return G(this.locationPath)},P.getOwnerElement=function(e){if(e.ownerElement)return e.ownerElement;try{if(e.selectSingleNode)return e.selectSingleNode("..")}catch{}for(var t=e.nodeType==9?e:e.ownerDocument,c=t.getElementsByTagName("*"),h=0;h<c.length;h++)for(var p=c.item(h),d=p.attributes,I=0;I<d.length;I++){var k=d.item(I);if(k===e)return p}return null},ee.prototype=new Object,ee.prototype.constructor=ee,ee.superclass=Object.prototype;function ee(e,t){arguments.length>0&&this.init(e,t)}ee.prototype.init=function(e,t){this.absolute=e,this.steps=t},ee.prototype.toString=function(){return(this.absolute?"/":"")+v(G,this.steps).join("/")},R.prototype=new Object,R.prototype.constructor=R,R.superclass=Object.prototype;function R(e,t,c){arguments.length>0&&this.init(e,t,c)}R.prototype.init=function(e,t,c){this.axis=e,this.nodeTest=t,this.predicates=c},R.prototype.toString=function(){return R.STEPNAMES[this.axis]+"::"+this.nodeTest.toString()+P.predicatesString(this.predicates)},R.ANCESTOR=0,R.ANCESTORORSELF=1,R.ATTRIBUTE=2,R.CHILD=3,R.DESCENDANT=4,R.DESCENDANTORSELF=5,R.FOLLOWING=6,R.FOLLOWINGSIBLING=7,R.NAMESPACE=8,R.PARENT=9,R.PRECEDING=10,R.PRECEDINGSIBLING=11,R.SELF=12,R.STEPNAMES=E(function(e,t){return e[t[0]]=t[1],e},{},[[R.ANCESTOR,"ancestor"],[R.ANCESTORORSELF,"ancestor-or-self"],[R.ATTRIBUTE,"attribute"],[R.CHILD,"child"],[R.DESCENDANT,"descendant"],[R.DESCENDANTORSELF,"descendant-or-self"],[R.FOLLOWING,"following"],[R.FOLLOWINGSIBLING,"following-sibling"],[R.NAMESPACE,"namespace"],[R.PARENT,"parent"],[R.PRECEDING,"preceding"],[R.PRECEDINGSIBLING,"preceding-sibling"],[R.SELF,"self"]]),F.prototype=new Object,F.prototype.constructor=F,F.superclass=Object.prototype;function F(e,t){arguments.length>0&&this.init(e,t)}F.prototype.init=function(e,t){this.type=e,this.value=t},F.prototype.toString=function(){return"<unknown nodetest type>"},F.prototype.matches=function(e,t){console.warn("unknown node test type")},F.NAMETESTANY=0,F.NAMETESTPREFIXANY=1,F.NAMETESTQNAME=2,F.COMMENT=3,F.TEXT=4,F.PI=5,F.NODE=6,F.isNodeType=function(e){return function(t){return _(e,t.nodeType)}},F.makeNodeTestType=function(e,t,c){var h=c||function(){};return h.prototype=new F(e),h.prototype.constructor=h,it(h.prototype,t),h},F.makeNodeTypeTest=function(e,t,c){return new(F.makeNodeTestType(e,{matches:F.isNodeType(t),toString:U(c)}))},F.hasPrefix=function(e){return e.prefix||(e.nodeName||e.tagName).indexOf(":")!==-1},F.isElementOrAttribute=F.isNodeType([1,2]),F.nameSpaceMatches=function(e,t,c){var h=c.namespaceURI||"";if(!e)return!h||t.allowAnyNamespaceForNoPrefix&&!F.hasPrefix(c);var p=t.namespaceResolver.getNamespace(e,t.expressionContextNode);if(p==null)throw new Error("Cannot resolve QName "+e);return p===h},F.localNameMatches=function(e,t,c){var h=c.localName||c.nodeName;return t.caseInsensitive?e.toLowerCase()===h.toLowerCase():e===h},F.NameTestPrefixAny=F.makeNodeTestType(F.NAMETESTPREFIXANY,{matches:function(e,t){return F.isElementOrAttribute(e)&&F.nameSpaceMatches(this.prefix,t,e)},toString:function(){return this.prefix+":*"}},function(t){this.prefix=t}),F.NameTestQName=F.makeNodeTestType(F.NAMETESTQNAME,{matches:function(e,t){return F.isNodeType([1,2,y.XPATH_NAMESPACE_NODE])(e)&&F.nameSpaceMatches(this.prefix,t,e)&&F.localNameMatches(this.localName,t,e)},toString:function(){return this.name}},function(t){var c=t.split(":");this.name=t,this.prefix=c.length>1?c[0]:null,this.localName=c[c.length>1?1:0]}),F.PITest=F.makeNodeTestType(F.PI,{matches:function(e,t){return F.isNodeType([7])(e)&&(e.target||e.nodeName)===this.name},toString:function(){return ue('processing-instruction("','")',this.name)}},function(e){this.name=e}),F.nameTestAny=F.makeNodeTypeTest(F.NAMETESTANY,[1,2,y.XPATH_NAMESPACE_NODE],"*"),F.textTest=F.makeNodeTypeTest(F.TEXT,[3,4],"text()"),F.commentTest=F.makeNodeTypeTest(F.COMMENT,[8],"comment()"),F.nodeTest=F.makeNodeTypeTest(F.NODE,[1,2,3,4,7,8,9],"node()"),F.anyPiTest=F.makeNodeTypeTest(F.PI,[7],"processing-instruction()"),Me.prototype=new X,Me.prototype.constructor=Me,Me.superclass=X.prototype;function Me(e){arguments.length>0&&this.init(e)}Me.prototype.init=function(e){this.variable=e},Me.prototype.toString=function(){return"$"+this.variable},Me.prototype.evaluate=function(e){var t=C.resolveQName(this.variable,e.namespaceResolver,e.contextNode,!1);if(t[0]==null)throw new Error("Cannot resolve QName "+fn);var c=e.variableResolver.getVariable(t[1],t[0]);if(!c)throw J.fromMessage("Undeclared variable: "+this.toString());return c},ve.prototype=new X,ve.prototype.constructor=ve,ve.superclass=X.prototype;function ve(e,t){arguments.length>0&&this.init(e,t)}ve.prototype.init=function(e,t){this.functionName=e,this.arguments=t},ve.prototype.toString=function(){for(var e=this.functionName+"(",t=0;t<this.arguments.length;t++)t>0&&(e+=", "),e+=this.arguments[t].toString();return e+")"},ve.prototype.evaluate=function(e){var t=$.getFunctionFromContext(this.functionName,e);if(!t)throw new Error("Unknown function "+this.functionName);var c=[e].concat(this.arguments);return t.apply(e.functionResolver.thisArg,c)};var ie=new Object;ie.equals=function(e,t){return e.equals(t)},ie.notequal=function(e,t){return e.notequal(t)},ie.lessthan=function(e,t){return e.lessthan(t)},ie.greaterthan=function(e,t){return e.greaterthan(t)},ie.lessthanorequal=function(e,t){return e.lessthanorequal(t)},ie.greaterthanorequal=function(e,t){return e.greaterthanorequal(t)},M.prototype=new X,M.prototype.constructor=M,M.superclass=X.prototype;function M(e){arguments.length>0&&this.init(e)}M.prototype.init=function(e){this.str=String(e)},M.prototype.toString=function(){return this.str},M.prototype.evaluate=function(e){return this},M.prototype.string=function(){return this},M.prototype.number=function(){return new O(this.str)},M.prototype.bool=function(){return new o(this.str)},M.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset")},M.prototype.stringValue=function(){return this.str},M.prototype.numberValue=function(){return this.number().numberValue()},M.prototype.booleanValue=function(){return this.bool().booleanValue()},M.prototype.equals=function(e){return C.instance_of(e,o)?this.bool().equals(e):C.instance_of(e,O)?this.number().equals(e):C.instance_of(e,s)?e.compareWithString(this,ie.equals):new o(this.str==e.str)},M.prototype.notequal=function(e){return C.instance_of(e,o)?this.bool().notequal(e):C.instance_of(e,O)?this.number().notequal(e):C.instance_of(e,s)?e.compareWithString(this,ie.notequal):new o(this.str!=e.str)},M.prototype.lessthan=function(e){return this.number().lessthan(e)},M.prototype.greaterthan=function(e){return this.number().greaterthan(e)},M.prototype.lessthanorequal=function(e){return this.number().lessthanorequal(e)},M.prototype.greaterthanorequal=function(e){return this.number().greaterthanorequal(e)},O.prototype=new X,O.prototype.constructor=O,O.superclass=X.prototype;function O(e){arguments.length>0&&this.init(e)}O.prototype.init=function(e){this.num=typeof e=="string"?this.parse(e):Number(e)},O.prototype.numberFormat=/^\s*-?[0-9]*\.?[0-9]+\s*$/,O.prototype.parse=function(e){return this.numberFormat.test(e)?parseFloat(e):Number.NaN};function rt(e){for(var t=e.split("e-"),c=t[0].replace(".",""),h=Number(t[1]),p=0;p<h-1;p+=1)c="0"+c;return"0."+c}function ct(e){for(var t=e.split("e"),c=t[0].replace(".",""),h=Number(t[1]),p=h+1-c.length,d=0;d<p;d+=1)c+="0";return c}O.prototype.toString=function(){var e=this.num.toString();return e.indexOf("e-")!==-1?rt(e):e.indexOf("e")!==-1?ct(e):e},O.prototype.evaluate=function(e){return this},O.prototype.string=function(){return new M(this.toString())},O.prototype.number=function(){return this},O.prototype.bool=function(){return new o(this.num)},O.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset")},O.prototype.stringValue=function(){return this.string().stringValue()},O.prototype.numberValue=function(){return this.num},O.prototype.booleanValue=function(){return this.bool().booleanValue()},O.prototype.negate=function(){return new O(-this.num)},O.prototype.equals=function(e){return C.instance_of(e,o)?this.bool().equals(e):C.instance_of(e,M)?this.equals(e.number()):C.instance_of(e,s)?e.compareWithNumber(this,ie.equals):new o(this.num==e.num)},O.prototype.notequal=function(e){return C.instance_of(e,o)?this.bool().notequal(e):C.instance_of(e,M)?this.notequal(e.number()):C.instance_of(e,s)?e.compareWithNumber(this,ie.notequal):new o(this.num!=e.num)},O.prototype.lessthan=function(e){return C.instance_of(e,s)?e.compareWithNumber(this,ie.greaterthan):C.instance_of(e,o)||C.instance_of(e,M)?this.lessthan(e.number()):new o(this.num<e.num)},O.prototype.greaterthan=function(e){return C.instance_of(e,s)?e.compareWithNumber(this,ie.lessthan):C.instance_of(e,o)||C.instance_of(e,M)?this.greaterthan(e.number()):new o(this.num>e.num)},O.prototype.lessthanorequal=function(e){return C.instance_of(e,s)?e.compareWithNumber(this,ie.greaterthanorequal):C.instance_of(e,o)||C.instance_of(e,M)?this.lessthanorequal(e.number()):new o(this.num<=e.num)},O.prototype.greaterthanorequal=function(e){return C.instance_of(e,s)?e.compareWithNumber(this,ie.lessthanorequal):C.instance_of(e,o)||C.instance_of(e,M)?this.greaterthanorequal(e.number()):new o(this.num>=e.num)},O.prototype.plus=function(e){return new O(this.num+e.num)},O.prototype.minus=function(e){return new O(this.num-e.num)},O.prototype.multiply=function(e){return new O(this.num*e.num)},O.prototype.div=function(e){return new O(this.num/e.num)},O.prototype.mod=function(e){return new O(this.num%e.num)},o.prototype=new X,o.prototype.constructor=o,o.superclass=X.prototype;function o(e){arguments.length>0&&this.init(e)}o.prototype.init=function(e){this.b=Boolean(e)},o.prototype.toString=function(){return this.b.toString()},o.prototype.evaluate=function(e){return this},o.prototype.string=function(){return new M(this.b)},o.prototype.number=function(){return new O(this.b)},o.prototype.bool=function(){return this},o.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset")},o.prototype.stringValue=function(){return this.string().stringValue()},o.prototype.numberValue=function(){return this.number().numberValue()},o.prototype.booleanValue=function(){return this.b},o.prototype.not=function(){return new o(!this.b)},o.prototype.equals=function(e){return C.instance_of(e,M)||C.instance_of(e,O)?this.equals(e.bool()):C.instance_of(e,s)?e.compareWithBoolean(this,ie.equals):new o(this.b==e.b)},o.prototype.notequal=function(e){return C.instance_of(e,M)||C.instance_of(e,O)?this.notequal(e.bool()):C.instance_of(e,s)?e.compareWithBoolean(this,ie.notequal):new o(this.b!=e.b)},o.prototype.lessthan=function(e){return this.number().lessthan(e)},o.prototype.greaterthan=function(e){return this.number().greaterthan(e)},o.prototype.lessthanorequal=function(e){return this.number().lessthanorequal(e)},o.prototype.greaterthanorequal=function(e){return this.number().greaterthanorequal(e)},o.true_=new o(!0),o.false_=new o(!1),r.prototype=new Object,r.prototype.constructor=r,r.superclass=Object.prototype;function r(e){this.init(e)}r.prototype.init=function(e){this.left=null,this.right=null,this.node=e,this.depth=1},r.prototype.balance=function(){var e=this.left==null?0:this.left.depth,t=this.right==null?0:this.right.depth;if(e>t+1){var c=this.left.left==null?0:this.left.left.depth,h=this.left.right==null?0:this.left.right.depth;c<h&&this.left.rotateRR(),this.rotateLL()}else if(e+1<t){var p=this.right.right==null?0:this.right.right.depth,d=this.right.left==null?0:this.right.left.depth;d>p&&this.right.rotateLL(),this.rotateRR()}},r.prototype.rotateLL=function(){var e=this.node,t=this.right;this.node=this.left.node,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=t,this.right.node=e,this.right.updateInNewLocation(),this.updateInNewLocation()},r.prototype.rotateRR=function(){var e=this.node,t=this.left;this.node=this.right.node,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=t,this.left.node=e,this.left.updateInNewLocation(),this.updateInNewLocation()},r.prototype.updateInNewLocation=function(){this.getDepthFromChildren()},r.prototype.getDepthFromChildren=function(){this.depth=this.node==null?0:1,this.left!=null&&(this.depth=this.left.depth+1),this.right!=null&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1)};function n(e,t){if(e===t)return 0;if(e.compareDocumentPosition){var c=e.compareDocumentPosition(t);return c&1||c&10?1:c&20?-1:0}for(var h=0,p=0,d=e;d!=null;d=d.parentNode||d.ownerElement)h++;for(var I=t;I!=null;I=I.parentNode||I.ownerElement)p++;if(h>p){for(;h>p;)e=e.parentNode||e.ownerElement,h--;if(e===t)return 1}else if(p>h){for(;p>h;)t=t.parentNode||t.ownerElement,p--;if(e===t)return-1}for(var k=e.parentNode||e.ownerElement,Q=t.parentNode||t.ownerElement;k!==Q;)e=k,t=Q,k=e.parentNode||e.ownerElement,Q=t.parentNode||t.ownerElement;var B=C.isAttribute(e),H=C.isAttribute(t);if(B&&!H)return-1;if(!B&&H)return 1;if(k)for(var Ae=B?k.attributes:k.childNodes,te=Ae.length,We=0;We<te;We+=1){var et=Ae[We];if(et===e)return-1;if(et===t)return 1}throw new Error("Unexpected: could not determine node order")}r.prototype.add=function(e){if(e===this.node)return!1;var t=n(e,this.node),c=!1;return t==-1?this.left==null?(this.left=new r(e),c=!0):(c=this.left.add(e),c&&this.balance()):t==1&&(this.right==null?(this.right=new r(e),c=!0):(c=this.right.add(e),c&&this.balance())),c&&this.getDepthFromChildren(),c},s.prototype=new X,s.prototype.constructor=s,s.superclass=X.prototype;function s(){this.init()}s.prototype.init=function(){this.tree=null,this.nodes=[],this.size=0},s.prototype.toString=function(){var e=this.first();return e==null?"":this.stringForNode(e)},s.prototype.evaluate=function(e){return this},s.prototype.string=function(){return new M(this.toString())},s.prototype.stringValue=function(){return this.toString()},s.prototype.number=function(){return new O(this.string())},s.prototype.numberValue=function(){return Number(this.string())},s.prototype.bool=function(){return new o(this.booleanValue())},s.prototype.booleanValue=function(){return!!this.size},s.prototype.nodeset=function(){return this},s.prototype.stringForNode=function(e){return e.nodeType==9||e.nodeType==1||e.nodeType===11?this.stringForContainerNode(e):e.nodeType===2?e.value||e.nodeValue:e.isNamespaceNode?e.namespace:e.nodeValue},s.prototype.stringForContainerNode=function(e){for(var t="",c=e.firstChild;c!=null;c=c.nextSibling){var h=c.nodeType;(h===1||h===3||h===4||h===9||h===11)&&(t+=this.stringForNode(c))}return t},s.prototype.buildTree=function(){if(!this.tree&&this.nodes.length){this.tree=new r(this.nodes[0]);for(var e=1;e<this.nodes.length;e+=1)this.tree.add(this.nodes[e])}return this.tree},s.prototype.first=function(){var e=this.buildTree();if(e==null)return null;for(;e.left!=null;)e=e.left;return e.node},s.prototype.add=function(e){for(var t=0;t<this.nodes.length;t+=1)if(e===this.nodes[t])return;this.tree=null,this.nodes.push(e),this.size+=1},s.prototype.addArray=function(e){var t=this;f(function(c){t.add(c)},e)},s.prototype.toArray=function(){var e=[];return this.toArrayRec(this.buildTree(),e),e},s.prototype.toArrayRec=function(e,t){e!=null&&(this.toArrayRec(e.left,t),t.push(e.node),this.toArrayRec(e.right,t))},s.prototype.toUnsortedArray=function(){return this.nodes.slice()},s.prototype.compareWithString=function(e,t){for(var c=this.toUnsortedArray(),h=0;h<c.length;h++){var p=c[h],d=new M(this.stringForNode(p)),I=t(d,e);if(I.booleanValue())return I}return new o(!1)},s.prototype.compareWithNumber=function(e,t){for(var c=this.toUnsortedArray(),h=0;h<c.length;h++){var p=c[h],d=new O(this.stringForNode(p)),I=t(d,e);if(I.booleanValue())return I}return new o(!1)},s.prototype.compareWithBoolean=function(e,t){return t(this.bool(),e)},s.prototype.compareWithNodeSet=function(e,t){for(var c=this.toUnsortedArray(),h=function(k,Q){return t(Q,k)},p=0;p<c.length;p++){var d=new M(this.stringForNode(c[p])),I=e.compareWithString(d,h);if(I.booleanValue())return I}return new o(!1)},s.compareWith=l(function(e,t){return C.instance_of(t,M)?this.compareWithString(t,e):C.instance_of(t,O)?this.compareWithNumber(t,e):C.instance_of(t,o)?this.compareWithBoolean(t,e):this.compareWithNodeSet(t,e)}),s.prototype.equals=s.compareWith(ie.equals),s.prototype.notequal=s.compareWith(ie.notequal),s.prototype.lessthan=s.compareWith(ie.lessthan),s.prototype.greaterthan=s.compareWith(ie.greaterthan),s.prototype.lessthanorequal=s.compareWith(ie.lessthanorequal),s.prototype.greaterthanorequal=s.compareWith(ie.greaterthanorequal),s.prototype.union=function(e){var t=new s;return t.addArray(this.toUnsortedArray()),t.addArray(e.toUnsortedArray()),t},y.prototype=new Object,y.prototype.constructor=y,y.superclass=Object.prototype;function y(e,t,c){this.isXPathNamespace=!0,this.ownerDocument=c.ownerDocument,this.nodeName="#namespace",this.prefix=e,this.localName=e,this.namespaceURI=t,this.nodeValue=t,this.ownerElement=c,this.nodeType=y.XPATH_NAMESPACE_NODE}y.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'},w.prototype=new Object,w.prototype.constructor=w,w.superclass=Object.prototype;function w(e,t,c){this.variableResolver=e??new T,this.namespaceResolver=t??new q,this.functionResolver=c??new $}w.prototype.extend=function(e){return it(new w,this,e)},T.prototype=new Object,T.prototype.constructor=T,T.superclass=Object.prototype;function T(){}T.prototype.getVariable=function(e,t){return null},$.prototype=new Object,$.prototype.constructor=$,$.superclass=Object.prototype;function $(e){this.thisArg=e??D,this.functions=new Object,this.addStandardFunctions()}$.prototype.addStandardFunctions=function(){this.functions["{}last"]=D.last,this.functions["{}position"]=D.position,this.functions["{}count"]=D.count,this.functions["{}id"]=D.id,this.functions["{}local-name"]=D.localName,this.functions["{}namespace-uri"]=D.namespaceURI,this.functions["{}name"]=D.name,this.functions["{}string"]=D.string,this.functions["{}concat"]=D.concat,this.functions["{}starts-with"]=D.startsWith,this.functions["{}contains"]=D.contains,this.functions["{}substring-before"]=D.substringBefore,this.functions["{}substring-after"]=D.substringAfter,this.functions["{}substring"]=D.substring,this.functions["{}string-length"]=D.stringLength,this.functions["{}normalize-space"]=D.normalizeSpace,this.functions["{}translate"]=D.translate,this.functions["{}boolean"]=D.boolean_,this.functions["{}not"]=D.not,this.functions["{}true"]=D.true_,this.functions["{}false"]=D.false_,this.functions["{}lang"]=D.lang,this.functions["{}number"]=D.number,this.functions["{}sum"]=D.sum,this.functions["{}floor"]=D.floor,this.functions["{}ceiling"]=D.ceiling,this.functions["{}round"]=D.round},$.prototype.addFunction=function(e,t,c){this.functions["{"+e+"}"+t]=c},$.getFunctionFromContext=function(e,t){var c=C.resolveQName(e,t.namespaceResolver,t.contextNode,!1);if(c[0]===null)throw new Error("Cannot resolve QName "+name);return t.functionResolver.getFunction(c[1],c[0])},$.prototype.getFunction=function(e,t){return this.functions["{"+t+"}"+e]},q.prototype=new Object,q.prototype.constructor=q,q.superclass=Object.prototype;function q(){}q.prototype.getNamespace=function(e,t){if(e=="xml")return le.XML_NAMESPACE_URI;if(e=="xmlns")return le.XMLNS_NAMESPACE_URI;for(t.nodeType==9?t=t.documentElement:t.nodeType==2?t=P.getOwnerElement(t):t.nodeType!=1&&(t=t.parentNode);t!=null&&t.nodeType==1;){for(var c=t.attributes,h=0;h<c.length;h++){var p=c.item(h),d=p.name||p.nodeName;if(d==="xmlns"&&e===""||d==="xmlns:"+e)return String(p.value||p.nodeValue)}t=t.parentNode}return null};var D=new Object;D.last=function(e){if(arguments.length!=1)throw new Error("Function last expects ()");return new O(e.contextSize)},D.position=function(e){if(arguments.length!=1)throw new Error("Function position expects ()");return new O(e.contextPosition)},D.count=function(){var e=arguments[0],t;if(arguments.length!=2||!C.instance_of(t=arguments[1].evaluate(e),s))throw new Error("Function count expects (node-set)");return new O(t.size)},D.id=function(){var e=arguments[0],t;if(arguments.length!=2)throw new Error("Function id expects (object)");t=arguments[1].evaluate(e),C.instance_of(t,s)?t=t.toArray().join(" "):t=t.stringValue();for(var c=t.split(/[\x0d\x0a\x09\x20]+/),h=new s,p=e.contextNode.nodeType==9?e.contextNode:e.contextNode.ownerDocument,d=0;d<c.length;d++){var I;p.getElementById?I=p.getElementById(c[d]):I=C.getElementById(p,c[d]),I!=null&&h.add(I)}return h},D.localName=function(e,t){var c;if(arguments.length==1)c=e.contextNode;else if(arguments.length==2)c=t.evaluate(e).first();else throw new Error("Function local-name expects (node-set?)");return c==null?new M(""):new M(c.localName||c.baseName||c.target||c.nodeName||"")},D.namespaceURI=function(){var e=arguments[0],t;if(arguments.length==1)t=e.contextNode;else if(arguments.length==2)t=arguments[1].evaluate(e).first();else throw new Error("Function namespace-uri expects (node-set?)");return t==null?new M(""):new M(t.namespaceURI)},D.name=function(){var e=arguments[0],t;if(arguments.length==1)t=e.contextNode;else if(arguments.length==2)t=arguments[1].evaluate(e).first();else throw new Error("Function name expects (node-set?)");return t==null?new M(""):t.nodeType==1?new M(t.nodeName):t.nodeType==2?new M(t.name||t.nodeName):t.nodeType===7?new M(t.target||t.nodeName):t.localName==null?new M(""):new M(t.localName)},D.string=function(){var e=arguments[0];if(arguments.length==1)return new M(s.prototype.stringForNode(e.contextNode));if(arguments.length==2)return arguments[1].evaluate(e).string();throw new Error("Function string expects (object?)")},D.concat=function(e){if(arguments.length<3)throw new Error("Function concat expects (string, string[, string]*)");for(var t="",c=1;c<arguments.length;c++)t+=arguments[c].evaluate(e).stringValue();return new M(t)},D.startsWith=function(){var e=arguments[0];if(arguments.length!=3)throw new Error("Function startsWith expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),c=arguments[2].evaluate(e).stringValue();return new o(t.substring(0,c.length)==c)},D.contains=function(){var e=arguments[0];if(arguments.length!=3)throw new Error("Function contains expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),c=arguments[2].evaluate(e).stringValue();return new o(t.indexOf(c)!==-1)},D.substringBefore=function(){var e=arguments[0];if(arguments.length!=3)throw new Error("Function substring-before expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),c=arguments[2].evaluate(e).stringValue();return new M(t.substring(0,t.indexOf(c)))},D.substringAfter=function(){var e=arguments[0];if(arguments.length!=3)throw new Error("Function substring-after expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),c=arguments[2].evaluate(e).stringValue();if(c.length==0)return new M(t);var h=t.indexOf(c);return h==-1?new M(""):new M(t.substring(h+c.length))},D.substring=function(){var e=arguments[0];if(!(arguments.length==3||arguments.length==4))throw new Error("Function substring expects (string, number, number?)");var t=arguments[1].evaluate(e).stringValue(),c=Math.round(arguments[2].evaluate(e).numberValue())-1,h=arguments.length==4?c+Math.round(arguments[3].evaluate(e).numberValue()):void 0;return new M(t.substring(c,h))},D.stringLength=function(){var e=arguments[0],t;if(arguments.length==1)t=s.prototype.stringForNode(e.contextNode);else if(arguments.length==2)t=arguments[1].evaluate(e).stringValue();else throw new Error("Function string-length expects (string?)");return new O(t.length)},D.normalizeSpace=function(){var e=arguments[0],t;if(arguments.length==1)t=s.prototype.stringForNode(e.contextNode);else if(arguments.length==2)t=arguments[1].evaluate(e).stringValue();else throw new Error("Function normalize-space expects (string?)");for(var c=0,h=t.length-1;C.isSpace(t.charCodeAt(h));)h--;for(var p="";c<=h&&C.isSpace(t.charCodeAt(c));)c++;for(;c<=h;)if(C.isSpace(t.charCodeAt(c)))for(p+=" ";c<=h&&C.isSpace(t.charCodeAt(c));)c++;else p+=t.charAt(c),c++;return new M(p)},D.translate=function(e,t,c,h){if(arguments.length!=4)throw new Error("Function translate expects (string, string, string)");var p=t.evaluate(e).stringValue(),d=c.evaluate(e).stringValue(),I=h.evaluate(e).stringValue(),k=E(function(B,H,Ae){return H in B||(B[H]=Ae>I.length?"":I[Ae]),B},{},d),Q=j("",v(function(B){return B in k?k[B]:B},p));return new M(Q)},D.boolean_=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function boolean expects (object)");return arguments[1].evaluate(e).bool()},D.not=function(e,t){if(arguments.length!=2)throw new Error("Function not expects (object)");return t.evaluate(e).bool().not()},D.true_=function(){if(arguments.length!=1)throw new Error("Function true expects ()");return o.true_},D.false_=function(){if(arguments.length!=1)throw new Error("Function false expects ()");return o.false_},D.lang=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function lang expects (string)");for(var t,c=e.contextNode;c!=null&&c.nodeType!=9;c=c.parentNode){var h=c.getAttributeNS(le.XML_NAMESPACE_URI,"lang");if(h!=null){t=String(h);break}}if(t==null)return o.false_;var p=arguments[1].evaluate(e).stringValue();return new o(t.substring(0,p.length)==p&&(t.length==p.length||t.charAt(p.length)=="-"))},D.number=function(){var e=arguments[0];if(!(arguments.length==1||arguments.length==2))throw new Error("Function number expects (object?)");return arguments.length==1?new O(s.prototype.stringForNode(e.contextNode)):arguments[1].evaluate(e).number()},D.sum=function(){var e=arguments[0],t;if(arguments.length!=2||!C.instance_of(t=arguments[1].evaluate(e),s))throw new Error("Function sum expects (node-set)");t=t.toUnsortedArray();for(var c=0,h=0;h<t.length;h++)c+=new O(s.prototype.stringForNode(t[h])).numberValue();return new O(c)},D.floor=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function floor expects (number)");return new O(Math.floor(arguments[1].evaluate(e).numberValue()))},D.ceiling=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function ceiling expects (number)");return new O(Math.ceil(arguments[1].evaluate(e).numberValue()))},D.round=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function round expects (number)");return new O(Math.round(arguments[1].evaluate(e).numberValue()))};var C=new Object;C.isAttribute=function(e){return e&&(e.nodeType===2||e.ownerElement)},C.splitQName=function(e){var t=e.indexOf(":");return t==-1?[null,e]:[e.substring(0,t),e.substring(t+1)]},C.resolveQName=function(e,t,c,h){var p=C.splitQName(e);return p[0]!=null?p[0]=t.getNamespace(p[0],c):h?(p[0]=t.getNamespace("",c),p[0]==null&&(p[0]="")):p[0]="",p},C.isSpace=function(e){return e==9||e==13||e==10||e==32},C.isLetter=function(e){return e>=65&&e<=90||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=255||e>=256&&e<=305||e>=308&&e<=318||e>=321&&e<=328||e>=330&&e<=382||e>=384&&e<=451||e>=461&&e<=496||e>=500&&e<=501||e>=506&&e<=535||e>=592&&e<=680||e>=699&&e<=705||e==902||e>=904&&e<=906||e==908||e>=910&&e<=929||e>=931&&e<=974||e>=976&&e<=982||e==986||e==988||e==990||e==992||e>=994&&e<=1011||e>=1025&&e<=1036||e>=1038&&e<=1103||e>=1105&&e<=1116||e>=1118&&e<=1153||e>=1168&&e<=1220||e>=1223&&e<=1224||e>=1227&&e<=1228||e>=1232&&e<=1259||e>=1262&&e<=1269||e>=1272&&e<=1273||e>=1329&&e<=1366||e==1369||e>=1377&&e<=1414||e>=1488&&e<=1514||e>=1520&&e<=1522||e>=1569&&e<=1594||e>=1601&&e<=1610||e>=1649&&e<=1719||e>=1722&&e<=1726||e>=1728&&e<=1742||e>=1744&&e<=1747||e==1749||e>=1765&&e<=1766||e>=2309&&e<=2361||e==2365||e>=2392&&e<=2401||e>=2437&&e<=2444||e>=2447&&e<=2448||e>=2451&&e<=2472||e>=2474&&e<=2480||e==2482||e>=2486&&e<=2489||e>=2524&&e<=2525||e>=2527&&e<=2529||e>=2544&&e<=2545||e>=2565&&e<=2570||e>=2575&&e<=2576||e>=2579&&e<=2600||e>=2602&&e<=2608||e>=2610&&e<=2611||e>=2613&&e<=2614||e>=2616&&e<=2617||e>=2649&&e<=2652||e==2654||e>=2674&&e<=2676||e>=2693&&e<=2699||e==2701||e>=2703&&e<=2705||e>=2707&&e<=2728||e>=2730&&e<=2736||e>=2738&&e<=2739||e>=2741&&e<=2745||e==2749||e==2784||e>=2821&&e<=2828||e>=2831&&e<=2832||e>=2835&&e<=2856||e>=2858&&e<=2864||e>=2866&&e<=2867||e>=2870&&e<=2873||e==2877||e>=2908&&e<=2909||e>=2911&&e<=2913||e>=2949&&e<=2954||e>=2958&&e<=2960||e>=2962&&e<=2965||e>=2969&&e<=2970||e==2972||e>=2974&&e<=2975||e>=2979&&e<=2980||e>=2984&&e<=2986||e>=2990&&e<=2997||e>=2999&&e<=3001||e>=3077&&e<=3084||e>=3086&&e<=3088||e>=3090&&e<=3112||e>=3114&&e<=3123||e>=3125&&e<=3129||e>=3168&&e<=3169||e>=3205&&e<=3212||e>=3214&&e<=3216||e>=3218&&e<=3240||e>=3242&&e<=3251||e>=3253&&e<=3257||e==3294||e>=3296&&e<=3297||e>=3333&&e<=3340||e>=3342&&e<=3344||e>=3346&&e<=3368||e>=3370&&e<=3385||e>=3424&&e<=3425||e>=3585&&e<=3630||e==3632||e>=3634&&e<=3635||e>=3648&&e<=3653||e>=3713&&e<=3714||e==3716||e>=3719&&e<=3720||e==3722||e==3725||e>=3732&&e<=3735||e>=3737&&e<=3743||e>=3745&&e<=3747||e==3749||e==3751||e>=3754&&e<=3755||e>=3757&&e<=3758||e==3760||e>=3762&&e<=3763||e==3773||e>=3776&&e<=3780||e>=3904&&e<=3911||e>=3913&&e<=3945||e>=4256&&e<=4293||e>=4304&&e<=4342||e==4352||e>=4354&&e<=4355||e>=4357&&e<=4359||e==4361||e>=4363&&e<=4364||e>=4366&&e<=4370||e==4412||e==4414||e==4416||e==4428||e==4430||e==4432||e>=4436&&e<=4437||e==4441||e>=4447&&e<=4449||e==4451||e==4453||e==4455||e==4457||e>=4461&&e<=4462||e>=4466&&e<=4467||e==4469||e==4510||e==4520||e==4523||e>=4526&&e<=4527||e>=4535&&e<=4536||e==4538||e>=4540&&e<=4546||e==4587||e==4592||e==4601||e>=7680&&e<=7835||e>=7840&&e<=7929||e>=7936&&e<=7957||e>=7960&&e<=7965||e>=7968&&e<=8005||e>=8008&&e<=8013||e>=8016&&e<=8023||e==8025||e==8027||e==8029||e>=8031&&e<=8061||e>=8064&&e<=8116||e>=8118&&e<=8124||e==8126||e>=8130&&e<=8132||e>=8134&&e<=8140||e>=8144&&e<=8147||e>=8150&&e<=8155||e>=8160&&e<=8172||e>=8178&&e<=8180||e>=8182&&e<=8188||e==8486||e>=8490&&e<=8491||e==8494||e>=8576&&e<=8578||e>=12353&&e<=12436||e>=12449&&e<=12538||e>=12549&&e<=12588||e>=44032&&e<=55203||e>=19968&&e<=40869||e==12295||e>=12321&&e<=12329},C.isNCNameChar=function(e){return e>=48&&e<=57||e>=1632&&e<=1641||e>=1776&&e<=1785||e>=2406&&e<=2415||e>=2534&&e<=2543||e>=2662&&e<=2671||e>=2790&&e<=2799||e>=2918&&e<=2927||e>=3047&&e<=3055||e>=3174&&e<=3183||e>=3302&&e<=3311||e>=3430&&e<=3439||e>=3664&&e<=3673||e>=3792&&e<=3801||e>=3872&&e<=3881||e==46||e==45||e==95||C.isLetter(e)||e>=768&&e<=837||e>=864&&e<=865||e>=1155&&e<=1158||e>=1425&&e<=1441||e>=1443&&e<=1465||e>=1467&&e<=1469||e==1471||e>=1473&&e<=1474||e==1476||e>=1611&&e<=1618||e==1648||e>=1750&&e<=1756||e>=1757&&e<=1759||e>=1760&&e<=1764||e>=1767&&e<=1768||e>=1770&&e<=1773||e>=2305&&e<=2307||e==2364||e>=2366&&e<=2380||e==2381||e>=2385&&e<=2388||e>=2402&&e<=2403||e>=2433&&e<=2435||e==2492||e==2494||e==2495||e>=2496&&e<=2500||e>=2503&&e<=2504||e>=2507&&e<=2509||e==2519||e>=2530&&e<=2531||e==2562||e==2620||e==2622||e==2623||e>=2624&&e<=2626||e>=2631&&e<=2632||e>=2635&&e<=2637||e>=2672&&e<=2673||e>=2689&&e<=2691||e==2748||e>=2750&&e<=2757||e>=2759&&e<=2761||e>=2763&&e<=2765||e>=2817&&e<=2819||e==2876||e>=2878&&e<=2883||e>=2887&&e<=2888||e>=2891&&e<=2893||e>=2902&&e<=2903||e>=2946&&e<=2947||e>=3006&&e<=3010||e>=3014&&e<=3016||e>=3018&&e<=3021||e==3031||e>=3073&&e<=3075||e>=3134&&e<=3140||e>=3142&&e<=3144||e>=3146&&e<=3149||e>=3157&&e<=3158||e>=3202&&e<=3203||e>=3262&&e<=3268||e>=3270&&e<=3272||e>=3274&&e<=3277||e>=3285&&e<=3286||e>=3330&&e<=3331||e>=3390&&e<=3395||e>=3398&&e<=3400||e>=3402&&e<=3405||e==3415||e==3633||e>=3636&&e<=3642||e>=3655&&e<=3662||e==3761||e>=3764&&e<=3769||e>=3771&&e<=3772||e>=3784&&e<=3789||e>=3864&&e<=3865||e==3893||e==3895||e==3897||e==3902||e==3903||e>=3953&&e<=3972||e>=3974&&e<=3979||e>=3984&&e<=3989||e==3991||e>=3993&&e<=4013||e>=4017&&e<=4023||e==4025||e>=8400&&e<=8412||e==8417||e>=12330&&e<=12335||e==12441||e==12442||e==183||e==720||e==721||e==903||e==1600||e==3654||e==3782||e==12293||e>=12337&&e<=12341||e>=12445&&e<=12446||e>=12540&&e<=12542},C.coalesceText=function(e){for(var t=e.firstChild;t!=null;t=t.nextSibling)if(t.nodeType==3||t.nodeType==4){var c=t.nodeValue,h=t;for(t=t.nextSibling;t!=null&&(t.nodeType==3||t.nodeType==4);){c+=t.nodeValue;var p=t;t=t.nextSibling,p.parentNode.removeChild(p)}if(h.nodeType==4){var d=h.parentNode;if(h.nextSibling==null)d.removeChild(h),d.appendChild(d.ownerDocument.createTextNode(c));else{var I=h.nextSibling;d.removeChild(h),d.insertBefore(d.ownerDocument.createTextNode(c),I)}}else h.nodeValue=c;if(t==null)break}else t.nodeType==1&&C.coalesceText(t)},C.instance_of=function(e,t){for(;e!=null;){if(e.constructor===t)return!0;if(e===Object)return!1;e=e.constructor.superclass}return!1},C.getElementById=function(e,t){if(e.nodeType==1&&(e.getAttribute("id")==t||e.getAttributeNS(null,"id")==t))return e;for(var c=e.firstChild;c!=null;c=c.nextSibling){var h=C.getElementById(c,t);if(h!=null)return h}return null};var J=function(){function e(c,h){var p=h?": "+h.toString():"";switch(c){case t.INVALID_EXPRESSION_ERR:return"Invalid expression"+p;case t.TYPE_ERR:return"Type error"+p}return null}function t(c,h,p){var d=Error.call(this,e(c,h)||p);return d.code=c,d.exception=h,d}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.superclass=Error,t.prototype.toString=function(){return this.message},t.fromMessage=function(c,h){return new t(null,h,c)},t.INVALID_EXPRESSION_ERR=51,t.TYPE_ERR=52,t}();pe.prototype={},pe.prototype.constructor=pe,pe.superclass=Object.prototype;function pe(e,t,c){this.xpath=c.parse(e),this.context=new w,this.context.namespaceResolver=new ke(t)}pe.getOwnerDocument=function(e){return e.nodeType===9?e:e.ownerDocument},pe.detectHtmlDom=function(e){if(!e)return!1;var t=pe.getOwnerDocument(e);try{return t.implementation.hasFeature("HTML","2.0")}catch{return!0}},pe.prototype.evaluate=function(e,t,c){this.context.expressionContextNode=e,this.context.caseInsensitive=pe.detectHtmlDom(e);var h=this.xpath.evaluate(this.context);return new z(h,t)},ke.prototype={},ke.prototype.constructor=ke,ke.superclass=Object.prototype;function ke(e){this.xpathNSResolver=e}ke.prototype.getNamespace=function(e,t){return this.xpathNSResolver==null?null:this.xpathNSResolver.lookupNamespaceURI(e)},$e.prototype={},$e.prototype.constructor=$e,$e.superclass=Object.prototype;function $e(e){this.node=e,this.namespaceResolver=new q}$e.prototype.lookupNamespaceURI=function(e){return this.namespaceResolver.getNamespace(e,this.node)},z.prototype={},z.prototype.constructor=z,z.superclass=Object.prototype;function z(e,t){switch(t==z.ANY_TYPE&&(e.constructor===M?t=z.STRING_TYPE:e.constructor===O?t=z.NUMBER_TYPE:e.constructor===o?t=z.BOOLEAN_TYPE:e.constructor===s&&(t=z.UNORDERED_NODE_ITERATOR_TYPE)),this.resultType=t,t){case z.NUMBER_TYPE:this.numberValue=e.numberValue();return;case z.STRING_TYPE:this.stringValue=e.stringValue();return;case z.BOOLEAN_TYPE:this.booleanValue=e.booleanValue();return;case z.ANY_UNORDERED_NODE_TYPE:case z.FIRST_ORDERED_NODE_TYPE:if(e.constructor===s){this.singleNodeValue=e.first();return}break;case z.UNORDERED_NODE_ITERATOR_TYPE:case z.ORDERED_NODE_ITERATOR_TYPE:if(e.constructor===s){this.invalidIteratorState=!1,this.nodes=e.toArray(),this.iteratorIndex=0;return}break;case z.UNORDERED_NODE_SNAPSHOT_TYPE:case z.ORDERED_NODE_SNAPSHOT_TYPE:if(e.constructor===s){this.nodes=e.toArray(),this.snapshotLength=this.nodes.length;return}break}throw new J(J.TYPE_ERR)}z.prototype.iterateNext=function(){if(this.resultType!=z.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=z.ORDERED_NODE_ITERATOR_TYPE)throw new J(J.TYPE_ERR);return this.nodes[this.iteratorIndex++]},z.prototype.snapshotItem=function(e){if(this.resultType!=z.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=z.ORDERED_NODE_SNAPSHOT_TYPE)throw new J(J.TYPE_ERR);return this.nodes[e]},z.ANY_TYPE=0,z.NUMBER_TYPE=1,z.STRING_TYPE=2,z.BOOLEAN_TYPE=3,z.UNORDERED_NODE_ITERATOR_TYPE=4,z.ORDERED_NODE_ITERATOR_TYPE=5,z.UNORDERED_NODE_SNAPSHOT_TYPE=6,z.ORDERED_NODE_SNAPSHOT_TYPE=7,z.ANY_UNORDERED_NODE_TYPE=8,z.FIRST_ORDERED_NODE_TYPE=9;function pt(e,t){e.createExpression=function(c,h){try{return new pe(c,h,t)}catch(p){throw new J(J.INVALID_EXPRESSION_ERR,p)}},e.createNSResolver=function(c){return new $e(c)},e.evaluate=function(c,h,p,d,I){if(d<0||d>9)throw{code:0,toString:function(){return"Request type not supported"}};return e.createExpression(c,p,t).evaluate(h,d,I)}}try{var He=!0;try{document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)&&(He=!1)}catch{}He&&pt(document,new A)}catch{}pt(u,new A),function(){var e=new A,t=new q,c=new $,h=new T;function p(S){return{getNamespace:function(K,ce){var me=S(K,ce);return me||t.getNamespace(K,ce)}}}function d(S){return p(S.getNamespace.bind(S))}function I(S){return p(function(K){return S[K]})}function k(S){return S&&typeof S.getNamespace=="function"?d(S):typeof S=="function"?p(S):typeof S=="object"?I(S):t}function Q(S){if(S===null||typeof S>"u"||S instanceof M||S instanceof o||S instanceof O||S instanceof s)return S;switch(typeof S){case"string":return new M(S);case"boolean":return new o(S);case"number":return new O(S)}var K=new s;return K.addArray([].concat(S)),K}function B(S){return function(K){var ce=Array.prototype.slice.call(arguments,1).map(function(wt){return wt.evaluate(K)}),me=S.apply(this,[].concat(K,ce));return Q(me)}}function H(S){return{getFunction:function(K,ce){var me=S(K,ce);return me?B(me):c.getFunction(K,ce)}}}function Ae(S){return H(S.getFunction.bind(S))}function te(S){return H(function(K){return S[K]})}function We(S){return S&&typeof S.getFunction=="function"?Ae(S):typeof S=="function"?H(S):typeof S=="object"?te(S):c}function et(S){return{getVariable:function(K,ce){var me=S(K,ce);return Q(me)}}}function mt(S){if(S){if(typeof S.getVariable=="function")return et(S.getVariable.bind(S));if(typeof S=="function")return et(S);if(typeof S=="object")return et(function(K){return S[K]})}return h}function dt(S,K,ce){S in ce&&(K[S]=ce[S])}function Ot(S){var K=new w;return S?(K.namespaceResolver=k(S.namespaces),K.functionResolver=We(S.functions),K.variableResolver=mt(S.variables),K.expressionContextNode=S.node,dt("allowAnyNamespaceForNoPrefix",K,S),dt("isHtml",K,S)):K.namespaceResolver=t,K}function Ye(S,K){var ce=Ot(K);return S.evaluate(ce)}var Et={evaluate:function(S){return Ye(this.expression,S)},evaluateNumber:function(S){return this.evaluate(S).numberValue()},evaluateString:function(S){return this.evaluate(S).stringValue()},evaluateBoolean:function(S){return this.evaluate(S).booleanValue()},evaluateNodeSet:function(S){return this.evaluate(S).nodeset()},select:function(S){return this.evaluateNodeSet(S).toArray()},select1:function(S){return this.select(S)[0]}};function At(S){var K=e.parse(S);return Object.create(Et,{expression:{value:K}})}u.parse=At}(),it(u,{XPath:le,XPathParser:A,XPathResult:z,Step:R,PathExpr:P,NodeTest:F,LocationPath:ee,OrOperation:Re,AndOperation:Fe,BarOperation:Z,EqualsOperation:Oe,NotEqualOperation:Ie,LessThanOperation:be,GreaterThanOperation:oe,LessThanOrEqualOperation:ge,GreaterThanOrEqualOperation:ye,PlusOperation:xe,MinusOperation:Be,MultiplyOperation:Le,DivOperation:Pe,ModOperation:Se,UnaryMinusOperation:he,FunctionCall:ve,VariableReference:Me,XPathContext:w,XNodeSet:s,XBoolean:o,XString:M,XNumber:O,NamespaceResolver:q,FunctionResolver:$,VariableResolver:T,Utilities:C}),u.select=function(e,t,c){return u.selectWithResolver(e,t,null,c)},u.useNamespaces=function(e){var t={mappings:e||{},lookupNamespaceURI:function(c){return this.mappings[c]}};return function(c,h,p){return u.selectWithResolver(c,h,t,p)}},u.selectWithResolver=function(e,t,c,h){var p=new pe(e,c,new A),d=z.ANY_TYPE,I=p.evaluate(t,d,null);return I.resultType==z.STRING_TYPE?I=I.stringValue:I.resultType==z.NUMBER_TYPE?I=I.numberValue:I.resultType==z.BOOLEAN_TYPE?I=I.booleanValue:(I=I.nodes,h&&(I=I[0])),I},u.select1=function(e,t){return u.select(e,t,!0)}})(a)})(x);const Wt=({dataChunk:i,indexKey:a,chunkSize:u})=>{var E,v;if(!i[0].value&&!((E=i[1])!=null&&E.value)&&!((v=i[2])!=null&&v.value))return null;let l=null,f=i;return u===3&&(f=i.slice(0,2),[l]=i.slice(2)),N.createElement(N.Fragment,null,N.createElement("tr",null,f.map((m,_)=>{var G,j;if(!m.value)return null;let U=1;return(_===0&&(!f[_+1]||!f[_+1].value)||_===1&&(!f[_-1]||!f[_-1].value))&&(U=3),N.createElement(N.Fragment,{key:`${f[0].label}-${String(f[0].value)}-${_}-${a}-${((G=f[1])==null?void 0:G.label)||""}-${((j=f[1])==null?void 0:j.value)||""}`},N.createElement("td",{className:"ctw-ccda-common-td1",rowSpan:l&&l.value&&_===0?2:1},m.label.replace(/:/g,"")),N.createElement("td",{className:"ctw-ccda-common-td2",colSpan:U,rowSpan:l&&l.value&&_===0?2:1},m.value))})),l&&l.value&&N.createElement("tr",null,N.createElement("td",{className:"ctw-ccda-common-td1"},l.label.replace(/:/g,"")),N.createElement("td",{className:"ctw-ccda-common-td2"},l.value)))};try{Wt.displayName="BasicRow",Wt.__docgenInfo={description:"",displayName:"BasicRow",props:{dataChunk:{defaultValue:null,description:"",name:"dataChunk",required:!0,type:{name:"TableInfo[]"}},indexKey:{defaultValue:null,description:"",name:"indexKey",required:!0,type:{name:"number"}},chunkSize:{defaultValue:null,description:"",name:"chunkSize",required:!1,type:{name:"enum",value:[{value:"2"},{value:"3"}]}}}}}catch{}const Yt=({tuple:i,indexKey:a})=>!i[0].value&&!i[1].value?null:N.createElement("tr",null,i.map((u,l)=>{if(!u.value)return null;let f=1;return(l===0&&!i[1].value||l===1&&!i[0].value)&&(f=3),N.createElement(N.Fragment,{key:`${i[0].label}-${i[0].value}-${l}-${a}-${i[1].label||""}-${i[1].value}`},N.createElement("td",{className:"ctw-ccda-common-td1"},u.label.replace(/:/g,"")),N.createElement("td",{className:"ctw-ccda-common-td2",colSpan:f},u.value))}));try{Yt.displayName="TupleRow",Yt.__docgenInfo={description:"",displayName:"TupleRow",props:{tuple:{defaultValue:null,description:"",name:"tuple",required:!0,type:{name:"[TableInfo, TableInfo]"}},indexKey:{defaultValue:null,description:"",name:"indexKey",required:!0,type:{name:"number"}}}}}catch{}const Ne=({data:i,chunkSize:a=2})=>{const[u,l]=nn(i,E=>!Ke(E)),f=an(u,a);return N.createElement("table",{className:"ctw-ccda-common-table"},N.createElement("tbody",null,f.map((E,v)=>N.createElement(Wt,{key:`${E[0].label}-${v}`,dataChunk:E,chunkSize:a,indexKey:v})),l.map((E,v)=>N.createElement(Yt,{key:`${E[0].label}-${E[1].label}-${v}`,tuple:E,indexKey:v}))))};try{Ne.displayName="Table",Ne.__docgenInfo={description:"",displayName:"Table",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"(TableInfo | [TableInfo, TableInfo])[]"}},chunkSize:{defaultValue:{value:"2"},description:"",name:"chunkSize",required:!1,type:{name:"enum",value:[{value:"2"},{value:"3"}]}}}}}catch{}const Dr=i=>{var u;if(i.text)return i.text;let a="";return a+=i.use?`${yr(i.use)}: `:"",a+=ne(i.line)?"":`${(u=i.line)==null?void 0:u.join(`
`)}
`,a+=i.city?`${i.city}, `:"",a+=i.state?`${i.state} `:"",a+=i.postalCode||"",a+=i.country?`
${i.country}`:"",a},Jn=i=>ne(i)?"":Ke(i)?i.map(Dr).join(`
`):Dr(i);function Kn(i){return Ke(i)&&i.every(a=>typeof a=="object")}function Zn(i){return Ke(i)&&i.every(a=>typeof a=="string")}const Cr=i=>{if(i.text)return i.text;let a="";return i.given&&i.given.length>0&&(a=i.given.join(" "),i.family&&(a=`${a} ${i.family}`)),i.prefix&&i.prefix.length>0&&(a=`${i.prefix.join(" ")} ${a}`),a},Gr=i=>ne(i)?"":typeof i=="string"?i:Zn(i)?i.reduce((a,u,l)=>`${a}${l===0?"":`
`}${u}`,""):Kn(i)?i.map(Cr).join(", "):Cr(i),Rr=({use:i,system:a,value:u})=>{const l=i?` (${i})`:"";return`${a?`${yr(a)}${l}:`:""} ${u}`.trim()},ei=i=>ne(i)?"":Ke(i)?i.map(Rr).join(`
`):Rr(i),ti={BAD:"bad",DIR:"direct",H:"home",HP:"primary home",HV:"vacation home",PHYS:"physical",PST:"postal",PUB:"public",TMP:"temporary",WP:"work",CONF:"confidential"},zr=i=>{if(!i)return"";const a=u=>{const l=String(x.select1("string(@use)",u)),f={line:yt(x.select("*[name()='streetAddressLine']",u),E=>String(x.select("string(text())",E))).filter(Boolean),city:String(x.select("string(*[name()='city'])",u)),state:String(x.select("string(*[name()='state'])",u)),postalCode:String(x.select("string(*[name()='postalCode'])",u)),country:String(x.select("string(*[name()='country'])",u)),use:ti[l]};return Jn(f)};return Ke(i)?i.map(a).join(`
`):a(i)},ri={BAD:"bad",CONF:"confidential",OLD:"old",H:"home",HP:"primary home",HV:"vacation Home",TMP:"temporary",WP:"work",DIR:"direct",PUB:"public",AS:"answering service",EC:"emergency:",MC:"mobile",PG:"pager"},Pt={tel:"phone",mailto:"email"},ni=i=>{if(!i)return"";const a=u=>{const f=String(x.select1("string(@value)",u)).split(":");let E,v;if(f.length===2&&([E,v]=f),f.length===1&&([v]=f),!v)return"";const m=v.includes("@")?Pt.mailto:Pt.tel,U={system:Pt[E]||m,value:v,use:ri[String(x.select1("string(@use)",u))]};return ei(U)};return Ke(i)?i.map(a).join(`
`):a(i)},De=(i,a)=>{const u=zr(i),l=ni(a);return`${u||""}${u&&l?`
`:""}${l||""}`},ii={A:"Artist/Stage",ABC:"Alphabetic",ASGN:"Assigned",C:"License",I:"Indigenous/Tribal",IDE:"Ideographic",L:"Legal",P:"Pseudonym",PHON:"Phonetic",R:"Religious",SNDX:"Soundex",SRCH:"Search",SYL:"Syllabic"},Qe=i=>{if(!i)return"";const a=u=>{const l={use:ii[String(x.select("string(@use)",u))],given:yt(x.select("(*[name()='given'])",u),f=>String(x.select1("string(text())",f))),family:String(x.select1("string(*[name()='family']/text())",u)),prefix:yt(x.select("(*[name()='prefix'])",u),f=>String(x.select1("string(text())",f))),suffix:yt(x.select("(*[name()='suffix'])",u),f=>String(x.select1("string(text())",f)))};return Gr(l)};return Ke(i)?i.map(a).join(`
`):a(i)},nt=i=>{if(!i)return"";const a=String(x.select1("string(@root)",i)),u=String(x.select1("string(@extension)",i));return`${u}${u?" (":""}${a}${u?")":""}`},ai=i=>{const a=i.replace(/:/g,""),u=a.lastIndexOf("+"),l=a.lastIndexOf("-");if(u>0)return{index:a.length-u-1,timezoneSign:"+"};if(l>0){const f=a[l-3];return Ur(Number(f))||f==="T"?{index:a.length-l-1,timezoneSign:"-"}:{index:-1}}return{index:-1}},at=i=>i&&i.length>1&&i.split("").every(a=>Ur(Number(a))),oi=({year:i,month:a,day:u,hour:l,minute:f,second:E,timezoneHour:v,timezoneMinute:m,timezoneSign:_})=>{let U="";return at(i)&&(U+=i,at(a)&&(U+=`-${a}`,at(u)&&(U+=`-${u}`,at(l)?(U+=`T${l}`,at(f)?U+=`:${f}`:U+=":00",at(E)?U+=`:${E}`:U+=":00",_&&at(v)?(U+=`${_}${v}`,at(m)?U+=`:${m}`:U+=":00"):U+="-00:00"):U+="T00:00:00-00:00"))),U},Ve=i=>{if(!i)return"";const{index:a,timezoneSign:u}=ai(i);let l=i.replace(/T/g,"").replace(/-/g,"").replace("+","").replace(/:/g,""),f="";(a===4||a===2)&&l.length>9&&(f=l.substring(l.length-a),l=l.substring(0,l.length-a));const E=l.slice(0,4),v=l.slice(4,6),m=l.slice(6,8),_=l.slice(8,10),U=l.slice(10,12),G=l.slice(12,14),j=f.slice(0,2),ue=f.slice(2);return m?oi({year:E,month:v,day:m,hour:_,minute:U,second:G,timezoneHour:j,timezoneMinute:ue,timezoneSign:u}):""},xr=i=>{if(!i)return{};const a=String(x.select1("string(*[name()='low']/@value)",i)),u=String(x.select1("string(*[name()='high']/@value)",i));if(!a&&!u)return{};if(a&&!u)return{start:Ve(a)};if(!a&&u)return{end:Ve(u)};let l=Ve(a),f=Ve(u);return(l.includes("T")||f.includes("T"))&&(l=Ve(l),f=Ve(f)),Vn(new Date(l),new Date(f))||$n(new Date(l),new Date(f))?{start:l,end:f}:{start:l}},Ct=(i,a,u,l=!0)=>{if(Ke(a))return a.reduce((E,v)=>Ct(E,v,u),i);const f=l?Cn:hn;return i.replace(new RegExp(f(a),"g"),u)},xt=(i,a,u)=>{const l=[`</${a}>`,`<${a}>`,`</${a}`,`<${a}`],f=[`</${u}>`,`<${u}>`,`</${u}`,`<${u}`];return l.reduce((E,v,m)=>Ct(E,l[m],f[m]),i)},si=i=>{let a=i.toString();return a=Ct(a,["<list/>","<item/>","<content/>","<paragraph/>","<section/>","<br/>",'<text xmlns="urn:hl7-org:v3">',"<text />","<text/>"],""),a=Ct(a,' styleCode="(.*?)"',"",!1),a=xt(a,"section","div"),a=xt(a,"list","ul"),a=xt(a,"item","li"),a=xt(a,"content","div"),a=xt(a,"paragraph","p"),a},ht=i=>{if(!i)return"";const[a,u]=i.split("T");return Vr(new Date(a),"MMMM dd, yyyy")+(u.split("").some(l=>Number(l)>0)?`, ${u}`:"")},ui=i=>!!i,vr=i=>!!i,li=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='authenticator']",i);if(!ne(a))return a.map(u=>{const l=x.select1("*[name()='assignedEntity']",u);if(!l)return;const f=x.select1("*[name()='assignedPerson']",l),E=Qe(x.select("*[name()='name']",f)),v=De(x.select("*[name()='addr']",l),x.select("*[name()='telecom']",l)),m=Ve(String(x.select1("string(*[name()='time']/@value)",u)));return{name:E,contactDetails:v,time:m}}).filter(vr)},jt=({document:i})=>{const a=li(i);if(!a||ne(a))return null;const u=a.flatMap(l=>[{label:"Authenticator",value:`${l.name||"Unknown"}${l.time?` signed at ${l.time}`:""}`},{label:"Contact Details",value:l.contactDetails}]);return N.createElement(Ne,{data:u})};try{jt.displayName="Authenticator",jt.__docgenInfo={description:"",displayName:"Authenticator",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const qr=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='author']",i);return ne(a)?void 0:a.map(l=>{const f=x.select1("*[name()='assignedAuthor']/*[name()='assignedPerson']/*[name()='name']",l),E=x.select1("*[name()='assignedAuthor']/*[name()='assignedAuthoringDevice']",l);let v="";if(f)v=Qe(f);else if(E){const U=String(x.select1("string(*[name()='manufacturerModelName'])",E)),G=String(x.select1("string(*[name()='softwareName'])",E));v=[U,G].filter(Boolean).join("; ")}const m=String(x.select1("string(*[name()='assignedAuthor']/*[name()='representedOrganization']/*[name()='name'])",l)),_=Ve(String(x.select1("string(*[name()='time'])",l)));return[{label:"Name:",value:v},{label:"Organization:",value:m},{label:"Authored on",value:_}]}).reduce((l,f,E)=>({...l,[`author${E+1}`]:f}),{})},ci=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='author']",i);if(ne(a))return;const u=qr(i);return a.map((l,f)=>{const E=x.select1("*[name()='assignedAuthor']",l),v=De(x.select("*[name()='addr']",E),x.select("*[name()='telecom']",E)),m=x.select1("*[name()='representedOrganization']",E),_={name:u[`author${f+1}`][0].value,contactDetails:v,organization:{name:u[`author${f+1}`][1].value,contactDetails:""}};if(m){const U=De(x.select("*[name()='addr']",m),x.select("*[name()='telecom']",m));return{..._,organization:{..._.organization,contactDetails:U}}}return _})},Xt=({document:i})=>{const a=ci(i);if(!a||ne(a))return null;const u=a.flatMap(l=>[{label:"Author",value:`${l.name||"Unknown"}${l.organization.name?`, Organization: ${l.organization.name}`:""}`},{label:"Contact Details",value:l.contactDetails},{label:"Contact Details (Organization)",value:l.organization.contactDetails}]);return N.createElement(Ne,{data:u,chunkSize:3})};try{Xt.displayName="Author",Xt.__docgenInfo={description:"",displayName:"Author",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Wr=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='authorization']/*[name()='consent']",i);return ne(a)?void 0:a.map(l=>{const f=nt(x.select1("*[name()='id']",l)),E=String(x.select1("string(*[name()='code']/@displayName)",l)),v=String(x.select1("string(*[name()='statusCode']/@code)",l));return[{label:"ID:",value:f},{label:"Code:",value:E},{label:"Status:",value:v}]}).reduce((l,f,E)=>({...l,[`consent${E+1}`]:f}),{})},pi=i=>{const a=Wr(i);return Object.values(a||{})},Qt=({document:i})=>{const a=pi(i);if(ne(a))return null;const u=a.flatMap(l=>[{label:"Consent",value:`Order: ${l[0].value||"Unknown"}, ${l[1].value||"Unknown"}, ${l[2].value||"Unknown"}`},{label:"",value:""}]);return N.createElement(Ne,{data:u})};try{Qt.displayName="Authorization",Qt.__docgenInfo={description:"",displayName:"Authorization",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const fi=i=>{const a=x.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']",i);if(!a)return;const u=String(x.select1("string(*[name()='name'])",a)),l=De(x.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']/*[name()='addr']",i),x.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']/*[name()='telecom']",i));return{name:u,contactDetails:l}},Jt=({document:i})=>{const a=fi(i);if(!a)return null;const{name:u,contactDetails:l}=a,f=[{label:"Custodian",value:u},{label:"Contact Details",value:l}];return N.createElement(Ne,{data:f})};try{Jt.displayName="Custodian",Jt.__docgenInfo={description:"",displayName:"Custodian",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const hi=i=>{const a=x.select1("*[name()='ClinicalDocument']/*[name()='dataEnterer']/*[name()='assignedEntity']",i);if(!a)return;const u=x.select1("*[name()='assignedPerson']",a),l=Qe(x.select("*[name()='name']",u)),f=De(x.select("*[name()='addr']",a),x.select("*[name()='telecom']",a));return{name:l,contactDetails:f}},Kt=({document:i})=>{const a=hi(i);if(!a)return null;const{name:u,contactDetails:l}=a,f=[{label:"Data Enterer",value:u},{label:"Contact Details",value:l}];return N.createElement(Ne,{data:f})};try{Kt.displayName="DataEnterer",Kt.__docgenInfo={description:"",displayName:"DataEnterer",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const mi={N:"normal",R:"restricted",V:"very restricted"},di=i=>{const a=nt(x.select1("*[name()='ClinicalDocument']/*[name()='id']",i)),u=Ve(String(x.select1("string(*[name()='ClinicalDocument']/*[name()='effectiveTime']/@value)",i))),l=ht(u),f=String(x.select1("string(*[name()='ClinicalDocument']/*[name()='versionNumber']/@value)",i)),E=nt(x.select1("*[name()='ClinicalDocument']/*[name()='setId']",i)),v=mi[String(x.select1("string(*[name()='ClinicalDocument']/*[name()='confidentialityCode']/@code)",i))],m=String(x.select1("string(*[name()='ClinicalDocument']/*[name()='code']/@displayName)",i)),_=String(x.select1("string(*[name()='ClinicalDocument']/*[name()='languageCode']/@code)",i));return{id:a,createdOn:l,version:f,setId:E,confidentialityCode:v,code:m,languageCode:_}},Zt=({document:i})=>{const{id:a,createdOn:u,version:l,setId:f,confidentialityCode:E,code:v,languageCode:m}=di(i),_=[{label:"Document",value:N.createElement(N.Fragment,null,N.createElement("b",null,"ID: "),a,f&&N.createElement(N.Fragment,null,N.createElement("br",null),N.createElement("b",null,"Set ID: "),f))},{label:"Created on",value:u},{label:"Version",value:l||"Unknown"},{label:"Confidentiality",value:E},{label:"Code",value:v},{label:"Language",value:m}];return N.createElement(Ne,{data:_})};try{Zt.displayName="Document",Zt.__docgenInfo={description:"",displayName:"Document",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Yr=i=>{const a=x.select("//*[name()='documentationOf']/*[name()='serviceEvent']",i);return ne(a)?void 0:a.map(l=>{const f=x.select1("*[name()='effectiveTime']",l),E=xr(f),m=x.select("*[name()='performer']/*[name()='assignedEntity']/*[name()='assignedPerson']/*[name()='name']",l).map(_=>Qe(_));return[{label:"Date/Time:",value:E.start||E.end?`from ${ht(E.start)||"unknown"} to ${ht(E.end)||"unknown"}`:""},...m.map(_=>({label:"Performer:",value:_}))]}).reduce((l,f,E)=>({...l,[`documentationOf${E+1}`]:f}),{})},gi=i=>{const a=x.select("//*[name()='documentationOf']/*[name()='serviceEvent']",i);if(ne(a))return;const u=Yr(i);return a.map((l,f)=>{const v=x.select("*[name()='performer']",l).map((m,_)=>{const U=String(x.select1("string(*[name()='functionCode']/@displayName)",m)),G=br(u,`documentationOf${f+1}[${_+1}].value`),j=De(x.select("*[name()='assignedEntity']/*[name()='addr']",m),x.select("*[name()='assignedEntity']/*[name()='telecom']",m));if(!(!G&&!U&&!j))return{functionCode:U,name:G,contactDetails:j}});return{dateTime:br(u,`documentationOf${f+1}[0].value`),finalPerformers:v.filter(ui)}})},er=({document:i})=>{const a=gi(i);if(!a||ne(a))return null;const u=a.flatMap(l=>[{label:"Documentation of - Date/Time",value:l.dateTime},{label:"",value:""},...l.finalPerformers.flatMap(f=>[{label:"Performer",value:`${f.name||"Unknown"}${f.functionCode?` - ${f.functionCode}`:""}`},{label:"Contact Details",value:f.contactDetails}])]);return N.createElement(Ne,{data:u})};try{er.displayName="DocumentationOf",er.__docgenInfo={description:"",displayName:"DocumentationOf",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const jr=i=>{const a=x.select1("*[name()='ClinicalDocument']/*[name()='componentOf']/*[name()='encompassingEncounter']",i);if(!a)return;const u=nt(x.select1("*[name()='id']",a)),l=String(x.select1("string(*[name()='code']/@displayName)",a)),f=xr(x.select1("*[name()='effectiveTime']",a));return[{label:"ID:",value:f.start||f.end||u?u||"Unknown":""},{label:"Type:",value:l},{label:"Date/Time:",value:f.start||f.end?`from ${ht(f.start)||"unknown"} to ${ht(f.end)||"unknown"}`:""}]},yi=i=>{const a=x.select1("*[name()='ClinicalDocument']/*[name()='componentOf']/*[name()='encompassingEncounter']",i);if(!a)return;const u=jr(i),l=String(x.select1("string(*[name()='dischargeDispositionCode']/@displayName)",a)),f=nt(x.select1("*[name()='location']/*[name()='healthCareFacility']/*[name()='id']",a));return{id:u[0],type:u[1],dateTime:u[2],dischargeDisposition:l,encounterLocation:f?`ID: ${f}`:null}},tr=({document:i})=>{const a=yi(i);if(!a)return null;const{dischargeDisposition:u,encounterLocation:l,id:f,type:E,dateTime:v}=a,m=[{label:"Encounter",value:v.value||u||l||f.value?N.createElement(N.Fragment,null,N.createElement("b",null,"ID: "),f.value||"Unknown",E.value&&N.createElement(N.Fragment,null,N.createElement("br",null),N.createElement("b",null,"Type: "),E.value)):null},{label:"Date/Time",value:v.value},{label:"Discharge Disposition",value:u},{label:"Encounter Location",value:l}];return N.createElement(Ne,{data:m})};try{tr.displayName="Encounter",tr.__docgenInfo={description:"",displayName:"Encounter",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Ei=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='informant']",i);if(!ne(a))return a.map(u=>{const l=x.select1("*[name()='assignedEntity']",u);if(l){const E=x.select1("*[name()='assignedPerson']",l),v=Qe(x.select("*[name()='name']",E)),m=De(x.select("*[name()='addr']",l),x.select("*[name()='telecom']",l));return{name:v,contactDetails:m,relationship:""}}const f=x.select1("*[name()='relatedEntity']",u);if(f){const E=x.select1("*[name()='relatedPerson']",f),v=Qe(x.select("*[name()='name']",E)),m=De(x.select("*[name()='addr']",f),x.select("*[name()='telecom']",f)),_=String(x.select1("string(*[name()='code']/@displayName)",f)).toLowerCase();return{name:v,contactDetails:m,relationship:_}}}).filter(vr)},rr=({document:i})=>{const a=Ei(i);if(!a||ne(a))return null;const u=a.flatMap(l=>[{label:"Informant",value:`${l.name||"Unknown"}${l.relationship?` - ${l.relationship}`:""}`},{label:"Contact Details",value:l.contactDetails}]);return N.createElement(Ne,{data:u})};try{rr.displayName="Informant",rr.__docgenInfo={description:"",displayName:"Informant",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const xi=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='informationRecipient']/*[name()='intendedRecipient']",i);if(!ne(a))return a.map(u=>{const l=x.select1("*[name()='informationRecipient']",u),f=x.select1("*[name()='receivedOrganization']",u);if(l){const _=Qe(x.select1("*[name()='name']",l)),U=String(x.select1("string(*[name()='name']/node())",f));return{name:_,contactDetails:"",organization:{name:U,contactDetails:""}}}const E=x.select("*[name()='id']",u).map(nt).join(", "),v=De(x.select("*[name()='addr']",u),x.select("*[name()='telecom']",u)),m={name:E,contactDetails:v,organization:{name:"",contactDetails:""}};if(f){const _=String(x.select1("string(*[name()='name']/node())",f)),U=De(x.select("*[name()='addr']",f),x.select("*[name()='telecom']",f));return{...m,organization:{name:_,contactDetails:U}}}return m})},nr=({document:i})=>{const a=xi(i);if(!a||ne(a))return null;const u=a.flatMap(l=>[{label:"Information Recipient",value:l.name},{label:"Contact Details",value:l.contactDetails},{label:"Organization",value:l.organization.name},{label:"Contact Details (Organization)",value:l.organization.contactDetails}]);return N.createElement(Ne,{data:u})};try{nr.displayName="InformationRecipient",nr.__docgenInfo={description:"",displayName:"InformationRecipient",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Xr=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='inFulfillmentOf']/*[name()='order']",i);return ne(a)?void 0:a.map(l=>{const f=nt(x.select1("*[name()='id']",l)),E=String(x.select1("string(*[name()='code']/@displayName)",l));return[{label:"Order ID:",value:f},{label:"Code:",value:E}]}).reduce((l,f,E)=>({...l,[`inFulfillmentOf${E+1}`]:f}),{})},vi=i=>{const a=Xr(i);return Object.values(a||{})},ir=({document:i})=>{const a=vi(i);if(ne(a))return null;const u=a.flatMap(l=>[{label:"In Fulfillment Of",value:`Order: ${l[0].value||"Unknown"}, ${l[1].value||"Unknown"}`},{label:"",value:""}]);return N.createElement(Ne,{data:u})};try{ir.displayName="InFulfillmentOf",ir.__docgenInfo={description:"",displayName:"InFulfillmentOf",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Ai=i=>{const a=x.select1("*[name()='ClinicalDocument']/*[name()='legalAuthenticator']",i);if(!a)return;const u=x.select1("*[name()='assignedEntity']",a),l=x.select1("*[name()='assignedPerson']",u),f=Qe(x.select("*[name()='name']",l)),E=De(x.select("*[name()='addr']",u),x.select("*[name()='telecom']",u)),v=ht(Ve(String(x.select1("string(*[name()='time']/@value)",a))));return{name:f,contactDetails:E,time:v}},ar=({document:i})=>{const a=Ai(i);if(!a)return null;const{name:u,time:l,contactDetails:f}=a,E=l?` signed at ${l}`:"",v=[{label:"Legal Authenticator",value:`${u}${E}`},{label:"Contact Details",value:f}];return N.createElement(Ne,{data:v})};try{ar.displayName="LegalAuthenticator",ar.__docgenInfo={description:"",displayName:"LegalAuthenticator",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const wi=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='participant']",i);if(!ne(a))return a.map(u=>{const l=x.select1("*[name()='associatedEntity']",u);if(l){const f=x.select1("*[name()='associatedPerson']",l),E=Qe(x.select("*[name()='name']",f)),v=De(x.select("*[name()='addr']",l),x.select("*[name()='telecom']",l)),m=x.select1("*[name()='time']",u),_=xr(m),U=String(x.select1("string(*[name()='code']/@displayName)",l)).toLowerCase();return{name:E,contactDetails:v,time:`from ${_.start} to ${_.end}`,relationship:U}}}).filter(vr)},or=({document:i})=>{const a=wi(i);if(!a||ne(a))return null;const u=a.flatMap(l=>[{label:"Participant",value:`${l.name}${l.relationship?` - ${l.relationship}`:""}`},{label:"Contact Details",value:l.contactDetails}]);return N.createElement(Ne,{data:u})};try{or.displayName="Participant",or.__docgenInfo={description:"",displayName:"Participant",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Qr=i=>{const a=x.select("*[name()='patient']/*[name()='guardian']",i);if(!ne(a))return a.map(u=>{const l=x.select1("*[name()='guardianPerson']",u),f=String(x.select1("string(*[name()='code']/@displayName)",u)),E=Qe(x.select("*[name()='name']",l)),v=f?` - ${f}`:"";return{label:"",value:`${E}${v}`}})},Jr=i=>{const u=x.select("*[name()='ClinicalDocument']/*[name()='recordTarget']/*[name()='patientRole']",i).map(l=>{const f=x.select1("*[name()='patient']",l),E=Qe(x.select1("*[name()='name']",f)),v=x.select("*[name()='id']",l).map(nt).join(", "),m=String(x.select1("string(*[name()='administrativeGenderCode']/@displayName)",f)),_=new Date(Ve(String(x.select1("string(*[name()='birthTime']/@value)",f)))),U=new Date(Ve(String(x.select1("string(*[name()='sdtc:deceasedTime']/@value)",f)))),G=String(x.select1("string(*[name()='sdtc:deceasedInd']/@value)",f))==="true",j=G?"deceased":gn(Sr(U)?U:new Date,_),ue=`${Vr(_,"MMMM dd, yyyy")} (${j}${G?"":" yr"}${Sr(U)?" - deceased":""})`,ae=Qr(l);return{patient:[{label:"Name:",value:E},{label:"ID:",value:v},{label:"Date of birth:",value:ue},{label:"Gender:",value:m}],guardian:ae}});return yt(u,l=>[l.patient,l.guardian]).reduce((l,f,E)=>({...l,[`patient${E+1}`]:f[0],[`guardian${E+1}`]:f[1]}),{})},Ni=i=>{const a=x.select1("*[name()='birthplace']/*[name()='place']/*[name()='addr']",i);return a?zr(a):""},Ti=i=>{const a=x.select1("*[name()='ethnicGroupCode']",i);if(a)return String(x.select1("string(@displayName)",a));const u=x.select("*[name()='sdtc:ethnicGroupCode']",i);return ne(u)?"":String(x.select1("string(@displayName)",u[0]))},bi=i=>{const a=x.select("//*[name()='patientRole']/*[name()='patient']/*[name()='guardian']",document);if(!a||ne(a))return;const u=Qr(i);return a.map((l,f)=>{const E=De(x.select("*[name()='addr']",l),x.select("*[name()='telecom']",l));return{name:u[f].value,contactDetails:E}})},Si=i=>x.select("*[name()='languageCommunication']",i).reduce((u,l,f)=>{const E=String(x.select1("string(*[name()='languageCode']/@code)",l));if(!E)return u;const v=String(x.select1("string(*[name()='preferenceInd']/@value)",l)),m=f===0?"":`
`,_=v!==""?`, preferred: ${v}`:"";return`${u}${m}${E}${_}`},""),_i=i=>String(x.select1("string(*[name()='maritalStatusCode']/@displayName)",i)),Di=i=>{const a=x.select1("*[name()='providerOrganization']",i),u=x.select1("//*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']",i),l=a||u,f=x.select("*[name()='id']",l).map(nt).join(", "),E=Gr(x.select("string(*[name()='name'])",l)),v=De(x.select("*[name()='addr']",l),x.select("*[name()='telecom']",l)),m=E?`
${E}`:"";return{name:`${f}${m}`,contactDetails:v}},Ci=i=>{const a=x.select1("*[name()='raceCode']",i);if(a)return String(x.select1("string(@displayName)",a));const u=x.select("*[name()='sdtc:raceCode']",i);return ne(u)?"":String(x.select1("string(@displayName)",u[0]))},Ri=i=>String(x.select1("string(*[name()='religiousAffiliationCode']/@displayName)",i)),Fi=i=>{const a=x.select("//*[name()='patientRole']",i);if(!a||ne(a))return;const u=Jr(i),l=Object.entries(u).reduce((f,[E,v])=>({...f,[E]:v==null?void 0:v.reduce((m,_)=>({...m,[bn(_.label)]:_.value}),{})}),{});return a.map((f,E)=>{const v=x.select1("*[name()='patient']",f),m=Ci(v),_=Ti(v),U=De(x.select("*[name()='addr']",f),x.select("*[name()='telecom']",f)),G=Si(v),j=Di(f),ue=bi(f),ae=_i(v),Te=Ri(v),qe=Ni(v);return{name:l[`patient${E+1}`].name,contactDetails:U,dateOfBirth:l[`patient${E+1}`].dateOfBirth,gender:l[`patient${E+1}`].gender,race:m,ethnicity:_,patientId:l[`patient${E+1}`].id,language:G,maritalStatus:ae,religion:Te,birthPlace:qe,guardian:ue||[],providerOrganization:j.name,providerOrganizationContactDetails:j.contactDetails}})},sr=({document:i})=>{const a=Fi(i);return!a||ne(a)?null:N.createElement(N.Fragment,null,a.map(u=>{const l=[{label:"Patient",value:u.name},{label:"Contact Details",value:u.contactDetails},{label:"Date Of Birth",value:u.dateOfBirth},{label:"Gender",value:u.gender},{label:"Race",value:u.race},{label:"Ethnicity",value:u.ethnicity},{label:"Patient ID",value:u.patientId},{label:"Language",value:u.language},{label:"Marital Status",value:u.maritalStatus},{label:"Religion",value:u.religion},{label:"Birth Place",value:u.birthPlace},...u.guardian.map(f=>[{label:"Guardian",value:f.name},{label:"Contact Details",value:f.contactDetails}]),[{label:"Provider Organization",value:u.providerOrganization},{label:"Contact Details (Organization)",value:u.providerOrganizationContactDetails}]];return N.createElement(Ne,{key:`${u.patientId}-${u.name}-${u.dateOfBirth}`,data:l.filter(f=>Ke(f)||f.value)})}))};try{sr.displayName="Patient",sr.__docgenInfo={description:"",displayName:"Patient",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const ur=({document:i})=>N.createElement("div",{className:"ctw-ccda-document-details"},N.createElement(Zt,{document:i}),N.createElement(Jt,{document:i}),N.createElement(sr,{document:i}),N.createElement(Xt,{document:i}),N.createElement(Kt,{document:i}),N.createElement(rr,{document:i}),N.createElement(nr,{document:i}),N.createElement(ar,{document:i}),N.createElement(jt,{document:i}),N.createElement(or,{document:i}),N.createElement(er,{document:i}),N.createElement(ir,{document:i}),N.createElement(Qt,{document:i}),N.createElement(tr,{document:i}));try{ur.displayName="DocumentDetails",ur.__docgenInfo={description:"",displayName:"DocumentDetails",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Oi=i=>{const a=String(x.select1("string(*[name()='ClinicalDocument']/*[name()='title']/text())",i)),u=Ve(String(x.select1("string(*[name()='ClinicalDocument']/*[name()='effectiveTime']/@value)",i))),l=ht(u);return`${a} (${l})`},Ii=i=>{const a=Oi(i),u=Jr(i),l=Yr(i),f=qr(i),E=jr(i),v=Xr(i),m=Wr(i);return{title:a,labelTypeData:{...u,...m||{},...l||{},...f||{},encounter:E||[],...v||{}}}},lr=({document:i})=>{const{title:a,labelTypeData:u}=Ii(i);return N.createElement("div",{className:"ctw-ccda-header-container"},N.createElement("h2",{className:"ctw-ccda-header-title"},a),N.createElement("table",{className:"ctw-ccda-common-table"},N.createElement("tbody",null,yt(u,(l,f)=>{if(!l)return null;const E=l.filter(v=>v.value);return ne(E)?null:N.createElement("tr",{key:f},N.createElement("td",{className:"ctw-ccda-common-td1"},yn(f.replace(/\d/g,""))),N.createElement("td",{className:"ctw-ccda-common-td2"},E.map((v,m)=>N.createElement("span",{key:`${f}-${m}`},v.label&&N.createElement("b",null,v.label," "),v.value))))}))))};try{lr.displayName="Header",lr.__docgenInfo={description:"",displayName:"Header",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}/*! @license DOMPurify 2.4.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.1/LICENSE */function ot(i){return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ot(i)}function cr(i,a){return cr=Object.setPrototypeOf||function(l,f){return l.__proto__=f,l},cr(i,a)}function Bi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function St(i,a,u){return Bi()?St=Reflect.construct:St=function(f,E,v){var m=[null];m.push.apply(m,E);var _=Function.bind.apply(f,m),U=new _;return v&&cr(U,v.prototype),U},St.apply(null,arguments)}function Xe(i){return Li(i)||Pi(i)||Mi(i)||Ui()}function Li(i){if(Array.isArray(i))return pr(i)}function Pi(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Mi(i,a){if(i){if(typeof i=="string")return pr(i,a);var u=Object.prototype.toString.call(i).slice(8,-1);if(u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set")return Array.from(i);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return pr(i,a)}}function pr(i,a){(a==null||a>i.length)&&(a=i.length);for(var u=0,l=new Array(a);u<a;u++)l[u]=i[u];return l}function Ui(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ki=Object.hasOwnProperty,Fr=Object.setPrototypeOf,Vi=Object.isFrozen,$i=Object.getPrototypeOf,Hi=Object.getOwnPropertyDescriptor,Ce=Object.freeze,Je=Object.seal,Gi=Object.create,Kr=typeof Reflect<"u"&&Reflect,Rt=Kr.apply,fr=Kr.construct;Rt||(Rt=function(a,u,l){return a.apply(u,l)});Ce||(Ce=function(a){return a});Je||(Je=function(a){return a});fr||(fr=function(a,u){return St(a,Xe(u))});var zi=ze(Array.prototype.forEach),Or=ze(Array.prototype.pop),vt=ze(Array.prototype.push),_t=ze(String.prototype.toLowerCase),Mt=ze(String.prototype.toString),qi=ze(String.prototype.match),je=ze(String.prototype.replace),Wi=ze(String.prototype.indexOf),Yi=ze(String.prototype.trim),_e=ze(RegExp.prototype.test),Ut=ji(TypeError);function ze(i){return function(a){for(var u=arguments.length,l=new Array(u>1?u-1:0),f=1;f<u;f++)l[f-1]=arguments[f];return Rt(i,a,l)}}function ji(i){return function(){for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return fr(i,u)}}function Y(i,a,u){u=u||_t,Fr&&Fr(i,null);for(var l=a.length;l--;){var f=a[l];if(typeof f=="string"){var E=u(f);E!==f&&(Vi(a)||(a[l]=E),f=E)}i[f]=!0}return i}function ft(i){var a=Gi(null),u;for(u in i)Rt(ki,i,[u])&&(a[u]=i[u]);return a}function Tt(i,a){for(;i!==null;){var u=Hi(i,a);if(u){if(u.get)return ze(u.get);if(typeof u.value=="function")return ze(u.value)}i=$i(i)}function l(f){return console.warn("fallback value for",f),null}return l}var Ir=Ce(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),kt=Ce(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Vt=Ce(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Xi=Ce(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$t=Ce(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Qi=Ce(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Br=Ce(["#text"]),Lr=Ce(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ht=Ce(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Pr=Ce(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bt=Ce(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ji=Je(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ki=Je(/<%[\w\W]*|[\w\W]*%>/gm),Zi=Je(/\${[\w\W]*}/gm),ea=Je(/^data-[\-\w.\u00B7-\uFFFF]/),ta=Je(/^aria-[\-\w]+$/),ra=Je(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),na=Je(/^(?:\w+script|data):/i),ia=Je(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),aa=Je(/^html$/i),oa=function(){return typeof window>"u"?null:window},sa=function(a,u){if(ot(a)!=="object"||typeof a.createPolicy!="function")return null;var l=null,f="data-tt-policy-suffix";u.currentScript&&u.currentScript.hasAttribute(f)&&(l=u.currentScript.getAttribute(f));var E="dompurify"+(l?"#"+l:"");try{return a.createPolicy(E,{createHTML:function(m){return m},createScriptURL:function(m){return m}})}catch{return console.warn("TrustedTypes policy "+E+" could not be created."),null}};function Zr(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oa(),a=function(g){return Zr(g)};if(a.version="2.4.1",a.removed=[],!i||!i.document||i.document.nodeType!==9)return a.isSupported=!1,a;var u=i.document,l=i.document,f=i.DocumentFragment,E=i.HTMLTemplateElement,v=i.Node,m=i.Element,_=i.NodeFilter,U=i.NamedNodeMap,G=U===void 0?i.NamedNodeMap||i.MozNamedAttrMap:U,j=i.HTMLFormElement,ue=i.DOMParser,ae=i.trustedTypes,Te=m.prototype,qe=Tt(Te,"cloneNode"),it=Tt(Te,"nextSibling"),A=Tt(Te,"childNodes"),le=Tt(Te,"parentNode");if(typeof E=="function"){var Ze=l.createElement("template");Ze.content&&Ze.content.ownerDocument&&(l=Ze.content.ownerDocument)}var X=sa(ae,u),fe=X?X.createHTML(""):"",he=l,W=he.implementation,Re=he.createNodeIterator,Fe=he.createDocumentFragment,Oe=he.getElementsByTagName,Ie=u.importNode,be={};try{be=ft(l).documentMode?l.documentMode:{}}catch{}var oe={};a.isSupported=typeof le=="function"&&W&&typeof W.createHTMLDocument<"u"&&be!==9;var ge=Ji,ye=Ki,xe=Zi,Be=ea,Le=ta,Pe=na,Se=ia,Z=ra,P=null,ut=Y({},[].concat(Xe(Ir),Xe(kt),Xe(Vt),Xe($t),Xe(Br))),se=null,lt=Y({},[].concat(Xe(Lr),Xe(Ht),Xe(Pr),Xe(bt))),ee=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),R=null,F=null,Me=!0,ve=!0,ie=!1,M=!1,O=!1,rt=!1,ct=!1,o=!1,r=!1,n=!1,s=!0,y=!1,w="user-content-",T=!0,$=!1,q={},D=null,C=Y({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),J=null,pe=Y({},["audio","video","img","source","image","track"]),ke=null,$e=Y({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),z="http://www.w3.org/1998/Math/MathML",pt="http://www.w3.org/2000/svg",He="http://www.w3.org/1999/xhtml",e=He,t=!1,c=null,h=Y({},[z,pt,He],Mt),p,d=["application/xhtml+xml","text/html"],I="text/html",k,Q=null,B=l.createElement("form"),H=function(g){return g instanceof RegExp||g instanceof Function},Ae=function(g){Q&&Q===g||((!g||ot(g)!=="object")&&(g={}),g=ft(g),p=d.indexOf(g.PARSER_MEDIA_TYPE)===-1?p=I:p=g.PARSER_MEDIA_TYPE,k=p==="application/xhtml+xml"?Mt:_t,P="ALLOWED_TAGS"in g?Y({},g.ALLOWED_TAGS,k):ut,se="ALLOWED_ATTR"in g?Y({},g.ALLOWED_ATTR,k):lt,c="ALLOWED_NAMESPACES"in g?Y({},g.ALLOWED_NAMESPACES,Mt):h,ke="ADD_URI_SAFE_ATTR"in g?Y(ft($e),g.ADD_URI_SAFE_ATTR,k):$e,J="ADD_DATA_URI_TAGS"in g?Y(ft(pe),g.ADD_DATA_URI_TAGS,k):pe,D="FORBID_CONTENTS"in g?Y({},g.FORBID_CONTENTS,k):C,R="FORBID_TAGS"in g?Y({},g.FORBID_TAGS,k):{},F="FORBID_ATTR"in g?Y({},g.FORBID_ATTR,k):{},q="USE_PROFILES"in g?g.USE_PROFILES:!1,Me=g.ALLOW_ARIA_ATTR!==!1,ve=g.ALLOW_DATA_ATTR!==!1,ie=g.ALLOW_UNKNOWN_PROTOCOLS||!1,M=g.SAFE_FOR_TEMPLATES||!1,O=g.WHOLE_DOCUMENT||!1,o=g.RETURN_DOM||!1,r=g.RETURN_DOM_FRAGMENT||!1,n=g.RETURN_TRUSTED_TYPE||!1,ct=g.FORCE_BODY||!1,s=g.SANITIZE_DOM!==!1,y=g.SANITIZE_NAMED_PROPS||!1,T=g.KEEP_CONTENT!==!1,$=g.IN_PLACE||!1,Z=g.ALLOWED_URI_REGEXP||Z,e=g.NAMESPACE||He,g.CUSTOM_ELEMENT_HANDLING&&H(g.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ee.tagNameCheck=g.CUSTOM_ELEMENT_HANDLING.tagNameCheck),g.CUSTOM_ELEMENT_HANDLING&&H(g.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ee.attributeNameCheck=g.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),g.CUSTOM_ELEMENT_HANDLING&&typeof g.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ee.allowCustomizedBuiltInElements=g.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),M&&(ve=!1),r&&(o=!0),q&&(P=Y({},Xe(Br)),se=[],q.html===!0&&(Y(P,Ir),Y(se,Lr)),q.svg===!0&&(Y(P,kt),Y(se,Ht),Y(se,bt)),q.svgFilters===!0&&(Y(P,Vt),Y(se,Ht),Y(se,bt)),q.mathMl===!0&&(Y(P,$t),Y(se,Pr),Y(se,bt))),g.ADD_TAGS&&(P===ut&&(P=ft(P)),Y(P,g.ADD_TAGS,k)),g.ADD_ATTR&&(se===lt&&(se=ft(se)),Y(se,g.ADD_ATTR,k)),g.ADD_URI_SAFE_ATTR&&Y(ke,g.ADD_URI_SAFE_ATTR,k),g.FORBID_CONTENTS&&(D===C&&(D=ft(D)),Y(D,g.FORBID_CONTENTS,k)),T&&(P["#text"]=!0),O&&Y(P,["html","head","body"]),P.table&&(Y(P,["tbody"]),delete R.tbody),Ce&&Ce(g),Q=g)},te=Y({},["mi","mo","mn","ms","mtext"]),We=Y({},["foreignobject","desc","title","annotation-xml"]),et=Y({},["title","style","font","a","script"]),mt=Y({},kt);Y(mt,Vt),Y(mt,Xi);var dt=Y({},$t);Y(dt,Qi);var Ot=function(g){var b=le(g);(!b||!b.tagName)&&(b={namespaceURI:e,tagName:"template"});var L=_t(g.tagName),re=_t(b.tagName);return c[g.namespaceURI]?g.namespaceURI===pt?b.namespaceURI===He?L==="svg":b.namespaceURI===z?L==="svg"&&(re==="annotation-xml"||te[re]):Boolean(mt[L]):g.namespaceURI===z?b.namespaceURI===He?L==="math":b.namespaceURI===pt?L==="math"&&We[re]:Boolean(dt[L]):g.namespaceURI===He?b.namespaceURI===pt&&!We[re]||b.namespaceURI===z&&!te[re]?!1:!dt[L]&&(et[L]||!mt[L]):!!(p==="application/xhtml+xml"&&c[g.namespaceURI]):!1},Ye=function(g){vt(a.removed,{element:g});try{g.parentNode.removeChild(g)}catch{try{g.outerHTML=fe}catch{g.remove()}}},Et=function(g,b){try{vt(a.removed,{attribute:b.getAttributeNode(g),from:b})}catch{vt(a.removed,{attribute:null,from:b})}if(b.removeAttribute(g),g==="is"&&!se[g])if(o||r)try{Ye(b)}catch{}else try{b.setAttribute(g,"")}catch{}},At=function(g){var b,L;if(ct)g="<remove></remove>"+g;else{var re=qi(g,/^[\r\n\t ]+/);L=re&&re[0]}p==="application/xhtml+xml"&&e===He&&(g='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+g+"</body></html>");var Ue=X?X.createHTML(g):g;if(e===He)try{b=new ue().parseFromString(Ue,p)}catch{}if(!b||!b.documentElement){b=W.createDocument(e,"template",null);try{b.documentElement.innerHTML=t?"":Ue}catch{}}var we=b.body||b.documentElement;return g&&L&&we.insertBefore(l.createTextNode(L),we.childNodes[0]||null),e===He?Oe.call(b,O?"html":"body")[0]:O?b.documentElement:we},S=function(g){return Re.call(g.ownerDocument||g,g,_.SHOW_ELEMENT|_.SHOW_COMMENT|_.SHOW_TEXT,null,!1)},K=function(g){return g instanceof j&&(typeof g.nodeName!="string"||typeof g.textContent!="string"||typeof g.removeChild!="function"||!(g.attributes instanceof G)||typeof g.removeAttribute!="function"||typeof g.setAttribute!="function"||typeof g.namespaceURI!="string"||typeof g.insertBefore!="function"||typeof g.hasChildNodes!="function")},ce=function(g){return ot(v)==="object"?g instanceof v:g&&ot(g)==="object"&&typeof g.nodeType=="number"&&typeof g.nodeName=="string"},me=function(g,b,L){oe[g]&&zi(oe[g],function(re){re.call(a,b,L,Q)})},wt=function(g){var b;if(me("beforeSanitizeElements",g,null),K(g)||_e(/[\u0080-\uFFFF]/,g.nodeName))return Ye(g),!0;var L=k(g.nodeName);if(me("uponSanitizeElement",g,{tagName:L,allowedTags:P}),g.hasChildNodes()&&!ce(g.firstElementChild)&&(!ce(g.content)||!ce(g.content.firstElementChild))&&_e(/<[/\w]/g,g.innerHTML)&&_e(/<[/\w]/g,g.textContent)||L==="select"&&_e(/<template/i,g.innerHTML))return Ye(g),!0;if(!P[L]||R[L]){if(!R[L]&&wr(L)&&(ee.tagNameCheck instanceof RegExp&&_e(ee.tagNameCheck,L)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(L)))return!1;if(T&&!D[L]){var re=le(g)||g.parentNode,Ue=A(g)||g.childNodes;if(Ue&&re)for(var we=Ue.length,Ee=we-1;Ee>=0;--Ee)re.insertBefore(qe(Ue[Ee],!0),it(g))}return Ye(g),!0}return g instanceof m&&!Ot(g)||(L==="noscript"||L==="noembed")&&_e(/<\/no(script|embed)/i,g.innerHTML)?(Ye(g),!0):(M&&g.nodeType===3&&(b=g.textContent,b=je(b,ge," "),b=je(b,ye," "),b=je(b,xe," "),g.textContent!==b&&(vt(a.removed,{element:g.cloneNode()}),g.textContent=b)),me("afterSanitizeElements",g,null),!1)},Ar=function(g,b,L){if(s&&(b==="id"||b==="name")&&(L in l||L in B))return!1;if(!(ve&&!F[b]&&_e(Be,b))){if(!(Me&&_e(Le,b))){if(!se[b]||F[b]){if(!(wr(g)&&(ee.tagNameCheck instanceof RegExp&&_e(ee.tagNameCheck,g)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(g))&&(ee.attributeNameCheck instanceof RegExp&&_e(ee.attributeNameCheck,b)||ee.attributeNameCheck instanceof Function&&ee.attributeNameCheck(b))||b==="is"&&ee.allowCustomizedBuiltInElements&&(ee.tagNameCheck instanceof RegExp&&_e(ee.tagNameCheck,L)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(L))))return!1}else if(!ke[b]){if(!_e(Z,je(L,Se,""))){if(!((b==="src"||b==="xlink:href"||b==="href")&&g!=="script"&&Wi(L,"data:")===0&&J[g])){if(!(ie&&!_e(Pe,je(L,Se,"")))){if(L)return!1}}}}}}return!0},wr=function(g){return g.indexOf("-")>0},Nr=function(g){var b,L,re,Ue;me("beforeSanitizeAttributes",g,null);var we=g.attributes;if(we){var Ee={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:se};for(Ue=we.length;Ue--;){b=we[Ue];var Nt=b,de=Nt.name,It=Nt.namespaceURI;if(L=de==="value"?b.value:Yi(b.value),re=k(de),Ee.attrName=re,Ee.attrValue=L,Ee.keepAttr=!0,Ee.forceKeepAttr=void 0,me("uponSanitizeAttribute",g,Ee),L=Ee.attrValue,!Ee.forceKeepAttr&&(Et(de,g),!!Ee.keepAttr)){if(_e(/\/>/i,L)){Et(de,g);continue}M&&(L=je(L,ge," "),L=je(L,ye," "),L=je(L,xe," "));var Tr=k(g.nodeName);if(Ar(Tr,re,L)){if(y&&(re==="id"||re==="name")&&(Et(de,g),L=w+L),X&&ot(ae)==="object"&&typeof ae.getAttributeType=="function"&&!It)switch(ae.getAttributeType(Tr,re)){case"TrustedHTML":L=X.createHTML(L);break;case"TrustedScriptURL":L=X.createScriptURL(L);break}try{It?g.setAttributeNS(It,de,L):g.setAttribute(de,L),Or(a.removed)}catch{}}}}me("afterSanitizeAttributes",g,null)}},en=function V(g){var b,L=S(g);for(me("beforeSanitizeShadowDOM",g,null);b=L.nextNode();)me("uponSanitizeShadowNode",b,null),!wt(b)&&(b.content instanceof f&&V(b.content),Nr(b));me("afterSanitizeShadowDOM",g,null)};return a.sanitize=function(V){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b,L,re,Ue,we;if(t=!V,t&&(V="<!-->"),typeof V!="string"&&!ce(V)){if(typeof V.toString!="function")throw Ut("toString is not a function");if(V=V.toString(),typeof V!="string")throw Ut("dirty is not a string, aborting")}if(!a.isSupported){if(ot(i.toStaticHTML)==="object"||typeof i.toStaticHTML=="function"){if(typeof V=="string")return i.toStaticHTML(V);if(ce(V))return i.toStaticHTML(V.outerHTML)}return V}if(rt||Ae(g),a.removed=[],typeof V=="string"&&($=!1),$){if(V.nodeName){var Ee=k(V.nodeName);if(!P[Ee]||R[Ee])throw Ut("root node is forbidden and cannot be sanitized in-place")}}else if(V instanceof v)b=At("<!---->"),L=b.ownerDocument.importNode(V,!0),L.nodeType===1&&L.nodeName==="BODY"||L.nodeName==="HTML"?b=L:b.appendChild(L);else{if(!o&&!M&&!O&&V.indexOf("<")===-1)return X&&n?X.createHTML(V):V;if(b=At(V),!b)return o?null:n?fe:""}b&&ct&&Ye(b.firstChild);for(var Nt=S($?V:b);re=Nt.nextNode();)re.nodeType===3&&re===Ue||wt(re)||(re.content instanceof f&&en(re.content),Nr(re),Ue=re);if(Ue=null,$)return V;if(o){if(r)for(we=Fe.call(b.ownerDocument);b.firstChild;)we.appendChild(b.firstChild);else we=b;return se.shadowroot&&(we=Ie.call(u,we,!0)),we}var de=O?b.outerHTML:b.innerHTML;return O&&P["!doctype"]&&b.ownerDocument&&b.ownerDocument.doctype&&b.ownerDocument.doctype.name&&_e(aa,b.ownerDocument.doctype.name)&&(de="<!DOCTYPE "+b.ownerDocument.doctype.name+`>
`+de),M&&(de=je(de,ge," "),de=je(de,ye," "),de=je(de,xe," ")),X&&n?X.createHTML(de):de},a.setConfig=function(V){Ae(V),rt=!0},a.clearConfig=function(){Q=null,rt=!1},a.isValidAttribute=function(V,g,b){Q||Ae({});var L=k(V),re=k(g);return Ar(L,re,b)},a.addHook=function(V,g){typeof g=="function"&&(oe[V]=oe[V]||[],vt(oe[V],g))},a.removeHook=function(V){if(oe[V])return Or(oe[V])},a.removeHooks=function(V){oe[V]&&(oe[V]=[])},a.removeAllHooks=function(){oe={}},a}var ua=Zr();const hr=({title:i,humanReadable:a})=>{const[u,l]=st.useState(!0);if(!a)return null;const f=()=>l(!u);return N.createElement("div",{className:"ctw-ccda-section-container"},N.createElement("div",{className:"ctw-ccda-section-header-wrapper"},N.createElement("button",{type:"button",className:"ctw-ccda-section-arrow",onClick:f},u?"▼":"▶"),N.createElement("h3",null,i)),u&&N.createElement("div",{className:"ctw-ccda-section-wrapper"},N.createElement("div",{dangerouslySetInnerHTML:{__html:ua.sanitize(si(a))}})))};try{hr.displayName="Section",hr.__docgenInfo={description:"",displayName:"Section",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},humanReadable:{defaultValue:null,description:"",name:"humanReadable",required:!1,type:{name:"Document"}}}}}catch{}const mr=({document:i})=>{const u=x.select("//*[name()='component']/*[name()='section']",i).map(l=>{const f=String(x.select1("string(*[name()='title'])",l)),E=x.select1("*[name()='text']",l),v=String(x.select1("string(*[name()='code']/@code)",l));return{title:f,humanReadable:E,code:v}});return N.createElement("div",{className:Mr({width:"calc(100vw - 200px - 24px - 24px - 16px - 16px - 2px)"})},N.createElement(lr,{document:i}),N.createElement(ur,{document:i}),u.map(({title:l,humanReadable:f,code:E})=>N.createElement(hr,{key:`el-text-${E}`,title:l,humanReadable:f})))};try{mr.displayName="CcdaViewer",mr.__docgenInfo={description:"",displayName:"CcdaViewer",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const la=["/xml","/xhtml+xml","application/xml"],ca=(i,a)=>i.some(u=>a.includes(u)),dr=({data:i,contentType:a,fileName:u})=>{const l=st.useRef(null),[f,E]=st.useState(),[v,m]=st.useState(),_=st.useMemo(()=>{if(!ca(la,a))return;const G=new Hn.DOMParser({locator:{},errorHandler:j=>null}).parseFromString(qt.Buffer.from(i,"base64").toString("utf8"),a);if(x.select1("//*[name()='patientRole']",G))return G},[a,i]);function U(){var j;f&&URL.revokeObjectURL(f);const G=URL.createObjectURL(new Blob([qt.Buffer.from(i,"base64").toString("utf8")],{type:"text/xml"}));E(G),m(`CCDA-${u}`),(j=l.current)==null||j.click()}return N.createElement("div",{className:"ctw-ccda-container"},N.createElement("div",{className:"ctw-ccda-switch-container"},N.createElement("a",{href:f,ref:l,download:v,className:"ctw-decoration-none ctw-flex ctw-w-fit"},N.createElement(zt,{onClick:U,text:"Download XML"}))),_?N.createElement(mr,{document:_}):N.createElement("div",{className:"ctw-ccda-base64-binary-text"},i))};try{dr.displayName="Base64BinaryField",dr.__docgenInfo={description:"",displayName:"Base64BinaryField",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string"}},contentType:{defaultValue:null,description:"",name:"contentType",required:!0,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}}}}}catch{}function Sa(i,a){for(let u=0;u<i.length;u+=1){const l=i[u];if(kn(l.target,E=>{var v;return(v=E.reference)==null?void 0:v.includes(a)})){const E=on(l.entity,{role:"source"});if(E!=null&&E.what.reference)return E.what.reference.split("/")[1]}}}async function pa(i,a){return rn.fetchQuery([En,a],async()=>i.fhirClient.read({resourceType:"Binary",id:a}))}function _a(){const{openModal:i}=xn(),{getRequestContext:a}=vn();return async(u,l)=>{const f=await a(),E=await pa(f,u);i({component:v=>N.createElement(gr,{fileName:l,rawBinary:E,...v})})}}const gr=({rawBinary:i,fileName:a,onClose:u,...l})=>N.createElement(Gt,{...l},(i==null?void 0:i.data)&&N.createElement("div",{className:"ctw-flex ctw-w-full ctw-space-x-4"},N.createElement(dr,{data:i.data,contentType:i.contentType,fileName:a}),N.createElement("div",{className:"ctw-ml-3 ctw-flex ctw-h-7 ctw-items-center"},N.createElement("button",{type:"button","aria-label":"close",onClick:u,"data-zus-telemetry-click":"Close CCDA modal",className:"ctw-btn-clear"},N.createElement("span",{className:"ctw-sr-only"},"Close panel"),N.createElement(An,{className:"ctw-h-6 ctw-w-6","aria-hidden":"true"})))));try{gr.displayName="CCDAModal",gr.__docgenInfo={description:"",displayName:"CCDAModal",props:{rawBinary:{defaultValue:null,description:"",name:"rawBinary",required:!0,type:{name:"Binary | undefined"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onAfterClosed:{defaultValue:null,description:"",name:"onAfterClosed",required:!1,type:{name:"(() => void)"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}}}}}catch{}export{zt as D,Gt as M,Sa as g,_a as u};
//# sourceMappingURL=modal-ccda-b0226b72.js.map
