{"version":3,"file":"table.b60a8096.js","sources":["../../src/components/core/table/table-head.tsx","../../src/components/core/table/table-data-cell.tsx","../../src/components/core/table/table-full-length-row.tsx","../../src/components/core/table/table-rows.tsx","../../src/components/core/pagination/pagination.tsx","../../src/components/core/table/table-colgroup.tsx","../../src/components/core/table/table.tsx"],"sourcesContent":["import type { MinRecordItem, TableColumn } from \"./table\";\n\nexport type TableHeadProps<T extends MinRecordItem> = {\n  columns: TableColumn<T>[];\n};\n\nexport const TableHead = <T extends MinRecordItem>({\n  columns,\n}: TableHeadProps<T>) => (\n  <thead>\n    <tr>\n      {columns.map((column, index) => (\n        <th key={column.title ?? index} scope=\"col\">\n          {column.title}\n        </th>\n      ))}\n    </tr>\n  </thead>\n);\n","import cx from \"classnames\";\nimport { ReactNode } from \"react\";\n\nimport type { MinRecordItem, TableColumn } from \"./table\";\n\ntype TableColumnProps<T extends MinRecordItem> = {\n  column: TableColumn<T>;\n  record: T;\n  index: number;\n};\n\nexport const TableDataCell = <T extends MinRecordItem>({\n  column,\n  record,\n  index,\n}: TableColumnProps<T>): JSX.Element => {\n  const value = column.dataIndex\n    ? (record[column.dataIndex] as unknown as ReactNode)\n    : undefined;\n\n  return (\n    <td\n      key={column.title ?? index}\n      className={cx(\n        { \"ctw-font-medium ctw-text-content-black\": index === 0 },\n        column.className,\n        // Added ctw-break-words because AbdominalReallyLongWordThatShouldBReakButDoeskadjlkajflkajsf doesn't wrap correclty without it.\n        \"ctw-hyphens-auto ctw-break-words\"\n      )}\n    >\n      {column.render ? column.render(record) : value}\n    </td>\n  );\n};\n","import { ReactNode } from \"react\";\n\nexport const TableFullLengthRow = ({\n  children,\n  colSpan,\n}: {\n  children: ReactNode;\n  colSpan: number;\n}) => (\n  <tr>\n    <td className=\"ctw-table-full-length-row\" colSpan={colSpan}>\n      {children}\n    </td>\n  </tr>\n);\n","import cx from \"classnames\";\nimport { ReactElement } from \"react\";\nimport { Spinner } from \"../spinner\";\nimport type { MinRecordItem, TableColumn } from \"./table\";\nimport { TableDataCell } from \"./table-data-cell\";\nimport { TableFullLengthRow } from \"./table-full-length-row\";\n\ntype TableRowsProps<T extends MinRecordItem> = {\n  records: T[];\n  columns: TableColumn<T>[];\n  isLoading: boolean;\n  emptyMessage: string | ReactElement;\n  handleRowClick?: (record: T) => void;\n};\n\nexport const TableRows = <T extends MinRecordItem>({\n  records,\n  columns,\n  isLoading,\n  emptyMessage,\n  handleRowClick,\n}: TableRowsProps<T>) => {\n  if (isLoading) {\n    return (\n      <TableFullLengthRow colSpan={columns.length}>\n        <div className=\"ctw-flex ctw-justify-center ctw-space-x-2\">\n          <span>Loading...</span>\n          <Spinner />\n        </div>\n      </TableFullLengthRow>\n    );\n  }\n\n  if (records.length === 0) {\n    return (\n      <TableFullLengthRow colSpan={columns.length}>\n        {emptyMessage}\n      </TableFullLengthRow>\n    );\n  }\n\n  return (\n    <>\n      {records.map((record) => (\n        <tr\n          className={cx({\n            \"ctw-cursor-pointer\": typeof handleRowClick === \"function\",\n          })}\n          key={record.id}\n          onClick={() => {\n            if (handleRowClick) handleRowClick(record);\n          }}\n        >\n          {columns.map((column, index) => (\n            <TableDataCell\n              key={column.title ?? index}\n              column={column}\n              record={record}\n              index={index}\n            />\n          ))}\n        </tr>\n      ))}\n    </>\n  );\n};\n","export const DEFAULT_PAGE_SIZE = 10;\n\nexport type PaginationProps = {\n  total: number;\n  count: number;\n  changeCount: (amount: number) => void;\n};\n\nexport const Pagination = ({ total, count, changeCount }: PaginationProps) => {\n  const allShown = count >= total || total === 0;\n  const hasPages = total > DEFAULT_PAGE_SIZE;\n\n  return (\n    <div className=\"ctw-pagination ctw-flex ctw-items-center ctw-justify-between ctw-px-6\">\n      <div className=\"ctw-text-gray-600 ctw-text-sm\">\n        Showing{\" \"}\n        <span className=\"ctw-font-medium\">{Math.min(count, total)}</span> of{\" \"}\n        <span className=\"ctw-font-medium\">{total}</span> results\n      </div>\n\n      {(!allShown || hasPages) && (\n        <div className=\"ctw-flex ctw-h-full ctw-justify-end ctw-space-x-3\">\n          {!allShown && total > DEFAULT_PAGE_SIZE * 2 && (\n            <button\n              type=\"button\"\n              className=\"ctw-btn-default\"\n              onClick={() => changeCount(count + DEFAULT_PAGE_SIZE)}\n            >\n              Show More\n            </button>\n          )}\n\n          {!allShown && (\n            <button\n              type=\"button\"\n              className=\"ctw-btn-primary ctw-w-28 ctw-whitespace-nowrap\"\n              onClick={() => changeCount(total)}\n            >\n              Show All\n            </button>\n          )}\n\n          {allShown && hasPages && (\n            <button\n              type=\"button\"\n              className=\"ctw-btn-primary ctw-w-28 ctw-whitespace-nowrap\"\n              onClick={() => changeCount(DEFAULT_PAGE_SIZE)}\n            >\n              Reset\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n","import type { MinRecordItem, TableColumn } from \"./table\";\n\nexport type TableColGroupProps<T extends MinRecordItem> = {\n  columns: TableColumn<T>[];\n};\n\nexport const TableColGroup = <T extends MinRecordItem>({\n  columns,\n}: TableColGroupProps<T>) => (\n  <colgroup>\n    {columns.map((column, index) => (\n      <col\n        key={column.title ?? index}\n        className={column.className}\n        style={{\n          minWidth: column.minWidth,\n          width: `${column.widthPercent}%`,\n        }}\n      />\n    ))}\n  </colgroup>\n);\n","import cx from \"classnames\";\nimport { ReactElement, ReactNode, useEffect, useRef, useState } from \"react\";\n\nimport { TableHead } from \"./table-head\";\nimport { TableRows } from \"./table-rows\";\nimport \"./table.scss\";\n\nimport { DEFAULT_PAGE_SIZE, Pagination } from \"../pagination/pagination\";\nimport { TableColGroup } from \"./table-colgroup\";\n\nexport interface MinRecordItem {\n  id: string | number;\n}\n\ntype DataIndexSpecified<T> = { dataIndex: keyof T; render?: never };\ntype RenderSpecified<T> = { dataIndex?: never; render: (row: T) => ReactNode };\n\n// A table column has an optional title\n// and then either a dataIndex or a render method but not both.\nexport type TableColumn<T extends MinRecordItem> = {\n  title?: string;\n  className?: string;\n  widthPercent?: number;\n  minWidth?: number;\n} & (DataIndexSpecified<T> | RenderSpecified<T>);\n\nexport type TableProps<T extends MinRecordItem> = {\n  className?: string;\n  records: T[];\n  columns: TableColumn<T>[];\n  isLoading?: boolean;\n  /** Displayed when we have 0 records. */\n  message?: string | ReactElement;\n  showTableHead?: boolean;\n  stacked?: boolean;\n  handleRowClick?: (record: T) => void;\n};\n\nexport type TableBaseProps<T extends MinRecordItem> = Omit<\n  TableProps<T>,\n  \"records\" | \"columns\"\n>;\n\nexport const Table = <T extends MinRecordItem>({\n  className,\n  columns,\n  records,\n  isLoading = false,\n  message = \"No records found\",\n  showTableHead = true,\n  stacked,\n  handleRowClick,\n}: TableProps<T>) => {\n  const tableRef = useRef<HTMLTableElement>(null);\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const [showLeftShadow, setShowLeftShadow] = useState(false);\n  const [showRightShadow, setShowRightShadow] = useState(false);\n  const [count, setCount] = useState(DEFAULT_PAGE_SIZE);\n\n  const updateShadows = () => {\n    const container = scrollContainerRef.current;\n    const table = tableRef.current;\n    if (container && table) {\n      setShowLeftShadow(container.scrollLeft > 0);\n      const rightSide = container.scrollLeft + container.clientWidth;\n      setShowRightShadow(rightSide < table.clientWidth);\n    }\n  };\n\n  useEffect(() => {\n    const container = scrollContainerRef.current;\n\n    // Update right away.\n    updateShadows();\n\n    // Update on scroll or resize events.\n    container?.addEventListener(\"scroll\", updateShadows);\n    window.addEventListener(\"resize\", updateShadows);\n\n    return () => {\n      container?.removeEventListener(\"scroll\", updateShadows);\n      window.removeEventListener(\"resize\", updateShadows);\n    };\n  }, [scrollContainerRef, isLoading]);\n\n  const hasData = !isLoading && records.length > 0;\n\n  return (\n    <div\n      className={cx(\"ctw-space-y-4\", className, {\n        \"ctw-table-stacked\": stacked,\n      })}\n    >\n      <div\n        className={cx(\"ctw-table-container\", {\n          \"ctw-table-scroll-left-shadow\": showLeftShadow,\n          \"ctw-table-scroll-right-shadow\": showRightShadow,\n        })}\n      >\n        <div className=\"ctw-scrollbar\" ref={scrollContainerRef}>\n          <table ref={tableRef}>\n            {hasData && <TableColGroup columns={columns} />}\n            {showTableHead && hasData && <TableHead columns={columns} />}\n\n            <tbody>\n              <TableRows\n                records={records.slice(0, count)}\n                handleRowClick={handleRowClick}\n                columns={columns}\n                isLoading={isLoading}\n                emptyMessage={message}\n              />\n            </tbody>\n          </table>\n        </div>\n      </div>\n      {records.length > 0 && !isLoading && (\n        <Pagination\n          total={records.length}\n          count={count}\n          changeCount={setCount}\n        />\n      )}\n    </div>\n  );\n};\n"],"names":["TableHead","columns","React","column","index","_a","TableDataCell","record","value","cx","TableFullLengthRow","children","colSpan","TableRows","records","isLoading","emptyMessage","handleRowClick","Spinner","DEFAULT_PAGE_SIZE","Pagination","total","count","changeCount","allShown","hasPages","TableColGroup","Table","className","message","showTableHead","stacked","tableRef","useRef","scrollContainerRef","showLeftShadow","setShowLeftShadow","useState","showRightShadow","setShowRightShadow","setCount","updateShadows","container","table","rightSide","useEffect","hasData"],"mappings":"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"}