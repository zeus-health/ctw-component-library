var yi=Object.defineProperty;var vi=(c,d,g)=>d in c?yi(c,d,{enumerable:!0,configurable:!0,writable:!0,value:g}):c[d]=g;var Dr=(c,d,g)=>(vi(c,typeof d!="symbol"?d+"":d,g),g),oa=(c,d,g)=>{if(!d.has(c))throw TypeError("Cannot "+g)};var nt=(c,d,g)=>(oa(c,d,"read from private field"),g?g.call(c):d.get(c)),qt=(c,d,g)=>{if(d.has(c))throw TypeError("Cannot add the same private member more than once");d instanceof WeakSet?d.add(c):d.set(c,g)},nr=(c,d,g,v)=>(oa(c,d,"write to private field"),v?v.call(c,g):d.set(c,g),g),sa=(c,d,g,v)=>({set _(b){nr(c,d,b,g)},get _(){return nt(c,d,v)}}),Yt=(c,d,g)=>(oa(c,d,"access private method"),g);import{r as react,R as React,a as React$1}from"./index.9f56b196.js";import{c as cx}from"./index.d3b8680b.js";import{l as lodash,T as Table$1,i as isMouseEvent}from"./table.6dce43b2.js";import{S as Subscribable,s as shallowEqualObjects,n as noop,i as isServer,a as isValidTimeout,t as timeUntilStale,f as focusManager,c as canFetch,b as replaceData,d as isCancelledError,e as notifyManager,p as parseQueryArgs,g as requireBrowser$1,C as CTW_REQUEST_HEADER,q as queryClient,h as ctwFetch,j as requireLib,r as requireLib$1}from"./index.7dcc3bb2.js";import{c as commonjsGlobal,a as getAugmentedNamespace}from"./_commonjsHelpers.712cc82f.js";import{c as commonjsRequire,_ as _extends}from"./extends.bed14d96.js";import{s as s$2,a as s$3,e as e$3,o as o$1,C,y,I,p as p$2,m as m$1,$ as $$1,S,b as s$4,c as p$3,d as m$2,u as u$1,L,f as C$1,h as h$1,g as s$5,F as F$1,i as o$2,r as r$2,j as S$1,n as n$2,k as F$2,N as N$1,D as D$1,T,l as I$1,q as Drawer,W as We$1,t as gt,X as XIcon}from"./drawer.0ebe46ba.js";import{S as Spinner}from"./spinner.51ecf2bb.js";import{r as reactDom,R as ReactDOM}from"./index.f2b75861.js";import{D as DataList,e as entryFromArray}from"./data-list.6d7c3503.js";import{f as fp}from"./action-list.8d2557fc.js";class QueryObserver extends Subscribable{constructor(d,g){super(),this.client=d,this.options=g,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(g)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.length===1&&(this.currentQuery.addObserver(this),shouldFetchOnMount(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(d,g){const v=this.options,b=this.currentQuery;if(this.options=this.client.defaultQueryOptions(d),shallowEqualObjects(v,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=v.queryKey),this.updateQuery();const _=this.hasListeners();_&&shouldFetchOptionally(this.currentQuery,b,this.options,v)&&this.executeFetch(),this.updateResult(g),_&&(this.currentQuery!==b||this.options.enabled!==v.enabled||this.options.staleTime!==v.staleTime)&&this.updateStaleTimeout();const E=this.computeRefetchInterval();_&&(this.currentQuery!==b||this.options.enabled!==v.enabled||E!==this.currentRefetchInterval)&&this.updateRefetchInterval(E)}getOptimisticResult(d){const g=this.client.getQueryCache().build(this.client,d);return this.createResult(g,d)}getCurrentResult(){return this.currentResult}trackResult(d){const g={};return Object.keys(d).forEach(v=>{Object.defineProperty(g,v,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(v),d[v])})}),g}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:d,...g}={}){return this.fetch({...g,meta:{refetchPage:d}})}fetchOptimistic(d){const g=this.client.defaultQueryOptions(d),v=this.client.getQueryCache().build(this.client,g);return v.isFetchingOptimistic=!0,v.fetch().then(()=>this.createResult(v,g))}fetch(d){var g;return this.executeFetch({...d,cancelRefetch:(g=d.cancelRefetch)!=null?g:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(d){this.updateQuery();let g=this.currentQuery.fetch(this.options,d);return d!=null&&d.throwOnError||(g=g.catch(noop)),g}updateStaleTimeout(){if(this.clearStaleTimeout(),isServer||this.currentResult.isStale||!isValidTimeout(this.options.staleTime))return;const g=timeUntilStale(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},g)}computeRefetchInterval(){var d;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(d=this.options.refetchInterval)!=null?d:!1}updateRefetchInterval(d){this.clearRefetchInterval(),this.currentRefetchInterval=d,!(isServer||this.options.enabled===!1||!isValidTimeout(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(d,g){const v=this.currentQuery,b=this.options,_=this.currentResult,E=this.currentResultState,R=this.currentResultOptions,U=d!==v,P=U?d.state:this.currentQueryInitialState,B=U?this.currentResult:this.previousQueryResult,{state:ee}=d;let{dataUpdatedAt:re,error:ne,errorUpdatedAt:j,fetchStatus:z,status:W}=ee,O=!1,Y=!1,Q;if(g._optimisticResults){const Ee=this.hasListeners(),be=!Ee&&shouldFetchOnMount(d,g),Ce=Ee&&shouldFetchOptionally(d,v,g,b);(be||Ce)&&(z=canFetch(d.options.networkMode)?"fetching":"paused",re||(W="loading")),g._optimisticResults==="isRestoring"&&(z="idle")}if(g.keepPreviousData&&!ee.dataUpdateCount&&B!=null&&B.isSuccess&&W!=="error")Q=B.data,re=B.dataUpdatedAt,W=B.status,O=!0;else if(g.select&&typeof ee.data<"u")if(_&&ee.data===(E==null?void 0:E.data)&&g.select===this.selectFn)Q=this.selectResult;else try{this.selectFn=g.select,Q=g.select(ee.data),Q=replaceData(_==null?void 0:_.data,Q,g),this.selectResult=Q,this.selectError=null}catch(Ee){this.selectError=Ee}else Q=ee.data;if(typeof g.placeholderData<"u"&&typeof Q>"u"&&W==="loading"){let Ee;if(_!=null&&_.isPlaceholderData&&g.placeholderData===(R==null?void 0:R.placeholderData))Ee=_.data;else if(Ee=typeof g.placeholderData=="function"?g.placeholderData():g.placeholderData,g.select&&typeof Ee<"u")try{Ee=g.select(Ee),Ee=replaceData(_==null?void 0:_.data,Ee,g),this.selectError=null}catch(be){this.selectError=be}typeof Ee<"u"&&(W="success",Q=Ee,Y=!0)}this.selectError&&(ne=this.selectError,Q=this.selectResult,j=Date.now(),W="error");const X=z==="fetching",H=W==="loading",G=W==="error";return{status:W,fetchStatus:z,isLoading:H,isSuccess:W==="success",isError:G,isInitialLoading:H&&X,data:Q,dataUpdatedAt:re,error:ne,errorUpdatedAt:j,failureCount:ee.fetchFailureCount,errorUpdateCount:ee.errorUpdateCount,isFetched:ee.dataUpdateCount>0||ee.errorUpdateCount>0,isFetchedAfterMount:ee.dataUpdateCount>P.dataUpdateCount||ee.errorUpdateCount>P.errorUpdateCount,isFetching:X,isRefetching:X&&!H,isLoadingError:G&&ee.dataUpdatedAt===0,isPaused:z==="paused",isPlaceholderData:Y,isPreviousData:O,isRefetchError:G&&ee.dataUpdatedAt!==0,isStale:isStale(d,g),refetch:this.refetch,remove:this.remove}}updateResult(d){const g=this.currentResult,v=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,shallowEqualObjects(v,g))return;this.currentResult=v;const b={cache:!0},_=()=>{if(!g)return!0;const{notifyOnChangeProps:E}=this.options;if(E==="all"||!E&&!this.trackedProps.size)return!0;const R=new Set(E!=null?E:this.trackedProps);return this.options.useErrorBoundary&&R.add("error"),Object.keys(this.currentResult).some(U=>{const P=U;return this.currentResult[P]!==g[P]&&R.has(P)})};(d==null?void 0:d.listeners)!==!1&&_()&&(b.listeners=!0),this.notify({...b,...d})}updateQuery(){const d=this.client.getQueryCache().build(this.client,this.options);if(d===this.currentQuery)return;const g=this.currentQuery;this.currentQuery=d,this.currentQueryInitialState=d.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(g==null||g.removeObserver(this),d.addObserver(this))}onQueryUpdate(d){const g={};d.type==="success"?g.onSuccess=!d.manual:d.type==="error"&&!isCancelledError(d.error)&&(g.onError=!0),this.updateResult(g),this.hasListeners()&&this.updateTimers()}notify(d){notifyManager.batch(()=>{if(d.onSuccess){var g,v,b,_;(g=(v=this.options).onSuccess)==null||g.call(v,this.currentResult.data),(b=(_=this.options).onSettled)==null||b.call(_,this.currentResult.data,null)}else if(d.onError){var E,R,U,P;(E=(R=this.options).onError)==null||E.call(R,this.currentResult.error),(U=(P=this.options).onSettled)==null||U.call(P,void 0,this.currentResult.error)}d.listeners&&this.listeners.forEach(B=>{B(this.currentResult)}),d.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function shouldLoadOnMount(c,d){return d.enabled!==!1&&!c.state.dataUpdatedAt&&!(c.state.status==="error"&&d.retryOnMount===!1)}function shouldFetchOnMount(c,d){return shouldLoadOnMount(c,d)||c.state.dataUpdatedAt>0&&shouldFetchOn(c,d,d.refetchOnMount)}function shouldFetchOn(c,d,g){if(d.enabled!==!1){const v=typeof g=="function"?g(c):g;return v==="always"||v!==!1&&isStale(c,d)}return!1}function shouldFetchOptionally(c,d,g,v){return g.enabled!==!1&&(c!==d||v.enabled===!1)&&(!g.suspense||c.state.status!=="error")&&isStale(c,g)}function isStale(c,d){return c.isStaleByTime(d.staleTime)}var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$2=react.exports;function h(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var k$1=typeof Object.is=="function"?Object.is:h,l=e$2.useState,m=e$2.useEffect,n$1=e$2.useLayoutEffect,p$1=e$2.useDebugValue;function q$1(c,d){var g=d(),v=l({inst:{value:g,getSnapshot:d}}),b=v[0].inst,_=v[1];return n$1(function(){b.value=g,b.getSnapshot=d,r$1(b)&&_({inst:b})},[c,g,d]),m(function(){return r$1(b)&&_({inst:b}),c(function(){r$1(b)&&_({inst:b})})},[c]),p$1(g),g}function r$1(c){var d=c.getSnapshot;c=c.value;try{var g=d();return!k$1(c,g)}catch{return!0}}function t$1(c,d){return d()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$1:q$1;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$2.useSyncExternalStore!==void 0?e$2.useSyncExternalStore:u;(function(c){c.exports=useSyncExternalStoreShim_production_min})(shim);const useSyncExternalStore=shim.exports.useSyncExternalStore,defaultContext=react.exports.createContext(void 0),QueryClientSharingContext=react.exports.createContext(!1);function getQueryClientContext(c,d){return c||(d&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=defaultContext),window.ReactQueryClientContext):defaultContext)}const useQueryClient=({context:c}={})=>{const d=react.exports.useContext(getQueryClientContext(c,react.exports.useContext(QueryClientSharingContext)));if(!d)throw new Error("No QueryClient set, use QueryClientProvider to set one");return d},QueryClientProvider=({client:c,children:d,context:g,contextSharing:v=!1})=>{react.exports.useEffect(()=>(c.mount(),()=>{c.unmount()}),[c]);const b=getQueryClientContext(g,v);return react.exports.createElement(QueryClientSharingContext.Provider,{value:!g&&v},react.exports.createElement(b.Provider,{value:c},d))},IsRestoringContext=react.exports.createContext(!1),useIsRestoring=()=>react.exports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let c=!1;return{clearReset:()=>{c=!1},reset:()=>{c=!0},isReset:()=>c}}const QueryErrorResetBoundaryContext=react.exports.createContext(createValue()),useQueryErrorResetBoundary=()=>react.exports.useContext(QueryErrorResetBoundaryContext);function shouldThrowError(c,d){return typeof c=="function"?c(...d):!!c}const ensurePreventErrorBoundaryRetry=(c,d)=>{(c.suspense||c.useErrorBoundary)&&(d.isReset()||(c.retryOnMount=!1))},useClearResetErrorBoundary=c=>{react.exports.useEffect(()=>{c.clearReset()},[c])},getHasError=({result:c,errorResetBoundary:d,useErrorBoundary:g,query:v})=>c.isError&&!d.isReset()&&!c.isFetching&&shouldThrowError(g,[c.error,v]);function useBaseQuery(c,d){const g=useQueryClient({context:c.context}),v=useIsRestoring(),b=useQueryErrorResetBoundary(),_=g.defaultQueryOptions(c);_._optimisticResults=v?"isRestoring":"optimistic",_.onError&&(_.onError=notifyManager.batchCalls(_.onError)),_.onSuccess&&(_.onSuccess=notifyManager.batchCalls(_.onSuccess)),_.onSettled&&(_.onSettled=notifyManager.batchCalls(_.onSettled)),_.suspense&&typeof _.staleTime!="number"&&(_.staleTime=1e3),ensurePreventErrorBoundaryRetry(_,b),useClearResetErrorBoundary(b);const[E]=react.exports.useState(()=>new d(g,_)),R=E.getOptimisticResult(_);if(useSyncExternalStore(react.exports.useCallback(U=>v?()=>{}:E.subscribe(notifyManager.batchCalls(U)),[E,v]),()=>E.getCurrentResult(),()=>E.getCurrentResult()),react.exports.useEffect(()=>{E.setOptions(_,{listeners:!1})},[_,E]),_.suspense&&R.isLoading&&R.isFetching&&!v)throw E.fetchOptimistic(_).then(({data:U})=>{_.onSuccess==null||_.onSuccess(U),_.onSettled==null||_.onSettled(U,null)}).catch(U=>{b.clearReset(),_.onError==null||_.onError(U),_.onSettled==null||_.onSettled(void 0,U)});if(getHasError({result:R,errorResetBoundary:b,useErrorBoundary:_.useErrorBoundary,query:E.getCurrentQuery()}))throw R.error;return _.notifyOnChangeProps?R:E.trackResult(R)}function useQuery(c,d,g){const v=parseQueryArgs(c,d,g);return useBaseQuery(v,QueryObserver)}const version="0.34.0",CTWStateContext=react.exports.createContext(void 0);var client={exports:{}},queryString$1={},strictUriEncode=c=>encodeURIComponent(c).replace(/[!'()*]/g,d=>`%${d.charCodeAt(0).toString(16).toUpperCase()}`),token="%[a-f0-9]{2}",singleMatcher=new RegExp("("+token+")|([^%]+?)","gi"),multiMatcher=new RegExp("("+token+")+","gi");function decodeComponents(c,d){try{return[decodeURIComponent(c.join(""))]}catch{}if(c.length===1)return c;d=d||1;var g=c.slice(0,d),v=c.slice(d);return Array.prototype.concat.call([],decodeComponents(g),decodeComponents(v))}function decode(c){try{return decodeURIComponent(c)}catch{for(var d=c.match(singleMatcher)||[],g=1;g<d.length;g++)c=decodeComponents(d,g).join(""),d=c.match(singleMatcher)||[];return c}}function customDecodeURIComponent(c){for(var d={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},g=multiMatcher.exec(c);g;){try{d[g[0]]=decodeURIComponent(g[0])}catch{var v=decode(g[0]);v!==g[0]&&(d[g[0]]=v)}g=multiMatcher.exec(c)}d["%C2"]="\uFFFD";for(var b=Object.keys(d),_=0;_<b.length;_++){var E=b[_];c=c.replace(new RegExp(E,"g"),d[E])}return c}var decodeUriComponent=function(c){if(typeof c!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof c+"`");try{return c=c.replace(/\+/g," "),decodeURIComponent(c)}catch{return customDecodeURIComponent(c)}},splitOnFirst=(c,d)=>{if(!(typeof c=="string"&&typeof d=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(d==="")return[c];const g=c.indexOf(d);return g===-1?[c]:[c.slice(0,g),c.slice(g+d.length)]},filterObj=function(c,d){for(var g={},v=Object.keys(c),b=Array.isArray(d),_=0;_<v.length;_++){var E=v[_],R=c[E];(b?d.indexOf(E)!==-1:d(E,R,c))&&(g[E]=R)}return g};(function(c){const d=strictUriEncode,g=decodeUriComponent,v=splitOnFirst,b=filterObj,_=Y=>Y==null,E=Symbol("encodeFragmentIdentifier");function R(Y){switch(Y.arrayFormat){case"index":return Q=>(X,H)=>{const G=X.length;return H===void 0||Y.skipNull&&H===null||Y.skipEmptyString&&H===""?X:H===null?[...X,[B(Q,Y),"[",G,"]"].join("")]:[...X,[B(Q,Y),"[",B(G,Y),"]=",B(H,Y)].join("")]};case"bracket":return Q=>(X,H)=>H===void 0||Y.skipNull&&H===null||Y.skipEmptyString&&H===""?X:H===null?[...X,[B(Q,Y),"[]"].join("")]:[...X,[B(Q,Y),"[]=",B(H,Y)].join("")];case"colon-list-separator":return Q=>(X,H)=>H===void 0||Y.skipNull&&H===null||Y.skipEmptyString&&H===""?X:H===null?[...X,[B(Q,Y),":list="].join("")]:[...X,[B(Q,Y),":list=",B(H,Y)].join("")];case"comma":case"separator":case"bracket-separator":{const Q=Y.arrayFormat==="bracket-separator"?"[]=":"=";return X=>(H,G)=>G===void 0||Y.skipNull&&G===null||Y.skipEmptyString&&G===""?H:(G=G===null?"":G,H.length===0?[[B(X,Y),Q,B(G,Y)].join("")]:[[H,B(G,Y)].join(Y.arrayFormatSeparator)])}default:return Q=>(X,H)=>H===void 0||Y.skipNull&&H===null||Y.skipEmptyString&&H===""?X:H===null?[...X,B(Q,Y)]:[...X,[B(Q,Y),"=",B(H,Y)].join("")]}}function U(Y){let Q;switch(Y.arrayFormat){case"index":return(X,H,G)=>{if(Q=/\[(\d*)\]$/.exec(X),X=X.replace(/\[\d*\]$/,""),!Q){G[X]=H;return}G[X]===void 0&&(G[X]={}),G[X][Q[1]]=H};case"bracket":return(X,H,G)=>{if(Q=/(\[\])$/.exec(X),X=X.replace(/\[\]$/,""),!Q){G[X]=H;return}if(G[X]===void 0){G[X]=[H];return}G[X]=[].concat(G[X],H)};case"colon-list-separator":return(X,H,G)=>{if(Q=/(:list)$/.exec(X),X=X.replace(/:list$/,""),!Q){G[X]=H;return}if(G[X]===void 0){G[X]=[H];return}G[X]=[].concat(G[X],H)};case"comma":case"separator":return(X,H,G)=>{const ie=typeof H=="string"&&H.includes(Y.arrayFormatSeparator),Ee=typeof H=="string"&&!ie&&ee(H,Y).includes(Y.arrayFormatSeparator);H=Ee?ee(H,Y):H;const be=ie||Ee?H.split(Y.arrayFormatSeparator).map(Ce=>ee(Ce,Y)):H===null?H:ee(H,Y);G[X]=be};case"bracket-separator":return(X,H,G)=>{const ie=/(\[\])$/.test(X);if(X=X.replace(/\[\]$/,""),!ie){G[X]=H&&ee(H,Y);return}const Ee=H===null?[]:H.split(Y.arrayFormatSeparator).map(be=>ee(be,Y));if(G[X]===void 0){G[X]=Ee;return}G[X]=[].concat(G[X],Ee)};default:return(X,H,G)=>{if(G[X]===void 0){G[X]=H;return}G[X]=[].concat(G[X],H)}}}function P(Y){if(typeof Y!="string"||Y.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function B(Y,Q){return Q.encode?Q.strict?d(Y):encodeURIComponent(Y):Y}function ee(Y,Q){return Q.decode?g(Y):Y}function re(Y){return Array.isArray(Y)?Y.sort():typeof Y=="object"?re(Object.keys(Y)).sort((Q,X)=>Number(Q)-Number(X)).map(Q=>Y[Q]):Y}function ne(Y){const Q=Y.indexOf("#");return Q!==-1&&(Y=Y.slice(0,Q)),Y}function j(Y){let Q="";const X=Y.indexOf("#");return X!==-1&&(Q=Y.slice(X)),Q}function z(Y){Y=ne(Y);const Q=Y.indexOf("?");return Q===-1?"":Y.slice(Q+1)}function W(Y,Q){return Q.parseNumbers&&!Number.isNaN(Number(Y))&&typeof Y=="string"&&Y.trim()!==""?Y=Number(Y):Q.parseBooleans&&Y!==null&&(Y.toLowerCase()==="true"||Y.toLowerCase()==="false")&&(Y=Y.toLowerCase()==="true"),Y}function O(Y,Q){Q=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},Q),P(Q.arrayFormatSeparator);const X=U(Q),H=Object.create(null);if(typeof Y!="string"||(Y=Y.trim().replace(/^[?#&]/,""),!Y))return H;for(const G of Y.split("&")){if(G==="")continue;let[ie,Ee]=v(Q.decode?G.replace(/\+/g," "):G,"=");Ee=Ee===void 0?null:["comma","separator","bracket-separator"].includes(Q.arrayFormat)?Ee:ee(Ee,Q),X(ee(ie,Q),Ee,H)}for(const G of Object.keys(H)){const ie=H[G];if(typeof ie=="object"&&ie!==null)for(const Ee of Object.keys(ie))ie[Ee]=W(ie[Ee],Q);else H[G]=W(ie,Q)}return Q.sort===!1?H:(Q.sort===!0?Object.keys(H).sort():Object.keys(H).sort(Q.sort)).reduce((G,ie)=>{const Ee=H[ie];return Boolean(Ee)&&typeof Ee=="object"&&!Array.isArray(Ee)?G[ie]=re(Ee):G[ie]=Ee,G},Object.create(null))}c.extract=z,c.parse=O,c.stringify=(Y,Q)=>{if(!Y)return"";Q=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},Q),P(Q.arrayFormatSeparator);const X=Ee=>Q.skipNull&&_(Y[Ee])||Q.skipEmptyString&&Y[Ee]==="",H=R(Q),G={};for(const Ee of Object.keys(Y))X(Ee)||(G[Ee]=Y[Ee]);const ie=Object.keys(G);return Q.sort!==!1&&ie.sort(Q.sort),ie.map(Ee=>{const be=Y[Ee];return be===void 0?"":be===null?B(Ee,Q):Array.isArray(be)?be.length===0&&Q.arrayFormat==="bracket-separator"?B(Ee,Q)+"[]":be.reduce(H(Ee),[]).join("&"):B(Ee,Q)+"="+B(be,Q)}).filter(Ee=>Ee.length>0).join("&")},c.parseUrl=(Y,Q)=>{Q=Object.assign({decode:!0},Q);const[X,H]=v(Y,"#");return Object.assign({url:X.split("?")[0]||"",query:O(z(Y),Q)},Q&&Q.parseFragmentIdentifier&&H?{fragmentIdentifier:ee(H,Q)}:{})},c.stringifyUrl=(Y,Q)=>{Q=Object.assign({encode:!0,strict:!0,[E]:!0},Q);const X=ne(Y.url).split("?")[0]||"",H=c.extract(Y.url),G=c.parse(H,{sort:!1}),ie=Object.assign(G,Y.query);let Ee=c.stringify(ie,Q);Ee&&(Ee=`?${Ee}`);let be=j(Y.url);return Y.fragmentIdentifier&&(be=`#${Q[E]?B(Y.fragmentIdentifier,Q):Y.fragmentIdentifier}`),`${X}${Ee}${be}`},c.pick=(Y,Q,X)=>{X=Object.assign({parseFragmentIdentifier:!0,[E]:!1},X);const{url:H,query:G,fragmentIdentifier:ie}=c.parseUrl(Y,X);return c.stringifyUrl({url:H,query:b(G,Q),fragmentIdentifier:ie},X)},c.exclude=(Y,Q,X)=>{const H=Array.isArray(Q)?G=>!Q.includes(G):(G,ie)=>!Q(G,ie);return c.pick(Y,H,X)}})(queryString$1);var stringify$1={exports:{}};(function(c,d){d=c.exports=g,d.getSerialize=v;function g(b,_,E,R){return JSON.stringify(b,v(_,R),E)}function v(b,_){var E=[],R=[];return _==null&&(_=function(U,P){return E[0]===P?"[Circular ~]":"[Circular ~."+R.slice(0,E.indexOf(P)).join(".")+"]"}),function(U,P){if(E.length>0){var B=E.indexOf(this);~B?E.splice(B+1):E.push(this),~B?R.splice(B,1/0,U):R.push(U),~E.indexOf(P)&&(P=_.call(this,U,P))}else E.push(P);return b==null?P:b.call(this,U,P)}}})(stringify$1,stringify$1.exports);const stringify=stringify$1.exports,errorLogger=requireBrowser$1()("fhir-kit-client:error"),infoLogger=requireBrowser$1()("fhir-kit-client:info");function inspectObject(c){return stringify(c)}function inspectHeaders(c){return c.raw&&typeof c.raw=="function"?inspectObject(c.raw()):inspectObject(c)}function logRequestError$1(c){!errorLogger.enabled||(errorLogger("!!! Error"),c.response&&errorLogger(`    Status: ${c.response.status}`),c.config&&(errorLogger(`    ${c.config.method.toUpperCase()}: ${c.config.url}`),errorLogger(`    Headers: ${inspectHeaders(c.config.headers)}`)),c.response&&c.response.data&&errorLogger(inspectObject(c.response.data)),errorLogger("!!! Request Error"))}function logRequestInfo$1(c,d,g){!infoLogger.enabled||(d&&infoLogger(`Request: ${c.toUpperCase()} ${d.toString()}`),infoLogger(`Request Headers: ${inspectHeaders(g)}`))}function logResponseInfo$1(c){!infoLogger.enabled||(infoLogger(`Response: ${c.status}`),c.data&&infoLogger(inspectObject(c.data)))}function logError$1(c){!errorLogger.enabled||errorLogger(c)}var logging={logRequestError:logRequestError$1,logRequestInfo:logRequestInfo$1,logResponseInfo:logResponseInfo$1,logError:logError$1};const smartOauthUrl="http://fhir-registry.smarthealthit.org/StructureDefinition/oauth-uris",{logError}=logging;function authFromCapability(c){const d={};try{return c.rest.forEach(g=>{g.security.extension.find(b=>b.url===smartOauthUrl).extension.forEach(b=>{switch(b.url){case"authorize":d.authorizeUrl=new URL(b.valueUri);break;case"token":d.tokenUrl=new URL(b.valueUri);break;case"register":d.registerUrl=new URL(b.valueUri);break;case"manage":d.manageUrl=new URL(b.valueUri);break;default:}})}),d}catch(g){return logError(g),d}}function authFromWellKnown(c){const{authorization_endpoint:d,token_endpoint:g,registration_endpoint:v}=c;return{authorizeUrl:d&&new URL(d),tokenUrl:g&&new URL(g),registerUrl:v&&new URL(v)}}var smart={authFromCapability,authFromWellKnown},es6Promise={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(c,d){(function(g,v){c.exports=v()})(commonjsGlobal,function(){function g(st){var rt=typeof st;return st!==null&&(rt==="object"||rt==="function")}function v(st){return typeof st=="function"}var b=void 0;Array.isArray?b=Array.isArray:b=function(st){return Object.prototype.toString.call(st)==="[object Array]"};var _=b,E=0,R=void 0,U=void 0,P=function(rt,ht){G[E]=rt,G[E+1]=ht,E+=2,E===2&&(U?U(ie):be())};function B(st){U=st}function ee(st){P=st}var re=typeof window<"u"?window:void 0,ne=re||{},j=ne.MutationObserver||ne.WebKitMutationObserver,z=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",W=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function O(){return function(){return process.nextTick(ie)}}function Y(){return typeof R<"u"?function(){R(ie)}:H()}function Q(){var st=0,rt=new j(ie),ht=document.createTextNode("");return rt.observe(ht,{characterData:!0}),function(){ht.data=st=++st%2}}function X(){var st=new MessageChannel;return st.port1.onmessage=ie,function(){return st.port2.postMessage(0)}}function H(){var st=setTimeout;return function(){return st(ie,1)}}var G=new Array(1e3);function ie(){for(var st=0;st<E;st+=2){var rt=G[st],ht=G[st+1];rt(ht),G[st]=void 0,G[st+1]=void 0}E=0}function Ee(){try{var st=Function("return this")().require("vertx");return R=st.runOnLoop||st.runOnContext,Y()}catch{return H()}}var be=void 0;z?be=O():j?be=Q():W?be=X():re===void 0&&typeof commonjsRequire=="function"?be=Ee():be=H();function Ce(st,rt){var ht=this,ot=new this.constructor(Tt);ot[mt]===void 0&&xt(ot);var $t=ht._state;if($t){var ct=arguments[$t-1];P(function(){return lt($t,ot,ct,ht._result)})}else Ze(ht,ot,st,rt);return ot}function Oe(st){var rt=this;if(st&&typeof st=="object"&&st.constructor===rt)return st;var ht=new rt(Tt);return Pe(ht,st),ht}var mt=Math.random().toString(36).substring(2);function Tt(){}var St=void 0,ft=1,ut=2;function wt(){return new TypeError("You cannot resolve a promise with itself")}function Et(){return new TypeError("A promises callback cannot return that same promise.")}function Pt(st,rt,ht,ot){try{st.call(rt,ht,ot)}catch($t){return $t}}function Mt(st,rt,ht){P(function(ot){var $t=!1,ct=Pt(ht,rt,function(kt){$t||($t=!0,rt!==kt?Pe(ot,kt):Ye(ot,kt))},function(kt){$t||($t=!0,tt(ot,kt))},"Settle: "+(ot._label||" unknown promise"));!$t&&ct&&($t=!0,tt(ot,ct))},st)}function Bt(st,rt){rt._state===ft?Ye(st,rt._result):rt._state===ut?tt(st,rt._result):Ze(rt,void 0,function(ht){return Pe(st,ht)},function(ht){return tt(st,ht)})}function et(st,rt,ht){rt.constructor===st.constructor&&ht===Ce&&rt.constructor.resolve===Oe?Bt(st,rt):ht===void 0?Ye(st,rt):v(ht)?Mt(st,rt,ht):Ye(st,rt)}function Pe(st,rt){if(st===rt)tt(st,wt());else if(g(rt)){var ht=void 0;try{ht=rt.then}catch(ot){tt(st,ot);return}et(st,rt,ht)}else Ye(st,rt)}function oe(st){st._onerror&&st._onerror(st._result),Qe(st)}function Ye(st,rt){st._state===St&&(st._result=rt,st._state=ft,st._subscribers.length!==0&&P(Qe,st))}function tt(st,rt){st._state===St&&(st._state=ut,st._result=rt,P(oe,st))}function Ze(st,rt,ht,ot){var $t=st._subscribers,ct=$t.length;st._onerror=null,$t[ct]=rt,$t[ct+ft]=ht,$t[ct+ut]=ot,ct===0&&st._state&&P(Qe,st)}function Qe(st){var rt=st._subscribers,ht=st._state;if(rt.length!==0){for(var ot=void 0,$t=void 0,ct=st._result,kt=0;kt<rt.length;kt+=3)ot=rt[kt],$t=rt[kt+ht],ot?lt(ht,ot,$t,ct):$t(ct);st._subscribers.length=0}}function lt(st,rt,ht,ot){var $t=v(ht),ct=void 0,kt=void 0,zt=!0;if($t){try{ct=ht(ot)}catch(Wt){zt=!1,kt=Wt}if(rt===ct){tt(rt,Et());return}}else ct=ot;rt._state!==St||($t&&zt?Pe(rt,ct):zt===!1?tt(rt,kt):st===ft?Ye(rt,ct):st===ut&&tt(rt,ct))}function _t(st,rt){try{rt(function(ot){Pe(st,ot)},function(ot){tt(st,ot)})}catch(ht){tt(st,ht)}}var Nt=0;function dt(){return Nt++}function xt(st){st[mt]=Nt++,st._state=void 0,st._result=void 0,st._subscribers=[]}function Lt(){return new Error("Array Methods must be provided an Array")}var Vt=function(){function st(rt,ht){this._instanceConstructor=rt,this.promise=new rt(Tt),this.promise[mt]||xt(this.promise),_(ht)?(this.length=ht.length,this._remaining=ht.length,this._result=new Array(this.length),this.length===0?Ye(this.promise,this._result):(this.length=this.length||0,this._enumerate(ht),this._remaining===0&&Ye(this.promise,this._result))):tt(this.promise,Lt())}return st.prototype._enumerate=function(ht){for(var ot=0;this._state===St&&ot<ht.length;ot++)this._eachEntry(ht[ot],ot)},st.prototype._eachEntry=function(ht,ot){var $t=this._instanceConstructor,ct=$t.resolve;if(ct===Oe){var kt=void 0,zt=void 0,Wt=!1;try{kt=ht.then}catch(or){Wt=!0,zt=or}if(kt===Ce&&ht._state!==St)this._settledAt(ht._state,ot,ht._result);else if(typeof kt!="function")this._remaining--,this._result[ot]=ht;else if($t===at){var mr=new $t(Tt);Wt?tt(mr,zt):et(mr,ht,kt),this._willSettleAt(mr,ot)}else this._willSettleAt(new $t(function(or){return or(ht)}),ot)}else this._willSettleAt(ct(ht),ot)},st.prototype._settledAt=function(ht,ot,$t){var ct=this.promise;ct._state===St&&(this._remaining--,ht===ut?tt(ct,$t):this._result[ot]=$t),this._remaining===0&&Ye(ct,this._result)},st.prototype._willSettleAt=function(ht,ot){var $t=this;Ze(ht,void 0,function(ct){return $t._settledAt(ft,ot,ct)},function(ct){return $t._settledAt(ut,ot,ct)})},st}();function V(st){return new Vt(this,st).promise}function M(st){var rt=this;return _(st)?new rt(function(ht,ot){for(var $t=st.length,ct=0;ct<$t;ct++)rt.resolve(st[ct]).then(ht,ot)}):new rt(function(ht,ot){return ot(new TypeError("You must pass an array to race."))})}function Z(st){var rt=this,ht=new rt(Tt);return tt(ht,st),ht}function te(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function xe(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var at=function(){function st(rt){this[mt]=dt(),this._result=this._state=void 0,this._subscribers=[],Tt!==rt&&(typeof rt!="function"&&te(),this instanceof st?_t(this,rt):xe())}return st.prototype.catch=function(ht){return this.then(null,ht)},st.prototype.finally=function(ht){var ot=this,$t=ot.constructor;return v(ht)?ot.then(function(ct){return $t.resolve(ht()).then(function(){return ct})},function(ct){return $t.resolve(ht()).then(function(){throw ct})}):ot.then(ht,ht)},st}();at.prototype.then=Ce,at.all=V,at.race=M,at.resolve=Oe,at.reject=Z,at._setScheduler=B,at._setAsap=ee,at._asap=P;function vt(){var st=void 0;if(typeof commonjsGlobal<"u")st=commonjsGlobal;else if(typeof self<"u")st=self;else try{st=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var rt=st.Promise;if(rt){var ht=null;try{ht=Object.prototype.toString.call(rt.resolve())}catch{}if(ht==="[object Promise]"&&!rt.cast)return}st.Promise=at}return at.polyfill=vt,at.Promise=at,at})})(es6Promise);(function(){(function(c){(function(d){var g={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function v(be){return be&&DataView.prototype.isPrototypeOf(be)}if(g.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=ArrayBuffer.isView||function(be){return be&&b.indexOf(Object.prototype.toString.call(be))>-1};function E(be){if(typeof be!="string"&&(be=String(be)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(be))throw new TypeError("Invalid character in header field name");return be.toLowerCase()}function R(be){return typeof be!="string"&&(be=String(be)),be}function U(be){var Ce={next:function(){var Oe=be.shift();return{done:Oe===void 0,value:Oe}}};return g.iterable&&(Ce[Symbol.iterator]=function(){return Ce}),Ce}function P(be){this.map={},be instanceof P?be.forEach(function(Ce,Oe){this.append(Oe,Ce)},this):Array.isArray(be)?be.forEach(function(Ce){this.append(Ce[0],Ce[1])},this):be&&Object.getOwnPropertyNames(be).forEach(function(Ce){this.append(Ce,be[Ce])},this)}P.prototype.append=function(be,Ce){be=E(be),Ce=R(Ce);var Oe=this.map[be];this.map[be]=Oe?Oe+", "+Ce:Ce},P.prototype.delete=function(be){delete this.map[E(be)]},P.prototype.get=function(be){return be=E(be),this.has(be)?this.map[be]:null},P.prototype.has=function(be){return this.map.hasOwnProperty(E(be))},P.prototype.set=function(be,Ce){this.map[E(be)]=R(Ce)},P.prototype.forEach=function(be,Ce){for(var Oe in this.map)this.map.hasOwnProperty(Oe)&&be.call(Ce,this.map[Oe],Oe,this)},P.prototype.keys=function(){var be=[];return this.forEach(function(Ce,Oe){be.push(Oe)}),U(be)},P.prototype.values=function(){var be=[];return this.forEach(function(Ce){be.push(Ce)}),U(be)},P.prototype.entries=function(){var be=[];return this.forEach(function(Ce,Oe){be.push([Oe,Ce])}),U(be)},g.iterable&&(P.prototype[Symbol.iterator]=P.prototype.entries);function B(be){if(be.bodyUsed)return Promise.reject(new TypeError("Already read"));be.bodyUsed=!0}function ee(be){return new Promise(function(Ce,Oe){be.onload=function(){Ce(be.result)},be.onerror=function(){Oe(be.error)}})}function re(be){var Ce=new FileReader,Oe=ee(Ce);return Ce.readAsArrayBuffer(be),Oe}function ne(be){var Ce=new FileReader,Oe=ee(Ce);return Ce.readAsText(be),Oe}function j(be){for(var Ce=new Uint8Array(be),Oe=new Array(Ce.length),mt=0;mt<Ce.length;mt++)Oe[mt]=String.fromCharCode(Ce[mt]);return Oe.join("")}function z(be){if(be.slice)return be.slice(0);var Ce=new Uint8Array(be.byteLength);return Ce.set(new Uint8Array(be)),Ce.buffer}function W(){return this.bodyUsed=!1,this._initBody=function(be){this._bodyInit=be,be?typeof be=="string"?this._bodyText=be:g.blob&&Blob.prototype.isPrototypeOf(be)?this._bodyBlob=be:g.formData&&FormData.prototype.isPrototypeOf(be)?this._bodyFormData=be:g.searchParams&&URLSearchParams.prototype.isPrototypeOf(be)?this._bodyText=be.toString():g.arrayBuffer&&g.blob&&v(be)?(this._bodyArrayBuffer=z(be.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):g.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(be)||_(be))?this._bodyArrayBuffer=z(be):this._bodyText=be=Object.prototype.toString.call(be):this._bodyText="",this.headers.get("content-type")||(typeof be=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(be)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var be=B(this);if(be)return be;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?B(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(re)}),this.text=function(){var be=B(this);if(be)return be;if(this._bodyBlob)return ne(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(j(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(X)}),this.json=function(){return this.text().then(JSON.parse)},this}var O=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Y(be){var Ce=be.toUpperCase();return O.indexOf(Ce)>-1?Ce:be}function Q(be,Ce){Ce=Ce||{};var Oe=Ce.body;if(be instanceof Q){if(be.bodyUsed)throw new TypeError("Already read");this.url=be.url,this.credentials=be.credentials,Ce.headers||(this.headers=new P(be.headers)),this.method=be.method,this.mode=be.mode,this.signal=be.signal,!Oe&&be._bodyInit!=null&&(Oe=be._bodyInit,be.bodyUsed=!0)}else this.url=String(be);if(this.credentials=Ce.credentials||this.credentials||"same-origin",(Ce.headers||!this.headers)&&(this.headers=new P(Ce.headers)),this.method=Y(Ce.method||this.method||"GET"),this.mode=Ce.mode||this.mode||null,this.signal=Ce.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Oe)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Oe)}Q.prototype.clone=function(){return new Q(this,{body:this._bodyInit})};function X(be){var Ce=new FormData;return be.trim().split("&").forEach(function(Oe){if(Oe){var mt=Oe.split("="),Tt=mt.shift().replace(/\+/g," "),St=mt.join("=").replace(/\+/g," ");Ce.append(decodeURIComponent(Tt),decodeURIComponent(St))}}),Ce}function H(be){var Ce=new P,Oe=be.replace(/\r?\n[\t ]+/g," ");return Oe.split(/\r?\n/).forEach(function(mt){var Tt=mt.split(":"),St=Tt.shift().trim();if(St){var ft=Tt.join(":").trim();Ce.append(St,ft)}}),Ce}W.call(Q.prototype);function G(be,Ce){Ce||(Ce={}),this.type="default",this.status=Ce.status===void 0?200:Ce.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Ce?Ce.statusText:"OK",this.headers=new P(Ce.headers),this.url=Ce.url||"",this._initBody(be)}W.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new P(this.headers),url:this.url})},G.error=function(){var be=new G(null,{status:0,statusText:""});return be.type="error",be};var ie=[301,302,303,307,308];G.redirect=function(be,Ce){if(ie.indexOf(Ce)===-1)throw new RangeError("Invalid status code");return new G(null,{status:Ce,headers:{location:be}})},d.DOMException=c.DOMException;try{new d.DOMException}catch{d.DOMException=function(Ce,Oe){this.message=Ce,this.name=Oe;var mt=Error(Ce);this.stack=mt.stack},d.DOMException.prototype=Object.create(Error.prototype),d.DOMException.prototype.constructor=d.DOMException}function Ee(be,Ce){return new Promise(function(Oe,mt){var Tt=new Q(be,Ce);if(Tt.signal&&Tt.signal.aborted)return mt(new d.DOMException("Aborted","AbortError"));var St=new XMLHttpRequest;function ft(){St.abort()}St.onload=function(){var ut={status:St.status,statusText:St.statusText,headers:H(St.getAllResponseHeaders()||"")};ut.url="responseURL"in St?St.responseURL:ut.headers.get("X-Request-URL");var wt="response"in St?St.response:St.responseText;Oe(new G(wt,ut))},St.onerror=function(){mt(new TypeError("Network request failed"))},St.ontimeout=function(){mt(new TypeError("Network request failed"))},St.onabort=function(){mt(new d.DOMException("Aborted","AbortError"))},St.open(Tt.method,Tt.url,!0),Tt.credentials==="include"?St.withCredentials=!0:Tt.credentials==="omit"&&(St.withCredentials=!1),"responseType"in St&&g.blob&&(St.responseType="blob"),Tt.headers.forEach(function(ut,wt){St.setRequestHeader(wt,ut)}),Tt.signal&&(Tt.signal.addEventListener("abort",ft),St.onreadystatechange=function(){St.readyState===4&&Tt.signal.removeEventListener("abort",ft)}),St.send(typeof Tt._bodyInit>"u"?null:Tt._bodyInit)})}return Ee.polyfill=!0,c.fetch||(c.fetch=Ee,c.Headers=P,c.Request=Q,c.Response=G),d.Headers=P,d.Request=Q,d.Response=G,d.fetch=Ee,Object.defineProperty(d,"__esModule",{value:!0}),d})({})})(typeof self<"u"?self:commonjsGlobal)})();var browser$1={exports:{}},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$1.exports;hasRequiredBrowser=1,browser$1.exports=c,browser$1.exports.HttpsAgent=c;function c(){}return browser$1.exports}es6Promise.exports.polyfill();const{logRequestError,logRequestInfo,logResponseInfo}=logging,defaultHeaders={accept:"application/fhir+json"},responseAttributeKey="__response",requestAttributeKey="__request";let agentIsAvailable=!1,HttpAgent,HttpsAgent;try{HttpAgent=requireBrowser(),HttpsAgent=requireBrowser().HttpsAgent,agentIsAvailable=!0}catch{logRequestInfo("HTTP Agent is not available")}const agentCache=new WeakMap;function agentBuilder(c,d={}){const g={baseUrl:c,agentOptions:d};return agentIsAvailable?(agentCache.get(g)||(c.startsWith("https")?agentCache.set(g,{agent:new HttpsAgent(d)}):agentCache.set(g,{agent:new HttpAgent(d)})),agentCache.get(g)):{}}function responseErrorBuilder({status:c,data:d,method:g,headers:v,url:b}){const _={response:{status:c,data:d},config:{method:g,url:b,headers:v}};return logRequestError(_),_}function stringifyBody(c){return typeof c=="string"?c:JSON.stringify(c)}var httpClient=class Xn{static lcKeys(d){return d&&Object.keys(d).reduce((g,v)=>(g[v.toLowerCase()]=d[v],g),{})}constructor({baseUrl:d,customHeaders:g={},requestOptions:v={},requestSigner:b=void 0}){this.baseUrl=d,this.customHeaders=g,this.baseRequestOptions=v,this.requestSigner=b}set baseUrl(d){if(!d)throw new Error("baseUrl cannot be blank");if(typeof d!="string")throw new Error("baseUrl must be a string");this.baseUrlValue=d}get baseUrl(){return this.baseUrlValue}static responseFor(d){return d[responseAttributeKey]}static requestFor(d){return d[requestAttributeKey]}set bearerToken(d){const g=`Bearer ${d}`;this.authHeader={authorization:g}}requestBuilder(d,g,v,b){const _={...this.baseRequestOptions,...v,method:d,body:stringifyBody(b)};let E={};return agentIsAvailable||(E={keepalive:Object.prototype.hasOwnProperty.call(_,"keepalive")?_.keepalive:!0}),Object.assign(_,E,{headers:new Headers(this.mergeHeaders(v.headers))},agentBuilder(this.baseUrl,_)),this.requestSigner&&this.requestSigner(g,_),new Request(g,_)}async request(d,g,v={},b){const _=this.expandUrl(g),E=this.requestBuilder(d,_,v,b);logRequestInfo(d,_,E.headers);const R=await fetch(E),{status:U,headers:P}=R;logResponseInfo({status:U,response:R});const B=await R.text();let ee={};if(B)try{ee=JSON.parse(B)}catch{throw ee=B,responseErrorBuilder({status:U,data:ee,method:d,headers:P,url:_})}if(!R.ok)throw responseErrorBuilder({status:U,data:ee,method:d,headers:P,url:_});return Object.defineProperty(ee,responseAttributeKey,{writable:!1,enumerable:!1,value:R}),Object.defineProperty(ee,requestAttributeKey,{writable:!1,enumerable:!1,value:E}),ee}async get(d,g){return this.request("GET",d,g)}async delete(d,g){return this.request("DELETE",d,g)}async put(d,g,v={}){const b={"content-type":"application/fhir+json",...Xn.lcKeys(v.headers)},_={...v,headers:b};return this.request("PUT",d,_,g)}async post(d,g,v={}){const b={"content-type":"application/fhir+json",...Xn.lcKeys(v.headers)},_={...v,headers:b};return this.request("POST",d,_,g)}async patch(d,g,v){return this.request("PATCH",d,v,g)}expandUrl(d=""){return d.toLowerCase().startsWith("http")?d:this.baseUrl.endsWith("/")&&d.startsWith("/")?this.baseUrl+d.slice(1):this.baseUrl.endsWith("/")||d.startsWith("/")?this.baseUrl+d:`${this.baseUrl}/${d}`}mergeHeaders(d){const{lcKeys:g}=Xn;return{...g(defaultHeaders),...g(this.authHeader),...g(this.customHeaders),...g(d)}}},fhirRegularExpressions={fhirReferenceRegEx:/^((http|https):\/\/([A-Za-z0-9\\.:%$]*\/)*)?(Account|ActivityDefinition|AdverseEvent|AllergyIntolerance|Appointment|AppointmentResponse|AuditEvent|Basic|Binary|BiologicallyDerivedProduct|BodySite|BodyStructure|Bundle|CapabilityStatement|CarePlan|CareTeam|CatalogEntry|ChargeItem|ChargeItemDefinition|Claim|ClaimResponse|ClinicalImpression|CodeSystem|Communication|CommunicationRequest|CompartmentDefinition|Composition|ConceptMap|Condition|Conformance|Consent|Contract|Coverage|CoverageEligibilityRequest|CoverageEligibilityResponse|DataElement|DecisionSupportRule|DecisionSupportServiceModule|DetectedIssue|Device|DeviceComponent|DeviceDefinition|DeviceMetric|DeviceRequest|DeviceUseRequest|DeviceUseStatement|DiagnosticOrder|DiagnosticReport|DiagnosticRequest|DocumentManifest|DocumentReference|EffectEvidenceSynthesis|EligibilityRequest|EligibilityResponse|Encounter|Endpoint|EnrollmentRequest|EnrollmentResponse|EntryDefinition|EpisodeOfCare|EventDefinition|Evidence|EvidenceVariable|ExampleScenario|ExpansionProfile|ExplanationOfBenefit|FamilyMemberHistory|Flag|Goal|GraphDefinition|Group|GuidanceRequest|GuidanceResponse|HealthcareService|ImagingExcerpt|ImagingManifest|ImagingObjectSelection|ImagingStudy|Immunization|ImmunizationEvaluation|ImmunizationRecommendation|ImplementationGuide|ImplementationGuideInput|ImplementationGuideOutput|InsurancePlan|Invoice|ItemInstance|Library|Linkage|List|Location|Measure|MeasureReport|Media|Medication|MedicationAdministration|MedicationDispense|MedicationKnowledge|MedicationOrder|MedicationRequest|MedicationStatement|MedicinalProduct|MedicinalProductAuthorization|MedicinalProductClinicals|MedicinalProductContraindication|MedicinalProductDeviceSpec|MedicinalProductIndication|MedicinalProductIngredient|MedicinalProductInteraction|MedicinalProductManufactured|MedicinalProductPackaged|MedicinalProductPharmaceutical|MedicinalProductUndesirableEffect|MessageDefinition|MessageHeader|ModuleDefinition|ModuleMetadata|MolecularSequence|NamingSystem|NutritionOrder|NutritionRequest|Observation|ObservationDefinition|OccupationalData|OperationDefinition|OperationOutcome|Order|OrderResponse|OrderSet|Organization|OrganizationAffiliation|OrganizationRole|Patient|PaymentNotice|PaymentReconciliation|Person|PlanDefinition|Practitioner|PractitionerRole|Procedure|ProcedureRequest|ProcessRequest|ProcessResponse|ProductPlan|Protocol|Provenance|Questionnaire|QuestionnaireResponse|ReferralRequest|RelatedPerson|RequestGroup|ResearchDefinition|ResearchElementDefinition|ResearchStudy|ResearchSubject|RiskAssessment|RiskEvidenceSynthesis|Schedule|SearchParameter|Sequence|ServiceDefinition|ServiceRequest|Slot|Specimen|SpecimenDefinition|StructureDefinition|StructureMap|Subscription|Substance|SubstanceNucleicAcid|SubstancePolymer|SubstanceProtein|SubstanceReferenceInformation|SubstanceSourceMaterial|SubstanceSpecification|SupplyDelivery|SupplyRequest|Task|TerminologyCapabilities|TestReport|TestScript|UserSession|ValueSet|VerificationResult|VisionPrescription)\/[A-Za-z0-9\-.]{1,256}(\/_history\/[A-Za-z0-9\-.]{1,256})?$/};const queryString=queryString$1,{fhirReferenceRegEx}=fhirRegularExpressions;function splitReference(c){if(!c.match(fhirReferenceRegEx))throw new Error(`${c} is not a recognized FHIR reference`);let d,g=c;c.startsWith("http")&&([,d]=fhirReferenceRegEx.exec(c),g=c.slice(d.length),d.endsWith("/")&&(d=d.slice(0,-1)));const[v,b]=g.split("/");return{baseUrl:d,resourceType:v,id:b}}function validResourceType(c){return!c.startsWith("/")&&!c.includes(":")&&/\S/.test(c)}function createQueryString(c){if(c instanceof Object&&Object.keys(c).length>0)return queryString.stringify(c)}var utils={createQueryString,splitReference,validResourceType};const deprecatePaginationArgs=(c,d)=>{if(Object.prototype.hasOwnProperty.call(c,"resourceType")){console.warn("WARNING: positional parameters for pagination methods are deprecated and will be removed in the next major version. Call with ({ bundle, options }) rather than (bundle, headers)");const g={bundle:c};return d&&(g.options={headers:d}),g}return c},deprecateHeaders=(c,d)=>d?(console.warn("WARNING: headers is deprecated and will be removed in the next major version. Use options.headers instead."),console.warn(JSON.stringify(d,null,"  ")),{headers:d,...c}):c;var deprecations={deprecateHeaders,deprecatePaginationArgs},referenceResolver,hasRequiredReferenceResolver;function requireReferenceResolver(){if(hasRequiredReferenceResolver)return referenceResolver;hasRequiredReferenceResolver=1;const{splitReference:c}=utils,{deprecateHeaders:d}=deprecations;return referenceResolver=class{constructor(g){this.client=g}async resolve({reference:g,context:v,headers:b,options:_={}}={}){return v===void 0?g.startsWith("http")?this.resolveAbsoluteReference(g,d(_,b)):this.client.httpClient.get(g,d(_,b)):g.startsWith("#")?this.resolveContainedReference(g,v):this.resolveBundleReference(g,v,d(_,b))}async resolveAbsoluteReference(g,v){if(g.startsWith(this.client.baseUrl))return this.client.httpClient.get(g,v);const{baseUrl:b,resourceType:_,id:E}=c(g),R=requireClient();return new R({baseUrl:b}).read({resourceType:_,id:E,options:v})}resolveContainedReference(g,v){if(v.contained){const b=g.slice(1),_=v.contained.find(E=>E.id===b);if(_)return _}throw new Error(`Unable to resolve contained reference: ${g}`)}async resolveBundleReference(g,v,b){const _=new RegExp(`(^|/)${g}$`),E=v.entry.find(R=>_.test(R.fullUrl));return E?E.resource:this.resolve({reference:g,options:b})}},referenceResolver}class Pagination$1{constructor(d){this.httpClient=d}nextPage(d,{headers:g}={}){const v=d.link.find(b=>b.relation==="next");return v?this.httpClient.get(v.url,{headers:g}):void 0}prevPage(d,{headers:g}={}){const v=d.link.find(b=>b.relation.match(/^prev(ious)?$/));return v?this.httpClient.get(v.url,{headers:g}):void 0}}var pagination$1=Pagination$1,browser={};const _global=typeof self<"u"?self:typeof window<"u"?window:void 0;if(!_global)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!_global.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');browser.AbortController=_global.AbortController;const{AbortController:AbortController$1}=browser;class FetchJob{constructor(){this.controller=new AbortController$1,this.resolving=!1}addSignalOption(d){return{signal:this.controller.signal,...d}}safeAbort(){this.resolving||this.controller.abort()}}class FetchQueue{constructor(){this.jobs=[],this.numJobs=0}buildJob(){const d=new FetchJob;return this.numJobs=this.jobs.push(d),d}safeAbortOthers(d){d.resolving=!0;for(let g=0,v=this.numJobs;g<v;g+=1)d!==this.jobs[g]&&this.jobs[g].safeAbort()}}var fetchQueue={FetchQueue,FetchJob};class CapabilityTool{constructor(d){this.capabilityStatement=d}serverCan(d){return this.supportFor({capabilityType:"interaction",where:{code:d}})}resourceCan(d,g){return this.supportFor({resourceType:d,capabilityType:"interaction",where:{code:g}})}serverSearch(d){return this.supportFor({capabilityType:"searchParam",where:{name:d}})}resourceSearch(d,g){return this.supportFor({resourceType:d,capabilityType:"searchParam",where:{name:g}})}supportFor({resourceType:d,capabilityType:g,where:v}={}){let b;if(d?b=this.resourceCapabilities({resourceType:d}):b=this.serverCapabilities(),!b)return!1;const _=b[g];if(v&&_){const E=Object.keys(v)[0];return _.find(U=>U[E]===v[E])!==void 0}return _!==void 0}interactionsFor({resourceType:d}={}){const g=this.resourceCapabilities({resourceType:d});return g===void 0?[]:g.interaction.map(v=>v.code)}searchParamsFor({resourceType:d}={}){const g=this.resourceCapabilities({resourceType:d});return g===void 0?[]:g.searchParam===void 0?[]:g.searchParam.map(v=>v.name)}resourceCapabilities({resourceType:d}={}){return this.serverCapabilities().resource.find(b=>b.type===d)}capabilityContents({resourceType:d,capabilityType:g}={}){const v=this.resourceCapabilities({resourceType:d});if(v!==void 0)return v[g]}serverCapabilities(){return this.capabilityStatement.rest.find(d=>d.mode==="server")}}var capabilityTool=CapabilityTool,hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;const c=queryString$1,{authFromCapability:d,authFromWellKnown:g}=smart,v=httpClient,b=requireReferenceResolver(),_=pagination$1,{createQueryString:E,validResourceType:R}=utils,{FetchQueue:U}=fetchQueue,{deprecatePaginationArgs:P,deprecateHeaders:B}=deprecations,ee=capabilityTool;class re{constructor({baseUrl:j,customHeaders:z,requestOptions:W,requestSigner:O,bearerToken:Y}={}){this.httpClient=new v({baseUrl:j,customHeaders:z,requestOptions:W,requestSigner:O}),Y&&(this.httpClient.bearerToken=Y),this.resolver=new b(this),this.pagination=new _(this.httpClient)}static httpFor(j){return{request:v.requestFor(j),response:v.responseFor(j)}}get baseUrl(){return this.httpClient&&this.httpClient.baseUrl}set baseUrl(j){this.httpClient&&(this.httpClient.baseUrl=j)}get customHeaders(){return this.httpClient.customHeaders}set customHeaders(j){this.httpClient.customHeaders=j}set bearerToken(j){this.httpClient.bearerToken=j}resolve({reference:j,context:z,headers:W,options:O={}}={}){return this.resolver.resolve({reference:j,context:z,options:B(O,W)})}async smartAuthMetadata({headers:j,options:z={}}={}){const W={options:B(z,j)};W.options.headers||(W.options.headers={}),W.options.headers.accept="application/fhir+json,application/json";const O=this.baseUrl.replace(/\/*$/,"/"),Y=new U,Q=Y.buildJob(),X=Y.buildJob(),H=Y.buildJob(),G=[];return new Promise((ie,Ee)=>{function be(Ce){G.push(Ce)===Y.numJobs&&Ee(new Error(G.map(Oe=>Oe.message).join("; ")))}this.httpClient.request("GET",`${O}.well-known/smart-configuration`,X.addSignalOption(W)).then(Ce=>(Y.safeAbortOthers(X),ie(g(Ce)))).catch(Ce=>be(Ce)),this.capabilityStatement(Q.addSignalOption(W)).then(Ce=>(Y.safeAbortOthers(Q),ie(d(Ce)))).catch(Ce=>be(Ce)),this.httpClient.request("GET",`${O}.well-known/openid-configuration`,H.addSignalOption(W)).then(Ce=>(Y.safeAbortOthers(H),ie(g(Ce)))).catch(Ce=>be(Ce))})}capabilityStatement({headers:j,options:z={}}={}){return this.metadata||(this.metadata=this.httpClient.get("metadata",B(z,j))),this.metadata}request(j,{method:z="GET",options:W={},body:O}={}){return W.method&&W.method!==z&&console.warn(`WARNING: 'options.method' has been specified: ${W.method} but will be ignored. Use 'method' instead.`),this.httpClient.request(z,j,W,O)}read({resourceType:j,id:z,headers:W,options:O={}}={}){if(!R(j))throw new Error("Invalid resourceType",j);return this.httpClient.get(`${j}/${z}`,B(O,W))}vread({resourceType:j,id:z,version:W,headers:O,options:Y={}}={}){if(!R(j))throw new Error("Invalid resourceType",j);return this.httpClient.get(`${j}/${z}/_history/${W}`,B(Y,O))}create({resourceType:j,body:z,headers:W,options:O={}}={}){if(!R(j))throw new Error("Invalid resourceType",j);return this.httpClient.post(j,z,B(O,W))}delete({resourceType:j,id:z,headers:W,options:O={}}={}){if(!R(j))throw new Error("Invalid resourceType",j);return this.httpClient.delete(`${j}/${z}`,B(O,W))}update({resourceType:j,id:z,searchParams:W,body:O,headers:Y,options:Q={}}={}){if(!R(j))throw new Error("Invalid resourceType",j);if(z&&W)throw new Error("Conditional update with search params cannot be with id",j);if(W){const X=E(W);return this.httpClient.put(`${j}?${X}`,O,B(Q,Y))}return this.httpClient.put(`${j}/${z}`,O,B(Q,Y))}patch({resourceType:j,id:z,JSONPatch:W,headers:O,options:Y={}}={}){if(!R(j))throw new Error("Invalid resourceType",j);const X={...B(Y,O).headers||{},"Content-Type":"application/json-patch+json"};return this.httpClient.patch(`${j}/${z}`,W,{...Y,headers:X})}batch({body:j,headers:z,options:W={}}={}){return this.httpClient.post("/",j,B(W,z))}transaction({body:j,headers:z,options:W={}}={}){return this.httpClient.post("/",j,B(W,z))}operation({name:j,resourceType:z,id:W,method:O="POST",input:Y,options:Q={}}={}){const X=["/"];if(z){if(!R(z))throw new Error("Invalid resourceType",z);X.push(`${z}/`)}if(W&&X.push(`${W}/`),X.push(`${j.startsWith("$")?j:`$${j}`}`),O.toUpperCase()==="POST")return this.httpClient.post(X.join(""),Y,Q);if(O.toUpperCase()==="GET")return Y&&X.push(`?${c.stringify(Y)}`),this.httpClient.get(X.join(""),Q)}nextPage(j,z){const{bundle:W,options:O={}}=P(j,z);return this.pagination.nextPage(W,O)}prevPage(j,z){const{bundle:W,options:O={}}=P(j,z);return this.pagination.prevPage(W,O)}search({resourceType:j,compartment:z,searchParams:W,headers:O,options:Y={}}={}){if(j&&!R(j))throw new Error("Invalid resourceType",j);if(z&&j)return this.compartmentSearch({resourceType:j,compartment:z,searchParams:W,options:B(Y,O)});if(j)return this.resourceSearch({resourceType:j,searchParams:W,options:B(Y,O)});if(W instanceof Object&&Object.keys(W).length>0)return this.systemSearch({searchParams:W,options:B(Y,O)});throw new Error("search requires either searchParams or a resourceType")}resourceSearch({resourceType:j,searchParams:z,headers:W,options:O={}}={}){if(!R(j))throw new Error("Invalid resourceType",j);let Y=j;return O.postSearch&&(Y+="/_search"),this.baseSearch({searchPath:Y,searchParams:z,headers:W,options:O})}systemSearch({searchParams:j,headers:z,options:W={}}={}){const O="/_search";return this.baseSearch({searchPath:O,searchParams:j,headers:z,options:W})}compartmentSearch({resourceType:j,compartment:z,searchParams:W,headers:O,options:Y={}}={}){if(!R(j))throw new Error("Invalid resourceType",j);const{resourceType:Q,id:X}=z;if(!R(Q))throw new Error("Invalid compartmentType",Q);let H=`/${Q}/${X}/${j}`;return Y.postSearch&&(H+="/_search"),this.baseSearch({searchPath:H,searchParams:W,headers:O,options:Y})}baseSearch({searchPath:j,searchParams:z,headers:W,options:O}){const Y=E(z),Q=B(O,W),X=O.postSearch?"postSearch":"getSearch";return this[X](j,Y,Q)}postSearch(j,z,W){const Y={...{"Content-Type":"application/x-www-form-urlencoded"},...W.headers},Q={...W,headers:Y};return this.httpClient.post(j,z,Q)}getSearch(j,z,W){let O=j;return z&&(O+=`?${z}`),this.httpClient.get(O,W)}history({resourceType:j,id:z,headers:W,options:O={}}={}){if(j&&!R(j))throw new Error("Invalid resourceType",j);return z&&j?this.resourceHistory({resourceType:j,id:z,options:B(O,W)}):j?this.typeHistory({resourceType:j,options:B(O,W)}):this.systemHistory({options:B(O,W)})}resourceHistory({resourceType:j,id:z,headers:W,options:O={}}={}){if(!R(j))throw new Error("Invalid resourceType",j);return this.httpClient.get(`${j}/${z}/_history`,B(O,W))}typeHistory({resourceType:j,headers:z,options:W={}}={}){if(!R(j))throw new Error("Invalid resourceType",j);return this.httpClient.get(`${j}/_history`,B(W,z))}systemHistory({headers:j,options:z={}}={}){return this.httpClient.get("_history",B(z,j))}}return client.exports=re,client.exports.CapabilityTool=ee,client.exports}var clientExports=requireClient();function getFhirClient(c,d,g){const v=c==="production"?"https://api.zusapi.com/fhir":`https://api.${c}.zusapi.com/fhir`,b=CTW_REQUEST_HEADER;return g&&(b["Zus-Account"]=g),new clientExports({baseUrl:v,bearerToken:d,customHeaders:b})}const omitEmptyArrays=c=>omitEmptyArraysHelper(c),omitEmptyArraysHelper=c=>{if(Array.isArray(c))return c.length===0?void 0:c.map(omitEmptyArrays);if(c!==null&&typeof c=="object"){const d=c;return Object.entries(d).forEach(([g,v])=>{d[g]=omitEmptyArrays(v)}),d}return c},CLASS_PREFIX="ctw-",defaultBreakpoints={sm:640,md:768,lg:1024},TailwindTheme={colors:{transparent:"transparent",white:"#fff",black:"#000",primary:{light:"#F3E8FF",main:"#A855F7",dark:"#7E22CE"},icon:{default:"#374151",light:"#D1D5DB",active:"#A855F7"},divider:{main:"#D1D5DB",light:"#E5E7EB"},content:{black:"#111827",light:"#6B7280",lighter:"#9CA3AF"},error:{main:"#EF4444",light:"#FEE2E2",dark:"#7F1D1D",heading:"#991B1B",message:"#B91C1B",bg:"#FEF2F2",icon:"#F97171"},success:{main:"#10B981",light:"#D1FAE5"},caution:{main:"#F59E0B",light:"#FEF3C7",heading:"#92400E",message:"#B45309",bg:"#FFFBEB",icon:"#FBBF24"},info:{main:"#0EA5E9",light:"#E0F2FE"},bg:{white:"#FFFFFF",lighter:"#F9FAFB",light:"#F3F4F6",dark:"#E5E7EB",black:"#111827"}}},EmptyTailwindCSSVars={"--tw-pan-x":" ","--tw-pan-y":" ","--tw-pinch-zoom":" ","--tw-ordinal":" ","--tw-slashed-zero":" ","--tw-numeric-figure":" ","--tw-numeric-spacing":" ","--tw-numeric-fraction":" ","--tw-ring-inset":" ","--tw-blur":" ","--tw-brightness":" ","--tw-contrast":" ","--tw-grayscale":" ","--tw-hue-rotate":" ","--tw-invert":" ","--tw-saturate":" ","--tw-sepia":" ","--tw-drop-shadow":" ","--tw-backdrop-blur":" ","--tw-backdrop-brightness":" ","--tw-backdrop-contrast":" ","--tw-backdrop-grayscale":" ","--tw-backdrop-hue-rotate":" ","--tw-backdrop-invert":" ","--tw-backdrop-opacity":" ","--tw-backdrop-saturate":" ","--tw-backdrop-sepia":" "},DefaultTheme={...TailwindTheme,breakpoints:defaultBreakpoints};function nameCSSVar(c){return`--${CLASS_PREFIX}-${c}`}function mapToCSSVar(c){const d={};return Object.entries(c).forEach(([g,v])=>{typeof v=="string"?d[nameCSSVar(g)]=hexToRGB(v):Object.entries(v).forEach(([b,_])=>{d[nameCSSVar(`${g}-${b}`)]=hexToRGB(_)})}),d}function hexToRGB(c,d){if(c.startsWith("#")){const g=parseInt(c.slice(1,3),16),v=parseInt(c.slice(3,5),16),b=parseInt(c.slice(5,7),16);return d?`rgba(${g}, ${v}, ${b}, ${d})`:`rgb(${g}, ${v}, ${b})`}return c}function e$1(c){this.message=c}e$1.prototype=new Error,e$1.prototype.name="InvalidCharacterError";var r=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(c){var d=String(c).replace(/=+$/,"");if(d.length%4==1)throw new e$1("'atob' failed: The string to be decoded is not correctly encoded.");for(var g,v,b=0,_=0,E="";v=d.charAt(_++);~v&&(g=b%4?64*g+v:v,b++%4)?E+=String.fromCharCode(255&g>>(-2*b&6)):0)v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(v);return E};function t(c){var d=c.replace(/-/g,"+").replace(/_/g,"/");switch(d.length%4){case 0:break;case 2:d+="==";break;case 3:d+="=";break;default:throw"Illegal base64url string!"}try{return function(g){return decodeURIComponent(r(g).replace(/(.)/g,function(v,b){var _=b.charCodeAt(0).toString(16).toUpperCase();return _.length<2&&(_="0"+_),"%"+_}))}(d)}catch{return r(d)}}function n(c){this.message=c}function o(c,d){if(typeof c!="string")throw new n("Invalid token specified");var g=(d=d||{}).header===!0?0:1;try{return JSON.parse(t(c.split(".")[g]))}catch(v){throw new n("Invalid token specified: "+v.message)}}n.prototype=new Error,n.prototype.name="InvalidTokenError";const AUTH_BUILDER_ID="https://zusapi.com/builder_id",AUTH_BUILDER_NAME="https://zusapi.com/builder_name",AUTH_PRACTITIONER_ID="https://zusapi.com/practitioner_id",AUTH_EMAIL="https://zusapi.com/email";function getClaims(c){try{return o(c)}catch{return{}}}function claimsBuilderId(c){return getClaims(c)[AUTH_BUILDER_ID]}function claimsBuilderName(c){return getClaims(c)[AUTH_BUILDER_NAME]}function claimsPractitionerId(c){return getClaims(c)[AUTH_PRACTITIONER_ID]}function claimsAuthEmail(c){return getClaims(c)[AUTH_EMAIL]}const main="",EXPIRY_PADDING_MS=6e4;function CTWProvider({theme:c,children:d,...g}){const[v,b]=react.exports.useState(),_=react.exports.useRef(null);react.exports.useEffect(()=>{window.CTWComponentLibrary={version}},[]),react.exports.useEffect(()=>{var B;const U={...mapToCSSVar((c==null?void 0:c.colors)||{}),...EmptyTailwindCSSVars},P=Object.entries(U).map(([ee,re])=>`${ee}:${re}`).join(";");(B=_.current)==null||B.setAttribute("style",P)},[_,c]);const E=react.exports.useCallback(async()=>{if(g.authToken)return g.authToken;const U=await checkOrRefreshAuth(v,g.authTokenURL,g.headers);return(v==null?void 0:v.accessToken)!==U.accessToken&&b(U),U.accessToken},[v,g]),R=react.exports.useMemo(()=>({...g,theme:lodash.exports.merge({},DefaultTheme,c),token:v,ctwProviderRef:_,actions:{handleAuth:E}}),[g,c,E,v,_]);return React.createElement("div",{ref:_},React.createElement(CTWStateContext.Provider,{value:R},React.createElement(QueryClientProvider,{client:queryClient},d)),React.createElement("div",{id:"headlessui-portal-root"},React.createElement("div",null)))}function useCTW(){const c=react.exports.useContext(CTWStateContext);if(c===void 0||c.theme===void 0)throw new Error("useCTW must be used within a CTWProvider");return{getRequestContext:react.exports.useCallback(async()=>{var b,_;const g=await c.actions.handleAuth();return{env:c.env,authToken:g,builderId:(_=(b=c.builderId)!=null?b:claimsBuilderId(g))!=null?_:"",contextBuilderId:c.builderId,fhirClient:getFhirClient(c.env,g,c.builderId)}},[c]),theme:c.theme,ctwProviderRef:c.ctwProviderRef}}function useQueryWithCTW(c,d,g,v=!0){const{getRequestContext:b}=useCTW();return useQuery([c,...d],async()=>{const _=await b();return g(_,d)},{enabled:v})}async function checkOrRefreshAuth(c,d,g){if(!c||Date.now()>=c.expiresAt+EXPIRY_PADDING_MS){const b=await(await ctwFetch(d,{headers:g})).json();return{accessToken:b.access_token,issuedTokenType:b.issued_token_type,tokenType:b.token_type,expiresAt:Date.now()+b.expires_in*1e3}}return c}try{CTWProvider.displayName="CTWProvider",CTWProvider.__docgenInfo={description:"",displayName:"CTWProvider",props:{env:{defaultValue:null,description:"",name:"env",required:!0,type:{name:"enum",value:[{value:'"dev"'},{value:'"sandbox"'},{value:'"production"'}]}},builderId:{defaultValue:null,description:"",name:"builderId",required:!1,type:{name:"string"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"Record<string, string>"}},authToken:{defaultValue:null,description:"",name:"authToken",required:!1,type:{name:"string"}},authTokenURL:{defaultValue:null,description:"",name:"authTokenURL",required:!1,type:{name:"string"}}}}}catch{}function i$2(c,d){let[g,v]=react.exports.useState(c),b=s$2(c);return s$3(()=>v(b.current),[b,v,...d]),g}function i$1(c){var d;if(c.type)return c.type;let g=(d=c.as)!=null?d:"button";if(typeof g=="string"&&g.toLowerCase()==="button")return"button"}function s$1(c,d){let[g,v]=react.exports.useState(()=>i$1(c));return s$3(()=>{v(i$1(c))},[c.type,c.as]),s$3(()=>{g||!d.current||d.current instanceof HTMLButtonElement&&!d.current.hasAttribute("type")&&v("button")},[g,d]),g}function F({container:c,accept:d,walk:g,enabled:v=!0}){let b=react.exports.useRef(d),_=react.exports.useRef(g);react.exports.useEffect(()=>{b.current=d,_.current=g},[d,g]),s$3(()=>{if(!c||!v)return;let E=e$3(c);if(!E)return;let R=b.current,U=_.current,P=Object.assign(ee=>R(ee),{acceptNode:R}),B=E.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,P,!1);for(;B.nextNode();)U(B.currentNode)},[c,v,b,_])}function f$1(c){throw new Error("Unexpected object: "+c)}var a=(c=>(c[c.First=0]="First",c[c.Previous=1]="Previous",c[c.Next=2]="Next",c[c.Last=3]="Last",c[c.Specific=4]="Specific",c[c.Nothing=5]="Nothing",c))(a||{});function x(c,d){let g=d.resolveItems();if(g.length<=0)return null;let v=d.resolveActiveIndex(),b=v!=null?v:-1,_=(()=>{switch(c.focus){case 0:return g.findIndex(E=>!d.resolveDisabled(E));case 1:{let E=g.slice().reverse().findIndex((R,U,P)=>b!==-1&&P.length-U-1>=b?!1:!d.resolveDisabled(R));return E===-1?E:g.length-1-E}case 2:return g.findIndex((E,R)=>R<=b?!1:!d.resolveDisabled(E));case 3:{let E=g.slice().reverse().findIndex(R=>!d.resolveDisabled(R));return E===-1?E:g.length-1-E}case 4:return g.findIndex(E=>d.resolveId(E)===c.id);case 5:return null;default:f$1(c)}})();return _===-1?v:_}function e(c={},d=null,g=[]){for(let[v,b]of Object.entries(c))f(g,s(d,v),b);return g}function s(c,d){return c?c+"["+d+"]":d}function f(c,d,g){if(Array.isArray(g))for(let[v,b]of g.entries())f(c,s(d,v.toString()),b);else g instanceof Date?c.push([d,g.toISOString()]):typeof g=="boolean"?c.push([d,g?"1":"0"]):typeof g=="string"?c.push([d,g]):typeof g=="number"?c.push([d,`${g}`]):g==null?c.push([d,""]):e(g,d,c)}function p(c,d,g){let[v,b]=react.exports.useState(g),_=c!==void 0;return[_?c:v,o$1(E=>(_||b(E),d==null?void 0:d(E)))]}var De=(c=>(c[c.Open=0]="Open",c[c.Closed=1]="Closed",c))(De||{}),Le=(c=>(c[c.Single=0]="Single",c[c.Multi=1]="Multi",c))(Le||{}),Ve=(c=>(c[c.Pointer=0]="Pointer",c[c.Other=1]="Other",c))(Ve||{}),Me$1=(c=>(c[c.OpenCombobox=0]="OpenCombobox",c[c.CloseCombobox=1]="CloseCombobox",c[c.GoToOption=2]="GoToOption",c[c.RegisterOption=3]="RegisterOption",c[c.UnregisterOption=4]="UnregisterOption",c[c.RegisterLabel=5]="RegisterLabel",c))(Me$1||{});function $(c,d=g=>g){let g=c.activeOptionIndex!==null?c.options[c.activeOptionIndex]:null,v=S$1(d(c.options.slice()),_=>_.dataRef.current.domRef.current),b=g?v.indexOf(g):null;return b===-1&&(b=null),{options:v,activeOptionIndex:b}}let he={[1](c){return c.dataRef.current.disabled||c.comboboxState===1?c:{...c,activeOptionIndex:null,comboboxState:1}},[0](c){if(c.dataRef.current.disabled||c.comboboxState===0)return c;let d=c.activeOptionIndex,{isSelected:g}=c.dataRef.current,v=c.options.findIndex(b=>g(b.dataRef.current.value));return v!==-1&&(d=v),{...c,comboboxState:0,activeOptionIndex:d}},[2](c,d){var g;if(c.dataRef.current.disabled||c.dataRef.current.optionsRef.current&&!c.dataRef.current.optionsPropsRef.current.static&&c.comboboxState===1)return c;let v=$(c);if(v.activeOptionIndex===null){let _=v.options.findIndex(E=>!E.dataRef.current.disabled);_!==-1&&(v.activeOptionIndex=_)}let b=x(d,{resolveItems:()=>v.options,resolveActiveIndex:()=>v.activeOptionIndex,resolveId:_=>_.id,resolveDisabled:_=>_.dataRef.current.disabled});return{...c,...v,activeOptionIndex:b,activationTrigger:(g=d.trigger)!=null?g:1}},[3]:(c,d)=>{let g={id:d.id,dataRef:d.dataRef},v=$(c,_=>[..._,g]);c.activeOptionIndex===null&&c.dataRef.current.isSelected(d.dataRef.current.value)&&(v.activeOptionIndex=v.options.indexOf(g));let b={...c,...v,activationTrigger:1};return c.dataRef.current.__demoMode&&c.dataRef.current.value===void 0&&(b.activeOptionIndex=0),b},[4]:(c,d)=>{let g=$(c,v=>{let b=v.findIndex(_=>_.id===d.id);return b!==-1&&v.splice(b,1),v});return{...c,...g,activationTrigger:1}},[5]:(c,d)=>({...c,labelId:d.id})},J=react.exports.createContext(null);J.displayName="ComboboxActionsContext";function N(c){let d=react.exports.useContext(J);if(d===null){let g=new Error(`<${c} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,N),g}return d}let q=react.exports.createContext(null);q.displayName="ComboboxDataContext";function w$1(c){let d=react.exports.useContext(q);if(d===null){let g=new Error(`<${c} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,w$1),g}return d}function Fe(c,d){return u$1(d.type,he,c,d)}let _e=react.exports.Fragment;function ke(c,d){let{value:g,defaultValue:v,onChange:b,name:_,by:E=(Mt,Bt)=>Mt===Bt,disabled:R=!1,__demoMode:U=!1,nullable:P=!1,multiple:B=!1,...ee}=c,[re,ne]=p(g,b,v),[j,z]=react.exports.useReducer(Fe,{dataRef:react.exports.createRef(),comboboxState:U?0:1,options:[],activeOptionIndex:null,activationTrigger:1,labelId:null}),W=react.exports.useRef(!1),O=react.exports.useRef({static:!1,hold:!1}),Y=react.exports.useRef(null),Q=react.exports.useRef(null),X=react.exports.useRef(null),H=react.exports.useRef(null),G=o$1(typeof E=="string"?(Mt,Bt)=>{let et=E;return(Mt==null?void 0:Mt[et])===(Bt==null?void 0:Bt[et])}:E),ie=react.exports.useCallback(Mt=>u$1(Ee.mode,{[1]:()=>re.some(Bt=>G(Bt,Mt)),[0]:()=>G(re,Mt)}),[re]),Ee=react.exports.useMemo(()=>({...j,optionsPropsRef:O,labelRef:Y,inputRef:Q,buttonRef:X,optionsRef:H,value:re,disabled:R,mode:B?1:0,get activeOptionIndex(){if(W.current&&j.activeOptionIndex===null&&j.options.length>0){let Mt=j.options.findIndex(Bt=>!Bt.dataRef.current.disabled);if(Mt!==-1)return Mt}return j.activeOptionIndex},compare:G,isSelected:ie,nullable:P,__demoMode:U}),[re,R,B,P,U,j]);s$3(()=>{j.dataRef.current=Ee},[Ee]),L([Ee.buttonRef,Ee.inputRef,Ee.optionsRef],()=>z({type:1}),Ee.comboboxState===0);let be=react.exports.useMemo(()=>({open:Ee.comboboxState===0,disabled:R,activeIndex:Ee.activeOptionIndex,activeOption:Ee.activeOptionIndex===null?null:Ee.options[Ee.activeOptionIndex].dataRef.current.value,value:re}),[Ee,R,re]),Ce=o$1(Mt=>{let Bt=Ee.options.find(et=>et.id===Mt);!Bt||wt(Bt.dataRef.current.value)}),Oe=o$1(()=>{if(Ee.activeOptionIndex!==null){let{dataRef:Mt,id:Bt}=Ee.options[Ee.activeOptionIndex];wt(Mt.current.value),z({type:2,focus:a.Specific,id:Bt})}}),mt=o$1(()=>{z({type:0}),W.current=!0}),Tt=o$1(()=>{z({type:1}),W.current=!1}),St=o$1((Mt,Bt,et)=>(W.current=!1,Mt===a.Specific?z({type:2,focus:a.Specific,id:Bt,trigger:et}):z({type:2,focus:Mt,trigger:et}))),ft=o$1((Mt,Bt)=>(z({type:3,id:Mt,dataRef:Bt}),()=>z({type:4,id:Mt}))),ut=o$1(Mt=>(z({type:5,id:Mt}),()=>z({type:5,id:null}))),wt=o$1(Mt=>u$1(Ee.mode,{[0](){return ne==null?void 0:ne(Mt)},[1](){let Bt=Ee.value.slice(),et=Bt.findIndex(Pe=>G(Pe,Mt));return et===-1?Bt.push(Mt):Bt.splice(et,1),ne==null?void 0:ne(Bt)}})),Et=react.exports.useMemo(()=>({onChange:wt,registerOption:ft,registerLabel:ut,goToOption:St,closeCombobox:Tt,openCombobox:mt,selectActiveOption:Oe,selectOption:Ce}),[]),Pt=d===null?{}:{ref:d};return React.createElement(J.Provider,{value:Et},React.createElement(q.Provider,{value:Ee},React.createElement(C$1,{value:u$1(Ee.comboboxState,{[0]:p$3.Open,[1]:p$3.Closed})},_!=null&&re!=null&&e({[_]:re}).map(([Mt,Bt])=>React.createElement(h$1,{features:s$5.Hidden,...F$1({key:Mt,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:Mt,value:Bt})})),$$1({ourProps:Pt,theirProps:ee,slot:be,defaultTag:_e,name:"Combobox"}))))}let we=C(ke),Be="input",Ue=C(function(c,d){var g,v;let{value:b,onChange:_,displayValue:E,type:R="text",...U}=c,P=w$1("Combobox.Input"),B=N("Combobox.Input"),ee=y(P.inputRef,d),re=`headlessui-combobox-input-${I()}`,ne=p$2(),j=react.exports.useMemo(()=>{var X;return typeof E=="function"?(X=E(P.value))!=null?X:"":typeof P.value=="string"?P.value:""},[P.value]);m$1(([X,H],[G,ie])=>{!P.inputRef.current||(ie===0&&H===1||X!==G)&&(P.inputRef.current.value=X)},[j,P.comboboxState]);let z=o$1(X=>{switch(X.key){case o$2.Backspace:case o$2.Delete:if(P.mode!==0||!P.nullable)return;let H=X.currentTarget;ne.requestAnimationFrame(()=>{H.value===""&&(B.onChange(null),P.optionsRef.current&&(P.optionsRef.current.scrollTop=0),B.goToOption(a.Nothing))});break;case o$2.Enter:if(P.comboboxState!==0||X.nativeEvent.isComposing)return;if(X.preventDefault(),X.stopPropagation(),P.activeOptionIndex===null){B.closeCombobox();return}B.selectActiveOption(),P.mode===0&&B.closeCombobox();break;case o$2.ArrowDown:return X.preventDefault(),X.stopPropagation(),u$1(P.comboboxState,{[0]:()=>{B.goToOption(a.Next)},[1]:()=>{B.openCombobox()}});case o$2.ArrowUp:return X.preventDefault(),X.stopPropagation(),u$1(P.comboboxState,{[0]:()=>{B.goToOption(a.Previous)},[1]:()=>{B.openCombobox(),ne.nextFrame(()=>{P.value||B.goToOption(a.Last)})}});case o$2.Home:case o$2.PageUp:return X.preventDefault(),X.stopPropagation(),B.goToOption(a.First);case o$2.End:case o$2.PageDown:return X.preventDefault(),X.stopPropagation(),B.goToOption(a.Last);case o$2.Escape:return P.comboboxState!==0?void 0:(X.preventDefault(),P.optionsRef.current&&!P.optionsPropsRef.current.static&&X.stopPropagation(),B.closeCombobox());case o$2.Tab:if(P.comboboxState!==0)return;P.mode===0&&B.selectActiveOption(),B.closeCombobox();break}}),W=o$1(X=>{B.openCombobox(),_==null||_(X)}),O=i$2(()=>{if(P.labelId)return[P.labelId].join(" ")},[P.labelId]),Y=react.exports.useMemo(()=>({open:P.comboboxState===0,disabled:P.disabled}),[P]),Q={ref:ee,id:re,role:"combobox",type:R,"aria-controls":(g=P.optionsRef.current)==null?void 0:g.id,"aria-expanded":P.disabled?void 0:P.comboboxState===0,"aria-activedescendant":P.activeOptionIndex===null||(v=P.options[P.activeOptionIndex])==null?void 0:v.id,"aria-multiselectable":P.mode===1?!0:void 0,"aria-labelledby":O,disabled:P.disabled,onKeyDown:z,onChange:W};return $$1({ourProps:Q,theirProps:U,slot:Y,defaultTag:Be,name:"Combobox.Input"})}),Ge="button",Ne=C(function(c,d){var g;let v=w$1("Combobox.Button"),b=N("Combobox.Button"),_=y(v.buttonRef,d),E=`headlessui-combobox-button-${I()}`,R=p$2(),U=o$1(j=>{switch(j.key){case o$2.ArrowDown:return j.preventDefault(),j.stopPropagation(),v.comboboxState===1&&b.openCombobox(),R.nextFrame(()=>{var z;return(z=v.inputRef.current)==null?void 0:z.focus({preventScroll:!0})});case o$2.ArrowUp:return j.preventDefault(),j.stopPropagation(),v.comboboxState===1&&(b.openCombobox(),R.nextFrame(()=>{v.value||b.goToOption(a.Last)})),R.nextFrame(()=>{var z;return(z=v.inputRef.current)==null?void 0:z.focus({preventScroll:!0})});case o$2.Escape:return v.comboboxState!==0?void 0:(j.preventDefault(),v.optionsRef.current&&!v.optionsPropsRef.current.static&&j.stopPropagation(),b.closeCombobox(),R.nextFrame(()=>{var z;return(z=v.inputRef.current)==null?void 0:z.focus({preventScroll:!0})}));default:return}}),P=o$1(j=>{if(r$2(j.currentTarget))return j.preventDefault();v.comboboxState===0?b.closeCombobox():(j.preventDefault(),b.openCombobox()),R.nextFrame(()=>{var z;return(z=v.inputRef.current)==null?void 0:z.focus({preventScroll:!0})})}),B=i$2(()=>{if(v.labelId)return[v.labelId,E].join(" ")},[v.labelId,E]),ee=react.exports.useMemo(()=>({open:v.comboboxState===0,disabled:v.disabled,value:v.value}),[v]),re=c,ne={ref:_,id:E,type:s$1(c,v.buttonRef),tabIndex:-1,"aria-haspopup":!0,"aria-controls":(g=v.optionsRef.current)==null?void 0:g.id,"aria-expanded":v.disabled?void 0:v.comboboxState===0,"aria-labelledby":B,disabled:v.disabled,onClick:P,onKeyDown:U};return $$1({ourProps:ne,theirProps:re,slot:ee,defaultTag:Ge,name:"Combobox.Button"})}),He="label",je=C(function(c,d){let g=w$1("Combobox.Label"),v=`headlessui-combobox-label-${I()}`,b=N("Combobox.Label"),_=y(g.labelRef,d);s$3(()=>b.registerLabel(v),[v]);let E=o$1(()=>{var U;return(U=g.inputRef.current)==null?void 0:U.focus({preventScroll:!0})}),R=react.exports.useMemo(()=>({open:g.comboboxState===0,disabled:g.disabled}),[g]);return $$1({ourProps:{ref:_,id:v,onClick:E},theirProps:c,slot:R,defaultTag:He,name:"Combobox.Label"})}),Ke="ul",We=S.RenderStrategy|S.Static,Xe=C(function(c,d){var g;let{hold:v=!1,...b}=c,_=w$1("Combobox.Options"),E=y(_.optionsRef,d),R=`headlessui-combobox-options-${I()}`,U=s$4(),P=(()=>U!==null?U===p$3.Open:_.comboboxState===0)();s$3(()=>{var ne;_.optionsPropsRef.current.static=(ne=c.static)!=null?ne:!1},[_.optionsPropsRef,c.static]),s$3(()=>{_.optionsPropsRef.current.hold=v},[_.optionsPropsRef,v]),F({container:_.optionsRef.current,enabled:_.comboboxState===0,accept(ne){return ne.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:ne.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(ne){ne.setAttribute("role","none")}});let B=i$2(()=>{var ne,j;return(j=_.labelId)!=null?j:(ne=_.buttonRef.current)==null?void 0:ne.id},[_.labelId,_.buttonRef.current]),ee=react.exports.useMemo(()=>({open:_.comboboxState===0}),[_]),re={"aria-activedescendant":_.activeOptionIndex===null||(g=_.options[_.activeOptionIndex])==null?void 0:g.id,"aria-labelledby":B,role:"listbox",id:R,ref:E};return $$1({ourProps:re,theirProps:b,slot:ee,defaultTag:Ke,features:We,visible:P,name:"Combobox.Options"})}),$e="li",Je=C(function(c,d){var g,v;let{disabled:b=!1,value:_,...E}=c,R=w$1("Combobox.Option"),U=N("Combobox.Option"),P=`headlessui-combobox-option-${I()}`,B=R.activeOptionIndex!==null?R.options[R.activeOptionIndex].id===P:!1,ee=R.isSelected(_),re=react.exports.useRef(null),ne=s$2({disabled:b,value:_,domRef:re,textValue:(v=(g=re.current)==null?void 0:g.textContent)==null?void 0:v.toLowerCase()}),j=y(d,re),z=o$1(()=>U.selectOption(P));s$3(()=>U.registerOption(P,ne),[ne,P]);let W=react.exports.useRef(!R.__demoMode);s$3(()=>{if(!R.__demoMode)return;let G=m$2();return G.requestAnimationFrame(()=>{W.current=!0}),G.dispose},[]),s$3(()=>{if(R.comboboxState!==0||!B||!W.current||R.activationTrigger===0)return;let G=m$2();return G.requestAnimationFrame(()=>{var ie,Ee;(Ee=(ie=re.current)==null?void 0:ie.scrollIntoView)==null||Ee.call(ie,{block:"nearest"})}),G.dispose},[re,B,R.comboboxState,R.activationTrigger,R.activeOptionIndex]);let O=o$1(G=>{if(b)return G.preventDefault();z(),R.mode===0&&U.closeCombobox()}),Y=o$1(()=>{if(b)return U.goToOption(a.Nothing);U.goToOption(a.Specific,P)}),Q=o$1(()=>{b||B||U.goToOption(a.Specific,P,0)}),X=o$1(()=>{b||!B||R.optionsPropsRef.current.hold||U.goToOption(a.Nothing)}),H=react.exports.useMemo(()=>({active:B,selected:ee,disabled:b}),[B,ee,b]);return $$1({ourProps:{id:P,ref:j,role:"option",tabIndex:b===!0?void 0:-1,"aria-disabled":b===!0?!0:void 0,"aria-selected":ee,disabled:void 0,onClick:O,onFocus:Y,onPointerMove:Q,onMouseMove:Q,onPointerLeave:X,onMouseLeave:X},theirProps:E,slot:H,defaultTag:$e,name:"Combobox.Option"})}),Lo=Object.assign(we,{Input:Ue,Button:Ne,Label:je,Options:Xe,Option:Je});var ue=(c=>(c[c.Open=0]="Open",c[c.Closed=1]="Closed",c))(ue||{}),se=(c=>(c[c.Pointer=0]="Pointer",c[c.Other=1]="Other",c))(se||{}),le=(c=>(c[c.OpenMenu=0]="OpenMenu",c[c.CloseMenu=1]="CloseMenu",c[c.GoToItem=2]="GoToItem",c[c.Search=3]="Search",c[c.ClearSearch=4]="ClearSearch",c[c.RegisterItem=5]="RegisterItem",c[c.UnregisterItem=6]="UnregisterItem",c))(le||{});function k(c,d=g=>g){let g=c.activeItemIndex!==null?c.items[c.activeItemIndex]:null,v=S$1(d(c.items.slice()),_=>_.dataRef.current.domRef.current),b=g?v.indexOf(g):null;return b===-1&&(b=null),{items:v,activeItemIndex:b}}let ce={[1](c){return c.menuState===1?c:{...c,activeItemIndex:null,menuState:1}},[0](c){return c.menuState===0?c:{...c,menuState:0}},[2]:(c,d)=>{var g;let v=k(c),b=x(d,{resolveItems:()=>v.items,resolveActiveIndex:()=>v.activeItemIndex,resolveId:_=>_.id,resolveDisabled:_=>_.dataRef.current.disabled});return{...c,...v,searchQuery:"",activeItemIndex:b,activationTrigger:(g=d.trigger)!=null?g:1}},[3]:(c,d)=>{let g=c.searchQuery!==""?0:1,v=c.searchQuery+d.value.toLowerCase(),b=(c.activeItemIndex!==null?c.items.slice(c.activeItemIndex+g).concat(c.items.slice(0,c.activeItemIndex+g)):c.items).find(E=>{var R;return((R=E.dataRef.current.textValue)==null?void 0:R.startsWith(v))&&!E.dataRef.current.disabled}),_=b?c.items.indexOf(b):-1;return _===-1||_===c.activeItemIndex?{...c,searchQuery:v}:{...c,searchQuery:v,activeItemIndex:_,activationTrigger:1}},[4](c){return c.searchQuery===""?c:{...c,searchQuery:"",searchActiveItemIndex:null}},[5]:(c,d)=>{let g=k(c,v=>[...v,{id:d.id,dataRef:d.dataRef}]);return{...c,...g}},[6]:(c,d)=>{let g=k(c,v=>{let b=v.findIndex(_=>_.id===d.id);return b!==-1&&v.splice(b,1),v});return{...c,...g,activationTrigger:1}}},w=react.exports.createContext(null);w.displayName="MenuContext";function D(c){let d=react.exports.useContext(w);if(d===null){let g=new Error(`<${c} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,D),g}return d}function pe(c,d){return u$1(d.type,ce,c,d)}let me=react.exports.Fragment,de=C(function(c,d){let g=react.exports.useReducer(pe,{menuState:1,buttonRef:react.exports.createRef(),itemsRef:react.exports.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:v,itemsRef:b,buttonRef:_},E]=g,R=y(d);L([_,b],(ee,re)=>{var ne;E({type:1}),F$2(re,N$1.Loose)||(ee.preventDefault(),(ne=_.current)==null||ne.focus())},v===0);let U=react.exports.useMemo(()=>({open:v===0}),[v]),P=c,B={ref:R};return React.createElement(w.Provider,{value:g},React.createElement(C$1,{value:u$1(v,{[0]:p$3.Open,[1]:p$3.Closed})},$$1({ourProps:B,theirProps:P,slot:U,defaultTag:me,name:"Menu"})))}),fe="button",Te=C(function(c,d){var g;let[v,b]=D("Menu.Button"),_=y(v.buttonRef,d),E=`headlessui-menu-button-${I()}`,R=p$2(),U=o$1(j=>{switch(j.key){case o$2.Space:case o$2.Enter:case o$2.ArrowDown:j.preventDefault(),j.stopPropagation(),b({type:0}),R.nextFrame(()=>b({type:2,focus:a.First}));break;case o$2.ArrowUp:j.preventDefault(),j.stopPropagation(),b({type:0}),R.nextFrame(()=>b({type:2,focus:a.Last}));break}}),P=o$1(j=>{switch(j.key){case o$2.Space:j.preventDefault();break}}),B=o$1(j=>{if(r$2(j.currentTarget))return j.preventDefault();c.disabled||(v.menuState===0?(b({type:1}),R.nextFrame(()=>{var z;return(z=v.buttonRef.current)==null?void 0:z.focus({preventScroll:!0})})):(j.preventDefault(),b({type:0})))}),ee=react.exports.useMemo(()=>({open:v.menuState===0}),[v]),re=c,ne={ref:_,id:E,type:s$1(c,v.buttonRef),"aria-haspopup":!0,"aria-controls":(g=v.itemsRef.current)==null?void 0:g.id,"aria-expanded":c.disabled?void 0:v.menuState===0,onKeyDown:U,onKeyUp:P,onClick:B};return $$1({ourProps:ne,theirProps:re,slot:ee,defaultTag:fe,name:"Menu.Button"})}),ye="div",Ie=S.RenderStrategy|S.Static,ge=C(function(c,d){var g,v;let[b,_]=D("Menu.Items"),E=y(b.itemsRef,d),R=n$2(b.itemsRef),U=`headlessui-menu-items-${I()}`,P=p$2(),B=s$4(),ee=(()=>B!==null?B===p$3.Open:b.menuState===0)();react.exports.useEffect(()=>{let O=b.itemsRef.current;!O||b.menuState===0&&O!==(R==null?void 0:R.activeElement)&&O.focus({preventScroll:!0})},[b.menuState,b.itemsRef,R]),F({container:b.itemsRef.current,enabled:b.menuState===0,accept(O){return O.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:O.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(O){O.setAttribute("role","none")}});let re=o$1(O=>{var Y,Q;switch(P.dispose(),O.key){case o$2.Space:if(b.searchQuery!=="")return O.preventDefault(),O.stopPropagation(),_({type:3,value:O.key});case o$2.Enter:if(O.preventDefault(),O.stopPropagation(),_({type:1}),b.activeItemIndex!==null){let{dataRef:X}=b.items[b.activeItemIndex];(Q=(Y=X.current)==null?void 0:Y.domRef.current)==null||Q.click()}I$1(b.buttonRef.current);break;case o$2.ArrowDown:return O.preventDefault(),O.stopPropagation(),_({type:2,focus:a.Next});case o$2.ArrowUp:return O.preventDefault(),O.stopPropagation(),_({type:2,focus:a.Previous});case o$2.Home:case o$2.PageUp:return O.preventDefault(),O.stopPropagation(),_({type:2,focus:a.First});case o$2.End:case o$2.PageDown:return O.preventDefault(),O.stopPropagation(),_({type:2,focus:a.Last});case o$2.Escape:O.preventDefault(),O.stopPropagation(),_({type:1}),m$2().nextFrame(()=>{var X;return(X=b.buttonRef.current)==null?void 0:X.focus({preventScroll:!0})});break;case o$2.Tab:O.preventDefault(),O.stopPropagation(),_({type:1}),m$2().nextFrame(()=>{D$1(b.buttonRef.current,O.shiftKey?T.Previous:T.Next)});break;default:O.key.length===1&&(_({type:3,value:O.key}),P.setTimeout(()=>_({type:4}),350));break}}),ne=o$1(O=>{switch(O.key){case o$2.Space:O.preventDefault();break}}),j=react.exports.useMemo(()=>({open:b.menuState===0}),[b]),z=c,W={"aria-activedescendant":b.activeItemIndex===null||(g=b.items[b.activeItemIndex])==null?void 0:g.id,"aria-labelledby":(v=b.buttonRef.current)==null?void 0:v.id,id:U,onKeyDown:re,onKeyUp:ne,role:"menu",tabIndex:0,ref:E};return $$1({ourProps:W,theirProps:z,slot:j,defaultTag:ye,features:Ie,visible:ee,name:"Menu.Items"})}),Me=react.exports.Fragment,Re=C(function(c,d){let{disabled:g=!1,...v}=c,[b,_]=D("Menu.Item"),E=`headlessui-menu-item-${I()}`,R=b.activeItemIndex!==null?b.items[b.activeItemIndex].id===E:!1,U=react.exports.useRef(null),P=y(d,U);s$3(()=>{if(b.menuState!==0||!R||b.activationTrigger===0)return;let W=m$2();return W.requestAnimationFrame(()=>{var O,Y;(Y=(O=U.current)==null?void 0:O.scrollIntoView)==null||Y.call(O,{block:"nearest"})}),W.dispose},[U,R,b.menuState,b.activationTrigger,b.activeItemIndex]);let B=react.exports.useRef({disabled:g,domRef:U});s$3(()=>{B.current.disabled=g},[B,g]),s$3(()=>{var W,O;B.current.textValue=(O=(W=U.current)==null?void 0:W.textContent)==null?void 0:O.toLowerCase()},[B,U]),s$3(()=>(_({type:5,id:E,dataRef:B}),()=>_({type:6,id:E})),[B,E]);let ee=o$1(W=>{if(g)return W.preventDefault();_({type:1}),I$1(b.buttonRef.current)}),re=o$1(()=>{if(g)return _({type:2,focus:a.Nothing});_({type:2,focus:a.Specific,id:E})}),ne=o$1(()=>{g||R||_({type:2,focus:a.Specific,id:E,trigger:0})}),j=o$1(()=>{g||!R||_({type:2,focus:a.Nothing})}),z=react.exports.useMemo(()=>({active:R,disabled:g}),[R,g]);return $$1({ourProps:{id:E,ref:P,role:"menuitem",tabIndex:g===!0?void 0:-1,"aria-disabled":g===!0?!0:void 0,disabled:void 0,onClick:ee,onFocus:re,onPointerMove:ne,onMouseMove:ne,onPointerLeave:j,onMouseLeave:j},theirProps:v,slot:z,defaultTag:Me,name:"Menu.Item"})}),qe=Object.assign(de,{Button:Te,Items:ge,Item:Re});function ChevronRightIcon$2(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"}))}const ForwardRef$8=react.exports.forwardRef(ChevronRightIcon$2),ChevronRightIcon$3=ForwardRef$8;function DotsHorizontalIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"}))}const ForwardRef$7=react.exports.forwardRef(DotsHorizontalIcon),DotsHorizontalIcon$1=ForwardRef$7,SaveButton=({submitting:c})=>React.createElement("button",{type:"submit",disabled:c,className:cx("ctw-btn-primary ctw-save-button ctw-w-28 ctw-whitespace-nowrap")},c?"Saving...":"Save",c&&React.createElement(Spinner,{className:"ctw-ml-2 ctw-text-white"}));try{SaveButton.displayName="SaveButton",SaveButton.__docgenInfo={description:"",displayName:"SaveButton",props:{submitting:{defaultValue:null,description:"",name:"submitting",required:!0,type:{name:"boolean"}}}}}catch{}function ChevronLeftIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"}))}const ForwardRef$6=react.exports.forwardRef(ChevronLeftIcon),ChevronLeftIcon$1=ForwardRef$6;function ChevronRightIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}))}const ForwardRef$5=react.exports.forwardRef(ChevronRightIcon),ChevronRightIcon$1=ForwardRef$5;function ExclamationCircleIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))}const ForwardRef$4=react.exports.forwardRef(ExclamationCircleIcon),ExclamationCircleIcon$1=ForwardRef$4;function ExclamationIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))}const ForwardRef$3=react.exports.forwardRef(ExclamationIcon),ExclamationIcon$1=ForwardRef$3;function LockClosedIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"}))}const ForwardRef$2=react.exports.forwardRef(LockClosedIcon),LockClosedIcon$1=ForwardRef$2;function PencilIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"}))}const ForwardRef$1=react.exports.forwardRef(PencilIcon),PencilIcon$1=ForwardRef$1;function SearchIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"}))}const ForwardRef=react.exports.forwardRef(SearchIcon),SearchIcon$1=ForwardRef,ErrorAlert=({header:c,children:d,className:g})=>React.createElement("div",{className:cx("ctw-alert-bg ctw-rounded-md ctw-bg-error-bg",g)},React.createElement(ExclamationCircleIcon$1,{className:"ctw-h-5 ctw-flex-none ctw-text-error-icon"}),React.createElement("div",{className:"ctw-space-y-2"},React.createElement("div",{className:"ctw-font-medium ctw-text-error-heading"},c),d&&React.createElement("div",{className:"ctw-text-error-message"},d))),CautionAlert=({header:c,children:d,className:g})=>React.createElement("div",{className:cx("ctw-alert-bg ctw-rounded-md ctw-bg-caution-bg",g)},React.createElement(ExclamationIcon$1,{className:"ctw-h-5 ctw-flex-none ctw-text-caution-icon"}),React.createElement("div",{className:"ctw-space-y-2"},React.createElement("div",{className:"ctw-font-medium ctw-text-caution-heading"},c),d&&React.createElement("div",{className:"ctw-text-caution-message"},d)));try{ErrorAlert.displayName="ErrorAlert",ErrorAlert.__docgenInfo={description:"",displayName:"ErrorAlert",props:{header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{CautionAlert.displayName="CautionAlert",CautionAlert.__docgenInfo={description:"",displayName:"CautionAlert",props:{header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}function $e42e1063c40fb3ef$export$b9ecd428b558ff10(c,d,{checkForDefaultPrevented:g=!0}={}){return function(b){if(c==null||c(b),g===!1||!b.defaultPrevented)return d==null?void 0:d(b)}}function $6ed0406888f73fc4$var$setRef(c,d){typeof c=="function"?c(d):c!=null&&(c.current=d)}function $6ed0406888f73fc4$export$43e446d32b3d21af(...c){return d=>c.forEach(g=>$6ed0406888f73fc4$var$setRef(g,d))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...c){return react.exports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(...c),c)}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(c,d=[]){let g=[];function v(_,E){const R=react.exports.createContext(E),U=g.length;g=[...g,E];function P(ee){const{scope:re,children:ne,...j}=ee,z=(re==null?void 0:re[c][U])||R,W=react.exports.useMemo(()=>j,Object.values(j));return react.exports.createElement(z.Provider,{value:W},ne)}function B(ee,re){const ne=(re==null?void 0:re[c][U])||R,j=react.exports.useContext(ne);if(j)return j;if(E!==void 0)return E;throw new Error(`\`${ee}\` must be used within \`${_}\``)}return P.displayName=_+"Provider",[P,B]}const b=()=>{const _=g.map(E=>react.exports.createContext(E));return function(R){const U=(R==null?void 0:R[c])||_;return react.exports.useMemo(()=>({[`__scope${c}`]:{...R,[c]:U}}),[R,U])}};return b.scopeName=c,[v,$c512c27ab02ef895$var$composeContextScopes(b,...d)]}function $c512c27ab02ef895$var$composeContextScopes(...c){const d=c[0];if(c.length===1)return d;const g=()=>{const v=c.map(b=>({useScope:b(),scopeName:b.scopeName}));return function(_){const E=v.reduce((R,{useScope:U,scopeName:P})=>{const ee=U(_)[`__scope${P}`];return{...R,...ee}},{});return react.exports.useMemo(()=>({[`__scope${d.scopeName}`]:E}),[E])}};return g.scopeName=d.scopeName,g}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(c){const d=react.exports.useRef(c);return react.exports.useEffect(()=>{d.current=c}),react.exports.useMemo(()=>(...g)=>{var v;return(v=d.current)===null||v===void 0?void 0:v.call(d,...g)},[])}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:c,defaultProp:d,onChange:g=()=>{}}){const[v,b]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:d,onChange:g}),_=c!==void 0,E=_?c:v,R=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(g),U=react.exports.useCallback(P=>{if(_){const ee=typeof P=="function"?P(c):P;ee!==c&&R(ee)}else b(P)},[_,c,b,R]);return[E,U]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:c,onChange:d}){const g=react.exports.useState(c),[v]=g,b=react.exports.useRef(v),_=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(d);return react.exports.useEffect(()=>{b.current!==v&&(_(v),b.current=v)},[v,b,_]),g}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=react.exports.forwardRef((c,d)=>{const{children:g,...v}=c,b=react.exports.Children.toArray(g),_=b.find($5e63c961fc1ce211$var$isSlottable);if(_){const E=_.props.children,R=b.map(U=>U===_?react.exports.Children.count(E)>1?react.exports.Children.only(null):react.exports.isValidElement(E)?E.props.children:null:U);return react.exports.createElement($5e63c961fc1ce211$var$SlotClone,_extends({},v,{ref:d}),react.exports.isValidElement(E)?react.exports.cloneElement(E,void 0,R):null)}return react.exports.createElement($5e63c961fc1ce211$var$SlotClone,_extends({},v,{ref:d}),g)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=react.exports.forwardRef((c,d)=>{const{children:g,...v}=c;return react.exports.isValidElement(g)?react.exports.cloneElement(g,{...$5e63c961fc1ce211$var$mergeProps(v,g.props),ref:$6ed0406888f73fc4$export$43e446d32b3d21af(d,g.ref)}):react.exports.Children.count(g)>1?react.exports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:c})=>react.exports.createElement(react.exports.Fragment,null,c);function $5e63c961fc1ce211$var$isSlottable(c){return react.exports.isValidElement(c)&&c.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(c,d){const g={...d};for(const v in d){const b=c[v],_=d[v];/^on[A-Z]/.test(v)?g[v]=(...R)=>{_==null||_(...R),b==null||b(...R)}:v==="style"?g[v]={...b,..._}:v==="className"&&(g[v]=[b,_].filter(Boolean).join(" "))}return{...c,...g}}const $8927f6f2acc4f386$var$NODES=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((c,d)=>{const g=react.exports.forwardRef((v,b)=>{const{asChild:_,...E}=v,R=_?$5e63c961fc1ce211$export$8c6ed5c666ac1360:d;return react.exports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),react.exports.createElement(R,_extends({},E,{ref:b}))});return g.displayName=`Primitive.${d}`,{...c,[d]:g}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(c,d){c&&reactDom.exports.flushSync(()=>c.dispatchEvent(d))}function $e02a7d9cb1dc128c$export$c74125a8e3af6bb2(c){const d=c+"CollectionProvider",[g,v]=$c512c27ab02ef895$export$50c7b4e9d9f19c1(d),[b,_]=g(d,{collectionRef:{current:null},itemMap:new Map}),E=ne=>{const{scope:j,children:z}=ne,W=React.useRef(null),O=React.useRef(new Map).current;return React.createElement(b,{scope:j,itemMap:O,collectionRef:W},z)},R=c+"CollectionSlot",U=React.forwardRef((ne,j)=>{const{scope:z,children:W}=ne,O=_(R,z),Y=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(j,O.collectionRef);return React.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{ref:Y},W)}),P=c+"CollectionItemSlot",B="data-radix-collection-item",ee=React.forwardRef((ne,j)=>{const{scope:z,children:W,...O}=ne,Y=React.useRef(null),Q=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(j,Y),X=_(P,z);return React.useEffect(()=>(X.itemMap.set(Y,{ref:Y,...O}),()=>void X.itemMap.delete(Y))),React.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{[B]:"",ref:Q},W)});function re(ne){const j=_(c+"CollectionConsumer",ne);return React.useCallback(()=>{const W=j.collectionRef.current;if(!W)return[];const O=Array.from(W.querySelectorAll(`[${B}]`));return Array.from(j.itemMap.values()).sort((X,H)=>O.indexOf(X.ref.current)-O.indexOf(H.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:E,Slot:U,ItemSlot:ee},re,v]}const $f631663db3294ace$var$DirectionContext=react.exports.createContext(void 0);function $f631663db3294ace$export$b39126d51d94e6f3(c){const d=react.exports.useContext($f631663db3294ace$var$DirectionContext);return c||d||"ltr"}function $addc16e1bbe58fd0$export$3a72a57244d6e765(c){const d=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(c);react.exports.useEffect(()=>{const g=v=>{v.key==="Escape"&&d(v)};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[d])}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=react.exports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=react.exports.forwardRef((c,d)=>{const{disableOutsidePointerEvents:g=!1,onEscapeKeyDown:v,onPointerDownOutside:b,onFocusOutside:_,onInteractOutside:E,onDismiss:R,...U}=c,P=react.exports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[B,ee]=react.exports.useState(null),[,re]=react.exports.useState({}),ne=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,G=>ee(G)),j=Array.from(P.layers),[z]=[...P.layersWithOutsidePointerEventsDisabled].slice(-1),W=j.indexOf(z),O=B?j.indexOf(B):-1,Y=P.layersWithOutsidePointerEventsDisabled.size>0,Q=O>=W,X=$5cb92bef7577960e$var$usePointerDownOutside(G=>{const ie=G.target,Ee=[...P.branches].some(be=>be.contains(ie));!Q||Ee||(b==null||b(G),E==null||E(G),G.defaultPrevented||R==null||R())}),H=$5cb92bef7577960e$var$useFocusOutside(G=>{const ie=G.target;[...P.branches].some(be=>be.contains(ie))||(_==null||_(G),E==null||E(G),G.defaultPrevented||R==null||R())});return $addc16e1bbe58fd0$export$3a72a57244d6e765(G=>{O===P.layers.size-1&&(v==null||v(G),!G.defaultPrevented&&R&&(G.preventDefault(),R()))}),react.exports.useEffect(()=>{if(!!B)return g&&(P.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),P.layersWithOutsidePointerEventsDisabled.add(B)),P.layers.add(B),$5cb92bef7577960e$var$dispatchUpdate(),()=>{g&&P.layersWithOutsidePointerEventsDisabled.size===1&&(document.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[B,g,P]),react.exports.useEffect(()=>()=>{!B||(P.layers.delete(B),P.layersWithOutsidePointerEventsDisabled.delete(B),$5cb92bef7577960e$var$dispatchUpdate())},[B,P]),react.exports.useEffect(()=>{const G=()=>re({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,G),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,G)},[]),react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({},U,{ref:ne,style:{pointerEvents:Y?Q?"auto":"none":void 0,...c.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onFocusCapture,H.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onBlurCapture,H.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onPointerDownCapture,X.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside(c){const d=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(c),g=react.exports.useRef(!1),v=react.exports.useRef(()=>{});return react.exports.useEffect(()=>{const b=E=>{if(E.target&&!g.current){let U=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,d,R,{discrete:!0})};const R={originalEvent:E};E.pointerType==="touch"?(document.removeEventListener("click",v.current),v.current=U,document.addEventListener("click",v.current,{once:!0})):U()}g.current=!1},_=window.setTimeout(()=>{document.addEventListener("pointerdown",b)},0);return()=>{window.clearTimeout(_),document.removeEventListener("pointerdown",b),document.removeEventListener("click",v.current)}},[d]),{onPointerDownCapture:()=>g.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(c){const d=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(c),g=react.exports.useRef(!1);return react.exports.useEffect(()=>{const v=b=>{b.target&&!g.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,d,{originalEvent:b},{discrete:!1})};return document.addEventListener("focusin",v),()=>document.removeEventListener("focusin",v)},[d]),{onFocusCapture:()=>g.current=!0,onBlurCapture:()=>g.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const c=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(c)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(c,d,g,{discrete:v}){const b=g.originalEvent.target,_=new CustomEvent(c,{bubbles:!1,cancelable:!0,detail:g});d&&b.addEventListener(c,d,{once:!0}),v?$8927f6f2acc4f386$export$6d1a0317bde7de7f(b,_):b.dispatchEvent(_)}let $3db38b7d1fb3fe6a$var$count=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(){react.exports.useEffect(()=>{var c,d;const g=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(c=g[0])!==null&&c!==void 0?c:$3db38b7d1fb3fe6a$var$createFocusGuard()),document.body.insertAdjacentElement("beforeend",(d=g[1])!==null&&d!==void 0?d:$3db38b7d1fb3fe6a$var$createFocusGuard()),$3db38b7d1fb3fe6a$var$count++,()=>{$3db38b7d1fb3fe6a$var$count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(v=>v.remove()),$3db38b7d1fb3fe6a$var$count--}},[])}function $3db38b7d1fb3fe6a$var$createFocusGuard(){const c=document.createElement("span");return c.setAttribute("data-radix-focus-guard",""),c.tabIndex=0,c.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",c}const $d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=react.exports.forwardRef((c,d)=>{const{loop:g=!1,trapped:v=!1,onMountAutoFocus:b,onUnmountAutoFocus:_,...E}=c,[R,U]=react.exports.useState(null),P=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(b),B=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_),ee=react.exports.useRef(null),re=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,z=>U(z)),ne=react.exports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;react.exports.useEffect(()=>{if(v){let z=function(O){if(ne.paused||!R)return;const Y=O.target;R.contains(Y)?ee.current=Y:$d3863c46a17e8a28$var$focus(ee.current,{select:!0})},W=function(O){ne.paused||!R||R.contains(O.relatedTarget)||$d3863c46a17e8a28$var$focus(ee.current,{select:!0})};return document.addEventListener("focusin",z),document.addEventListener("focusout",W),()=>{document.removeEventListener("focusin",z),document.removeEventListener("focusout",W)}}},[v,R,ne.paused]),react.exports.useEffect(()=>{if(R){$d3863c46a17e8a28$var$focusScopesStack.add(ne);const z=document.activeElement;if(!R.contains(z)){const O=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);R.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,P),R.dispatchEvent(O),O.defaultPrevented||($d3863c46a17e8a28$var$focusFirst($d3863c46a17e8a28$var$removeLinks($d3863c46a17e8a28$var$getTabbableCandidates(R)),{select:!0}),document.activeElement===z&&$d3863c46a17e8a28$var$focus(R))}return()=>{R.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,P),setTimeout(()=>{const O=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);R.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,B),R.dispatchEvent(O),O.defaultPrevented||$d3863c46a17e8a28$var$focus(z!=null?z:document.body,{select:!0}),R.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,B),$d3863c46a17e8a28$var$focusScopesStack.remove(ne)},0)}}},[R,P,B,ne]);const j=react.exports.useCallback(z=>{if(!g&&!v||ne.paused)return;const W=z.key==="Tab"&&!z.altKey&&!z.ctrlKey&&!z.metaKey,O=document.activeElement;if(W&&O){const Y=z.currentTarget,[Q,X]=$d3863c46a17e8a28$var$getTabbableEdges(Y);Q&&X?!z.shiftKey&&O===X?(z.preventDefault(),g&&$d3863c46a17e8a28$var$focus(Q,{select:!0})):z.shiftKey&&O===Q&&(z.preventDefault(),g&&$d3863c46a17e8a28$var$focus(X,{select:!0})):O===Y&&z.preventDefault()}},[g,v,ne.paused]);return react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({tabIndex:-1},E,{ref:re,onKeyDown:j}))});function $d3863c46a17e8a28$var$focusFirst(c,{select:d=!1}={}){const g=document.activeElement;for(const v of c)if($d3863c46a17e8a28$var$focus(v,{select:d}),document.activeElement!==g)return}function $d3863c46a17e8a28$var$getTabbableEdges(c){const d=$d3863c46a17e8a28$var$getTabbableCandidates(c),g=$d3863c46a17e8a28$var$findVisible(d,c),v=$d3863c46a17e8a28$var$findVisible(d.reverse(),c);return[g,v]}function $d3863c46a17e8a28$var$getTabbableCandidates(c){const d=[],g=document.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,{acceptNode:v=>{const b=v.tagName==="INPUT"&&v.type==="hidden";return v.disabled||v.hidden||b?NodeFilter.FILTER_SKIP:v.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;g.nextNode();)d.push(g.currentNode);return d}function $d3863c46a17e8a28$var$findVisible(c,d){for(const g of c)if(!$d3863c46a17e8a28$var$isHidden(g,{upTo:d}))return g}function $d3863c46a17e8a28$var$isHidden(c,{upTo:d}){if(getComputedStyle(c).visibility==="hidden")return!0;for(;c;){if(d!==void 0&&c===d)return!1;if(getComputedStyle(c).display==="none")return!0;c=c.parentElement}return!1}function $d3863c46a17e8a28$var$isSelectableInput(c){return c instanceof HTMLInputElement&&"select"in c}function $d3863c46a17e8a28$var$focus(c,{select:d=!1}={}){if(c&&c.focus){const g=document.activeElement;c.focus({preventScroll:!0}),c!==g&&$d3863c46a17e8a28$var$isSelectableInput(c)&&d&&c.select()}}const $d3863c46a17e8a28$var$focusScopesStack=$d3863c46a17e8a28$var$createFocusScopesStack();function $d3863c46a17e8a28$var$createFocusScopesStack(){let c=[];return{add(d){const g=c[0];d!==g&&(g==null||g.pause()),c=$d3863c46a17e8a28$var$arrayRemove(c,d),c.unshift(d)},remove(d){var g;c=$d3863c46a17e8a28$var$arrayRemove(c,d),(g=c[0])===null||g===void 0||g.resume()}}}function $d3863c46a17e8a28$var$arrayRemove(c,d){const g=[...c],v=g.indexOf(d);return v!==-1&&g.splice(v,1),g}function $d3863c46a17e8a28$var$removeLinks(c){return c.filter(d=>d.tagName!=="A")}const $9f79659886946c16$export$e5c5a5f917a5871c=Boolean(globalThis==null?void 0:globalThis.document)?react.exports.useLayoutEffect:()=>{},$1746a345f3d73bb7$var$useReactId=React$1["useId".toString()]||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(c){const[d,g]=react.exports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{c||g(v=>v!=null?v:String($1746a345f3d73bb7$var$count++))},[c]),c||(d?`radix-${d}`:"")}function getSide(c){return c.split("-")[0]}function getAlignment(c){return c.split("-")[1]}function getMainAxisFromPlacement(c){return["top","bottom"].includes(getSide(c))?"x":"y"}function getLengthFromAxis(c){return c==="y"?"height":"width"}function computeCoordsFromPlacement(c,d,g){let{reference:v,floating:b}=c;const _=v.x+v.width/2-b.width/2,E=v.y+v.height/2-b.height/2,R=getMainAxisFromPlacement(d),U=getLengthFromAxis(R),P=v[U]/2-b[U]/2,B=getSide(d),ee=R==="x";let re;switch(B){case"top":re={x:_,y:v.y-b.height};break;case"bottom":re={x:_,y:v.y+v.height};break;case"right":re={x:v.x+v.width,y:E};break;case"left":re={x:v.x-b.width,y:E};break;default:re={x:v.x,y:v.y}}switch(getAlignment(d)){case"start":re[R]-=P*(g&&ee?-1:1);break;case"end":re[R]+=P*(g&&ee?-1:1);break}return re}const computePosition$1=async(c,d,g)=>{const{placement:v="bottom",strategy:b="absolute",middleware:_=[],platform:E}=g,R=await(E.isRTL==null?void 0:E.isRTL(d));let U=await E.getElementRects({reference:c,floating:d,strategy:b}),{x:P,y:B}=computeCoordsFromPlacement(U,v,R),ee=v,re={},ne=0;for(let j=0;j<_.length;j++){const{name:z,fn:W}=_[j],{x:O,y:Y,data:Q,reset:X}=await W({x:P,y:B,initialPlacement:v,placement:ee,strategy:b,middlewareData:re,rects:U,platform:E,elements:{reference:c,floating:d}});if(P=O!=null?O:P,B=Y!=null?Y:B,re={...re,[z]:{...re[z],...Q}},X&&ne<=50){ne++,typeof X=="object"&&(X.placement&&(ee=X.placement),X.rects&&(U=X.rects===!0?await E.getElementRects({reference:c,floating:d,strategy:b}):X.rects),{x:P,y:B}=computeCoordsFromPlacement(U,ee,R)),j=-1;continue}}return{x:P,y:B,placement:ee,strategy:b,middlewareData:re}};function expandPaddingObject(c){return{top:0,right:0,bottom:0,left:0,...c}}function getSideObjectFromPadding(c){return typeof c!="number"?expandPaddingObject(c):{top:c,right:c,bottom:c,left:c}}function rectToClientRect(c){return{...c,top:c.y,left:c.x,right:c.x+c.width,bottom:c.y+c.height}}async function detectOverflow(c,d){var g;d===void 0&&(d={});const{x:v,y:b,platform:_,rects:E,elements:R,strategy:U}=c,{boundary:P="clippingAncestors",rootBoundary:B="viewport",elementContext:ee="floating",altBoundary:re=!1,padding:ne=0}=d,j=getSideObjectFromPadding(ne),W=R[re?ee==="floating"?"reference":"floating":ee],O=rectToClientRect(await _.getClippingRect({element:(g=await(_.isElement==null?void 0:_.isElement(W)))==null||g?W:W.contextElement||await(_.getDocumentElement==null?void 0:_.getDocumentElement(R.floating)),boundary:P,rootBoundary:B,strategy:U})),Y=rectToClientRect(_.convertOffsetParentRelativeRectToViewportRelativeRect?await _.convertOffsetParentRelativeRectToViewportRelativeRect({rect:ee==="floating"?{...E.floating,x:v,y:b}:E.reference,offsetParent:await(_.getOffsetParent==null?void 0:_.getOffsetParent(R.floating)),strategy:U}):E[ee]);return{top:O.top-Y.top+j.top,bottom:Y.bottom-O.bottom+j.bottom,left:O.left-Y.left+j.left,right:Y.right-O.right+j.right}}const min$1=Math.min,max$1=Math.max;function within(c,d,g){return max$1(c,min$1(d,g))}const arrow$1=c=>({name:"arrow",options:c,async fn(d){const{element:g,padding:v=0}=c!=null?c:{},{x:b,y:_,placement:E,rects:R,platform:U}=d;if(g==null)return{};const P=getSideObjectFromPadding(v),B={x:b,y:_},ee=getMainAxisFromPlacement(E),re=getAlignment(E),ne=getLengthFromAxis(ee),j=await U.getDimensions(g),z=ee==="y"?"top":"left",W=ee==="y"?"bottom":"right",O=R.reference[ne]+R.reference[ee]-B[ee]-R.floating[ne],Y=B[ee]-R.reference[ee],Q=await(U.getOffsetParent==null?void 0:U.getOffsetParent(g));let X=Q?ee==="y"?Q.clientHeight||0:Q.clientWidth||0:0;X===0&&(X=R.floating[ne]);const H=O/2-Y/2,G=P[z],ie=X-j[ne]-P[W],Ee=X/2-j[ne]/2+H,be=within(G,Ee,ie),mt=(re==="start"?P[z]:P[W])>0&&Ee!==be&&R.reference[ne]<=R.floating[ne]?Ee<G?G-Ee:ie-Ee:0;return{[ee]:B[ee]-mt,data:{[ee]:be,centerOffset:Ee-be}}}}),hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(c){return c.replace(/left|right|bottom|top/g,d=>hash$1[d])}function getAlignmentSides(c,d,g){g===void 0&&(g=!1);const v=getAlignment(c),b=getMainAxisFromPlacement(c),_=getLengthFromAxis(b);let E=b==="x"?v===(g?"end":"start")?"right":"left":v==="start"?"bottom":"top";return d.reference[_]>d.floating[_]&&(E=getOppositePlacement(E)),{main:E,cross:getOppositePlacement(E)}}const hash={start:"end",end:"start"};function getOppositeAlignmentPlacement(c){return c.replace(/start|end/g,d=>hash[d])}const sides=["top","right","bottom","left"];function getExpandedPlacements(c){const d=getOppositePlacement(c);return[getOppositeAlignmentPlacement(c),d,getOppositeAlignmentPlacement(d)]}const flip=function(c){return c===void 0&&(c={}),{name:"flip",options:c,async fn(d){var g;const{placement:v,middlewareData:b,rects:_,initialPlacement:E,platform:R,elements:U}=d,{mainAxis:P=!0,crossAxis:B=!0,fallbackPlacements:ee,fallbackStrategy:re="bestFit",flipAlignment:ne=!0,...j}=c,z=getSide(v),O=ee||(z===E||!ne?[getOppositePlacement(E)]:getExpandedPlacements(E)),Y=[E,...O],Q=await detectOverflow(d,j),X=[];let H=((g=b.flip)==null?void 0:g.overflows)||[];if(P&&X.push(Q[z]),B){const{main:be,cross:Ce}=getAlignmentSides(v,_,await(R.isRTL==null?void 0:R.isRTL(U.floating)));X.push(Q[be],Q[Ce])}if(H=[...H,{placement:v,overflows:X}],!X.every(be=>be<=0)){var G,ie;const be=((G=(ie=b.flip)==null?void 0:ie.index)!=null?G:0)+1,Ce=Y[be];if(Ce)return{data:{index:be,overflows:H},reset:{placement:Ce}};let Oe="bottom";switch(re){case"bestFit":{var Ee;const mt=(Ee=H.map(Tt=>[Tt,Tt.overflows.filter(St=>St>0).reduce((St,ft)=>St+ft,0)]).sort((Tt,St)=>Tt[1]-St[1])[0])==null?void 0:Ee[0].placement;mt&&(Oe=mt);break}case"initialPlacement":Oe=E;break}if(v!==Oe)return{reset:{placement:Oe}}}return{}}}};function getSideOffsets(c,d){return{top:c.top-d.height,right:c.right-d.width,bottom:c.bottom-d.height,left:c.left-d.width}}function isAnySideFullyClipped(c){return sides.some(d=>c[d]>=0)}const hide=function(c){let{strategy:d="referenceHidden",...g}=c===void 0?{}:c;return{name:"hide",async fn(v){const{rects:b}=v;switch(d){case"referenceHidden":{const _=await detectOverflow(v,{...g,elementContext:"reference"}),E=getSideOffsets(_,b.reference);return{data:{referenceHiddenOffsets:E,referenceHidden:isAnySideFullyClipped(E)}}}case"escaped":{const _=await detectOverflow(v,{...g,altBoundary:!0}),E=getSideOffsets(_,b.floating);return{data:{escapedOffsets:E,escaped:isAnySideFullyClipped(E)}}}default:return{}}}}};async function convertValueToCoords(c,d){const{placement:g,platform:v,elements:b}=c,_=await(v.isRTL==null?void 0:v.isRTL(b.floating)),E=getSide(g),R=getAlignment(g),U=getMainAxisFromPlacement(g)==="x",P=["left","top"].includes(E)?-1:1,B=_&&U?-1:1,ee=typeof d=="function"?d(c):d;let{mainAxis:re,crossAxis:ne,alignmentAxis:j}=typeof ee=="number"?{mainAxis:ee,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...ee};return R&&typeof j=="number"&&(ne=R==="end"?j*-1:j),U?{x:ne*B,y:re*P}:{x:re*P,y:ne*B}}const offset=function(c){return c===void 0&&(c=0),{name:"offset",options:c,async fn(d){const{x:g,y:v}=d,b=await convertValueToCoords(d,c);return{x:g+b.x,y:v+b.y,data:b}}}};function getCrossAxis(c){return c==="x"?"y":"x"}const shift=function(c){return c===void 0&&(c={}),{name:"shift",options:c,async fn(d){const{x:g,y:v,placement:b}=d,{mainAxis:_=!0,crossAxis:E=!1,limiter:R={fn:W=>{let{x:O,y:Y}=W;return{x:O,y:Y}}},...U}=c,P={x:g,y:v},B=await detectOverflow(d,U),ee=getMainAxisFromPlacement(getSide(b)),re=getCrossAxis(ee);let ne=P[ee],j=P[re];if(_){const W=ee==="y"?"top":"left",O=ee==="y"?"bottom":"right",Y=ne+B[W],Q=ne-B[O];ne=within(Y,ne,Q)}if(E){const W=re==="y"?"top":"left",O=re==="y"?"bottom":"right",Y=j+B[W],Q=j-B[O];j=within(Y,j,Q)}const z=R.fn({...d,[ee]:ne,[re]:j});return{...z,data:{x:z.x-g,y:z.y-v}}}}},limitShift=function(c){return c===void 0&&(c={}),{options:c,fn(d){const{x:g,y:v,placement:b,rects:_,middlewareData:E}=d,{offset:R=0,mainAxis:U=!0,crossAxis:P=!0}=c,B={x:g,y:v},ee=getMainAxisFromPlacement(b),re=getCrossAxis(ee);let ne=B[ee],j=B[re];const z=typeof R=="function"?R({..._,placement:b}):R,W=typeof z=="number"?{mainAxis:z,crossAxis:0}:{mainAxis:0,crossAxis:0,...z};if(U){const H=ee==="y"?"height":"width",G=_.reference[ee]-_.floating[H]+W.mainAxis,ie=_.reference[ee]+_.reference[H]-W.mainAxis;ne<G?ne=G:ne>ie&&(ne=ie)}if(P){var O,Y,Q,X;const H=ee==="y"?"width":"height",G=["top","left"].includes(getSide(b)),ie=_.reference[re]-_.floating[H]+(G&&(O=(Y=E.offset)==null?void 0:Y[re])!=null?O:0)+(G?0:W.crossAxis),Ee=_.reference[re]+_.reference[H]+(G?0:(Q=(X=E.offset)==null?void 0:X[re])!=null?Q:0)-(G?W.crossAxis:0);j<ie?j=ie:j>Ee&&(j=Ee)}return{[ee]:ne,[re]:j}}}};function isWindow(c){return c&&c.document&&c.location&&c.alert&&c.setInterval}function getWindow(c){if(c==null)return window;if(!isWindow(c)){const d=c.ownerDocument;return d&&d.defaultView||window}return c}function getComputedStyle$1(c){return getWindow(c).getComputedStyle(c)}function getNodeName(c){return isWindow(c)?"":c?(c.nodeName||"").toLowerCase():""}function getUAString(){const c=navigator.userAgentData;return c!=null&&c.brands?c.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function isHTMLElement(c){return c instanceof getWindow(c).HTMLElement}function isElement$1(c){return c instanceof getWindow(c).Element}function isNode(c){return c instanceof getWindow(c).Node}function isShadowRoot(c){if(typeof ShadowRoot>"u")return!1;const d=getWindow(c).ShadowRoot;return c instanceof d||c instanceof ShadowRoot}function isOverflowElement(c){const{overflow:d,overflowX:g,overflowY:v}=getComputedStyle$1(c);return/auto|scroll|overlay|hidden/.test(d+v+g)}function isTableElement(c){return["table","td","th"].includes(getNodeName(c))}function isContainingBlock(c){const d=/firefox/i.test(getUAString()),g=getComputedStyle$1(c);return g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].includes(g.willChange)||d&&g.willChange==="filter"||d&&(g.filter?g.filter!=="none":!1)}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}const min=Math.min,max=Math.max,round=Math.round;function getBoundingClientRect(c,d,g){var v,b,_,E;d===void 0&&(d=!1),g===void 0&&(g=!1);const R=c.getBoundingClientRect();let U=1,P=1;d&&isHTMLElement(c)&&(U=c.offsetWidth>0&&round(R.width)/c.offsetWidth||1,P=c.offsetHeight>0&&round(R.height)/c.offsetHeight||1);const B=isElement$1(c)?getWindow(c):window,ee=!isLayoutViewport()&&g,re=(R.left+(ee&&(v=(b=B.visualViewport)==null?void 0:b.offsetLeft)!=null?v:0))/U,ne=(R.top+(ee&&(_=(E=B.visualViewport)==null?void 0:E.offsetTop)!=null?_:0))/P,j=R.width/U,z=R.height/P;return{width:j,height:z,top:ne,right:re+j,bottom:ne+z,left:re,x:re,y:ne}}function getDocumentElement(c){return((isNode(c)?c.ownerDocument:c.document)||window.document).documentElement}function getNodeScroll(c){return isElement$1(c)?{scrollLeft:c.scrollLeft,scrollTop:c.scrollTop}:{scrollLeft:c.pageXOffset,scrollTop:c.pageYOffset}}function getWindowScrollBarX(c){return getBoundingClientRect(getDocumentElement(c)).left+getNodeScroll(c).scrollLeft}function isScaled(c){const d=getBoundingClientRect(c);return round(d.width)!==c.offsetWidth||round(d.height)!==c.offsetHeight}function getRectRelativeToOffsetParent(c,d,g){const v=isHTMLElement(d),b=getDocumentElement(d),_=getBoundingClientRect(c,v&&isScaled(d),g==="fixed");let E={scrollLeft:0,scrollTop:0};const R={x:0,y:0};if(v||!v&&g!=="fixed")if((getNodeName(d)!=="body"||isOverflowElement(b))&&(E=getNodeScroll(d)),isHTMLElement(d)){const U=getBoundingClientRect(d,!0);R.x=U.x+d.clientLeft,R.y=U.y+d.clientTop}else b&&(R.x=getWindowScrollBarX(b));return{x:_.left+E.scrollLeft-R.x,y:_.top+E.scrollTop-R.y,width:_.width,height:_.height}}function getParentNode(c){return getNodeName(c)==="html"?c:c.assignedSlot||c.parentNode||(isShadowRoot(c)?c.host:null)||getDocumentElement(c)}function getTrueOffsetParent(c){return!isHTMLElement(c)||getComputedStyle(c).position==="fixed"?null:c.offsetParent}function getContainingBlock(c){let d=getParentNode(c);for(isShadowRoot(d)&&(d=d.host);isHTMLElement(d)&&!["html","body"].includes(getNodeName(d));){if(isContainingBlock(d))return d;d=d.parentNode}return null}function getOffsetParent(c){const d=getWindow(c);let g=getTrueOffsetParent(c);for(;g&&isTableElement(g)&&getComputedStyle(g).position==="static";)g=getTrueOffsetParent(g);return g&&(getNodeName(g)==="html"||getNodeName(g)==="body"&&getComputedStyle(g).position==="static"&&!isContainingBlock(g))?d:g||getContainingBlock(c)||d}function getDimensions(c){if(isHTMLElement(c))return{width:c.offsetWidth,height:c.offsetHeight};const d=getBoundingClientRect(c);return{width:d.width,height:d.height}}function convertOffsetParentRelativeRectToViewportRelativeRect(c){let{rect:d,offsetParent:g,strategy:v}=c;const b=isHTMLElement(g),_=getDocumentElement(g);if(g===_)return d;let E={scrollLeft:0,scrollTop:0};const R={x:0,y:0};if((b||!b&&v!=="fixed")&&((getNodeName(g)!=="body"||isOverflowElement(_))&&(E=getNodeScroll(g)),isHTMLElement(g))){const U=getBoundingClientRect(g,!0);R.x=U.x+g.clientLeft,R.y=U.y+g.clientTop}return{...d,x:d.x-E.scrollLeft+R.x,y:d.y-E.scrollTop+R.y}}function getViewportRect(c,d){const g=getWindow(c),v=getDocumentElement(c),b=g.visualViewport;let _=v.clientWidth,E=v.clientHeight,R=0,U=0;if(b){_=b.width,E=b.height;const P=isLayoutViewport();(P||!P&&d==="fixed")&&(R=b.offsetLeft,U=b.offsetTop)}return{width:_,height:E,x:R,y:U}}function getDocumentRect(c){var d;const g=getDocumentElement(c),v=getNodeScroll(c),b=(d=c.ownerDocument)==null?void 0:d.body,_=max(g.scrollWidth,g.clientWidth,b?b.scrollWidth:0,b?b.clientWidth:0),E=max(g.scrollHeight,g.clientHeight,b?b.scrollHeight:0,b?b.clientHeight:0);let R=-v.scrollLeft+getWindowScrollBarX(c);const U=-v.scrollTop;return getComputedStyle$1(b||g).direction==="rtl"&&(R+=max(g.clientWidth,b?b.clientWidth:0)-_),{width:_,height:E,x:R,y:U}}function getNearestOverflowAncestor(c){const d=getParentNode(c);return["html","body","#document"].includes(getNodeName(d))?c.ownerDocument.body:isHTMLElement(d)&&isOverflowElement(d)?d:getNearestOverflowAncestor(d)}function getOverflowAncestors(c,d){var g;d===void 0&&(d=[]);const v=getNearestOverflowAncestor(c),b=v===((g=c.ownerDocument)==null?void 0:g.body),_=getWindow(v),E=b?[_].concat(_.visualViewport||[],isOverflowElement(v)?v:[]):v,R=d.concat(E);return b?R:R.concat(getOverflowAncestors(E))}function contains(c,d){const g=d.getRootNode==null?void 0:d.getRootNode();if(c.contains(d))return!0;if(g&&isShadowRoot(g)){let v=d;do{if(v&&c===v)return!0;v=v.parentNode||v.host}while(v)}return!1}function getInnerBoundingClientRect(c,d){const g=getBoundingClientRect(c,!1,d==="fixed"),v=g.top+c.clientTop,b=g.left+c.clientLeft;return{top:v,left:b,x:b,y:v,right:b+c.clientWidth,bottom:v+c.clientHeight,width:c.clientWidth,height:c.clientHeight}}function getClientRectFromClippingAncestor(c,d,g){return d==="viewport"?rectToClientRect(getViewportRect(c,g)):isElement$1(d)?getInnerBoundingClientRect(d,g):rectToClientRect(getDocumentRect(getDocumentElement(c)))}function getClippingAncestors(c){const d=getOverflowAncestors(c),v=["absolute","fixed"].includes(getComputedStyle$1(c).position)&&isHTMLElement(c)?getOffsetParent(c):c;return isElement$1(v)?d.filter(b=>isElement$1(b)&&contains(b,v)&&getNodeName(b)!=="body"):[]}function getClippingRect(c){let{element:d,boundary:g,rootBoundary:v,strategy:b}=c;const E=[...g==="clippingAncestors"?getClippingAncestors(d):[].concat(g),v],R=E[0],U=E.reduce((P,B)=>{const ee=getClientRectFromClippingAncestor(d,B,b);return P.top=max(ee.top,P.top),P.right=min(ee.right,P.right),P.bottom=min(ee.bottom,P.bottom),P.left=max(ee.left,P.left),P},getClientRectFromClippingAncestor(d,R,b));return{width:U.right-U.left,height:U.bottom-U.top,x:U.left,y:U.top}}const platform={getClippingRect,convertOffsetParentRelativeRectToViewportRelativeRect,isElement:isElement$1,getDimensions,getOffsetParent,getDocumentElement,getElementRects:c=>{let{reference:d,floating:g,strategy:v}=c;return{reference:getRectRelativeToOffsetParent(d,getOffsetParent(g),v),floating:{...getDimensions(g),x:0,y:0}}},getClientRects:c=>Array.from(c.getClientRects()),isRTL:c=>getComputedStyle$1(c).direction==="rtl"};function autoUpdate(c,d,g,v){v===void 0&&(v={});const{ancestorScroll:b=!0,ancestorResize:_=!0,elementResize:E=!0,animationFrame:R=!1}=v,U=b&&!R,P=_&&!R,B=U||P?[...isElement$1(c)?getOverflowAncestors(c):[],...getOverflowAncestors(d)]:[];B.forEach(z=>{U&&z.addEventListener("scroll",g,{passive:!0}),P&&z.addEventListener("resize",g)});let ee=null;if(E){let z=!0;ee=new ResizeObserver(()=>{z||g(),z=!1}),isElement$1(c)&&!R&&ee.observe(c),ee.observe(d)}let re,ne=R?getBoundingClientRect(c):null;R&&j();function j(){const z=getBoundingClientRect(c);ne&&(z.x!==ne.x||z.y!==ne.y||z.width!==ne.width||z.height!==ne.height)&&g(),ne=z,re=requestAnimationFrame(j)}return g(),()=>{var z;B.forEach(W=>{U&&W.removeEventListener("scroll",g),P&&W.removeEventListener("resize",g)}),(z=ee)==null||z.disconnect(),ee=null,R&&cancelAnimationFrame(re)}}const computePosition=(c,d,g)=>computePosition$1(c,d,{platform,...g});var index$1=typeof document<"u"?react.exports.useLayoutEffect:react.exports.useEffect;function deepEqual(c,d){if(c===d)return!0;if(typeof c!=typeof d)return!1;if(typeof c=="function"&&c.toString()===d.toString())return!0;let g,v,b;if(c&&d&&typeof c=="object"){if(Array.isArray(c)){if(g=c.length,g!=d.length)return!1;for(v=g;v--!==0;)if(!deepEqual(c[v],d[v]))return!1;return!0}if(b=Object.keys(c),g=b.length,g!==Object.keys(d).length)return!1;for(v=g;v--!==0;)if(!Object.prototype.hasOwnProperty.call(d,b[v]))return!1;for(v=g;v--!==0;){const _=b[v];if(!(_==="_owner"&&c.$$typeof)&&!deepEqual(c[_],d[_]))return!1}return!0}return c!==c&&d!==d}function useLatestRef(c){const d=react.exports.useRef(c);return index$1(()=>{d.current=c}),d}function useFloating(c){let{middleware:d,placement:g="bottom",strategy:v="absolute",whileElementsMounted:b}=c===void 0?{}:c;const _=react.exports.useRef(null),E=react.exports.useRef(null),R=useLatestRef(b),U=react.exports.useRef(null),[P,B]=react.exports.useState({x:null,y:null,strategy:v,placement:g,middlewareData:{}}),[ee,re]=react.exports.useState(d);deepEqual(ee==null?void 0:ee.map(Q=>{let{options:X}=Q;return X}),d==null?void 0:d.map(Q=>{let{options:X}=Q;return X}))||re(d);const ne=react.exports.useCallback(()=>{!_.current||!E.current||computePosition(_.current,E.current,{middleware:ee,placement:g,strategy:v}).then(Q=>{j.current&&reactDom.exports.flushSync(()=>{B(Q)})})},[ee,g,v]);index$1(()=>{j.current&&ne()},[ne]);const j=react.exports.useRef(!1);index$1(()=>(j.current=!0,()=>{j.current=!1}),[]);const z=react.exports.useCallback(()=>{if(typeof U.current=="function"&&(U.current(),U.current=null),_.current&&E.current)if(R.current){const Q=R.current(_.current,E.current,ne);U.current=Q}else ne()},[ne,R]),W=react.exports.useCallback(Q=>{_.current=Q,z()},[z]),O=react.exports.useCallback(Q=>{E.current=Q,z()},[z]),Y=react.exports.useMemo(()=>({reference:_,floating:E}),[]);return react.exports.useMemo(()=>({...P,update:ne,refs:Y,reference:W,floating:O}),[P,ne,Y,W,O])}const arrow=c=>{const{element:d,padding:g}=c;function v(b){return Object.prototype.hasOwnProperty.call(b,"current")}return{name:"arrow",options:c,fn(b){return v(d)?d.current!=null?arrow$1({element:d.current,padding:g}).fn(b):{}:d?arrow$1({element:d,padding:g}).fn(b):{}}}},$7e8f5cd07187803e$export$21b07c8f274aebd5=react.exports.forwardRef((c,d)=>{const{children:g,width:v=10,height:b=5,..._}=c;return react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.svg,_extends({},_,{ref:d,width:v,height:b,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),c.asChild?g:react.exports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),$7e8f5cd07187803e$export$be92b6f5f03c0fe9=$7e8f5cd07187803e$export$21b07c8f274aebd5;function $db6c3485150b8e66$export$1ab7ae714698c4b8(c){const[d,g]=react.exports.useState(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(c){g({width:c.offsetWidth,height:c.offsetHeight});const v=new ResizeObserver(b=>{if(!Array.isArray(b)||!b.length)return;const _=b[0];let E,R;if("borderBoxSize"in _){const U=_.borderBoxSize,P=Array.isArray(U)?U[0]:U;E=P.inlineSize,R=P.blockSize}else E=c.offsetWidth,R=c.offsetHeight;g({width:E,height:R})});return v.observe(c,{box:"border-box"}),()=>v.unobserve(c)}else g(void 0)},[c]),d}const $cf1ac5d9fe0e8206$var$POPPER_NAME="Popper",[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cf1ac5d9fe0e8206$var$POPPER_NAME),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$POPPER_NAME),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=c=>{const{__scopePopper:d,children:g}=c,[v,b]=react.exports.useState(null);return react.exports.createElement($cf1ac5d9fe0e8206$var$PopperProvider,{scope:d,anchor:v,onAnchorChange:b},g)},$cf1ac5d9fe0e8206$var$ANCHOR_NAME="PopperAnchor",$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=react.exports.forwardRef((c,d)=>{const{__scopePopper:g,virtualRef:v,...b}=c,_=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$ANCHOR_NAME,g),E=react.exports.useRef(null),R=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,E);return react.exports.useEffect(()=>{_.onAnchorChange((v==null?void 0:v.current)||E.current)}),v?null:react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({},b,{ref:R}))}),$cf1ac5d9fe0e8206$var$CONTENT_NAME="PopperContent",[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME),[$cf1ac5d9fe0e8206$var$PositionContextProvider,$cf1ac5d9fe0e8206$var$usePositionContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,{hasParent:!1,positionUpdateFns:new Set}),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=react.exports.forwardRef((c,d)=>{var g,v,b,_,E,R,U,P;const{__scopePopper:B,side:ee="bottom",sideOffset:re=0,align:ne="center",alignOffset:j=0,arrowPadding:z=0,collisionBoundary:W=[],collisionPadding:O=0,sticky:Y="partial",hideWhenDetached:Q=!1,avoidCollisions:X=!0,...H}=c,G=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,B),[ie,Ee]=react.exports.useState(null),be=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,xe=>Ee(xe)),[Ce,Oe]=react.exports.useState(null),mt=$db6c3485150b8e66$export$1ab7ae714698c4b8(Ce),Tt=(g=mt==null?void 0:mt.width)!==null&&g!==void 0?g:0,St=(v=mt==null?void 0:mt.height)!==null&&v!==void 0?v:0,ft=ee+(ne!=="center"?"-"+ne:""),ut=typeof O=="number"?O:{top:0,right:0,bottom:0,left:0,...O},wt=Array.isArray(W)?W:[W],Et=wt.length>0,Pt={padding:ut,boundary:wt.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:Et},{reference:Mt,floating:Bt,strategy:et,x:Pe,y:oe,placement:Ye,middlewareData:tt,update:Ze}=useFloating({strategy:"fixed",placement:ft,whileElementsMounted:autoUpdate,middleware:[offset({mainAxis:re+St,alignmentAxis:j}),X?shift({mainAxis:!0,crossAxis:!1,limiter:Y==="partial"?limitShift():void 0,...Pt}):void 0,Ce?arrow({element:Ce,padding:z}):void 0,X?flip({...Pt}):void 0,$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:Tt,arrowHeight:St}),Q?hide({strategy:"referenceHidden"}):void 0].filter($cf1ac5d9fe0e8206$var$isDefined)});$9f79659886946c16$export$e5c5a5f917a5871c(()=>{Mt(G.anchor)},[Mt,G.anchor]);const Qe=Pe!==null&&oe!==null,[lt,_t]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(Ye),Nt=(b=tt.arrow)===null||b===void 0?void 0:b.x,dt=(_=tt.arrow)===null||_===void 0?void 0:_.y,xt=((E=tt.arrow)===null||E===void 0?void 0:E.centerOffset)!==0,[Lt,Vt]=react.exports.useState();$9f79659886946c16$export$e5c5a5f917a5871c(()=>{ie&&Vt(window.getComputedStyle(ie).zIndex)},[ie]);const{hasParent:V,positionUpdateFns:M}=$cf1ac5d9fe0e8206$var$usePositionContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,B),Z=!V;react.exports.useLayoutEffect(()=>{if(!Z)return M.add(Ze),()=>{M.delete(Ze)}},[Z,M,Ze]),react.exports.useLayoutEffect(()=>{Z&&Qe&&Array.from(M).reverse().forEach(xe=>requestAnimationFrame(xe))},[Z,Qe,M]);const te={"data-side":lt,"data-align":_t,...H,ref:be,style:{...H.style,animation:Qe?void 0:"none",opacity:(R=tt.hide)!==null&&R!==void 0&&R.referenceHidden?0:void 0}};return react.exports.createElement("div",{ref:Bt,"data-radix-popper-content-wrapper":"",style:{position:et,left:0,top:0,transform:Qe?`translate3d(${Math.round(Pe)}px, ${Math.round(oe)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Lt,["--radix-popper-transform-origin"]:[(U=tt.transformOrigin)===null||U===void 0?void 0:U.x,(P=tt.transformOrigin)===null||P===void 0?void 0:P.y].join(" ")}},react.exports.createElement($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:B,placedSide:lt,onArrowChange:Oe,arrowX:Nt,arrowY:dt,shouldHideArrow:xt},Z?react.exports.createElement($cf1ac5d9fe0e8206$var$PositionContextProvider,{scope:B,hasParent:!0,positionUpdateFns:M},react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,te)):react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,te)))}),$cf1ac5d9fe0e8206$var$ARROW_NAME="PopperArrow",$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0=react.exports.forwardRef(function(d,g){const{__scopePopper:v,...b}=d,_=$cf1ac5d9fe0e8206$var$useContentContext($cf1ac5d9fe0e8206$var$ARROW_NAME,v),E=$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE[_.placedSide];return react.exports.createElement("span",{ref:_.onArrowChange,style:{position:"absolute",left:_.arrowX,top:_.arrowY,[E]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[_.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[_.placedSide],visibility:_.shouldHideArrow?"hidden":void 0}},react.exports.createElement($7e8f5cd07187803e$export$be92b6f5f03c0fe9,_extends({},b,{ref:g,style:{...b.style,display:"block"}})))});function $cf1ac5d9fe0e8206$var$isDefined(c){return c!==void 0}function $cf1ac5d9fe0e8206$var$isNotNull(c){return c!==null}const $cf1ac5d9fe0e8206$var$transformOrigin=c=>({name:"transformOrigin",options:c,fn(d){var g,v,b,_,E;const{placement:R,rects:U,middlewareData:P}=d,ee=((g=P.arrow)===null||g===void 0?void 0:g.centerOffset)!==0,re=ee?0:c.arrowWidth,ne=ee?0:c.arrowHeight,[j,z]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(R),W={start:"0%",center:"50%",end:"100%"}[z],O=((v=(b=P.arrow)===null||b===void 0?void 0:b.x)!==null&&v!==void 0?v:0)+re/2,Y=((_=(E=P.arrow)===null||E===void 0?void 0:E.y)!==null&&_!==void 0?_:0)+ne/2;let Q="",X="";return j==="bottom"?(Q=ee?W:`${O}px`,X=`${-ne}px`):j==="top"?(Q=ee?W:`${O}px`,X=`${U.floating.height+ne}px`):j==="right"?(Q=`${-ne}px`,X=ee?W:`${Y}px`):j==="left"&&(Q=`${U.floating.width+ne}px`,X=ee?W:`${Y}px`),{data:{x:Q,y:X}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(c){const[d,g="center"]=c.split("-");return[d,g]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$cf1ac5d9fe0e8206$export$21b07c8f274aebd5=$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0,$f1701beae083dbae$export$602eac185826482c=react.exports.forwardRef((c,d)=>{var g;const{container:v=globalThis==null||(g=globalThis.document)===null||g===void 0?void 0:g.body,...b}=c;return v?ReactDOM.createPortal(react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({},b,{ref:d})),v):null});function $fe963b355347cc68$export$3e6543de14f8614f(c,d){return react.exports.useReducer((g,v)=>{const b=d[g][v];return b!=null?b:g},c)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=c=>{const{present:d,children:g}=c,v=$921a889cee6df7e8$var$usePresence(d),b=typeof g=="function"?g({present:v.isPresent}):react.exports.Children.only(g),_=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(v.ref,b.ref);return typeof g=="function"||v.isPresent?react.exports.cloneElement(b,{ref:_}):null};$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";function $921a889cee6df7e8$var$usePresence(c){const[d,g]=react.exports.useState(),v=react.exports.useRef({}),b=react.exports.useRef(c),_=react.exports.useRef("none"),E=c?"mounted":"unmounted",[R,U]=$fe963b355347cc68$export$3e6543de14f8614f(E,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return react.exports.useEffect(()=>{const P=$921a889cee6df7e8$var$getAnimationName(v.current);_.current=R==="mounted"?P:"none"},[R]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const P=v.current,B=b.current;if(B!==c){const re=_.current,ne=$921a889cee6df7e8$var$getAnimationName(P);c?U("MOUNT"):ne==="none"||(P==null?void 0:P.display)==="none"?U("UNMOUNT"):U(B&&re!==ne?"ANIMATION_OUT":"UNMOUNT"),b.current=c}},[c,U]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(d){const P=ee=>{const ne=$921a889cee6df7e8$var$getAnimationName(v.current).includes(ee.animationName);ee.target===d&&ne&&reactDom.exports.flushSync(()=>U("ANIMATION_END"))},B=ee=>{ee.target===d&&(_.current=$921a889cee6df7e8$var$getAnimationName(v.current))};return d.addEventListener("animationstart",B),d.addEventListener("animationcancel",P),d.addEventListener("animationend",P),()=>{d.removeEventListener("animationstart",B),d.removeEventListener("animationcancel",P),d.removeEventListener("animationend",P)}}else U("ANIMATION_END")},[d,U]),{isPresent:["mounted","unmountSuspended"].includes(R),ref:react.exports.useCallback(P=>{P&&(v.current=getComputedStyle(P)),g(P)},[])}}function $921a889cee6df7e8$var$getAnimationName(c){return(c==null?void 0:c.animationName)||"none"}const $d7bdfb9eb0fdf311$var$ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",$d7bdfb9eb0fdf311$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d7bdfb9eb0fdf311$var$GROUP_NAME="RovingFocusGroup",[$d7bdfb9eb0fdf311$var$Collection,$d7bdfb9eb0fdf311$var$useCollection,$d7bdfb9eb0fdf311$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($d7bdfb9eb0fdf311$var$GROUP_NAME),[$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext,$d7bdfb9eb0fdf311$export$c7109489551a4f4]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d7bdfb9eb0fdf311$var$GROUP_NAME,[$d7bdfb9eb0fdf311$var$createCollectionScope]),[$d7bdfb9eb0fdf311$var$RovingFocusProvider,$d7bdfb9eb0fdf311$var$useRovingFocusContext]=$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext($d7bdfb9eb0fdf311$var$GROUP_NAME),$d7bdfb9eb0fdf311$export$8699f7c8af148338=react.exports.forwardRef((c,d)=>react.exports.createElement($d7bdfb9eb0fdf311$var$Collection.Provider,{scope:c.__scopeRovingFocusGroup},react.exports.createElement($d7bdfb9eb0fdf311$var$Collection.Slot,{scope:c.__scopeRovingFocusGroup},react.exports.createElement($d7bdfb9eb0fdf311$var$RovingFocusGroupImpl,_extends({},c,{ref:d}))))),$d7bdfb9eb0fdf311$var$RovingFocusGroupImpl=react.exports.forwardRef((c,d)=>{const{__scopeRovingFocusGroup:g,orientation:v,loop:b=!1,dir:_,currentTabStopId:E,defaultCurrentTabStopId:R,onCurrentTabStopIdChange:U,onEntryFocus:P,...B}=c,ee=react.exports.useRef(null),re=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,ee),ne=$f631663db3294ace$export$b39126d51d94e6f3(_),[j=null,z]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:E,defaultProp:R,onChange:U}),[W,O]=react.exports.useState(!1),Y=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(P),Q=$d7bdfb9eb0fdf311$var$useCollection(g),X=react.exports.useRef(!1);return react.exports.useEffect(()=>{const H=ee.current;if(H)return H.addEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,Y),()=>H.removeEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,Y)},[Y]),react.exports.createElement($d7bdfb9eb0fdf311$var$RovingFocusProvider,{scope:g,orientation:v,dir:ne,loop:b,currentTabStopId:j,onItemFocus:react.exports.useCallback(H=>z(H),[z]),onItemShiftTab:react.exports.useCallback(()=>O(!0),[])},react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({tabIndex:W?-1:0,"data-orientation":v},B,{ref:re,style:{outline:"none",...c.style},onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onMouseDown,()=>{X.current=!0}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onFocus,H=>{const G=!X.current;if(H.target===H.currentTarget&&G&&!W){const ie=new CustomEvent($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,$d7bdfb9eb0fdf311$var$EVENT_OPTIONS);if(H.currentTarget.dispatchEvent(ie),!ie.defaultPrevented){const Ee=Q().filter(Tt=>Tt.focusable),be=Ee.find(Tt=>Tt.active),Ce=Ee.find(Tt=>Tt.id===j),mt=[be,Ce,...Ee].filter(Boolean).map(Tt=>Tt.ref.current);$d7bdfb9eb0fdf311$var$focusFirst(mt)}}X.current=!1}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onBlur,()=>O(!1))})))}),$d7bdfb9eb0fdf311$var$ITEM_NAME="RovingFocusGroupItem",$d7bdfb9eb0fdf311$export$ab9df7c53fe8454=react.exports.forwardRef((c,d)=>{const{__scopeRovingFocusGroup:g,focusable:v=!0,active:b=!1,..._}=c,E=$1746a345f3d73bb7$export$f680877a34711e37(),R=$d7bdfb9eb0fdf311$var$useRovingFocusContext($d7bdfb9eb0fdf311$var$ITEM_NAME,g),U=R.currentTabStopId===E,P=$d7bdfb9eb0fdf311$var$useCollection(g);return react.exports.createElement($d7bdfb9eb0fdf311$var$Collection.ItemSlot,{scope:g,id:E,focusable:v,active:b},react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends({tabIndex:U?0:-1,"data-orientation":R.orientation},_,{ref:d,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onMouseDown,B=>{v?R.onItemFocus(E):B.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onFocus,()=>R.onItemFocus(E)),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onKeyDown,B=>{if(B.key==="Tab"&&B.shiftKey){R.onItemShiftTab();return}if(B.target!==B.currentTarget)return;const ee=$d7bdfb9eb0fdf311$var$getFocusIntent(B,R.orientation,R.dir);if(ee!==void 0){B.preventDefault();let ne=P().filter(j=>j.focusable).map(j=>j.ref.current);if(ee==="last")ne.reverse();else if(ee==="prev"||ee==="next"){ee==="prev"&&ne.reverse();const j=ne.indexOf(B.currentTarget);ne=R.loop?$d7bdfb9eb0fdf311$var$wrapArray(ne,j+1):ne.slice(j+1)}setTimeout(()=>$d7bdfb9eb0fdf311$var$focusFirst(ne))}})})))}),$d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $d7bdfb9eb0fdf311$var$getDirectionAwareKey(c,d){return d!=="rtl"?c:c==="ArrowLeft"?"ArrowRight":c==="ArrowRight"?"ArrowLeft":c}function $d7bdfb9eb0fdf311$var$getFocusIntent(c,d,g){const v=$d7bdfb9eb0fdf311$var$getDirectionAwareKey(c.key,g);if(!(d==="vertical"&&["ArrowLeft","ArrowRight"].includes(v))&&!(d==="horizontal"&&["ArrowUp","ArrowDown"].includes(v)))return $d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT[v]}function $d7bdfb9eb0fdf311$var$focusFirst(c){const d=document.activeElement;for(const g of c)if(g===d||(g.focus(),document.activeElement!==d))return}function $d7bdfb9eb0fdf311$var$wrapArray(c,d){return c.map((g,v)=>c[(d+v)%c.length])}const $d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9=$d7bdfb9eb0fdf311$export$8699f7c8af148338,$d7bdfb9eb0fdf311$export$6d08773d2e66f8f2=$d7bdfb9eb0fdf311$export$ab9df7c53fe8454;var getDefaultParent=function(c){if(typeof document>"u")return null;var d=Array.isArray(c)?c[0]:c;return d.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,applyAttributeToOthers=function(c,d,g,v){var b=Array.isArray(c)?c:[c];markerMap[g]||(markerMap[g]=new WeakMap);var _=markerMap[g],E=[],R=new Set,U=new Set(b),P=function(ee){!ee||R.has(ee)||(R.add(ee),P(ee.parentNode))};b.forEach(P);var B=function(ee){!ee||U.has(ee)||Array.prototype.forEach.call(ee.children,function(re){if(R.has(re))B(re);else{var ne=re.getAttribute(v),j=ne!==null&&ne!=="false",z=(counterMap.get(re)||0)+1,W=(_.get(re)||0)+1;counterMap.set(re,z),_.set(re,W),E.push(re),z===1&&j&&uncontrolledNodes.set(re,!0),W===1&&re.setAttribute(g,"true"),j||re.setAttribute(v,"true")}})};return B(d),R.clear(),lockCount++,function(){E.forEach(function(ee){var re=counterMap.get(ee)-1,ne=_.get(ee)-1;counterMap.set(ee,re),_.set(ee,ne),re||(uncontrolledNodes.has(ee)||ee.removeAttribute(v),uncontrolledNodes.delete(ee)),ne||ee.removeAttribute(g)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(c,d,g){g===void 0&&(g="data-aria-hidden");var v=Array.from(Array.isArray(c)?c:[c]),b=d||getDefaultParent(c);return b?(v.push.apply(v,Array.from(b.querySelectorAll("[aria-live]"))),applyAttributeToOthers(v,b,g,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(d){for(var g,v=1,b=arguments.length;v<b;v++){g=arguments[v];for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(d[_]=g[_])}return d},__assign.apply(this,arguments)};function __rest(c,d){var g={};for(var v in c)Object.prototype.hasOwnProperty.call(c,v)&&d.indexOf(v)<0&&(g[v]=c[v]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,v=Object.getOwnPropertySymbols(c);b<v.length;b++)d.indexOf(v[b])<0&&Object.prototype.propertyIsEnumerable.call(c,v[b])&&(g[v[b]]=c[v[b]]);return g}function __spreadArray(c,d,g){if(g||arguments.length===2)for(var v=0,b=d.length,_;v<b;v++)(_||!(v in d))&&(_||(_=Array.prototype.slice.call(d,0,v)),_[v]=d[v]);return c.concat(_||Array.prototype.slice.call(d))}var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(c,d){return typeof c=="function"?c(d):c&&(c.current=d),c}function useCallbackRef(c,d){var g=react.exports.useState(function(){return{value:c,callback:d,facade:{get current(){return g.value},set current(v){var b=g.value;b!==v&&(g.value=v,g.callback(v,b))}}}})[0];return g.callback=d,g.facade}function useMergeRefs(c,d){return useCallbackRef(d||null,function(g){return c.forEach(function(v){return assignRef(v,g)})})}function ItoI(c){return c}function innerCreateMedium(c,d){d===void 0&&(d=ItoI);var g=[],v=!1,b={read:function(){if(v)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return g.length?g[g.length-1]:c},useMedium:function(_){var E=d(_,v);return g.push(E),function(){g=g.filter(function(R){return R!==E})}},assignSyncMedium:function(_){for(v=!0;g.length;){var E=g;g=[],E.forEach(_)}g={push:function(R){return _(R)},filter:function(){return g}}},assignMedium:function(_){v=!0;var E=[];if(g.length){var R=g;g=[],R.forEach(_),E=g}var U=function(){var B=E;E=[],B.forEach(_)},P=function(){return Promise.resolve().then(U)};P(),g={push:function(B){E.push(B),P()},filter:function(B){return E=E.filter(B),g}}}};return b}function createSidecarMedium(c){c===void 0&&(c={});var d=innerCreateMedium(null);return d.options=__assign({async:!0,ssr:!1},c),d}var SideCar$1=function(c){var d=c.sideCar,g=__rest(c,["sideCar"]);if(!d)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var v=d.read();if(!v)throw new Error("Sidecar medium not found");return react.exports.createElement(v,__assign({},g))};SideCar$1.isSideCarExport=!0;function exportSidecar(c,d){return c.useMedium(d),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=react.exports.forwardRef(function(c,d){var g=react.exports.useRef(null),v=react.exports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),b=v[0],_=v[1],E=c.forwardProps,R=c.children,U=c.className,P=c.removeScrollBar,B=c.enabled,ee=c.shards,re=c.sideCar,ne=c.noIsolation,j=c.inert,z=c.allowPinchZoom,W=c.as,O=W===void 0?"div":W,Y=__rest(c,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),Q=re,X=useMergeRefs([g,d]),H=__assign(__assign({},Y),b);return react.exports.createElement(react.exports.Fragment,null,B&&react.exports.createElement(Q,{sideCar:effectCar,removeScrollBar:P,shards:ee,noIsolation:ne,inert:j,setCallbacks:_,allowPinchZoom:!!z,lockRef:g}),E?react.exports.cloneElement(react.exports.Children.only(R),__assign(__assign({},H),{ref:X})):react.exports.createElement(O,__assign({},H,{className:U,ref:X}),R))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var c=document.createElement("style");c.type="text/css";var d=getNonce();return d&&c.setAttribute("nonce",d),c}function injectStyles(c,d){c.styleSheet?c.styleSheet.cssText=d:c.appendChild(document.createTextNode(d))}function insertStyleTag(c){var d=document.head||document.getElementsByTagName("head")[0];d.appendChild(c)}var stylesheetSingleton=function(){var c=0,d=null;return{add:function(g){c==0&&(d=makeStyleTag())&&(injectStyles(d,g),insertStyleTag(d)),c++},remove:function(){c--,!c&&d&&(d.parentNode&&d.parentNode.removeChild(d),d=null)}}},styleHookSingleton=function(){var c=stylesheetSingleton();return function(d,g){react.exports.useEffect(function(){return c.add(d),function(){c.remove()}},[d&&g])}},styleSingleton=function(){var c=styleHookSingleton(),d=function(g){var v=g.styles,b=g.dynamic;return c(v,b),null};return d},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(c){return parseInt(c||"",10)||0},getOffset=function(c){var d=window.getComputedStyle(document.body),g=d[c==="padding"?"paddingLeft":"marginLeft"],v=d[c==="padding"?"paddingTop":"marginTop"],b=d[c==="padding"?"paddingRight":"marginRight"];return[parse$1(g),parse$1(v),parse$1(b)]},getGapWidth=function(c){if(c===void 0&&(c="margin"),typeof window>"u")return zeroGap;var d=getOffset(c),g=document.documentElement.clientWidth,v=window.innerWidth;return{left:d[0],top:d[1],right:d[2],gap:Math.max(0,v-g+d[2]-d[0])}},Style=styleSingleton(),getStyles=function(c,d,g,v){var b=c.left,_=c.top,E=c.right,R=c.gap;return g===void 0&&(g="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(v,`;
   padding-right: `).concat(R,"px ").concat(v,`;
  }
  body {
    overflow: hidden `).concat(v,`;
    overscroll-behavior: contain;
    `).concat([d&&"position: relative ".concat(v,";"),g==="margin"&&`
    padding-left: `.concat(b,`px;
    padding-top: `).concat(_,`px;
    padding-right: `).concat(E,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(R,"px ").concat(v,`;
    `),g==="padding"&&"padding-right: ".concat(R,"px ").concat(v,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(R,"px ").concat(v,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(R,"px ").concat(v,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(v,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(v,`;
  }
  
  body {
    `).concat(removedBarSizeVariable,": ").concat(R,`px;
  }
`)},RemoveScrollBar=function(c){var d=c.noRelative,g=c.noImportant,v=c.gapMode,b=v===void 0?"margin":v,_=react.exports.useMemo(function(){return getGapWidth(b)},[b]);return react.exports.createElement(Style,{styles:getStyles(_,!d,b,g?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,elementCouldBeVScrolled=function(c){var d=window.getComputedStyle(c);return d.overflowY!=="hidden"&&!(d.overflowY===d.overflowX&&d.overflowY==="visible")},elementCouldBeHScrolled=function(c){var d=window.getComputedStyle(c);return d.overflowX!=="hidden"&&!(d.overflowY===d.overflowX&&d.overflowX==="visible")},locationCouldBeScrolled=function(c,d){var g=d;do{typeof ShadowRoot<"u"&&g instanceof ShadowRoot&&(g=g.host);var v=elementCouldBeScrolled(c,g);if(v){var b=getScrollVariables(c,g),_=b[1],E=b[2];if(_>E)return!0}g=g.parentNode}while(g&&g!==document.body);return!1},getVScrollVariables=function(c){var d=c.scrollTop,g=c.scrollHeight,v=c.clientHeight;return[d,g,v]},getHScrollVariables=function(c){var d=c.scrollLeft,g=c.scrollWidth,v=c.clientWidth;return[d,g,v]},elementCouldBeScrolled=function(c,d){return c==="v"?elementCouldBeVScrolled(d):elementCouldBeHScrolled(d)},getScrollVariables=function(c,d){return c==="v"?getVScrollVariables(d):getHScrollVariables(d)},getDirectionFactor=function(c,d){return c==="h"&&d==="rtl"?-1:1},handleScroll=function(c,d,g,v,b){var _=getDirectionFactor(c,window.getComputedStyle(d).direction),E=_*v,R=g.target,U=d.contains(R),P=!1,B=E>0,ee=0,re=0;do{var ne=getScrollVariables(c,R),j=ne[0],z=ne[1],W=ne[2],O=z-W-_*j;(j||O)&&elementCouldBeScrolled(c,R)&&(ee+=O,re+=j),R=R.parentNode}while(!U&&R!==document.body||U&&(d.contains(R)||d===R));return(B&&(b&&ee===0||!b&&E>ee)||!B&&(b&&re===0||!b&&-E>re))&&(P=!0),P},getTouchXY=function(c){return"changedTouches"in c?[c.changedTouches[0].clientX,c.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(c){return[c.deltaX,c.deltaY]},extractRef=function(c){return c&&"current"in c?c.current:c},deltaCompare=function(c,d){return c[0]===d[0]&&c[1]===d[1]},generateStyle=function(c){return`
  .block-interactivity-`.concat(c,` {pointer-events: none;}
  .allow-interactivity-`).concat(c,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(c){var d=react.exports.useRef([]),g=react.exports.useRef([0,0]),v=react.exports.useRef(),b=react.exports.useState(idCounter++)[0],_=react.exports.useState(function(){return styleSingleton()})[0],E=react.exports.useRef(c);react.exports.useEffect(function(){E.current=c},[c]),react.exports.useEffect(function(){if(c.inert){document.body.classList.add("block-interactivity-".concat(b));var z=__spreadArray([c.lockRef.current],(c.shards||[]).map(extractRef),!0).filter(Boolean);return z.forEach(function(W){return W.classList.add("allow-interactivity-".concat(b))}),function(){document.body.classList.remove("block-interactivity-".concat(b)),z.forEach(function(W){return W.classList.remove("allow-interactivity-".concat(b))})}}},[c.inert,c.lockRef.current,c.shards]);var R=react.exports.useCallback(function(z,W){if("touches"in z&&z.touches.length===2)return!E.current.allowPinchZoom;var O=getTouchXY(z),Y=g.current,Q="deltaX"in z?z.deltaX:Y[0]-O[0],X="deltaY"in z?z.deltaY:Y[1]-O[1],H,G=z.target,ie=Math.abs(Q)>Math.abs(X)?"h":"v";if("touches"in z&&ie==="h"&&G.type==="range")return!1;var Ee=locationCouldBeScrolled(ie,G);if(!Ee)return!0;if(Ee?H=ie:(H=ie==="v"?"h":"v",Ee=locationCouldBeScrolled(ie,G)),!Ee)return!1;if(!v.current&&"changedTouches"in z&&(Q||X)&&(v.current=H),!H)return!0;var be=v.current||H;return handleScroll(be,W,z,be==="h"?Q:X,!0)},[]),U=react.exports.useCallback(function(z){var W=z;if(!(!lockStack.length||lockStack[lockStack.length-1]!==_)){var O="deltaY"in W?getDeltaXY(W):getTouchXY(W),Y=d.current.filter(function(H){return H.name===W.type&&H.target===W.target&&deltaCompare(H.delta,O)})[0];if(Y&&Y.should){W.preventDefault();return}if(!Y){var Q=(E.current.shards||[]).map(extractRef).filter(Boolean).filter(function(H){return H.contains(W.target)}),X=Q.length>0?R(W,Q[0]):!E.current.noIsolation;X&&W.preventDefault()}}},[]),P=react.exports.useCallback(function(z,W,O,Y){var Q={name:z,delta:W,target:O,should:Y};d.current.push(Q),setTimeout(function(){d.current=d.current.filter(function(X){return X!==Q})},1)},[]),B=react.exports.useCallback(function(z){g.current=getTouchXY(z),v.current=void 0},[]),ee=react.exports.useCallback(function(z){P(z.type,getDeltaXY(z),z.target,R(z,c.lockRef.current))},[]),re=react.exports.useCallback(function(z){P(z.type,getTouchXY(z),z.target,R(z,c.lockRef.current))},[]);react.exports.useEffect(function(){return lockStack.push(_),c.setCallbacks({onScrollCapture:ee,onWheelCapture:ee,onTouchMoveCapture:re}),document.addEventListener("wheel",U,nonPassive),document.addEventListener("touchmove",U,nonPassive),document.addEventListener("touchstart",B,nonPassive),function(){lockStack=lockStack.filter(function(z){return z!==_}),document.removeEventListener("wheel",U,nonPassive),document.removeEventListener("touchmove",U,nonPassive),document.removeEventListener("touchstart",B,nonPassive)}},[]);var ne=c.removeScrollBar,j=c.inert;return react.exports.createElement(react.exports.Fragment,null,j?react.exports.createElement(_,{styles:generateStyle(b)}):null,ne?react.exports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=react.exports.forwardRef(function(c,d){return react.exports.createElement(RemoveScroll,__assign({},c,{ref:d,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;const $epM9y$RemoveScroll=ReactRemoveScroll,$6cc32821e9371a1c$var$SELECTION_KEYS=["Enter"," "],$6cc32821e9371a1c$var$FIRST_KEYS=["ArrowDown","PageUp","Home"],$6cc32821e9371a1c$var$LAST_KEYS=["ArrowUp","PageDown","End"],$6cc32821e9371a1c$var$FIRST_LAST_KEYS=[...$6cc32821e9371a1c$var$FIRST_KEYS,...$6cc32821e9371a1c$var$LAST_KEYS],$6cc32821e9371a1c$var$MENU_NAME="Menu",[$6cc32821e9371a1c$var$Collection,$6cc32821e9371a1c$var$useCollection,$6cc32821e9371a1c$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($6cc32821e9371a1c$var$MENU_NAME),[$6cc32821e9371a1c$var$createMenuContext,$6cc32821e9371a1c$export$4027731b685e72eb]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($6cc32821e9371a1c$var$MENU_NAME,[$6cc32821e9371a1c$var$createCollectionScope,$cf1ac5d9fe0e8206$export$722aac194ae923,$d7bdfb9eb0fdf311$export$c7109489551a4f4]),$6cc32821e9371a1c$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),$6cc32821e9371a1c$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),[$6cc32821e9371a1c$var$MenuProvider,$6cc32821e9371a1c$var$useMenuContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$MENU_NAME),[$6cc32821e9371a1c$var$MenuRootProvider,$6cc32821e9371a1c$var$useMenuRootContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$MENU_NAME),$6cc32821e9371a1c$export$d9b273488cd8ce6f=c=>{const{__scopeMenu:d,open:g=!1,children:v,dir:b,onOpenChange:_,modal:E=!0}=c,R=$6cc32821e9371a1c$var$usePopperScope(d),[U,P]=react.exports.useState(null),B=react.exports.useRef(!1),ee=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_),re=$f631663db3294ace$export$b39126d51d94e6f3(b);return react.exports.useEffect(()=>{const ne=()=>{B.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>B.current=!1;return document.addEventListener("keydown",ne,{capture:!0}),()=>{document.removeEventListener("keydown",ne,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),react.exports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,R,react.exports.createElement($6cc32821e9371a1c$var$MenuProvider,{scope:d,open:g,onOpenChange:ee,content:U,onContentChange:P},react.exports.createElement($6cc32821e9371a1c$var$MenuRootProvider,{scope:d,onClose:react.exports.useCallback(()=>ee(!1),[ee]),isUsingKeyboardRef:B,dir:re,modal:E},v)))},$6cc32821e9371a1c$export$9fa5ebd18bee4d43=react.exports.forwardRef((c,d)=>{const{__scopeMenu:g,...v}=c,b=$6cc32821e9371a1c$var$usePopperScope(g);return react.exports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends({},b,v,{ref:d}))}),$6cc32821e9371a1c$var$PORTAL_NAME="MenuPortal",[$6cc32821e9371a1c$var$PortalProvider,$6cc32821e9371a1c$var$usePortalContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$PORTAL_NAME,{forceMount:void 0}),$6cc32821e9371a1c$export$793392f970497feb=c=>{const{__scopeMenu:d,forceMount:g,children:v,container:b}=c,_=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$PORTAL_NAME,d);return react.exports.createElement($6cc32821e9371a1c$var$PortalProvider,{scope:d,forceMount:g},react.exports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:g||_.open},react.exports.createElement($f1701beae083dbae$export$602eac185826482c,{asChild:!0,container:b},v)))},$6cc32821e9371a1c$var$CONTENT_NAME="MenuContent",[$6cc32821e9371a1c$var$MenuContentProvider,$6cc32821e9371a1c$var$useMenuContentContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$CONTENT_NAME),$6cc32821e9371a1c$export$479f0f2f71193efe=react.exports.forwardRef((c,d)=>{const g=$6cc32821e9371a1c$var$usePortalContext($6cc32821e9371a1c$var$CONTENT_NAME,c.__scopeMenu),{forceMount:v=g.forceMount,...b}=c,_=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,c.__scopeMenu),E=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$CONTENT_NAME,c.__scopeMenu);return react.exports.createElement($6cc32821e9371a1c$var$Collection.Provider,{scope:c.__scopeMenu},react.exports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:v||_.open},react.exports.createElement($6cc32821e9371a1c$var$Collection.Slot,{scope:c.__scopeMenu},E.modal?react.exports.createElement($6cc32821e9371a1c$var$MenuRootContentModal,_extends({},b,{ref:d})):react.exports.createElement($6cc32821e9371a1c$var$MenuRootContentNonModal,_extends({},b,{ref:d})))))}),$6cc32821e9371a1c$var$MenuRootContentModal=react.exports.forwardRef((c,d)=>{const g=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,c.__scopeMenu),v=react.exports.useRef(null),b=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,v);return react.exports.useEffect(()=>{const _=v.current;if(_)return hideOthers(_)},[]),react.exports.createElement($6cc32821e9371a1c$var$MenuContentImpl,_extends({},c,{ref:b,trapFocus:g.open,disableOutsidePointerEvents:g.open,disableOutsideScroll:!0,onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onFocusOutside,_=>_.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>g.onOpenChange(!1)}))}),$6cc32821e9371a1c$var$MenuRootContentNonModal=react.exports.forwardRef((c,d)=>{const g=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,c.__scopeMenu);return react.exports.createElement($6cc32821e9371a1c$var$MenuContentImpl,_extends({},c,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>g.onOpenChange(!1)}))}),$6cc32821e9371a1c$var$MenuContentImpl=react.exports.forwardRef((c,d)=>{const{__scopeMenu:g,loop:v=!1,trapFocus:b,onOpenAutoFocus:_,onCloseAutoFocus:E,disableOutsidePointerEvents:R,onEscapeKeyDown:U,onPointerDownOutside:P,onFocusOutside:B,onInteractOutside:ee,onDismiss:re,disableOutsideScroll:ne,...j}=c,z=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,g),W=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$CONTENT_NAME,g),O=$6cc32821e9371a1c$var$usePopperScope(g),Y=$6cc32821e9371a1c$var$useRovingFocusGroupScope(g),Q=$6cc32821e9371a1c$var$useCollection(g),[X,H]=react.exports.useState(null),G=react.exports.useRef(null),ie=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,G,z.onContentChange),Ee=react.exports.useRef(0),be=react.exports.useRef(""),Ce=react.exports.useRef(0),Oe=react.exports.useRef(null),mt=react.exports.useRef("right"),Tt=react.exports.useRef(0),St=ne?$epM9y$RemoveScroll:react.exports.Fragment,ft=ne?{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0}:void 0,ut=Et=>{var Pt,Mt;const Bt=be.current+Et,et=Q().filter(Qe=>!Qe.disabled),Pe=document.activeElement,oe=(Pt=et.find(Qe=>Qe.ref.current===Pe))===null||Pt===void 0?void 0:Pt.textValue,Ye=et.map(Qe=>Qe.textValue),tt=$6cc32821e9371a1c$var$getNextMatch(Ye,Bt,oe),Ze=(Mt=et.find(Qe=>Qe.textValue===tt))===null||Mt===void 0?void 0:Mt.ref.current;(function Qe(lt){be.current=lt,window.clearTimeout(Ee.current),lt!==""&&(Ee.current=window.setTimeout(()=>Qe(""),1e3))})(Bt),Ze&&setTimeout(()=>Ze.focus())};react.exports.useEffect(()=>()=>window.clearTimeout(Ee.current),[]),$3db38b7d1fb3fe6a$export$b7ece24a22aeda8c();const wt=react.exports.useCallback(Et=>{var Pt,Mt;return mt.current===((Pt=Oe.current)===null||Pt===void 0?void 0:Pt.side)&&$6cc32821e9371a1c$var$isPointerInGraceArea(Et,(Mt=Oe.current)===null||Mt===void 0?void 0:Mt.area)},[]);return react.exports.createElement($6cc32821e9371a1c$var$MenuContentProvider,{scope:g,searchRef:be,onItemEnter:react.exports.useCallback(Et=>{wt(Et)&&Et.preventDefault()},[wt]),onItemLeave:react.exports.useCallback(Et=>{var Pt;wt(Et)||((Pt=G.current)===null||Pt===void 0||Pt.focus(),H(null))},[wt]),onTriggerLeave:react.exports.useCallback(Et=>{wt(Et)&&Et.preventDefault()},[wt]),pointerGraceTimerRef:Ce,onPointerGraceIntentChange:react.exports.useCallback(Et=>{Oe.current=Et},[])},react.exports.createElement(St,ft,react.exports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,trapped:b,onMountAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_,Et=>{var Pt;Et.preventDefault(),(Pt=G.current)===null||Pt===void 0||Pt.focus()}),onUnmountAutoFocus:E},react.exports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:R,onEscapeKeyDown:U,onPointerDownOutside:P,onFocusOutside:B,onInteractOutside:ee,onDismiss:re},react.exports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends({asChild:!0},Y,{dir:W.dir,orientation:"vertical",loop:v,currentTabStopId:X,onCurrentTabStopIdChange:H,onEntryFocus:Et=>{W.isUsingKeyboardRef.current||Et.preventDefault()}}),react.exports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends({role:"menu","aria-orientation":"vertical","data-state":$6cc32821e9371a1c$var$getOpenState(z.open),dir:W.dir},O,j,{ref:ie,style:{outline:"none",...j.style},onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(j.onKeyDown,Et=>{const Mt=Et.target.closest('[role="menu"]')===Et.currentTarget,Bt=Et.ctrlKey||Et.altKey||Et.metaKey,et=Et.key.length===1;Mt&&(Et.key==="Tab"&&Et.preventDefault(),!Bt&&et&&ut(Et.key));const Pe=G.current;if(Et.target!==Pe||!$6cc32821e9371a1c$var$FIRST_LAST_KEYS.includes(Et.key))return;Et.preventDefault();const Ye=Q().filter(tt=>!tt.disabled).map(tt=>tt.ref.current);$6cc32821e9371a1c$var$LAST_KEYS.includes(Et.key)&&Ye.reverse(),$6cc32821e9371a1c$var$focusFirst(Ye)}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onBlur,Et=>{Et.currentTarget.contains(Et.target)||(window.clearTimeout(Ee.current),be.current="")}),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onPointerMove,$6cc32821e9371a1c$var$whenMouse(Et=>{const Pt=Et.target,Mt=Tt.current!==Et.clientX;if(Et.currentTarget.contains(Pt)&&Mt){const Bt=Et.clientX>Tt.current?"right":"left";mt.current=Bt,Tt.current=Et.clientX}}))})))))))}),$6cc32821e9371a1c$var$ITEM_NAME="MenuItem",$6cc32821e9371a1c$var$ITEM_SELECT="menu.itemSelect",$6cc32821e9371a1c$export$2ce376c2cc3355c8=react.exports.forwardRef((c,d)=>{const{disabled:g=!1,onSelect:v,...b}=c,_=react.exports.useRef(null),E=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$ITEM_NAME,c.__scopeMenu),R=$6cc32821e9371a1c$var$useMenuContentContext($6cc32821e9371a1c$var$ITEM_NAME,c.__scopeMenu),U=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,_),P=react.exports.useRef(!1),B=()=>{const ee=_.current;if(!g&&ee){const re=new CustomEvent($6cc32821e9371a1c$var$ITEM_SELECT,{bubbles:!0,cancelable:!0});ee.addEventListener($6cc32821e9371a1c$var$ITEM_SELECT,ne=>v==null?void 0:v(ne),{once:!0}),$8927f6f2acc4f386$export$6d1a0317bde7de7f(ee,re),re.defaultPrevented?P.current=!1:E.onClose()}};return react.exports.createElement($6cc32821e9371a1c$var$MenuItemImpl,_extends({},b,{ref:U,disabled:g,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onClick,B),onPointerDown:ee=>{var re;(re=c.onPointerDown)===null||re===void 0||re.call(c,ee),P.current=!0},onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onPointerUp,ee=>{var re;P.current||(re=ee.currentTarget)===null||re===void 0||re.click()}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onKeyDown,ee=>{const re=R.searchRef.current!=="";g||re&&ee.key===" "||$6cc32821e9371a1c$var$SELECTION_KEYS.includes(ee.key)&&(ee.currentTarget.click(),ee.preventDefault())})}))}),$6cc32821e9371a1c$var$MenuItemImpl=react.exports.forwardRef((c,d)=>{const{__scopeMenu:g,disabled:v=!1,textValue:b,..._}=c,E=$6cc32821e9371a1c$var$useMenuContentContext($6cc32821e9371a1c$var$ITEM_NAME,g),R=$6cc32821e9371a1c$var$useRovingFocusGroupScope(g),U=react.exports.useRef(null),P=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,U),[B,ee]=react.exports.useState(!1),[re,ne]=react.exports.useState("");return react.exports.useEffect(()=>{const j=U.current;if(j){var z;ne(((z=j.textContent)!==null&&z!==void 0?z:"").trim())}},[_.children]),react.exports.createElement($6cc32821e9371a1c$var$Collection.ItemSlot,{scope:g,disabled:v,textValue:b!=null?b:re},react.exports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends({asChild:!0},R,{focusable:!v}),react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({role:"menuitem","data-highlighted":B?"":void 0,"aria-disabled":v||void 0,"data-disabled":v?"":void 0},_,{ref:P,onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onPointerMove,$6cc32821e9371a1c$var$whenMouse(j=>{v?E.onItemLeave(j):(E.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus())})),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onPointerLeave,$6cc32821e9371a1c$var$whenMouse(j=>E.onItemLeave(j))),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onFocus,()=>ee(!0)),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onBlur,()=>ee(!1))}))))}),$6cc32821e9371a1c$var$RADIO_GROUP_NAME="MenuRadioGroup";$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$RADIO_GROUP_NAME,{value:void 0,onValueChange:()=>{}});const $6cc32821e9371a1c$var$ITEM_INDICATOR_NAME="MenuItemIndicator";$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$ITEM_INDICATOR_NAME,{checked:!1});const $6cc32821e9371a1c$export$bcdda4773debf5fa=react.exports.forwardRef((c,d)=>{const{__scopeMenu:g,...v}=c,b=$6cc32821e9371a1c$var$usePopperScope(g);return react.exports.createElement($cf1ac5d9fe0e8206$export$21b07c8f274aebd5,_extends({},b,v,{ref:d}))}),$6cc32821e9371a1c$var$SUB_NAME="MenuSub";$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$SUB_NAME);function $6cc32821e9371a1c$var$getOpenState(c){return c?"open":"closed"}function $6cc32821e9371a1c$var$focusFirst(c){const d=document.activeElement;for(const g of c)if(g===d||(g.focus(),document.activeElement!==d))return}function $6cc32821e9371a1c$var$wrapArray(c,d){return c.map((g,v)=>c[(d+v)%c.length])}function $6cc32821e9371a1c$var$getNextMatch(c,d,g){const b=d.length>1&&Array.from(d).every(P=>P===d[0])?d[0]:d,_=g?c.indexOf(g):-1;let E=$6cc32821e9371a1c$var$wrapArray(c,Math.max(_,0));b.length===1&&(E=E.filter(P=>P!==g));const U=E.find(P=>P.toLowerCase().startsWith(b.toLowerCase()));return U!==g?U:void 0}function $6cc32821e9371a1c$var$isPointInPolygon(c,d){const{x:g,y:v}=c;let b=!1;for(let _=0,E=d.length-1;_<d.length;E=_++){const R=d[_].x,U=d[_].y,P=d[E].x,B=d[E].y;U>v!=B>v&&g<(P-R)*(v-U)/(B-U)+R&&(b=!b)}return b}function $6cc32821e9371a1c$var$isPointerInGraceArea(c,d){if(!d)return!1;const g={x:c.clientX,y:c.clientY};return $6cc32821e9371a1c$var$isPointInPolygon(g,d)}function $6cc32821e9371a1c$var$whenMouse(c){return d=>d.pointerType==="mouse"?c(d):void 0}const $6cc32821e9371a1c$export$be92b6f5f03c0fe9=$6cc32821e9371a1c$export$d9b273488cd8ce6f,$6cc32821e9371a1c$export$b688253958b8dfe7=$6cc32821e9371a1c$export$9fa5ebd18bee4d43,$6cc32821e9371a1c$export$602eac185826482c=$6cc32821e9371a1c$export$793392f970497feb,$6cc32821e9371a1c$export$7c6e2c02157bb7d2=$6cc32821e9371a1c$export$479f0f2f71193efe,$6cc32821e9371a1c$export$6d08773d2e66f8f2=$6cc32821e9371a1c$export$2ce376c2cc3355c8,$6cc32821e9371a1c$export$21b07c8f274aebd5=$6cc32821e9371a1c$export$bcdda4773debf5fa,$d08ef79370b62062$var$DROPDOWN_MENU_NAME="DropdownMenu",[$d08ef79370b62062$var$createDropdownMenuContext,$d08ef79370b62062$export$c0623cd925aeb687]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d08ef79370b62062$var$DROPDOWN_MENU_NAME,[$6cc32821e9371a1c$export$4027731b685e72eb]),$d08ef79370b62062$var$useMenuScope=$6cc32821e9371a1c$export$4027731b685e72eb(),[$d08ef79370b62062$var$DropdownMenuProvider,$d08ef79370b62062$var$useDropdownMenuContext]=$d08ef79370b62062$var$createDropdownMenuContext($d08ef79370b62062$var$DROPDOWN_MENU_NAME),$d08ef79370b62062$export$e44a253a59704894=c=>{const{__scopeDropdownMenu:d,children:g,dir:v,open:b,defaultOpen:_,onOpenChange:E,modal:R=!0}=c,U=$d08ef79370b62062$var$useMenuScope(d),P=react.exports.useRef(null),[B=!1,ee]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:b,defaultProp:_,onChange:E});return react.exports.createElement($d08ef79370b62062$var$DropdownMenuProvider,{scope:d,triggerId:$1746a345f3d73bb7$export$f680877a34711e37(),triggerRef:P,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),open:B,onOpenChange:ee,onOpenToggle:react.exports.useCallback(()=>ee(re=>!re),[ee]),modal:R},react.exports.createElement($6cc32821e9371a1c$export$be92b6f5f03c0fe9,_extends({},U,{open:B,onOpenChange:ee,dir:v,modal:R}),g))},$d08ef79370b62062$var$TRIGGER_NAME="DropdownMenuTrigger",$d08ef79370b62062$export$d2469213b3befba9=react.exports.forwardRef((c,d)=>{const{__scopeDropdownMenu:g,disabled:v=!1,...b}=c,_=$d08ef79370b62062$var$useDropdownMenuContext($d08ef79370b62062$var$TRIGGER_NAME,g),E=$d08ef79370b62062$var$useMenuScope(g);return react.exports.createElement($6cc32821e9371a1c$export$b688253958b8dfe7,_extends({asChild:!0},E),react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends({type:"button",id:_.triggerId,"aria-haspopup":"menu","aria-expanded":_.open?!0:void 0,"aria-controls":_.open?_.contentId:void 0,"data-state":_.open?"open":"closed","data-disabled":v?"":void 0,disabled:v},b,{ref:$6ed0406888f73fc4$export$43e446d32b3d21af(d,_.triggerRef),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onPointerDown,R=>{!v&&R.button===0&&R.ctrlKey===!1&&(_.onOpenToggle(),_.open||R.preventDefault())}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onKeyDown,R=>{v||(["Enter"," "].includes(R.key)&&_.onOpenToggle(),R.key==="ArrowDown"&&_.onOpenChange(!0),[" ","ArrowDown"].includes(R.key)&&R.preventDefault())})})))}),$d08ef79370b62062$export$cd369b4d4d54efc9=c=>{const{__scopeDropdownMenu:d,...g}=c,v=$d08ef79370b62062$var$useMenuScope(d);return react.exports.createElement($6cc32821e9371a1c$export$602eac185826482c,_extends({},v,g))},$d08ef79370b62062$var$CONTENT_NAME="DropdownMenuContent",$d08ef79370b62062$export$6e76d93a37c01248=react.exports.forwardRef((c,d)=>{const{__scopeDropdownMenu:g,...v}=c,b=$d08ef79370b62062$var$useDropdownMenuContext($d08ef79370b62062$var$CONTENT_NAME,g),_=$d08ef79370b62062$var$useMenuScope(g),E=react.exports.useRef(!1);return react.exports.createElement($6cc32821e9371a1c$export$7c6e2c02157bb7d2,_extends({id:b.contentId,"aria-labelledby":b.triggerId},_,v,{ref:d,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onCloseAutoFocus,R=>{var U;E.current||(U=b.triggerRef.current)===null||U===void 0||U.focus(),E.current=!1,R.preventDefault()}),onInteractOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onInteractOutside,R=>{const U=R.detail.originalEvent,P=U.button===0&&U.ctrlKey===!0,B=U.button===2||P;(!b.modal||B)&&(E.current=!0)}),style:{...c.style,["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"}}))}),$d08ef79370b62062$export$ed97964d1871885d=react.exports.forwardRef((c,d)=>{const{__scopeDropdownMenu:g,...v}=c,b=$d08ef79370b62062$var$useMenuScope(g);return react.exports.createElement($6cc32821e9371a1c$export$6d08773d2e66f8f2,_extends({},b,v,{ref:d}))}),$d08ef79370b62062$export$34b8980744021ec5=react.exports.forwardRef((c,d)=>{const{__scopeDropdownMenu:g,...v}=c,b=$d08ef79370b62062$var$useMenuScope(g);return react.exports.createElement($6cc32821e9371a1c$export$21b07c8f274aebd5,_extends({},b,v,{ref:d}))}),$d08ef79370b62062$export$be92b6f5f03c0fe9=$d08ef79370b62062$export$e44a253a59704894,$d08ef79370b62062$export$41fb9f06171c75f4=$d08ef79370b62062$export$d2469213b3befba9,$d08ef79370b62062$export$602eac185826482c=$d08ef79370b62062$export$cd369b4d4d54efc9,$d08ef79370b62062$export$7c6e2c02157bb7d2=$d08ef79370b62062$export$6e76d93a37c01248,$d08ef79370b62062$export$6d08773d2e66f8f2=$d08ef79370b62062$export$ed97964d1871885d,$d08ef79370b62062$export$21b07c8f274aebd5=$d08ef79370b62062$export$34b8980744021ec5,dropdownMenu="",Loading=({message:c="Loading..."})=>React.createElement("div",{className:"ctw-space-x-2"},c&&React.createElement("span",{className:"ctw-text-sm ctw-italic"},c),React.createElement(Spinner,null));try{Loading.displayName="Loading",Loading.__docgenInfo={description:"",displayName:"Loading",props:{message:{defaultValue:{value:"Loading..."},description:"",name:"message",required:!1,type:{name:"string"}}}}}catch{}function DropdownMenu({children:c,menuItems:d}){const{ctwProviderRef:g}=useCTW(),[v,b]=react.exports.useState(!1);async function _(E){b(!0),await E.action(),b(!1)}return React.createElement(qe,null,React.createElement($d08ef79370b62062$export$be92b6f5f03c0fe9,{modal:!1},React.createElement($d08ef79370b62062$export$41fb9f06171c75f4,{className:"ctw-btn-clear ctw-link","aria-label":"dropdown"},v&&React.createElement(Loading,{message:""}),!v&&c),React.createElement($d08ef79370b62062$export$602eac185826482c,{container:g.current},React.createElement($d08ef79370b62062$export$7c6e2c02157bb7d2,{onFocusOutside:E=>E.preventDefault(),className:"ctw-dropdown-menu-container",collisionPadding:10},React.createElement($d08ef79370b62062$export$21b07c8f274aebd5,{asChild:!0},React.createElement("div",{className:"ctw-dropdown-menu-arrow"})),d.map(E=>React.createElement($d08ef79370b62062$export$6d08773d2e66f8f2,{onClick:()=>_(E),key:E.name,className:cx(E.className,"ctw-dropdown-menu-item")},E.name))))))}try{DropdownMenu.displayName="DropdownMenu",DropdownMenu.__docgenInfo={description:"",displayName:"DropdownMenu",props:{menuItems:{defaultValue:null,description:"",name:"menuItems",required:!0,type:{name:"MenuItem[]"}}}}}catch{}function ConditionsTableBase({className:c,conditions:d,rowMenuActions:g,hideMenu:v,sort:b={columnTitle:"Last Recorded",dir:"desc"},onSort:_,...E}){const R=[{title:"Condition",dataIndex:"display",widthPercent:40,minWidth:320,sortIndices:[{index:"display"},{index:"recorded",dir:"desc"}]},{title:"Category",dataIndex:"ccsGrouping",widthPercent:25,minWidth:192,sortIndices:[{index:"ccsGrouping"},{index:"display",dir:"asc"}]},{title:"Status",render:U=>React.createElement("div",{className:"ctw-capitalize"},React.createElement("div",{className:"ctw-text-content-black"},U.clinicalStatus),React.createElement("div",null,U.isArchived?"Archived":U.verificationStatus)),widthPercent:17.5,minWidth:128,sortIndices:[{index:"clinicalStatus"},{index:"verificationStatus"},{index:"recorded",dir:"desc"}]},{title:"Last Recorded",dataIndex:"recordedDate",widthPercent:17.5,minWidth:132,sortIndices:[{index:"recorded"},{index:"display",dir:"asc"}]}];return v||R.push({className:"ctw-table-action-column",render:U=>React.createElement(DropdownMenu,{menuItems:g(U)},React.createElement(DotsHorizontalIcon$1,{className:"ctw-w-5"}))}),React.createElement(Table$1,{className:c,records:d,columns:R,sort:b,onSort:_,...E})}try{ConditionsTableBase.displayName="ConditionsTableBase",ConditionsTableBase.__docgenInfo={description:"",displayName:"ConditionsTableBase",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | (string & Mapping) | (string & ArgumentArray)"}},conditions:{defaultValue:null,description:"",name:"conditions",required:!0,type:{name:"ConditionModel[]"}},rowMenuActions:{defaultValue:null,description:"",name:"rowMenuActions",required:!0,type:{name:"(condition: ConditionModel) => MenuItem[]"}},hideMenu:{defaultValue:null,description:"",name:"hideMenu",required:!0,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},message:{defaultValue:null,description:"Displayed when we have 0 records.",name:"message",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},showTableHead:{defaultValue:null,description:"",name:"showTableHead",required:!1,type:{name:"boolean"}},stacked:{defaultValue:null,description:"",name:"stacked",required:!1,type:{name:"boolean"}},sort:{defaultValue:{value:'{ columnTitle: "Last Recorded", dir: "desc" }'},description:"",name:"sort",required:!1,type:{name:"TableSort"}},onSort:{defaultValue:null,description:"",name:"onSort",required:!1,type:{name:"((sort: TableSort) => void)"}},handleRowClick:{defaultValue:null,description:"",name:"handleRowClick",required:!1,type:{name:"((record: ConditionModel) => void)"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"((record: ConditionModel) => Element)"}},hidePagination:{defaultValue:null,description:"",name:"hidePagination",required:!1,type:{name:"boolean"}}}}}catch{}function toInteger(c){if(c===null||c===!0||c===!1)return NaN;var d=Number(c);return isNaN(d)?d:d<0?Math.ceil(d):Math.floor(d)}function requiredArgs(c,d){if(d.length<c)throw new TypeError(c+" argument"+(c>1?"s":"")+" required, but only "+d.length+" present")}function _typeof$z(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$z=function(g){return typeof g}:_typeof$z=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$z(c)}function toDate(c){requiredArgs(1,arguments);var d=Object.prototype.toString.call(c);return c instanceof Date||_typeof$z(c)==="object"&&d==="[object Date]"?new Date(c.getTime()):typeof c=="number"||d==="[object Number]"?new Date(c):((typeof c=="string"||d==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function addMilliseconds(c,d){requiredArgs(2,arguments);var g=toDate(c).getTime(),v=toInteger(d);return new Date(g+v)}var defaultOptions={};function getDefaultOptions(){return defaultOptions}function getTimezoneOffsetInMilliseconds(c){var d=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()));return d.setUTCFullYear(c.getFullYear()),c.getTime()-d.getTime()}function compareAsc(c,d){requiredArgs(2,arguments);var g=toDate(c),v=toDate(d),b=g.getTime()-v.getTime();return b<0?-1:b>0?1:b}var millisecondsInMinute=6e4,millisecondsInHour=36e5,millisecondsInSecond=1e3;function _typeof$y(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$y=function(g){return typeof g}:_typeof$y=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$y(c)}function isDate(c){return requiredArgs(1,arguments),c instanceof Date||_typeof$y(c)==="object"&&Object.prototype.toString.call(c)==="[object Date]"}function isValid$1(c){if(requiredArgs(1,arguments),!isDate(c)&&typeof c!="number")return!1;var d=toDate(c);return!isNaN(Number(d))}function differenceInCalendarYears(c,d){requiredArgs(2,arguments);var g=toDate(c),v=toDate(d);return g.getFullYear()-v.getFullYear()}function differenceInYears(c,d){requiredArgs(2,arguments);var g=toDate(c),v=toDate(d),b=compareAsc(g,v),_=Math.abs(differenceInCalendarYears(g,v));g.setFullYear(1584),v.setFullYear(1584);var E=compareAsc(g,v)===-b,R=b*(_-Number(E));return R===0?0:R}function subMilliseconds(c,d){requiredArgs(2,arguments);var g=toInteger(d);return addMilliseconds(c,-g)}var MILLISECONDS_IN_DAY=864e5;function getUTCDayOfYear(c){requiredArgs(1,arguments);var d=toDate(c),g=d.getTime();d.setUTCMonth(0,1),d.setUTCHours(0,0,0,0);var v=d.getTime(),b=g-v;return Math.floor(b/MILLISECONDS_IN_DAY)+1}function startOfUTCISOWeek(c){requiredArgs(1,arguments);var d=1,g=toDate(c),v=g.getUTCDay(),b=(v<d?7:0)+v-d;return g.setUTCDate(g.getUTCDate()-b),g.setUTCHours(0,0,0,0),g}function getUTCISOWeekYear(c){requiredArgs(1,arguments);var d=toDate(c),g=d.getUTCFullYear(),v=new Date(0);v.setUTCFullYear(g+1,0,4),v.setUTCHours(0,0,0,0);var b=startOfUTCISOWeek(v),_=new Date(0);_.setUTCFullYear(g,0,4),_.setUTCHours(0,0,0,0);var E=startOfUTCISOWeek(_);return d.getTime()>=b.getTime()?g+1:d.getTime()>=E.getTime()?g:g-1}function startOfUTCISOWeekYear(c){requiredArgs(1,arguments);var d=getUTCISOWeekYear(c),g=new Date(0);g.setUTCFullYear(d,0,4),g.setUTCHours(0,0,0,0);var v=startOfUTCISOWeek(g);return v}var MILLISECONDS_IN_WEEK$1=6048e5;function getUTCISOWeek(c){requiredArgs(1,arguments);var d=toDate(c),g=startOfUTCISOWeek(d).getTime()-startOfUTCISOWeekYear(d).getTime();return Math.round(g/MILLISECONDS_IN_WEEK$1)+1}function startOfUTCWeek(c,d){var g,v,b,_,E,R,U,P;requiredArgs(1,arguments);var B=getDefaultOptions(),ee=toInteger((g=(v=(b=(_=d==null?void 0:d.weekStartsOn)!==null&&_!==void 0?_:d==null||(E=d.locale)===null||E===void 0||(R=E.options)===null||R===void 0?void 0:R.weekStartsOn)!==null&&b!==void 0?b:B.weekStartsOn)!==null&&v!==void 0?v:(U=B.locale)===null||U===void 0||(P=U.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&g!==void 0?g:0);if(!(ee>=0&&ee<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var re=toDate(c),ne=re.getUTCDay(),j=(ne<ee?7:0)+ne-ee;return re.setUTCDate(re.getUTCDate()-j),re.setUTCHours(0,0,0,0),re}function getUTCWeekYear(c,d){var g,v,b,_,E,R,U,P;requiredArgs(1,arguments);var B=toDate(c),ee=B.getUTCFullYear(),re=getDefaultOptions(),ne=toInteger((g=(v=(b=(_=d==null?void 0:d.firstWeekContainsDate)!==null&&_!==void 0?_:d==null||(E=d.locale)===null||E===void 0||(R=E.options)===null||R===void 0?void 0:R.firstWeekContainsDate)!==null&&b!==void 0?b:re.firstWeekContainsDate)!==null&&v!==void 0?v:(U=re.locale)===null||U===void 0||(P=U.options)===null||P===void 0?void 0:P.firstWeekContainsDate)!==null&&g!==void 0?g:1);if(!(ne>=1&&ne<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=new Date(0);j.setUTCFullYear(ee+1,0,ne),j.setUTCHours(0,0,0,0);var z=startOfUTCWeek(j,d),W=new Date(0);W.setUTCFullYear(ee,0,ne),W.setUTCHours(0,0,0,0);var O=startOfUTCWeek(W,d);return B.getTime()>=z.getTime()?ee+1:B.getTime()>=O.getTime()?ee:ee-1}function startOfUTCWeekYear(c,d){var g,v,b,_,E,R,U,P;requiredArgs(1,arguments);var B=getDefaultOptions(),ee=toInteger((g=(v=(b=(_=d==null?void 0:d.firstWeekContainsDate)!==null&&_!==void 0?_:d==null||(E=d.locale)===null||E===void 0||(R=E.options)===null||R===void 0?void 0:R.firstWeekContainsDate)!==null&&b!==void 0?b:B.firstWeekContainsDate)!==null&&v!==void 0?v:(U=B.locale)===null||U===void 0||(P=U.options)===null||P===void 0?void 0:P.firstWeekContainsDate)!==null&&g!==void 0?g:1),re=getUTCWeekYear(c,d),ne=new Date(0);ne.setUTCFullYear(re,0,ee),ne.setUTCHours(0,0,0,0);var j=startOfUTCWeek(ne,d);return j}var MILLISECONDS_IN_WEEK=6048e5;function getUTCWeek(c,d){requiredArgs(1,arguments);var g=toDate(c),v=startOfUTCWeek(g,d).getTime()-startOfUTCWeekYear(g,d).getTime();return Math.round(v/MILLISECONDS_IN_WEEK)+1}function addLeadingZeros(c,d){for(var g=c<0?"-":"",v=Math.abs(c).toString();v.length<d;)v="0"+v;return g+v}var formatters$2={y:function(d,g){var v=d.getUTCFullYear(),b=v>0?v:1-v;return addLeadingZeros(g==="yy"?b%100:b,g.length)},M:function(d,g){var v=d.getUTCMonth();return g==="M"?String(v+1):addLeadingZeros(v+1,2)},d:function(d,g){return addLeadingZeros(d.getUTCDate(),g.length)},a:function(d,g){var v=d.getUTCHours()/12>=1?"pm":"am";switch(g){case"a":case"aa":return v.toUpperCase();case"aaa":return v;case"aaaaa":return v[0];case"aaaa":default:return v==="am"?"a.m.":"p.m."}},h:function(d,g){return addLeadingZeros(d.getUTCHours()%12||12,g.length)},H:function(d,g){return addLeadingZeros(d.getUTCHours(),g.length)},m:function(d,g){return addLeadingZeros(d.getUTCMinutes(),g.length)},s:function(d,g){return addLeadingZeros(d.getUTCSeconds(),g.length)},S:function(d,g){var v=g.length,b=d.getUTCMilliseconds(),_=Math.floor(b*Math.pow(10,v-3));return addLeadingZeros(_,g.length)}};const formatters$3=formatters$2;var dayPeriodEnum={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters={G:function(d,g,v){var b=d.getUTCFullYear()>0?1:0;switch(g){case"G":case"GG":case"GGG":return v.era(b,{width:"abbreviated"});case"GGGGG":return v.era(b,{width:"narrow"});case"GGGG":default:return v.era(b,{width:"wide"})}},y:function(d,g,v){if(g==="yo"){var b=d.getUTCFullYear(),_=b>0?b:1-b;return v.ordinalNumber(_,{unit:"year"})}return formatters$3.y(d,g)},Y:function(d,g,v,b){var _=getUTCWeekYear(d,b),E=_>0?_:1-_;if(g==="YY"){var R=E%100;return addLeadingZeros(R,2)}return g==="Yo"?v.ordinalNumber(E,{unit:"year"}):addLeadingZeros(E,g.length)},R:function(d,g){var v=getUTCISOWeekYear(d);return addLeadingZeros(v,g.length)},u:function(d,g){var v=d.getUTCFullYear();return addLeadingZeros(v,g.length)},Q:function(d,g,v){var b=Math.ceil((d.getUTCMonth()+1)/3);switch(g){case"Q":return String(b);case"QQ":return addLeadingZeros(b,2);case"Qo":return v.ordinalNumber(b,{unit:"quarter"});case"QQQ":return v.quarter(b,{width:"abbreviated",context:"formatting"});case"QQQQQ":return v.quarter(b,{width:"narrow",context:"formatting"});case"QQQQ":default:return v.quarter(b,{width:"wide",context:"formatting"})}},q:function(d,g,v){var b=Math.ceil((d.getUTCMonth()+1)/3);switch(g){case"q":return String(b);case"qq":return addLeadingZeros(b,2);case"qo":return v.ordinalNumber(b,{unit:"quarter"});case"qqq":return v.quarter(b,{width:"abbreviated",context:"standalone"});case"qqqqq":return v.quarter(b,{width:"narrow",context:"standalone"});case"qqqq":default:return v.quarter(b,{width:"wide",context:"standalone"})}},M:function(d,g,v){var b=d.getUTCMonth();switch(g){case"M":case"MM":return formatters$3.M(d,g);case"Mo":return v.ordinalNumber(b+1,{unit:"month"});case"MMM":return v.month(b,{width:"abbreviated",context:"formatting"});case"MMMMM":return v.month(b,{width:"narrow",context:"formatting"});case"MMMM":default:return v.month(b,{width:"wide",context:"formatting"})}},L:function(d,g,v){var b=d.getUTCMonth();switch(g){case"L":return String(b+1);case"LL":return addLeadingZeros(b+1,2);case"Lo":return v.ordinalNumber(b+1,{unit:"month"});case"LLL":return v.month(b,{width:"abbreviated",context:"standalone"});case"LLLLL":return v.month(b,{width:"narrow",context:"standalone"});case"LLLL":default:return v.month(b,{width:"wide",context:"standalone"})}},w:function(d,g,v,b){var _=getUTCWeek(d,b);return g==="wo"?v.ordinalNumber(_,{unit:"week"}):addLeadingZeros(_,g.length)},I:function(d,g,v){var b=getUTCISOWeek(d);return g==="Io"?v.ordinalNumber(b,{unit:"week"}):addLeadingZeros(b,g.length)},d:function(d,g,v){return g==="do"?v.ordinalNumber(d.getUTCDate(),{unit:"date"}):formatters$3.d(d,g)},D:function(d,g,v){var b=getUTCDayOfYear(d);return g==="Do"?v.ordinalNumber(b,{unit:"dayOfYear"}):addLeadingZeros(b,g.length)},E:function(d,g,v){var b=d.getUTCDay();switch(g){case"E":case"EE":case"EEE":return v.day(b,{width:"abbreviated",context:"formatting"});case"EEEEE":return v.day(b,{width:"narrow",context:"formatting"});case"EEEEEE":return v.day(b,{width:"short",context:"formatting"});case"EEEE":default:return v.day(b,{width:"wide",context:"formatting"})}},e:function(d,g,v,b){var _=d.getUTCDay(),E=(_-b.weekStartsOn+8)%7||7;switch(g){case"e":return String(E);case"ee":return addLeadingZeros(E,2);case"eo":return v.ordinalNumber(E,{unit:"day"});case"eee":return v.day(_,{width:"abbreviated",context:"formatting"});case"eeeee":return v.day(_,{width:"narrow",context:"formatting"});case"eeeeee":return v.day(_,{width:"short",context:"formatting"});case"eeee":default:return v.day(_,{width:"wide",context:"formatting"})}},c:function(d,g,v,b){var _=d.getUTCDay(),E=(_-b.weekStartsOn+8)%7||7;switch(g){case"c":return String(E);case"cc":return addLeadingZeros(E,g.length);case"co":return v.ordinalNumber(E,{unit:"day"});case"ccc":return v.day(_,{width:"abbreviated",context:"standalone"});case"ccccc":return v.day(_,{width:"narrow",context:"standalone"});case"cccccc":return v.day(_,{width:"short",context:"standalone"});case"cccc":default:return v.day(_,{width:"wide",context:"standalone"})}},i:function(d,g,v){var b=d.getUTCDay(),_=b===0?7:b;switch(g){case"i":return String(_);case"ii":return addLeadingZeros(_,g.length);case"io":return v.ordinalNumber(_,{unit:"day"});case"iii":return v.day(b,{width:"abbreviated",context:"formatting"});case"iiiii":return v.day(b,{width:"narrow",context:"formatting"});case"iiiiii":return v.day(b,{width:"short",context:"formatting"});case"iiii":default:return v.day(b,{width:"wide",context:"formatting"})}},a:function(d,g,v){var b=d.getUTCHours(),_=b/12>=1?"pm":"am";switch(g){case"a":case"aa":return v.dayPeriod(_,{width:"abbreviated",context:"formatting"});case"aaa":return v.dayPeriod(_,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return v.dayPeriod(_,{width:"narrow",context:"formatting"});case"aaaa":default:return v.dayPeriod(_,{width:"wide",context:"formatting"})}},b:function(d,g,v){var b=d.getUTCHours(),_;switch(b===12?_=dayPeriodEnum.noon:b===0?_=dayPeriodEnum.midnight:_=b/12>=1?"pm":"am",g){case"b":case"bb":return v.dayPeriod(_,{width:"abbreviated",context:"formatting"});case"bbb":return v.dayPeriod(_,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return v.dayPeriod(_,{width:"narrow",context:"formatting"});case"bbbb":default:return v.dayPeriod(_,{width:"wide",context:"formatting"})}},B:function(d,g,v){var b=d.getUTCHours(),_;switch(b>=17?_=dayPeriodEnum.evening:b>=12?_=dayPeriodEnum.afternoon:b>=4?_=dayPeriodEnum.morning:_=dayPeriodEnum.night,g){case"B":case"BB":case"BBB":return v.dayPeriod(_,{width:"abbreviated",context:"formatting"});case"BBBBB":return v.dayPeriod(_,{width:"narrow",context:"formatting"});case"BBBB":default:return v.dayPeriod(_,{width:"wide",context:"formatting"})}},h:function(d,g,v){if(g==="ho"){var b=d.getUTCHours()%12;return b===0&&(b=12),v.ordinalNumber(b,{unit:"hour"})}return formatters$3.h(d,g)},H:function(d,g,v){return g==="Ho"?v.ordinalNumber(d.getUTCHours(),{unit:"hour"}):formatters$3.H(d,g)},K:function(d,g,v){var b=d.getUTCHours()%12;return g==="Ko"?v.ordinalNumber(b,{unit:"hour"}):addLeadingZeros(b,g.length)},k:function(d,g,v){var b=d.getUTCHours();return b===0&&(b=24),g==="ko"?v.ordinalNumber(b,{unit:"hour"}):addLeadingZeros(b,g.length)},m:function(d,g,v){return g==="mo"?v.ordinalNumber(d.getUTCMinutes(),{unit:"minute"}):formatters$3.m(d,g)},s:function(d,g,v){return g==="so"?v.ordinalNumber(d.getUTCSeconds(),{unit:"second"}):formatters$3.s(d,g)},S:function(d,g){return formatters$3.S(d,g)},X:function(d,g,v,b){var _=b._originalDate||d,E=_.getTimezoneOffset();if(E===0)return"Z";switch(g){case"X":return formatTimezoneWithOptionalMinutes(E);case"XXXX":case"XX":return formatTimezone(E);case"XXXXX":case"XXX":default:return formatTimezone(E,":")}},x:function(d,g,v,b){var _=b._originalDate||d,E=_.getTimezoneOffset();switch(g){case"x":return formatTimezoneWithOptionalMinutes(E);case"xxxx":case"xx":return formatTimezone(E);case"xxxxx":case"xxx":default:return formatTimezone(E,":")}},O:function(d,g,v,b){var _=b._originalDate||d,E=_.getTimezoneOffset();switch(g){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(E,":");case"OOOO":default:return"GMT"+formatTimezone(E,":")}},z:function(d,g,v,b){var _=b._originalDate||d,E=_.getTimezoneOffset();switch(g){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(E,":");case"zzzz":default:return"GMT"+formatTimezone(E,":")}},t:function(d,g,v,b){var _=b._originalDate||d,E=Math.floor(_.getTime()/1e3);return addLeadingZeros(E,g.length)},T:function(d,g,v,b){var _=b._originalDate||d,E=_.getTime();return addLeadingZeros(E,g.length)}};function formatTimezoneShort(c,d){var g=c>0?"-":"+",v=Math.abs(c),b=Math.floor(v/60),_=v%60;if(_===0)return g+String(b);var E=d||"";return g+String(b)+E+addLeadingZeros(_,2)}function formatTimezoneWithOptionalMinutes(c,d){if(c%60===0){var g=c>0?"-":"+";return g+addLeadingZeros(Math.abs(c)/60,2)}return formatTimezone(c,d)}function formatTimezone(c,d){var g=d||"",v=c>0?"-":"+",b=Math.abs(c),_=addLeadingZeros(Math.floor(b/60),2),E=addLeadingZeros(b%60,2);return v+_+g+E}const formatters$1=formatters;var dateLongFormatter=function(d,g){switch(d){case"P":return g.date({width:"short"});case"PP":return g.date({width:"medium"});case"PPP":return g.date({width:"long"});case"PPPP":default:return g.date({width:"full"})}},timeLongFormatter=function(d,g){switch(d){case"p":return g.time({width:"short"});case"pp":return g.time({width:"medium"});case"ppp":return g.time({width:"long"});case"pppp":default:return g.time({width:"full"})}},dateTimeLongFormatter=function(d,g){var v=d.match(/(P+)(p+)?/)||[],b=v[1],_=v[2];if(!_)return dateLongFormatter(d,g);var E;switch(b){case"P":E=g.dateTime({width:"short"});break;case"PP":E=g.dateTime({width:"medium"});break;case"PPP":E=g.dateTime({width:"long"});break;case"PPPP":default:E=g.dateTime({width:"full"});break}return E.replace("{{date}}",dateLongFormatter(b,g)).replace("{{time}}",timeLongFormatter(_,g))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter};const longFormatters$1=longFormatters;var protectedDayOfYearTokens=["D","DD"],protectedWeekYearTokens=["YY","YYYY"];function isProtectedDayOfYearToken(c){return protectedDayOfYearTokens.indexOf(c)!==-1}function isProtectedWeekYearToken(c){return protectedWeekYearTokens.indexOf(c)!==-1}function throwProtectedError(c,d,g){if(c==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(d,"`) for formatting years to the input `").concat(g,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(c==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(d,"`) for formatting years to the input `").concat(g,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(c==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(d,"`) for formatting days of the month to the input `").concat(g,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(c==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(d,"`) for formatting days of the month to the input `").concat(g,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=function(d,g,v){var b,_=formatDistanceLocale[d];return typeof _=="string"?b=_:g===1?b=_.one:b=_.other.replace("{{count}}",g.toString()),v!=null&&v.addSuffix?v.comparison&&v.comparison>0?"in "+b:b+" ago":b};const formatDistance$1=formatDistance;function buildFormatLongFn(c){return function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=d.width?String(d.width):c.defaultWidth,v=c.formats[g]||c.formats[c.defaultWidth];return v}}var dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})};const formatLong$1=formatLong;var formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=function(d,g,v,b){return formatRelativeLocale[d]};const formatRelative$1=formatRelative;function buildLocalizeFn(c){return function(d,g){var v=g!=null&&g.context?String(g.context):"standalone",b;if(v==="formatting"&&c.formattingValues){var _=c.defaultFormattingWidth||c.defaultWidth,E=g!=null&&g.width?String(g.width):_;b=c.formattingValues[E]||c.formattingValues[_]}else{var R=c.defaultWidth,U=g!=null&&g.width?String(g.width):c.defaultWidth;b=c.values[U]||c.values[R]}var P=c.argumentCallback?c.argumentCallback(d):d;return b[P]}}var eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=function(d,g){var v=Number(d),b=v%100;if(b>20||b<10)switch(b%10){case 1:return v+"st";case 2:return v+"nd";case 3:return v+"rd"}return v+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:function(d){return d-1}}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};const localize$1=localize;function buildMatchFn(c){return function(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=g.width,b=v&&c.matchPatterns[v]||c.matchPatterns[c.defaultMatchWidth],_=d.match(b);if(!_)return null;var E=_[0],R=v&&c.parsePatterns[v]||c.parsePatterns[c.defaultParseWidth],U=Array.isArray(R)?findIndex(R,function(ee){return ee.test(E)}):findKey(R,function(ee){return ee.test(E)}),P;P=c.valueCallback?c.valueCallback(U):U,P=g.valueCallback?g.valueCallback(P):P;var B=d.slice(E.length);return{value:P,rest:B}}}function findKey(c,d){for(var g in c)if(c.hasOwnProperty(g)&&d(c[g]))return g}function findIndex(c,d){for(var g=0;g<c.length;g++)if(d(c[g]))return g}function buildMatchPatternFn(c){return function(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=d.match(c.matchPattern);if(!v)return null;var b=v[0],_=d.match(c.parsePattern);if(!_)return null;var E=c.valueCallback?c.valueCallback(_[0]):_[0];E=g.valueCallback?g.valueCallback(E):E;var R=d.slice(b.length);return{value:E,rest:R}}}var matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:function(d){return parseInt(d,10)}}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:function(d){return d+1}}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})};const match$1=match;var locale={code:"en-US",formatDistance:formatDistance$1,formatLong:formatLong$1,formatRelative:formatRelative$1,localize:localize$1,match:match$1,options:{weekStartsOn:0,firstWeekContainsDate:1}};const defaultLocale=locale;var formattingTokensRegExp$1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp$1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp$1=/^'([^]*?)'?$/,doubleQuoteRegExp$1=/''/g,unescapedLatinCharacterRegExp$1=/[a-zA-Z]/;function format(c,d,g){var v,b,_,E,R,U,P,B,ee,re,ne,j,z,W,O,Y,Q,X;requiredArgs(2,arguments);var H=String(d),G=getDefaultOptions(),ie=(v=(b=g==null?void 0:g.locale)!==null&&b!==void 0?b:G.locale)!==null&&v!==void 0?v:defaultLocale,Ee=toInteger((_=(E=(R=(U=g==null?void 0:g.firstWeekContainsDate)!==null&&U!==void 0?U:g==null||(P=g.locale)===null||P===void 0||(B=P.options)===null||B===void 0?void 0:B.firstWeekContainsDate)!==null&&R!==void 0?R:G.firstWeekContainsDate)!==null&&E!==void 0?E:(ee=G.locale)===null||ee===void 0||(re=ee.options)===null||re===void 0?void 0:re.firstWeekContainsDate)!==null&&_!==void 0?_:1);if(!(Ee>=1&&Ee<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var be=toInteger((ne=(j=(z=(W=g==null?void 0:g.weekStartsOn)!==null&&W!==void 0?W:g==null||(O=g.locale)===null||O===void 0||(Y=O.options)===null||Y===void 0?void 0:Y.weekStartsOn)!==null&&z!==void 0?z:G.weekStartsOn)!==null&&j!==void 0?j:(Q=G.locale)===null||Q===void 0||(X=Q.options)===null||X===void 0?void 0:X.weekStartsOn)!==null&&ne!==void 0?ne:0);if(!(be>=0&&be<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!ie.localize)throw new RangeError("locale must contain localize property");if(!ie.formatLong)throw new RangeError("locale must contain formatLong property");var Ce=toDate(c);if(!isValid$1(Ce))throw new RangeError("Invalid time value");var Oe=getTimezoneOffsetInMilliseconds(Ce),mt=subMilliseconds(Ce,Oe),Tt={firstWeekContainsDate:Ee,weekStartsOn:be,locale:ie,_originalDate:Ce},St=H.match(longFormattingTokensRegExp$1).map(function(ft){var ut=ft[0];if(ut==="p"||ut==="P"){var wt=longFormatters$1[ut];return wt(ft,ie.formatLong)}return ft}).join("").match(formattingTokensRegExp$1).map(function(ft){if(ft==="''")return"'";var ut=ft[0];if(ut==="'")return cleanEscapedString$1(ft);var wt=formatters$1[ut];if(wt)return!(g!=null&&g.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(ft)&&throwProtectedError(ft,d,String(c)),!(g!=null&&g.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(ft)&&throwProtectedError(ft,d,String(c)),wt(mt,ft,ie.localize,Tt);if(ut.match(unescapedLatinCharacterRegExp$1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ut+"`");return ft}).join("");return St}function cleanEscapedString$1(c){var d=c.match(escapedStringRegExp$1);return d?d[1].replace(doubleQuoteRegExp$1,"'"):c}function assign(c,d){if(c==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(c[g]=d[g]);return c}function formatISO(c,d){var g,v;requiredArgs(1,arguments);var b=toDate(c);if(isNaN(b.getTime()))throw new RangeError("Invalid time value");var _=String((g=d==null?void 0:d.format)!==null&&g!==void 0?g:"extended"),E=String((v=d==null?void 0:d.representation)!==null&&v!==void 0?v:"complete");if(_!=="extended"&&_!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(E!=="date"&&E!=="time"&&E!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var R="",U="",P=_==="extended"?"-":"",B=_==="extended"?":":"";if(E!=="time"){var ee=addLeadingZeros(b.getDate(),2),re=addLeadingZeros(b.getMonth()+1,2),ne=addLeadingZeros(b.getFullYear(),4);R="".concat(ne).concat(P).concat(re).concat(P).concat(ee)}if(E!=="date"){var j=b.getTimezoneOffset();if(j!==0){var z=Math.abs(j),W=addLeadingZeros(Math.floor(z/60),2),O=addLeadingZeros(z%60,2),Y=j<0?"+":"-";U="".concat(Y).concat(W,":").concat(O)}else U="Z";var Q=addLeadingZeros(b.getHours(),2),X=addLeadingZeros(b.getMinutes(),2),H=addLeadingZeros(b.getSeconds(),2),G=R===""?"":"T",ie=[Q,X,H].join(B);R="".concat(R).concat(G).concat(ie).concat(U)}return R}function isBefore(c,d){requiredArgs(2,arguments);var g=toDate(c),v=toDate(d);return g.getTime()<v.getTime()}function isEqual(c,d){requiredArgs(2,arguments);var g=toDate(c),v=toDate(d);return g.getTime()===v.getTime()}function _typeof$x(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$x=function(g){return typeof g}:_typeof$x=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$x(c)}function _inherits$v(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$w(c,d)}function _setPrototypeOf$w(c,d){return _setPrototypeOf$w=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$w(c,d)}function _createSuper$v(c){var d=_isNativeReflectConstruct$w();return function(){var v=_getPrototypeOf$v(c),b;if(d){var _=_getPrototypeOf$v(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$v(this,b)}}function _possibleConstructorReturn$v(c,d){return d&&(_typeof$x(d)==="object"||typeof d=="function")?d:_assertThisInitialized$v(c)}function _assertThisInitialized$v(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$v(c){return _getPrototypeOf$v=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$v(c)}function _classCallCheck$w(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$w(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$w(c,d,g){return d&&_defineProperties$w(c.prototype,d),g&&_defineProperties$w(c,g),c}function _defineProperty$v(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var TIMEZONE_UNIT_PRIORITY=10,Setter=function(){function c(){_classCallCheck$w(this,c),_defineProperty$v(this,"subPriority",0)}return _createClass$w(c,[{key:"validate",value:function(g,v){return!0}}]),c}(),ValueSetter=function(c){_inherits$v(g,c);var d=_createSuper$v(g);function g(v,b,_,E,R){var U;return _classCallCheck$w(this,g),U=d.call(this),U.value=v,U.validateValue=b,U.setValue=_,U.priority=E,R&&(U.subPriority=R),U}return _createClass$w(g,[{key:"validate",value:function(b,_){return this.validateValue(b,this.value,_)}},{key:"set",value:function(b,_,E){return this.setValue(b,_,this.value,E)}}]),g}(Setter),DateToSystemTimezoneSetter=function(c){_inherits$v(g,c);var d=_createSuper$v(g);function g(){var v;_classCallCheck$w(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$v(_assertThisInitialized$v(v),"priority",TIMEZONE_UNIT_PRIORITY),_defineProperty$v(_assertThisInitialized$v(v),"subPriority",-1),v}return _createClass$w(g,[{key:"set",value:function(b,_){if(_.timestampIsSet)return b;var E=new Date(0);return E.setFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),E.setHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()),E}}]),g}(Setter);function _classCallCheck$v(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$v(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$v(c,d,g){return d&&_defineProperties$v(c.prototype,d),g&&_defineProperties$v(c,g),c}var Parser=function(){function c(){_classCallCheck$v(this,c)}return _createClass$v(c,[{key:"run",value:function(g,v,b,_){var E=this.parse(g,v,b,_);return E?{setter:new ValueSetter(E.value,this.validate,this.set,this.priority,this.subPriority),rest:E.rest}:null}},{key:"validate",value:function(g,v,b){return!0}}]),c}();function _typeof$w(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$w=function(g){return typeof g}:_typeof$w=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$w(c)}function _classCallCheck$u(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$u(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$u(c,d,g){return d&&_defineProperties$u(c.prototype,d),g&&_defineProperties$u(c,g),c}function _inherits$u(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$v(c,d)}function _setPrototypeOf$v(c,d){return _setPrototypeOf$v=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$v(c,d)}function _createSuper$u(c){var d=_isNativeReflectConstruct$v();return function(){var v=_getPrototypeOf$u(c),b;if(d){var _=_getPrototypeOf$u(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$u(this,b)}}function _possibleConstructorReturn$u(c,d){return d&&(_typeof$w(d)==="object"||typeof d=="function")?d:_assertThisInitialized$u(c)}function _assertThisInitialized$u(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$u(c){return _getPrototypeOf$u=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$u(c)}function _defineProperty$u(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var EraParser=function(c){_inherits$u(g,c);var d=_createSuper$u(g);function g(){var v;_classCallCheck$u(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$u(_assertThisInitialized$u(v),"priority",140),_defineProperty$u(_assertThisInitialized$u(v),"incompatibleTokens",["R","u","t","T"]),v}return _createClass$u(g,[{key:"parse",value:function(b,_,E){switch(_){case"G":case"GG":case"GGG":return E.era(b,{width:"abbreviated"})||E.era(b,{width:"narrow"});case"GGGGG":return E.era(b,{width:"narrow"});case"GGGG":default:return E.era(b,{width:"wide"})||E.era(b,{width:"abbreviated"})||E.era(b,{width:"narrow"})}}},{key:"set",value:function(b,_,E){return _.era=E,b.setUTCFullYear(E,0,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser),numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function mapValue(c,d){return c&&{value:d(c.value),rest:c.rest}}function parseNumericPattern(c,d){var g=d.match(c);return g?{value:parseInt(g[0],10),rest:d.slice(g[0].length)}:null}function parseTimezonePattern(c,d){var g=d.match(c);if(!g)return null;if(g[0]==="Z")return{value:0,rest:d.slice(1)};var v=g[1]==="+"?1:-1,b=g[2]?parseInt(g[2],10):0,_=g[3]?parseInt(g[3],10):0,E=g[5]?parseInt(g[5],10):0;return{value:v*(b*millisecondsInHour+_*millisecondsInMinute+E*millisecondsInSecond),rest:d.slice(g[0].length)}}function parseAnyDigitsSigned(c){return parseNumericPattern(numericPatterns.anyDigitsSigned,c)}function parseNDigits(c,d){switch(c){case 1:return parseNumericPattern(numericPatterns.singleDigit,d);case 2:return parseNumericPattern(numericPatterns.twoDigits,d);case 3:return parseNumericPattern(numericPatterns.threeDigits,d);case 4:return parseNumericPattern(numericPatterns.fourDigits,d);default:return parseNumericPattern(new RegExp("^\\d{1,"+c+"}"),d)}}function parseNDigitsSigned(c,d){switch(c){case 1:return parseNumericPattern(numericPatterns.singleDigitSigned,d);case 2:return parseNumericPattern(numericPatterns.twoDigitsSigned,d);case 3:return parseNumericPattern(numericPatterns.threeDigitsSigned,d);case 4:return parseNumericPattern(numericPatterns.fourDigitsSigned,d);default:return parseNumericPattern(new RegExp("^-?\\d{1,"+c+"}"),d)}}function dayPeriodEnumToHours(c){switch(c){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function normalizeTwoDigitYear(c,d){var g=d>0,v=g?d:1-d,b;if(v<=50)b=c||100;else{var _=v+50,E=Math.floor(_/100)*100,R=c>=_%100;b=c+E-(R?100:0)}return g?b:1-b}function isLeapYearIndex$1(c){return c%400===0||c%4===0&&c%100!==0}function _typeof$v(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$v=function(g){return typeof g}:_typeof$v=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$v(c)}function _classCallCheck$t(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$t(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$t(c,d,g){return d&&_defineProperties$t(c.prototype,d),g&&_defineProperties$t(c,g),c}function _inherits$t(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$u(c,d)}function _setPrototypeOf$u(c,d){return _setPrototypeOf$u=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$u(c,d)}function _createSuper$t(c){var d=_isNativeReflectConstruct$u();return function(){var v=_getPrototypeOf$t(c),b;if(d){var _=_getPrototypeOf$t(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$t(this,b)}}function _possibleConstructorReturn$t(c,d){return d&&(_typeof$v(d)==="object"||typeof d=="function")?d:_assertThisInitialized$t(c)}function _assertThisInitialized$t(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$t(c){return _getPrototypeOf$t=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$t(c)}function _defineProperty$t(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var YearParser=function(c){_inherits$t(g,c);var d=_createSuper$t(g);function g(){var v;_classCallCheck$t(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$t(_assertThisInitialized$t(v),"priority",130),_defineProperty$t(_assertThisInitialized$t(v),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),v}return _createClass$t(g,[{key:"parse",value:function(b,_,E){var R=function(P){return{year:P,isTwoDigitYear:_==="yy"}};switch(_){case"y":return mapValue(parseNDigits(4,b),R);case"yo":return mapValue(E.ordinalNumber(b,{unit:"year"}),R);default:return mapValue(parseNDigits(_.length,b),R)}}},{key:"validate",value:function(b,_){return _.isTwoDigitYear||_.year>0}},{key:"set",value:function(b,_,E){var R=b.getUTCFullYear();if(E.isTwoDigitYear){var U=normalizeTwoDigitYear(E.year,R);return b.setUTCFullYear(U,0,1),b.setUTCHours(0,0,0,0),b}var P=!("era"in _)||_.era===1?E.year:1-E.year;return b.setUTCFullYear(P,0,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$u(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$u=function(g){return typeof g}:_typeof$u=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$u(c)}function _classCallCheck$s(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$s(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$s(c,d,g){return d&&_defineProperties$s(c.prototype,d),g&&_defineProperties$s(c,g),c}function _inherits$s(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$t(c,d)}function _setPrototypeOf$t(c,d){return _setPrototypeOf$t=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$t(c,d)}function _createSuper$s(c){var d=_isNativeReflectConstruct$t();return function(){var v=_getPrototypeOf$s(c),b;if(d){var _=_getPrototypeOf$s(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$s(this,b)}}function _possibleConstructorReturn$s(c,d){return d&&(_typeof$u(d)==="object"||typeof d=="function")?d:_assertThisInitialized$s(c)}function _assertThisInitialized$s(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$s(c){return _getPrototypeOf$s=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$s(c)}function _defineProperty$s(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var LocalWeekYearParser=function(c){_inherits$s(g,c);var d=_createSuper$s(g);function g(){var v;_classCallCheck$s(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$s(_assertThisInitialized$s(v),"priority",130),_defineProperty$s(_assertThisInitialized$s(v),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),v}return _createClass$s(g,[{key:"parse",value:function(b,_,E){var R=function(P){return{year:P,isTwoDigitYear:_==="YY"}};switch(_){case"Y":return mapValue(parseNDigits(4,b),R);case"Yo":return mapValue(E.ordinalNumber(b,{unit:"year"}),R);default:return mapValue(parseNDigits(_.length,b),R)}}},{key:"validate",value:function(b,_){return _.isTwoDigitYear||_.year>0}},{key:"set",value:function(b,_,E,R){var U=getUTCWeekYear(b,R);if(E.isTwoDigitYear){var P=normalizeTwoDigitYear(E.year,U);return b.setUTCFullYear(P,0,R.firstWeekContainsDate),b.setUTCHours(0,0,0,0),startOfUTCWeek(b,R)}var B=!("era"in _)||_.era===1?E.year:1-E.year;return b.setUTCFullYear(B,0,R.firstWeekContainsDate),b.setUTCHours(0,0,0,0),startOfUTCWeek(b,R)}}]),g}(Parser);function _typeof$t(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$t=function(g){return typeof g}:_typeof$t=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$t(c)}function _classCallCheck$r(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$r(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$r(c,d,g){return d&&_defineProperties$r(c.prototype,d),g&&_defineProperties$r(c,g),c}function _inherits$r(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$s(c,d)}function _setPrototypeOf$s(c,d){return _setPrototypeOf$s=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$s(c,d)}function _createSuper$r(c){var d=_isNativeReflectConstruct$s();return function(){var v=_getPrototypeOf$r(c),b;if(d){var _=_getPrototypeOf$r(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$r(this,b)}}function _possibleConstructorReturn$r(c,d){return d&&(_typeof$t(d)==="object"||typeof d=="function")?d:_assertThisInitialized$r(c)}function _assertThisInitialized$r(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$r(c){return _getPrototypeOf$r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$r(c)}function _defineProperty$r(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var ISOWeekYearParser=function(c){_inherits$r(g,c);var d=_createSuper$r(g);function g(){var v;_classCallCheck$r(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$r(_assertThisInitialized$r(v),"priority",130),_defineProperty$r(_assertThisInitialized$r(v),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),v}return _createClass$r(g,[{key:"parse",value:function(b,_){return parseNDigitsSigned(_==="R"?4:_.length,b)}},{key:"set",value:function(b,_,E){var R=new Date(0);return R.setUTCFullYear(E,0,4),R.setUTCHours(0,0,0,0),startOfUTCISOWeek(R)}}]),g}(Parser);function _typeof$s(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$s=function(g){return typeof g}:_typeof$s=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$s(c)}function _classCallCheck$q(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$q(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$q(c,d,g){return d&&_defineProperties$q(c.prototype,d),g&&_defineProperties$q(c,g),c}function _inherits$q(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$r(c,d)}function _setPrototypeOf$r(c,d){return _setPrototypeOf$r=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$r(c,d)}function _createSuper$q(c){var d=_isNativeReflectConstruct$r();return function(){var v=_getPrototypeOf$q(c),b;if(d){var _=_getPrototypeOf$q(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$q(this,b)}}function _possibleConstructorReturn$q(c,d){return d&&(_typeof$s(d)==="object"||typeof d=="function")?d:_assertThisInitialized$q(c)}function _assertThisInitialized$q(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$q(c){return _getPrototypeOf$q=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$q(c)}function _defineProperty$q(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var ExtendedYearParser=function(c){_inherits$q(g,c);var d=_createSuper$q(g);function g(){var v;_classCallCheck$q(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$q(_assertThisInitialized$q(v),"priority",130),_defineProperty$q(_assertThisInitialized$q(v),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),v}return _createClass$q(g,[{key:"parse",value:function(b,_){return parseNDigitsSigned(_==="u"?4:_.length,b)}},{key:"set",value:function(b,_,E){return b.setUTCFullYear(E,0,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$r(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$r=function(g){return typeof g}:_typeof$r=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$r(c)}function _classCallCheck$p(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$p(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$p(c,d,g){return d&&_defineProperties$p(c.prototype,d),g&&_defineProperties$p(c,g),c}function _inherits$p(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$q(c,d)}function _setPrototypeOf$q(c,d){return _setPrototypeOf$q=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$q(c,d)}function _createSuper$p(c){var d=_isNativeReflectConstruct$q();return function(){var v=_getPrototypeOf$p(c),b;if(d){var _=_getPrototypeOf$p(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$p(this,b)}}function _possibleConstructorReturn$p(c,d){return d&&(_typeof$r(d)==="object"||typeof d=="function")?d:_assertThisInitialized$p(c)}function _assertThisInitialized$p(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$p(c){return _getPrototypeOf$p=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$p(c)}function _defineProperty$p(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var QuarterParser=function(c){_inherits$p(g,c);var d=_createSuper$p(g);function g(){var v;_classCallCheck$p(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$p(_assertThisInitialized$p(v),"priority",120),_defineProperty$p(_assertThisInitialized$p(v),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),v}return _createClass$p(g,[{key:"parse",value:function(b,_,E){switch(_){case"Q":case"QQ":return parseNDigits(_.length,b);case"Qo":return E.ordinalNumber(b,{unit:"quarter"});case"QQQ":return E.quarter(b,{width:"abbreviated",context:"formatting"})||E.quarter(b,{width:"narrow",context:"formatting"});case"QQQQQ":return E.quarter(b,{width:"narrow",context:"formatting"});case"QQQQ":default:return E.quarter(b,{width:"wide",context:"formatting"})||E.quarter(b,{width:"abbreviated",context:"formatting"})||E.quarter(b,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(b,_){return _>=1&&_<=4}},{key:"set",value:function(b,_,E){return b.setUTCMonth((E-1)*3,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$q(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$q=function(g){return typeof g}:_typeof$q=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$q(c)}function _classCallCheck$o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$o(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$o(c,d,g){return d&&_defineProperties$o(c.prototype,d),g&&_defineProperties$o(c,g),c}function _inherits$o(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$p(c,d)}function _setPrototypeOf$p(c,d){return _setPrototypeOf$p=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$p(c,d)}function _createSuper$o(c){var d=_isNativeReflectConstruct$p();return function(){var v=_getPrototypeOf$o(c),b;if(d){var _=_getPrototypeOf$o(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$o(this,b)}}function _possibleConstructorReturn$o(c,d){return d&&(_typeof$q(d)==="object"||typeof d=="function")?d:_assertThisInitialized$o(c)}function _assertThisInitialized$o(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$o(c){return _getPrototypeOf$o=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$o(c)}function _defineProperty$o(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var StandAloneQuarterParser=function(c){_inherits$o(g,c);var d=_createSuper$o(g);function g(){var v;_classCallCheck$o(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$o(_assertThisInitialized$o(v),"priority",120),_defineProperty$o(_assertThisInitialized$o(v),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),v}return _createClass$o(g,[{key:"parse",value:function(b,_,E){switch(_){case"q":case"qq":return parseNDigits(_.length,b);case"qo":return E.ordinalNumber(b,{unit:"quarter"});case"qqq":return E.quarter(b,{width:"abbreviated",context:"standalone"})||E.quarter(b,{width:"narrow",context:"standalone"});case"qqqqq":return E.quarter(b,{width:"narrow",context:"standalone"});case"qqqq":default:return E.quarter(b,{width:"wide",context:"standalone"})||E.quarter(b,{width:"abbreviated",context:"standalone"})||E.quarter(b,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(b,_){return _>=1&&_<=4}},{key:"set",value:function(b,_,E){return b.setUTCMonth((E-1)*3,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$p(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$p=function(g){return typeof g}:_typeof$p=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$p(c)}function _classCallCheck$n(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$n(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$n(c,d,g){return d&&_defineProperties$n(c.prototype,d),g&&_defineProperties$n(c,g),c}function _inherits$n(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$o(c,d)}function _setPrototypeOf$o(c,d){return _setPrototypeOf$o=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$o(c,d)}function _createSuper$n(c){var d=_isNativeReflectConstruct$o();return function(){var v=_getPrototypeOf$n(c),b;if(d){var _=_getPrototypeOf$n(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$n(this,b)}}function _possibleConstructorReturn$n(c,d){return d&&(_typeof$p(d)==="object"||typeof d=="function")?d:_assertThisInitialized$n(c)}function _assertThisInitialized$n(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$n(c){return _getPrototypeOf$n=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$n(c)}function _defineProperty$n(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var MonthParser=function(c){_inherits$n(g,c);var d=_createSuper$n(g);function g(){var v;_classCallCheck$n(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$n(_assertThisInitialized$n(v),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),_defineProperty$n(_assertThisInitialized$n(v),"priority",110),v}return _createClass$n(g,[{key:"parse",value:function(b,_,E){var R=function(P){return P-1};switch(_){case"M":return mapValue(parseNumericPattern(numericPatterns.month,b),R);case"MM":return mapValue(parseNDigits(2,b),R);case"Mo":return mapValue(E.ordinalNumber(b,{unit:"month"}),R);case"MMM":return E.month(b,{width:"abbreviated",context:"formatting"})||E.month(b,{width:"narrow",context:"formatting"});case"MMMMM":return E.month(b,{width:"narrow",context:"formatting"});case"MMMM":default:return E.month(b,{width:"wide",context:"formatting"})||E.month(b,{width:"abbreviated",context:"formatting"})||E.month(b,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(b,_){return _>=0&&_<=11}},{key:"set",value:function(b,_,E){return b.setUTCMonth(E,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$o(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$o=function(g){return typeof g}:_typeof$o=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$o(c)}function _classCallCheck$m(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$m(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$m(c,d,g){return d&&_defineProperties$m(c.prototype,d),g&&_defineProperties$m(c,g),c}function _inherits$m(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$n(c,d)}function _setPrototypeOf$n(c,d){return _setPrototypeOf$n=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$n(c,d)}function _createSuper$m(c){var d=_isNativeReflectConstruct$n();return function(){var v=_getPrototypeOf$m(c),b;if(d){var _=_getPrototypeOf$m(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$m(this,b)}}function _possibleConstructorReturn$m(c,d){return d&&(_typeof$o(d)==="object"||typeof d=="function")?d:_assertThisInitialized$m(c)}function _assertThisInitialized$m(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$n(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$m(c){return _getPrototypeOf$m=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$m(c)}function _defineProperty$m(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var StandAloneMonthParser=function(c){_inherits$m(g,c);var d=_createSuper$m(g);function g(){var v;_classCallCheck$m(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$m(_assertThisInitialized$m(v),"priority",110),_defineProperty$m(_assertThisInitialized$m(v),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),v}return _createClass$m(g,[{key:"parse",value:function(b,_,E){var R=function(P){return P-1};switch(_){case"L":return mapValue(parseNumericPattern(numericPatterns.month,b),R);case"LL":return mapValue(parseNDigits(2,b),R);case"Lo":return mapValue(E.ordinalNumber(b,{unit:"month"}),R);case"LLL":return E.month(b,{width:"abbreviated",context:"standalone"})||E.month(b,{width:"narrow",context:"standalone"});case"LLLLL":return E.month(b,{width:"narrow",context:"standalone"});case"LLLL":default:return E.month(b,{width:"wide",context:"standalone"})||E.month(b,{width:"abbreviated",context:"standalone"})||E.month(b,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(b,_){return _>=0&&_<=11}},{key:"set",value:function(b,_,E){return b.setUTCMonth(E,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function setUTCWeek(c,d,g){requiredArgs(2,arguments);var v=toDate(c),b=toInteger(d),_=getUTCWeek(v,g)-b;return v.setUTCDate(v.getUTCDate()-_*7),v}function _typeof$n(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$n=function(g){return typeof g}:_typeof$n=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$n(c)}function _classCallCheck$l(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$l(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$l(c,d,g){return d&&_defineProperties$l(c.prototype,d),g&&_defineProperties$l(c,g),c}function _inherits$l(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$m(c,d)}function _setPrototypeOf$m(c,d){return _setPrototypeOf$m=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$m(c,d)}function _createSuper$l(c){var d=_isNativeReflectConstruct$m();return function(){var v=_getPrototypeOf$l(c),b;if(d){var _=_getPrototypeOf$l(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$l(this,b)}}function _possibleConstructorReturn$l(c,d){return d&&(_typeof$n(d)==="object"||typeof d=="function")?d:_assertThisInitialized$l(c)}function _assertThisInitialized$l(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$l(c){return _getPrototypeOf$l=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$l(c)}function _defineProperty$l(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var LocalWeekParser=function(c){_inherits$l(g,c);var d=_createSuper$l(g);function g(){var v;_classCallCheck$l(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$l(_assertThisInitialized$l(v),"priority",100),_defineProperty$l(_assertThisInitialized$l(v),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),v}return _createClass$l(g,[{key:"parse",value:function(b,_,E){switch(_){case"w":return parseNumericPattern(numericPatterns.week,b);case"wo":return E.ordinalNumber(b,{unit:"week"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=1&&_<=53}},{key:"set",value:function(b,_,E,R){return startOfUTCWeek(setUTCWeek(b,E,R),R)}}]),g}(Parser);function setUTCISOWeek(c,d){requiredArgs(2,arguments);var g=toDate(c),v=toInteger(d),b=getUTCISOWeek(g)-v;return g.setUTCDate(g.getUTCDate()-b*7),g}function _typeof$m(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$m=function(g){return typeof g}:_typeof$m=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$m(c)}function _classCallCheck$k(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$k(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$k(c,d,g){return d&&_defineProperties$k(c.prototype,d),g&&_defineProperties$k(c,g),c}function _inherits$k(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$l(c,d)}function _setPrototypeOf$l(c,d){return _setPrototypeOf$l=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$l(c,d)}function _createSuper$k(c){var d=_isNativeReflectConstruct$l();return function(){var v=_getPrototypeOf$k(c),b;if(d){var _=_getPrototypeOf$k(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$k(this,b)}}function _possibleConstructorReturn$k(c,d){return d&&(_typeof$m(d)==="object"||typeof d=="function")?d:_assertThisInitialized$k(c)}function _assertThisInitialized$k(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$k(c){return _getPrototypeOf$k=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$k(c)}function _defineProperty$k(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var ISOWeekParser=function(c){_inherits$k(g,c);var d=_createSuper$k(g);function g(){var v;_classCallCheck$k(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$k(_assertThisInitialized$k(v),"priority",100),_defineProperty$k(_assertThisInitialized$k(v),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),v}return _createClass$k(g,[{key:"parse",value:function(b,_,E){switch(_){case"I":return parseNumericPattern(numericPatterns.week,b);case"Io":return E.ordinalNumber(b,{unit:"week"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=1&&_<=53}},{key:"set",value:function(b,_,E){return startOfUTCISOWeek(setUTCISOWeek(b,E))}}]),g}(Parser);function _typeof$l(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$l=function(g){return typeof g}:_typeof$l=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$l(c)}function _classCallCheck$j(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$j(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$j(c,d,g){return d&&_defineProperties$j(c.prototype,d),g&&_defineProperties$j(c,g),c}function _inherits$j(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$k(c,d)}function _setPrototypeOf$k(c,d){return _setPrototypeOf$k=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$k(c,d)}function _createSuper$j(c){var d=_isNativeReflectConstruct$k();return function(){var v=_getPrototypeOf$j(c),b;if(d){var _=_getPrototypeOf$j(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$j(this,b)}}function _possibleConstructorReturn$j(c,d){return d&&(_typeof$l(d)==="object"||typeof d=="function")?d:_assertThisInitialized$j(c)}function _assertThisInitialized$j(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$j(c){return _getPrototypeOf$j=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$j(c)}function _defineProperty$j(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31],DateParser=function(c){_inherits$j(g,c);var d=_createSuper$j(g);function g(){var v;_classCallCheck$j(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$j(_assertThisInitialized$j(v),"priority",90),_defineProperty$j(_assertThisInitialized$j(v),"subPriority",1),_defineProperty$j(_assertThisInitialized$j(v),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),v}return _createClass$j(g,[{key:"parse",value:function(b,_,E){switch(_){case"d":return parseNumericPattern(numericPatterns.date,b);case"do":return E.ordinalNumber(b,{unit:"date"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){var E=b.getUTCFullYear(),R=isLeapYearIndex$1(E),U=b.getUTCMonth();return R?_>=1&&_<=DAYS_IN_MONTH_LEAP_YEAR[U]:_>=1&&_<=DAYS_IN_MONTH[U]}},{key:"set",value:function(b,_,E){return b.setUTCDate(E),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$k(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$k=function(g){return typeof g}:_typeof$k=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$k(c)}function _classCallCheck$i(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$i(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$i(c,d,g){return d&&_defineProperties$i(c.prototype,d),g&&_defineProperties$i(c,g),c}function _inherits$i(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$j(c,d)}function _setPrototypeOf$j(c,d){return _setPrototypeOf$j=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$j(c,d)}function _createSuper$i(c){var d=_isNativeReflectConstruct$j();return function(){var v=_getPrototypeOf$i(c),b;if(d){var _=_getPrototypeOf$i(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$i(this,b)}}function _possibleConstructorReturn$i(c,d){return d&&(_typeof$k(d)==="object"||typeof d=="function")?d:_assertThisInitialized$i(c)}function _assertThisInitialized$i(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$j(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$i(c){return _getPrototypeOf$i=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$i(c)}function _defineProperty$i(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var DayOfYearParser=function(c){_inherits$i(g,c);var d=_createSuper$i(g);function g(){var v;_classCallCheck$i(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$i(_assertThisInitialized$i(v),"priority",90),_defineProperty$i(_assertThisInitialized$i(v),"subpriority",1),_defineProperty$i(_assertThisInitialized$i(v),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),v}return _createClass$i(g,[{key:"parse",value:function(b,_,E){switch(_){case"D":case"DD":return parseNumericPattern(numericPatterns.dayOfYear,b);case"Do":return E.ordinalNumber(b,{unit:"date"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){var E=b.getUTCFullYear(),R=isLeapYearIndex$1(E);return R?_>=1&&_<=366:_>=1&&_<=365}},{key:"set",value:function(b,_,E){return b.setUTCMonth(0,E),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function setUTCDay(c,d,g){var v,b,_,E,R,U,P,B;requiredArgs(2,arguments);var ee=getDefaultOptions(),re=toInteger((v=(b=(_=(E=g==null?void 0:g.weekStartsOn)!==null&&E!==void 0?E:g==null||(R=g.locale)===null||R===void 0||(U=R.options)===null||U===void 0?void 0:U.weekStartsOn)!==null&&_!==void 0?_:ee.weekStartsOn)!==null&&b!==void 0?b:(P=ee.locale)===null||P===void 0||(B=P.options)===null||B===void 0?void 0:B.weekStartsOn)!==null&&v!==void 0?v:0);if(!(re>=0&&re<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var ne=toDate(c),j=toInteger(d),z=ne.getUTCDay(),W=j%7,O=(W+7)%7,Y=(O<re?7:0)+j-z;return ne.setUTCDate(ne.getUTCDate()+Y),ne}function _typeof$j(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$j=function(g){return typeof g}:_typeof$j=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$j(c)}function _classCallCheck$h(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$h(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$h(c,d,g){return d&&_defineProperties$h(c.prototype,d),g&&_defineProperties$h(c,g),c}function _inherits$h(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$i(c,d)}function _setPrototypeOf$i(c,d){return _setPrototypeOf$i=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$i(c,d)}function _createSuper$h(c){var d=_isNativeReflectConstruct$i();return function(){var v=_getPrototypeOf$h(c),b;if(d){var _=_getPrototypeOf$h(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$h(this,b)}}function _possibleConstructorReturn$h(c,d){return d&&(_typeof$j(d)==="object"||typeof d=="function")?d:_assertThisInitialized$h(c)}function _assertThisInitialized$h(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$i(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$h(c){return _getPrototypeOf$h=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$h(c)}function _defineProperty$h(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var DayParser=function(c){_inherits$h(g,c);var d=_createSuper$h(g);function g(){var v;_classCallCheck$h(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$h(_assertThisInitialized$h(v),"priority",90),_defineProperty$h(_assertThisInitialized$h(v),"incompatibleTokens",["D","i","e","c","t","T"]),v}return _createClass$h(g,[{key:"parse",value:function(b,_,E){switch(_){case"E":case"EE":case"EEE":return E.day(b,{width:"abbreviated",context:"formatting"})||E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"});case"EEEEE":return E.day(b,{width:"narrow",context:"formatting"});case"EEEEEE":return E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"});case"EEEE":default:return E.day(b,{width:"wide",context:"formatting"})||E.day(b,{width:"abbreviated",context:"formatting"})||E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(b,_){return _>=0&&_<=6}},{key:"set",value:function(b,_,E,R){return b=setUTCDay(b,E,R),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$i(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$i=function(g){return typeof g}:_typeof$i=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$i(c)}function _classCallCheck$g(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$g(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$g(c,d,g){return d&&_defineProperties$g(c.prototype,d),g&&_defineProperties$g(c,g),c}function _inherits$g(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$h(c,d)}function _setPrototypeOf$h(c,d){return _setPrototypeOf$h=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$h(c,d)}function _createSuper$g(c){var d=_isNativeReflectConstruct$h();return function(){var v=_getPrototypeOf$g(c),b;if(d){var _=_getPrototypeOf$g(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$g(this,b)}}function _possibleConstructorReturn$g(c,d){return d&&(_typeof$i(d)==="object"||typeof d=="function")?d:_assertThisInitialized$g(c)}function _assertThisInitialized$g(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$g(c){return _getPrototypeOf$g=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$g(c)}function _defineProperty$g(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var LocalDayParser=function(c){_inherits$g(g,c);var d=_createSuper$g(g);function g(){var v;_classCallCheck$g(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$g(_assertThisInitialized$g(v),"priority",90),_defineProperty$g(_assertThisInitialized$g(v),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),v}return _createClass$g(g,[{key:"parse",value:function(b,_,E,R){var U=function(B){var ee=Math.floor((B-1)/7)*7;return(B+R.weekStartsOn+6)%7+ee};switch(_){case"e":case"ee":return mapValue(parseNDigits(_.length,b),U);case"eo":return mapValue(E.ordinalNumber(b,{unit:"day"}),U);case"eee":return E.day(b,{width:"abbreviated",context:"formatting"})||E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"});case"eeeee":return E.day(b,{width:"narrow",context:"formatting"});case"eeeeee":return E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"});case"eeee":default:return E.day(b,{width:"wide",context:"formatting"})||E.day(b,{width:"abbreviated",context:"formatting"})||E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(b,_){return _>=0&&_<=6}},{key:"set",value:function(b,_,E,R){return b=setUTCDay(b,E,R),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$h(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$h=function(g){return typeof g}:_typeof$h=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$h(c)}function _classCallCheck$f(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$f(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$f(c,d,g){return d&&_defineProperties$f(c.prototype,d),g&&_defineProperties$f(c,g),c}function _inherits$f(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$g(c,d)}function _setPrototypeOf$g(c,d){return _setPrototypeOf$g=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$g(c,d)}function _createSuper$f(c){var d=_isNativeReflectConstruct$g();return function(){var v=_getPrototypeOf$f(c),b;if(d){var _=_getPrototypeOf$f(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$f(this,b)}}function _possibleConstructorReturn$f(c,d){return d&&(_typeof$h(d)==="object"||typeof d=="function")?d:_assertThisInitialized$f(c)}function _assertThisInitialized$f(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$f(c){return _getPrototypeOf$f=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$f(c)}function _defineProperty$f(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var StandAloneLocalDayParser=function(c){_inherits$f(g,c);var d=_createSuper$f(g);function g(){var v;_classCallCheck$f(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$f(_assertThisInitialized$f(v),"priority",90),_defineProperty$f(_assertThisInitialized$f(v),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),v}return _createClass$f(g,[{key:"parse",value:function(b,_,E,R){var U=function(B){var ee=Math.floor((B-1)/7)*7;return(B+R.weekStartsOn+6)%7+ee};switch(_){case"c":case"cc":return mapValue(parseNDigits(_.length,b),U);case"co":return mapValue(E.ordinalNumber(b,{unit:"day"}),U);case"ccc":return E.day(b,{width:"abbreviated",context:"standalone"})||E.day(b,{width:"short",context:"standalone"})||E.day(b,{width:"narrow",context:"standalone"});case"ccccc":return E.day(b,{width:"narrow",context:"standalone"});case"cccccc":return E.day(b,{width:"short",context:"standalone"})||E.day(b,{width:"narrow",context:"standalone"});case"cccc":default:return E.day(b,{width:"wide",context:"standalone"})||E.day(b,{width:"abbreviated",context:"standalone"})||E.day(b,{width:"short",context:"standalone"})||E.day(b,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(b,_){return _>=0&&_<=6}},{key:"set",value:function(b,_,E,R){return b=setUTCDay(b,E,R),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function setUTCISODay(c,d){requiredArgs(2,arguments);var g=toInteger(d);g%7===0&&(g=g-7);var v=1,b=toDate(c),_=b.getUTCDay(),E=g%7,R=(E+7)%7,U=(R<v?7:0)+g-_;return b.setUTCDate(b.getUTCDate()+U),b}function _typeof$g(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$g=function(g){return typeof g}:_typeof$g=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$g(c)}function _classCallCheck$e(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$e(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$e(c,d,g){return d&&_defineProperties$e(c.prototype,d),g&&_defineProperties$e(c,g),c}function _inherits$e(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$f(c,d)}function _setPrototypeOf$f(c,d){return _setPrototypeOf$f=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$f(c,d)}function _createSuper$e(c){var d=_isNativeReflectConstruct$f();return function(){var v=_getPrototypeOf$e(c),b;if(d){var _=_getPrototypeOf$e(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$e(this,b)}}function _possibleConstructorReturn$e(c,d){return d&&(_typeof$g(d)==="object"||typeof d=="function")?d:_assertThisInitialized$e(c)}function _assertThisInitialized$e(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$e(c){return _getPrototypeOf$e=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$e(c)}function _defineProperty$e(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var ISODayParser=function(c){_inherits$e(g,c);var d=_createSuper$e(g);function g(){var v;_classCallCheck$e(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$e(_assertThisInitialized$e(v),"priority",90),_defineProperty$e(_assertThisInitialized$e(v),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),v}return _createClass$e(g,[{key:"parse",value:function(b,_,E){var R=function(P){return P===0?7:P};switch(_){case"i":case"ii":return parseNDigits(_.length,b);case"io":return E.ordinalNumber(b,{unit:"day"});case"iii":return mapValue(E.day(b,{width:"abbreviated",context:"formatting"})||E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"}),R);case"iiiii":return mapValue(E.day(b,{width:"narrow",context:"formatting"}),R);case"iiiiii":return mapValue(E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"}),R);case"iiii":default:return mapValue(E.day(b,{width:"wide",context:"formatting"})||E.day(b,{width:"abbreviated",context:"formatting"})||E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"}),R)}}},{key:"validate",value:function(b,_){return _>=1&&_<=7}},{key:"set",value:function(b,_,E){return b=setUTCISODay(b,E),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$f(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$f=function(g){return typeof g}:_typeof$f=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$f(c)}function _classCallCheck$d(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$d(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$d(c,d,g){return d&&_defineProperties$d(c.prototype,d),g&&_defineProperties$d(c,g),c}function _inherits$d(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$e(c,d)}function _setPrototypeOf$e(c,d){return _setPrototypeOf$e=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$e(c,d)}function _createSuper$d(c){var d=_isNativeReflectConstruct$e();return function(){var v=_getPrototypeOf$d(c),b;if(d){var _=_getPrototypeOf$d(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$d(this,b)}}function _possibleConstructorReturn$d(c,d){return d&&(_typeof$f(d)==="object"||typeof d=="function")?d:_assertThisInitialized$d(c)}function _assertThisInitialized$d(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$d(c){return _getPrototypeOf$d=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$d(c)}function _defineProperty$d(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var AMPMParser=function(c){_inherits$d(g,c);var d=_createSuper$d(g);function g(){var v;_classCallCheck$d(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$d(_assertThisInitialized$d(v),"priority",80),_defineProperty$d(_assertThisInitialized$d(v),"incompatibleTokens",["b","B","H","k","t","T"]),v}return _createClass$d(g,[{key:"parse",value:function(b,_,E){switch(_){case"a":case"aa":case"aaa":return E.dayPeriod(b,{width:"abbreviated",context:"formatting"})||E.dayPeriod(b,{width:"narrow",context:"formatting"});case"aaaaa":return E.dayPeriod(b,{width:"narrow",context:"formatting"});case"aaaa":default:return E.dayPeriod(b,{width:"wide",context:"formatting"})||E.dayPeriod(b,{width:"abbreviated",context:"formatting"})||E.dayPeriod(b,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(b,_,E){return b.setUTCHours(dayPeriodEnumToHours(E),0,0,0),b}}]),g}(Parser);function _typeof$e(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$e=function(g){return typeof g}:_typeof$e=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$e(c)}function _classCallCheck$c(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$c(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$c(c,d,g){return d&&_defineProperties$c(c.prototype,d),g&&_defineProperties$c(c,g),c}function _inherits$c(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$d(c,d)}function _setPrototypeOf$d(c,d){return _setPrototypeOf$d=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$d(c,d)}function _createSuper$c(c){var d=_isNativeReflectConstruct$d();return function(){var v=_getPrototypeOf$c(c),b;if(d){var _=_getPrototypeOf$c(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$c(this,b)}}function _possibleConstructorReturn$c(c,d){return d&&(_typeof$e(d)==="object"||typeof d=="function")?d:_assertThisInitialized$c(c)}function _assertThisInitialized$c(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$c(c){return _getPrototypeOf$c=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$c(c)}function _defineProperty$c(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var AMPMMidnightParser=function(c){_inherits$c(g,c);var d=_createSuper$c(g);function g(){var v;_classCallCheck$c(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$c(_assertThisInitialized$c(v),"priority",80),_defineProperty$c(_assertThisInitialized$c(v),"incompatibleTokens",["a","B","H","k","t","T"]),v}return _createClass$c(g,[{key:"parse",value:function(b,_,E){switch(_){case"b":case"bb":case"bbb":return E.dayPeriod(b,{width:"abbreviated",context:"formatting"})||E.dayPeriod(b,{width:"narrow",context:"formatting"});case"bbbbb":return E.dayPeriod(b,{width:"narrow",context:"formatting"});case"bbbb":default:return E.dayPeriod(b,{width:"wide",context:"formatting"})||E.dayPeriod(b,{width:"abbreviated",context:"formatting"})||E.dayPeriod(b,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(b,_,E){return b.setUTCHours(dayPeriodEnumToHours(E),0,0,0),b}}]),g}(Parser);function _typeof$d(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$d=function(g){return typeof g}:_typeof$d=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$d(c)}function _classCallCheck$b(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$b(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$b(c,d,g){return d&&_defineProperties$b(c.prototype,d),g&&_defineProperties$b(c,g),c}function _inherits$b(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$c(c,d)}function _setPrototypeOf$c(c,d){return _setPrototypeOf$c=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$c(c,d)}function _createSuper$b(c){var d=_isNativeReflectConstruct$c();return function(){var v=_getPrototypeOf$b(c),b;if(d){var _=_getPrototypeOf$b(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$b(this,b)}}function _possibleConstructorReturn$b(c,d){return d&&(_typeof$d(d)==="object"||typeof d=="function")?d:_assertThisInitialized$b(c)}function _assertThisInitialized$b(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$b(c){return _getPrototypeOf$b=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$b(c)}function _defineProperty$b(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var DayPeriodParser=function(c){_inherits$b(g,c);var d=_createSuper$b(g);function g(){var v;_classCallCheck$b(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$b(_assertThisInitialized$b(v),"priority",80),_defineProperty$b(_assertThisInitialized$b(v),"incompatibleTokens",["a","b","t","T"]),v}return _createClass$b(g,[{key:"parse",value:function(b,_,E){switch(_){case"B":case"BB":case"BBB":return E.dayPeriod(b,{width:"abbreviated",context:"formatting"})||E.dayPeriod(b,{width:"narrow",context:"formatting"});case"BBBBB":return E.dayPeriod(b,{width:"narrow",context:"formatting"});case"BBBB":default:return E.dayPeriod(b,{width:"wide",context:"formatting"})||E.dayPeriod(b,{width:"abbreviated",context:"formatting"})||E.dayPeriod(b,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(b,_,E){return b.setUTCHours(dayPeriodEnumToHours(E),0,0,0),b}}]),g}(Parser);function _typeof$c(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$c=function(g){return typeof g}:_typeof$c=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$c(c)}function _classCallCheck$a(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$a(c,d,g){return d&&_defineProperties$a(c.prototype,d),g&&_defineProperties$a(c,g),c}function _inherits$a(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$b(c,d)}function _setPrototypeOf$b(c,d){return _setPrototypeOf$b=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$b(c,d)}function _createSuper$a(c){var d=_isNativeReflectConstruct$b();return function(){var v=_getPrototypeOf$a(c),b;if(d){var _=_getPrototypeOf$a(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$a(this,b)}}function _possibleConstructorReturn$a(c,d){return d&&(_typeof$c(d)==="object"||typeof d=="function")?d:_assertThisInitialized$a(c)}function _assertThisInitialized$a(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$a(c){return _getPrototypeOf$a=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$a(c)}function _defineProperty$a(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var Hour1to12Parser=function(c){_inherits$a(g,c);var d=_createSuper$a(g);function g(){var v;_classCallCheck$a(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$a(_assertThisInitialized$a(v),"priority",70),_defineProperty$a(_assertThisInitialized$a(v),"incompatibleTokens",["H","K","k","t","T"]),v}return _createClass$a(g,[{key:"parse",value:function(b,_,E){switch(_){case"h":return parseNumericPattern(numericPatterns.hour12h,b);case"ho":return E.ordinalNumber(b,{unit:"hour"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=1&&_<=12}},{key:"set",value:function(b,_,E){var R=b.getUTCHours()>=12;return R&&E<12?b.setUTCHours(E+12,0,0,0):!R&&E===12?b.setUTCHours(0,0,0,0):b.setUTCHours(E,0,0,0),b}}]),g}(Parser);function _typeof$b(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$b=function(g){return typeof g}:_typeof$b=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$b(c)}function _classCallCheck$9(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$9(c,d,g){return d&&_defineProperties$9(c.prototype,d),g&&_defineProperties$9(c,g),c}function _inherits$9(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$a(c,d)}function _setPrototypeOf$a(c,d){return _setPrototypeOf$a=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$a(c,d)}function _createSuper$9(c){var d=_isNativeReflectConstruct$a();return function(){var v=_getPrototypeOf$9(c),b;if(d){var _=_getPrototypeOf$9(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$9(this,b)}}function _possibleConstructorReturn$9(c,d){return d&&(_typeof$b(d)==="object"||typeof d=="function")?d:_assertThisInitialized$9(c)}function _assertThisInitialized$9(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$a(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$9(c){return _getPrototypeOf$9=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$9(c)}function _defineProperty$9(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var Hour0to23Parser=function(c){_inherits$9(g,c);var d=_createSuper$9(g);function g(){var v;_classCallCheck$9(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$9(_assertThisInitialized$9(v),"priority",70),_defineProperty$9(_assertThisInitialized$9(v),"incompatibleTokens",["a","b","h","K","k","t","T"]),v}return _createClass$9(g,[{key:"parse",value:function(b,_,E){switch(_){case"H":return parseNumericPattern(numericPatterns.hour23h,b);case"Ho":return E.ordinalNumber(b,{unit:"hour"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=0&&_<=23}},{key:"set",value:function(b,_,E){return b.setUTCHours(E,0,0,0),b}}]),g}(Parser);function _typeof$a(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$a=function(g){return typeof g}:_typeof$a=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$a(c)}function _classCallCheck$8(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$8(c,d,g){return d&&_defineProperties$8(c.prototype,d),g&&_defineProperties$8(c,g),c}function _inherits$8(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$9(c,d)}function _setPrototypeOf$9(c,d){return _setPrototypeOf$9=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$9(c,d)}function _createSuper$8(c){var d=_isNativeReflectConstruct$9();return function(){var v=_getPrototypeOf$8(c),b;if(d){var _=_getPrototypeOf$8(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$8(this,b)}}function _possibleConstructorReturn$8(c,d){return d&&(_typeof$a(d)==="object"||typeof d=="function")?d:_assertThisInitialized$8(c)}function _assertThisInitialized$8(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$8(c){return _getPrototypeOf$8=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$8(c)}function _defineProperty$8(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var Hour0To11Parser=function(c){_inherits$8(g,c);var d=_createSuper$8(g);function g(){var v;_classCallCheck$8(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$8(_assertThisInitialized$8(v),"priority",70),_defineProperty$8(_assertThisInitialized$8(v),"incompatibleTokens",["h","H","k","t","T"]),v}return _createClass$8(g,[{key:"parse",value:function(b,_,E){switch(_){case"K":return parseNumericPattern(numericPatterns.hour11h,b);case"Ko":return E.ordinalNumber(b,{unit:"hour"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=0&&_<=11}},{key:"set",value:function(b,_,E){var R=b.getUTCHours()>=12;return R&&E<12?b.setUTCHours(E+12,0,0,0):b.setUTCHours(E,0,0,0),b}}]),g}(Parser);function _typeof$9(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$9=function(g){return typeof g}:_typeof$9=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$9(c)}function _classCallCheck$7(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$7(c,d,g){return d&&_defineProperties$7(c.prototype,d),g&&_defineProperties$7(c,g),c}function _inherits$7(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$8(c,d)}function _setPrototypeOf$8(c,d){return _setPrototypeOf$8=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$8(c,d)}function _createSuper$7(c){var d=_isNativeReflectConstruct$8();return function(){var v=_getPrototypeOf$7(c),b;if(d){var _=_getPrototypeOf$7(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$7(this,b)}}function _possibleConstructorReturn$7(c,d){return d&&(_typeof$9(d)==="object"||typeof d=="function")?d:_assertThisInitialized$7(c)}function _assertThisInitialized$7(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$7(c){return _getPrototypeOf$7=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$7(c)}function _defineProperty$7(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var Hour1To24Parser=function(c){_inherits$7(g,c);var d=_createSuper$7(g);function g(){var v;_classCallCheck$7(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$7(_assertThisInitialized$7(v),"priority",70),_defineProperty$7(_assertThisInitialized$7(v),"incompatibleTokens",["a","b","h","H","K","t","T"]),v}return _createClass$7(g,[{key:"parse",value:function(b,_,E){switch(_){case"k":return parseNumericPattern(numericPatterns.hour24h,b);case"ko":return E.ordinalNumber(b,{unit:"hour"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=1&&_<=24}},{key:"set",value:function(b,_,E){var R=E<=24?E%24:E;return b.setUTCHours(R,0,0,0),b}}]),g}(Parser);function _typeof$8(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$8=function(g){return typeof g}:_typeof$8=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$8(c)}function _classCallCheck$6(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$6(c,d,g){return d&&_defineProperties$6(c.prototype,d),g&&_defineProperties$6(c,g),c}function _inherits$6(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$7(c,d)}function _setPrototypeOf$7(c,d){return _setPrototypeOf$7=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$7(c,d)}function _createSuper$6(c){var d=_isNativeReflectConstruct$7();return function(){var v=_getPrototypeOf$6(c),b;if(d){var _=_getPrototypeOf$6(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$6(this,b)}}function _possibleConstructorReturn$6(c,d){return d&&(_typeof$8(d)==="object"||typeof d=="function")?d:_assertThisInitialized$6(c)}function _assertThisInitialized$6(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$6(c){return _getPrototypeOf$6=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$6(c)}function _defineProperty$6(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var MinuteParser=function(c){_inherits$6(g,c);var d=_createSuper$6(g);function g(){var v;_classCallCheck$6(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$6(_assertThisInitialized$6(v),"priority",60),_defineProperty$6(_assertThisInitialized$6(v),"incompatibleTokens",["t","T"]),v}return _createClass$6(g,[{key:"parse",value:function(b,_,E){switch(_){case"m":return parseNumericPattern(numericPatterns.minute,b);case"mo":return E.ordinalNumber(b,{unit:"minute"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=0&&_<=59}},{key:"set",value:function(b,_,E){return b.setUTCMinutes(E,0,0),b}}]),g}(Parser);function _typeof$7(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$7=function(g){return typeof g}:_typeof$7=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$7(c)}function _classCallCheck$5(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$5(c,d,g){return d&&_defineProperties$5(c.prototype,d),g&&_defineProperties$5(c,g),c}function _inherits$5(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$6(c,d)}function _setPrototypeOf$6(c,d){return _setPrototypeOf$6=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$6(c,d)}function _createSuper$5(c){var d=_isNativeReflectConstruct$6();return function(){var v=_getPrototypeOf$5(c),b;if(d){var _=_getPrototypeOf$5(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$5(this,b)}}function _possibleConstructorReturn$5(c,d){return d&&(_typeof$7(d)==="object"||typeof d=="function")?d:_assertThisInitialized$5(c)}function _assertThisInitialized$5(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$6(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$5(c){return _getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$5(c)}function _defineProperty$5(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var SecondParser=function(c){_inherits$5(g,c);var d=_createSuper$5(g);function g(){var v;_classCallCheck$5(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$5(_assertThisInitialized$5(v),"priority",50),_defineProperty$5(_assertThisInitialized$5(v),"incompatibleTokens",["t","T"]),v}return _createClass$5(g,[{key:"parse",value:function(b,_,E){switch(_){case"s":return parseNumericPattern(numericPatterns.second,b);case"so":return E.ordinalNumber(b,{unit:"second"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=0&&_<=59}},{key:"set",value:function(b,_,E){return b.setUTCSeconds(E,0),b}}]),g}(Parser);function _typeof$6(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(g){return typeof g}:_typeof$6=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$6(c)}function _classCallCheck$4(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$4(c,d,g){return d&&_defineProperties$4(c.prototype,d),g&&_defineProperties$4(c,g),c}function _inherits$4(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$5(c,d)}function _setPrototypeOf$5(c,d){return _setPrototypeOf$5=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$5(c,d)}function _createSuper$4(c){var d=_isNativeReflectConstruct$5();return function(){var v=_getPrototypeOf$4(c),b;if(d){var _=_getPrototypeOf$4(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$4(this,b)}}function _possibleConstructorReturn$4(c,d){return d&&(_typeof$6(d)==="object"||typeof d=="function")?d:_assertThisInitialized$4(c)}function _assertThisInitialized$4(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$4(c){return _getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$4(c)}function _defineProperty$4(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var FractionOfSecondParser=function(c){_inherits$4(g,c);var d=_createSuper$4(g);function g(){var v;_classCallCheck$4(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$4(_assertThisInitialized$4(v),"priority",30),_defineProperty$4(_assertThisInitialized$4(v),"incompatibleTokens",["t","T"]),v}return _createClass$4(g,[{key:"parse",value:function(b,_){var E=function(U){return Math.floor(U*Math.pow(10,-_.length+3))};return mapValue(parseNDigits(_.length,b),E)}},{key:"set",value:function(b,_,E){return b.setUTCMilliseconds(E),b}}]),g}(Parser);function _typeof$5(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(g){return typeof g}:_typeof$5=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$5(c)}function _classCallCheck$3(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$3(c,d,g){return d&&_defineProperties$3(c.prototype,d),g&&_defineProperties$3(c,g),c}function _inherits$3(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$4(c,d)}function _setPrototypeOf$4(c,d){return _setPrototypeOf$4=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$4(c,d)}function _createSuper$3(c){var d=_isNativeReflectConstruct$4();return function(){var v=_getPrototypeOf$3(c),b;if(d){var _=_getPrototypeOf$3(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$3(this,b)}}function _possibleConstructorReturn$3(c,d){return d&&(_typeof$5(d)==="object"||typeof d=="function")?d:_assertThisInitialized$3(c)}function _assertThisInitialized$3(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$3(c){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$3(c)}function _defineProperty$3(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var ISOTimezoneWithZParser=function(c){_inherits$3(g,c);var d=_createSuper$3(g);function g(){var v;_classCallCheck$3(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$3(_assertThisInitialized$3(v),"priority",10),_defineProperty$3(_assertThisInitialized$3(v),"incompatibleTokens",["t","T","x"]),v}return _createClass$3(g,[{key:"parse",value:function(b,_){switch(_){case"X":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,b);case"XX":return parseTimezonePattern(timezonePatterns.basic,b);case"XXXX":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,b);case"XXXXX":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,b);case"XXX":default:return parseTimezonePattern(timezonePatterns.extended,b)}}},{key:"set",value:function(b,_,E){return _.timestampIsSet?b:new Date(b.getTime()-E)}}]),g}(Parser);function _typeof$4(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(g){return typeof g}:_typeof$4=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$4(c)}function _classCallCheck$2(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$2(c,d,g){return d&&_defineProperties$2(c.prototype,d),g&&_defineProperties$2(c,g),c}function _inherits$2(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$3(c,d)}function _setPrototypeOf$3(c,d){return _setPrototypeOf$3=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$3(c,d)}function _createSuper$2(c){var d=_isNativeReflectConstruct$3();return function(){var v=_getPrototypeOf$2(c),b;if(d){var _=_getPrototypeOf$2(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$2(this,b)}}function _possibleConstructorReturn$2(c,d){return d&&(_typeof$4(d)==="object"||typeof d=="function")?d:_assertThisInitialized$2(c)}function _assertThisInitialized$2(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$2(c){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$2(c)}function _defineProperty$2(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var ISOTimezoneParser=function(c){_inherits$2(g,c);var d=_createSuper$2(g);function g(){var v;_classCallCheck$2(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$2(_assertThisInitialized$2(v),"priority",10),_defineProperty$2(_assertThisInitialized$2(v),"incompatibleTokens",["t","T","X"]),v}return _createClass$2(g,[{key:"parse",value:function(b,_){switch(_){case"x":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,b);case"xx":return parseTimezonePattern(timezonePatterns.basic,b);case"xxxx":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,b);case"xxxxx":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,b);case"xxx":default:return parseTimezonePattern(timezonePatterns.extended,b)}}},{key:"set",value:function(b,_,E){return _.timestampIsSet?b:new Date(b.getTime()-E)}}]),g}(Parser);function _typeof$3(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(g){return typeof g}:_typeof$3=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$3(c)}function _classCallCheck$1(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$1(c,d,g){return d&&_defineProperties$1(c.prototype,d),g&&_defineProperties$1(c,g),c}function _inherits$1(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$2(c,d)}function _setPrototypeOf$2(c,d){return _setPrototypeOf$2=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$2(c,d)}function _createSuper$1(c){var d=_isNativeReflectConstruct$2();return function(){var v=_getPrototypeOf$1(c),b;if(d){var _=_getPrototypeOf$1(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$1(this,b)}}function _possibleConstructorReturn$1(c,d){return d&&(_typeof$3(d)==="object"||typeof d=="function")?d:_assertThisInitialized$1(c)}function _assertThisInitialized$1(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$1(c){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$1(c)}function _defineProperty$1(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var TimestampSecondsParser=function(c){_inherits$1(g,c);var d=_createSuper$1(g);function g(){var v;_classCallCheck$1(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$1(_assertThisInitialized$1(v),"priority",40),_defineProperty$1(_assertThisInitialized$1(v),"incompatibleTokens","*"),v}return _createClass$1(g,[{key:"parse",value:function(b){return parseAnyDigitsSigned(b)}},{key:"set",value:function(b,_,E){return[new Date(E*1e3),{timestampIsSet:!0}]}}]),g}(Parser);function _typeof$2(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(g){return typeof g}:_typeof$2=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$2(c)}function _classCallCheck(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass(c,d,g){return d&&_defineProperties(c.prototype,d),g&&_defineProperties(c,g),c}function _inherits(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$1(c,d)}function _setPrototypeOf$1(c,d){return _setPrototypeOf$1=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$1(c,d)}function _createSuper(c){var d=_isNativeReflectConstruct$1();return function(){var v=_getPrototypeOf(c),b;if(d){var _=_getPrototypeOf(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn(this,b)}}function _possibleConstructorReturn(c,d){return d&&(_typeof$2(d)==="object"||typeof d=="function")?d:_assertThisInitialized(c)}function _assertThisInitialized(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf(c){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf(c)}function _defineProperty(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var TimestampMillisecondsParser=function(c){_inherits(g,c);var d=_createSuper(g);function g(){var v;_classCallCheck(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty(_assertThisInitialized(v),"priority",20),_defineProperty(_assertThisInitialized(v),"incompatibleTokens","*"),v}return _createClass(g,[{key:"parse",value:function(b){return parseAnyDigitsSigned(b)}},{key:"set",value:function(b,_,E){return[new Date(E),{timestampIsSet:!0}]}}]),g}(Parser),parsers={G:new EraParser,y:new YearParser,Y:new LocalWeekYearParser,R:new ISOWeekYearParser,u:new ExtendedYearParser,Q:new QuarterParser,q:new StandAloneQuarterParser,M:new MonthParser,L:new StandAloneMonthParser,w:new LocalWeekParser,I:new ISOWeekParser,d:new DateParser,D:new DayOfYearParser,E:new DayParser,e:new LocalDayParser,c:new StandAloneLocalDayParser,i:new ISODayParser,a:new AMPMParser,b:new AMPMMidnightParser,B:new DayPeriodParser,h:new Hour1to12Parser,H:new Hour0to23Parser,K:new Hour0To11Parser,k:new Hour1To24Parser,m:new MinuteParser,s:new SecondParser,S:new FractionOfSecondParser,X:new ISOTimezoneWithZParser,x:new ISOTimezoneParser,t:new TimestampSecondsParser,T:new TimestampMillisecondsParser};function _typeof$1(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(g){return typeof g}:_typeof$1=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$1(c)}function _createForOfIteratorHelper(c,d){var g;if(typeof Symbol>"u"||c[Symbol.iterator]==null){if(Array.isArray(c)||(g=_unsupportedIterableToArray$1(c))||d&&c&&typeof c.length=="number"){g&&(c=g);var v=0,b=function(){};return{s:b,n:function(){return v>=c.length?{done:!0}:{done:!1,value:c[v++]}},e:function(P){throw P},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,E=!1,R;return{s:function(){g=c[Symbol.iterator]()},n:function(){var P=g.next();return _=P.done,P},e:function(P){E=!0,R=P},f:function(){try{!_&&g.return!=null&&g.return()}finally{if(E)throw R}}}}function _unsupportedIterableToArray$1(c,d){if(!!c){if(typeof c=="string")return _arrayLikeToArray$1(c,d);var g=Object.prototype.toString.call(c).slice(8,-1);if(g==="Object"&&c.constructor&&(g=c.constructor.name),g==="Map"||g==="Set")return Array.from(c);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return _arrayLikeToArray$1(c,d)}}function _arrayLikeToArray$1(c,d){(d==null||d>c.length)&&(d=c.length);for(var g=0,v=new Array(d);g<d;g++)v[g]=c[g];return v}var formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,notWhitespaceRegExp=/\S/,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function parse(c,d,g,v){var b,_,E,R,U,P,B,ee,re,ne,j,z,W,O,Y,Q,X,H;requiredArgs(3,arguments);var G=String(c),ie=String(d),Ee=getDefaultOptions(),be=(b=(_=v==null?void 0:v.locale)!==null&&_!==void 0?_:Ee.locale)!==null&&b!==void 0?b:defaultLocale;if(!be.match)throw new RangeError("locale must contain match property");var Ce=toInteger((E=(R=(U=(P=v==null?void 0:v.firstWeekContainsDate)!==null&&P!==void 0?P:v==null||(B=v.locale)===null||B===void 0||(ee=B.options)===null||ee===void 0?void 0:ee.firstWeekContainsDate)!==null&&U!==void 0?U:Ee.firstWeekContainsDate)!==null&&R!==void 0?R:(re=Ee.locale)===null||re===void 0||(ne=re.options)===null||ne===void 0?void 0:ne.firstWeekContainsDate)!==null&&E!==void 0?E:1);if(!(Ce>=1&&Ce<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Oe=toInteger((j=(z=(W=(O=v==null?void 0:v.weekStartsOn)!==null&&O!==void 0?O:v==null||(Y=v.locale)===null||Y===void 0||(Q=Y.options)===null||Q===void 0?void 0:Q.weekStartsOn)!==null&&W!==void 0?W:Ee.weekStartsOn)!==null&&z!==void 0?z:(X=Ee.locale)===null||X===void 0||(H=X.options)===null||H===void 0?void 0:H.weekStartsOn)!==null&&j!==void 0?j:0);if(!(Oe>=0&&Oe<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(ie==="")return G===""?toDate(g):new Date(NaN);var mt={firstWeekContainsDate:Ce,weekStartsOn:Oe,locale:be},Tt=[new DateToSystemTimezoneSetter],St=ie.match(longFormattingTokensRegExp).map(function(Qe){var lt=Qe[0];if(lt in longFormatters$1){var _t=longFormatters$1[lt];return _t(Qe,be.formatLong)}return Qe}).join("").match(formattingTokensRegExp),ft=[],ut=_createForOfIteratorHelper(St),wt;try{var Et=function(){var lt=wt.value;!(v!=null&&v.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(lt)&&throwProtectedError(lt,ie,c),!(v!=null&&v.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(lt)&&throwProtectedError(lt,ie,c);var _t=lt[0],Nt=parsers[_t];if(Nt){var dt=Nt.incompatibleTokens;if(Array.isArray(dt)){var xt=ft.find(function(Vt){return dt.includes(Vt.token)||Vt.token===_t});if(xt)throw new RangeError("The format string mustn't contain `".concat(xt.fullToken,"` and `").concat(lt,"` at the same time"))}else if(Nt.incompatibleTokens==="*"&&ft.length>0)throw new RangeError("The format string mustn't contain `".concat(lt,"` and any other token at the same time"));ft.push({token:_t,fullToken:lt});var Lt=Nt.run(G,lt,be.match,mt);if(!Lt)return{v:new Date(NaN)};Tt.push(Lt.setter),G=Lt.rest}else{if(_t.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_t+"`");if(lt==="''"?lt="'":_t==="'"&&(lt=cleanEscapedString(lt)),G.indexOf(lt)===0)G=G.slice(lt.length);else return{v:new Date(NaN)}}};for(ut.s();!(wt=ut.n()).done;){var Pt=Et();if(_typeof$1(Pt)==="object")return Pt.v}}catch(Qe){ut.e(Qe)}finally{ut.f()}if(G.length>0&&notWhitespaceRegExp.test(G))return new Date(NaN);var Mt=Tt.map(function(Qe){return Qe.priority}).sort(function(Qe,lt){return lt-Qe}).filter(function(Qe,lt,_t){return _t.indexOf(Qe)===lt}).map(function(Qe){return Tt.filter(function(lt){return lt.priority===Qe}).sort(function(lt,_t){return _t.subPriority-lt.subPriority})}).map(function(Qe){return Qe[0]}),Bt=toDate(g);if(isNaN(Bt.getTime()))return new Date(NaN);var et=subMilliseconds(Bt,getTimezoneOffsetInMilliseconds(Bt)),Pe={},oe=_createForOfIteratorHelper(Mt),Ye;try{for(oe.s();!(Ye=oe.n()).done;){var tt=Ye.value;if(!tt.validate(et,mt))return new Date(NaN);var Ze=tt.set(et,Pe,mt);Array.isArray(Ze)?(et=Ze[0],assign(Pe,Ze[1])):et=Ze}}catch(Qe){oe.e(Qe)}finally{oe.f()}return et}function cleanEscapedString(c){return c.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}function parseISO(c,d){var g;requiredArgs(1,arguments);var v=toInteger((g=d==null?void 0:d.additionalDigits)!==null&&g!==void 0?g:2);if(v!==2&&v!==1&&v!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof c=="string"||Object.prototype.toString.call(c)==="[object String]"))return new Date(NaN);var b=splitDateString(c),_;if(b.date){var E=parseYear(b.date,v);_=parseDate(E.restDateString,E.year)}if(!_||isNaN(_.getTime()))return new Date(NaN);var R=_.getTime(),U=0,P;if(b.time&&(U=parseTime(b.time),isNaN(U)))return new Date(NaN);if(b.timezone){if(P=parseTimezone(b.timezone),isNaN(P))return new Date(NaN)}else{var B=new Date(R+U),ee=new Date(0);return ee.setFullYear(B.getUTCFullYear(),B.getUTCMonth(),B.getUTCDate()),ee.setHours(B.getUTCHours(),B.getUTCMinutes(),B.getUTCSeconds(),B.getUTCMilliseconds()),ee}return new Date(R+U+P)}var patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function splitDateString(c){var d={},g=c.split(patterns.dateTimeDelimiter),v;if(g.length>2)return d;if(/:/.test(g[0])?v=g[0]:(d.date=g[0],v=g[1],patterns.timeZoneDelimiter.test(d.date)&&(d.date=c.split(patterns.timeZoneDelimiter)[0],v=c.substr(d.date.length,c.length))),v){var b=patterns.timezone.exec(v);b?(d.time=v.replace(b[1],""),d.timezone=b[1]):d.time=v}return d}function parseYear(c,d){var g=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+d)+"})|(\\d{2}|[+-]\\d{"+(2+d)+"})$)"),v=c.match(g);if(!v)return{year:NaN,restDateString:""};var b=v[1]?parseInt(v[1]):null,_=v[2]?parseInt(v[2]):null;return{year:_===null?b:_*100,restDateString:c.slice((v[1]||v[2]).length)}}function parseDate(c,d){if(d===null)return new Date(NaN);var g=c.match(dateRegex);if(!g)return new Date(NaN);var v=!!g[4],b=parseDateUnit(g[1]),_=parseDateUnit(g[2])-1,E=parseDateUnit(g[3]),R=parseDateUnit(g[4]),U=parseDateUnit(g[5])-1;if(v)return validateWeekDate(d,R,U)?dayOfISOWeekYear(d,R,U):new Date(NaN);var P=new Date(0);return!validateDate(d,_,E)||!validateDayOfYearDate(d,b)?new Date(NaN):(P.setUTCFullYear(d,_,Math.max(b,E)),P)}function parseDateUnit(c){return c?parseInt(c):1}function parseTime(c){var d=c.match(timeRegex);if(!d)return NaN;var g=parseTimeUnit(d[1]),v=parseTimeUnit(d[2]),b=parseTimeUnit(d[3]);return validateTime(g,v,b)?g*millisecondsInHour+v*millisecondsInMinute+b*1e3:NaN}function parseTimeUnit(c){return c&&parseFloat(c.replace(",","."))||0}function parseTimezone(c){if(c==="Z")return 0;var d=c.match(timezoneRegex);if(!d)return 0;var g=d[1]==="+"?-1:1,v=parseInt(d[2]),b=d[3]&&parseInt(d[3])||0;return validateTimezone(v,b)?g*(v*millisecondsInHour+b*millisecondsInMinute):NaN}function dayOfISOWeekYear(c,d,g){var v=new Date(0);v.setUTCFullYear(c,0,4);var b=v.getUTCDay()||7,_=(d-1)*7+g+1-b;return v.setUTCDate(v.getUTCDate()+_),v}var daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(c){return c%400===0||c%4===0&&c%100!==0}function validateDate(c,d,g){return d>=0&&d<=11&&g>=1&&g<=(daysInMonths[d]||(isLeapYearIndex(c)?29:28))}function validateDayOfYearDate(c,d){return d>=1&&d<=(isLeapYearIndex(c)?366:365)}function validateWeekDate(c,d,g){return d>=1&&d<=53&&g>=0&&g<=6}function validateTime(c,d,g){return c===24?d===0&&g===0:g>=0&&g<60&&d>=0&&d<60&&c>=0&&c<25}function validateTimezone(c,d){return d>=0&&d<=59}function formatDateISOToLocal(c){if(!c)return;const d=parseISO(c);return format(d,"P")}const matchDatePattern=c=>{const d=["P","yyyyMMddHHmm"];for(let g=0;g<d.length;g+=1){const v=parse(c,d[g],new Date);if(isValid$1(v))return v}return c};function formatDateLocalToISO(c){if(!c)return;const d=matchDatePattern(c);return d instanceof Date?formatISO(d,{representation:"date"}):d}function formatStringToDate(c){if(!c)return;const d=c.substring(4,6),g=c.substring(6,8),v=c.substring(0,4);return`${d}/${g}/${v}`}function dateToISO(c){if(c)return c.toISOString().split("T")[0]}function formatPhoneNumber(c){if(!c)return;const g=c.replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return g?`${g[1]}-${g[2]}-${g[3]}`:c}function ccdaDatetimeToISO(c){if(!!c)return parseISO(`${c.substring(0,8)} ${c.substring(8)}`)}function displayDateTimeasString(c){if(!c)return"";try{return format(new Date(c),"MMMM dd, yyyy HH:mm:ss").replace("00:00:00","")}catch{return""}}const getMedicationValue=c=>{const d=fp.get("resource.medicationCodeableConcept.coding.0",c);return d?`${d.system}_${d.code}`:""},getDateValue=c=>{var g;const d=new Date((g=c.dateLocal)!=null?g:0);return dateToISO(d)},getDateTimeValue=c=>{var g;const d=new Date((g=c.date)!=null?g:0);return c.resourceType==="MedicationRequest"?d.getTime()-1:d.getTime()},sortMedHistory=c=>{if(c.length===0)return c;const d=(b,_)=>[b,b.resourceType,_],g=fp.pipe(fp.groupBy(getDateValue),fp.mapValues(b=>fp.orderBy(getDateTimeValue,"asc",b)),fp.mapValues(b=>b.map(d)),fp.mapValues(sortMedHistoryForASingleDate))(c);return fp.orderBy(b=>new Date(b).getTime(),"desc",fp.keys(g)).map(b=>g[b]).reduce(fp.concat)};function sortMedHistoryForASingleDate(c=[]){const d=new Map,g=c.map(([v,b,_])=>{const E=getMedicationValue(v);if(b==="MedicationDispense")d.set(E,_);else if(d.has(E)&&b==="MedicationRequest"){const R=d.get(E);return{model:v,type:b,sortOrder:R-.1}}return{model:v,type:b,sortOrder:_}});return fp.orderBy(fp.get("sortOrder"),"desc",g).map(fp.get("model"))}const Details=({data:c,hideEmpty:d=!0,onEdit:g,documentButton:v})=>React.createElement("div",{className:"ctw-rounded-lg ctw-bg-bg-lighter"},React.createElement("dl",{className:"ctw-space-y-2 ctw-p-4"},React.createElement("div",{className:"ctw-flex ctw-justify-between ctw-space-x-2 ctw-text-sm ctw-uppercase ctw-text-content-light"},React.createElement("div",{className:"ctw-title-container"},"Details"),React.createElement("div",{className:"ctw-flex"},v,g&&React.createElement("button",{type:"button",className:"ctw-btn-default ctw-flex ctw-space-x-2 ctw-align-middle",onClick:g},React.createElement(PencilIcon$1,{className:"ctw-h-4 ctw-w-4"}),React.createElement("span",null,"Update")))),c.filter(b=>!d||b.value||b.value===0).map(({label:b,value:_})=>React.createElement("div",{key:b,className:"ctw-text-gray-900 ctw-flex ctw-items-baseline"},React.createElement("dt",{className:"ctw-w-1/3 ctw-flex-shrink-0 ctw-font-medium"},b),React.createElement("dd",{className:"ctw-m-0"},_)))));try{Details.displayName="Details",Details.__docgenInfo={description:"",displayName:"Details",props:{hideEmpty:{defaultValue:{value:"true"},description:"",name:"hideEmpty",required:!1,type:{name:"boolean"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"CollapsibleDataListEntry[]"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"(() => void)"}},documentButton:{defaultValue:null,description:"",name:"documentButton",required:!1,type:{name:"ReactNode"}}}}}catch{}const collapsibleDataList="",CollapsibleDataList=({id:c,date:d,title:g,subtitle:v,data:b,hideEmpty:_,documentButton:E})=>{const[R,U]=react.exports.useState(!1);return React.createElement("div",{className:"ctw-collapsible-data-list ctw-space-y-1"},React.createElement(DetailSummary,{date:d,title:g,subtitle:v,isDetailShown:R,setIsDetailShown:U}),R&&React.createElement(Details,{data:b,hideEmpty:_,documentButton:E}))},DetailSummary=({date:c,title:d,subtitle:g,isDetailShown:v,setIsDetailShown:b})=>React.createElement("button",{type:"button","aria-label":"details",onClick:()=>b(!v),className:"ctw-w-full ctw-cursor-pointer ctw-border-none ctw-bg-transparent ctw-p-0 ctw-text-base ctw-outline-none"},React.createElement("div",{className:"ctw-flex ctw-items-center ctw-justify-between ctw-rounded-lg ctw-bg-bg-white ctw-p-3 ctw-text-left ctw-outline ctw-outline-1 ctw-outline-bg-dark"},React.createElement("div",{className:"ctw-flex ctw-space-x-3"},c&&React.createElement("div",{className:"ctw-min-w-[5rem]"},c),React.createElement("div",null,React.createElement("div",{className:"ctw-font-semibold ctw-text-content-black"},d),React.createElement("div",{className:"ctw-text-content-light"},g))),React.createElement("div",{className:"ctw-justify-right ctw-flex"},React.createElement(ChevronRightIcon$3,{className:cx("ctw-h-5 ctw-w-5 ctw-text-primary-dark",{"ctw-rotate-90":v})}))));try{CollapsibleDataList.displayName="CollapsibleDataList",CollapsibleDataList.__docgenInfo={description:"",displayName:"CollapsibleDataList",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},date:{defaultValue:null,description:"",name:"date",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},subtitle:{defaultValue:null,description:"",name:"subtitle",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"CollapsibleDataListEntry[]"}},hideEmpty:{defaultValue:null,description:"",name:"hideEmpty",required:!1,type:{name:"boolean"}},documentButton:{defaultValue:null,description:"",name:"documentButton",required:!1,type:{name:"ReactNode"}}}}}catch{}const CollapsibleDataListStack=({entries:c,limit:d})=>{const[g,v]=react.exports.useState(!d||c.length<=d);return React.createElement("div",{className:"ctw-space-y-3"},React.createElement("div",{className:"ctw-text-base ctw-font-medium ctw-uppercase ctw-text-content-light"},"History"),c.map(b=>React.createElement("div",{key:`${b.id}`},React.createElement(CollapsibleDataList,{id:b.id,date:b.date,title:b.title,subtitle:b.subtitle,data:b.data,hideEmpty:b.hideEmpty,documentButton:b.documentButton}))),!g&&React.createElement("div",{className:"ctw-text-center"},React.createElement("button",{type:"button",className:"ctw-link-primary",onClick:()=>v(!0)},"Load ",c.length-d," More")))};try{CollapsibleDataListStack.displayName="CollapsibleDataListStack",CollapsibleDataListStack.__docgenInfo={description:"",displayName:"CollapsibleDataListStack",props:{entries:{defaultValue:null,description:"",name:"entries",required:!0,type:{name:"CollapsibleDataListStackEntries"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}}}}}catch{}const isBundle=c=>c.resourceType==="Bundle";function getResources(c,d){var v;const g=[];return isBundle(c)&&((v=c.entry)==null||v.forEach(b=>{var _;((_=b.resource)==null?void 0:_.resourceType)===d&&g.push(b.resource)})),g}function bundleToResourceMap(c){var g;const d={};return isBundle(c)&&((g=c.entry)==null||g.forEach(v=>{const{resource:b}=v;if(!b)return;const _=`${b.resourceType}/${b.id}`;d[_]=b})),d}function getIncludedResources(c){var g;const d={};return isBundle(c)&&((g=c.entry)==null||g.forEach(v=>{const{resource:b,search:_}=v;if(!b||(_==null?void 0:_.mode)!=="include")return;const E=`${b.resourceType}/${b.id}`;d[E]=b})),d}function getIncludedBasics(c){const d={};return!isBundle(c)||!c.entry||c.entry.forEach(g=>{var E,R,U;const{resource:v,search:b}=g;if(!v||(b==null?void 0:b.mode)!=="include"||v.resourceType!=="Basic")return;const _=lodash.exports.last((R=(E=v.subject)==null?void 0:E.reference)==null?void 0:R.split("/"));!_||(d[_]||(d[_]=[]),(U=d[_])==null||U.push(v))}),d}function getMergedIncludedResources(c){return Object.assign({},...c.map(d=>getIncludedResources(d)))}function findReference(c,d,g,v){var b;if(!!v){if(v.startsWith("#"))return lodash.exports.find(d,{id:v.substring(1),resourceType:c});if(((b=g==null?void 0:g[v])==null?void 0:b.resourceType)===c)return g[v]}}const SYSTEM_BASIC_RESOURCE_TYPE="http://terminology.hl7.org/CodeSystem/basic-resource-type",SYSTEM_CONDITION_CATEGORY="http://terminology.hl7.org/CodeSystem/condition-category",SYSTEM_CONDITION_CLINICAL="http://terminology.hl7.org/CodeSystem/condition-clinical",SYSTEM_CONDITION_VERIFICATION_STATUS="http://terminology.hl7.org/CodeSystem/condition-ver-status",SYSTEM_PROVENANCE_ACTIVITY_TYPE="http://terminology.hl7.org/3.1.0/CodeSystem-v3-DataOperation.html",SYSTEM_PROVENANCE_AGENT_TYPE="http://terminology.hl7.org/CodeSystem/provenance-participant-type",SYSTEM_CCS="https://www.hcup-us.ahrq.gov/toolssoftware/ccsr/dxccsr.jsp",SYSTEM_ICD9="http://hl7.org/fhir/sid/icd-9",SYSTEM_ICD9_CM="http://hl7.org/fhir/sid/icd-9-cm",SYSTEM_ICD10="http://hl7.org/fhir/sid/icd-10",SYSTEM_ICD10_CM="http://hl7.org/fhir/sid/icd-10-cm",SYSTEM_RXNORM="http://www.nlm.nih.gov/research/umls/rxnorm",SYSTEM_SNOMED="http://snomed.info/sct",SYSTEM_SUMMARY="https://zusapi.com/summary",SYSTEM_ZUS_LENS="https://zusapi.com/lens",SYSTEM_ZUS_OWNER="https://zusapi.com/accesscontrol/owner",SYSTEM_ZUS_PROFILE_ACTION="https://zusapi.com/profile/action",SYSTEM_ZUS_THIRD_PARTY="https://zusapi.com/thirdparty/source",SYSTEM_ZUS_UNIVERSAL_ID="https://zusapi.com/fhir/identifier/universal-id",SYSTEM_ZUS_UPI_RECORD_TYPE="https://zusapi.com/fhir/tag/upi-record-type",SYSTEM_ENRICHMENT="https://zusapi.com/terminology/enrichment",LENS_EXTENSION_MEDICATION_LAST_FILL_DATE="https://zusapi.com/lens/extension/medicationLastFillDate",LENS_EXTENSION_MEDICATION_LAST_PRESCRIBED_DATE="https://zusapi.com/lens/extension/medicationLastPrescribedDate",LENS_EXTENSION_MEDICATION_QUANTITY="https://zusapi.com/lens/extension/medicationQuantity",LENS_EXTENSION_MEDICATION_DAYS_SUPPLY="https://zusapi.com/lens/extension/medicationDaysSupply",LENS_EXTENSION_MEDICATION_REFILLS="https://zusapi.com/lens/extension/medicationRefills",LENS_EXTENSION_MEDICATION_LAST_PRESCRIBER="https://zusapi.com/lens/extension/medicationLastPrescriber",LENS_EXTENSION_AGGREGATED_FROM="https://zusapi.com/lens/extension/aggregatedFrom",CTW_EXTENSION_LENS_AGGREGATED_FROM="https://zusapi.com/ctw-component-library/extension/lensAggregatedFrom",medStatusDisplays={active:"Currently taking","entered-in-error":"Never taken","not-taken":"Prescribed, not taken",completed:"No longer taking","on-hold":"On hold",intended:"Intend to take",stopped:"No longer taking"};function getMedicationCodeableConcept(c,d){var v;if(c.medicationCodeableConcept)return c.medicationCodeableConcept;const g=findReference("Medication",c.contained,d,(v=c.medicationReference)==null?void 0:v.reference);return g==null?void 0:g.code}function getIdentifyingRxNormCode(c,d){var g;return(g=getIdentifyingRxNormCoding(c,d))==null?void 0:g.code}function getIdentifyingRxNormCoding(c,d){var b;const g=getMedicationCodeableConcept(c,d),v=["ActiveIngredient","BrandName"];return(b=g==null?void 0:g.coding)==null?void 0:b.find(_=>_.system===SYSTEM_RXNORM&&(_.extension===void 0||!_.extension.some(E=>E.url===SYSTEM_ENRICHMENT&&E.valueString&&v.includes(E.valueString))))}function getPerformingOrganization(c,d){var v,b,_;let g;switch(c.resourceType){case"MedicationAdministration":case"MedicationDispense":g=(b=(v=c.performer)==null?void 0:v[0])==null?void 0:b.actor;break;case"MedicationRequest":g=c.performer||((_=c.dispenseRequest)==null?void 0:_.performer);break;case"MedicationStatement":default:return}if((g==null?void 0:g.reference)&&g.type==="Organization")return findReference("Organization",c.contained,d,g.reference)}function patientStatus(c){return lodash.exports.get(medStatusDisplays,c,"")}const MAX_COUNT=250,THIRD_PARTY_TAGS=[`${SYSTEM_ZUS_THIRD_PARTY}|surescripts`,`${SYSTEM_ZUS_THIRD_PARTY}|commonwell`,`${SYSTEM_ZUS_THIRD_PARTY}|elation`],LENS_TAGS=[`${SYSTEM_ZUS_LENS}|ActiveMedications`,`${SYSTEM_ZUS_LENS}|ChronicConditions`],UPI_TAGS=[`${SYSTEM_ZUS_UPI_RECORD_TYPE}|universal`],SUMMARY_TAGS=[`${SYSTEM_SUMMARY}|Common`];async function searchAllRecords(c,d,g){var B;const{patientUPID:v,_count:b,..._}=g!=null?g:{},R=typeof b>"u"?MAX_COUNT:b,U=await d.fhirClient.search({resourceType:c,searchParams:{..._,_count:R,...patientSearchParams(c,v)}}),P=getResources(U,c);return{bundle:U,total:(B=U.total)!=null?B:0,resources:P}}async function searchBuilderRecords(c,d,g){const v=[...THIRD_PARTY_TAGS,...LENS_TAGS,...SUMMARY_TAGS,...UPI_TAGS],b=`${SYSTEM_ZUS_OWNER}|builder/${d.builderId}`,_=mergeParams(g,{_tag:[b],"_tag:not":v});return searchAllRecords(c,d,_)}async function searchLensRecords(c,d,g,v){const b=[`${SYSTEM_ZUS_LENS}|${g}`,`${SYSTEM_ZUS_OWNER}|builder/${d.builderId}`],_=mergeParams(v,{_tag:b});return searchAllRecords(c,d,_)}async function searchSummaryRecords(c,d,g){const v=[...SUMMARY_TAGS,`${SYSTEM_ZUS_OWNER}|builder/${d.builderId}`],b=mergeParams(g,{_tag:v});return searchAllRecords(c,d,b)}async function searchCommonRecords(c,d,g){const v=mergeParams(g,{"_tag:not":[...LENS_TAGS,...SUMMARY_TAGS,...UPI_TAGS]});return searchAllRecords(c,d,v)}function patientSearchParams(c,d){if(!d)return{};const g=`${SYSTEM_ZUS_UNIVERSAL_ID}|${d}`;switch(c){case"Coverage":return{"beneficiary.identifier":g};case"Condition":case"Encounter":case"MedicationAdministration":case"MedicationDispense":case"MedicationRequest":case"MedicationStatement":return{"patient.identifier":g};case"Patient":return{identifier:g};default:throw new Error(`Unhandled patient search for resource type: ${c}`)}}function mergeParams(c,d){return lodash.exports.mergeWith(c,d,(g,v)=>Array.isArray(g)?g.concat(v):void 0)}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let c=0;c<256;++c)byteToHex.push((c+256).toString(16).slice(1));function unsafeStringify(c,d=0){return(byteToHex[c[d+0]]+byteToHex[c[d+1]]+byteToHex[c[d+2]]+byteToHex[c[d+3]]+"-"+byteToHex[c[d+4]]+byteToHex[c[d+5]]+"-"+byteToHex[c[d+6]]+byteToHex[c[d+7]]+"-"+byteToHex[c[d+8]]+byteToHex[c[d+9]]+"-"+byteToHex[c[d+10]]+byteToHex[c[d+11]]+byteToHex[c[d+12]]+byteToHex[c[d+13]]+byteToHex[c[d+14]]+byteToHex[c[d+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(c,d,g){if(native.randomUUID&&!d&&!c)return native.randomUUID();c=c||{};const v=c.random||(c.rng||rng)();if(v[6]=v[6]&15|64,v[8]=v[8]&63|128,d){g=g||0;for(let b=0;b<16;++b)d[g+b]=v[b];return d}return unsafeStringify(v)}function isOperationOutcome(c){return typeof c=="object"&&c!==null?"issue"in c:!1}const codeableConceptLabel=c=>{var d,g,v,b,_,E,R;return(R=(E=(v=c==null?void 0:c.text)!=null?v:(g=(d=c==null?void 0:c.coding)==null?void 0:d[0])==null?void 0:g.display)!=null?E:(_=(b=c==null?void 0:c.coding)==null?void 0:b[0])==null?void 0:_.code)!=null?R:""};function findCoding(c,d){return lodash.exports.find(d==null?void 0:d.coding,{system:c})}function findCodingWithEnrichment(c,d){return lodash.exports.find(d==null?void 0:d.coding,{system:c,extension:[{url:SYSTEM_ENRICHMENT}]})}const findCodingByOrderOfPreference=(c,d)=>{for(let g=0;g<c.length;g+=1){const v=c[g];if(v.checkForEnrichment){const b=findCodingWithEnrichment(v.system,d);if(b)return b}else{const b=findCoding(v.system,d);if(b)return b}}};class OperationOutcomeIssueModel{constructor(d){Dr(this,"resource");this.resource=d}get display(){return codeableConceptLabel(this.resource.details)||this.resource.diagnostics||`${this.resource.code} error`}get severity(){return this.resource.severity}}class OperationOutcomeModel{constructor(d){Dr(this,"resource");this.resource=d}get display(){return this.resource.issue.filter(g=>g.severity!=="warning").map(g=>{let v="";return g.location&&g.location.length>0&&(v+=`${g.location[0]} -- `),`${v}${g.diagnostics}`}).join("; ")}get issues(){return this.resource.issue.map(d=>new OperationOutcomeIssueModel(d))}get resourceType(){return this.resource.resourceType}}function isFhirError(c){return typeof c=="object"&&c!==null?"response"in c&&"config"in c:!1}const fhirErrorResponse=(c,d)=>{const{data:g,status:v}=d.response;let b="";return isOperationOutcome(g)&&(b=new OperationOutcomeModel(g).display),{title:c,status:v,statusText:b}};class FHIRModel{constructor(d,g,v){Dr(this,"resource");Dr(this,"includedResources");Dr(this,"revIncludes");this.resource=d,this.includedResources=g,this.revIncludes=v}get id(){return this.resource.id||""}get isSummaryResource(){var d;return lodash.exports.find((d=this.resource.meta)==null?void 0:d.tag,{system:SYSTEM_SUMMARY})!==void 0}get resourceType(){return this.resource.resourceType}getBasicResourceByAction(d){return lodash.exports.find(this.revIncludes,{resourceType:"Basic",meta:{tag:[{system:SYSTEM_ZUS_PROFILE_ACTION,code:d}]}})}toString(){return`new ${this.constructor.name}(${JSON.stringify(this.resource,null,2)}
)`}}class PractitionerModel extends FHIRModel{get fullName(){var v,b;const d=(v=this.resource.name)==null?void 0:v[0];return[(b=d==null?void 0:d.given)!=null&&b.length?d.given[0]:"",d==null?void 0:d.family].filter(_=>_).join(" ")}}const getPractitioner=async(c,d)=>{let g=[];try{const{resources:v}=await searchBuilderRecords("Practitioner",d,{_id:c});g=v}catch(v){throw new Error(`Failed fetching practitioner with an id of: ${c}. ${v}`)}if(!g[0])throw new Error(`No practitioner found with an id of: ${c}`);return new PractitionerModel(g[0])};async function getUsersPractitionerReference(c){const d=claimsPractitionerId(c.authToken);if(d){const g=await getPractitioner(d,c);return{reference:`Practitioner/${d}`,type:"Practitioner",display:g.fullName}}return{display:claimsAuthEmail(c.authToken)}}const ASSEMBLER_CODING={system:SYSTEM_PROVENANCE_AGENT_TYPE,code:"assembler",display:"Assembler"},CREATE_CODING={coding:[{system:SYSTEM_PROVENANCE_ACTIVITY_TYPE,code:"CREATE",display:"create"}]},UPDATE_CODING={coding:[{system:SYSTEM_PROVENANCE_ACTIVITY_TYPE,code:"UPDATE",display:"revise"}]},createProvenance=async(c,d,g)=>{var R;const{fhirClient:v}=g,b=claimsBuilderName(g.authToken),_=parseInt(((R=d.meta)==null?void 0:R.versionId)||"0",10),E={resourceType:"Provenance",agent:[{who:await getUsersPractitionerReference(g),onBehalfOf:{display:b}},{type:{coding:[ASSEMBLER_CODING]},who:{display:"Zus Health"}}],recorded:new Date().toISOString(),target:[{reference:`${d.resourceType}/${d.id}/_history/${_}`,type:d.resourceType}]};return E.activity=c==="CREATE"?CREATE_CODING:UPDATE_CODING,v.create({resourceType:"Provenance",body:E})};async function createOrEditFhirResource(c,d){const{fhirClient:g}=d,v=c;try{if(c.id){const _=await g.update({resourceType:c.resourceType,id:c.id,body:omitEmptyArrays(c)});return isFhirError(_)||await createProvenance("UPDATE",_,d),_}const b=await g.create({resourceType:c.resourceType,body:omitEmptyArrays(c)});return isFhirError(b)||(v.id=b.id),b}catch(b){return b}}async function createFhirResourceWithProvenance(c,d){const{fhirClient:g}=d,v=claimsBuilderName(d.authToken),b=c.id||v4(),_=v4(),E={resourceType:"Bundle",type:"transaction",entry:[{request:{method:"POST",url:c.resourceType},fullUrl:b,resource:c},{request:{method:"POST",url:"Provenance"},fullUrl:_,resource:{resourceType:"Provenance",activity:CREATE_CODING,agent:[{who:await getUsersPractitionerReference(d),onBehalfOf:{display:v}},{type:{coding:[ASSEMBLER_CODING]},who:{display:"Zus Health"}}],recorded:new Date().toISOString(),target:[{reference:`${c.resourceType}/${b}`,type:c.resourceType}]}}]};return g.transaction({body:omitEmptyArrays({...E,type:"transaction"})})}async function deleteMetaTags(c,d,g){const v={resourceType:"Parameters",parameter:[{name:"meta",valueMeta:{tag:g}}]},{fhirClient:b}=d;await b.request(`${c.resourceType}/${c.id}/$meta-delete`,{method:"POST",body:JSON.stringify(v),options:{headers:{"content-type":"application/json"}}})}const QUERY_KEY_PATIENT_CONDITIONS="patientConditions",QUERY_KEY_OTHER_PROVIDER_CONDITIONS="otherProviderConditions",QUERY_KEY_CONDITION_HISTORY="conditionHistory",QUERY_KEY_PATIENT="patient",QUERY_KEY_PATIENT_MEDICATIONS="medications",QUERY_KEY_PATIENT_BUILDER_MEDICATIONS="builder-medications",QUERY_KEY_PATIENTS_LIST="patients-list",QUERY_KEY_MEDICATION_HISTORY="medication-history",editPatient=async(c,d,g)=>{const v=await g(),b=lodash.exports.cloneDeep(c.resource);b.gender=d.gender,b.birthDate=dateToISO(d.dateOfBirth),b.name=[{use:"official",family:d.lastName,given:[d.firstName]}],b.address=[{line:[d.address],city:d.city,state:d.state,postalCode:d.zipCode}];const _=[];d.phone&&_.push({system:"phone",value:d.phone}),d.email&&_.push({system:"email",value:d.email}),b.telecom=_;const E=await createOrEditFhirResource(b,v);return await queryClient.invalidateQueries([QUERY_KEY_PATIENT]),E};class OrganizationModel extends FHIRModel{get name(){return this.resource.name}}const MaritalStatuses=[{text:"Annulled",code:"A"},{text:"Divorced",code:"D"},{text:"Interlocutory",code:"I"},{text:"Legally Separated",code:"L"},{text:"Married",code:"M"},{text:"Polygamous",code:"P"},{text:"Never Married",code:"S"},{text:"Domestic Partner",code:"T"},{text:"unmarried",code:"U"},{text:"Widowed",code:"W"}];class PatientModel extends FHIRModel{get active(){return this.resource.active}get contact(){return this.resource.contact}get dob(){return formatDateISOToLocal(this.resource.birthDate)}get age(){if(!this.resource.birthDate)return;const d=parseISO(this.resource.birthDate);return differenceInYears(new Date,d)}get gender(){return this.resource.gender}get maritalStatus(){var v,b,_;const d=(_=(b=(v=this.resource.maritalStatus)==null?void 0:v.coding)==null?void 0:b[0])==null?void 0:_.code,g=MaritalStatuses.find(E=>E.code===d);return g==null?void 0:g.text}get organization(){var g;const d=findReference("Organization",this.resource.contained,this.includedResources,(g=this.resource.managingOrganization)==null?void 0:g.reference);if(d)return new OrganizationModel(d,this.includedResources)}get use(){return this.bestName.use}get UPID(){var g;const d=(g=lodash.exports.find(this.resource.identifier,{system:SYSTEM_ZUS_UNIVERSAL_ID}))==null?void 0:g.value;if(!d)throw Error(`Patient with ID ${this.resource.identifier} does not have a UPID`);return d}getPhoneNumber(d){const g={system:"phone"};d&&(g.use=d);const v=lodash.exports.find(this.resource.telecom,g);return formatPhoneNumber(v==null?void 0:v.value)}get phoneNumber(){return this.getPhoneNumber()}get email(){var d;return(d=lodash.exports.find(this.resource.telecom,{system:"email"}))==null?void 0:d.value}get bestHomeAddress(){return lodash.exports.find(this.resource.address,{use:"home"})||lodash.exports.find(this.resource.address,d=>!d.use)}get homeAddress(){return lodash.exports.cloneDeep(this.bestHomeAddress)}get bestName(){return(!this.resource.name||this.resource.name.length===0)&&(this.resource.name=[{use:"official"}]),lodash.exports.find(this.resource.name,{use:"official"})||lodash.exports.find(this.resource.name,{use:"usual"})||this.resource.name[0]||{}}get additionalNames(){if(this.bestName.given&&this.bestName.given.length>1){const[,...d]=this.bestName.given;return d.join(" ")}}get display(){return[this.firstName,this.lastName].filter(d=>d).join(" ")}get firstName(){var d;return((d=this.bestName.given)==null?void 0:d[0])||""}get fullName(){return[this.lastName,this.firstName].filter(d=>d).join(", ")}get lastName(){return this.bestName.family}get nickname(){var g;const d=lodash.exports.find(this.resource.name,{use:"nickname"});return(g=d==null?void 0:d.given)==null?void 0:g.join(" ")}get prefix(){var d;return(d=this.bestName.prefix)==null?void 0:d.join(" ")}get suffix(){var d;return(d=this.bestName.suffix)==null?void 0:d.join(" ")}}async function getBuilderFhirPatient(c,d,g,v){let b=[],_;try{const E=await searchBuilderRecords("Patient",c,{...v,identifier:`${g}|${d}`,_count:1,_include:"Patient:organization"});b=E.resources,_=E.bundle}catch(E){throw errorResponse("Failed fetching patient",E)}if(!b[0])throw errorResponse(`Failed fetching patient information for patient from patientID ${d} with system ${g}`);return new PatientModel(b[0],getIncludedResources(_))}async function getBuilderPatientsList(c,d=[]){const[g,v,b]=d,_=parseInt(`${v!=null?v:"0"}`,10)*parseInt(`${g!=null?g:"1"}`,10),E=lodash.exports.pickBy({_count:g,_total:"accurate",_offset:_,name:b});try{const{total:R,resources:U}=await searchBuilderRecords("Patient",c,E);return{searchParams:E,patients:U.map(P=>new PatientModel(P)),total:R}}catch(R){throw errorResponse("Failed fetching patients",R)}}const PATIENT_STALE_TIME=1e3*60*5,CTWPatientContext=react.exports.createContext({patientID:"",systemURL:""});function PatientProvider({children:c,patientUPID:d,patientID:g,systemURL:v,tags:b,onPatientSave:_}){const E=react.exports.useMemo(()=>({patientID:d||g,systemURL:d?SYSTEM_ZUS_UNIVERSAL_ID:v,tags:b,onPatientSave:_}),[g,d,v,b,_]);return React.createElement(CTWPatientContext.Provider,{value:E},c)}function usePatient(){const{getRequestContext:c}=useCTW(),{patientID:d,systemURL:g,tags:v}=react.exports.useContext(CTWPatientContext);return useQuery([QUERY_KEY_PATIENT,d,g,v],async()=>{var _;const b=await c();return getBuilderFhirPatient(b,d,g,{_tag:(_=v==null?void 0:v.map(E=>`${E.system}|${E.code}`))!=null?_:[]})},{staleTime:PATIENT_STALE_TIME})}function useHandlePatientSave(c){const{getRequestContext:d}=useCTW(),{onPatientSave:g}=react.exports.useContext(CTWPatientContext);return react.exports.useCallback(async v=>g?g(v):editPatient(c,v,d),[g,c,d])}function useQueryWithPatient(c,d,g,v=!0){var E,R;const{getRequestContext:b}=useCTW(),_=usePatient();return useQuery([c,(E=_.data)==null?void 0:E.UPID,...d],async()=>{const U=await b();return g(U,_.data,d)},{enabled:!!((R=_.data)!=null&&R.UPID)&&v})}try{PatientProvider.displayName="PatientProvider",PatientProvider.__docgenInfo={description:"",displayName:"PatientProvider",props:{tags:{defaultValue:null,description:"",name:"tags",required:!1,type:{name:"Tag[]"}},onPatientSave:{defaultValue:null,description:"",name:"onPatientSave",required:!1,type:{name:"((data: PatientFormData) => Promise<void>)"}},patientUPID:{defaultValue:null,description:"",name:"patientUPID",required:!1,type:{name:"string"}},patientID:{defaultValue:null,description:"",name:"patientID",required:!1,type:{name:"string"}},systemURL:{defaultValue:null,description:"",name:"systemURL",required:!1,type:{name:"string"}}}}}catch{}try{useHandlePatientSave.displayName="useHandlePatientSave",useHandlePatientSave.__docgenInfo={description:"",displayName:"useHandlePatientSave",props:{active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean | undefined"}},contact:{defaultValue:null,description:"",name:"contact",required:!0,type:{name:"PatientContact[] | undefined"}},dob:{defaultValue:null,description:"",name:"dob",required:!0,type:{name:"string | undefined"}},age:{defaultValue:null,description:"",name:"age",required:!0,type:{name:"number | undefined"}},gender:{defaultValue:null,description:"",name:"gender",required:!0,type:{name:"string | undefined"}},maritalStatus:{defaultValue:null,description:"",name:"maritalStatus",required:!0,type:{name:"string | undefined"}},organization:{defaultValue:null,description:"",name:"organization",required:!0,type:{name:"OrganizationModel | undefined"}},use:{defaultValue:null,description:"",name:"use",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"usual"'},{value:'"official"'},{value:'"temp"'},{value:'"nickname"'},{value:'"anonymous"'},{value:'"old"'},{value:'"maiden"'}]}},UPID:{defaultValue:null,description:"",name:"UPID",required:!0,type:{name:"string"}},getPhoneNumber:{defaultValue:null,description:"",name:"getPhoneNumber",required:!0,type:{name:'(use?: "temp" | "old" | "home" | "work" | "mobile" | undefined) => string | undefined'}},phoneNumber:{defaultValue:null,description:"",name:"phoneNumber",required:!0,type:{name:"string | undefined"}},email:{defaultValue:null,description:"",name:"email",required:!0,type:{name:"string | undefined"}},bestHomeAddress:{defaultValue:null,description:"",name:"bestHomeAddress",required:!0,type:{name:"Address | undefined"}},homeAddress:{defaultValue:null,description:"",name:"homeAddress",required:!0,type:{name:"Address | undefined"}},bestName:{defaultValue:null,description:"",name:"bestName",required:!0,type:{name:"HumanName"}},additionalNames:{defaultValue:null,description:"",name:"additionalNames",required:!0,type:{name:"string | undefined"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string"}},firstName:{defaultValue:null,description:"",name:"firstName",required:!0,type:{name:"string"}},fullName:{defaultValue:null,description:"",name:"fullName",required:!0,type:{name:"string"}},lastName:{defaultValue:null,description:"",name:"lastName",required:!0,type:{name:"string | undefined"}},nickname:{defaultValue:null,description:"",name:"nickname",required:!0,type:{name:"string | undefined"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!0,type:{name:"string | undefined"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!0,type:{name:"string | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Patient"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}class MedicationAdministrationModel extends FHIRModel{get dosageDisplay(){const{text:d,route:g,dose:v}=this.resource.dosage||{};return d||fp.compact([v==null?void 0:v.value,v==null?void 0:v.unit]).join(" ")}get dosageRoute(){const{route:d}=this.resource.dosage||{};return d==null?void 0:d.text}get effectivePeriod(){const{start:d,end:g}=this.resource.effectivePeriod||{};return{start:d?formatDateISOToLocal(d):"",end:g?formatDateISOToLocal(g):""}}}class MedicationDispenseModel extends FHIRModel{get includedPerformer(){var v,b,_,E;const d=(b=(v=this.resource.performer)==null?void 0:v[0])==null?void 0:b.actor.reference,g=findReference("Practitioner",this.resource.contained,this.includedResources,d);return g?new PractitionerModel(g).fullName:(E=(_=this.resource.performer)==null?void 0:_[0])==null?void 0:E.actor.display}get performer(){return getPerformingOrganization(this.resource,this.includedResources)}get performerDetails(){var g,v,b,_,E;const{performer:d}=this;return{name:(g=d==null?void 0:d.name)!=null?g:"",address:(b=(v=d==null?void 0:d.address)==null?void 0:v[0].text)!=null?b:"",telecom:(E=(_=d==null?void 0:d.telecom)==null?void 0:_[0].value)!=null?E:""}}get status(){return this.resource.status}get quantityDisplay(){const{value:d,unit:g="units"}=this.resource.quantity||{};return d?`${d} ${g}`:void 0}get supplied(){const{value:d,unit:g="days"}=this.resource.daysSupply||{};return d?`${d} ${g}`:void 0}}class MedicationRequestModel extends FHIRModel{get includedRequester(){var v,b;const d=(v=this.resource.requester)==null?void 0:v.reference,g=findReference("Practitioner",this.resource.contained,this.includedResources,d);return g?new PractitionerModel(g).fullName:(b=this.resource.requester)==null?void 0:b.display}get pharmacy(){var b,_,E;const{reference:d,display:g}=((b=this.resource.dispenseRequest)==null?void 0:b.performer)||{},v=findReference("Organization",this.resource.contained,this.includedResources,d);if(v){const R=(_=v.telecom)==null?void 0:_[0].value,{city:U,state:P,postalCode:B,text:ee,line:re=[]}=((E=v.address)==null?void 0:E[0])||{},ne=fp.compact([U,`${P} ${B}`]).join(", ");return{telecom:R,name:v.name,address:ee!=null?ee:fp.compact([re,ne]).join(`
`)}}return{name:g}}}class MedicationStatementModel extends FHIRModel{constructor(){super(...arguments);Dr(this,"builderPatientRxNormStatus")}get basedOn(){var g,v;return(v=(g=this.resource.basedOn)==null?void 0:g[0])==null?void 0:v.type}get category(){return codeableConceptLabel(this.resource.category)}get context(){var g;return(g=this.resource.context)==null?void 0:g.display}get dateAsserted(){return formatDateISOToLocal(this.resource.dateAsserted)}set dateAsserted(g){g instanceof Date?this.resource.dateAsserted=dateToISO(g):this.resource.dateAsserted=g}get derivedFrom(){var g;return((g=this.resource.derivedFrom)==null?void 0:g.map(({display:v})=>v||""))||[]}get aggregatedFrom(){const g=fp.find(v=>v.url===LENS_EXTENSION_AGGREGATED_FROM||v.url===CTW_EXTENSION_LENS_AGGREGATED_FROM,this.resource.extension);return g!=null&&g.extension?fp.compact(g.extension.map(fp.get("valueReference"))):fp.compact(this.resource.derivedFrom)}get display(){return codeableConceptLabel(getMedicationCodeableConcept(this.resource,this.includedResources))}get rxNormCoding(){return getIdentifyingRxNormCoding(this.resource,this.includedResources)}get dosage(){var g,v;return(v=(g=this.resource.dosage)==null?void 0:g[0])==null?void 0:v.text}get effectiveStart(){var g;return formatDateISOToLocal((g=this.resource.effectivePeriod)==null?void 0:g.start)}get identifier(){var g,v;return(v=(g=this.resource.identifier)==null?void 0:g[0])==null?void 0:v.value}get informationSource(){return this.resource.informationSource||void 0}set informationSource(g){this.resource.informationSource=g}get medicationReference(){var g;return(g=this.resource.medicationReference)==null?void 0:g.display}get notesDisplay(){var g;return((g=this.resource.note)==null?void 0:g.map(({text:v})=>v))||[]}get partOf(){var g,v;return(v=(g=this.resource.partOf)==null?void 0:g[0])==null?void 0:v.display}get patientStatus(){var g,v;return patientStatus((v=this.builderPatientRxNormStatus)==null?void 0:v[(g=this.rxNorm)!=null?g:""])}get rxNorm(){return getIdentifyingRxNormCode(this.resource,this.includedResources)}get reason(){var g;return codeableConceptLabel((g=this.resource.reasonCode)==null?void 0:g[0])}get reasonReference(){return this.resource.reasonReference}get status(){return fp.capitalize(this.resource.status)}get statusReason(){var g;return codeableConceptLabel((g=this.resource.statusReason)==null?void 0:g[0])}get subject(){return this.resource.subject}get subjectID(){var v;const[,g]=((v=this.resource.subject.reference)==null?void 0:v.split("/"))||[];return g||""}get lastFillDate(){var g,v;return formatDateISOToLocal((v=(g=this.resource.extension)==null?void 0:g.find(b=>b.url===LENS_EXTENSION_MEDICATION_LAST_FILL_DATE))==null?void 0:v.valueDateTime)}get quantity(){var v,b;const g=(b=(v=this.resource.extension)==null?void 0:v.find(_=>_.url===LENS_EXTENSION_MEDICATION_QUANTITY))==null?void 0:b.valueQuantity;if(g)return`${g.value} ${g.unit||""}`}get daysSupply(){var g,v,b,_;return(_=(b=(v=(g=this.resource.extension)==null?void 0:g.find(E=>E.url===LENS_EXTENSION_MEDICATION_DAYS_SUPPLY))==null?void 0:v.valueQuantity)==null?void 0:b.value)==null?void 0:_.toString()}get refills(){var g,v,b;return(b=(v=(g=this.resource.extension)==null?void 0:g.find(_=>_.url===LENS_EXTENSION_MEDICATION_REFILLS))==null?void 0:v.valueUnsignedInt)==null?void 0:b.toString()}get lastPrescriber(){var b,_;const g=(_=(b=this.resource.extension)==null?void 0:b.find(E=>E.url===LENS_EXTENSION_MEDICATION_LAST_PRESCRIBER))==null?void 0:_.valueReference;if(!(g!=null&&g.type)||!g.reference)return;const v=findReference(g.type,this.resource.contained,this.includedResources,g.reference);if(v!=null&&v.name){if(typeof v.name=="string")return v.name;const{family:E,given:R=[]}=v.name[0];return fp.compact([E,R[0]]).join(", ")}return g.display}get lastPrescribedDate(){var g,v;return formatDateISOToLocal((v=(g=this.resource.extension)==null?void 0:g.find(b=>b.url===LENS_EXTENSION_MEDICATION_LAST_PRESCRIBED_DATE))==null?void 0:v.valueDateTime)}}class MedicationModel extends FHIRModel{get performer(){var d;return(d=getPerformingOrganization(this.resource,this.includedResources))==null?void 0:d.name}get status(){return this.resource.status}get dosage(){var d,g,v;switch(this.resource.resourceType){case"MedicationStatement":return(g=(d=this.resource.dosage)==null?void 0:d[0])==null?void 0:g.text;case"MedicationAdministration":return new MedicationAdministrationModel(this.resource,this.includedResources).dosageDisplay;case"MedicationDispense":case"MedicationRequest":return codeableConceptLabel((v=this.resource.dosageInstruction)==null?void 0:v[0]);default:return""}}get date(){var d,g,v,b,_,E,R,U,P;switch(this.resource.resourceType){case"MedicationStatement":return(g=this.resource.dateAsserted)!=null?g:(d=this.resource.effectivePeriod)==null?void 0:d.start;case"MedicationAdministration":return(v=this.resource.effectivePeriod)==null?void 0:v.start;case"MedicationDispense":return(b=this.resource.whenHandedOver)!=null?b:this.resource.whenPrepared;case"MedicationRequest":return(P=this.resource.authoredOn)!=null?P:(U=(R=(E=(_=this.resource.dosageInstruction)==null?void 0:_[0].timing)==null?void 0:E.repeat)==null?void 0:R.boundsPeriod)==null?void 0:U.start;default:return""}}get dateLocal(){return formatDateISOToLocal(this.date)}get patient(){var g;const d=findReference("Patient",this.resource.contained,this.includedResources,(g=this.resource.subject)==null?void 0:g.reference);if(d)return new PatientModel(d,this.includedResources)}get prescriber(){switch(this.resource.resourceType){case"MedicationStatement":return new MedicationStatementModel(this.resource,this.includedResources).lastPrescriber;case"MedicationDispense":return new MedicationDispenseModel(this.resource,this.includedResources).includedPerformer;case"MedicationRequest":return new MedicationRequestModel(this.resource,this.includedResources).includedRequester;default:return}}}function sort(c,d,g,v=!1){const b=lodash.exports.isString(d)?fp.get(d):d;return v?sortByDate(c,b,g):lodash.exports.orderBy(c,d,g)}function sortByDate(c,d,g){return c.sort((v,b)=>{const _=d(v),E=d(b);if(!_&&!E)return 0;if(!_)return g==="asc"?-1:1;if(!E)return g==="asc"?1:-1;const R=new Date(_).getTime(),U=new Date(E).getTime();return g==="asc"?R-U:U-R}),c}const omitClientFilters=fp.omit(["informationSourceNot","informationSource"]);function applySearchFiltersToResponse(c,d={}){let g=filterMedicationsWithNoRxNorms(c.resources,c.bundle);return d.informationSource&&(g=g.filter(v=>{var b;return((b=v.informationSource)==null?void 0:b.type)===d.informationSource})),d.informationSourceNot&&(g=g.filter(v=>{var b;return((b=v.informationSource)==null?void 0:b.type)!==d.informationSourceNot})),g}async function getBuilderMedications(c,d,g=[]){const[v={}]=g;try{const b=await searchBuilderRecords("MedicationStatement",c,{patientUPID:d.UPID,_include:"MedicationStatement:medication",...omitClientFilters(v)}),_=applySearchFiltersToResponse(b,v);return{bundle:b.bundle,medications:_}}catch(b){throw errorResponse("Failed fetching medications for patient",b)}}async function getActiveMedications(c,d,g=[]){const[v={}]=g;try{const b=await searchLensRecords("MedicationStatement",c,"ActiveMedications",{patientUPID:d.UPID,_include:"MedicationStatement:medication",...omitClientFilters(v)}),_=applySearchFiltersToResponse(b,v);return{bundle:b.bundle,medications:_}}catch(b){throw errorResponse("Failed fetching medications for patient",b)}}function filterMedicationsWithNoRxNorms(c,d){const g=bundleToResourceMap(d);return c.filter(v=>getIdentifyingRxNormCode(v,g)!==void 0)}function splitMedications(c,d,g){const v=c.filter(_=>!d.some(E=>getIdentifyingRxNormCode(E,g)===getIdentifyingRxNormCode(_,g)));return{builderMedications:d.map(_=>{var B,ee,re;const E=c.find(ne=>getIdentifyingRxNormCode(ne,g)===getIdentifyingRxNormCode(_,g));if(!E)return _;const R=lodash.exports.cloneDeep(_),U=[LENS_EXTENSION_MEDICATION_LAST_FILL_DATE,LENS_EXTENSION_MEDICATION_LAST_PRESCRIBED_DATE,LENS_EXTENSION_MEDICATION_QUANTITY,LENS_EXTENSION_MEDICATION_DAYS_SUPPLY,LENS_EXTENSION_MEDICATION_REFILLS,LENS_EXTENSION_MEDICATION_LAST_PRESCRIBER];R.extension=(B=E.extension)==null?void 0:B.filter(ne=>U.includes(ne.url));const P=lodash.exports.cloneDeep((ee=E.extension)==null?void 0:ee.find(ne=>ne.url===LENS_EXTENSION_AGGREGATED_FROM));return P&&(P.url=CTW_EXTENSION_LENS_AGGREGATED_FROM,(re=R.extension)==null||re.push(P)),R}),otherProviderMedications:v}}function useMedicationHistory(c){const d=c?new MedicationStatementModel(c).aggregatedFrom:[],g=fp.pipe(fp.get("reference"),fp.split("/"),fp.last),v=fp.pipe(fp.groupBy(fp.get("type")),fp.mapValues(fp.map(g)))(d);return useQueryWithPatient(QUERY_KEY_MEDICATION_HISTORY,[(c==null?void 0:c.id)||"empty"],async(b,_)=>{try{if(!c)return{includedResources:{},medications:[]};const[E,R,U,P]=await Promise.all([searchWrapper("MedicationStatement",b,_.UPID,v.MedicationStatement),searchWrapper("MedicationAdministration",b,_.UPID,v.MedicationAdministration),searchWrapper("MedicationRequest",b,_.UPID,v.MedicationRequest,["MedicationRequest:requester"]),searchWrapper("MedicationDispense",b,_.UPID,v.MedicationDispense,["MedicationDispense:performer","MedicationDispense:prescription"])]),B=getMergedIncludedResources(fp.compact([E.bundle,R.bundle,U.bundle,P.bundle])),ee=fp.compact([...E.resources,...R.resources,...U.resources,...P.resources]).map(ne=>new MedicationModel(ne,B));return{medications:sort(lodash.exports.uniqWith(ee,(ne,j)=>ne.date===j.date&&ne.resource.resourceType===j.resource.resourceType),"date","desc",!0),includedResources:B}}catch(E){throw new Error(`Failed fetching medication history for medication ${c==null?void 0:c.id}: ${E}`)}})}function useLastPrescriber(c){const[d,g]=react.exports.useState(),[v,b]=react.exports.useState(!0),_=useMedicationHistory(c);return react.exports.useEffect(()=>{const{includedResources:E={},medications:R=[]}=_.data||{};if(d===void 0&&R.length){const U=fp.pipe(fp.map(fp.get("resource")),fp.filter(fp.propEq("resourceType","MedicationRequest")),fp.sortBy(P=>Date.parse(P.authoredOn)),fp.map(P=>new MedicationModel(P,E)),fp.last,fp.get("prescriber"))(R);g(U||""),b(!1)}},[d,_.data]),{isLoading:v,lastPrescriber:d}}function searchWrapper(c,d,g,v=[],b=[]){return v.length>0?searchAllRecords(c,d,{_id:v.join(","),_include:[`${c}:patient`,`${c}:medication`,...b],"_include:iterate":"Patient:organization","patient.identifier":`${SYSTEM_ZUS_UNIVERSAL_ID}|${g}`}):{resources:[],bundle:void 0}}const MEDICATION_HISTORY_LIMIT=10;function MedicationHistory({medication:c}){const[d,g]=react.exports.useState([]),v=useMedicationHistory(c.resource),b=v.isLoading;return react.exports.useEffect(()=>{if(v.data){const{medications:_}=v.data;g(sortMedHistory(_).map(createMedicationDetailsCard))}},[v.data]),b?React.createElement(React.Fragment,null,React.createElement("h2",{className:"ctw-text-lg ctw-font-semibold"},"Medication History"),React.createElement(Loading,{message:""})):React.createElement(React.Fragment,null,React.createElement("h2",{className:"ctw-text-lg ctw-font-semibold"},"Medication History"),d.length?React.createElement(CollapsibleDataListStack,{entries:d,limit:MEDICATION_HISTORY_LIMIT}):React.createElement("span",null,"No history available for this medication."))}function createMedicationStatementCard(c){var v;const d=c.resource,g=new MedicationStatementModel(d);return{date:c.dateLocal,id:c.id,title:"Medication Reviewed",hideEmpty:!1,subtitle:((v=g.informationSource)==null?void 0:v.display)||"",data:[{label:"Status",value:lodash.exports.capitalize(g.status)},{label:"Instructions",value:g.dosage}]}}function createMedicationDetailsCard(c){if(c.resourceType==="MedicationStatement")return createMedicationStatementCard(c);if(c.resourceType==="MedicationRequest")return createMedicationRequestCard(c);if(c.resourceType==="MedicationDispense")return createMedicationDispenseCard(c);if(c.resourceType==="MedicationAdministration")return createMedicationAdminCard(c);throw new Error(`Unknown medication resource type "${c.resourceType}"`)}function createMedicationRequestCard(c){const d=c.resource,{prescriber:g}=c,{name:v,address:b,telecom:_}=new MedicationRequestModel(d,c.includedResources).pharmacy,{numberOfRepeatsAllowed:E="",initialFill:R}=d.dispenseRequest||{},{value:U="",unit:P=""}=(R==null?void 0:R.quantity)||{};return{date:c.dateLocal,id:c.id,title:"Prescription Ordered",subtitle:g,hideEmpty:!1,data:[{label:"Quantity",value:[U,P].join(" ")},{label:"Refills Allowed",value:E},{label:"Instructions",value:c.dosage},{label:"Prescriber",value:g},{label:"Pharmacy",value:React.createElement(React.Fragment,null,v&&React.createElement("div",null,v),b&&React.createElement("div",null,b),_&&React.createElement("div",null,"T: ",_))}]}}function createMedicationDispenseCard(c){const d=c.resource,g=new MedicationDispenseModel(d,c.includedResources),{quantityDisplay:v,supplied:b,performerDetails:_}=g,{name:E,address:R,telecom:U}=_;return{date:c.dateLocal,hideEmpty:!1,id:c.id,title:"Medication Filled",subtitle:lodash.exports.compact([v,b?`${b} supplied`:null]).join(", "),data:[{label:"Quantity",value:v},{label:"Days supply",value:b},{label:"Pharmacy",value:React.createElement(React.Fragment,null,E&&React.createElement("div",null,E),R&&React.createElement("div",null,R),U&&React.createElement("div",null,"T: ",U))}]}}function createMedicationAdminCard(c){const d=c.resource,g=new MedicationAdministrationModel(d,c.includedResources);return{id:c.id,date:c.dateLocal,hideEmpty:!1,title:"Medication Administered",subtitle:lodash.exports.compact([g.dosageDisplay,g.dosageRoute]).join(", "),data:[{label:"Dosage",value:g.dosageDisplay},{label:"Route",value:g.dosageRoute},{label:"Start Date",value:g.effectivePeriod.start},{label:"End Date",value:g.effectivePeriod.end}]}}try{MedicationHistory.displayName="MedicationHistory",MedicationHistory.__docgenInfo={description:"Displays the history of a medication",displayName:"MedicationHistory",props:{medication:{defaultValue:null,description:"",name:"medication",required:!0,type:{name:"MedicationStatementModel"}}}}}catch{}function getDataEntriesFromMedicationStatement(c,d){return c?[{label:"Status",value:lodash.exports.capitalize(c.status)},{label:"Last Fill Date",value:c.lastFillDate},{label:"Quantity",value:c.quantity},{label:"Days Supply",value:c.daysSupply},{label:"Refills",value:c.refills},{label:"Instructions",value:c.dosage},{label:"Prescriber",value:d},{label:"Last Prescribed Date",value:c.lastPrescribedDate},...entryFromArray("Note",c.notesDisplay)]:[]}const MedicationDrawer=({medication:c,...d})=>{const{lastPrescriber:g,isLoading:v}=useLastPrescriber(c==null?void 0:c.resource),b=getDataEntriesFromMedicationStatement(c,g);return React.createElement(Drawer,{title:"Medication Details",...d},React.createElement(Drawer.Body,null,React.createElement("div",{className:"ctw-space-y-5"},React.createElement("div",{className:"ctw-flex ctw-justify-between ctw-space-x-8"},React.createElement("h3",{className:"ctw-m-0 ctw-text-3xl ctw-font-light"},c==null?void 0:c.display)),v&&React.createElement(Loading,null),!v&&React.createElement(DataList,{title:"Summary",data:b}),c&&React.createElement(MedicationHistory,{medication:c}))),React.createElement(Drawer.Footer,null,React.createElement("div",{className:"ctw-flex ctw-justify-end"},React.createElement("button",{type:"button",className:"ctw-btn-default",onClick:d.onClose},"Close"))))};try{MedicationDrawer.displayName="MedicationDrawer",MedicationDrawer.__docgenInfo={description:"",displayName:"MedicationDrawer",props:{medication:{defaultValue:null,description:"",name:"medication",required:!1,type:{name:"MedicationStatementModel"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}var resizeObservers=[],hasActiveObservations=function(){return resizeObservers.some(function(c){return c.activeTargets.length>0})},hasSkippedObservations=function(){return resizeObservers.some(function(c){return c.skippedTargets.length>0})},msg="ResizeObserver loop completed with undelivered notifications.",deliverResizeLoopError=function(){var c;typeof ErrorEvent=="function"?c=new ErrorEvent("error",{message:msg}):(c=document.createEvent("Event"),c.initEvent("error",!1,!1),c.message=msg),window.dispatchEvent(c)},ResizeObserverBoxOptions;(function(c){c.BORDER_BOX="border-box",c.CONTENT_BOX="content-box",c.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(ResizeObserverBoxOptions||(ResizeObserverBoxOptions={}));var freeze$1=function(c){return Object.freeze(c)},ResizeObserverSize=function(){function c(d,g){this.inlineSize=d,this.blockSize=g,freeze$1(this)}return c}(),DOMRectReadOnly=function(){function c(d,g,v,b){return this.x=d,this.y=g,this.width=v,this.height=b,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,freeze$1(this)}return c.prototype.toJSON=function(){var d=this,g=d.x,v=d.y,b=d.top,_=d.right,E=d.bottom,R=d.left,U=d.width,P=d.height;return{x:g,y:v,top:b,right:_,bottom:E,left:R,width:U,height:P}},c.fromRect=function(d){return new c(d.x,d.y,d.width,d.height)},c}(),isSVG=function(c){return c instanceof SVGElement&&"getBBox"in c},isHidden=function(c){if(isSVG(c)){var d=c.getBBox(),g=d.width,v=d.height;return!g&&!v}var b=c,_=b.offsetWidth,E=b.offsetHeight;return!(_||E||c.getClientRects().length)},isElement=function(c){var d;if(c instanceof Element)return!0;var g=(d=c==null?void 0:c.ownerDocument)===null||d===void 0?void 0:d.defaultView;return!!(g&&c instanceof g.Element)},isReplacedElement=function(c){switch(c.tagName){case"INPUT":if(c.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},global=typeof window<"u"?window:{},cache=new WeakMap,scrollRegexp=/auto|scroll/,verticalRegexp=/^tb|vertical/,IE=/msie|trident/i.test(global.navigator&&global.navigator.userAgent),parseDimension=function(c){return parseFloat(c||"0")},size=function(c,d,g){return c===void 0&&(c=0),d===void 0&&(d=0),g===void 0&&(g=!1),new ResizeObserverSize((g?d:c)||0,(g?c:d)||0)},zeroBoxes=freeze$1({devicePixelContentBoxSize:size(),borderBoxSize:size(),contentBoxSize:size(),contentRect:new DOMRectReadOnly(0,0,0,0)}),calculateBoxSizes=function(c,d){if(d===void 0&&(d=!1),cache.has(c)&&!d)return cache.get(c);if(isHidden(c))return cache.set(c,zeroBoxes),zeroBoxes;var g=getComputedStyle(c),v=isSVG(c)&&c.ownerSVGElement&&c.getBBox(),b=!IE&&g.boxSizing==="border-box",_=verticalRegexp.test(g.writingMode||""),E=!v&&scrollRegexp.test(g.overflowY||""),R=!v&&scrollRegexp.test(g.overflowX||""),U=v?0:parseDimension(g.paddingTop),P=v?0:parseDimension(g.paddingRight),B=v?0:parseDimension(g.paddingBottom),ee=v?0:parseDimension(g.paddingLeft),re=v?0:parseDimension(g.borderTopWidth),ne=v?0:parseDimension(g.borderRightWidth),j=v?0:parseDimension(g.borderBottomWidth),z=v?0:parseDimension(g.borderLeftWidth),W=ee+P,O=U+B,Y=z+ne,Q=re+j,X=R?c.offsetHeight-Q-c.clientHeight:0,H=E?c.offsetWidth-Y-c.clientWidth:0,G=b?W+Y:0,ie=b?O+Q:0,Ee=v?v.width:parseDimension(g.width)-G-H,be=v?v.height:parseDimension(g.height)-ie-X,Ce=Ee+W+H+Y,Oe=be+O+X+Q,mt=freeze$1({devicePixelContentBoxSize:size(Math.round(Ee*devicePixelRatio),Math.round(be*devicePixelRatio),_),borderBoxSize:size(Ce,Oe,_),contentBoxSize:size(Ee,be,_),contentRect:new DOMRectReadOnly(ee,U,Ee,be)});return cache.set(c,mt),mt},calculateBoxSize=function(c,d,g){var v=calculateBoxSizes(c,g),b=v.borderBoxSize,_=v.contentBoxSize,E=v.devicePixelContentBoxSize;switch(d){case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:return E;case ResizeObserverBoxOptions.BORDER_BOX:return b;default:return _}},ResizeObserverEntry=function(){function c(d){var g=calculateBoxSizes(d);this.target=d,this.contentRect=g.contentRect,this.borderBoxSize=freeze$1([g.borderBoxSize]),this.contentBoxSize=freeze$1([g.contentBoxSize]),this.devicePixelContentBoxSize=freeze$1([g.devicePixelContentBoxSize])}return c}(),calculateDepthForNode=function(c){if(isHidden(c))return 1/0;for(var d=0,g=c.parentNode;g;)d+=1,g=g.parentNode;return d},broadcastActiveObservations=function(){var c=1/0,d=[];resizeObservers.forEach(function(E){if(E.activeTargets.length!==0){var R=[];E.activeTargets.forEach(function(P){var B=new ResizeObserverEntry(P.target),ee=calculateDepthForNode(P.target);R.push(B),P.lastReportedSize=calculateBoxSize(P.target,P.observedBox),ee<c&&(c=ee)}),d.push(function(){E.callback.call(E.observer,R,E.observer)}),E.activeTargets.splice(0,E.activeTargets.length)}});for(var g=0,v=d;g<v.length;g++){var b=v[g];b()}return c},gatherActiveObservationsAtDepth=function(c){resizeObservers.forEach(function(g){g.activeTargets.splice(0,g.activeTargets.length),g.skippedTargets.splice(0,g.skippedTargets.length),g.observationTargets.forEach(function(b){b.isActive()&&(calculateDepthForNode(b.target)>c?g.activeTargets.push(b):g.skippedTargets.push(b))})})},process$1=function(){var c=0;for(gatherActiveObservationsAtDepth(c);hasActiveObservations();)c=broadcastActiveObservations(),gatherActiveObservationsAtDepth(c);return hasSkippedObservations()&&deliverResizeLoopError(),c>0},trigger,callbacks=[],notify=function(){return callbacks.splice(0).forEach(function(c){return c()})},queueMicroTask=function(c){if(!trigger){var d=0,g=document.createTextNode(""),v={characterData:!0};new MutationObserver(function(){return notify()}).observe(g,v),trigger=function(){g.textContent="".concat(d?d--:d++)}}callbacks.push(c),trigger()},queueResizeObserver=function(c){queueMicroTask(function(){requestAnimationFrame(c)})},watching=0,isWatching=function(){return!!watching},CATCH_PERIOD=250,observerConfig={attributes:!0,characterData:!0,childList:!0,subtree:!0},events=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],time=function(c){return c===void 0&&(c=0),Date.now()+c},scheduled=!1,Scheduler=function(){function c(){var d=this;this.stopped=!0,this.listener=function(){return d.schedule()}}return c.prototype.run=function(d){var g=this;if(d===void 0&&(d=CATCH_PERIOD),!scheduled){scheduled=!0;var v=time(d);queueResizeObserver(function(){var b=!1;try{b=process$1()}finally{if(scheduled=!1,d=v-time(),!isWatching())return;b?g.run(1e3):d>0?g.run(d):g.start()}})}},c.prototype.schedule=function(){this.stop(),this.run()},c.prototype.observe=function(){var d=this,g=function(){return d.observer&&d.observer.observe(document.body,observerConfig)};document.body?g():global.addEventListener("DOMContentLoaded",g)},c.prototype.start=function(){var d=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),events.forEach(function(g){return global.addEventListener(g,d.listener,!0)}))},c.prototype.stop=function(){var d=this;this.stopped||(this.observer&&this.observer.disconnect(),events.forEach(function(g){return global.removeEventListener(g,d.listener,!0)}),this.stopped=!0)},c}(),scheduler=new Scheduler,updateCount=function(c){!watching&&c>0&&scheduler.start(),watching+=c,!watching&&scheduler.stop()},skipNotifyOnElement=function(c){return!isSVG(c)&&!isReplacedElement(c)&&getComputedStyle(c).display==="inline"},ResizeObservation=function(){function c(d,g){this.target=d,this.observedBox=g||ResizeObserverBoxOptions.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return c.prototype.isActive=function(){var d=calculateBoxSize(this.target,this.observedBox,!0);return skipNotifyOnElement(this.target)&&(this.lastReportedSize=d),this.lastReportedSize.inlineSize!==d.inlineSize||this.lastReportedSize.blockSize!==d.blockSize},c}(),ResizeObserverDetail=function(){function c(d,g){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=d,this.callback=g}return c}(),observerMap=new WeakMap,getObservationIndex=function(c,d){for(var g=0;g<c.length;g+=1)if(c[g].target===d)return g;return-1},ResizeObserverController=function(){function c(){}return c.connect=function(d,g){var v=new ResizeObserverDetail(d,g);observerMap.set(d,v)},c.observe=function(d,g,v){var b=observerMap.get(d),_=b.observationTargets.length===0;getObservationIndex(b.observationTargets,g)<0&&(_&&resizeObservers.push(b),b.observationTargets.push(new ResizeObservation(g,v&&v.box)),updateCount(1),scheduler.schedule())},c.unobserve=function(d,g){var v=observerMap.get(d),b=getObservationIndex(v.observationTargets,g),_=v.observationTargets.length===1;b>=0&&(_&&resizeObservers.splice(resizeObservers.indexOf(v),1),v.observationTargets.splice(b,1),updateCount(-1))},c.disconnect=function(d){var g=this,v=observerMap.get(d);v.observationTargets.slice().forEach(function(b){return g.unobserve(d,b.target)}),v.activeTargets.splice(0,v.activeTargets.length)},c}(),ResizeObserver$2=function(){function c(d){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof d!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ResizeObserverController.connect(this,d)}return c.prototype.observe=function(d,g){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(d))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.observe(this,d,g)},c.prototype.unobserve=function(d){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(d))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.unobserve(this,d)},c.prototype.disconnect=function(){ResizeObserverController.disconnect(this)},c.toString=function(){return"function ResizeObserver () { [polyfill code] }"},c}();const usePassiveLayoutEffect=React[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],useLayoutEffect=usePassiveLayoutEffect,useLatest=c=>{const d=react.exports.useRef(c);return react.exports.useEffect(()=>{d.current=c}),d},useLatest$1=useLatest,ResizeObserver$1=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:ResizeObserver$2;function _ref$1(){}function useResizeObserver(c,d){const g=getResizeObserver(),v=useLatest$1(d);return useLayoutEffect(()=>{let b=!1;const _=c&&"current"in c?c.current:c;if(!_)return _ref$1;function E(R,U){b||v.current(R,U)}return g.subscribe(_,E),()=>{b=!0,g.unsubscribe(_,E)}},[c,g,v]),g.observer}function createResizeObserver(){let c=!1,d=[];const g=new Map,v=new ResizeObserver$1((b,_)=>{d=d.concat(b);function E(){const R=new Set;for(let U=0;U<d.length;U++){if(R.has(d[U].target))continue;R.add(d[U].target);const P=g.get(d[U].target);P==null||P.forEach(B=>B(d[U],_))}d=[],c=!1}c||window.requestAnimationFrame(E),c=!0});return{observer:v,subscribe(b,_){var E;v.observe(b);const R=(E=g.get(b))!==null&&E!==void 0?E:[];R.push(_),g.set(b,R)},unsubscribe(b,_){var E;const R=(E=g.get(b))!==null&&E!==void 0?E:[];if(R.length===1){v.unobserve(b),g.delete(b);return}const U=R.indexOf(_);U!==-1&&R.splice(U,1),g.set(b,R)}}}let _resizeObserver;const getResizeObserver=()=>_resizeObserver||(_resizeObserver=createResizeObserver()),useIsomorphicLayoutEffect=typeof window<"u"?react.exports.useLayoutEffect:react.exports.useEffect;function useBreakpoints(c){const{theme:d}=useCTW(),[g,v]=react.exports.useState(lodash.exports.mapValues(defaultBreakpoints,()=>!1));function b(){const _=c.current;if(!_)return;const{width:E}=_.getBoundingClientRect(),R={};Object.entries(d.breakpoints).forEach(([U,P])=>{R[U]=E<P}),v(R)}return useIsomorphicLayoutEffect(b,[c,d]),useResizeObserver(c,_=>b()),g}const MedicationsTableBase=({children:c,className:d="",rowMenuActions:g,hideMenu:v=!1,medicationStatements:b,..._})=>{const E=react.exports.useRef(null),R=useBreakpoints(E),U=fp.compact([{title:"Medication Name",render:P=>React.createElement(React.Fragment,null,React.createElement("div",{className:"ctw-font-medium"},P.display),React.createElement("div",{className:"ctw-font-light"},P.dosage))},{title:"Dispensed",render:P=>React.createElement(React.Fragment,null,P.quantity&&React.createElement("div",null,P.quantity),P.refills&&React.createElement("div",null,P.refills," refills"))},{title:"Last Filled",dataIndex:"lastFillDate"},{title:"Last Prescribed",render:P=>React.createElement(React.Fragment,null,P.lastPrescribedDate&&React.createElement("div",null,P.lastPrescribedDate),P.lastPrescriber&&React.createElement("div",null,P.lastPrescriber))}]);return!v&&fp.isFunction(g)&&U.push({className:"ctw-table-action-column",render:P=>React.createElement(DropdownMenu,{menuItems:g(P)},React.createElement(DotsHorizontalIcon$1,{className:"ctw-w-5"}))}),React.createElement("div",{className:d,ref:E},React.createElement(Table$1,{stacked:R.sm,records:b,columns:U,message:"There are no medications to display.",..._}),c)};try{MedicationsTableBase.displayName="MedicationsTableBase",MedicationsTableBase.__docgenInfo={description:"",displayName:"MedicationsTableBase",props:{medicationStatements:{defaultValue:null,description:"",name:"medicationStatements",required:!0,type:{name:"MedicationStatementModel[]"}},rowMenuActions:{defaultValue:null,description:"",name:"rowMenuActions",required:!1,type:{name:"((condition: MedicationStatementModel) => MenuItem[])"}},hideMenu:{defaultValue:{value:"false"},description:"",name:"hideMenu",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | (string & Mapping) | (string & ArgumentArray)"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},message:{defaultValue:null,description:"Displayed when we have 0 records.",name:"message",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},showTableHead:{defaultValue:null,description:"",name:"showTableHead",required:!1,type:{name:"boolean"}},stacked:{defaultValue:null,description:"",name:"stacked",required:!1,type:{name:"boolean"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"TableSort"}},onSort:{defaultValue:null,description:"",name:"onSort",required:!1,type:{name:"((sort: TableSort) => void)"}},handleRowClick:{defaultValue:null,description:"",name:"handleRowClick",required:!1,type:{name:"((record: MedicationStatementModel) => void)"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"((record: MedicationStatementModel) => Element)"}},hidePagination:{defaultValue:null,description:"",name:"hidePagination",required:!1,type:{name:"boolean"}}}}}catch{}var util;(function(c){c.assertEqual=b=>b;function d(b){}c.assertIs=d;function g(b){throw new Error}c.assertNever=g,c.arrayToEnum=b=>{const _={};for(const E of b)_[E]=E;return _},c.getValidEnumValues=b=>{const _=c.objectKeys(b).filter(R=>typeof b[b[R]]!="number"),E={};for(const R of _)E[R]=b[R];return c.objectValues(E)},c.objectValues=b=>c.objectKeys(b).map(function(_){return b[_]}),c.objectKeys=typeof Object.keys=="function"?b=>Object.keys(b):b=>{const _=[];for(const E in b)Object.prototype.hasOwnProperty.call(b,E)&&_.push(E);return _},c.find=(b,_)=>{for(const E of b)if(_(E))return E},c.isInteger=typeof Number.isInteger=="function"?b=>Number.isInteger(b):b=>typeof b=="number"&&isFinite(b)&&Math.floor(b)===b;function v(b,_=" | "){return b.map(E=>typeof E=="string"?`'${E}'`:E).join(_)}c.joinValues=v,c.jsonStringifyReplacer=(b,_)=>typeof _=="bigint"?_.toString():_})(util||(util={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=c=>{switch(typeof c){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(c)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"object":return Array.isArray(c)?ZodParsedType.array:c===null?ZodParsedType.null:c.then&&typeof c.then=="function"&&c.catch&&typeof c.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&c instanceof Map?ZodParsedType.map:typeof Set<"u"&&c instanceof Set?ZodParsedType.set:typeof Date<"u"&&c instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),quotelessJson=c=>JSON.stringify(c,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(d){super(),this.issues=[],this.addIssue=v=>{this.issues=[...this.issues,v]},this.addIssues=(v=[])=>{this.issues=[...this.issues,...v]};const g=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,g):this.__proto__=g,this.name="ZodError",this.issues=d}get errors(){return this.issues}format(d){const g=d||function(_){return _.message},v={_errors:[]},b=_=>{for(const E of _.issues)if(E.code==="invalid_union")E.unionErrors.map(b);else if(E.code==="invalid_return_type")b(E.returnTypeError);else if(E.code==="invalid_arguments")b(E.argumentsError);else if(E.path.length===0)v._errors.push(g(E));else{let R=v,U=0;for(;U<E.path.length;){const P=E.path[U];U===E.path.length-1?(R[P]=R[P]||{_errors:[]},R[P]._errors.push(g(E))):R[P]=R[P]||{_errors:[]},R=R[P],U++}}};return b(this),v}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(d=g=>g.message){const g={},v=[];for(const b of this.issues)b.path.length>0?(g[b.path[0]]=g[b.path[0]]||[],g[b.path[0]].push(d(b))):v.push(d(b));return{formErrors:v,fieldErrors:g}}get formErrors(){return this.flatten()}}ZodError.create=c=>new ZodError(c);const errorMap=(c,d)=>{let g;switch(c.code){case ZodIssueCode.invalid_type:c.received===ZodParsedType.undefined?g="Required":g=`Expected ${c.expected}, received ${c.received}`;break;case ZodIssueCode.invalid_literal:g=`Invalid literal value, expected ${JSON.stringify(c.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:g=`Unrecognized key(s) in object: ${util.joinValues(c.keys,", ")}`;break;case ZodIssueCode.invalid_union:g="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:g=`Invalid discriminator value. Expected ${util.joinValues(c.options)}`;break;case ZodIssueCode.invalid_enum_value:g=`Invalid enum value. Expected ${util.joinValues(c.options)}, received '${c.received}'`;break;case ZodIssueCode.invalid_arguments:g="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:g="Invalid function return type";break;case ZodIssueCode.invalid_date:g="Invalid date";break;case ZodIssueCode.invalid_string:typeof c.validation=="object"?"startsWith"in c.validation?g=`Invalid input: must start with "${c.validation.startsWith}"`:"endsWith"in c.validation?g=`Invalid input: must end with "${c.validation.endsWith}"`:util.assertNever(c.validation):c.validation!=="regex"?g=`Invalid ${c.validation}`:g="Invalid";break;case ZodIssueCode.too_small:c.type==="array"?g=`Array must contain ${c.inclusive?"at least":"more than"} ${c.minimum} element(s)`:c.type==="string"?g=`String must contain ${c.inclusive?"at least":"over"} ${c.minimum} character(s)`:c.type==="number"?g=`Number must be greater than ${c.inclusive?"or equal to ":""}${c.minimum}`:c.type==="date"?g=`Date must be greater than ${c.inclusive?"or equal to ":""}${new Date(c.minimum)}`:g="Invalid input";break;case ZodIssueCode.too_big:c.type==="array"?g=`Array must contain ${c.inclusive?"at most":"less than"} ${c.maximum} element(s)`:c.type==="string"?g=`String must contain ${c.inclusive?"at most":"under"} ${c.maximum} character(s)`:c.type==="number"?g=`Number must be less than ${c.inclusive?"or equal to ":""}${c.maximum}`:c.type==="date"?g=`Date must be smaller than ${c.inclusive?"or equal to ":""}${new Date(c.maximum)}`:g="Invalid input";break;case ZodIssueCode.custom:g="Invalid input";break;case ZodIssueCode.invalid_intersection_types:g="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:g=`Number must be a multiple of ${c.multipleOf}`;break;default:g=d.defaultError,util.assertNever(c)}return{message:g}};let overrideErrorMap=errorMap;function setErrorMap(c){overrideErrorMap=c}function getErrorMap(){return overrideErrorMap}const makeIssue=c=>{const{data:d,path:g,errorMaps:v,issueData:b}=c,_=[...g,...b.path||[]],E={...b,path:_};let R="";const U=v.filter(P=>!!P).slice().reverse();for(const P of U)R=P(E,{data:d,defaultError:R}).message;return{...b,path:_,message:b.message||R}},EMPTY_PATH=[];function addIssueToContext(c,d){const g=makeIssue({issueData:d,data:c.data,path:c.path,errorMaps:[c.common.contextualErrorMap,c.schemaErrorMap,getErrorMap(),errorMap].filter(v=>!!v)});c.common.issues.push(g)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(d,g){const v=[];for(const b of g){if(b.status==="aborted")return INVALID;b.status==="dirty"&&d.dirty(),v.push(b.value)}return{status:d.value,value:v}}static async mergeObjectAsync(d,g){const v=[];for(const b of g)v.push({key:await b.key,value:await b.value});return ParseStatus.mergeObjectSync(d,v)}static mergeObjectSync(d,g){const v={};for(const b of g){const{key:_,value:E}=b;if(_.status==="aborted"||E.status==="aborted")return INVALID;_.status==="dirty"&&d.dirty(),E.status==="dirty"&&d.dirty(),(typeof E.value<"u"||b.alwaysSet)&&(v[_.value]=E.value)}return{status:d.value,value:v}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=c=>({status:"dirty",value:c}),OK=c=>({status:"valid",value:c}),isAborted=c=>c.status==="aborted",isDirty=c=>c.status==="dirty",isValid=c=>c.status==="valid",isAsync=c=>typeof Promise!==void 0&&c instanceof Promise;var errorUtil;(function(c){c.errToObj=d=>typeof d=="string"?{message:d}:d||{},c.toString=d=>typeof d=="string"?d:d==null?void 0:d.message})(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(d,g,v,b){this.parent=d,this.data=g,this._path=v,this._key=b}get path(){return this._path.concat(this._key)}}const handleResult=(c,d)=>{if(isValid(d))return{success:!0,data:d.value};{if(!c.common.issues.length)throw new Error("Validation failed but no issues detected.");const g=new ZodError(c.common.issues);return{success:!1,error:g}}};function processCreateParams(c){if(!c)return{};const{errorMap:d,invalid_type_error:g,required_error:v,description:b}=c;if(d&&(g||v))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return d?{errorMap:d,description:b}:{errorMap:(E,R)=>E.code!=="invalid_type"?{message:R.defaultError}:typeof R.data>"u"?{message:v!=null?v:R.defaultError}:{message:g!=null?g:R.defaultError},description:b}}class ZodType{constructor(d){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=d,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(d){return getParsedType(d.data)}_getOrReturnCtx(d,g){return g||{common:d.parent.common,data:d.data,parsedType:getParsedType(d.data),schemaErrorMap:this._def.errorMap,path:d.path,parent:d.parent}}_processInputParams(d){return{status:new ParseStatus,ctx:{common:d.parent.common,data:d.data,parsedType:getParsedType(d.data),schemaErrorMap:this._def.errorMap,path:d.path,parent:d.parent}}}_parseSync(d){const g=this._parse(d);if(isAsync(g))throw new Error("Synchronous parse encountered promise.");return g}_parseAsync(d){const g=this._parse(d);return Promise.resolve(g)}parse(d,g){const v=this.safeParse(d,g);if(v.success)return v.data;throw v.error}safeParse(d,g){var v;const b={common:{issues:[],async:(v=g==null?void 0:g.async)!==null&&v!==void 0?v:!1,contextualErrorMap:g==null?void 0:g.errorMap},path:(g==null?void 0:g.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:d,parsedType:getParsedType(d)},_=this._parseSync({data:d,path:b.path,parent:b});return handleResult(b,_)}async parseAsync(d,g){const v=await this.safeParseAsync(d,g);if(v.success)return v.data;throw v.error}async safeParseAsync(d,g){const v={common:{issues:[],contextualErrorMap:g==null?void 0:g.errorMap,async:!0},path:(g==null?void 0:g.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:d,parsedType:getParsedType(d)},b=this._parse({data:d,path:[],parent:v}),_=await(isAsync(b)?b:Promise.resolve(b));return handleResult(v,_)}refine(d,g){const v=b=>typeof g=="string"||typeof g>"u"?{message:g}:typeof g=="function"?g(b):g;return this._refinement((b,_)=>{const E=d(b),R=()=>_.addIssue({code:ZodIssueCode.custom,...v(b)});return typeof Promise<"u"&&E instanceof Promise?E.then(U=>U?!0:(R(),!1)):E?!0:(R(),!1)})}refinement(d,g){return this._refinement((v,b)=>d(v)?!0:(b.addIssue(typeof g=="function"?g(v,b):g),!1))}_refinement(d){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:d}})}optional(){return ZodOptional.create(this)}nullable(){return ZodNullable.create(this)}nullish(){return this.optional().nullable()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this)}or(d){return ZodUnion.create([this,d])}and(d){return ZodIntersection.create(this,d)}transform(d){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:d}})}default(d){const g=typeof d=="function"?d:()=>d;return new ZodDefault({innerType:this,defaultValue:g,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(void 0)})}describe(d){const g=this.constructor;return new g({...this._def,description:d})}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,uuidRegex=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,emailRegex=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;class ZodString extends ZodType{constructor(){super(...arguments),this._regex=(d,g,v)=>this.refinement(b=>d.test(b),{validation:g,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(v)}),this.nonempty=d=>this.min(1,errorUtil.errToObj(d)),this.trim=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(d){if(this._getType(d)!==ZodParsedType.string){const _=this._getOrReturnCtx(d);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:_.parsedType}),INVALID}const v=new ParseStatus;let b;for(const _ of this._def.checks)if(_.kind==="min")d.data.length<_.value&&(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.too_small,minimum:_.value,type:"string",inclusive:!0,message:_.message}),v.dirty());else if(_.kind==="max")d.data.length>_.value&&(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.too_big,maximum:_.value,type:"string",inclusive:!0,message:_.message}),v.dirty());else if(_.kind==="email")emailRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"email",code:ZodIssueCode.invalid_string,message:_.message}),v.dirty());else if(_.kind==="uuid")uuidRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"uuid",code:ZodIssueCode.invalid_string,message:_.message}),v.dirty());else if(_.kind==="cuid")cuidRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"cuid",code:ZodIssueCode.invalid_string,message:_.message}),v.dirty());else if(_.kind==="url")try{new URL(d.data)}catch{b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"url",code:ZodIssueCode.invalid_string,message:_.message}),v.dirty()}else _.kind==="regex"?(_.regex.lastIndex=0,_.regex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"regex",code:ZodIssueCode.invalid_string,message:_.message}),v.dirty())):_.kind==="trim"?d.data=d.data.trim():_.kind==="startsWith"?d.data.startsWith(_.value)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.invalid_string,validation:{startsWith:_.value},message:_.message}),v.dirty()):_.kind==="endsWith"?d.data.endsWith(_.value)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.invalid_string,validation:{endsWith:_.value},message:_.message}),v.dirty()):util.assertNever(_);return{status:v.value,value:d.data}}_addCheck(d){return new ZodString({...this._def,checks:[...this._def.checks,d]})}email(d){return this._addCheck({kind:"email",...errorUtil.errToObj(d)})}url(d){return this._addCheck({kind:"url",...errorUtil.errToObj(d)})}uuid(d){return this._addCheck({kind:"uuid",...errorUtil.errToObj(d)})}cuid(d){return this._addCheck({kind:"cuid",...errorUtil.errToObj(d)})}regex(d,g){return this._addCheck({kind:"regex",regex:d,...errorUtil.errToObj(g)})}startsWith(d,g){return this._addCheck({kind:"startsWith",value:d,...errorUtil.errToObj(g)})}endsWith(d,g){return this._addCheck({kind:"endsWith",value:d,...errorUtil.errToObj(g)})}min(d,g){return this._addCheck({kind:"min",value:d,...errorUtil.errToObj(g)})}max(d,g){return this._addCheck({kind:"max",value:d,...errorUtil.errToObj(g)})}length(d,g){return this.min(d,g).max(d,g)}get isEmail(){return!!this._def.checks.find(d=>d.kind==="email")}get isURL(){return!!this._def.checks.find(d=>d.kind==="url")}get isUUID(){return!!this._def.checks.find(d=>d.kind==="uuid")}get isCUID(){return!!this._def.checks.find(d=>d.kind==="cuid")}get minLength(){let d=null;for(const g of this._def.checks)g.kind==="min"&&(d===null||g.value>d)&&(d=g.value);return d}get maxLength(){let d=null;for(const g of this._def.checks)g.kind==="max"&&(d===null||g.value<d)&&(d=g.value);return d}}ZodString.create=c=>new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,...processCreateParams(c)});function floatSafeRemainder(c,d){const g=(c.toString().split(".")[1]||"").length,v=(d.toString().split(".")[1]||"").length,b=g>v?g:v,_=parseInt(c.toFixed(b).replace(".","")),E=parseInt(d.toFixed(b).replace(".",""));return _%E/Math.pow(10,b)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(d){if(this._getType(d)!==ZodParsedType.number){const _=this._getOrReturnCtx(d);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:_.parsedType}),INVALID}let v;const b=new ParseStatus;for(const _ of this._def.checks)_.kind==="int"?util.isInteger(d.data)||(v=this._getOrReturnCtx(d,v),addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:_.message}),b.dirty()):_.kind==="min"?(_.inclusive?d.data<_.value:d.data<=_.value)&&(v=this._getOrReturnCtx(d,v),addIssueToContext(v,{code:ZodIssueCode.too_small,minimum:_.value,type:"number",inclusive:_.inclusive,message:_.message}),b.dirty()):_.kind==="max"?(_.inclusive?d.data>_.value:d.data>=_.value)&&(v=this._getOrReturnCtx(d,v),addIssueToContext(v,{code:ZodIssueCode.too_big,maximum:_.value,type:"number",inclusive:_.inclusive,message:_.message}),b.dirty()):_.kind==="multipleOf"?floatSafeRemainder(d.data,_.value)!==0&&(v=this._getOrReturnCtx(d,v),addIssueToContext(v,{code:ZodIssueCode.not_multiple_of,multipleOf:_.value,message:_.message}),b.dirty()):util.assertNever(_);return{status:b.value,value:d.data}}gte(d,g){return this.setLimit("min",d,!0,errorUtil.toString(g))}gt(d,g){return this.setLimit("min",d,!1,errorUtil.toString(g))}lte(d,g){return this.setLimit("max",d,!0,errorUtil.toString(g))}lt(d,g){return this.setLimit("max",d,!1,errorUtil.toString(g))}setLimit(d,g,v,b){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:d,value:g,inclusive:v,message:errorUtil.toString(b)}]})}_addCheck(d){return new ZodNumber({...this._def,checks:[...this._def.checks,d]})}int(d){return this._addCheck({kind:"int",message:errorUtil.toString(d)})}positive(d){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(d)})}negative(d){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(d)})}nonpositive(d){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(d)})}nonnegative(d){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(d)})}multipleOf(d,g){return this._addCheck({kind:"multipleOf",value:d,message:errorUtil.toString(g)})}get minValue(){let d=null;for(const g of this._def.checks)g.kind==="min"&&(d===null||g.value>d)&&(d=g.value);return d}get maxValue(){let d=null;for(const g of this._def.checks)g.kind==="max"&&(d===null||g.value<d)&&(d=g.value);return d}get isInt(){return!!this._def.checks.find(d=>d.kind==="int")}}ZodNumber.create=c=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,...processCreateParams(c)});class ZodBigInt extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.bigint){const v=this._getOrReturnCtx(d);return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:v.parsedType}),INVALID}return OK(d.data)}}ZodBigInt.create=c=>new ZodBigInt({typeName:ZodFirstPartyTypeKind.ZodBigInt,...processCreateParams(c)});class ZodBoolean extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.boolean){const v=this._getOrReturnCtx(d);return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:v.parsedType}),INVALID}return OK(d.data)}}ZodBoolean.create=c=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,...processCreateParams(c)});class ZodDate extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.date){const _=this._getOrReturnCtx(d);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:_.parsedType}),INVALID}if(isNaN(d.data.getTime())){const _=this._getOrReturnCtx(d);return addIssueToContext(_,{code:ZodIssueCode.invalid_date}),INVALID}const v=new ParseStatus;let b;for(const _ of this._def.checks)_.kind==="min"?d.data.getTime()<_.value&&(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.too_small,message:_.message,inclusive:!0,minimum:_.value,type:"date"}),v.dirty()):_.kind==="max"?d.data.getTime()>_.value&&(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.too_big,message:_.message,inclusive:!0,maximum:_.value,type:"date"}),v.dirty()):util.assertNever(_);return{status:v.value,value:new Date(d.data.getTime())}}_addCheck(d){return new ZodDate({...this._def,checks:[...this._def.checks,d]})}min(d,g){return this._addCheck({kind:"min",value:d.getTime(),message:errorUtil.toString(g)})}max(d,g){return this._addCheck({kind:"max",value:d.getTime(),message:errorUtil.toString(g)})}get minDate(){let d=null;for(const g of this._def.checks)g.kind==="min"&&(d===null||g.value>d)&&(d=g.value);return d!=null?new Date(d):null}get maxDate(){let d=null;for(const g of this._def.checks)g.kind==="max"&&(d===null||g.value<d)&&(d=g.value);return d!=null?new Date(d):null}}ZodDate.create=c=>new ZodDate({checks:[],typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(c)});class ZodUndefined extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.undefined){const v=this._getOrReturnCtx(d);return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:v.parsedType}),INVALID}return OK(d.data)}}ZodUndefined.create=c=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(c)});class ZodNull extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.null){const v=this._getOrReturnCtx(d);return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:v.parsedType}),INVALID}return OK(d.data)}}ZodNull.create=c=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(c)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(d){return OK(d.data)}}ZodAny.create=c=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(c)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(d){return OK(d.data)}}ZodUnknown.create=c=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(c)});class ZodNever extends ZodType{_parse(d){const g=this._getOrReturnCtx(d);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:g.parsedType}),INVALID}}ZodNever.create=c=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(c)});class ZodVoid extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.undefined){const v=this._getOrReturnCtx(d);return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:v.parsedType}),INVALID}return OK(d.data)}}ZodVoid.create=c=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(c)});class ZodArray extends ZodType{_parse(d){const{ctx:g,status:v}=this._processInputParams(d),b=this._def;if(g.parsedType!==ZodParsedType.array)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:g.parsedType}),INVALID;if(b.minLength!==null&&g.data.length<b.minLength.value&&(addIssueToContext(g,{code:ZodIssueCode.too_small,minimum:b.minLength.value,type:"array",inclusive:!0,message:b.minLength.message}),v.dirty()),b.maxLength!==null&&g.data.length>b.maxLength.value&&(addIssueToContext(g,{code:ZodIssueCode.too_big,maximum:b.maxLength.value,type:"array",inclusive:!0,message:b.maxLength.message}),v.dirty()),g.common.async)return Promise.all(g.data.map((E,R)=>b.type._parseAsync(new ParseInputLazyPath(g,E,g.path,R)))).then(E=>ParseStatus.mergeArray(v,E));const _=g.data.map((E,R)=>b.type._parseSync(new ParseInputLazyPath(g,E,g.path,R)));return ParseStatus.mergeArray(v,_)}get element(){return this._def.type}min(d,g){return new ZodArray({...this._def,minLength:{value:d,message:errorUtil.toString(g)}})}max(d,g){return new ZodArray({...this._def,maxLength:{value:d,message:errorUtil.toString(g)}})}length(d,g){return this.min(d,g).max(d,g)}nonempty(d){return this.min(1,d)}}ZodArray.create=(c,d)=>new ZodArray({type:c,minLength:null,maxLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(d)});var objectUtil;(function(c){c.mergeShapes=(d,g)=>({...d,...g})})(objectUtil||(objectUtil={}));const AugmentFactory=c=>d=>new ZodObject({...c,shape:()=>({...c.shape(),...d})});function deepPartialify(c){if(c instanceof ZodObject){const d={};for(const g in c.shape){const v=c.shape[g];d[g]=ZodOptional.create(deepPartialify(v))}return new ZodObject({...c._def,shape:()=>d})}else return c instanceof ZodArray?ZodArray.create(deepPartialify(c.element)):c instanceof ZodOptional?ZodOptional.create(deepPartialify(c.unwrap())):c instanceof ZodNullable?ZodNullable.create(deepPartialify(c.unwrap())):c instanceof ZodTuple?ZodTuple.create(c.items.map(d=>deepPartialify(d))):c}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=AugmentFactory(this._def),this.extend=AugmentFactory(this._def)}_getCached(){if(this._cached!==null)return this._cached;const d=this._def.shape(),g=util.objectKeys(d);return this._cached={shape:d,keys:g}}_parse(d){if(this._getType(d)!==ZodParsedType.object){const P=this._getOrReturnCtx(d);return addIssueToContext(P,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:P.parsedType}),INVALID}const{status:v,ctx:b}=this._processInputParams(d),{shape:_,keys:E}=this._getCached(),R=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const P in b.data)E.includes(P)||R.push(P);const U=[];for(const P of E){const B=_[P],ee=b.data[P];U.push({key:{status:"valid",value:P},value:B._parse(new ParseInputLazyPath(b,ee,b.path,P)),alwaysSet:P in b.data})}if(this._def.catchall instanceof ZodNever){const P=this._def.unknownKeys;if(P==="passthrough")for(const B of R)U.push({key:{status:"valid",value:B},value:{status:"valid",value:b.data[B]}});else if(P==="strict")R.length>0&&(addIssueToContext(b,{code:ZodIssueCode.unrecognized_keys,keys:R}),v.dirty());else if(P!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const P=this._def.catchall;for(const B of R){const ee=b.data[B];U.push({key:{status:"valid",value:B},value:P._parse(new ParseInputLazyPath(b,ee,b.path,B)),alwaysSet:B in b.data})}}return b.common.async?Promise.resolve().then(async()=>{const P=[];for(const B of U){const ee=await B.key;P.push({key:ee,value:await B.value,alwaysSet:B.alwaysSet})}return P}).then(P=>ParseStatus.mergeObjectSync(v,P)):ParseStatus.mergeObjectSync(v,U)}get shape(){return this._def.shape()}strict(d){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...d!==void 0?{errorMap:(g,v)=>{var b,_,E,R;const U=(E=(_=(b=this._def).errorMap)===null||_===void 0?void 0:_.call(b,g,v).message)!==null&&E!==void 0?E:v.defaultError;return g.code==="unrecognized_keys"?{message:(R=errorUtil.errToObj(d).message)!==null&&R!==void 0?R:U}:{message:U}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}setKey(d,g){return this.augment({[d]:g})}merge(d){return new ZodObject({unknownKeys:d._def.unknownKeys,catchall:d._def.catchall,shape:()=>objectUtil.mergeShapes(this._def.shape(),d._def.shape()),typeName:ZodFirstPartyTypeKind.ZodObject})}catchall(d){return new ZodObject({...this._def,catchall:d})}pick(d){const g={};return util.objectKeys(d).map(v=>{this.shape[v]&&(g[v]=this.shape[v])}),new ZodObject({...this._def,shape:()=>g})}omit(d){const g={};return util.objectKeys(this.shape).map(v=>{util.objectKeys(d).indexOf(v)===-1&&(g[v]=this.shape[v])}),new ZodObject({...this._def,shape:()=>g})}deepPartial(){return deepPartialify(this)}partial(d){const g={};if(d)return util.objectKeys(this.shape).map(v=>{util.objectKeys(d).indexOf(v)===-1?g[v]=this.shape[v]:g[v]=this.shape[v].optional()}),new ZodObject({...this._def,shape:()=>g});for(const v in this.shape){const b=this.shape[v];g[v]=b.optional()}return new ZodObject({...this._def,shape:()=>g})}required(){const d={};for(const g in this.shape){let b=this.shape[g];for(;b instanceof ZodOptional;)b=b._def.innerType;d[g]=b}return new ZodObject({...this._def,shape:()=>d})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(c,d)=>new ZodObject({shape:()=>c,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(d)});ZodObject.strictCreate=(c,d)=>new ZodObject({shape:()=>c,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(d)});ZodObject.lazycreate=(c,d)=>new ZodObject({shape:c,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(d)});class ZodUnion extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d),v=this._def.options;function b(_){for(const R of _)if(R.result.status==="valid")return R.result;for(const R of _)if(R.result.status==="dirty")return g.common.issues.push(...R.ctx.common.issues),R.result;const E=_.map(R=>new ZodError(R.ctx.common.issues));return addIssueToContext(g,{code:ZodIssueCode.invalid_union,unionErrors:E}),INVALID}if(g.common.async)return Promise.all(v.map(async _=>{const E={...g,common:{...g.common,issues:[]},parent:null};return{result:await _._parseAsync({data:g.data,path:g.path,parent:E}),ctx:E}})).then(b);{let _;const E=[];for(const U of v){const P={...g,common:{...g.common,issues:[]},parent:null},B=U._parseSync({data:g.data,path:g.path,parent:P});if(B.status==="valid")return B;B.status==="dirty"&&!_&&(_={result:B,ctx:P}),P.common.issues.length&&E.push(P.common.issues)}if(_)return g.common.issues.push(..._.ctx.common.issues),_.result;const R=E.map(U=>new ZodError(U));return addIssueToContext(g,{code:ZodIssueCode.invalid_union,unionErrors:R}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(c,d)=>new ZodUnion({options:c,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(d)});class ZodDiscriminatedUnion extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d);if(g.parsedType!==ZodParsedType.object)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:g.parsedType}),INVALID;const v=this.discriminator,b=g.data[v],_=this.options.get(b);return _?g.common.async?_._parseAsync({data:g.data,path:g.path,parent:g}):_._parseSync({data:g.data,path:g.path,parent:g}):(addIssueToContext(g,{code:ZodIssueCode.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[v]}),INVALID)}get discriminator(){return this._def.discriminator}get validDiscriminatorValues(){return Array.from(this.options.keys())}get options(){return this._def.options}static create(d,g,v){const b=new Map;try{g.forEach(_=>{const E=_.shape[d].value;b.set(E,_)})}catch{throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(b.size!==g.length)throw new Error("Some of the discriminator values are not unique");return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:d,options:b,...processCreateParams(v)})}}function mergeValues(c,d){const g=getParsedType(c),v=getParsedType(d);if(c===d)return{valid:!0,data:c};if(g===ZodParsedType.object&&v===ZodParsedType.object){const b=util.objectKeys(d),_=util.objectKeys(c).filter(R=>b.indexOf(R)!==-1),E={...c,...d};for(const R of _){const U=mergeValues(c[R],d[R]);if(!U.valid)return{valid:!1};E[R]=U.data}return{valid:!0,data:E}}else if(g===ZodParsedType.array&&v===ZodParsedType.array){if(c.length!==d.length)return{valid:!1};const b=[];for(let _=0;_<c.length;_++){const E=c[_],R=d[_],U=mergeValues(E,R);if(!U.valid)return{valid:!1};b.push(U.data)}return{valid:!0,data:b}}else return g===ZodParsedType.date&&v===ZodParsedType.date&&+c==+d?{valid:!0,data:c}:{valid:!1}}class ZodIntersection extends ZodType{_parse(d){const{status:g,ctx:v}=this._processInputParams(d),b=(_,E)=>{if(isAborted(_)||isAborted(E))return INVALID;const R=mergeValues(_.value,E.value);return R.valid?((isDirty(_)||isDirty(E))&&g.dirty(),{status:g.value,value:R.data}):(addIssueToContext(v,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return v.common.async?Promise.all([this._def.left._parseAsync({data:v.data,path:v.path,parent:v}),this._def.right._parseAsync({data:v.data,path:v.path,parent:v})]).then(([_,E])=>b(_,E)):b(this._def.left._parseSync({data:v.data,path:v.path,parent:v}),this._def.right._parseSync({data:v.data,path:v.path,parent:v}))}}ZodIntersection.create=(c,d,g)=>new ZodIntersection({left:c,right:d,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(g)});class ZodTuple extends ZodType{_parse(d){const{status:g,ctx:v}=this._processInputParams(d);if(v.parsedType!==ZodParsedType.array)return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:v.parsedType}),INVALID;if(v.data.length<this._def.items.length)return addIssueToContext(v,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),INVALID;!this._def.rest&&v.data.length>this._def.items.length&&(addIssueToContext(v,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),g.dirty());const _=v.data.map((E,R)=>{const U=this._def.items[R]||this._def.rest;return U?U._parse(new ParseInputLazyPath(v,E,v.path,R)):null}).filter(E=>!!E);return v.common.async?Promise.all(_).then(E=>ParseStatus.mergeArray(g,E)):ParseStatus.mergeArray(g,_)}get items(){return this._def.items}rest(d){return new ZodTuple({...this._def,rest:d})}}ZodTuple.create=(c,d)=>{if(!Array.isArray(c))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:c,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(d)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(d){const{status:g,ctx:v}=this._processInputParams(d);if(v.parsedType!==ZodParsedType.object)return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:v.parsedType}),INVALID;const b=[],_=this._def.keyType,E=this._def.valueType;for(const R in v.data)b.push({key:_._parse(new ParseInputLazyPath(v,R,v.path,R)),value:E._parse(new ParseInputLazyPath(v,v.data[R],v.path,R))});return v.common.async?ParseStatus.mergeObjectAsync(g,b):ParseStatus.mergeObjectSync(g,b)}get element(){return this._def.valueType}static create(d,g,v){return g instanceof ZodType?new ZodRecord({keyType:d,valueType:g,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(v)}):new ZodRecord({keyType:ZodString.create(),valueType:d,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(g)})}}class ZodMap extends ZodType{_parse(d){const{status:g,ctx:v}=this._processInputParams(d);if(v.parsedType!==ZodParsedType.map)return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:v.parsedType}),INVALID;const b=this._def.keyType,_=this._def.valueType,E=[...v.data.entries()].map(([R,U],P)=>({key:b._parse(new ParseInputLazyPath(v,R,v.path,[P,"key"])),value:_._parse(new ParseInputLazyPath(v,U,v.path,[P,"value"]))}));if(v.common.async){const R=new Map;return Promise.resolve().then(async()=>{for(const U of E){const P=await U.key,B=await U.value;if(P.status==="aborted"||B.status==="aborted")return INVALID;(P.status==="dirty"||B.status==="dirty")&&g.dirty(),R.set(P.value,B.value)}return{status:g.value,value:R}})}else{const R=new Map;for(const U of E){const P=U.key,B=U.value;if(P.status==="aborted"||B.status==="aborted")return INVALID;(P.status==="dirty"||B.status==="dirty")&&g.dirty(),R.set(P.value,B.value)}return{status:g.value,value:R}}}}ZodMap.create=(c,d,g)=>new ZodMap({valueType:d,keyType:c,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(g)});class ZodSet extends ZodType{_parse(d){const{status:g,ctx:v}=this._processInputParams(d);if(v.parsedType!==ZodParsedType.set)return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:v.parsedType}),INVALID;const b=this._def;b.minSize!==null&&v.data.size<b.minSize.value&&(addIssueToContext(v,{code:ZodIssueCode.too_small,minimum:b.minSize.value,type:"set",inclusive:!0,message:b.minSize.message}),g.dirty()),b.maxSize!==null&&v.data.size>b.maxSize.value&&(addIssueToContext(v,{code:ZodIssueCode.too_big,maximum:b.maxSize.value,type:"set",inclusive:!0,message:b.maxSize.message}),g.dirty());const _=this._def.valueType;function E(U){const P=new Set;for(const B of U){if(B.status==="aborted")return INVALID;B.status==="dirty"&&g.dirty(),P.add(B.value)}return{status:g.value,value:P}}const R=[...v.data.values()].map((U,P)=>_._parse(new ParseInputLazyPath(v,U,v.path,P)));return v.common.async?Promise.all(R).then(U=>E(U)):E(R)}min(d,g){return new ZodSet({...this._def,minSize:{value:d,message:errorUtil.toString(g)}})}max(d,g){return new ZodSet({...this._def,maxSize:{value:d,message:errorUtil.toString(g)}})}size(d,g){return this.min(d,g).max(d,g)}nonempty(d){return this.min(1,d)}}ZodSet.create=(c,d)=>new ZodSet({valueType:c,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(d)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(d){const{ctx:g}=this._processInputParams(d);if(g.parsedType!==ZodParsedType.function)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:g.parsedType}),INVALID;function v(R,U){return makeIssue({data:R,path:g.path,errorMaps:[g.common.contextualErrorMap,g.schemaErrorMap,getErrorMap(),errorMap].filter(P=>!!P),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:U}})}function b(R,U){return makeIssue({data:R,path:g.path,errorMaps:[g.common.contextualErrorMap,g.schemaErrorMap,getErrorMap(),errorMap].filter(P=>!!P),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:U}})}const _={errorMap:g.common.contextualErrorMap},E=g.data;return this._def.returns instanceof ZodPromise?OK(async(...R)=>{const U=new ZodError([]),P=await this._def.args.parseAsync(R,_).catch(re=>{throw U.addIssue(v(R,re)),U}),B=await E(...P);return await this._def.returns._def.type.parseAsync(B,_).catch(re=>{throw U.addIssue(b(B,re)),U})}):OK((...R)=>{const U=this._def.args.safeParse(R,_);if(!U.success)throw new ZodError([v(R,U.error)]);const P=E(...U.data),B=this._def.returns.safeParse(P,_);if(!B.success)throw new ZodError([b(P,B.error)]);return B.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...d){return new ZodFunction({...this._def,args:ZodTuple.create(d).rest(ZodUnknown.create())})}returns(d){return new ZodFunction({...this._def,returns:d})}implement(d){return this.parse(d)}strictImplement(d){return this.parse(d)}static create(d,g,v){return new ZodFunction({args:d||ZodTuple.create([]).rest(ZodUnknown.create()),returns:g||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(v)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(d){const{ctx:g}=this._processInputParams(d);return this._def.getter()._parse({data:g.data,path:g.path,parent:g})}}ZodLazy.create=(c,d)=>new ZodLazy({getter:c,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(d)});class ZodLiteral extends ZodType{_parse(d){if(d.data!==this._def.value){const g=this._getOrReturnCtx(d);return addIssueToContext(g,{code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:d.data}}get value(){return this._def.value}}ZodLiteral.create=(c,d)=>new ZodLiteral({value:c,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(d)});function createZodEnum(c,d){return new ZodEnum({values:c,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(d)})}class ZodEnum extends ZodType{_parse(d){if(typeof d.data!="string"){const g=this._getOrReturnCtx(d),v=this._def.values;return addIssueToContext(g,{expected:util.joinValues(v),received:g.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._def.values.indexOf(d.data)===-1){const g=this._getOrReturnCtx(d),v=this._def.values;return addIssueToContext(g,{received:g.data,code:ZodIssueCode.invalid_enum_value,options:v}),INVALID}return OK(d.data)}get options(){return this._def.values}get enum(){const d={};for(const g of this._def.values)d[g]=g;return d}get Values(){const d={};for(const g of this._def.values)d[g]=g;return d}get Enum(){const d={};for(const g of this._def.values)d[g]=g;return d}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(d){const g=util.getValidEnumValues(this._def.values),v=this._getOrReturnCtx(d);if(v.parsedType!==ZodParsedType.string&&v.parsedType!==ZodParsedType.number){const b=util.objectValues(g);return addIssueToContext(v,{expected:util.joinValues(b),received:v.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(g.indexOf(d.data)===-1){const b=util.objectValues(g);return addIssueToContext(v,{received:v.data,code:ZodIssueCode.invalid_enum_value,options:b}),INVALID}return OK(d.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(c,d)=>new ZodNativeEnum({values:c,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(d)});class ZodPromise extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d);if(g.parsedType!==ZodParsedType.promise&&g.common.async===!1)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:g.parsedType}),INVALID;const v=g.parsedType===ZodParsedType.promise?g.data:Promise.resolve(g.data);return OK(v.then(b=>this._def.type.parseAsync(b,{path:g.path,errorMap:g.common.contextualErrorMap})))}}ZodPromise.create=(c,d)=>new ZodPromise({type:c,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(d)});class ZodEffects extends ZodType{innerType(){return this._def.schema}_parse(d){const{status:g,ctx:v}=this._processInputParams(d),b=this._def.effect||null;if(b.type==="preprocess"){const E=b.transform(v.data);return v.common.async?Promise.resolve(E).then(R=>this._def.schema._parseAsync({data:R,path:v.path,parent:v})):this._def.schema._parseSync({data:E,path:v.path,parent:v})}const _={addIssue:E=>{addIssueToContext(v,E),E.fatal?g.abort():g.dirty()},get path(){return v.path}};if(_.addIssue=_.addIssue.bind(_),b.type==="refinement"){const E=R=>{const U=b.refinement(R,_);if(v.common.async)return Promise.resolve(U);if(U instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return R};if(v.common.async===!1){const R=this._def.schema._parseSync({data:v.data,path:v.path,parent:v});return R.status==="aborted"?INVALID:(R.status==="dirty"&&g.dirty(),E(R.value),{status:g.value,value:R.value})}else return this._def.schema._parseAsync({data:v.data,path:v.path,parent:v}).then(R=>R.status==="aborted"?INVALID:(R.status==="dirty"&&g.dirty(),E(R.value).then(()=>({status:g.value,value:R.value}))))}if(b.type==="transform")if(v.common.async===!1){const E=this._def.schema._parseSync({data:v.data,path:v.path,parent:v});if(!isValid(E))return E;const R=b.transform(E.value,_);if(R instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:g.value,value:R}}else return this._def.schema._parseAsync({data:v.data,path:v.path,parent:v}).then(E=>isValid(E)?Promise.resolve(b.transform(E.value,_)).then(R=>({status:g.value,value:R})):E);util.assertNever(b)}}ZodEffects.create=(c,d,g)=>new ZodEffects({schema:c,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:d,...processCreateParams(g)});ZodEffects.createWithPreprocess=(c,d,g)=>new ZodEffects({schema:d,effect:{type:"preprocess",transform:c},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(g)});class ZodOptional extends ZodType{_parse(d){return this._getType(d)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(d)}unwrap(){return this._def.innerType}}ZodOptional.create=(c,d)=>new ZodOptional({innerType:c,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(d)});class ZodNullable extends ZodType{_parse(d){return this._getType(d)===ZodParsedType.null?OK(null):this._def.innerType._parse(d)}unwrap(){return this._def.innerType}}ZodNullable.create=(c,d)=>new ZodNullable({innerType:c,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(d)});class ZodDefault extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d);let v=g.data;return g.parsedType===ZodParsedType.undefined&&(v=this._def.defaultValue()),this._def.innerType._parse({data:v,path:g.path,parent:g})}removeDefault(){return this._def.innerType}}ZodDefault.create=(c,d)=>new ZodOptional({innerType:c,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(d)});class ZodNaN extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.nan){const v=this._getOrReturnCtx(d);return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:v.parsedType}),INVALID}return{status:"valid",value:d.data}}}ZodNaN.create=c=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(c)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d),v=g.data;return this._def.type._parse({data:v,path:g.path,parent:g})}unwrap(){return this._def.type}}const custom=(c,d={},g)=>c?ZodAny.create().superRefine((v,b)=>{if(!c(v)){const _=typeof d=="function"?d(v):d,E=typeof _=="string"?{message:_}:_;b.addIssue({code:"custom",...E,fatal:g})}}):ZodAny.create(),late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(c){c.ZodString="ZodString",c.ZodNumber="ZodNumber",c.ZodNaN="ZodNaN",c.ZodBigInt="ZodBigInt",c.ZodBoolean="ZodBoolean",c.ZodDate="ZodDate",c.ZodUndefined="ZodUndefined",c.ZodNull="ZodNull",c.ZodAny="ZodAny",c.ZodUnknown="ZodUnknown",c.ZodNever="ZodNever",c.ZodVoid="ZodVoid",c.ZodArray="ZodArray",c.ZodObject="ZodObject",c.ZodUnion="ZodUnion",c.ZodDiscriminatedUnion="ZodDiscriminatedUnion",c.ZodIntersection="ZodIntersection",c.ZodTuple="ZodTuple",c.ZodRecord="ZodRecord",c.ZodMap="ZodMap",c.ZodSet="ZodSet",c.ZodFunction="ZodFunction",c.ZodLazy="ZodLazy",c.ZodLiteral="ZodLiteral",c.ZodEnum="ZodEnum",c.ZodEffects="ZodEffects",c.ZodNativeEnum="ZodNativeEnum",c.ZodOptional="ZodOptional",c.ZodNullable="ZodNullable",c.ZodDefault="ZodDefault",c.ZodPromise="ZodPromise",c.ZodBranded="ZodBranded"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(c,d={message:`Input not instance of ${c.name}`})=>custom(g=>g instanceof c,d,!0),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),NEVER=INVALID;var mod=Object.freeze({__proto__:null,getParsedType,ZodParsedType,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,ZodType,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,get objectUtil(){return objectUtil},ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodNaN,BRAND,ZodBranded,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});const ComboboxField=({options:c,isLoading:d,name:g,defaultSearchTerm:v,defaultValue:b,onSearchChange:_,readonly:E})=>{const[R,U]=react.exports.useState(v||""),[P,B]=react.exports.useState({}),ee=lodash.exports.isEmpty(P)?b:P,re=lodash.exports.isObject(ee)?JSON.stringify(ee):ee,ne=react.exports.useMemo(()=>{const z=W=>{const O=W.target.value;O.length>1&&_(O),O!==R&&U(O),c.filter(Y=>Y.label===O).length===0&&B({})};return lodash.exports.debounce(z,300)},[_]),j=z=>{const W=c.filter(O=>O.label===z)[0];B(W.value),U(z)};return React.createElement(Lo,{onChange:j,value:R,disabled:E},({open:z})=>React.createElement("div",null,React.createElement(Lo.Button,{as:"div",onClick:W=>{(z||R.length===0)&&isMouseEvent(W)&&W.preventDefault()}},React.createElement(Lo.Input,{className:"ctw-listbox-input ctw-w-full",onChange:W=>{W.persist(),ne(W)},placeholder:"Type to search"})),React.createElement("input",{hidden:!0,name:g,value:re,readOnly:!0}),React.createElement(Lo.Options,{className:"ctw-listbox ctw-absolute ctw-z-10 ctw-m-0 ctw-mt-1 ctw-max-h-60 ctw-w-full ctw-list-none ctw-overflow-auto ctw-rounded-md ctw-bg-white ctw-p-0 ctw-py-1 ctw-text-base ctw-shadow-lg ctw-ring-1 ctw-ring-opacity-5 focus:ctw-outline-none sm:ctw-text-sm"},React.createElement(ComboboxOptions,{options:c,query:R,isLoading:d}))))},ComboboxOptions=({options:c,query:d,isLoading:g})=>d.length===0?React.createElement(ComboboxOption,{option:{value:"",label:"Type to search"}}):g?React.createElement(ComboboxOption,{option:{value:"",label:"Loading..."}}):d.length<2?React.createElement(ComboboxOption,{option:{value:"",label:"Pleae type at least two characters"}}):c.length===0?React.createElement(ComboboxOption,{option:{value:"",label:`No results found for search term '${d}'`}}):React.createElement(React.Fragment,null,c.map(v=>React.createElement(ComboboxOption,{option:v,key:v.label}))),ComboboxOption=({option:c})=>React.createElement(Lo.Option,{value:c.label,className:({active:d})=>`ctw-relative ctw-cursor-default ctw-select-none ctw-py-2 ctw-pr-4 ctw-pl-4 ${d?"ctw-bg-primary-light ctw-text-primary-dark":"ctw-text-content-black"}`},c.label);try{ComboboxField.displayName="ComboboxField",ComboboxField.__docgenInfo={description:"",displayName:"ComboboxField",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ComboxboxFieldOption[]"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"T"}},defaultSearchTerm:{defaultValue:null,description:"",name:"defaultSearchTerm",required:!0,type:{name:"string"}},onSearchChange:{defaultValue:null,description:"",name:"onSearchChange",required:!0,type:{name:"(searchTerm: string) => void"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const getZusApiBaseUrl=c=>c==="production"?"https://api.zusapi.com":`https://api.${c}.zusapi.com`,getFormsConditionsUrl=c=>`${getZusApiBaseUrl(c)}/forms-data/terminology/conditions`,getFormsMedicationsUrl=c=>`${getZusApiBaseUrl(c)}/forms-data/terminology/dosages`,getAutoCompleteMedications=async(c,d)=>{const{authToken:g,contextBuilderId:v}=c;return(await(await fetch(`${getFormsMedicationsUrl(c.env)}?display=${d}`,{headers:{Authorization:`Bearer ${g}`,...v&&{"Zus-Account":v}}})).json()).data},MedicationsAutoComplete=({defaultCoding:c,readonly:d,...g})=>{const{getRequestContext:v}=useCTW(),[b,_]=react.exports.useState(!1),[E,R]=react.exports.useState(),U=async P=>{_(!0);const B=await v(),ee=await getAutoCompleteMedications(B,P);ee&&R(ee.map(re=>({value:re,label:re.display}))),_(!1)};return React.createElement(ComboboxField,{options:E||[],isLoading:b,name:`${g.name}`,defaultSearchTerm:g.defaultValue,readonly:d,onSearchChange:U,defaultValue:c})};try{MedicationsAutoComplete.displayName="MedicationsAutoComplete",MedicationsAutoComplete.__docgenInfo={description:"",displayName:"MedicationsAutoComplete",props:{defaultCoding:{defaultValue:null,description:"",name:"defaultCoding",required:!1,type:{name:"Coding"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const getMedicationFormData=c=>{var d;return[{label:"Subject",value:c.subjectID,field:"subjectID",readonly:!0,hidden:!0},{label:"Date Asserted",value:(d=c.dateAsserted)!=null?d:format(new Date,"P"),field:"dateAsserted",readonly:!0},{label:"Medication",field:"medication",value:c.display,readonly:!1,render:(g,v)=>{var b;return React.createElement(MedicationsAutoComplete,{readonly:g,...v,defaultCoding:(b=c.rxNormCoding)!=null?b:{}})}},{label:"Latest Status",value:c.status,field:"status"},{label:"Instructions",value:c.dosage,field:"dosage"}]},medicationStatementSchema=mod.object({subjectID:mod.string({required_error:"Patient must be specified."}),dateAsserted:mod.date({required_error:"Date asserted is required."}),medication:mod.object({code:mod.string({required_error:"Please choose a medication."}),display:mod.string().optional(),system:mod.string().optional()}),dosage:mod.string().optional(),status:mod.enum(["active","completed","entered-in-error","intended","not-taken","on-hold","stopped","unknown"])});try{getMedicationFormData.displayName="getMedicationFormData",getMedicationFormData.__docgenInfo={description:"",displayName:"getMedicationFormData",props:{builderPatientRxNormStatus:{defaultValue:null,description:"",name:"builderPatientRxNormStatus",required:!1,type:{name:"Record<string, string>"}},basedOn:{defaultValue:null,description:"",name:"basedOn",required:!0,type:{name:"string | undefined"}},category:{defaultValue:null,description:"",name:"category",required:!0,type:{name:"string"}},context:{defaultValue:null,description:"",name:"context",required:!0,type:{name:"string | undefined"}},dateAsserted:{defaultValue:null,description:"",name:"dateAsserted",required:!0,type:{name:"string | undefined"}},derivedFrom:{defaultValue:null,description:"",name:"derivedFrom",required:!0,type:{name:"string[]"}},aggregatedFrom:{defaultValue:null,description:"",name:"aggregatedFrom",required:!0,type:{name:"Reference[]"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string"}},rxNormCoding:{defaultValue:null,description:"",name:"rxNormCoding",required:!0,type:{name:"Coding | undefined"}},dosage:{defaultValue:null,description:"",name:"dosage",required:!0,type:{name:"string | undefined"}},effectiveStart:{defaultValue:null,description:"",name:"effectiveStart",required:!0,type:{name:"string | undefined"}},identifier:{defaultValue:null,description:"",name:"identifier",required:!0,type:{name:"string | undefined"}},informationSource:{defaultValue:null,description:"",name:"informationSource",required:!0,type:{name:"Reference | undefined"}},medicationReference:{defaultValue:null,description:"",name:"medicationReference",required:!0,type:{name:"string | undefined"}},notesDisplay:{defaultValue:null,description:"",name:"notesDisplay",required:!0,type:{name:"string[]"}},partOf:{defaultValue:null,description:"",name:"partOf",required:!0,type:{name:"string | undefined"}},patientStatus:{defaultValue:null,description:"",name:"patientStatus",required:!0,type:{name:"string"}},rxNorm:{defaultValue:null,description:"",name:"rxNorm",required:!0,type:{name:"string | undefined"}},reason:{defaultValue:null,description:"",name:"reason",required:!0,type:{name:"string | undefined"}},reasonReference:{defaultValue:null,description:"",name:"reasonReference",required:!0,type:{name:"Reference[] | undefined"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"string"}},statusReason:{defaultValue:null,description:"",name:"statusReason",required:!0,type:{name:"string | undefined"}},subject:{defaultValue:null,description:"",name:"subject",required:!0,type:{name:"Reference"}},subjectID:{defaultValue:null,description:"",name:"subjectID",required:!0,type:{name:"string"}},lastFillDate:{defaultValue:null,description:"",name:"lastFillDate",required:!0,type:{name:"string | undefined"}},quantity:{defaultValue:null,description:"",name:"quantity",required:!0,type:{name:"string | undefined"}},daysSupply:{defaultValue:null,description:"",name:"daysSupply",required:!0,type:{name:"string | undefined"}},refills:{defaultValue:null,description:"",name:"refills",required:!0,type:{name:"string | undefined"}},lastPrescriber:{defaultValue:null,description:"",name:"lastPrescriber",required:!0,type:{name:"string | undefined"}},lastPrescribedDate:{defaultValue:null,description:"",name:"lastPrescribedDate",required:!0,type:{name:"string | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"MedicationStatement"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}const QUERY_KEYS=[QUERY_KEY_PATIENT,QUERY_KEY_PATIENT_MEDICATIONS,QUERY_KEY_PATIENT_BUILDER_MEDICATIONS],createMedicationStatement=async(c,d)=>{const g={resourceType:"MedicationStatement",status:c.status,dateAsserted:dateToISO(c.dateAsserted),subject:{type:"Patient",reference:`Patient/${c.subjectID}`},medicationCodeableConcept:{text:c.medication.display,coding:[{system:SYSTEM_RXNORM,code:c.medication.code}]},...c.dosage&&{dosage:[{text:c.dosage}]}},v=new MedicationStatementModel(g),b=await createFhirResourceWithProvenance(v.resource,await d());return await Promise.all(QUERY_KEYS.map(async _=>queryClient.invalidateQueries([_]))),b},AddNewMedDrawer=({isOpen:c,handleOnClose:d,medication:g,children:v})=>{var E,R;const b=usePatient(),_=getMedicationFormData(new MedicationStatementModel(g!=null?g:{resourceType:"MedicationStatement",status:"active",subject:{reference:`Patient/${(E=b.data)==null?void 0:E.id}`,display:(R=b.data)==null?void 0:R.display},dateAsserted:format(new Date,"yyyy-MM-dd")}));return React.createElement(React.Fragment,null,v,React.createElement(DrawerFormWithFields,{title:"Add Medication",action:createMedicationStatement,data:_,schema:medicationStatementSchema,isOpen:c,onClose:()=>d()}))};try{AddNewMedDrawer.displayName="AddNewMedDrawer",AddNewMedDrawer.__docgenInfo={description:"",displayName:"AddNewMedDrawer",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},handleOnClose:{defaultValue:null,description:"",name:"handleOnClose",required:!0,type:{name:"() => void"}},medication:{defaultValue:null,description:"",name:"medication",required:!1,type:{name:"MedicationStatement"}}}}}catch{}function useQueryGetPatientMedsForBuilder(){return useQueryWithPatient(QUERY_KEY_PATIENT_BUILDER_MEDICATIONS,[{informationSourceNot:"Patient"}],getBuilderMedications)}function useQueryGetSummarizedPatientMedications(){return useQueryWithPatient(QUERY_KEY_PATIENT_MEDICATIONS,[],getActiveMedications)}function useQueryAllPatientMedications(){const[c,d]=react.exports.useState(),[g,v]=react.exports.useState(),b=useQueryGetSummarizedPatientMedications(),_=useQueryGetPatientMedsForBuilder();react.exports.useEffect(()=>{var P,B;if(((P=b.data)==null?void 0:P.bundle)&&((B=_.data)==null?void 0:B.bundle)){const{medications:ee}=b.data,{medications:re}=_.data,ne=getMergedIncludedResources([b.data.bundle,_.data.bundle]),j=splitMedications(ee,re,ne);d(j.builderMedications.map(z=>new MedicationStatementModel(z,ne))),v(j.otherProviderMedications.map(z=>new MedicationStatementModel(z,ne)))}},[b.data,_.data]);const E=_.isLoading||b.isLoading,R=_.isFetching||b.isFetching,U=_.isError||b.isError;return{isFetching:R,isLoading:E,isError:U,builderMedications:c,otherProviderMedications:g}}function OtherProviderMedsTable({sortOrder:c="asc",sortColumn:d="display"}){const[g,v]=react.exports.useState([]),[b,_]=react.exports.useState(!1),[E,R]=react.exports.useState(!1),[U,P]=react.exports.useState(),{otherProviderMedications:B,isLoading:ee}=useQueryAllPatientMedications();function re(j){P(j),_(!0)}function ne(j){P(j),R(!0)}return react.exports.useEffect(()=>{!B||v(sort(B,fp.pipe(fp.get(d),fp.toLower),c))},[B,d,c]),React.createElement(React.Fragment,null,React.createElement(MedicationsTableBase,{medicationStatements:g,isLoading:ee,rowMenuActions:j=>[{name:"View History",action:async()=>{re(j)}},{name:"Add to Record",action:async()=>{ne(j)}}]}),React.createElement(MedicationDrawer,{medication:U,isOpen:b,onClose:()=>_(!1)}),React.createElement(AddNewMedDrawer,{medication:U==null?void 0:U.resource,isOpen:E,handleOnClose:()=>R(!1)}))}try{OtherProviderMedsTable.displayName="OtherProviderMedsTable",OtherProviderMedsTable.__docgenInfo={description:`Displays a table of medications that are not scoped to the current builder.
This component displays the inverse results of \`ProviderMedsTable\`.

The table has a menu to the right side which will pull out the
history for the medication listed in that row.`,displayName:"OtherProviderMedsTable",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},sortColumn:{defaultValue:{value:"display"},description:"",name:"sortColumn",required:!1,type:{name:"enum",value:[{value:'"builderPatientRxNormStatus"'},{value:'"basedOn"'},{value:'"category"'},{value:'"context"'},{value:'"dateAsserted"'},{value:'"derivedFrom"'},{value:'"aggregatedFrom"'},{value:'"display"'},{value:'"rxNormCoding"'},{value:'"dosage"'},{value:'"effectiveStart"'},{value:'"identifier"'},{value:'"informationSource"'},{value:'"medicationReference"'},{value:'"notesDisplay"'},{value:'"partOf"'},{value:'"patientStatus"'},{value:'"rxNorm"'},{value:'"reason"'},{value:'"reasonReference"'},{value:'"status"'},{value:'"statusReason"'},{value:'"subject"'},{value:'"subjectID"'},{value:'"lastFillDate"'},{value:'"quantity"'},{value:'"daysSupply"'},{value:'"refills"'},{value:'"lastPrescriber"'},{value:'"lastPrescribedDate"'},{value:'"resource"'},{value:'"includedResources"'},{value:'"revIncludes"'},{value:'"id"'},{value:'"isSummaryResource"'},{value:'"resourceType"'},{value:'"getBasicResourceByAction"'},{value:'"toString"'}]}},sortOrder:{defaultValue:{value:"asc"},description:"",name:"sortOrder",required:!1,type:{name:"enum",value:[{value:'"asc"'},{value:'"desc"'}]}}}}}catch{}function ProviderMedsTable({showInactive:c=!1,sortColumn:d="display",sortOrder:g="asc"}){const[v,b]=react.exports.useState([]),[_,E]=react.exports.useState(!1),[R,U]=react.exports.useState(),{builderMedications:P,isLoading:B}=useQueryAllPatientMedications();function ee(re){U(re),E(!0)}return react.exports.useEffect(()=>{!P||b(sort(c?P:P.filter(re=>re.status==="Active"),fp.pipe(fp.get(d),fp.toLower),g))},[P,d,g,c]),React.createElement(React.Fragment,null,React.createElement(MedicationsTableBase,{medicationStatements:v,isLoading:B,rowMenuActions:re=>[{name:"View History",action:async()=>{ee(re)}}]}),React.createElement(MedicationDrawer,{medication:R,isOpen:_,onClose:()=>E(!1)}))}try{ProviderMedsTable.displayName="ProviderMedsTable",ProviderMedsTable.__docgenInfo={description:`Displays a table of medications that are scoped to the CTWContext builder
and patient. To show medications that aren't scoped to the builder, use the
\`OtherProviderMedsTable\` instead.

The table has a menu to the right side which will pull out the
history for the medication listed in that row.`,displayName:"ProviderMedsTable",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},sortColumn:{defaultValue:{value:"display"},description:"",name:"sortColumn",required:!1,type:{name:"enum",value:[{value:'"builderPatientRxNormStatus"'},{value:'"basedOn"'},{value:'"category"'},{value:'"context"'},{value:'"dateAsserted"'},{value:'"derivedFrom"'},{value:'"aggregatedFrom"'},{value:'"display"'},{value:'"rxNormCoding"'},{value:'"dosage"'},{value:'"effectiveStart"'},{value:'"identifier"'},{value:'"informationSource"'},{value:'"medicationReference"'},{value:'"notesDisplay"'},{value:'"partOf"'},{value:'"patientStatus"'},{value:'"rxNorm"'},{value:'"reason"'},{value:'"reasonReference"'},{value:'"status"'},{value:'"statusReason"'},{value:'"subject"'},{value:'"subjectID"'},{value:'"lastFillDate"'},{value:'"quantity"'},{value:'"daysSupply"'},{value:'"refills"'},{value:'"lastPrescriber"'},{value:'"lastPrescribedDate"'},{value:'"resource"'},{value:'"includedResources"'},{value:'"revIncludes"'},{value:'"id"'},{value:'"isSummaryResource"'},{value:'"resourceType"'},{value:'"getBasicResourceByAction"'},{value:'"toString"'}]}},sortOrder:{defaultValue:{value:"asc"},description:"",name:"sortOrder",required:!1,type:{name:"enum",value:[{value:'"asc"'},{value:'"desc"'}]}},showInactive:{defaultValue:{value:"false"},description:"",name:"showInactive",required:!1,type:{name:"boolean"}}}}}catch{}function Wrapper({className:c,children:d}){return React.createElement("div",{className:cx("ctw-container",c)},d)}function StackedWrapper({className:c,children:d}){const g=react.exports.useRef(null),v=useBreakpoints(g),b=cx(c,{"ctw-stacked":v.sm});return React.createElement("div",{className:b,ref:g},d)}function Heading({className:c,title:d,children:g}){return React.createElement("div",{className:cx("ctw-heading-container",c)},d&&React.createElement("div",{className:"ctw-title"},d),g)}function Title({className:c,title:d,children:g}){return React.createElement("div",{className:cx("ctw-title-container",c)},d&&React.createElement("div",{className:"ctw-title"},d),g)}function Body({className:c,title:d,titleChildren:g,children:v}){const b=!!(d||g);return React.createElement("div",{className:cx("ctw-body-container",c)},React.createElement("div",{className:"ctw-space-y-3"},b&&React.createElement(Title,{title:d},g),v))}try{Wrapper.displayName="Wrapper",Wrapper.__docgenInfo={description:"",displayName:"Wrapper",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{StackedWrapper.displayName="StackedWrapper",StackedWrapper.__docgenInfo={description:"",displayName:"StackedWrapper",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{Heading.displayName="Heading",Heading.__docgenInfo={description:"",displayName:"Heading",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}try{Title.displayName="Title",Title.__docgenInfo={description:"",displayName:"Title",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}try{Body.displayName="Body",Body.__docgenInfo={description:"",displayName:"Body",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},titleChildren:{defaultValue:null,description:"",name:"titleChildren",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}}}}}catch{}const toggle="",Toggle=({name:c,text:d,onChange:g,inputProps:v})=>React.createElement("div",{className:"ctw-toggle"},React.createElement("div",{className:"ctw-relative ctw-mr-2 ctw-inline-block ctw-w-10 ctw-select-none ctw-align-middle ctw-transition ctw-duration-200 ctw-ease-in"},React.createElement("label",{htmlFor:c,className:"ctw-relative ctw-block ctw-h-6 ctw-cursor-pointer ctw-overflow-hidden ctw-rounded-full ctw-bg-divider-light"},React.createElement("input",{onChange:g,...v,type:"checkbox",name:c,id:c}),React.createElement("span",{className:"ctw-toggle-span"}))),React.createElement("label",{htmlFor:c,className:"ctw-text-sm ctw-font-medium ctw-text-icon-default"},d));try{Toggle.displayName="Toggle",Toggle.__docgenInfo={description:"",displayName:"Toggle",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},inputProps:{defaultValue:null,description:"",name:"inputProps",required:!1,type:{name:"{ value: string; defaultChecked: boolean; } | { value: string; checked: boolean; disabled: boolean; }"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement>) => void)"}}}}}catch{}const ToggleControl=({toggleProps:c,onFormChange:d})=>React.createElement("form",{onChange:d,className:"ctw-text-end"},React.createElement(Toggle,{...c}));try{ToggleControl.displayName="ToggleControl",ToggleControl.__docgenInfo={description:"",displayName:"ToggleControl",props:{toggleProps:{defaultValue:null,description:"",name:"toggleProps",required:!0,type:{name:"ToggleProps"}},onFormChange:{defaultValue:null,description:"",name:"onFormChange",required:!0,type:{name:"(e: FormEvent<HTMLFormElement>) => void"}}}}}catch{}const patientMedications="";function PatientMedications({className:c,readOnly:d=!1,showConfirmedMedsTable:g=!0,showOtherProvidersMedsTable:v=!0}){const[b,_]=react.exports.useState(!1),[E,R]=react.exports.useState(!1);return React.createElement(StackedWrapper,{className:cx("ctw-patient-medications",c)},React.createElement(Heading,{title:"Medications"},!d&&React.createElement(AddNewMedDrawer,{isOpen:b,handleOnClose:()=>_(!1)},React.createElement("button",{className:"ctw-btn-clear ctw-link",type:"button",onClick:()=>_(!0)},"+ Add Medication"))),g&&React.createElement(Body,null,React.createElement(Title,{title:"Confirmed Medications"},React.createElement(ToggleControl,{onFormChange:()=>R(!E),toggleProps:{name:"status",text:"Include Inactive"}})),React.createElement(ProviderMedsTable,{showInactive:E})),v&&React.createElement(Body,{title:"Other Provider Records"},React.createElement(OtherProviderMedsTable,null)))}try{PatientMedications.displayName="PatientMedications",PatientMedications.__docgenInfo={description:"",displayName:"PatientMedications",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"active"'},{value:'"entered-in-error"'},{value:'"not-taken"'},{value:'"completed"'},{value:'"on-hold"'},{value:'"intended"'},{value:'"stopped"'}]}},showConfirmedMedsTable:{defaultValue:{value:"true"},description:"",name:"showConfirmedMedsTable",required:!1,type:{name:"boolean"}},showOtherProvidersMedsTable:{defaultValue:{value:"true"},description:"",name:"showOtherProvidersMedsTable",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const pagination="",Pagination=({currentPage:c,isLoading:d=!1,pageSize:g,setCurrentPage:v,total:b})=>{const _=Math.min(b,(c-1)*g+1),E=Math.min(c*g,b),R=Math.ceil(b/g),U=Math.max(c-1,1),P=Math.min(c+1,R);let B=[1,R];return B.push(c-1,c,c+1),B=lodash.exports.uniq(B.sort((ee,re)=>ee-re).filter(ee=>ee>=1&&ee<=R)),React.createElement("div",{className:"ctw-flex ctw-justify-between ctw-py-3 ctw-px-6"},React.createElement("div",{className:"ctw-text-gray-600 ctw-text-sm"},d?React.createElement(Loading,null):React.createElement(React.Fragment,null,React.createElement("span",{className:"ctw-font-medium"},_)," to"," ",React.createElement("span",{className:"ctw-font-medium"},E)," of"," ",React.createElement("span",{className:"ctw-font-medium"},b)," results")),R>1&&React.createElement("div",null,React.createElement("nav",{className:"ctw-pagination-nav","aria-label":"Pagination"},React.createElement(Page,{page:U,setCurrentPage:v,className:"ctw-pagination-group-start ctw-hover:ctw-bg-gray-50",disabled:c===1},React.createElement("span",{className:"ctw-sr-only"},"Previous"),React.createElement(ChevronLeftIcon$1,{className:"ctw-h-5 ctw-w-5","aria-hidden":"true"})),B.map((ee,re)=>{var z;const ne=(z=B[re-1])!=null?z:0,j=ee-ne-1;return React.createElement(react.exports.Fragment,{key:ee},j>1&&React.createElement("span",{className:"ctw-pagination-ellipsis"},"..."),j===1&&React.createElement(Page,{page:ee-1,setCurrentPage:v,currentPage:c}),React.createElement(Page,{setCurrentPage:v,page:ee,currentPage:c}))}),React.createElement(Page,{page:P,setCurrentPage:v,className:"ctw-pagination-group-end",disabled:c===R},React.createElement("span",{className:"ctw-sr-only"},"Next"),React.createElement(ChevronRightIcon$1,{className:"ctw-h-5 ctw-w-5","aria-hidden":"true"})))))},Page=({setCurrentPage:c,page:d,currentPage:g,children:v,className:b,disabled:_=!1})=>{const E=d===g;return React.createElement("button",{type:"button",disabled:_,onClick:()=>c(d),className:cx(b,"ctw-pagination-page-btn",{active:E,disabled:_})},v||d)};try{Pagination.displayName="Pagination",Pagination.__docgenInfo={description:"",displayName:"Pagination",props:{currentPage:{defaultValue:null,description:"",name:"currentPage",required:!0,type:{name:"number"}},isLoading:{defaultValue:{value:"false"},description:"",name:"isLoading",required:!1,type:{name:"boolean"}},pageSize:{defaultValue:null,description:"",name:"pageSize",required:!0,type:{name:"number"}},setCurrentPage:{defaultValue:null,description:"",name:"setCurrentPage",required:!0,type:{name:"(n: number) => void"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"number"}}}}}catch{}const patientsTable="";function usePatientsList(c,d,g){return useQueryWithCTW(QUERY_KEY_PATIENTS_LIST,[c,d,g],getBuilderPatientsList)}const PatientsTable=({className:c,handleAddNewPatient:d,handleRowClick:g,pageSize:v=5,title:b="Patients"})=>{const[_,E]=react.exports.useState(1),[R,U]=react.exports.useState(0),[P,B]=react.exports.useState([]),[ee,re]=react.exports.useState(),{data:{patients:ne,total:j}={},isFetching:z,isError:W}=usePatientsList(v,_-1,ee),O=react.exports.useCallback(lodash.exports.debounce(Y=>{re(Y),E(1),U(0),B([])},100),[]);return react.exports.useEffect(()=>{!z&&ne&&(U(j!=null?j:0),B(ne))},[ne,j,W,z]),react.exports.useEffect(()=>{W&&(U(0),B([]))},[W,z]),React.createElement(StackedWrapper,{className:cx("ctw-patients-table",c)},React.createElement(Heading,{title:b},React.createElement("div",{className:"ctw-relative"},React.createElement("div",{className:"ctw-search-icon-wrapper"},React.createElement(SearchIcon$1,{className:"ctw-search-icon"})),React.createElement("input",{type:"text",className:"ctw-patients-table-search",placeholder:"Search",name:"searchPatientName",onChange:Y=>O(Y.currentTarget.value)}))),React.createElement(Body,null,React.createElement(Table$1,{records:P,columns,handleRowClick:g,hidePagination:!0},React.createElement(Pagination,{setCurrentPage:E,total:R,currentPage:_,pageSize:v,isLoading:z}))))},columns=[{title:"Name",render:c=>React.createElement(PatientNameColumn,{patient:c})},{title:"Contact",render:({email:c,phoneNumber:d})=>React.createElement(React.Fragment,null,React.createElement("div",{className:"ctw-patients-table-email"},c),React.createElement("div",{className:"ctw-patients-table-phone"},d))}],PatientNameColumn=({patient:c})=>React.createElement("div",{className:"ctw-flex ctw-items-center"},React.createElement("div",{className:"ctw-ml-4"},React.createElement("div",{className:"ctw-flex ctw-font-medium"},React.createElement("div",{className:"ctw-max-w-xs"},c.fullName),c.gender&&React.createElement("div",{className:"ctw-uppercase"}," (",c.gender[0],")")),React.createElement("div",{className:"ctw-text-content-lighter"},c.dob," (",c.age,")")));try{PatientsTable.displayName="PatientsTable",PatientsTable.__docgenInfo={description:"PatientsTable displays a paginated list of all patients for a builder. In\naddition to having configurable page size, lazy loading and name search, the\ncomponent accepts an `onRowClick` prop so developers can add their own\nlogic when a row is clicked. The `onRowClick` receives the targeted\n`PatientModel` as its sole argument, which contains the underlying FHIR\nobject as `.resource`.",displayName:"PatientsTable",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}},handleRowClick:{defaultValue:null,description:"",name:"handleRowClick",required:!0,type:{name:"(row: PatientModel) => void"}},handleAddNewPatient:{defaultValue:null,description:"",name:"handleAddNewPatient",required:!1,type:{name:"(() => void)"}},pageSize:{defaultValue:{value:"5"},description:"",name:"pageSize",required:!1,type:{name:"number"}},title:{defaultValue:{value:"Patients"},description:"",name:"title",required:!1,type:{name:"string"}},getRowClasses:{defaultValue:null,description:"",name:"getRowClasses",required:!1,type:{name:"((row: PatientModel) => Argument)"}},onRowClick:{defaultValue:null,description:"",name:"onRowClick",required:!1,type:{name:"((row: PatientModel) => void)"}}}}}catch{}const Badge=({className:c,color:d,text:g})=>{const v={primary:"ctw-bg-primary-light ctw-text-primary-main",gray:"ctw-bg-bg-light ctw-text-content-light",info:"ctw-bg-info-light ctw-text-info-main",success:"ctw-bg-success-light ctw-text-success-main",caution:"ctw-bg-caution-light ctw-text-caution-main",error:"ctw-bg-error-light ctw-text-error-main"}[d];return React.createElement("span",{className:cx(c,v,"ctw-inline-flex ctw-rounded-full ctw-px-2 ctw-text-xs ctw-font-semibold ctw-leading-5")},g)};try{Badge.displayName="Badge",Badge.__docgenInfo={description:"",displayName:"Badge",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"enum",value:[{value:'"error"'},{value:'"primary"'},{value:'"gray"'},{value:'"info"'},{value:'"success"'},{value:'"caution"'}]}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}}}catch{}const Modal=({isOpen:c,onAfterClosed:d,children:g,className:v})=>React.createElement(We$1,{appear:!0,show:c,as:react.exports.Fragment},React.createElement(gt,{as:"div",className:"ctw-relative ctw-z-[10100]",onClose:()=>{}},React.createElement(We$1.Child,{as:react.exports.Fragment,enter:"ctw-ease-out ctw-duration-300",enterFrom:"ctw-opacity-0",enterTo:"ctw-opacity-100",leave:"ctw-ease-in ctw-duration-200",leaveFrom:"ctw-opacity-100",leaveTo:"ctw-opacity-0",afterLeave:d},React.createElement("div",{className:"ctw-fixed ctw-inset-0  ctw-transition-opacity"},React.createElement("div",{className:"ctw-h-full ctw-w-full ctw-bg-content-light ctw-opacity-75"}))),React.createElement("div",{className:"ctw-fixed ctw-inset-0 ctw-overflow-auto"},React.createElement("div",{className:"ctw-flex ctw-min-h-full ctw-items-center ctw-justify-center ctw-p-4 ctw-text-center"},React.createElement(We$1.Child,{as:react.exports.Fragment,enter:"ctw-ease-out ctw-duration-300",enterFrom:"ctw-opacity-0 ctw-scale-95",enterTo:"ctw-opacity-100 ctw-scale-100",leave:"ctw-ease-in ctw-duration-200",leaveFrom:"ctw-opacity-100 ctw-scale-100",leaveTo:"ctw-opacity-0 ctw-scale-95"},React.createElement(gt.Panel,{className:cx("ctw-min-w-fit ctw-max-w-lg ctw-transform ctw-rounded-lg ctw-bg-white ctw-py-10 ctw-px-10 ctw-align-middle ctw-shadow-xl",v)},React.createElement("div",{className:"ctw-flex ctw-h-full ctw-flex-col ctw-space-y-6"},g)))))));try{Modal.displayName="Modal",Modal.__docgenInfo={description:"",displayName:"Modal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onAfterClosed:{defaultValue:null,description:"",name:"onAfterClosed",required:!1,type:{name:"(() => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const CCSChapterName={INF:{fullName:"Certain Infectious and Parasitic Diseases",shortName:"Infectious and Parasitic Diseases"},NEO:{fullName:"Neoplasms",shortName:"Neoplasms"},BLD:{fullName:"Diseases of the Blood and Blood Forming Organs and Certain Disorders Involving the Immune Mechanism",shortName:"Blood Diseases"},END:{fullName:"Endocrine, Nutritional and Metabolic Diseases",shortName:"Endocrine, Nutritional and Metabolic"},MBD:{fullName:"Mental, Behavioral and Neurodevelopmental Disorders",shortName:"Mental and Behavioral"},NVS:{fullName:"Diseases of the Nervous System",shortName:"Nervous System"},EYE:{fullName:"Diseases of the Eye and Adnexa",shortName:"Eye and Adnexa"},EAR:{fullName:"Diseases of the Ear and Mastoid Process",shortName:"Ear and Mastoid Process"},CIR:{fullName:"Diseases of the Circulatory System",shortName:"Circulatory System"},RSP:{fullName:"Diseases of the Respiratory System",shortName:"Respiratory System"},DIG:{fullName:"Diseases of the Digestive System",shortName:"Digestive System"},SKN:{fullName:"Diseases of the Skin and Subcutaneous Tissue",shortName:"Skin and Subcutaneous Tissue"},MUS:{fullName:"Diseases of the Musculoskeletal System and Connective Tissue",shortName:"Musculoskeletal System"},GEN:{fullName:"Diseases of the Genitourinary System",shortName:"Genitourinary System"},PRG:{fullName:"Pregnancy, Childbirth and the Puerperium",shortName:"Pregnancy & Childbirth"},PNL:{fullName:"Certain Conditions Originating in the Perinatal Period",shortName:"Perinatal Conditions"},MAL:{fullName:"Congenital Malformations, Deformations and Chromosomal Abnormalities",shortName:"Malformations and Chromosomal Abnormalities"},SYM:{fullName:"Symptoms, Signs and Abnormal Clinical and Laboratory Findings",shortName:"Clinical Findings"},INJ:{fullName:"Injury, Poisoning and Certain Other Consequences of External Causes",shortName:"External Causes Injury"},EXT:{fullName:"External Causes of Morbidity",shortName:"External Morbidity"},FAC:{fullName:"Factors Influencing Health Status and Contact with Health Services",shortName:"Health Status Influences"},XXX:{fullName:"Unacceptable principal diagnosis (inpatient data) or first-listed diagnosis (outpatient data)",shortName:"Unacceptable principal diagnosis"}};function getAddConditionWithDefaults(c){const d=lodash.exports.cloneDeep(c);return d.clinicalStatus={coding:[{system:SYSTEM_CONDITION_CLINICAL,code:"active",display:"Active"}],text:"active"},d.verificationStatus={coding:[{system:SYSTEM_CONDITION_VERIFICATION_STATUS,code:"confirmed",display:"Confirmed"}],text:"confirmed"},d}const createOrEditCondition=async(c,d,g,v)=>{const b=await v(),_={resourceType:"Condition",id:g.id,recorder:await getUsersPractitionerReference(b),clinicalStatus:{coding:[{system:SYSTEM_CONDITION_CLINICAL,code:g.clinicalStatus}]},verificationStatus:{coding:[{system:SYSTEM_CONDITION_VERIFICATION_STATUS,code:g.verificationStatus}]},category:g.id&&c?c.resource.category:[{coding:[{system:SYSTEM_CONDITION_CATEGORY,code:"problem-list-item",display:"Problem List Item"}]}],code:g.id&&c?c.codings:{coding:[{system:g.condition.system,code:g.condition.code,display:g.condition.display}],text:g.condition.display},...g.abatement&&{abatementDateTime:dateToISO(g.abatement)},onsetDateTime:dateToISO(g.onset),recordedDate:dateToISO(new Date),subject:{type:"Patient",reference:`Patient/${d}`},note:g.note?[{text:g.note}]:void 0};g.verificationStatus==="entered-in-error"&&(_.clinicalStatus=void 0);const E=await createOrEditFhirResource(_,b);return await Promise.all([queryClient.invalidateQueries([QUERY_KEY_PATIENT_CONDITIONS]),queryClient.invalidateQueries([QUERY_KEY_OTHER_PROVIDER_CONDITIONS])]),E},CONDITION_CODE_PREFERENCE_ORDER=[{system:SYSTEM_SNOMED,checkForEnrichment:!0},{system:SYSTEM_ICD10,checkForEnrichment:!0},{system:SYSTEM_SNOMED},{system:SYSTEM_ICD10},{system:SYSTEM_ICD10_CM},{system:SYSTEM_ICD9},{system:SYSTEM_ICD9_CM}];function getNewCondition(c){const d={resourceType:"Condition",subject:{type:"Patient",reference:`Patient/${c}`}};return getAddConditionWithDefaults(d)}function usePatientConditions(){return useQueryWithPatient(QUERY_KEY_PATIENT_CONDITIONS,[],async(c,d)=>{try{const{bundle:g,resources:v}=await searchBuilderRecords("Condition",c,{patientUPID:d.UPID});return filterAndSort(setupConditionModels(v,g))}catch(g){throw new Error(`Failed fetching condition information for patient: ${g}`)}})}function useOtherProviderConditions(){return useQueryWithPatient(QUERY_KEY_OTHER_PROVIDER_CONDITIONS,[],async(c,d)=>{try{const{bundle:g,resources:v}=await searchSummaryRecords("Condition",c,{_revinclude:"Basic:subject",patientUPID:d.UPID});return filterAndSort(setupConditionModels(v,g))}catch(g){throw new Error(`Failed fetching condition information for patient: ${g}`)}})}function useConditionHistory(c){return useQueryWithPatient(QUERY_KEY_CONDITION_HISTORY,[c],async(d,g)=>{if(!!c)try{const v=c.knownCodings.map(R=>`${R.system}|${R.code}`),b={patientUPID:g.UPID,_include:["Condition:patient","Condition:encounter"],"_include:iterate":"Patient:organization"};v.length>0?b.code=v.join(","):b._id=c.id;const{resources:_,bundle:E}=await searchCommonRecords("Condition",d,b);return{conditions:_,bundle:E}}catch(v){throw new Error(`Failed fetching condition history information for patient: ${v}`)}},!!c)}function setupConditionModels(c,d){const g=getIncludedBasics(d);return c.map(v=>{var b;return new ConditionModel(v,void 0,g[(b=v.id)!=null?b:""])})}function filterAndSort(c){return lodash.exports.orderBy(c.filter(d=>{var g;return((g=d.resource.asserter)==null?void 0:g.type)!=="Patient"}),[d=>{var g;return(g=d.resource.recordedDate)!=null?g:""},d=>d.display],["desc"])}async function getBinary(c,d){const g=new Map;return d&&await Promise.all(d.map(async v=>{var P,B;const b=`${getZusApiBaseUrl(c.env)}/fhir/Provenance?target=Condition/${v.id}`,E=await(await fetch(b,{headers:{Authorization:`Bearer ${c.authToken}`}})).json();let R;if(((B=(P=E.entry)==null?void 0:P[0].resource.entity)==null?void 0:B[0].role)==="source"){const ee=E.entry[0].resource.entity[0].what.reference,re=`${getZusApiBaseUrl(c.env)}/fhir/${ee}`;R=await(await fetch(re,{headers:{Authorization:`Bearer ${c.authToken}`,accept:"application/json","Content-Type":"application/json+fhir"}})).json()}const U={xmlBinary:R||void 0,isBinary:(R==null?void 0:R.data)!==void 0};g.set(v.id,U)})),g}class ConditionModel extends FHIRModel{get abatement(){var d,g,v;return this.resource.abatementAge?(d=this.resource.abatementAge.value)==null?void 0:d.toString():this.resource.abatementDateTime?formatDateISOToLocal(this.resource.abatementDateTime):this.resource.abatementPeriod?formatDateISOToLocal(this.resource.abatementPeriod.start):this.resource.abatementRange?formatDateISOToLocal((v=(g=this.resource.abatementRange.low)==null?void 0:g.value)==null?void 0:v.toString()):this.resource.abatementString}get active(){var g;const d=lodash.exports.find((g=this.resource.clinicalStatus)==null?void 0:g.coding,{system:SYSTEM_CONDITION_CLINICAL});return d!=null&&d.code?["active","recurrence","relapse"].includes(d.code):!1}get isArchived(){return this.getBasicResourceByAction("archive")!==void 0}get asserter(){var d;return(d=this.resource.asserter)==null?void 0:d.display}get bodySites(){var d;return((d=this.resource.bodySite)==null?void 0:d.map(g=>codeableConceptLabel(g)))||[]}get categories(){var d;return((d=this.resource.category)==null?void 0:d.map(g=>codeableConceptLabel(g)))||[]}get ccsChapter(){var g;const d=this.ccsChapterCode;if(!!d)return(g=CCSChapterName[d])==null?void 0:g.shortName}get ccsChapterCode(){var d,g;return(g=(d=findCoding(SYSTEM_CCS,this.resource.code))==null?void 0:d.code)==null?void 0:g.slice(0,3)}get ccsGrouping(){var d;return(d=findCoding(SYSTEM_CCS,this.resource.code))==null?void 0:d.display}get clinicalStatus(){return codeableConceptLabel(this.resource.clinicalStatus)}get clinicalStatusCode(){var d,g;return(g=lodash.exports.find((d=this.resource.clinicalStatus)==null?void 0:d.coding,{system:SYSTEM_CONDITION_CLINICAL}))==null?void 0:g.code}get codings(){return this.resource.code}get display(){var d,g;return(g=(d=findCodingByOrderOfPreference(CONDITION_CODE_PREFERENCE_ORDER,this.resource.code))==null?void 0:d.display)!=null?g:codeableConceptLabel(this.resource.code)}get encounter(){var d;return(d=this.resource.encounter)==null?void 0:d.display}get evidences(){var d;return((d=this.resource.evidence)==null?void 0:d.map(g=>{var v;return codeableConceptLabel((v=g.code)==null?void 0:v[0])}))||[]}get icd10Code(){var d;return(d=findCoding(SYSTEM_ICD10,this.resource.code))==null?void 0:d.code}get icd10System(){var d;return(d=findCoding(SYSTEM_ICD10,this.resource.code))==null?void 0:d.system}get icd10Display(){var d;return(d=findCoding(SYSTEM_ICD10,this.resource.code))==null?void 0:d.display}get knownCodings(){const d=lodash.exports.compact(CONDITION_CODE_PREFERENCE_ORDER.map(v=>v.checkForEnrichment?findCodingWithEnrichment(v.system,this.resource.code):findCoding(v.system,this.resource.code)));return lodash.exports.uniqWith(d,(v,b)=>v.system===b.system)}knownCodingsMatch(d){return lodash.exports.intersectionWith(this.knownCodings,d.knownCodings,(g,v)=>g.code===v.code&&g.system===v.system).length>0}get notes(){var d;return((d=this.resource.note)==null?void 0:d.map(g=>g.text))||[]}get onset(){var d,g,v;return this.resource.onsetAge?(d=this.resource.onsetAge.value)==null?void 0:d.toString():this.resource.onsetDateTime?formatDateISOToLocal(this.resource.onsetDateTime):this.resource.onsetPeriod?formatDateISOToLocal(this.resource.onsetPeriod.start):this.resource.onsetRange?formatDateISOToLocal((v=(g=this.resource.onsetRange.low)==null?void 0:g.value)==null?void 0:v.toString()):formatStringToDate(this.resource.onsetString)}get patient(){const d=findReference("Patient",this.resource.contained,this.includedResources,this.resource.subject.reference);if(d)return new PatientModel(d,this.includedResources)}get preferredCoding(){return findCodingByOrderOfPreference(CONDITION_CODE_PREFERENCE_ORDER,this.resource.code)}get recordedDate(){return formatDateISOToLocal(this.resource.recordedDate)}get recorded(){return formatDateISOToLocal(this.resource.recordedDate)}get recorder(){var d;return(d=this.resource.recorder)==null?void 0:d.display}get severity(){return codeableConceptLabel(this.resource.severity)}get snomedCoding(){return findCoding(SYSTEM_SNOMED,this.resource.code)}get snomedCode(){var d;return(d=findCoding(SYSTEM_SNOMED,this.resource.code))==null?void 0:d.code}get snomedDisplay(){var d;return(d=findCoding(SYSTEM_SNOMED,this.resource.code))==null?void 0:d.display}get snomedSystem(){var d;return(d=findCoding(SYSTEM_SNOMED,this.resource.code))==null?void 0:d.system}get stages(){var d;return((d=this.resource.stage)==null?void 0:d.map(g=>{const v=codeableConceptLabel(g.summary),b=codeableConceptLabel(g.type);return`Summary: ${v}, Type: ${b}`}))||[]}get status(){function d(g){switch(g){case"active":case"recurrence":case"relapse":return"Active";case"inactive":case"remission":case"resolved":return"Inactive";default:return"Unknown"}}if(this.isSummaryResource)return this.isArchived?"Dismissed":d(this.clinicalStatusCode);switch(this.verificationStatusCode){case"confirmed":return d(this.clinicalStatusCode);case"unconfirmed":return"Pending";case"refuted":return"Refuted";case"entered-in-error":return"Entered in Error";default:return"Unknown"}}get subjectID(){var g;const[,d]=((g=this.resource.subject.reference)==null?void 0:g.split("/"))||[];return d||""}get verificationStatus(){return codeableConceptLabel(this.resource.verificationStatus)}get verificationStatusCode(){var d,g;return(g=lodash.exports.find((d=this.resource.verificationStatus)==null?void 0:d.coding,{system:SYSTEM_CONDITION_VERIFICATION_STATUS}))==null?void 0:g.code}}function isError(c){return typeof c=="object"&&c!==null?"message"in c:!1}const errorResponse=(c,d)=>{if(isFhirError(d))throw fhirErrorResponse(c,d);return isError(d)?{title:c,statusText:d.message}:{title:c}},getFormResponseErrors=c=>{let d=[],g=!0;return isFhirError(c)&&isOperationOutcome(c.response.data)?(d=new OperationOutcomeModel(c.response.data).issues.filter(v=>v.severity!=="warning").map(v=>v.display),g=!1):c instanceof Error&&(d=[c.message],g=!1),{requestErrors:d,responseIsSuccess:g}};function parseParams(c,d,g,v){var E;let b=d;for(;b instanceof ZodObject||b instanceof ZodEffects;)if(b=b instanceof ZodObject?b.shape:b instanceof ZodEffects?b._def.schema:null,b===null)throw new Error(`Could not find shape for key ${g}`);if(g.includes(".")){let[R,...U]=g.split(".");c[R]=(E=c[R])!=null?E:{},parseParams(c[R],b[R],U.join("."),v);return}g.includes("[]")&&(g=g.replace("[]",""));const _=b[g];_&&processDef(_,c,g,v)}function processDef(c,d,g,v){let b;if(c instanceof ZodString||c instanceof ZodLiteral)b=v;else if(c instanceof ZodNumber){const _=Number(v);b=isNaN(_)?v:_}else if(c instanceof ZodDate){const _=Date.parse(v);b=isNaN(_)?v:new Date(_)}else if(c instanceof ZodBoolean)b=v==="true"?!0:v==="false"?!1:Boolean(v);else if(c instanceof ZodNativeEnum||c instanceof ZodEnum)b=v;else if(c instanceof ZodOptional||c instanceof ZodDefault){processDef(c._def.innerType,d,g,v);return}else if(c instanceof ZodArray){d[g]===void 0&&(d[g]=[]),processDef(c.element,d,g,v);return}else if(c instanceof ZodEffects){processDef(c._def.schema,d,g,v);return}else if(c instanceof ZodObject){const _=JSON.parse(v);b=_,Object.entries(c.shape).forEach(([E,R])=>{b[E]||delete _[E]})}else if(c instanceof ZodUnknown)b=JSON.parse(v);else throw new Error(`Unexpected type ${c._def.typeName} for key ${g}`);Array.isArray(d[g])?d[g].push(b):d[g]=b}function isIterable(c){return Symbol.iterator in Object(c)}function getParamsInternal(c,d){let g={},v=[];isIterable(c)?v=Array.from(c):v=Object.entries(c);for(const[U,P]of v)P!==""&&parseParams(g,d,U,P);const _=d.safeParse(g);if(_.success)return{success:!0,data:_.data,errors:void 0};const E={},R=(U,P)=>{E.hasOwnProperty(U)?E[U]=[...E[U],P]:E[U]=[P]};return _.error.issues.forEach(U=>{const{message:P,path:B,code:ee,expected:re,received:ne}=U,[j,z]=B;let W=g[j];z!==void 0&&(W=W[z]),R(j,P)}),{success:!1,data:void 0,errors:E}}async function getFormData(c,d){return getParamsInternal(c,d)}function getOptions(c,d){var v;const g=c.shape[d];return(g==null?void 0:g.options)||((v=g==null?void 0:g.unwrap)==null?void 0:v.call(g).options)}function useFormInputProps(c,d={}){const g=c instanceof ZodEffects?c._def.schema:c,{shape:v}=g,b=d;return function(E,R={}){R={...b,...R};const U=v[E];if(!U)throw new Error(`no such key: ${E}`);return getInputProps(E,g,U)}}function getInputProps(c,d,g){var ee,re,ne,j;let v="text",b,_,E,R,U;const P=getOptions(d,c);if(g instanceof ZodString){g.isEmail?v="email":g.isURL&&(v="url"),E=(ee=g.minLength)!=null?ee:void 0,R=(re=g.maxLength)!=null?re:void 0;const z=g._def.checks.find(W=>W.kind==="regex");U=z?z.regex.source:void 0}else if(g instanceof ZodNumber)v="number",b=(ne=g.minValue)!=null?ne:void 0,_=(j=g.maxValue)!=null?j:void 0;else if(g instanceof ZodBoolean)v="checkbox";else if(g instanceof ZodDate||g._def.innerType instanceof ZodDate)v="date";else if(g instanceof ZodArray)return getInputProps(c,d,g.element);const B={name:c,type:v,options:P};return g instanceof ZodOptional||(B["aria-required"]=!0),b&&(B.min=b),_&&(B.max=_),E&&Number.isFinite(E)&&(B.minLength=E),R&&Number.isFinite(R)&&(B.maxLength=R),U&&(B.pattern=U),B}const DrawerForm=({action:c,onClose:d,children:g,schema:v,...b})=>{const[_,E]=react.exports.useState(!1),[R,U]=react.exports.useState(),{getRequestContext:P}=useCTW(),B=()=>{U({}),E(!1)},ee=async re=>{re.preventDefault(),E(!0);const ne=re.target,j=Array.from(re.target.querySelectorAll("input")),z={};if(j.forEach(H=>{H.checkValidity()||(z[H.name]=[`The value is not valid for ${H.name}`])}),!lodash.exports.isEmpty(z)){U({formErrors:z}),E(!1);return}const W=new FormData(ne),O=await getFormData(W,v);if(!O.success){U({formErrors:O.errors,requestErrors:void 0}),E(!1);return}let Y,Q,X;try{Y=await c(O.data,P)}catch{Q=!1,X=[]}if(Y){const H=getFormResponseErrors(Y);Q=H.responseIsSuccess,X=H.requestErrors}Q?(E(!1),d()):(U({formErrors:void 0,requestErrors:X}),E(!1))};return React.createElement(Drawer,{...b,onClose:d,onAfterClosed:B},React.createElement("form",{className:"ctw-flex ctw-h-full ctw-flex-col ctw-overflow-y-auto",onSubmit:ee,noValidate:!0},React.createElement(Drawer.Body,null,React.createElement("div",{className:"ctw-space-y-4"},(R==null?void 0:R.requestErrors)&&React.createElement(ErrorAlert,{header:"There was an error with your submission"},R.requestErrors.length===1?R.requestErrors[0]:React.createElement("ul",{className:"ctw-m-0 ctw-list-disc ctw-px-4"},R.requestErrors.map(re=>React.createElement("li",null,re)))),g(_,R==null?void 0:R.formErrors))),React.createElement(Drawer.Footer,null,React.createElement("div",{className:"ctw-flex ctw-items-center ctw-justify-between"},React.createElement(React.Fragment,null,(R==null?void 0:R.requestErrors)&&React.createElement("div",{className:"ctw-text-sm ctw-font-medium ctw-text-error-heading"},"There was an error with your submission")),React.createElement("div",{className:"ctw-ml-auto ctw-flex ctw-h-full ctw-space-x-3 ctw-justify-self-end"},React.createElement("button",{type:"button",className:"ctw-btn-default",onClick:d},"Cancel"),React.createElement(SaveButton,{submitting:_}))))))};try{DrawerForm.displayName="DrawerForm",DrawerForm.__docgenInfo={description:"",displayName:"DrawerForm",props:{action:{defaultValue:null,description:"",name:"action",required:!0,type:{name:"(data: T, getRequestContext: () => Promise<CTWRequestContext>) => Promise<unknown>"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"AnyZodSchema"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},onAfterClosed:{defaultValue:null,description:`Called after drawer closing animation has ended. Use this for
any cleanup that would affect the content displayed in the drawer.`,name:"onAfterClosed",required:!1,type:{name:"(() => void)"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},disableCloseOnBlur:{defaultValue:null,description:"",name:"disableCloseOnBlur",required:!1,type:{name:"boolean"}}}}}catch{}const FormField=({errors:c,options:d,lines:g,defaultValue:v,readonly:b,hidden:_,render:E,...R})=>{const U=R.type==="date"?formatDateLocalToISO(v):v,P=()=>E?E(b,{...R,defaultValue:v,hidden:_}):d?React.createElement("select",{className:cx({"ctw-error":c},"ctw-listbox-button ctw-w-full"),name:R.name,id:R.name,disabled:R.disabled,defaultValue:U},d.map(B=>React.createElement("option",{value:B,key:B},lodash.exports.startCase(B)))):g?React.createElement("textarea",{rows:g,className:cx({"ctw-error":c},"ctw-listbox-textarea ctw-w-full ctw-whitespace-pre-wrap"),defaultValue:U,disabled:R.disabled,readOnly:b,name:R.name,id:R.name}):React.createElement("input",{...R,id:R.name,type:R.type,className:cx({"ctw-error":c},"ctw-listbox-input ctw-w-full"),readOnly:b,...U?{defaultValue:U}:{}});return E&&_?E(b,{...R,defaultValue:v,hidden:_}):_?React.createElement("input",{...R,defaultValue:U,hidden:_}):React.createElement(React.Fragment,null,React.createElement("div",{className:"ctw-relative"},P(),b&&React.createElement(LockClosedIcon$1,{className:"ctw-absolute ctw-right-3 ctw-top-1/2 ctw-h-4 ctw-w-4 ctw--translate-y-1/2 ctw-transform ctw-fill-content-lighter"}),c&&React.createElement("div",{className:"ctw-pointer-events-none ctw-absolute ctw-right-0 ctw-top-2 ctw-pr-4"},React.createElement(ExclamationCircleIcon$1,{className:"ctw-h-5 ctw-w-5 ctw-text-error-main","aria-hidden":"true"}))),c&&React.createElement("div",{className:"ctw-text-xs ctw-italic ctw-text-error-main"},c.length>1?c.map(B=>React.createElement("div",{key:B},"\u2022 ",B)):c[0]))};try{FormField.displayName="FormField",FormField.__docgenInfo={description:"",displayName:"FormField",props:{errors:{defaultValue:null,description:"",name:"errors",required:!1,type:{name:"string[]"}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:"string[]"}},lines:{defaultValue:null,description:"",name:"lines",required:!1,type:{name:"number"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"((string | string[]) & (string | number | readonly string[]))"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}},render:{defaultValue:null,description:"",name:"render",required:!1,type:{name:"((readonly: boolean, props: InputHTMLAttributes<HTMLInputElement>) => Element)"}}}}}catch{}const FormFieldLabel=({label:c,required:d,name:g})=>React.createElement("div",{className:"ctw-flex ctw-items-center ctw-justify-between"},React.createElement("label",{htmlFor:g},c),!d&&React.createElement("span",{className:"ctw-right-0 ctw-inline-block ctw-text-xs ctw-text-content-light"},"Optional"),d&&React.createElement(React.Fragment,null,React.createElement("div",{className:"ctw-flex-grow ctw-text-icon-default"},"*")));try{FormFieldLabel.displayName="FormFieldLabel",FormFieldLabel.__docgenInfo={description:"",displayName:"FormFieldLabel",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const DrawerFormWithFields=({title:c,header:d,data:g=[],schema:v,action:b,..._})=>{const E=useFormInputProps(v);return React.createElement(DrawerForm,{title:c,action:b,schema:v,..._},(R,U)=>React.createElement("div",{className:"ctw-space-y-4"},d,React.createElement("div",{className:"ctw-space-y-6"},g.map(P=>{if(lodash.exports.isArray(P))return React.createElement(FormFieldEntries,{recordList:P,errors:U,submitting:R,schema:v,key:P[0].label});const{label:B,field:ee,value:re,lines:ne,readonly:j,hidden:z,render:W}=P;if(!ee)return React.createElement(FormField,{key:B,readonly:j,render:W,name:B});const O=E(ee,v);return z?React.createElement(FormField,{...O,key:B,lines:ne,disabled:R,readonly:j,defaultValue:re,errors:U==null?void 0:U[ee],hidden:z,render:W}):React.createElement(FormFieldEntry,{key:P.label,entry:P,errors:U,props:O,submitting:R})}))))},FormFieldEntries=({recordList:c,errors:d,submitting:g,schema:v})=>{const b=useFormInputProps(v);return React.createElement("div",{className:"ctw-flex ctw-space-x-3"},c.map(_=>React.createElement(react.exports.Fragment,{key:_.label},React.createElement(FormFieldEntry,{entry:_,props:b(_.field,v),submitting:g,errors:d}))))},FormFieldEntry=({entry:c,errors:d,props:g,submitting:v})=>{const{label:b,value:_,field:E,lines:R,readonly:U,hidden:P,render:B}=c,ee=d==null?void 0:d[E];return React.createElement("div",{key:b,className:"ctw-flex ctw-grow ctw-basis-0 ctw-flex-col ctw-space-y-1.5 ctw-text-sm ctw-font-medium ctw-text-content-black"},React.createElement(FormFieldLabel,{label:b,name:g.name,required:g["aria-required"]}),React.createElement(FormField,{...g,key:b,lines:R,disabled:v,readonly:U,defaultValue:_,errors:ee,hidden:P,render:B}))};try{DrawerFormWithFields.displayName="DrawerFormWithFields",DrawerFormWithFields.__docgenInfo={description:"",displayName:"DrawerFormWithFields",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},header:{defaultValue:null,description:"",name:"header",required:!1,type:{name:"ReactNode"}},data:{defaultValue:{value:"[]"},description:"",name:"data",required:!1,type:{name:"FormEntry[]"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"AnyZodSchema"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},action:{defaultValue:null,description:"",name:"action",required:!0,type:{name:"(data: T, getRequestContext: () => Promise<CTWRequestContext>) => Promise<unknown>"}}}}}catch{}const ModalConfirmDelete=({resource:c,resourceName:d,onDelete:g,onClose:v,...b})=>{const[_,E]=react.exports.useState(),[R,U]=react.exports.useState(!1),P=async()=>{try{U(!0),await g(),U(!1),v()}catch(B){throw U(!1),E("Something went wrong. Please try again."),B}};return React.createElement(Modal,{onAfterClosed:()=>E(void 0),...b},_&&React.createElement(ErrorAlert,{header:_}),React.createElement("div",{className:"ctw-items-left ctw-flex ctw-h-full ctw-flex-col ctw-space-y-2 ctw-overflow-y-auto"},React.createElement("span",{className:"ctw-text-left ctw-text-lg ctw-font-medium ctw-text-content-black"},`Remove this ${c.resourceType.toLowerCase()}?`),React.createElement("span",{className:"ctw-subtext ctw-max-w-sm ctw-text-left ctw-text-content-light"},"This will remove"," ",React.createElement("span",{className:"ctw-font-medium"},d)," from this patient's condition list.")),React.createElement("div",{className:"ctw-flex ctw-w-full ctw-space-x-4"},React.createElement("button",{type:"button",onClick:v,className:"ctw-btn-default ctw-flex-1"},"Cancel"),React.createElement("button",{type:"button",disabled:R,onClick:P,className:"ctw-btn-primary ctw-save-button ctw-flex-1"},R?"Removing...":"Remove",R&&React.createElement(Spinner,{className:"ctw-ml-2 ctw-text-white"}))))};try{ModalConfirmDelete.displayName="ModalConfirmDelete",ModalConfirmDelete.__docgenInfo={description:"",displayName:"ModalConfirmDelete",props:{resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Resource"}},resourceName:{defaultValue:null,description:"",name:"resourceName",required:!0,type:{name:"string"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => Promise<void>"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}}}}}catch{}const ConditionHeader=({condition:c})=>{var d;return React.createElement("div",{className:"ctw-py-2"},React.createElement("div",{className:"ctw-text-2xl"},c.display," (",(d=c.preferredCoding)==null?void 0:d.code,")"),React.createElement("div",{className:"ctw-text-sm"},c.ccsGrouping))};try{ConditionHeader.displayName="ConditionHeader",ConditionHeader.__docgenInfo={description:"",displayName:"ConditionHeader",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}const onConditionDelete=async(c,d)=>{if(!c.id)throw new Error("Tried to edit a resource that hasn't been created yet.");const g=lodash.exports.cloneDeep(c);if(g.verificationStatus={coding:[{code:"entered-in-error",system:SYSTEM_CONDITION_VERIFICATION_STATUS}]},delete g.clinicalStatus,!(await createOrEditFhirResource(g,d)).id)throw new Error(`Failed to edit resource with id of ${c.id}`);await queryClient.invalidateQueries([QUERY_KEY_PATIENT_CONDITIONS])},CodingList=({codings:c})=>React.createElement("div",{className:"ctw-flex ctw-flex-col ctw-space-y-4"},c.map(d=>React.createElement("div",{key:`${d.id}-${d.code}`},d.display,React.createElement("div",null,d.code),React.createElement("div",null,d.system))));try{CodingList.displayName="CodingList",CodingList.__docgenInfo={description:"",displayName:"CodingList",props:{codings:{defaultValue:null,description:"",name:"codings",required:!0,type:{name:"Coding[]"}}}}}catch{}var lib={exports:{}},core_min={},pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(d,g){module.exports=g()})(globalThis,()=>(()=>{var __webpack_modules__=[,(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.VerbosityLevel=d.Util=d.UnknownErrorException=d.UnexpectedResponseException=d.UNSUPPORTED_FEATURES=d.TextRenderingMode=d.StreamType=d.RenderingIntentFlag=d.PermissionFlag=d.PasswordResponses=d.PasswordException=d.PageActionEventType=d.OPS=d.MissingPDFException=d.LINE_FACTOR=d.LINE_DESCENT_FACTOR=d.InvalidPDFException=d.ImageKind=d.IDENTITY_MATRIX=d.FormatError=d.FontType=d.FeatureTest=d.FONT_IDENTITY_MATRIX=d.DocumentActionEventType=d.CMapCompressionType=d.BaseException=d.BASELINE_FACTOR=d.AnnotationType=d.AnnotationStateModelType=d.AnnotationReviewState=d.AnnotationReplyType=d.AnnotationMode=d.AnnotationMarkedState=d.AnnotationFlag=d.AnnotationFieldFlag=d.AnnotationEditorType=d.AnnotationEditorPrefix=d.AnnotationEditorParamsType=d.AnnotationBorderStyleType=d.AnnotationActionEventType=d.AbortException=void 0,d.arrayByteLength=M,d.arraysToBytes=Z,d.assert=Pe,d.bytesToString=Vt,d.createPromiseCapability=A,d.createValidAbsoluteUrl=Ye,d.getModificationDate=or,d.getVerbosityLevel=Pt,d.info=Mt,d.isArrayBuffer=Wt,d.isArrayEqual=mr,d.objectFromMap=at,d.objectSize=xe,d.setVerbosityLevel=Et,d.shadow=tt,d.string32=te,d.stringToBytes=V,d.stringToPDFString=ct,d.stringToUTF8String=kt,d.unreachable=et,d.utf8StringToString=zt,d.warn=Bt;const g=[1,0,0,1,0,0];d.IDENTITY_MATRIX=g;const v=[.001,0,0,.001,0,0];d.FONT_IDENTITY_MATRIX=v;const b=1.35;d.LINE_FACTOR=b;const _=.35;d.LINE_DESCENT_FACTOR=_;const E=_/b;d.BASELINE_FACTOR=E;const R={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};d.RenderingIntentFlag=R;const U={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};d.AnnotationMode=U;const P="pdfjs_internal_editor_";d.AnnotationEditorPrefix=P;const B={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};d.AnnotationEditorType=B;const ee={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};d.AnnotationEditorParamsType=ee;const re={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};d.PermissionFlag=re;const ne={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};d.TextRenderingMode=ne;const j={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};d.ImageKind=j;const z={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};d.AnnotationType=z;const W={MARKED:"Marked",REVIEW:"Review"};d.AnnotationStateModelType=W;const O={MARKED:"Marked",UNMARKED:"Unmarked"};d.AnnotationMarkedState=O;const Y={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};d.AnnotationReviewState=Y;const Q={GROUP:"Group",REPLY:"R"};d.AnnotationReplyType=Q;const X={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};d.AnnotationFlag=X;const H={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};d.AnnotationFieldFlag=H;const G={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};d.AnnotationBorderStyleType=G;const ie={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};d.AnnotationActionEventType=ie;const Ee={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};d.DocumentActionEventType=Ee;const be={O:"PageOpen",C:"PageClose"};d.PageActionEventType=be;const Ce={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};d.StreamType=Ce;const Oe={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};d.FontType=Oe;const mt={ERRORS:0,WARNINGS:1,INFOS:5};d.VerbosityLevel=mt;const Tt={NONE:0,BINARY:1};d.CMapCompressionType=Tt;const St={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};d.OPS=St;const ft={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};d.UNSUPPORTED_FEATURES=ft;const ut={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};d.PasswordResponses=ut;let wt=mt.WARNINGS;function Et(K){Number.isInteger(K)&&(wt=K)}function Pt(){return wt}function Mt(K){wt>=mt.INFOS&&console.log(`Info: ${K}`)}function Bt(K){wt>=mt.WARNINGS&&console.log(`Warning: ${K}`)}function et(K){throw new Error(K)}function Pe(K,Se){K||et(Se)}function oe(K){if(!K)return!1;switch(K.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ye(K,Se=null,ae=null){if(!K)return null;try{if(ae&&typeof K=="string"){if(ae.addDefaultProtocol&&K.startsWith("www.")){const it=K.match(/\./g);it&&it.length>=2&&(K=`http://${K}`)}if(ae.tryConvertEncoding)try{K=kt(K)}catch{}}const Ae=Se?new URL(K,Se):new URL(K);if(oe(Ae))return Ae}catch{}return null}function tt(K,Se,ae,Ae=!1){return Object.defineProperty(K,Se,{value:ae,enumerable:!Ae,configurable:!0,writable:!1}),ae}const Ze=function(){function Se(ae,Ae){this.constructor===Se&&et("Cannot initialize BaseException."),this.message=ae,this.name=Ae}return Se.prototype=new Error,Se.constructor=Se,Se}();d.BaseException=Ze;class Qe extends Ze{constructor(Se,ae){super(Se,"PasswordException"),this.code=ae}}d.PasswordException=Qe;class lt extends Ze{constructor(Se,ae){super(Se,"UnknownErrorException"),this.details=ae}}d.UnknownErrorException=lt;class _t extends Ze{constructor(Se){super(Se,"InvalidPDFException")}}d.InvalidPDFException=_t;class Nt extends Ze{constructor(Se){super(Se,"MissingPDFException")}}d.MissingPDFException=Nt;class dt extends Ze{constructor(Se,ae){super(Se,"UnexpectedResponseException"),this.status=ae}}d.UnexpectedResponseException=dt;class xt extends Ze{constructor(Se){super(Se,"FormatError")}}d.FormatError=xt;class Lt extends Ze{constructor(Se){super(Se,"AbortException")}}d.AbortException=Lt;function Vt(K){(typeof K!="object"||K===null||K.length===void 0)&&et("Invalid argument for bytesToString");const Se=K.length,ae=8192;if(Se<ae)return String.fromCharCode.apply(null,K);const Ae=[];for(let it=0;it<Se;it+=ae){const Ut=Math.min(it+ae,Se),Gt=K.subarray(it,Ut);Ae.push(String.fromCharCode.apply(null,Gt))}return Ae.join("")}function V(K){typeof K!="string"&&et("Invalid argument for stringToBytes");const Se=K.length,ae=new Uint8Array(Se);for(let Ae=0;Ae<Se;++Ae)ae[Ae]=K.charCodeAt(Ae)&255;return ae}function M(K){if(K.length!==void 0)return K.length;if(K.byteLength!==void 0)return K.byteLength;et("Invalid argument for arrayByteLength")}function Z(K){const Se=K.length;if(Se===1&&K[0]instanceof Uint8Array)return K[0];let ae=0;for(let Ut=0;Ut<Se;Ut++)ae+=M(K[Ut]);let Ae=0;const it=new Uint8Array(ae);for(let Ut=0;Ut<Se;Ut++){let Gt=K[Ut];Gt instanceof Uint8Array||(typeof Gt=="string"?Gt=V(Gt):Gt=new Uint8Array(Gt));const ar=Gt.byteLength;it.set(Gt,Ae),Ae+=ar}return it}function te(K){return String.fromCharCode(K>>24&255,K>>16&255,K>>8&255,K&255)}function xe(K){return Object.keys(K).length}function at(K){const Se=Object.create(null);for(const[ae,Ae]of K)Se[ae]=Ae;return Se}function vt(){const K=new Uint8Array(4);return K[0]=1,new Uint32Array(K.buffer,0,1)[0]===1}function st(){try{return new Function(""),!0}catch{return!1}}class rt{static get isLittleEndian(){return tt(this,"isLittleEndian",vt())}static get isEvalSupported(){return tt(this,"isEvalSupported",st())}static get isOffscreenCanvasSupported(){return tt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}d.FeatureTest=rt;const ht=[...Array(256).keys()].map(K=>K.toString(16).padStart(2,"0"));class ot{static makeHexColor(Se,ae,Ae){return`#${ht[Se]}${ht[ae]}${ht[Ae]}`}static scaleMinMax(Se,ae){let Ae;Se[0]?(Se[0]<0&&(Ae=ae[0],ae[0]=ae[1],ae[1]=Ae),ae[0]*=Se[0],ae[1]*=Se[0],Se[3]<0&&(Ae=ae[2],ae[2]=ae[3],ae[3]=Ae),ae[2]*=Se[3],ae[3]*=Se[3]):(Ae=ae[0],ae[0]=ae[2],ae[2]=Ae,Ae=ae[1],ae[1]=ae[3],ae[3]=Ae,Se[1]<0&&(Ae=ae[2],ae[2]=ae[3],ae[3]=Ae),ae[2]*=Se[1],ae[3]*=Se[1],Se[2]<0&&(Ae=ae[0],ae[0]=ae[1],ae[1]=Ae),ae[0]*=Se[2],ae[1]*=Se[2]),ae[0]+=Se[4],ae[1]+=Se[4],ae[2]+=Se[5],ae[3]+=Se[5]}static transform(Se,ae){return[Se[0]*ae[0]+Se[2]*ae[1],Se[1]*ae[0]+Se[3]*ae[1],Se[0]*ae[2]+Se[2]*ae[3],Se[1]*ae[2]+Se[3]*ae[3],Se[0]*ae[4]+Se[2]*ae[5]+Se[4],Se[1]*ae[4]+Se[3]*ae[5]+Se[5]]}static applyTransform(Se,ae){const Ae=Se[0]*ae[0]+Se[1]*ae[2]+ae[4],it=Se[0]*ae[1]+Se[1]*ae[3]+ae[5];return[Ae,it]}static applyInverseTransform(Se,ae){const Ae=ae[0]*ae[3]-ae[1]*ae[2],it=(Se[0]*ae[3]-Se[1]*ae[2]+ae[2]*ae[5]-ae[4]*ae[3])/Ae,Ut=(-Se[0]*ae[1]+Se[1]*ae[0]+ae[4]*ae[1]-ae[5]*ae[0])/Ae;return[it,Ut]}static getAxialAlignedBoundingBox(Se,ae){const Ae=ot.applyTransform(Se,ae),it=ot.applyTransform(Se.slice(2,4),ae),Ut=ot.applyTransform([Se[0],Se[3]],ae),Gt=ot.applyTransform([Se[2],Se[1]],ae);return[Math.min(Ae[0],it[0],Ut[0],Gt[0]),Math.min(Ae[1],it[1],Ut[1],Gt[1]),Math.max(Ae[0],it[0],Ut[0],Gt[0]),Math.max(Ae[1],it[1],Ut[1],Gt[1])]}static inverseTransform(Se){const ae=Se[0]*Se[3]-Se[1]*Se[2];return[Se[3]/ae,-Se[1]/ae,-Se[2]/ae,Se[0]/ae,(Se[2]*Se[5]-Se[4]*Se[3])/ae,(Se[4]*Se[1]-Se[5]*Se[0])/ae]}static singularValueDecompose2dScale(Se){const ae=[Se[0],Se[2],Se[1],Se[3]],Ae=Se[0]*ae[0]+Se[1]*ae[2],it=Se[0]*ae[1]+Se[1]*ae[3],Ut=Se[2]*ae[0]+Se[3]*ae[2],Gt=Se[2]*ae[1]+Se[3]*ae[3],ar=(Ae+Gt)/2,jt=Math.sqrt((Ae+Gt)**2-4*(Ae*Gt-Ut*it))/2,Jt=ar+jt||1,dr=ar-jt||1;return[Math.sqrt(Jt),Math.sqrt(dr)]}static normalizeRect(Se){const ae=Se.slice(0);return Se[0]>Se[2]&&(ae[0]=Se[2],ae[2]=Se[0]),Se[1]>Se[3]&&(ae[1]=Se[3],ae[3]=Se[1]),ae}static intersect(Se,ae){const Ae=Math.max(Math.min(Se[0],Se[2]),Math.min(ae[0],ae[2])),it=Math.min(Math.max(Se[0],Se[2]),Math.max(ae[0],ae[2]));if(Ae>it)return null;const Ut=Math.max(Math.min(Se[1],Se[3]),Math.min(ae[1],ae[3])),Gt=Math.min(Math.max(Se[1],Se[3]),Math.max(ae[1],ae[3]));return Ut>Gt?null:[Ae,Ut,it,Gt]}static bezierBoundingBox(Se,ae,Ae,it,Ut,Gt,ar,jt){const Jt=[],dr=[[],[]];let cr,Rr,Ar,hr,qr,Wr,Lr,Zr;for(let Ir=0;Ir<2;++Ir){if(Ir===0?(Rr=6*Se-12*Ae+6*Ut,cr=-3*Se+9*Ae-9*Ut+3*ar,Ar=3*Ae-3*Se):(Rr=6*ae-12*it+6*Gt,cr=-3*ae+9*it-9*Gt+3*jt,Ar=3*it-3*ae),Math.abs(cr)<1e-12){if(Math.abs(Rr)<1e-12)continue;hr=-Ar/Rr,0<hr&&hr<1&&Jt.push(hr);continue}Lr=Rr*Rr-4*Ar*cr,Zr=Math.sqrt(Lr),!(Lr<0)&&(qr=(-Rr+Zr)/(2*cr),0<qr&&qr<1&&Jt.push(qr),Wr=(-Rr-Zr)/(2*cr),0<Wr&&Wr<1&&Jt.push(Wr))}let Ur=Jt.length,Xt;const _r=Ur;for(;Ur--;)hr=Jt[Ur],Xt=1-hr,dr[0][Ur]=Xt*Xt*Xt*Se+3*Xt*Xt*hr*Ae+3*Xt*hr*hr*Ut+hr*hr*hr*ar,dr[1][Ur]=Xt*Xt*Xt*ae+3*Xt*Xt*hr*it+3*Xt*hr*hr*Gt+hr*hr*hr*jt;return dr[0][_r]=Se,dr[1][_r]=ae,dr[0][_r+1]=ar,dr[1][_r+1]=jt,dr[0].length=dr[1].length=_r+2,[Math.min(...dr[0]),Math.min(...dr[1]),Math.max(...dr[0]),Math.max(...dr[1])]}}d.Util=ot;const $t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ct(K){if(K[0]>="\xEF"){let ae;if(K[0]==="\xFE"&&K[1]==="\xFF"?ae="utf-16be":K[0]==="\xFF"&&K[1]==="\xFE"?ae="utf-16le":K[0]==="\xEF"&&K[1]==="\xBB"&&K[2]==="\xBF"&&(ae="utf-8"),ae)try{const Ae=new TextDecoder(ae,{fatal:!0}),it=V(K);return Ae.decode(it)}catch(Ae){Bt(`stringToPDFString: "${Ae}".`)}}const Se=[];for(let ae=0,Ae=K.length;ae<Ae;ae++){const it=$t[K.charCodeAt(ae)];Se.push(it?String.fromCharCode(it):K.charAt(ae))}return Se.join("")}function kt(K){return decodeURIComponent(escape(K))}function zt(K){return unescape(encodeURIComponent(K))}function Wt(K){return typeof K=="object"&&K!==null&&K.byteLength!==void 0}function mr(K,Se){if(K.length!==Se.length)return!1;for(let ae=0,Ae=K.length;ae<Ae;ae++)if(K[ae]!==Se[ae])return!1;return!0}function or(K=new Date){return[K.getUTCFullYear().toString(),(K.getUTCMonth()+1).toString().padStart(2,"0"),K.getUTCDate().toString().padStart(2,"0"),K.getUTCHours().toString().padStart(2,"0"),K.getUTCMinutes().toString().padStart(2,"0"),K.getUTCSeconds().toString().padStart(2,"0")].join("")}function A(){const K=Object.create(null);let Se=!1;return Object.defineProperty(K,"settled",{get(){return Se}}),K.promise=new Promise(function(ae,Ae){K.resolve=function(it){Se=!0,ae(it)},K.reject=function(it){Se=!0,Ae(it)}}),K}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var c,g,v,b,_,E,R,U,P,B,ee,ca,ne,j;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(12),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:W,NodeCMapReaderFactory:O,NodeStandardFontDataFactory:Y}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=W,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=O,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=Y}let createPDFNetworkStream;function setPDFNetworkStreamFactory(W){createPDFNetworkStream=W}function getDocument(W){const O=new PDFDocumentLoadingTask;let Y;if(typeof W=="string"||W instanceof URL)Y={url:W};else if((0,_util.isArrayBuffer)(W))Y={data:W};else if(W instanceof PDFDataRangeTransport)Y={range:W};else{if(typeof W!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!W.url&&!W.data&&!W.range)throw new Error("Invalid parameter object: need either .data, .range or .url");Y=W}const Q=Object.create(null);let X=null,H=null;for(const ie in Y){const Ee=Y[ie];switch(ie){case"url":if(typeof window<"u")try{Q[ie]=new URL(Ee,window.location).href;continue}catch(be){(0,_util.warn)(`Cannot create valid URL: "${be}".`)}else if(typeof Ee=="string"||Ee instanceof URL){Q[ie]=Ee.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":X=Ee;continue;case"worker":H=Ee;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&Ee instanceof Buffer)Q[ie]=new Uint8Array(Ee);else{if(Ee instanceof Uint8Array)break;if(typeof Ee=="string")Q[ie]=(0,_util.stringToBytes)(Ee);else if(typeof Ee=="object"&&Ee!==null&&!isNaN(Ee.length))Q[ie]=new Uint8Array(Ee);else if((0,_util.isArrayBuffer)(Ee))Q[ie]=new Uint8Array(Ee);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}Q[ie]=Ee}if(Q.CMapReaderFactory=Q.CMapReaderFactory||DefaultCMapReaderFactory,Q.StandardFontDataFactory=Q.StandardFontDataFactory||DefaultStandardFontDataFactory,Q.ignoreErrors=Q.stopAtErrors!==!0,Q.fontExtraProperties=Q.fontExtraProperties===!0,Q.pdfBug=Q.pdfBug===!0,Q.enableXfa=Q.enableXfa===!0,(!Number.isInteger(Q.rangeChunkSize)||Q.rangeChunkSize<1)&&(Q.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof Q.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(Q.docBaseUrl))&&(Q.docBaseUrl=null),(!Number.isInteger(Q.maxImageSize)||Q.maxImageSize<-1)&&(Q.maxImageSize=-1),typeof Q.cMapUrl!="string"&&(Q.cMapUrl=null),typeof Q.standardFontDataUrl!="string"&&(Q.standardFontDataUrl=null),typeof Q.useWorkerFetch!="boolean"&&(Q.useWorkerFetch=Q.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&Q.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof Q.isEvalSupported!="boolean"&&(Q.isEvalSupported=!0),typeof Q.isOffscreenCanvasSupported!="boolean"&&(Q.isOffscreenCanvasSupported=!_is_node.isNodeJS),typeof Q.disableFontFace!="boolean"&&(Q.disableFontFace=_is_node.isNodeJS),typeof Q.useSystemFonts!="boolean"&&(Q.useSystemFonts=!_is_node.isNodeJS&&!Q.disableFontFace),(typeof Q.ownerDocument!="object"||Q.ownerDocument===null)&&(Q.ownerDocument=globalThis.document),typeof Q.disableRange!="boolean"&&(Q.disableRange=!1),typeof Q.disableStream!="boolean"&&(Q.disableStream=!1),typeof Q.disableAutoFetch!="boolean"&&(Q.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(Q.verbosity),!H){const ie={verbosity:Q.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};H=ie.port?PDFWorker.fromPort(ie):new PDFWorker(ie),O._worker=H}const G=O.docId;return H.promise.then(function(){if(O.destroyed)throw new Error("Loading aborted");const ie=_fetchDocument(H,Q,X,G),Ee=new Promise(function(be){let Ce;X?Ce=new _transport_stream.PDFDataTransportStream({length:Q.length,initialData:Q.initialData,progressiveDone:Q.progressiveDone,contentDispositionFilename:Q.contentDispositionFilename,disableRange:Q.disableRange,disableStream:Q.disableStream},X):Q.data||(Ce=createPDFNetworkStream({url:Q.url,length:Q.length,httpHeaders:Q.httpHeaders,withCredentials:Q.withCredentials,rangeChunkSize:Q.rangeChunkSize,disableRange:Q.disableRange,disableStream:Q.disableStream})),be(Ce)});return Promise.all([ie,Ee]).then(function([be,Ce]){if(O.destroyed)throw new Error("Loading aborted");const Oe=new _message_handler.MessageHandler(G,be,H.port),mt=new WorkerTransport(Oe,O,Ce,Q);O._transport=mt,Oe.send("Ready",null)})}).catch(O._capability.reject),O}async function _fetchDocument(W,O,Y,Q){if(W.destroyed)throw new Error("Worker was destroyed");Y&&(O.length=Y.length,O.initialData=Y.initialData,O.progressiveDone=Y.progressiveDone,O.contentDispositionFilename=Y.contentDispositionFilename);const X=await W.messageHandler.sendWithPromise("GetDocRequest",{docId:Q,apiVersion:"3.1.81",data:O.data,password:O.password,disableAutoFetch:O.disableAutoFetch,rangeChunkSize:O.rangeChunkSize,length:O.length,docBaseUrl:O.docBaseUrl,enableXfa:O.enableXfa,evaluatorOptions:{maxImageSize:O.maxImageSize,disableFontFace:O.disableFontFace,ignoreErrors:O.ignoreErrors,isEvalSupported:O.isEvalSupported,isOffscreenCanvasSupported:O.isOffscreenCanvasSupported,fontExtraProperties:O.fontExtraProperties,useSystemFonts:O.useSystemFonts,cMapUrl:O.useWorkerFetch?O.cMapUrl:null,standardFontDataUrl:O.useWorkerFetch?O.standardFontDataUrl:null}});if(O.data&&(O.data=null),W.destroyed)throw new Error("Worker was destroyed");return X}const d=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${sa(d,c)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var O;this.destroyed=!0,await((O=this._transport)==null?void 0:O.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=d;c=new WeakMap,qt(PDFDocumentLoadingTask,c,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(O,Y,Q=!1,X=null){this.length=O,this.initialData=Y,this.progressiveDone=Q,this.contentDispositionFilename=X,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(O){this._rangeListeners.push(O)}addProgressListener(O){this._progressListeners.push(O)}addProgressiveReadListener(O){this._progressiveReadListeners.push(O)}addProgressiveDoneListener(O){this._progressiveDoneListeners.push(O)}onDataRange(O,Y){for(const Q of this._rangeListeners)Q(O,Y)}onDataProgress(O,Y){this._readyCapability.promise.then(()=>{for(const Q of this._progressListeners)Q(O,Y)})}onDataProgressiveRead(O){this._readyCapability.promise.then(()=>{for(const Y of this._progressiveReadListeners)Y(O)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const O of this._progressiveDoneListeners)O()})}transportReady(){this._readyCapability.resolve()}requestDataRange(O,Y){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(O,Y){this._pdfInfo=O,this._transport=Y}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(O){return this._transport.getPage(O)}getPageIndex(O){return this._transport.getPageIndex(O)}getDestinations(){return this._transport.getDestinations()}getDestination(O){return this._transport.getDestination(O)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(O=!1){return this._transport.startCleanup(O||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(O,Y,Q,X,H=!1){this._pageIndex=O,this._pageInfo=Y,this._ownerDocument=X,this._transport=Q,this._stats=H?new _display_utils.StatTimer:null,this._pdfBug=H,this.commonObjs=Q.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:O,rotation:Y=this.rotate,offsetX:Q=0,offsetY:X=0,dontFlip:H=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:O,rotation:Y,offsetX:Q,offsetY:X,dontFlip:H})}getAnnotations({intent:O="display"}={}){const Y=this._transport.getRenderingIntent(O);let Q=this._annotationPromises.get(Y.cacheKey);return Q||(Q=this._transport.getAnnotations(this._pageIndex,Y.renderingIntent),this._annotationPromises.set(Y.cacheKey,Q)),Q}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var O;return((O=this._transport._htmlForXfa)==null?void 0:O.children[this._pageIndex])||null}render({canvasContext:O,viewport:Y,intent:Q="display",annotationMode:X=_util.AnnotationMode.ENABLE,transform:H=null,canvasFactory:G=null,background:ie=null,optionalContentConfigPromise:Ee=null,annotationCanvasMap:be=null,pageColors:Ce=null,printAnnotationStorage:Oe=null}){var Pt,Mt;(Pt=this._stats)==null||Pt.time("Overall");const mt=this._transport.getRenderingIntent(Q,X,Oe);this.pendingCleanup=!1,Ee||(Ee=this._transport.getOptionalContentConfig());let Tt=this._intentStates.get(mt.cacheKey);Tt||(Tt=Object.create(null),this._intentStates.set(mt.cacheKey,Tt)),Tt.streamReaderCancelTimeout&&(clearTimeout(Tt.streamReaderCancelTimeout),Tt.streamReaderCancelTimeout=null);const St=G||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),ft=!!(mt.renderingIntent&_util.RenderingIntentFlag.PRINT);Tt.displayReadyCapability||(Tt.displayReadyCapability=(0,_util.createPromiseCapability)(),Tt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Mt=this._stats)==null||Mt.time("Page Request"),this._pumpOperatorList(mt));const ut=Bt=>{var et,Pe;Tt.renderTasks.delete(wt),(this.cleanupAfterRender||ft)&&(this.pendingCleanup=!0),this._tryCleanup(),Bt?(wt.capability.reject(Bt),this._abortOperatorList({intentState:Tt,reason:Bt instanceof Error?Bt:new Error(Bt)})):wt.capability.resolve(),(et=this._stats)==null||et.timeEnd("Rendering"),(Pe=this._stats)==null||Pe.timeEnd("Overall")},wt=new InternalRenderTask({callback:ut,params:{canvasContext:O,viewport:Y,transform:H,background:ie},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:be,operatorList:Tt.operatorList,pageIndex:this._pageIndex,canvasFactory:St,useRequestAnimationFrame:!ft,pdfBug:this._pdfBug,pageColors:Ce});(Tt.renderTasks||(Tt.renderTasks=new Set)).add(wt);const Et=wt.task;return Promise.all([Tt.displayReadyCapability.promise,Ee]).then(([Bt,et])=>{var Pe;if(this.pendingCleanup){ut();return}(Pe=this._stats)==null||Pe.time("Rendering"),wt.initializeGraphics({transparency:Bt,optionalContentConfig:et}),wt.operatorListChanged()}).catch(ut),Et}getOperatorList({intent:O="display",annotationMode:Y=_util.AnnotationMode.ENABLE,printAnnotationStorage:Q=null}={}){var Ee;function X(){G.operatorList.lastChunk&&(G.opListReadCapability.resolve(G.operatorList),G.renderTasks.delete(ie))}const H=this._transport.getRenderingIntent(O,Y,Q,!0);let G=this._intentStates.get(H.cacheKey);G||(G=Object.create(null),this._intentStates.set(H.cacheKey,G));let ie;return G.opListReadCapability||(ie=Object.create(null),ie.operatorListChanged=X,G.opListReadCapability=(0,_util.createPromiseCapability)(),(G.renderTasks||(G.renderTasks=new Set)).add(ie),G.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ee=this._stats)==null||Ee.time("Page Request"),this._pumpOperatorList(H)),G.opListReadCapability.promise}streamTextContent({disableCombineTextItems:O=!1,includeMarkedContent:Y=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:O!==!0,includeMarkedContent:Y===!0},{highWaterMark:100,size(X){return X.items.length}})}getTextContent(O={}){if(this._transport._htmlForXfa)return this.getXfa().then(Q=>_xfa_text.XfaText.textContent(Q));const Y=this.streamTextContent(O);return new Promise(function(Q,X){function H(){G.read().then(function({value:Ee,done:be}){if(be){Q(ie);return}Object.assign(ie.styles,Ee.styles),ie.items.push(...Ee.items),H()},X)}const G=Y.getReader(),ie={items:[],styles:Object.create(null)};H()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const O=[];for(const Y of this._intentStates.values())if(this._abortOperatorList({intentState:Y,reason:new Error("Page was destroyed."),force:!0}),!Y.opListReadCapability)for(const Q of Y.renderTasks)O.push(Q.completed),Q.cancel();this.objs.clear();for(const Y of this._bitmaps)Y.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(O)}cleanup(O=!1){return this.pendingCleanup=!0,this._tryCleanup(O)}_tryCleanup(O=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:Y,operatorList:Q}of this._intentStates.values())if(Y.size>0||!Q.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,O&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const Y of this._bitmaps)Y.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(O,Y){var X,H;const Q=this._intentStates.get(Y);!Q||((X=this._stats)==null||X.timeEnd("Page Request"),(H=Q.displayReadyCapability)==null||H.resolve(O))}_renderPageChunk(O,Y){for(let Q=0,X=O.length;Q<X;Q++)Y.operatorList.fnArray.push(O.fnArray[Q]),Y.operatorList.argsArray.push(O.argsArray[Q]);Y.operatorList.lastChunk=O.lastChunk,Y.operatorList.separateAnnots=O.separateAnnots;for(const Q of Y.renderTasks)Q.operatorListChanged();O.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:O,cacheKey:Y,annotationStorageMap:Q}){const H=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:O,cacheKey:Y,annotationStorage:Q}).getReader(),G=this._intentStates.get(Y);G.streamReader=H;const ie=()=>{H.read().then(({value:Ee,done:be})=>{if(be){G.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Ee,G),ie())},Ee=>{if(G.streamReader=null,!this._transport.destroyed){if(G.operatorList){G.operatorList.lastChunk=!0;for(const be of G.renderTasks)be.operatorListChanged();this._tryCleanup()}if(G.displayReadyCapability)G.displayReadyCapability.reject(Ee);else if(G.opListReadCapability)G.opListReadCapability.reject(Ee);else throw Ee}})};ie()}_abortOperatorList({intentState:O,reason:Y,force:Q=!1}){if(!!O.streamReader){if(!Q){if(O.renderTasks.size>0)return;if(Y instanceof _display_utils.RenderingCancelledException){O.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:O,reason:Y,force:!0}),O.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(O.streamReader.cancel(new _util.AbortException(Y.message)).catch(()=>{}),O.streamReader=null,!this._transport.destroyed){for(const[X,H]of this._intentStates)if(H===O){this._intentStates.delete(X);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){qt(this,g,[]);qt(this,v,Promise.resolve())}postMessage(O,Y){const Q={data:structuredClone(O,Y)};nt(this,v).then(()=>{for(const X of nt(this,g))X.call(this,Q)})}addEventListener(O,Y){nt(this,g).push(Y)}removeEventListener(O,Y){const Q=nt(this,g).indexOf(Y);nt(this,g).splice(Q,1)}terminate(){nt(this,g).length=0}}g=new WeakMap,v=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const W=(b=document==null?void 0:document.currentScript)==null?void 0:b.src;W&&(PDFWorkerUtil.fallbackWorkerSrc=W.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(W,O){let Y;try{if(Y=new URL(W),!Y.origin||Y.origin==="null")return!1}catch{return!1}const Q=new URL(O,Y);return Y.origin===Q.origin},PDFWorkerUtil.createCDNWrapper=function(W){const O=`importScripts("${W}");`;return URL.createObjectURL(new Blob([O]))}}const _PDFWorker=class{constructor({name:W=null,port:O=null,verbosity:Y=(0,_util.getVerbosityLevel)()}={}){if(O&&nt(_PDFWorker,_).has(O))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=W,this.destroyed=!1,this.verbosity=Y,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,O){nt(_PDFWorker,_).set(O,this),this._initializeFromPort(O);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(W){this._port=W,this._messageHandler=new _message_handler.MessageHandler("main","worker",W),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:W}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,W)||(W=PDFWorkerUtil.createCDNWrapper(new URL(W,window.location).href));const O=new Worker(W),Y=new _message_handler.MessageHandler("main","worker",O),Q=()=>{O.removeEventListener("error",X),Y.destroy(),O.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},X=()=>{this._webWorker||Q()};O.addEventListener("error",X),Y.on("test",G=>{if(O.removeEventListener("error",X),this.destroyed){Q();return}G?(this._messageHandler=Y,this._port=O,this._webWorker=O,this._readyCapability.resolve(),Y.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Y.destroy(),O.terminate())}),Y.on("ready",G=>{if(O.removeEventListener("error",X),this.destroyed){Q();return}try{H()}catch{this._setupFakeWorker()}});const H=()=>{const G=new Uint8Array;Y.send("test",G,[G.buffer])};H();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(W=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const O=new LoopbackPort;this._port=O;const Y=`fake${PDFWorkerUtil.fakeWorkerId++}`,Q=new _message_handler.MessageHandler(Y+"_worker",Y,O);W.setup(Q,O);const X=new _message_handler.MessageHandler(Y,Y+"_worker",O);this._messageHandler=X,this._readyCapability.resolve(),X.send("configure",{verbosity:this.verbosity})}).catch(W=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${W.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),nt(_PDFWorker,_).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(W){if(!(W!=null&&W.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return nt(this,_).has(W.port)?nt(this,_).get(W.port):new _PDFWorker(W)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var W;try{return((W=globalThis.pdfjsWorker)==null?void 0:W.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;_=new WeakMap,qt(PDFWorker,_,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(O,Y,Q,X){qt(this,E,null);qt(this,R,new Map);qt(this,U,new Map);qt(this,P,null);this.messageHandler=O,this.loadingTask=Y,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:X.ownerDocument,styleElement:X.styleElement}),this._params=X,X.useWorkerFetch||(this.CMapReaderFactory=new X.CMapReaderFactory({baseUrl:X.cMapUrl,isCompressed:X.cMapPacked}),this.StandardFontDataFactory=new X.StandardFontDataFactory({baseUrl:X.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=Q,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return nt(this,E)}getRenderingIntent(O,Y=_util.AnnotationMode.ENABLE,Q=null,X=!1){let H=_util.RenderingIntentFlag.DISPLAY,G=null;switch(O){case"any":H=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":H=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${O}`)}switch(Y){case _util.AnnotationMode.DISABLE:H+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:H+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:H+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,G=(H&_util.RenderingIntentFlag.PRINT&&Q instanceof _annotation_storage.PrintAnnotationStorage?Q:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${Y}`)}return X&&(H+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:H,cacheKey:`${H}_${_annotation_storage.AnnotationStorage.getHash(G)}`,annotationStorageMap:G}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const O=[];for(const Q of nt(this,R).values())O.push(Q._destroy());nt(this,R).clear(),nt(this,U).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const Y=this.messageHandler.sendWithPromise("Terminate",null);return O.push(Y),Promise.all(O).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),nr(this,P,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:O,loadingTask:Y}=this;O.on("GetReader",(Q,X)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=H=>{this._lastProgress={loaded:H.loaded,total:H.total}},X.onPull=()=>{this._fullReader.read().then(function({value:H,done:G}){if(G){X.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(H),"GetReader - expected an ArrayBuffer."),X.enqueue(new Uint8Array(H),1,[H])}).catch(H=>{X.error(H)})},X.onCancel=H=>{this._fullReader.cancel(H),X.ready.catch(G=>{if(!this.destroyed)throw G})}}),O.on("ReaderHeadersReady",Q=>{const X=(0,_util.createPromiseCapability)(),H=this._fullReader;return H.headersReady.then(()=>{var G;(!H.isStreamingSupported||!H.isRangeSupported)&&(this._lastProgress&&((G=Y.onProgress)==null||G.call(Y,this._lastProgress)),H.onProgress=ie=>{var Ee;(Ee=Y.onProgress)==null||Ee.call(Y,{loaded:ie.loaded,total:ie.total})}),X.resolve({isStreamingSupported:H.isStreamingSupported,isRangeSupported:H.isRangeSupported,contentLength:H.contentLength})},X.reject),X.promise}),O.on("GetRangeReader",(Q,X)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const H=this._networkStream.getRangeReader(Q.begin,Q.end);if(!H){X.close();return}X.onPull=()=>{H.read().then(function({value:G,done:ie}){if(ie){X.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(G),"GetRangeReader - expected an ArrayBuffer."),X.enqueue(new Uint8Array(G),1,[G])}).catch(G=>{X.error(G)})},X.onCancel=G=>{H.cancel(G),X.ready.catch(ie=>{if(!this.destroyed)throw ie})}}),O.on("GetDoc",({pdfInfo:Q})=>{this._numPages=Q.numPages,this._htmlForXfa=Q.htmlForXfa,delete Q.htmlForXfa,Y._capability.resolve(new PDFDocumentProxy(Q,this))}),O.on("DocException",function(Q){let X;switch(Q.name){case"PasswordException":X=new _util.PasswordException(Q.message,Q.code);break;case"InvalidPDFException":X=new _util.InvalidPDFException(Q.message);break;case"MissingPDFException":X=new _util.MissingPDFException(Q.message);break;case"UnexpectedResponseException":X=new _util.UnexpectedResponseException(Q.message,Q.status);break;case"UnknownErrorException":X=new _util.UnknownErrorException(Q.message,Q.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Y._capability.reject(X)}),O.on("PasswordRequest",Q=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),Y.onPassword){const X=H=>{H instanceof Error?this._passwordCapability.reject(H):this._passwordCapability.resolve({password:H})};try{Y.onPassword(X,Q.code)}catch(H){this._passwordCapability.reject(H)}}else this._passwordCapability.reject(new _util.PasswordException(Q.message,Q.code));return this._passwordCapability.promise}),O.on("DataLoaded",Q=>{var X;(X=Y.onProgress)==null||X.call(Y,{loaded:Q.length,total:Q.length}),this.downloadInfoCapability.resolve(Q)}),O.on("StartRenderPage",Q=>{if(this.destroyed)return;nt(this,R).get(Q.pageIndex)._startRenderPage(Q.transparency,Q.cacheKey)}),O.on("commonobj",([Q,X,H])=>{var G;if(!this.destroyed&&!this.commonObjs.has(Q))switch(X){case"Font":const ie=this._params;if("error"in H){const Ce=H.error;(0,_util.warn)(`Error during font loading: ${Ce}`),this.commonObjs.resolve(Q,Ce);break}let Ee=null;ie.pdfBug&&((G=globalThis.FontInspector)==null?void 0:G.enabled)&&(Ee={registerFont(Ce,Oe){globalThis.FontInspector.fontAdded(Ce,Oe)}});const be=new _font_loader.FontFaceObject(H,{isEvalSupported:ie.isEvalSupported,disableFontFace:ie.disableFontFace,ignoreErrors:ie.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:Ee});this.fontLoader.bind(be).catch(Ce=>O.sendWithPromise("FontFallback",{id:Q})).finally(()=>{!ie.fontExtraProperties&&be.data&&(be.data=null),this.commonObjs.resolve(Q,be)});break;case"FontPath":case"Image":this.commonObjs.resolve(Q,H);break;default:throw new Error(`Got unknown common object type ${X}`)}}),O.on("obj",([Q,X,H,G])=>{var Ee;if(this.destroyed)return;const ie=nt(this,R).get(X);if(!ie.objs.has(Q))switch(H){case"Image":ie.objs.resolve(Q,G);const be=8e6;if(G){let Ce;if(G.bitmap){const{bitmap:Oe,width:mt,height:Tt}=G;Ce=mt*Tt*4,ie._bitmaps.add(Oe)}else Ce=((Ee=G.data)==null?void 0:Ee.length)||0;Ce>be&&(ie.cleanupAfterRender=!0)}break;case"Pattern":ie.objs.resolve(Q,G);break;default:throw new Error(`Got unknown object type ${H}`)}}),O.on("DocProgress",Q=>{var X;this.destroyed||(X=Y.onProgress)==null||X.call(Y,{loaded:Q.loaded,total:Q.total})}),O.on("DocStats",Q=>{this.destroyed||nr(this,E,Object.freeze({streamTypes:Object.freeze(Q.streamTypes),fontTypes:Object.freeze(Q.fontTypes)}))}),O.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),O.on("FetchBuiltInCMap",Q=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(Q):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),O.on("FetchStandardFontData",Q=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(Q):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:O}){var Y,Q;this.destroyed||(Q=(Y=this.loadingTask).onUnsupportedFeature)==null||Q.call(Y,O)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var O,Y;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(Y=(O=this._fullReader)==null?void 0:O.filename)!=null?Y:null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(O){if(!Number.isInteger(O)||O<=0||O>this._numPages)return Promise.reject(new Error("Invalid page request."));const Y=O-1,Q=nt(this,U).get(Y);if(Q)return Q;const X=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Y}).then(H=>{if(this.destroyed)throw new Error("Transport destroyed");const G=new PDFPageProxy(Y,H,this,this._params.ownerDocument,this._params.pdfBug);return nt(this,R).set(Y,G),G});return nt(this,U).set(Y,X),X}getPageIndex(O){return typeof O!="object"||O===null||!Number.isInteger(O.num)||O.num<0||!Number.isInteger(O.gen)||O.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:O.num,gen:O.gen})}getAnnotations(O,Y){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:O,intent:Y})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(O){return typeof O!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:O})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(O){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:O})}getStructTree(O){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:O})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(O=>new _optional_content_config.OptionalContentConfig(O))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return nt(this,P)||nr(this,P,this.messageHandler.sendWithPromise("GetMetadata",null).then(O=>{var Y,Q,X,H;return{info:O[0],metadata:O[1]?new _metadata.Metadata(O[1]):null,contentDispositionFilename:(Q=(Y=this._fullReader)==null?void 0:Y.filename)!=null?Q:null,contentLength:(H=(X=this._fullReader)==null?void 0:X.contentLength)!=null?H:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(O=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const Y of nt(this,R).values())if(!Y.cleanup())throw new Error(`startCleanup: Page ${Y.pageNumber} is currently rendering.`);this.commonObjs.clear(),O||this.fontLoader.clear(),nr(this,P,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const O=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:O.disableAutoFetch,enableXfa:O.enableXfa})}}E=new WeakMap,R=new WeakMap,U=new WeakMap,P=new WeakMap;class PDFObjects{constructor(){qt(this,ee);qt(this,B,Object.create(null))}get(O,Y=null){if(Y){const X=Yt(this,ee,ca).call(this,O);return X.capability.promise.then(()=>Y(X.data)),null}const Q=nt(this,B)[O];if(!(Q!=null&&Q.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${O}.`);return Q.data}has(O){const Y=nt(this,B)[O];return(Y==null?void 0:Y.capability.settled)||!1}resolve(O,Y=null){const Q=Yt(this,ee,ca).call(this,O);Q.data=Y,Q.capability.resolve()}clear(){nr(this,B,Object.create(null))}}B=new WeakMap,ee=new WeakSet,ca=function(O){const Y=nt(this,B)[O];return Y||(nt(this,B)[O]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(O){qt(this,ne,null);nr(this,ne,O),this.onContinue=null}get promise(){return nt(this,ne).capability.promise}cancel(){nt(this,ne).cancel()}get separateAnnots(){const{separateAnnots:O}=nt(this,ne).operatorList;if(!O)return!1;const{annotationCanvasMap:Y}=nt(this,ne);return O.form||O.canvas&&(Y==null?void 0:Y.size)>0}}ne=new WeakMap,exports.RenderTask=RenderTask;const z=class{constructor({callback:O,params:Y,objs:Q,commonObjs:X,annotationCanvasMap:H,operatorList:G,pageIndex:ie,canvasFactory:Ee,useRequestAnimationFrame:be=!1,pdfBug:Ce=!1,pageColors:Oe=null}){this.callback=O,this.params=Y,this.objs=Q,this.commonObjs=X,this.annotationCanvasMap=H,this.operatorListIdx=null,this.operatorList=G,this._pageIndex=ie,this.canvasFactory=Ee,this._pdfBug=Ce,this.pageColors=Oe,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=be===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Y.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:O=!1,optionalContentConfig:Y}){var ie,Ee;if(this.cancelled)return;if(this._canvas){if(nt(z,j).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");nt(z,j).add(this._canvas)}this._pdfBug&&((ie=globalThis.StepperManager)==null?void 0:ie.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Q,viewport:X,transform:H,background:G}=this.params;this.gfx=new _canvas.CanvasGraphics(Q,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:Y},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:H,viewport:X,transparency:O,background:G}),this.operatorListIdx=0,this.graphicsReady=!0,(Ee=this.graphicsReadyCallback)==null||Ee.call(this)}cancel(O=null){var Y;this.running=!1,this.cancelled=!0,(Y=this.gfx)==null||Y.endDrawing(),this._canvas&&nt(z,j).delete(this._canvas),this.callback(O||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){var O;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(O=this.stepper)==null||O.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&nt(z,j).delete(this._canvas),this.callback())))}};let InternalRenderTask=z;j=new WeakMap,qt(InternalRenderTask,j,new WeakSet);const version="3.1.81";exports.version=version;const build="0766898d5";exports.build=build},(c,d,g)=>{var U,P,B,Ma,re;Object.defineProperty(d,"__esModule",{value:!0}),d.PrintAnnotationStorage=d.AnnotationStorage=void 0;var v=g(1),b=g(4),_=g(8);class E{constructor(){qt(this,B);qt(this,U,!1);qt(this,P,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(j,z){const W=nt(this,P).get(j);return W===void 0?z:Object.assign(z,W)}getRawValue(j){return nt(this,P).get(j)}remove(j){if(nt(this,P).delete(j),nt(this,P).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const z of nt(this,P).values())if(z instanceof b.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(j,z){const W=nt(this,P).get(j);let O=!1;if(W!==void 0)for(const[Y,Q]of Object.entries(z))W[Y]!==Q&&(O=!0,W[Y]=Q);else O=!0,nt(this,P).set(j,z);O&&Yt(this,B,Ma).call(this),z instanceof b.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(z.constructor._type)}has(j){return nt(this,P).has(j)}getAll(){return nt(this,P).size>0?(0,v.objectFromMap)(nt(this,P)):null}get size(){return nt(this,P).size}resetModified(){nt(this,U)&&(nr(this,U,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new R(this)}get serializable(){if(nt(this,P).size===0)return null;const j=new Map;for(const[z,W]of nt(this,P)){const O=W instanceof b.AnnotationEditor?W.serialize():W;O&&j.set(z,O)}return j}static getHash(j){if(!j)return"";const z=new _.MurmurHash3_64;for(const[W,O]of j)z.update(`${W}:${JSON.stringify(O)}`);return z.hexdigest()}}U=new WeakMap,P=new WeakMap,B=new WeakSet,Ma=function(){nt(this,U)||(nr(this,U,!0),typeof this.onSetModified=="function"&&this.onSetModified())},d.AnnotationStorage=E;class R extends E{constructor(z){super();qt(this,re,null);nr(this,re,structuredClone(z.serializable))}get print(){(0,v.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return nt(this,re)}}re=new WeakMap,d.PrintAnnotationStorage=R},(c,d,g)=>{var E,R,U,P,B,ee;Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationEditor=void 0;var v=g(5),b=g(1);const re=class{constructor(j){qt(this,E,this.focusin.bind(this));qt(this,R,this.focusout.bind(this));qt(this,U,!1);qt(this,P,!1);qt(this,B,!1);qt(this,ee,re._zIndex++);this.constructor===re&&(0,b.unreachable)("Cannot initialize AnnotationEditor."),this.parent=j.parent,this.id=j.id,this.width=this.height=null,this.pageIndex=j.parent.pageIndex,this.name=j.name,this.div=null;const[z,W]=this.parent.viewportBaseDimensions;this.x=j.x/z,this.y=j.y/W,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,b.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=nt(this,ee)}focusin(j){nt(this,U)?nr(this,U,!1):this.parent.setSelected(this)}focusout(j){if(!this.isAttachedToDOM)return;const z=j.relatedTarget;z!=null&&z.closest(`#${this.id}`)||(j.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(j){const z=this.parent.div.getBoundingClientRect();this.startX=j.clientX-z.x,this.startY=j.clientY-z.y,j.dataTransfer.setData("text/plain",this.id),j.dataTransfer.effectAllowed="move"}setAt(j,z,W,O){const[Y,Q]=this.parent.viewportBaseDimensions;[W,O]=this.screenToPageTranslation(W,O),this.x=(j+W)/Y,this.y=(z+O)/Q,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(j,z){const[W,O]=this.parent.viewportBaseDimensions;[j,z]=this.screenToPageTranslation(j,z),this.x+=j/W,this.y+=z/O,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(j,z){const{rotation:W}=this.parent.viewport;switch(W){case 90:return[z,-j];case 180:return[-j,-z];case 270:return[-z,j];default:return[j,z]}}setDims(j,z){const[W,O]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*j/W}%`,this.div.style.height=`${100*z/O}%`}fixDims(){const{style:j}=this.div,{height:z,width:W}=j,O=W.endsWith("%"),Y=z.endsWith("%");if(O&&Y)return;const[Q,X]=this.parent.viewportBaseDimensions;O||(j.width=`${100*parseFloat(W)/Q}%`),Y||(j.height=`${100*parseFloat(z)/X}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",nt(this,E)),this.div.addEventListener("focusout",nt(this,R));const[j,z]=this.getInitialTranslation();return this.translate(j,z),(0,v.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(j){const z=v.KeyboardManager.platform.isMac;if(j.button!==0||j.ctrlKey&&z){j.preventDefault();return}j.ctrlKey&&!z||j.shiftKey||j.metaKey&&z?this.parent.toggleSelected(this):this.parent.setSelected(this),nr(this,U,!0)}getRect(j,z){const[W,O]=this.parent.viewportBaseDimensions,[Y,Q]=this.parent.pageDimensions,X=Y*j/W,H=Q*z/O,G=this.x*Y,ie=this.y*Q,Ee=this.width*Y,be=this.height*Q;switch(this.rotation){case 0:return[G+X,Q-ie-H-be,G+X+Ee,Q-ie-H];case 90:return[G+H,Q-ie+X,G+H+be,Q-ie+X+Ee];case 180:return[G-X-Ee,Q-ie+H,G-X,Q-ie+H+be];case 270:return[G-H-be,Q-ie-X-Ee,G-H,Q-ie-X];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(j,z){const[W,O,Y,Q]=j,X=Y-W,H=Q-O;switch(this.rotation){case 0:return[W,z-Q,X,H];case 90:return[W,z-O,H,X];case 180:return[Y,z-O,X,H];case 270:return[Y,z-Q,H,X];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){nr(this,B,!0)}disableEditMode(){nr(this,B,!1)}isInEditMode(){return nt(this,B)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var j;(j=this.div)==null||j.addEventListener("focusin",nt(this,E))}serialize(){(0,b.unreachable)("An editor must be serializable")}static deserialize(j,z){const W=new this.prototype.constructor({parent:z,id:z.getNextId()});W.rotation=j.rotation;const[O,Y]=z.pageDimensions,[Q,X,H,G]=W.getRectInCurrentCoords(j.rect,Y);return W.x=Q/O,W.y=X/Y,W.width=H/O,W.height=G/Y,W}remove(){this.div.removeEventListener("focusin",nt(this,E)),this.div.removeEventListener("focusout",nt(this,R)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var j;(j=this.div)==null||j.classList.add("selectedEditor")}unselect(){var j;(j=this.div)==null||j.classList.remove("selectedEditor")}updateParams(j,z){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return nt(this,P)}set isEditing(j){nr(this,P,j),j?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let _=re;E=new WeakMap,R=new WeakMap,U=new WeakMap,P=new WeakMap,B=new WeakMap,ee=new WeakMap,Dr(_,"_colorManager",new v.ColorManager),Dr(_,"_zIndex",1),d.AnnotationEditor=_},(c,d,g)=>{var re,ne,j,z,W,O,ka,H,G,ie,Ee,be,Ce,Oe,mt,Tt,St,ft,ut,wt,Et,Pt,Mt,Bt,et,Pe,oe,Fa,tt,la,Qe,La,_t,Ba,dt,En,Lt,Hn,V,Ua,Z,qa,xe,ua,vt,jn,rt,da;Object.defineProperty(d,"__esModule",{value:!0}),d.KeyboardManager=d.CommandManager=d.ColorManager=d.AnnotationEditorUIManager=void 0,d.bindEvents=_,d.opacityToHex=E;var v=g(1),b=g(6);function _($t,ct,kt){for(const zt of kt)ct.addEventListener(zt,$t[zt].bind($t))}function E($t){return Math.round(Math.min(255,Math.max(1,255*$t))).toString(16).padStart(2,"0")}class R{constructor(){qt(this,re,0)}getId(){return`${v.AnnotationEditorPrefix}${sa(this,re)._++}`}}re=new WeakMap;class U{constructor(ct=128){qt(this,ne,[]);qt(this,j,!1);qt(this,z,void 0);qt(this,W,-1);nr(this,z,ct)}add({cmd:ct,undo:kt,mustExec:zt,type:Wt=NaN,overwriteIfSameType:mr=!1,keepUndo:or=!1}){if(zt&&ct(),nt(this,j))return;const A={cmd:ct,undo:kt,type:Wt};if(nt(this,W)===-1){nt(this,ne).length>0&&(nt(this,ne).length=0),nr(this,W,0),nt(this,ne).push(A);return}if(mr&&nt(this,ne)[nt(this,W)].type===Wt){or&&(A.undo=nt(this,ne)[nt(this,W)].undo),nt(this,ne)[nt(this,W)]=A;return}const K=nt(this,W)+1;K===nt(this,z)?nt(this,ne).splice(0,1):(nr(this,W,K),K<nt(this,ne).length&&nt(this,ne).splice(K)),nt(this,ne).push(A)}undo(){nt(this,W)!==-1&&(nr(this,j,!0),nt(this,ne)[nt(this,W)].undo(),nr(this,j,!1),nr(this,W,nt(this,W)-1))}redo(){nt(this,W)<nt(this,ne).length-1&&(nr(this,W,nt(this,W)+1),nr(this,j,!0),nt(this,ne)[nt(this,W)].cmd(),nr(this,j,!1))}hasSomethingToUndo(){return nt(this,W)!==-1}hasSomethingToRedo(){return nt(this,W)<nt(this,ne).length-1}destroy(){nr(this,ne,null)}}ne=new WeakMap,j=new WeakMap,z=new WeakMap,W=new WeakMap,d.CommandManager=U;const Q=class{constructor(ct){qt(this,O);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const kt=Q.platform.isMac;for(const[zt,Wt]of ct)for(const mr of zt){const or=mr.startsWith("mac+");kt&&or?(this.callbacks.set(mr.slice(4),Wt),this.allKeys.add(mr.split("+").at(-1))):!kt&&!or&&(this.callbacks.set(mr,Wt),this.allKeys.add(mr.split("+").at(-1)))}}static get platform(){const ct=typeof navigator<"u"?navigator.platform:"";return(0,v.shadow)(this,"platform",{isWin:ct.includes("Win"),isMac:ct.includes("Mac")})}exec(ct,kt){if(!this.allKeys.has(kt.key))return;const zt=this.callbacks.get(Yt(this,O,ka).call(this,kt));!zt||(zt.bind(ct)(),kt.stopPropagation(),kt.preventDefault())}};let P=Q;O=new WeakSet,ka=function(ct){ct.altKey&&this.buffer.push("alt"),ct.ctrlKey&&this.buffer.push("ctrl"),ct.metaKey&&this.buffer.push("meta"),ct.shiftKey&&this.buffer.push("shift"),this.buffer.push(ct.key);const kt=this.buffer.join("+");return this.buffer.length=0,kt},d.KeyboardManager=P;const X=class{get _colors(){const ct=new Map([["CanvasText",null],["Canvas",null]]);return(0,b.getColorValues)(ct),(0,v.shadow)(this,"_colors",ct)}convert(ct){const kt=(0,b.getRGB)(ct);if(!window.matchMedia("(forced-colors: active)").matches)return kt;for(const[zt,Wt]of this._colors)if(Wt.every((mr,or)=>mr===kt[or]))return X._colorsMapping.get(zt);return kt}getHexCode(ct){const kt=this._colors.get(ct);return kt?v.Util.makeHexColor(...kt):ct}};let B=X;Dr(B,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),d.ColorManager=B;const ot=class{constructor(ct,kt){qt(this,oe);qt(this,tt);qt(this,Qe);qt(this,_t);qt(this,dt);qt(this,Lt);qt(this,V);qt(this,Z);qt(this,xe);qt(this,vt);qt(this,rt);qt(this,H,null);qt(this,G,new Map);qt(this,ie,new Map);qt(this,Ee,new U);qt(this,be,0);qt(this,Ce,null);qt(this,Oe,null);qt(this,mt,new R);qt(this,Tt,!1);qt(this,St,v.AnnotationEditorType.NONE);qt(this,ft,new Set);qt(this,ut,this.copy.bind(this));qt(this,wt,this.cut.bind(this));qt(this,Et,this.paste.bind(this));qt(this,Pt,this.keydown.bind(this));qt(this,Mt,this.onEditingAction.bind(this));qt(this,Bt,this.onPageChanging.bind(this));qt(this,et,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});qt(this,Pe,null);nr(this,Pe,ct),nr(this,Oe,kt),nt(this,Oe)._on("editingaction",nt(this,Mt)),nt(this,Oe)._on("pagechanging",nt(this,Bt))}destroy(){Yt(this,tt,la).call(this),nt(this,Oe)._off("editingaction",nt(this,Mt)),nt(this,Oe)._off("pagechanging",nt(this,Bt));for(const ct of nt(this,ie).values())ct.destroy();nt(this,ie).clear(),nt(this,G).clear(),nr(this,H,null),nt(this,ft).clear(),nt(this,Ee).destroy()}onPageChanging({pageNumber:ct}){nr(this,be,ct-1)}focusMainContainer(){nt(this,Pe).focus()}copy(ct){if(ct.preventDefault(),nt(this,H)&&nt(this,H).commitOrRemove(),!this.hasSelection)return;const kt=[];for(const zt of nt(this,ft))zt.isEmpty()||kt.push(zt.serialize());kt.length!==0&&ct.clipboardData.setData("application/pdfjs",JSON.stringify(kt))}cut(ct){this.copy(ct),this.delete()}paste(ct){ct.preventDefault();let kt=ct.clipboardData.getData("application/pdfjs");if(!kt)return;try{kt=JSON.parse(kt)}catch(Wt){(0,v.warn)(`paste: "${Wt.message}".`);return}if(!Array.isArray(kt))return;this.unselectAll();const zt=nt(this,ie).get(nt(this,be));try{const Wt=[];for(const A of kt){const K=zt.deserialize(A);if(!K)return;Wt.push(K)}const mr=()=>{for(const A of Wt)Yt(this,xe,ua).call(this,A);Yt(this,rt,da).call(this,Wt)},or=()=>{for(const A of Wt)A.remove()};this.addCommands({cmd:mr,undo:or,mustExec:!0})}catch(Wt){(0,v.warn)(`paste: "${Wt.message}".`)}}keydown(ct){var kt;(kt=this.getActive())!=null&&kt.shouldGetKeyboardEvents()||ot._keyboardManager.exec(this,ct)}onEditingAction(ct){["undo","redo","delete","selectAll"].includes(ct.name)&&this[ct.name]()}setEditingState(ct){ct?(Yt(this,oe,Fa).call(this),Yt(this,Qe,La).call(this),Yt(this,dt,En).call(this,{isEditing:nt(this,St)!==v.AnnotationEditorType.NONE,isEmpty:Yt(this,vt,jn).call(this),hasSomethingToUndo:nt(this,Ee).hasSomethingToUndo(),hasSomethingToRedo:nt(this,Ee).hasSomethingToRedo(),hasSelectedEditor:!1})):(Yt(this,tt,la).call(this),Yt(this,_t,Ba).call(this),Yt(this,dt,En).call(this,{isEditing:!1}))}registerEditorTypes(ct){if(!nt(this,Ce)){nr(this,Ce,ct);for(const kt of nt(this,Ce))Yt(this,Lt,Hn).call(this,kt.defaultPropertiesToUpdate)}}getId(){return nt(this,mt).getId()}addLayer(ct){nt(this,ie).set(ct.pageIndex,ct),nt(this,Tt)?ct.enable():ct.disable()}removeLayer(ct){nt(this,ie).delete(ct.pageIndex)}updateMode(ct){if(nr(this,St,ct),ct===v.AnnotationEditorType.NONE)this.setEditingState(!1),Yt(this,Z,qa).call(this);else{this.setEditingState(!0),Yt(this,V,Ua).call(this);for(const kt of nt(this,ie).values())kt.updateMode(ct)}}updateToolbar(ct){ct!==nt(this,St)&&nt(this,Oe).dispatch("switchannotationeditormode",{source:this,mode:ct})}updateParams(ct,kt){if(!!nt(this,Ce)){for(const zt of nt(this,ft))zt.updateParams(ct,kt);for(const zt of nt(this,Ce))zt.updateDefaultParams(ct,kt)}}getEditors(ct){const kt=[];for(const zt of nt(this,G).values())zt.pageIndex===ct&&kt.push(zt);return kt}getEditor(ct){return nt(this,G).get(ct)}addEditor(ct){nt(this,G).set(ct.id,ct)}removeEditor(ct){nt(this,G).delete(ct.id),this.unselect(ct)}setActiveEditor(ct){nt(this,H)!==ct&&(nr(this,H,ct),ct&&Yt(this,Lt,Hn).call(this,ct.propertiesToUpdate))}toggleSelected(ct){if(nt(this,ft).has(ct)){nt(this,ft).delete(ct),ct.unselect(),Yt(this,dt,En).call(this,{hasSelectedEditor:this.hasSelection});return}nt(this,ft).add(ct),ct.select(),Yt(this,Lt,Hn).call(this,ct.propertiesToUpdate),Yt(this,dt,En).call(this,{hasSelectedEditor:!0})}setSelected(ct){for(const kt of nt(this,ft))kt!==ct&&kt.unselect();nt(this,ft).clear(),nt(this,ft).add(ct),ct.select(),Yt(this,Lt,Hn).call(this,ct.propertiesToUpdate),Yt(this,dt,En).call(this,{hasSelectedEditor:!0})}isSelected(ct){return nt(this,ft).has(ct)}unselect(ct){ct.unselect(),nt(this,ft).delete(ct),Yt(this,dt,En).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return nt(this,ft).size!==0}undo(){nt(this,Ee).undo(),Yt(this,dt,En).call(this,{hasSomethingToUndo:nt(this,Ee).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Yt(this,vt,jn).call(this)})}redo(){nt(this,Ee).redo(),Yt(this,dt,En).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:nt(this,Ee).hasSomethingToRedo(),isEmpty:Yt(this,vt,jn).call(this)})}addCommands(ct){nt(this,Ee).add(ct),Yt(this,dt,En).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Yt(this,vt,jn).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const ct=[...nt(this,ft)],kt=()=>{for(const Wt of ct)Wt.remove()},zt=()=>{for(const Wt of ct)Yt(this,xe,ua).call(this,Wt)};this.addCommands({cmd:kt,undo:zt,mustExec:!0})}commitOrRemove(){var ct;(ct=nt(this,H))==null||ct.commitOrRemove()}selectAll(){for(const ct of nt(this,ft))ct.commit();Yt(this,rt,da).call(this,nt(this,G).values())}unselectAll(){if(nt(this,H)){nt(this,H).commitOrRemove();return}if(nt(this,ft).size!==0){for(const ct of nt(this,ft))ct.unselect();nt(this,ft).clear(),Yt(this,dt,En).call(this,{hasSelectedEditor:!1})}}isActive(ct){return nt(this,H)===ct}getActive(){return nt(this,H)}getMode(){return nt(this,St)}};let ee=ot;H=new WeakMap,G=new WeakMap,ie=new WeakMap,Ee=new WeakMap,be=new WeakMap,Ce=new WeakMap,Oe=new WeakMap,mt=new WeakMap,Tt=new WeakMap,St=new WeakMap,ft=new WeakMap,ut=new WeakMap,wt=new WeakMap,Et=new WeakMap,Pt=new WeakMap,Mt=new WeakMap,Bt=new WeakMap,et=new WeakMap,Pe=new WeakMap,oe=new WeakSet,Fa=function(){nt(this,Pe).addEventListener("keydown",nt(this,Pt))},tt=new WeakSet,la=function(){nt(this,Pe).removeEventListener("keydown",nt(this,Pt))},Qe=new WeakSet,La=function(){document.addEventListener("copy",nt(this,ut)),document.addEventListener("cut",nt(this,wt)),document.addEventListener("paste",nt(this,Et))},_t=new WeakSet,Ba=function(){document.removeEventListener("copy",nt(this,ut)),document.removeEventListener("cut",nt(this,wt)),document.removeEventListener("paste",nt(this,Et))},dt=new WeakSet,En=function(ct){Object.entries(ct).some(([zt,Wt])=>nt(this,et)[zt]!==Wt)&&nt(this,Oe).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(nt(this,et),ct)})},Lt=new WeakSet,Hn=function(ct){nt(this,Oe).dispatch("annotationeditorparamschanged",{source:this,details:ct})},V=new WeakSet,Ua=function(){if(!nt(this,Tt)){nr(this,Tt,!0);for(const ct of nt(this,ie).values())ct.enable()}},Z=new WeakSet,qa=function(){if(this.unselectAll(),nt(this,Tt)){nr(this,Tt,!1);for(const ct of nt(this,ie).values())ct.disable()}},xe=new WeakSet,ua=function(ct){const kt=nt(this,ie).get(ct.pageIndex);kt?kt.addOrRebuild(ct):this.addEditor(ct)},vt=new WeakSet,jn=function(){if(nt(this,G).size===0)return!0;if(nt(this,G).size===1)for(const ct of nt(this,G).values())return ct.isEmpty();return!1},rt=new WeakSet,da=function(ct){nt(this,ft).clear();for(const kt of ct)kt.isEmpty()||(nt(this,ft).add(kt),kt.select());Yt(this,dt,En).call(this,{hasSelectedEditor:!0})},Dr(ee,"_keyboardManager",new P([[["ctrl+a","mac+meta+a"],ot.prototype.selectAll],[["ctrl+z","mac+meta+z"],ot.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],ot.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],ot.prototype.delete],[["Escape","mac+Escape"],ot.prototype.unselectAll]])),d.AnnotationEditorUIManager=ee},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.StatTimer=d.RenderingCancelledException=d.PixelsPerInch=d.PageViewport=d.PDFDateString=d.DOMStandardFontDataFactory=d.DOMSVGFactory=d.DOMCanvasFactory=d.DOMCMapReaderFactory=d.AnnotationPrefix=void 0,d.deprecated=G,d.getColorValues=Oe,d.getCurrentTransform=mt,d.getCurrentTransformInverse=Tt,d.getFilenameFromUrl=O,d.getPdfFilenameFromUrl=Y,d.getRGB=Ce,d.getXfaPageViewport=be,d.isDataScheme=z,d.isPdfFile=W,d.isValidFetchUrl=X,d.loadScript=H;var v=g(7),b=g(1);const _="http://www.w3.org/2000/svg",E="pdfjs_internal_id_";d.AnnotationPrefix=E;const St=class{};let R=St;Dr(R,"CSS",96),Dr(R,"PDF",72),Dr(R,"PDF_TO_CSS_UNITS",St.CSS/St.PDF),d.PixelsPerInch=R;class U extends v.BaseCanvasFactory{constructor({ownerDocument:ut=globalThis.document}={}){super(),this._document=ut}_createCanvas(ut,wt){const Et=this._document.createElement("canvas");return Et.width=ut,Et.height=wt,Et}}d.DOMCanvasFactory=U;async function P(ft,ut=!1){if(X(ft,document.baseURI)){const wt=await fetch(ft);if(!wt.ok)throw new Error(wt.statusText);return ut?new Uint8Array(await wt.arrayBuffer()):(0,b.stringToBytes)(await wt.text())}return new Promise((wt,Et)=>{const Pt=new XMLHttpRequest;Pt.open("GET",ft,!0),ut&&(Pt.responseType="arraybuffer"),Pt.onreadystatechange=()=>{if(Pt.readyState===XMLHttpRequest.DONE){if(Pt.status===200||Pt.status===0){let Mt;if(ut&&Pt.response?Mt=new Uint8Array(Pt.response):!ut&&Pt.responseText&&(Mt=(0,b.stringToBytes)(Pt.responseText)),Mt){wt(Mt);return}}Et(new Error(Pt.statusText))}},Pt.send(null)})}class B extends v.BaseCMapReaderFactory{_fetchData(ut,wt){return P(ut,this.isCompressed).then(Et=>({cMapData:Et,compressionType:wt}))}}d.DOMCMapReaderFactory=B;class ee extends v.BaseStandardFontDataFactory{_fetchData(ut){return P(ut,!0)}}d.DOMStandardFontDataFactory=ee;class re extends v.BaseSVGFactory{_createSVG(ut){return document.createElementNS(_,ut)}}d.DOMSVGFactory=re;class ne{constructor({viewBox:ut,scale:wt,rotation:Et,offsetX:Pt=0,offsetY:Mt=0,dontFlip:Bt=!1}){this.viewBox=ut,this.scale=wt,this.rotation=Et,this.offsetX=Pt,this.offsetY=Mt;const et=(ut[2]+ut[0])/2,Pe=(ut[3]+ut[1])/2;let oe,Ye,tt,Ze;switch(Et%=360,Et<0&&(Et+=360),Et){case 180:oe=-1,Ye=0,tt=0,Ze=1;break;case 90:oe=0,Ye=1,tt=1,Ze=0;break;case 270:oe=0,Ye=-1,tt=-1,Ze=0;break;case 0:oe=1,Ye=0,tt=0,Ze=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Bt&&(tt=-tt,Ze=-Ze);let Qe,lt,_t,Nt;oe===0?(Qe=Math.abs(Pe-ut[1])*wt+Pt,lt=Math.abs(et-ut[0])*wt+Mt,_t=Math.abs(ut[3]-ut[1])*wt,Nt=Math.abs(ut[2]-ut[0])*wt):(Qe=Math.abs(et-ut[0])*wt+Pt,lt=Math.abs(Pe-ut[1])*wt+Mt,_t=Math.abs(ut[2]-ut[0])*wt,Nt=Math.abs(ut[3]-ut[1])*wt),this.transform=[oe*wt,Ye*wt,tt*wt,Ze*wt,Qe-oe*wt*et-tt*wt*Pe,lt-Ye*wt*et-Ze*wt*Pe],this.width=_t,this.height=Nt}clone({scale:ut=this.scale,rotation:wt=this.rotation,offsetX:Et=this.offsetX,offsetY:Pt=this.offsetY,dontFlip:Mt=!1}={}){return new ne({viewBox:this.viewBox.slice(),scale:ut,rotation:wt,offsetX:Et,offsetY:Pt,dontFlip:Mt})}convertToViewportPoint(ut,wt){return b.Util.applyTransform([ut,wt],this.transform)}convertToViewportRectangle(ut){const wt=b.Util.applyTransform([ut[0],ut[1]],this.transform),Et=b.Util.applyTransform([ut[2],ut[3]],this.transform);return[wt[0],wt[1],Et[0],Et[1]]}convertToPdfPoint(ut,wt){return b.Util.applyInverseTransform([ut,wt],this.transform)}}d.PageViewport=ne;class j extends b.BaseException{constructor(ut,wt){super(ut,"RenderingCancelledException"),this.type=wt}}d.RenderingCancelledException=j;function z(ft){const ut=ft.length;let wt=0;for(;wt<ut&&ft[wt].trim()==="";)wt++;return ft.substring(wt,wt+5).toLowerCase()==="data:"}function W(ft){return typeof ft=="string"&&/\.pdf$/i.test(ft)}function O(ft,ut=!1){return ut||([ft]=ft.split(/[#?]/,1)),ft.substring(ft.lastIndexOf("/")+1)}function Y(ft,ut="document.pdf"){if(typeof ft!="string")return ut;if(z(ft))return(0,b.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),ut;const wt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Et=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Pt=wt.exec(ft);let Mt=Et.exec(Pt[1])||Et.exec(Pt[2])||Et.exec(Pt[3]);if(Mt&&(Mt=Mt[0],Mt.includes("%")))try{Mt=Et.exec(decodeURIComponent(Mt))[0]}catch{}return Mt||ut}class Q{constructor(){Dr(this,"started",Object.create(null));Dr(this,"times",[])}time(ut){ut in this.started&&(0,b.warn)(`Timer is already running for ${ut}`),this.started[ut]=Date.now()}timeEnd(ut){ut in this.started||(0,b.warn)(`Timer has not been started for ${ut}`),this.times.push({name:ut,start:this.started[ut],end:Date.now()}),delete this.started[ut]}toString(){const ut=[];let wt=0;for(const{name:Et}of this.times)wt=Math.max(Et.length,wt);for(const{name:Et,start:Pt,end:Mt}of this.times)ut.push(`${Et.padEnd(wt)} ${Mt-Pt}ms
`);return ut.join("")}}d.StatTimer=Q;function X(ft,ut){try{const{protocol:wt}=ut?new URL(ft,ut):new URL(ft);return wt==="http:"||wt==="https:"}catch{return!1}}function H(ft,ut=!1){return new Promise((wt,Et)=>{const Pt=document.createElement("script");Pt.src=ft,Pt.onload=function(Mt){ut&&Pt.remove(),wt(Mt)},Pt.onerror=function(){Et(new Error(`Cannot load script at: ${Pt.src}`))},(document.head||document.documentElement).append(Pt)})}function G(ft){console.log("Deprecated API usage: "+ft)}let ie;class Ee{static toDateObject(ut){if(!ut||typeof ut!="string")return null;ie||(ie=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const wt=ie.exec(ut);if(!wt)return null;const Et=parseInt(wt[1],10);let Pt=parseInt(wt[2],10);Pt=Pt>=1&&Pt<=12?Pt-1:0;let Mt=parseInt(wt[3],10);Mt=Mt>=1&&Mt<=31?Mt:1;let Bt=parseInt(wt[4],10);Bt=Bt>=0&&Bt<=23?Bt:0;let et=parseInt(wt[5],10);et=et>=0&&et<=59?et:0;let Pe=parseInt(wt[6],10);Pe=Pe>=0&&Pe<=59?Pe:0;const oe=wt[7]||"Z";let Ye=parseInt(wt[8],10);Ye=Ye>=0&&Ye<=23?Ye:0;let tt=parseInt(wt[9],10)||0;return tt=tt>=0&&tt<=59?tt:0,oe==="-"?(Bt+=Ye,et+=tt):oe==="+"&&(Bt-=Ye,et-=tt),new Date(Date.UTC(Et,Pt,Mt,Bt,et,Pe))}}d.PDFDateString=Ee;function be(ft,{scale:ut=1,rotation:wt=0}){const{width:Et,height:Pt}=ft.attributes.style,Mt=[0,0,parseInt(Et),parseInt(Pt)];return new ne({viewBox:Mt,scale:ut,rotation:wt})}function Ce(ft){if(ft.startsWith("#")){const ut=parseInt(ft.slice(1),16);return[(ut&16711680)>>16,(ut&65280)>>8,ut&255]}return ft.startsWith("rgb(")?ft.slice(4,-1).split(",").map(ut=>parseInt(ut)):ft.startsWith("rgba(")?ft.slice(5,-1).split(",").map(ut=>parseInt(ut)).slice(0,3):((0,b.warn)(`Not a valid color format: "${ft}"`),[0,0,0])}function Oe(ft){const ut=document.createElement("span");ut.style.visibility="hidden",document.body.append(ut);for(const wt of ft.keys()){ut.style.color=wt;const Et=window.getComputedStyle(ut).color;ft.set(wt,Ce(Et))}ut.remove()}function mt(ft){const{a:ut,b:wt,c:Et,d:Pt,e:Mt,f:Bt}=ft.getTransform();return[ut,wt,Et,Pt,Mt,Bt]}function Tt(ft){const{a:ut,b:wt,c:Et,d:Pt,e:Mt,f:Bt}=ft.getTransform().invertSelf();return[ut,wt,Et,Pt,Mt,Bt]}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BaseStandardFontDataFactory=d.BaseSVGFactory=d.BaseCanvasFactory=d.BaseCMapReaderFactory=void 0;var v=g(1);class b{constructor(){this.constructor===b&&(0,v.unreachable)("Cannot initialize BaseCanvasFactory.")}create(P,B){if(P<=0||B<=0)throw new Error("Invalid canvas size");const ee=this._createCanvas(P,B);return{canvas:ee,context:ee.getContext("2d")}}reset(P,B,ee){if(!P.canvas)throw new Error("Canvas is not specified");if(B<=0||ee<=0)throw new Error("Invalid canvas size");P.canvas.width=B,P.canvas.height=ee}destroy(P){if(!P.canvas)throw new Error("Canvas is not specified");P.canvas.width=0,P.canvas.height=0,P.canvas=null,P.context=null}_createCanvas(P,B){(0,v.unreachable)("Abstract method `_createCanvas` called.")}}d.BaseCanvasFactory=b;class _{constructor({baseUrl:P=null,isCompressed:B=!1}){this.constructor===_&&(0,v.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=P,this.isCompressed=B}async fetch({name:P}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!P)throw new Error("CMap name must be specified.");const B=this.baseUrl+P+(this.isCompressed?".bcmap":""),ee=this.isCompressed?v.CMapCompressionType.BINARY:v.CMapCompressionType.NONE;return this._fetchData(B,ee).catch(re=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${B}`)})}_fetchData(P,B){(0,v.unreachable)("Abstract method `_fetchData` called.")}}d.BaseCMapReaderFactory=_;class E{constructor({baseUrl:P=null}){this.constructor===E&&(0,v.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=P}async fetch({filename:P}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!P)throw new Error("Font filename must be specified.");const B=`${this.baseUrl}${P}`;return this._fetchData(B).catch(ee=>{throw new Error(`Unable to load font data at: ${B}`)})}_fetchData(P){(0,v.unreachable)("Abstract method `_fetchData` called.")}}d.BaseStandardFontDataFactory=E;class R{constructor(){this.constructor===R&&(0,v.unreachable)("Cannot initialize BaseSVGFactory.")}create(P,B,ee=!1){if(P<=0||B<=0)throw new Error("Invalid SVG dimensions");const re=this._createSVG("svg:svg");return re.setAttribute("version","1.1"),ee||(re.setAttribute("width",`${P}px`),re.setAttribute("height",`${B}px`)),re.setAttribute("preserveAspectRatio","none"),re.setAttribute("viewBox",`0 0 ${P} ${B}`),re}createElement(P){if(typeof P!="string")throw new Error("Invalid SVG element type");return this._createSVG(P)}_createSVG(P){(0,v.unreachable)("Abstract method `_createSVG` called.")}}d.BaseSVGFactory=R},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MurmurHash3_64=void 0;var v=g(1);const b=3285377520,_=4294901760,E=65535;class R{constructor(P){this.h1=P?P&4294967295:b,this.h2=P?P&4294967295:b}update(P){let B,ee;if(typeof P=="string"){B=new Uint8Array(P.length*2),ee=0;for(let ie=0,Ee=P.length;ie<Ee;ie++){const be=P.charCodeAt(ie);be<=255?B[ee++]=be:(B[ee++]=be>>>8,B[ee++]=be&255)}}else if((0,v.isArrayBuffer)(P))B=P.slice(),ee=B.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const re=ee>>2,ne=ee-re*4,j=new Uint32Array(B.buffer,0,re);let z=0,W=0,O=this.h1,Y=this.h2;const Q=3432918353,X=461845907,H=Q&E,G=X&E;for(let ie=0;ie<re;ie++)ie&1?(z=j[ie],z=z*Q&_|z*H&E,z=z<<15|z>>>17,z=z*X&_|z*G&E,O^=z,O=O<<13|O>>>19,O=O*5+3864292196):(W=j[ie],W=W*Q&_|W*H&E,W=W<<15|W>>>17,W=W*X&_|W*G&E,Y^=W,Y=Y<<13|Y>>>19,Y=Y*5+3864292196);switch(z=0,ne){case 3:z^=B[re*4+2]<<16;case 2:z^=B[re*4+1]<<8;case 1:z^=B[re*4],z=z*Q&_|z*H&E,z=z<<15|z>>>17,z=z*X&_|z*G&E,re&1?O^=z:Y^=z}this.h1=O,this.h2=Y}hexdigest(){let P=this.h1,B=this.h2;return P^=B>>>1,P=P*3981806797&_|P*36045&E,B=B*4283543511&_|((B<<16|P>>>16)*2950163797&_)>>>16,P^=B>>>1,P=P*444984403&_|P*60499&E,B=B*3301882366&_|((B<<16|P>>>16)*3120437893&_)>>>16,P^=B>>>1,(P>>>0).toString(16).padStart(8,"0")+(B>>>0).toString(16).padStart(8,"0")}}d.MurmurHash3_64=R},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.FontLoader=d.FontFaceObject=void 0;var v=g(1);class b{constructor({onUnsupportedFeature:R,ownerDocument:U=globalThis.document,styleElement:P=null}){this._onUnsupportedFeature=R,this._document=U,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(R){this.nativeFontFaces.push(R),this._document.fonts.add(R)}insertRule(R){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const U=this.styleElement.sheet;U.insertRule(R,U.cssRules.length)}clear(){for(const R of this.nativeFontFaces)this._document.fonts.delete(R);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(R){if(R.attached||R.missingFile)return;if(R.attached=!0,this.isFontLoadingAPISupported){const P=R.createNativeFontFace();if(P){this.addNativeFontFace(P);try{await P.loaded}catch(B){throw this._onUnsupportedFeature({featureId:v.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,v.warn)(`Failed to load font '${P.family}': '${B}'.`),R.disableFontFace=!0,B}}return}const U=R.createFontFaceRule();if(U){if(this.insertRule(U),this.isSyncFontLoadingSupported)return;await new Promise(P=>{const B=this._queueLoadingCallback(P);this._prepareFontLoadEvent(R,B)})}}get isFontLoadingAPISupported(){var U;const R=!!((U=this._document)!=null&&U.fonts);return(0,v.shadow)(this,"isFontLoadingAPISupported",R)}get isSyncFontLoadingSupported(){let R=!1;if(typeof navigator>"u")R=!0;else{const U=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(U==null?void 0:U[1])>=14&&(R=!0)}return(0,v.shadow)(this,"isSyncFontLoadingSupported",R)}_queueLoadingCallback(R){function U(){for((0,v.assert)(!B.done,"completeRequest() cannot be called twice."),B.done=!0;P.length>0&&P[0].done;){const ee=P.shift();setTimeout(ee.callback,0)}}const{loadingRequests:P}=this,B={done:!1,complete:U,callback:R};return P.push(B),B}get _loadTestFont(){const R=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,v.shadow)(this,"_loadTestFont",R)}_prepareFontLoadEvent(R,U){function P(Ce,Oe){return Ce.charCodeAt(Oe)<<24|Ce.charCodeAt(Oe+1)<<16|Ce.charCodeAt(Oe+2)<<8|Ce.charCodeAt(Oe+3)&255}function B(Ce,Oe,mt,Tt){const St=Ce.substring(0,Oe),ft=Ce.substring(Oe+mt);return St+Tt+ft}let ee,re;const ne=this._document.createElement("canvas");ne.width=1,ne.height=1;const j=ne.getContext("2d");let z=0;function W(Ce,Oe){if(++z>30){(0,v.warn)("Load test font never loaded."),Oe();return}if(j.font="30px "+Ce,j.fillText(".",0,20),j.getImageData(0,0,1,1).data[3]>0){Oe();return}setTimeout(W.bind(null,Ce,Oe))}const O=`lt${Date.now()}${this.loadTestFontId++}`;let Y=this._loadTestFont;Y=B(Y,976,O.length,O);const X=16,H=1482184792;let G=P(Y,X);for(ee=0,re=O.length-3;ee<re;ee+=4)G=G-H+P(O,ee)|0;ee<O.length&&(G=G-H+P(O+"XXX",ee)|0),Y=B(Y,X,4,(0,v.string32)(G));const ie=`url(data:font/opentype;base64,${btoa(Y)});`,Ee=`@font-face {font-family:"${O}";src:${ie}}`;this.insertRule(Ee);const be=this._document.createElement("div");be.style.visibility="hidden",be.style.width=be.style.height="10px",be.style.position="absolute",be.style.top=be.style.left="0px";for(const Ce of[R.loadedName,O]){const Oe=this._document.createElement("span");Oe.textContent="Hi",Oe.style.fontFamily=Ce,be.append(Oe)}this._document.body.append(be),W(O,()=>{be.remove(),U.complete()})}}d.FontLoader=b;class _{constructor(R,{isEvalSupported:U=!0,disableFontFace:P=!1,ignoreErrors:B=!1,onUnsupportedFeature:ee,fontRegistry:re=null}){this.compiledGlyphs=Object.create(null);for(const ne in R)this[ne]=R[ne];this.isEvalSupported=U!==!1,this.disableFontFace=P===!0,this.ignoreErrors=B===!0,this._onUnsupportedFeature=ee,this.fontRegistry=re}createNativeFontFace(){var U;if(!this.data||this.disableFontFace)return null;let R;if(!this.cssFontInfo)R=new FontFace(this.loadedName,this.data,{});else{const P={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(P.style=`oblique ${this.cssFontInfo.italicAngle}deg`),R=new FontFace(this.cssFontInfo.fontFamily,this.data,P)}return(U=this.fontRegistry)==null||U.registerFont(this),R}createFontFaceRule(){var B;if(!this.data||this.disableFontFace)return null;const R=(0,v.bytesToString)(this.data),U=`url(data:${this.mimetype};base64,${btoa(R)});`;let P;if(!this.cssFontInfo)P=`@font-face {font-family:"${this.loadedName}";src:${U}}`;else{let ee=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ee+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),P=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ee}src:${U}}`}return(B=this.fontRegistry)==null||B.registerFont(this,U),P}getPathGenerator(R,U){if(this.compiledGlyphs[U]!==void 0)return this.compiledGlyphs[U];let P;try{P=R.get(this.loadedName+"_path_"+U)}catch(B){if(!this.ignoreErrors)throw B;return this._onUnsupportedFeature({featureId:v.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,v.warn)(`getPathGenerator - ignoring character: "${B}".`),this.compiledGlyphs[U]=function(ee,re){}}if(this.isEvalSupported&&v.FeatureTest.isEvalSupported){const B=[];for(const ee of P){const re=ee.args!==void 0?ee.args.join(","):"";B.push("c.",ee.cmd,"(",re,`);
`)}return this.compiledGlyphs[U]=new Function("c","size",B.join(""))}return this.compiledGlyphs[U]=function(B,ee){for(const re of P)re.cmd==="scale"&&(re.args=[ee,-ee]),B[re.cmd].apply(B,re.args)}}}d.FontFaceObject=_},(c,d,g)=>{var Pt,fa;Object.defineProperty(d,"__esModule",{value:!0}),d.CanvasGraphics=void 0;var v=g(1),b=g(6),_=g(11),E=g(13),R=g(12);const U=16,P=100,B=4096,ee=15,re=10,ne=R.isNodeJS&&typeof Path2D>"u"?-1:1e3,j=16;function z(et,Pe){if(et._removeMirroring)throw new Error("Context is already forwarding operations.");et.__originalSave=et.save,et.__originalRestore=et.restore,et.__originalRotate=et.rotate,et.__originalScale=et.scale,et.__originalTranslate=et.translate,et.__originalTransform=et.transform,et.__originalSetTransform=et.setTransform,et.__originalResetTransform=et.resetTransform,et.__originalClip=et.clip,et.__originalMoveTo=et.moveTo,et.__originalLineTo=et.lineTo,et.__originalBezierCurveTo=et.bezierCurveTo,et.__originalRect=et.rect,et.__originalClosePath=et.closePath,et.__originalBeginPath=et.beginPath,et._removeMirroring=()=>{et.save=et.__originalSave,et.restore=et.__originalRestore,et.rotate=et.__originalRotate,et.scale=et.__originalScale,et.translate=et.__originalTranslate,et.transform=et.__originalTransform,et.setTransform=et.__originalSetTransform,et.resetTransform=et.__originalResetTransform,et.clip=et.__originalClip,et.moveTo=et.__originalMoveTo,et.lineTo=et.__originalLineTo,et.bezierCurveTo=et.__originalBezierCurveTo,et.rect=et.__originalRect,et.closePath=et.__originalClosePath,et.beginPath=et.__originalBeginPath,delete et._removeMirroring},et.save=function(){Pe.save(),this.__originalSave()},et.restore=function(){Pe.restore(),this.__originalRestore()},et.translate=function(Ye,tt){Pe.translate(Ye,tt),this.__originalTranslate(Ye,tt)},et.scale=function(Ye,tt){Pe.scale(Ye,tt),this.__originalScale(Ye,tt)},et.transform=function(Ye,tt,Ze,Qe,lt,_t){Pe.transform(Ye,tt,Ze,Qe,lt,_t),this.__originalTransform(Ye,tt,Ze,Qe,lt,_t)},et.setTransform=function(Ye,tt,Ze,Qe,lt,_t){Pe.setTransform(Ye,tt,Ze,Qe,lt,_t),this.__originalSetTransform(Ye,tt,Ze,Qe,lt,_t)},et.resetTransform=function(){Pe.resetTransform(),this.__originalResetTransform()},et.rotate=function(Ye){Pe.rotate(Ye),this.__originalRotate(Ye)},et.clip=function(Ye){Pe.clip(Ye),this.__originalClip(Ye)},et.moveTo=function(oe,Ye){Pe.moveTo(oe,Ye),this.__originalMoveTo(oe,Ye)},et.lineTo=function(oe,Ye){Pe.lineTo(oe,Ye),this.__originalLineTo(oe,Ye)},et.bezierCurveTo=function(oe,Ye,tt,Ze,Qe,lt){Pe.bezierCurveTo(oe,Ye,tt,Ze,Qe,lt),this.__originalBezierCurveTo(oe,Ye,tt,Ze,Qe,lt)},et.rect=function(oe,Ye,tt,Ze){Pe.rect(oe,Ye,tt,Ze),this.__originalRect(oe,Ye,tt,Ze)},et.closePath=function(){Pe.closePath(),this.__originalClosePath()},et.beginPath=function(){Pe.beginPath(),this.__originalBeginPath()}}class W{constructor(Pe){this.canvasFactory=Pe,this.cache=Object.create(null)}getCanvas(Pe,oe,Ye){let tt;return this.cache[Pe]!==void 0?(tt=this.cache[Pe],this.canvasFactory.reset(tt,oe,Ye)):(tt=this.canvasFactory.create(oe,Ye),this.cache[Pe]=tt),tt}delete(Pe){delete this.cache[Pe]}clear(){for(const Pe in this.cache){const oe=this.cache[Pe];this.canvasFactory.destroy(oe),delete this.cache[Pe]}}}function O(et,Pe,oe,Ye,tt,Ze,Qe,lt,_t,Nt){const[dt,xt,Lt,Vt,V,M]=(0,b.getCurrentTransform)(et);if(xt===0&&Lt===0){const xe=Qe*dt+V,at=Math.round(xe),vt=lt*Vt+M,st=Math.round(vt),rt=(Qe+_t)*dt+V,ht=Math.abs(Math.round(rt)-at)||1,ot=(lt+Nt)*Vt+M,$t=Math.abs(Math.round(ot)-st)||1;return et.setTransform(Math.sign(dt),0,0,Math.sign(Vt),at,st),et.drawImage(Pe,oe,Ye,tt,Ze,0,0,ht,$t),et.setTransform(dt,xt,Lt,Vt,V,M),[ht,$t]}if(dt===0&&Vt===0){const xe=lt*Lt+V,at=Math.round(xe),vt=Qe*xt+M,st=Math.round(vt),rt=(lt+Nt)*Lt+V,ht=Math.abs(Math.round(rt)-at)||1,ot=(Qe+_t)*xt+M,$t=Math.abs(Math.round(ot)-st)||1;return et.setTransform(0,Math.sign(xt),Math.sign(Lt),0,at,st),et.drawImage(Pe,oe,Ye,tt,Ze,0,0,$t,ht),et.setTransform(dt,xt,Lt,Vt,V,M),[$t,ht]}et.drawImage(Pe,oe,Ye,tt,Ze,Qe,lt,_t,Nt);const Z=Math.hypot(dt,xt),te=Math.hypot(Lt,Vt);return[Z*_t,te*Nt]}function Y(et){const{width:Pe,height:oe}=et;if(Pe>ne||oe>ne)return null;const Ye=1e3,tt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Ze=Pe+1;let Qe=new Uint8Array(Ze*(oe+1)),lt,_t,Nt;const dt=Pe+7&-8;let xt=new Uint8Array(dt*oe),Lt=0;for(const te of et.data){let xe=128;for(;xe>0;)xt[Lt++]=te&xe?0:255,xe>>=1}let Vt=0;for(Lt=0,xt[Lt]!==0&&(Qe[0]=1,++Vt),_t=1;_t<Pe;_t++)xt[Lt]!==xt[Lt+1]&&(Qe[_t]=xt[Lt]?2:1,++Vt),Lt++;for(xt[Lt]!==0&&(Qe[_t]=2,++Vt),lt=1;lt<oe;lt++){Lt=lt*dt,Nt=lt*Ze,xt[Lt-dt]!==xt[Lt]&&(Qe[Nt]=xt[Lt]?1:8,++Vt);let te=(xt[Lt]?4:0)+(xt[Lt-dt]?8:0);for(_t=1;_t<Pe;_t++)te=(te>>2)+(xt[Lt+1]?4:0)+(xt[Lt-dt+1]?8:0),tt[te]&&(Qe[Nt+_t]=tt[te],++Vt),Lt++;if(xt[Lt-dt]!==xt[Lt]&&(Qe[Nt+_t]=xt[Lt]?2:4,++Vt),Vt>Ye)return null}for(Lt=dt*(oe-1),Nt=lt*Ze,xt[Lt]!==0&&(Qe[Nt]=8,++Vt),_t=1;_t<Pe;_t++)xt[Lt]!==xt[Lt+1]&&(Qe[Nt+_t]=xt[Lt]?4:8,++Vt),Lt++;if(xt[Lt]!==0&&(Qe[Nt+_t]=4,++Vt),Vt>Ye)return null;const V=new Int32Array([0,Ze,-1,0,-Ze,0,0,0,1]),M=new Path2D;for(lt=0;Vt&&lt<=oe;lt++){let te=lt*Ze;const xe=te+Pe;for(;te<xe&&!Qe[te];)te++;if(te===xe)continue;M.moveTo(te%Ze,lt);const at=te;let vt=Qe[te];do{const st=V[vt];do te+=st;while(!Qe[te]);const rt=Qe[te];rt!==5&&rt!==10?(vt=rt,Qe[te]=0):(vt=rt&51*vt>>4,Qe[te]&=vt>>2|vt<<2),M.lineTo(te%Ze,te/Ze|0),Qe[te]||--Vt}while(at!==te);--lt}return xt=null,Qe=null,function(te){te.save(),te.scale(1/Pe,-1/oe),te.translate(0,-oe),te.fill(M),te.beginPath(),te.restore()}}class Q{constructor(Pe,oe){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=v.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=v.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=v.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,Pe,oe])}clone(){const Pe=Object.create(this);return Pe.clipBox=this.clipBox.slice(),Pe}setCurrentPoint(Pe,oe){this.x=Pe,this.y=oe}updatePathMinMax(Pe,oe,Ye){[oe,Ye]=v.Util.applyTransform([oe,Ye],Pe),this.minX=Math.min(this.minX,oe),this.minY=Math.min(this.minY,Ye),this.maxX=Math.max(this.maxX,oe),this.maxY=Math.max(this.maxY,Ye)}updateRectMinMax(Pe,oe){const Ye=v.Util.applyTransform(oe,Pe),tt=v.Util.applyTransform(oe.slice(2),Pe);this.minX=Math.min(this.minX,Ye[0],tt[0]),this.minY=Math.min(this.minY,Ye[1],tt[1]),this.maxX=Math.max(this.maxX,Ye[0],tt[0]),this.maxY=Math.max(this.maxY,Ye[1],tt[1])}updateScalingPathMinMax(Pe,oe){v.Util.scaleMinMax(Pe,oe),this.minX=Math.min(this.minX,oe[0]),this.maxX=Math.max(this.maxX,oe[1]),this.minY=Math.min(this.minY,oe[2]),this.maxY=Math.max(this.maxY,oe[3])}updateCurvePathMinMax(Pe,oe,Ye,tt,Ze,Qe,lt,_t,Nt,dt){const xt=v.Util.bezierBoundingBox(oe,Ye,tt,Ze,Qe,lt,_t,Nt);if(dt){dt[0]=Math.min(dt[0],xt[0],xt[2]),dt[1]=Math.max(dt[1],xt[0],xt[2]),dt[2]=Math.min(dt[2],xt[1],xt[3]),dt[3]=Math.max(dt[3],xt[1],xt[3]);return}this.updateRectMinMax(Pe,xt)}getPathBoundingBox(Pe=_.PathType.FILL,oe=null){const Ye=[this.minX,this.minY,this.maxX,this.maxY];if(Pe===_.PathType.STROKE){oe||(0,v.unreachable)("Stroke bounding box must include transform.");const tt=v.Util.singularValueDecompose2dScale(oe),Ze=tt[0]*this.lineWidth/2,Qe=tt[1]*this.lineWidth/2;Ye[0]-=Ze,Ye[1]-=Qe,Ye[2]+=Ze,Ye[3]+=Qe}return Ye}updateClipFromPath(){const Pe=v.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Pe||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Pe){this.clipBox=Pe,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Pe=_.PathType.FILL,oe=null){return v.Util.intersect(this.clipBox,this.getPathBoundingBox(Pe,oe))}}function X(et,Pe,oe=null){if(typeof ImageData<"u"&&Pe instanceof ImageData){et.putImageData(Pe,0,0);return}const Ye=Pe.height,tt=Pe.width,Ze=Ye%j,Qe=(Ye-Ze)/j,lt=Ze===0?Qe:Qe+1,_t=et.createImageData(tt,j);let Nt=0,dt;const xt=Pe.data,Lt=_t.data;let Vt,V,M,Z,te,xe,at,vt;if(oe)switch(oe.length){case 1:te=oe[0],xe=oe[0],at=oe[0],vt=oe[0];break;case 4:te=oe[0],xe=oe[1],at=oe[2],vt=oe[3];break}if(Pe.kind===v.ImageKind.GRAYSCALE_1BPP){const st=xt.byteLength,rt=new Uint32Array(Lt.buffer,0,Lt.byteLength>>2),ht=rt.length,ot=tt+7>>3;let $t=4294967295,ct=v.FeatureTest.isLittleEndian?4278190080:255;for(vt&&vt[0]===255&&vt[255]===0&&([$t,ct]=[ct,$t]),Vt=0;Vt<lt;Vt++){for(M=Vt<Qe?j:Ze,dt=0,V=0;V<M;V++){const kt=st-Nt;let zt=0;const Wt=kt>ot?tt:kt*8-7,mr=Wt&-8;let or=0,A=0;for(;zt<mr;zt+=8)A=xt[Nt++],rt[dt++]=A&128?$t:ct,rt[dt++]=A&64?$t:ct,rt[dt++]=A&32?$t:ct,rt[dt++]=A&16?$t:ct,rt[dt++]=A&8?$t:ct,rt[dt++]=A&4?$t:ct,rt[dt++]=A&2?$t:ct,rt[dt++]=A&1?$t:ct;for(;zt<Wt;zt++)or===0&&(A=xt[Nt++],or=128),rt[dt++]=A&or?$t:ct,or>>=1}for(;dt<ht;)rt[dt++]=0;et.putImageData(_t,0,Vt*j)}}else if(Pe.kind===v.ImageKind.RGBA_32BPP){const st=!!(te||xe||at);for(V=0,Z=tt*j*4,Vt=0;Vt<Qe;Vt++){if(Lt.set(xt.subarray(Nt,Nt+Z)),Nt+=Z,st)for(let rt=0;rt<Z;rt+=4)te&&(Lt[rt+0]=te[Lt[rt+0]]),xe&&(Lt[rt+1]=xe[Lt[rt+1]]),at&&(Lt[rt+2]=at[Lt[rt+2]]);et.putImageData(_t,0,V),V+=j}if(Vt<lt){if(Z=tt*Ze*4,Lt.set(xt.subarray(Nt,Nt+Z)),st)for(let rt=0;rt<Z;rt+=4)te&&(Lt[rt+0]=te[Lt[rt+0]]),xe&&(Lt[rt+1]=xe[Lt[rt+1]]),at&&(Lt[rt+2]=at[Lt[rt+2]]);et.putImageData(_t,0,V)}}else if(Pe.kind===v.ImageKind.RGB_24BPP){const st=!!(te||xe||at);for(M=j,Z=tt*M,Vt=0;Vt<lt;Vt++){for(Vt>=Qe&&(M=Ze,Z=tt*M),dt=0,V=Z;V--;)Lt[dt++]=xt[Nt++],Lt[dt++]=xt[Nt++],Lt[dt++]=xt[Nt++],Lt[dt++]=255;if(st)for(let rt=0;rt<dt;rt+=4)te&&(Lt[rt+0]=te[Lt[rt+0]]),xe&&(Lt[rt+1]=xe[Lt[rt+1]]),at&&(Lt[rt+2]=at[Lt[rt+2]]);et.putImageData(_t,0,Vt*j)}}else throw new Error(`bad image kind: ${Pe.kind}`)}function H(et,Pe){if(Pe.bitmap){et.drawImage(Pe.bitmap,0,0);return}const oe=Pe.height,Ye=Pe.width,tt=oe%j,Ze=(oe-tt)/j,Qe=tt===0?Ze:Ze+1,lt=et.createImageData(Ye,j);let _t=0;const Nt=Pe.data,dt=lt.data;for(let xt=0;xt<Qe;xt++){const Lt=xt<Ze?j:tt;({srcPos:_t}=(0,E.applyMaskImageData)({src:Nt,srcPos:_t,dest:dt,width:Ye,height:Lt})),et.putImageData(lt,0,xt*j)}}function G(et,Pe){const oe=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const Ye of oe)et[Ye]!==void 0&&(Pe[Ye]=et[Ye]);et.setLineDash!==void 0&&(Pe.setLineDash(et.getLineDash()),Pe.lineDashOffset=et.lineDashOffset)}function ie(et,Pe){et.strokeStyle=et.fillStyle=Pe||"#000000",et.fillRule="nonzero",et.globalAlpha=1,et.lineWidth=1,et.lineCap="butt",et.lineJoin="miter",et.miterLimit=10,et.globalCompositeOperation="source-over",et.font="10px sans-serif",et.setLineDash!==void 0&&(et.setLineDash([]),et.lineDashOffset=0)}function Ee(et,Pe,oe,Ye){const tt=et.length;for(let Ze=3;Ze<tt;Ze+=4){const Qe=et[Ze];if(Qe===0)et[Ze-3]=Pe,et[Ze-2]=oe,et[Ze-1]=Ye;else if(Qe<255){const lt=255-Qe;et[Ze-3]=et[Ze-3]*Qe+Pe*lt>>8,et[Ze-2]=et[Ze-2]*Qe+oe*lt>>8,et[Ze-1]=et[Ze-1]*Qe+Ye*lt>>8}}}function be(et,Pe,oe){const Ye=et.length,tt=1/255;for(let Ze=3;Ze<Ye;Ze+=4){const Qe=oe?oe[et[Ze]]:et[Ze];Pe[Ze]=Pe[Ze]*Qe*tt|0}}function Ce(et,Pe,oe){const Ye=et.length;for(let tt=3;tt<Ye;tt+=4){const Ze=et[tt-3]*77+et[tt-2]*152+et[tt-1]*28;Pe[tt]=oe?Pe[tt]*oe[Ze>>8]>>8:Pe[tt]*Ze>>16}}function Oe(et,Pe,oe,Ye,tt,Ze,Qe,lt,_t,Nt,dt){const xt=!!Ze,Lt=xt?Ze[0]:0,Vt=xt?Ze[1]:0,V=xt?Ze[2]:0;let M;tt==="Luminosity"?M=Ce:M=be;const te=Math.min(Ye,Math.ceil(1048576/oe));for(let xe=0;xe<Ye;xe+=te){const at=Math.min(te,Ye-xe),vt=et.getImageData(lt-Nt,xe+(_t-dt),oe,at),st=Pe.getImageData(lt,xe+_t,oe,at);xt&&Ee(vt.data,Lt,Vt,V),M(vt.data,st.data,Qe),Pe.putImageData(st,lt,xe+_t)}}function mt(et,Pe,oe,Ye){const tt=Ye[0],Ze=Ye[1],Qe=Ye[2]-tt,lt=Ye[3]-Ze;Qe===0||lt===0||(Oe(Pe.context,oe,Qe,lt,Pe.subtype,Pe.backdrop,Pe.transferMap,tt,Ze,Pe.offsetX,Pe.offsetY),et.save(),et.globalAlpha=1,et.globalCompositeOperation="source-over",et.setTransform(1,0,0,1,0,0),et.drawImage(oe.canvas,0,0),et.restore())}function Tt(et,Pe){const oe=v.Util.singularValueDecompose2dScale(et);oe[0]=Math.fround(oe[0]),oe[1]=Math.fround(oe[1]);const Ye=Math.fround((globalThis.devicePixelRatio||1)*b.PixelsPerInch.PDF_TO_CSS_UNITS);return Pe!==void 0?Pe:oe[0]<=Ye||oe[1]<=Ye}const St=["butt","round","square"],ft=["miter","round","bevel"],ut={},wt={},Bt=class{constructor(Pe,oe,Ye,tt,{optionalContentConfig:Ze,markedContentStack:Qe=null},lt,_t){qt(this,Pt);this.ctx=Pe,this.current=new Q(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=oe,this.objs=Ye,this.canvasFactory=tt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Qe||[],this.optionalContentConfig=Ze,this.cachedCanvases=new W(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=lt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(_t==null?void 0:_t.background)||null,this.foregroundColor=(_t==null?void 0:_t.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Pe,oe=null){return typeof Pe=="string"?Pe.startsWith("g_")?this.commonObjs.get(Pe):this.objs.get(Pe):oe}beginDrawing({transform:Pe,viewport:oe,transparency:Ye=!1,background:tt=null}){const Ze=this.ctx.canvas.width,Qe=this.ctx.canvas.height,lt=tt||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const _t=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const Nt=this.backgroundColor=this.ctx.fillStyle;let dt=!0,xt=lt;if(this.ctx.fillStyle=lt,xt=this.ctx.fillStyle,dt=typeof xt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(xt),_t==="#000000"&&Nt==="#ffffff"||_t===Nt||!dt)this.foregroundColor=this.backgroundColor=null;else{const[Lt,Vt,V]=(0,b.getRGB)(xt),M=te=>(te/=255,te<=.03928?te/12.92:((te+.055)/1.055)**2.4),Z=Math.round(.2126*M(Lt)+.7152*M(Vt)+.0722*M(V));this.selectColor=(te,xe,at)=>{const vt=.2126*M(te)+.7152*M(xe)+.0722*M(at);return Math.round(vt)===Z?Nt:_t}}}if(this.ctx.fillStyle=this.backgroundColor||lt,this.ctx.fillRect(0,0,Ze,Qe),this.ctx.restore(),Ye){const _t=this.cachedCanvases.getCanvas("transparent",Ze,Qe);this.compositeCtx=this.ctx,this.transparentCanvas=_t.canvas,this.ctx=_t.context,this.ctx.save(),this.ctx.transform(...(0,b.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),ie(this.ctx,this.foregroundColor),Pe&&(this.ctx.transform(...Pe),this.outputScaleX=Pe[0],this.outputScaleY=Pe[0]),this.ctx.transform(...oe.transform),this.viewportScale=oe.scale,this.baseTransform=(0,b.getCurrentTransform)(this.ctx)}executeOperatorList(Pe,oe,Ye,tt){const Ze=Pe.argsArray,Qe=Pe.fnArray;let lt=oe||0;const _t=Ze.length;if(_t===lt)return lt;const Nt=_t-lt>re&&typeof Ye=="function",dt=Nt?Date.now()+ee:0;let xt=0;const Lt=this.commonObjs,Vt=this.objs;let V;for(;;){if(tt!==void 0&&lt===tt.nextBreakPoint)return tt.breakIt(lt,Ye),lt;if(V=Qe[lt],V!==v.OPS.dependency)this[V].apply(this,Ze[lt]);else for(const M of Ze[lt]){const Z=M.startsWith("g_")?Lt:Vt;if(!Z.has(M))return Z.get(M,Ye),lt}if(lt++,lt===_t)return lt;if(Nt&&++xt>re){if(Date.now()>dt)return Ye(),lt;xt=0}}}endDrawing(){Yt(this,Pt,fa).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Pe of this._cachedBitmapsMap.values()){for(const oe of Pe.values())typeof HTMLCanvasElement<"u"&&oe instanceof HTMLCanvasElement&&(oe.width=oe.height=0);Pe.clear()}this._cachedBitmapsMap.clear()}_scaleImage(Pe,oe){const Ye=Pe.width,tt=Pe.height;let Ze=Math.max(Math.hypot(oe[0],oe[1]),1),Qe=Math.max(Math.hypot(oe[2],oe[3]),1),lt=Ye,_t=tt,Nt="prescale1",dt,xt;for(;Ze>2&&lt>1||Qe>2&&_t>1;){let Lt=lt,Vt=_t;Ze>2&&lt>1&&(Lt=Math.ceil(lt/2),Ze/=lt/Lt),Qe>2&&_t>1&&(Vt=Math.ceil(_t/2),Qe/=_t/Vt),dt=this.cachedCanvases.getCanvas(Nt,Lt,Vt),xt=dt.context,xt.clearRect(0,0,Lt,Vt),xt.drawImage(Pe,0,0,lt,_t,0,0,Lt,Vt),Pe=dt.canvas,lt=Lt,_t=Vt,Nt=Nt==="prescale1"?"prescale2":"prescale1"}return{img:Pe,paintWidth:lt,paintHeight:_t}}_createMaskCanvas(Pe){const oe=this.ctx,{width:Ye,height:tt}=Pe,Ze=this.current.fillColor,Qe=this.current.patternFill,lt=(0,b.getCurrentTransform)(oe);let _t,Nt,dt,xt;if((Pe.bitmap||Pe.data)&&Pe.count>1){const ht=Pe.bitmap||Pe.data.buffer;Nt=JSON.stringify(Qe?lt:[lt.slice(0,4),Ze]),_t=this._cachedBitmapsMap.get(ht),_t||(_t=new Map,this._cachedBitmapsMap.set(ht,_t));const ot=_t.get(Nt);if(ot&&!Qe){const $t=Math.round(Math.min(lt[0],lt[2])+lt[4]),ct=Math.round(Math.min(lt[1],lt[3])+lt[5]);return{canvas:ot,offsetX:$t,offsetY:ct}}dt=ot}dt||(xt=this.cachedCanvases.getCanvas("maskCanvas",Ye,tt),H(xt.context,Pe));let Lt=v.Util.transform(lt,[1/Ye,0,0,-1/tt,0,0]);Lt=v.Util.transform(Lt,[1,0,0,1,0,-tt]);const Vt=v.Util.applyTransform([0,0],Lt),V=v.Util.applyTransform([Ye,tt],Lt),M=v.Util.normalizeRect([Vt[0],Vt[1],V[0],V[1]]),Z=Math.round(M[2]-M[0])||1,te=Math.round(M[3]-M[1])||1,xe=this.cachedCanvases.getCanvas("fillCanvas",Z,te),at=xe.context,vt=Math.min(Vt[0],V[0]),st=Math.min(Vt[1],V[1]);at.translate(-vt,-st),at.transform(...Lt),dt||(dt=this._scaleImage(xt.canvas,(0,b.getCurrentTransformInverse)(at)),dt=dt.img,_t&&Qe&&_t.set(Nt,dt)),at.imageSmoothingEnabled=Tt((0,b.getCurrentTransform)(at),Pe.interpolate),O(at,dt,0,0,dt.width,dt.height,0,0,Ye,tt),at.globalCompositeOperation="source-in";const rt=v.Util.transform((0,b.getCurrentTransformInverse)(at),[1,0,0,1,-vt,-st]);return at.fillStyle=Qe?Ze.getPattern(oe,this,rt,_.PathType.FILL):Ze,at.fillRect(0,0,Ye,tt),_t&&!Qe&&(this.cachedCanvases.delete("fillCanvas"),_t.set(Nt,xe.canvas)),{canvas:xe.canvas,offsetX:Math.round(vt),offsetY:Math.round(st)}}setLineWidth(Pe){Pe!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=Pe,this.ctx.lineWidth=Pe}setLineCap(Pe){this.ctx.lineCap=St[Pe]}setLineJoin(Pe){this.ctx.lineJoin=ft[Pe]}setMiterLimit(Pe){this.ctx.miterLimit=Pe}setDash(Pe,oe){const Ye=this.ctx;Ye.setLineDash!==void 0&&(Ye.setLineDash(Pe),Ye.lineDashOffset=oe)}setRenderingIntent(Pe){}setFlatness(Pe){}setGState(Pe){for(const[oe,Ye]of Pe)switch(oe){case"LW":this.setLineWidth(Ye);break;case"LC":this.setLineCap(Ye);break;case"LJ":this.setLineJoin(Ye);break;case"ML":this.setMiterLimit(Ye);break;case"D":this.setDash(Ye[0],Ye[1]);break;case"RI":this.setRenderingIntent(Ye);break;case"FL":this.setFlatness(Ye);break;case"Font":this.setFont(Ye[0],Ye[1]);break;case"CA":this.current.strokeAlpha=Ye;break;case"ca":this.current.fillAlpha=Ye,this.ctx.globalAlpha=Ye;break;case"BM":this.ctx.globalCompositeOperation=Ye;break;case"SMask":this.current.activeSMask=Ye?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=Ye}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Pe=this.inSMaskMode;this.current.activeSMask&&!Pe?this.beginSMaskMode():!this.current.activeSMask&&Pe&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Pe=this.ctx.canvas.width,oe=this.ctx.canvas.height,Ye="smaskGroupAt"+this.groupLevel,tt=this.cachedCanvases.getCanvas(Ye,Pe,oe);this.suspendedCtx=this.ctx,this.ctx=tt.context;const Ze=this.ctx;Ze.setTransform(...(0,b.getCurrentTransform)(this.suspendedCtx)),G(this.suspendedCtx,Ze),z(Ze,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),G(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Pe){if(!this.current.activeSMask)return;Pe?(Pe[0]=Math.floor(Pe[0]),Pe[1]=Math.floor(Pe[1]),Pe[2]=Math.ceil(Pe[2]),Pe[3]=Math.ceil(Pe[3])):Pe=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const oe=this.current.activeSMask,Ye=this.suspendedCtx;mt(Ye,oe,this.ctx,Pe),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(G(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Pe=this.current;this.stateStack.push(Pe),this.current=Pe.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),G(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(Pe,oe,Ye,tt,Ze,Qe){this.ctx.transform(Pe,oe,Ye,tt,Ze,Qe),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(Pe,oe,Ye){const tt=this.ctx,Ze=this.current;let Qe=Ze.x,lt=Ze.y,_t,Nt;const dt=(0,b.getCurrentTransform)(tt),xt=dt[0]===0&&dt[3]===0||dt[1]===0&&dt[2]===0,Lt=xt?Ye.slice(0):null;for(let Vt=0,V=0,M=Pe.length;Vt<M;Vt++)switch(Pe[Vt]|0){case v.OPS.rectangle:Qe=oe[V++],lt=oe[V++];const Z=oe[V++],te=oe[V++],xe=Qe+Z,at=lt+te;tt.moveTo(Qe,lt),Z===0||te===0?tt.lineTo(xe,at):(tt.lineTo(xe,lt),tt.lineTo(xe,at),tt.lineTo(Qe,at)),xt||Ze.updateRectMinMax(dt,[Qe,lt,xe,at]),tt.closePath();break;case v.OPS.moveTo:Qe=oe[V++],lt=oe[V++],tt.moveTo(Qe,lt),xt||Ze.updatePathMinMax(dt,Qe,lt);break;case v.OPS.lineTo:Qe=oe[V++],lt=oe[V++],tt.lineTo(Qe,lt),xt||Ze.updatePathMinMax(dt,Qe,lt);break;case v.OPS.curveTo:_t=Qe,Nt=lt,Qe=oe[V+4],lt=oe[V+5],tt.bezierCurveTo(oe[V],oe[V+1],oe[V+2],oe[V+3],Qe,lt),Ze.updateCurvePathMinMax(dt,_t,Nt,oe[V],oe[V+1],oe[V+2],oe[V+3],Qe,lt,Lt),V+=6;break;case v.OPS.curveTo2:_t=Qe,Nt=lt,tt.bezierCurveTo(Qe,lt,oe[V],oe[V+1],oe[V+2],oe[V+3]),Ze.updateCurvePathMinMax(dt,_t,Nt,Qe,lt,oe[V],oe[V+1],oe[V+2],oe[V+3],Lt),Qe=oe[V+2],lt=oe[V+3],V+=4;break;case v.OPS.curveTo3:_t=Qe,Nt=lt,Qe=oe[V+2],lt=oe[V+3],tt.bezierCurveTo(oe[V],oe[V+1],Qe,lt,Qe,lt),Ze.updateCurvePathMinMax(dt,_t,Nt,oe[V],oe[V+1],Qe,lt,Qe,lt,Lt),V+=4;break;case v.OPS.closePath:tt.closePath();break}xt&&Ze.updateScalingPathMinMax(dt,Lt),Ze.setCurrentPoint(Qe,lt)}closePath(){this.ctx.closePath()}stroke(Pe){Pe=typeof Pe<"u"?Pe:!0;const oe=this.ctx,Ye=this.current.strokeColor;oe.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Ye=="object"&&(Ye==null?void 0:Ye.getPattern)?(oe.save(),oe.strokeStyle=Ye.getPattern(oe,this,(0,b.getCurrentTransformInverse)(oe),_.PathType.STROKE),this.rescaleAndStroke(!1),oe.restore()):this.rescaleAndStroke(!0)),Pe&&this.consumePath(this.current.getClippedPathBoundingBox()),oe.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Pe){Pe=typeof Pe<"u"?Pe:!0;const oe=this.ctx,Ye=this.current.fillColor,tt=this.current.patternFill;let Ze=!1;tt&&(oe.save(),oe.fillStyle=Ye.getPattern(oe,this,(0,b.getCurrentTransformInverse)(oe),_.PathType.FILL),Ze=!0);const Qe=this.current.getClippedPathBoundingBox();this.contentVisible&&Qe!==null&&(this.pendingEOFill?(oe.fill("evenodd"),this.pendingEOFill=!1):oe.fill()),Ze&&oe.restore(),Pe&&this.consumePath(Qe)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ut}eoClip(){this.pendingClip=wt}beginText(){this.current.textMatrix=v.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Pe=this.pendingTextPaths,oe=this.ctx;if(Pe===void 0){oe.beginPath();return}oe.save(),oe.beginPath();for(const Ye of Pe)oe.setTransform(...Ye.transform),oe.translate(Ye.x,Ye.y),Ye.addToPath(oe,Ye.fontSize);oe.restore(),oe.clip(),oe.beginPath(),delete this.pendingTextPaths}setCharSpacing(Pe){this.current.charSpacing=Pe}setWordSpacing(Pe){this.current.wordSpacing=Pe}setHScale(Pe){this.current.textHScale=Pe/100}setLeading(Pe){this.current.leading=-Pe}setFont(Pe,oe){const Ye=this.commonObjs.get(Pe),tt=this.current;if(!Ye)throw new Error(`Can't find font for ${Pe}`);if(tt.fontMatrix=Ye.fontMatrix||v.FONT_IDENTITY_MATRIX,(tt.fontMatrix[0]===0||tt.fontMatrix[3]===0)&&(0,v.warn)("Invalid font matrix for font "+Pe),oe<0?(oe=-oe,tt.fontDirection=-1):tt.fontDirection=1,this.current.font=Ye,this.current.fontSize=oe,Ye.isType3Font)return;const Ze=Ye.loadedName||"sans-serif";let Qe="normal";Ye.black?Qe="900":Ye.bold&&(Qe="bold");const lt=Ye.italic?"italic":"normal",_t=`"${Ze}", ${Ye.fallbackName}`;let Nt=oe;oe<U?Nt=U:oe>P&&(Nt=P),this.current.fontSizeScale=oe/Nt,this.ctx.font=`${lt} ${Qe} ${Nt}px ${_t}`}setTextRenderingMode(Pe){this.current.textRenderingMode=Pe}setTextRise(Pe){this.current.textRise=Pe}moveText(Pe,oe){this.current.x=this.current.lineX+=Pe,this.current.y=this.current.lineY+=oe}setLeadingMoveText(Pe,oe){this.setLeading(-oe),this.moveText(Pe,oe)}setTextMatrix(Pe,oe,Ye,tt,Ze,Qe){this.current.textMatrix=[Pe,oe,Ye,tt,Ze,Qe],this.current.textMatrixScale=Math.hypot(Pe,oe),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Pe,oe,Ye,tt){const Ze=this.ctx,Qe=this.current,lt=Qe.font,_t=Qe.textRenderingMode,Nt=Qe.fontSize/Qe.fontSizeScale,dt=_t&v.TextRenderingMode.FILL_STROKE_MASK,xt=!!(_t&v.TextRenderingMode.ADD_TO_PATH_FLAG),Lt=Qe.patternFill&&!lt.missingFile;let Vt;(lt.disableFontFace||xt||Lt)&&(Vt=lt.getPathGenerator(this.commonObjs,Pe)),lt.disableFontFace||Lt?(Ze.save(),Ze.translate(oe,Ye),Ze.beginPath(),Vt(Ze,Nt),tt&&Ze.setTransform(...tt),(dt===v.TextRenderingMode.FILL||dt===v.TextRenderingMode.FILL_STROKE)&&Ze.fill(),(dt===v.TextRenderingMode.STROKE||dt===v.TextRenderingMode.FILL_STROKE)&&Ze.stroke(),Ze.restore()):((dt===v.TextRenderingMode.FILL||dt===v.TextRenderingMode.FILL_STROKE)&&Ze.fillText(Pe,oe,Ye),(dt===v.TextRenderingMode.STROKE||dt===v.TextRenderingMode.FILL_STROKE)&&Ze.strokeText(Pe,oe,Ye)),xt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,b.getCurrentTransform)(Ze),x:oe,y:Ye,fontSize:Nt,addToPath:Vt})}get isFontSubpixelAAEnabled(){const{context:Pe}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Pe.scale(1.5,1),Pe.fillText("I",0,10);const oe=Pe.getImageData(0,0,10,10).data;let Ye=!1;for(let tt=3;tt<oe.length;tt+=4)if(oe[tt]>0&&oe[tt]<255){Ye=!0;break}return(0,v.shadow)(this,"isFontSubpixelAAEnabled",Ye)}showText(Pe){const oe=this.current,Ye=oe.font;if(Ye.isType3Font)return this.showType3Text(Pe);const tt=oe.fontSize;if(tt===0)return;const Ze=this.ctx,Qe=oe.fontSizeScale,lt=oe.charSpacing,_t=oe.wordSpacing,Nt=oe.fontDirection,dt=oe.textHScale*Nt,xt=Pe.length,Lt=Ye.vertical,Vt=Lt?1:-1,V=Ye.defaultVMetrics,M=tt*oe.fontMatrix[0],Z=oe.textRenderingMode===v.TextRenderingMode.FILL&&!Ye.disableFontFace&&!oe.patternFill;Ze.save(),Ze.transform(...oe.textMatrix),Ze.translate(oe.x,oe.y+oe.textRise),Nt>0?Ze.scale(dt,-1):Ze.scale(dt,1);let te;if(oe.patternFill){Ze.save();const rt=oe.fillColor.getPattern(Ze,this,(0,b.getCurrentTransformInverse)(Ze),_.PathType.FILL);te=(0,b.getCurrentTransform)(Ze),Ze.restore(),Ze.fillStyle=rt}let xe=oe.lineWidth;const at=oe.textMatrixScale;if(at===0||xe===0){const rt=oe.textRenderingMode&v.TextRenderingMode.FILL_STROKE_MASK;(rt===v.TextRenderingMode.STROKE||rt===v.TextRenderingMode.FILL_STROKE)&&(xe=this.getSinglePixelWidth())}else xe/=at;if(Qe!==1&&(Ze.scale(Qe,Qe),xe/=Qe),Ze.lineWidth=xe,Ye.isInvalidPDFjsFont){const rt=[];let ht=0;for(const ot of Pe)rt.push(ot.unicode),ht+=ot.width;Ze.fillText(rt.join(""),0,0),oe.x+=ht*M*dt,Ze.restore(),this.compose();return}let vt=0,st;for(st=0;st<xt;++st){const rt=Pe[st];if(typeof rt=="number"){vt+=Vt*rt*tt/1e3;continue}let ht=!1;const ot=(rt.isSpace?_t:0)+lt,$t=rt.fontChar,ct=rt.accent;let kt,zt,Wt=rt.width;if(Lt){const or=rt.vmetric||V,A=-(rt.vmetric?or[1]:Wt*.5)*M,K=or[2]*M;Wt=or?-or[0]:Wt,kt=A/Qe,zt=(vt+K)/Qe}else kt=vt/Qe,zt=0;if(Ye.remeasure&&Wt>0){const or=Ze.measureText($t).width*1e3/tt*Qe;if(Wt<or&&this.isFontSubpixelAAEnabled){const A=Wt/or;ht=!0,Ze.save(),Ze.scale(A,1),kt/=A}else Wt!==or&&(kt+=(Wt-or)/2e3*tt/Qe)}if(this.contentVisible&&(rt.isInFont||Ye.missingFile)){if(Z&&!ct)Ze.fillText($t,kt,zt);else if(this.paintChar($t,kt,zt,te),ct){const or=kt+tt*ct.offset.x/Qe,A=zt-tt*ct.offset.y/Qe;this.paintChar(ct.fontChar,or,A,te)}}let mr;Lt?mr=Wt*M-ot*Nt:mr=Wt*M+ot*Nt,vt+=mr,ht&&Ze.restore()}Lt?oe.y-=vt:oe.x+=vt*dt,Ze.restore(),this.compose()}showType3Text(Pe){const oe=this.ctx,Ye=this.current,tt=Ye.font,Ze=Ye.fontSize,Qe=Ye.fontDirection,lt=tt.vertical?1:-1,_t=Ye.charSpacing,Nt=Ye.wordSpacing,dt=Ye.textHScale*Qe,xt=Ye.fontMatrix||v.FONT_IDENTITY_MATRIX,Lt=Pe.length,Vt=Ye.textRenderingMode===v.TextRenderingMode.INVISIBLE;let V,M,Z,te;if(!(Vt||Ze===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,oe.save(),oe.transform(...Ye.textMatrix),oe.translate(Ye.x,Ye.y),oe.scale(dt,Qe),V=0;V<Lt;++V){if(M=Pe[V],typeof M=="number"){te=lt*M*Ze/1e3,this.ctx.translate(te,0),Ye.x+=te*dt;continue}const xe=(M.isSpace?Nt:0)+_t,at=tt.charProcOperatorList[M.operatorListId];if(!at){(0,v.warn)(`Type3 character "${M.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=M,this.save(),oe.scale(Ze,Ze),oe.transform(...xt),this.executeOperatorList(at),this.restore()),Z=v.Util.applyTransform([M.width,0],xt)[0]*Ze+xe,oe.translate(Z,0),Ye.x+=Z*dt}oe.restore(),this.processingType3=null}}setCharWidth(Pe,oe){}setCharWidthAndBounds(Pe,oe,Ye,tt,Ze,Qe){this.ctx.rect(Ye,tt,Ze-Ye,Qe-tt),this.ctx.clip(),this.endPath()}getColorN_Pattern(Pe){let oe;if(Pe[0]==="TilingPattern"){const Ye=Pe[1],tt=this.baseTransform||(0,b.getCurrentTransform)(this.ctx),Ze={createCanvasGraphics:Qe=>new Bt(Qe,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};oe=new _.TilingPattern(Pe,Ye,this.ctx,Ze,tt)}else oe=this._getPattern(Pe[1],Pe[2]);return oe}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Pe,oe,Ye){var Ze;const tt=((Ze=this.selectColor)==null?void 0:Ze.call(this,Pe,oe,Ye))||v.Util.makeHexColor(Pe,oe,Ye);this.ctx.strokeStyle=tt,this.current.strokeColor=tt}setFillRGBColor(Pe,oe,Ye){var Ze;const tt=((Ze=this.selectColor)==null?void 0:Ze.call(this,Pe,oe,Ye))||v.Util.makeHexColor(Pe,oe,Ye);this.ctx.fillStyle=tt,this.current.fillColor=tt,this.current.patternFill=!1}_getPattern(Pe,oe=null){let Ye;return this.cachedPatterns.has(Pe)?Ye=this.cachedPatterns.get(Pe):(Ye=(0,_.getShadingPattern)(this.objs.get(Pe)),this.cachedPatterns.set(Pe,Ye)),oe&&(Ye.matrix=oe),Ye}shadingFill(Pe){if(!this.contentVisible)return;const oe=this.ctx;this.save();const Ye=this._getPattern(Pe);oe.fillStyle=Ye.getPattern(oe,this,(0,b.getCurrentTransformInverse)(oe),_.PathType.SHADING);const tt=(0,b.getCurrentTransformInverse)(oe);if(tt){const Ze=oe.canvas,Qe=Ze.width,lt=Ze.height,_t=v.Util.applyTransform([0,0],tt),Nt=v.Util.applyTransform([0,lt],tt),dt=v.Util.applyTransform([Qe,0],tt),xt=v.Util.applyTransform([Qe,lt],tt),Lt=Math.min(_t[0],Nt[0],dt[0],xt[0]),Vt=Math.min(_t[1],Nt[1],dt[1],xt[1]),V=Math.max(_t[0],Nt[0],dt[0],xt[0]),M=Math.max(_t[1],Nt[1],dt[1],xt[1]);this.ctx.fillRect(Lt,Vt,V-Lt,M-Vt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,v.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,v.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Pe,oe){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Pe)&&Pe.length===6&&this.transform(...Pe),this.baseTransform=(0,b.getCurrentTransform)(this.ctx),oe)){const Ye=oe[2]-oe[0],tt=oe[3]-oe[1];this.ctx.rect(oe[0],oe[1],Ye,tt),this.current.updateRectMinMax((0,b.getCurrentTransform)(this.ctx),oe),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Pe){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const oe=this.ctx;Pe.isolated||(0,v.info)("TODO: Support non-isolated groups."),Pe.knockout&&(0,v.warn)("Knockout groups not supported.");const Ye=(0,b.getCurrentTransform)(oe);if(Pe.matrix&&oe.transform(...Pe.matrix),!Pe.bbox)throw new Error("Bounding box is required.");let tt=v.Util.getAxialAlignedBoundingBox(Pe.bbox,(0,b.getCurrentTransform)(oe));const Ze=[0,0,oe.canvas.width,oe.canvas.height];tt=v.Util.intersect(tt,Ze)||[0,0,0,0];const Qe=Math.floor(tt[0]),lt=Math.floor(tt[1]);let _t=Math.max(Math.ceil(tt[2])-Qe,1),Nt=Math.max(Math.ceil(tt[3])-lt,1),dt=1,xt=1;_t>B&&(dt=_t/B,_t=B),Nt>B&&(xt=Nt/B,Nt=B),this.current.startNewPathAndClipBox([0,0,_t,Nt]);let Lt="groupAt"+this.groupLevel;Pe.smask&&(Lt+="_smask_"+this.smaskCounter++%2);const Vt=this.cachedCanvases.getCanvas(Lt,_t,Nt),V=Vt.context;V.scale(1/dt,1/xt),V.translate(-Qe,-lt),V.transform(...Ye),Pe.smask?this.smaskStack.push({canvas:Vt.canvas,context:V,offsetX:Qe,offsetY:lt,scaleX:dt,scaleY:xt,subtype:Pe.smask.subtype,backdrop:Pe.smask.backdrop,transferMap:Pe.smask.transferMap||null,startTransformInverse:null}):(oe.setTransform(1,0,0,1,0,0),oe.translate(Qe,lt),oe.scale(dt,xt),oe.save()),G(oe,V),this.ctx=V,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(oe),this.groupLevel++}endGroup(Pe){if(!this.contentVisible)return;this.groupLevel--;const oe=this.ctx,Ye=this.groupStack.pop();if(this.ctx=Ye,this.ctx.imageSmoothingEnabled=!1,Pe.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const tt=(0,b.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...tt);const Ze=v.Util.getAxialAlignedBoundingBox([0,0,oe.canvas.width,oe.canvas.height],tt);this.ctx.drawImage(oe.canvas,0,0),this.ctx.restore(),this.compose(Ze)}}beginAnnotation(Pe,oe,Ye,tt,Ze){if(Yt(this,Pt,fa).call(this),ie(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(oe)&&oe.length===4){const Qe=oe[2]-oe[0],lt=oe[3]-oe[1];if(Ze&&this.annotationCanvasMap){Ye=Ye.slice(),Ye[4]-=oe[0],Ye[5]-=oe[1],oe=oe.slice(),oe[0]=oe[1]=0,oe[2]=Qe,oe[3]=lt;const[_t,Nt]=v.Util.singularValueDecompose2dScale((0,b.getCurrentTransform)(this.ctx)),{viewportScale:dt}=this,xt=Math.ceil(Qe*this.outputScaleX*dt),Lt=Math.ceil(lt*this.outputScaleY*dt);this.annotationCanvas=this.canvasFactory.create(xt,Lt);const{canvas:Vt,context:V}=this.annotationCanvas;this.annotationCanvasMap.set(Pe,Vt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=V,this.ctx.setTransform(_t,0,0,-Nt,0,lt*Nt),ie(this.ctx,this.foregroundColor)}else ie(this.ctx,this.foregroundColor),this.ctx.rect(oe[0],oe[1],Qe,lt),this.ctx.clip(),this.endPath()}this.current=new Q(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Ye),this.transform(...tt)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Pe){if(!this.contentVisible)return;const oe=Pe.count;Pe=this.getObject(Pe.data,Pe),Pe.count=oe;const Ye=this.ctx,tt=this.processingType3;if(tt&&(tt.compiled===void 0&&(tt.compiled=Y(Pe)),tt.compiled)){tt.compiled(Ye);return}const Ze=this._createMaskCanvas(Pe),Qe=Ze.canvas;Ye.save(),Ye.setTransform(1,0,0,1,0,0),Ye.drawImage(Qe,Ze.offsetX,Ze.offsetY),Ye.restore(),this.compose()}paintImageMaskXObjectRepeat(Pe,oe,Ye=0,tt=0,Ze,Qe){if(!this.contentVisible)return;Pe=this.getObject(Pe.data,Pe);const lt=this.ctx;lt.save();const _t=(0,b.getCurrentTransform)(lt);lt.transform(oe,Ye,tt,Ze,0,0);const Nt=this._createMaskCanvas(Pe);lt.setTransform(1,0,0,1,Nt.offsetX-_t[4],Nt.offsetY-_t[5]);for(let dt=0,xt=Qe.length;dt<xt;dt+=2){const Lt=v.Util.transform(_t,[oe,Ye,tt,Ze,Qe[dt],Qe[dt+1]]),[Vt,V]=v.Util.applyTransform([0,0],Lt);lt.drawImage(Nt.canvas,Vt,V)}lt.restore(),this.compose()}paintImageMaskXObjectGroup(Pe){if(!this.contentVisible)return;const oe=this.ctx,Ye=this.current.fillColor,tt=this.current.patternFill;for(const Ze of Pe){const{data:Qe,width:lt,height:_t,transform:Nt}=Ze,dt=this.cachedCanvases.getCanvas("maskCanvas",lt,_t),xt=dt.context;xt.save();const Lt=this.getObject(Qe,Ze);H(xt,Lt),xt.globalCompositeOperation="source-in",xt.fillStyle=tt?Ye.getPattern(xt,this,(0,b.getCurrentTransformInverse)(oe),_.PathType.FILL):Ye,xt.fillRect(0,0,lt,_t),xt.restore(),oe.save(),oe.transform(...Nt),oe.scale(1,-1),O(oe,dt.canvas,0,0,lt,_t,0,-1,1,1),oe.restore()}this.compose()}paintImageXObject(Pe){if(!this.contentVisible)return;const oe=this.getObject(Pe);if(!oe){(0,v.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(oe)}paintImageXObjectRepeat(Pe,oe,Ye,tt){if(!this.contentVisible)return;const Ze=this.getObject(Pe);if(!Ze){(0,v.warn)("Dependent image isn't ready yet");return}const Qe=Ze.width,lt=Ze.height,_t=[];for(let Nt=0,dt=tt.length;Nt<dt;Nt+=2)_t.push({transform:[oe,0,0,Ye,tt[Nt],tt[Nt+1]],x:0,y:0,w:Qe,h:lt});this.paintInlineImageXObjectGroup(Ze,_t)}paintInlineImageXObject(Pe){if(!this.contentVisible)return;const oe=Pe.width,Ye=Pe.height,tt=this.ctx;this.save(),tt.scale(1/oe,-1/Ye);let Ze;if(typeof HTMLElement=="function"&&Pe instanceof HTMLElement||!Pe.data)Ze=Pe;else{const lt=this.cachedCanvases.getCanvas("inlineImage",oe,Ye),_t=lt.context;X(_t,Pe,this.current.transferMaps),Ze=lt.canvas}const Qe=this._scaleImage(Ze,(0,b.getCurrentTransformInverse)(tt));tt.imageSmoothingEnabled=Tt((0,b.getCurrentTransform)(tt),Pe.interpolate),O(tt,Qe.img,0,0,Qe.paintWidth,Qe.paintHeight,0,-Ye,oe,Ye),this.compose(),this.restore()}paintInlineImageXObjectGroup(Pe,oe){if(!this.contentVisible)return;const Ye=this.ctx,tt=Pe.width,Ze=Pe.height,Qe=this.cachedCanvases.getCanvas("inlineImage",tt,Ze),lt=Qe.context;X(lt,Pe,this.current.transferMaps);for(const _t of oe)Ye.save(),Ye.transform(..._t.transform),Ye.scale(1,-1),O(Ye,Qe.canvas,_t.x,_t.y,_t.w,_t.h,0,-1,1,1),Ye.restore();this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Pe){}markPointProps(Pe,oe){}beginMarkedContent(Pe){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Pe,oe){Pe==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(oe)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Pe){const oe=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Pe);const Ye=this.ctx;this.pendingClip&&(oe||(this.pendingClip===wt?Ye.clip("evenodd"):Ye.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Ye.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Pe=(0,b.getCurrentTransform)(this.ctx);if(Pe[1]===0&&Pe[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Pe[0]),Math.abs(Pe[3]));else{const oe=Math.abs(Pe[0]*Pe[3]-Pe[2]*Pe[1]),Ye=Math.hypot(Pe[0],Pe[2]),tt=Math.hypot(Pe[1],Pe[3]);this._cachedGetSinglePixelWidth=Math.max(Ye,tt)/oe}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:Pe}=this.current,oe=(0,b.getCurrentTransform)(this.ctx);let Ye,tt;if(oe[1]===0&&oe[2]===0){const Ze=Math.abs(oe[0]),Qe=Math.abs(oe[3]);if(Pe===0)Ye=1/Ze,tt=1/Qe;else{const lt=Ze*Pe,_t=Qe*Pe;Ye=lt<1?1/lt:1,tt=_t<1?1/_t:1}}else{const Ze=Math.abs(oe[0]*oe[3]-oe[2]*oe[1]),Qe=Math.hypot(oe[0],oe[1]),lt=Math.hypot(oe[2],oe[3]);if(Pe===0)Ye=lt/Ze,tt=Qe/Ze;else{const _t=Pe*Ze;Ye=lt>_t?lt/_t:1,tt=Qe>_t?Qe/_t:1}}this._cachedScaleForStroking=[Ye,tt]}return this._cachedScaleForStroking}rescaleAndStroke(Pe){const{ctx:oe}=this,{lineWidth:Ye}=this.current,[tt,Ze]=this.getScaleForStroking();if(oe.lineWidth=Ye||1,tt===1&&Ze===1){oe.stroke();return}let Qe,lt,_t;Pe&&(Qe=(0,b.getCurrentTransform)(oe),lt=oe.getLineDash().slice(),_t=oe.lineDashOffset),oe.scale(tt,Ze);const Nt=Math.max(tt,Ze);oe.setLineDash(oe.getLineDash().map(dt=>dt/Nt)),oe.lineDashOffset/=Nt,oe.stroke(),Pe&&(oe.setTransform(...Qe),oe.setLineDash(lt),oe.lineDashOffset=_t)}isContentVisible(){for(let Pe=this.markedContentStack.length-1;Pe>=0;Pe--)if(!this.markedContentStack[Pe].visible)return!1;return!0}};let Et=Bt;Pt=new WeakSet,fa=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},d.CanvasGraphics=Et;for(const et in v.OPS)Et.prototype[et]!==void 0&&(Et.prototype[v.OPS[et]]=Et.prototype[et])},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TilingPattern=d.PathType=void 0,d.getShadingPattern=j;var v=g(1),b=g(6),_=g(12);const E={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};d.PathType=E;function R(O,Y){if(!Y||_.isNodeJS)return;const Q=Y[2]-Y[0],X=Y[3]-Y[1],H=new Path2D;H.rect(Y[0],Y[1],Q,X),O.clip(H)}class U{constructor(){this.constructor===U&&(0,v.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,v.unreachable)("Abstract method `getPattern` called.")}}class P extends U{constructor(Y){super(),this._type=Y[1],this._bbox=Y[2],this._colorStops=Y[3],this._p0=Y[4],this._p1=Y[5],this._r0=Y[6],this._r1=Y[7],this.matrix=null}_createGradient(Y){let Q;this._type==="axial"?Q=Y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(Q=Y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const X of this._colorStops)Q.addColorStop(X[0],X[1]);return Q}getPattern(Y,Q,X,H){let G;if(H===E.STROKE||H===E.FILL){const ie=Q.current.getClippedPathBoundingBox(H,(0,b.getCurrentTransform)(Y))||[0,0,0,0],Ee=Math.ceil(ie[2]-ie[0])||1,be=Math.ceil(ie[3]-ie[1])||1,Ce=Q.cachedCanvases.getCanvas("pattern",Ee,be,!0),Oe=Ce.context;Oe.clearRect(0,0,Oe.canvas.width,Oe.canvas.height),Oe.beginPath(),Oe.rect(0,0,Oe.canvas.width,Oe.canvas.height),Oe.translate(-ie[0],-ie[1]),X=v.Util.transform(X,[1,0,0,1,ie[0],ie[1]]),Oe.transform(...Q.baseTransform),this.matrix&&Oe.transform(...this.matrix),R(Oe,this._bbox),Oe.fillStyle=this._createGradient(Oe),Oe.fill(),G=Y.createPattern(Ce.canvas,"no-repeat");const mt=new DOMMatrix(X);G.setTransform(mt)}else R(Y,this._bbox),G=this._createGradient(Y);return G}}function B(O,Y,Q,X,H,G,ie,Ee){const be=Y.coords,Ce=Y.colors,Oe=O.data,mt=O.width*4;let Tt;be[Q+1]>be[X+1]&&(Tt=Q,Q=X,X=Tt,Tt=G,G=ie,ie=Tt),be[X+1]>be[H+1]&&(Tt=X,X=H,H=Tt,Tt=ie,ie=Ee,Ee=Tt),be[Q+1]>be[X+1]&&(Tt=Q,Q=X,X=Tt,Tt=G,G=ie,ie=Tt);const St=(be[Q]+Y.offsetX)*Y.scaleX,ft=(be[Q+1]+Y.offsetY)*Y.scaleY,ut=(be[X]+Y.offsetX)*Y.scaleX,wt=(be[X+1]+Y.offsetY)*Y.scaleY,Et=(be[H]+Y.offsetX)*Y.scaleX,Pt=(be[H+1]+Y.offsetY)*Y.scaleY;if(ft>=Pt)return;const Mt=Ce[G],Bt=Ce[G+1],et=Ce[G+2],Pe=Ce[ie],oe=Ce[ie+1],Ye=Ce[ie+2],tt=Ce[Ee],Ze=Ce[Ee+1],Qe=Ce[Ee+2],lt=Math.round(ft),_t=Math.round(Pt);let Nt,dt,xt,Lt,Vt,V,M,Z;for(let te=lt;te<=_t;te++){if(te<wt){let rt;te<ft?rt=0:rt=(ft-te)/(ft-wt),Nt=St-(St-ut)*rt,dt=Mt-(Mt-Pe)*rt,xt=Bt-(Bt-oe)*rt,Lt=et-(et-Ye)*rt}else{let rt;te>Pt?rt=1:wt===Pt?rt=0:rt=(wt-te)/(wt-Pt),Nt=ut-(ut-Et)*rt,dt=Pe-(Pe-tt)*rt,xt=oe-(oe-Ze)*rt,Lt=Ye-(Ye-Qe)*rt}let xe;te<ft?xe=0:te>Pt?xe=1:xe=(ft-te)/(ft-Pt),Vt=St-(St-Et)*xe,V=Mt-(Mt-tt)*xe,M=Bt-(Bt-Ze)*xe,Z=et-(et-Qe)*xe;const at=Math.round(Math.min(Nt,Vt)),vt=Math.round(Math.max(Nt,Vt));let st=mt*te+at*4;for(let rt=at;rt<=vt;rt++)xe=(Nt-rt)/(Nt-Vt),xe<0?xe=0:xe>1&&(xe=1),Oe[st++]=dt-(dt-V)*xe|0,Oe[st++]=xt-(xt-M)*xe|0,Oe[st++]=Lt-(Lt-Z)*xe|0,Oe[st++]=255}}function ee(O,Y,Q){const X=Y.coords,H=Y.colors;let G,ie;switch(Y.type){case"lattice":const Ee=Y.verticesPerRow,be=Math.floor(X.length/Ee)-1,Ce=Ee-1;for(G=0;G<be;G++){let Oe=G*Ee;for(let mt=0;mt<Ce;mt++,Oe++)B(O,Q,X[Oe],X[Oe+1],X[Oe+Ee],H[Oe],H[Oe+1],H[Oe+Ee]),B(O,Q,X[Oe+Ee+1],X[Oe+1],X[Oe+Ee],H[Oe+Ee+1],H[Oe+1],H[Oe+Ee])}break;case"triangles":for(G=0,ie=X.length;G<ie;G+=3)B(O,Q,X[G],X[G+1],X[G+2],H[G],H[G+1],H[G+2]);break;default:throw new Error("illegal figure")}}class re extends U{constructor(Y){super(),this._coords=Y[2],this._colors=Y[3],this._figures=Y[4],this._bounds=Y[5],this._bbox=Y[7],this._background=Y[8],this.matrix=null}_createMeshCanvas(Y,Q,X){const Ee=Math.floor(this._bounds[0]),be=Math.floor(this._bounds[1]),Ce=Math.ceil(this._bounds[2])-Ee,Oe=Math.ceil(this._bounds[3])-be,mt=Math.min(Math.ceil(Math.abs(Ce*Y[0]*1.1)),3e3),Tt=Math.min(Math.ceil(Math.abs(Oe*Y[1]*1.1)),3e3),St=Ce/mt,ft=Oe/Tt,ut={coords:this._coords,colors:this._colors,offsetX:-Ee,offsetY:-be,scaleX:1/St,scaleY:1/ft},wt=mt+2*2,Et=Tt+2*2,Pt=X.getCanvas("mesh",wt,Et,!1),Mt=Pt.context,Bt=Mt.createImageData(mt,Tt);if(Q){const Pe=Bt.data;for(let oe=0,Ye=Pe.length;oe<Ye;oe+=4)Pe[oe]=Q[0],Pe[oe+1]=Q[1],Pe[oe+2]=Q[2],Pe[oe+3]=255}for(const Pe of this._figures)ee(Bt,Pe,ut);return Mt.putImageData(Bt,2,2),{canvas:Pt.canvas,offsetX:Ee-2*St,offsetY:be-2*ft,scaleX:St,scaleY:ft}}getPattern(Y,Q,X,H){R(Y,this._bbox);let G;if(H===E.SHADING)G=v.Util.singularValueDecompose2dScale((0,b.getCurrentTransform)(Y));else if(G=v.Util.singularValueDecompose2dScale(Q.baseTransform),this.matrix){const Ee=v.Util.singularValueDecompose2dScale(this.matrix);G=[G[0]*Ee[0],G[1]*Ee[1]]}const ie=this._createMeshCanvas(G,H===E.SHADING?null:this._background,Q.cachedCanvases);return H!==E.SHADING&&(Y.setTransform(...Q.baseTransform),this.matrix&&Y.transform(...this.matrix)),Y.translate(ie.offsetX,ie.offsetY),Y.scale(ie.scaleX,ie.scaleY),Y.createPattern(ie.canvas,"no-repeat")}}class ne extends U{getPattern(){return"hotpink"}}function j(O){switch(O[0]){case"RadialAxial":return new P(O);case"Mesh":return new re(O);case"Dummy":return new ne}throw new Error(`Unknown IR type: ${O[0]}`)}const z={COLORED:1,UNCOLORED:2};class W{static get MAX_PATTERN_SIZE(){return(0,v.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(Y,Q,X,H,G){this.operatorList=Y[2],this.matrix=Y[3]||[1,0,0,1,0,0],this.bbox=Y[4],this.xstep=Y[5],this.ystep=Y[6],this.paintType=Y[7],this.tilingType=Y[8],this.color=Q,this.ctx=X,this.canvasGraphicsFactory=H,this.baseTransform=G}createPatternCanvas(Y){const Q=this.operatorList,X=this.bbox,H=this.xstep,G=this.ystep,ie=this.paintType,Ee=this.tilingType,be=this.color,Ce=this.canvasGraphicsFactory;(0,v.info)("TilingType: "+Ee);const Oe=X[0],mt=X[1],Tt=X[2],St=X[3],ft=v.Util.singularValueDecompose2dScale(this.matrix),ut=v.Util.singularValueDecompose2dScale(this.baseTransform),wt=[ft[0]*ut[0],ft[1]*ut[1]],Et=this.getSizeAndScale(H,this.ctx.canvas.width,wt[0]),Pt=this.getSizeAndScale(G,this.ctx.canvas.height,wt[1]),Mt=Y.cachedCanvases.getCanvas("pattern",Et.size,Pt.size,!0),Bt=Mt.context,et=Ce.createCanvasGraphics(Bt);et.groupLevel=Y.groupLevel,this.setFillAndStrokeStyleToContext(et,ie,be);let Pe=Oe,oe=mt,Ye=Tt,tt=St;return Oe<0&&(Pe=0,Ye+=Math.abs(Oe)),mt<0&&(oe=0,tt+=Math.abs(mt)),Bt.translate(-(Et.scale*Pe),-(Pt.scale*oe)),et.transform(Et.scale,0,0,Pt.scale,0,0),Bt.save(),this.clipBbox(et,Pe,oe,Ye,tt),et.baseTransform=(0,b.getCurrentTransform)(et.ctx),et.executeOperatorList(Q),et.endDrawing(),{canvas:Mt.canvas,scaleX:Et.scale,scaleY:Pt.scale,offsetX:Pe,offsetY:oe}}getSizeAndScale(Y,Q,X){Y=Math.abs(Y);const H=Math.max(W.MAX_PATTERN_SIZE,Q);let G=Math.ceil(Y*X);return G>=H?G=H:X=G/Y,{scale:X,size:G}}clipBbox(Y,Q,X,H,G){const ie=H-Q,Ee=G-X;Y.ctx.rect(Q,X,ie,Ee),Y.current.updateRectMinMax((0,b.getCurrentTransform)(Y.ctx),[Q,X,H,G]),Y.clip(),Y.endPath()}setFillAndStrokeStyleToContext(Y,Q,X){const H=Y.ctx,G=Y.current;switch(Q){case z.COLORED:const ie=this.ctx;H.fillStyle=ie.fillStyle,H.strokeStyle=ie.strokeStyle,G.fillColor=ie.fillStyle,G.strokeColor=ie.strokeStyle;break;case z.UNCOLORED:const Ee=v.Util.makeHexColor(X[0],X[1],X[2]);H.fillStyle=Ee,H.strokeStyle=Ee,G.fillColor=Ee,G.strokeColor=Ee;break;default:throw new v.FormatError(`Unsupported paint type: ${Q}`)}}getPattern(Y,Q,X,H){let G=X;H!==E.SHADING&&(G=v.Util.transform(G,Q.baseTransform),this.matrix&&(G=v.Util.transform(G,this.matrix)));const ie=this.createPatternCanvas(Q);let Ee=new DOMMatrix(G);Ee=Ee.translate(ie.offsetX,ie.offsetY),Ee=Ee.scale(1/ie.scaleX,1/ie.scaleY);const be=Y.createPattern(ie.canvas,"repeat");return be.setTransform(Ee),be}}d.TilingPattern=W},(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.isNodeJS=void 0;const g=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");d.isNodeJS=g},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.applyMaskImageData=b;var v=g(1);function b({src:_,srcPos:E=0,dest:R,destPos:U=0,width:P,height:B,inverseDecode:ee=!1}){const re=v.FeatureTest.isLittleEndian?4278190080:255,[ne,j]=ee?[0,re]:[re,0],z=P>>3,W=P&7,O=_.length;R=new Uint32Array(R.buffer);for(let Y=0;Y<B;Y++){for(const X=E+z;E<X;E++){const H=E<O?_[E]:255;R[U++]=H&128?j:ne,R[U++]=H&64?j:ne,R[U++]=H&32?j:ne,R[U++]=H&16?j:ne,R[U++]=H&8?j:ne,R[U++]=H&4?j:ne,R[U++]=H&2?j:ne,R[U++]=H&1?j:ne}if(W===0)continue;const Q=E<O?_[E++]:255;for(let X=0;X<W;X++)R[U++]=Q&1<<7-X?j:ne}return{srcPos:E,destPos:U}}},(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GlobalWorkerOptions=void 0;const g=Object.create(null);d.GlobalWorkerOptions=g,g.workerPort=g.workerPort===void 0?null:g.workerPort,g.workerSrc=g.workerSrc===void 0?"":g.workerSrc},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MessageHandler=void 0;var v=g(1);const b={UNKNOWN:0,DATA:1,ERROR:2},_={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function E(U){switch(U instanceof Error||typeof U=="object"&&U!==null||(0,v.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),U.name){case"AbortException":return new v.AbortException(U.message);case"MissingPDFException":return new v.MissingPDFException(U.message);case"PasswordException":return new v.PasswordException(U.message,U.code);case"UnexpectedResponseException":return new v.UnexpectedResponseException(U.message,U.status);case"UnknownErrorException":return new v.UnknownErrorException(U.message,U.details);default:return new v.UnknownErrorException(U.message,U.toString())}}class R{constructor(P,B,ee){this.sourceName=P,this.targetName=B,this.comObj=ee,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=re=>{const ne=re.data;if(ne.targetName!==this.sourceName)return;if(ne.stream){this._processStreamMessage(ne);return}if(ne.callback){const z=ne.callbackId,W=this.callbackCapabilities[z];if(!W)throw new Error(`Cannot resolve callback ${z}`);if(delete this.callbackCapabilities[z],ne.callback===b.DATA)W.resolve(ne.data);else if(ne.callback===b.ERROR)W.reject(E(ne.reason));else throw new Error("Unexpected callback case");return}const j=this.actionHandler[ne.action];if(!j)throw new Error(`Unknown action from worker: ${ne.action}`);if(ne.callbackId){const z=this.sourceName,W=ne.sourceName;new Promise(function(O){O(j(ne.data))}).then(function(O){ee.postMessage({sourceName:z,targetName:W,callback:b.DATA,callbackId:ne.callbackId,data:O})},function(O){ee.postMessage({sourceName:z,targetName:W,callback:b.ERROR,callbackId:ne.callbackId,reason:E(O)})});return}if(ne.streamId){this._createStreamSink(ne);return}j(ne.data)},ee.addEventListener("message",this._onComObjOnMessage)}on(P,B){const ee=this.actionHandler;if(ee[P])throw new Error(`There is already an actionName called "${P}"`);ee[P]=B}send(P,B,ee){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:P,data:B},ee)}sendWithPromise(P,B,ee){const re=this.callbackId++,ne=(0,v.createPromiseCapability)();this.callbackCapabilities[re]=ne;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:P,callbackId:re,data:B},ee)}catch(j){ne.reject(j)}return ne.promise}sendWithStream(P,B,ee,re){const ne=this.streamId++,j=this.sourceName,z=this.targetName,W=this.comObj;return new ReadableStream({start:O=>{const Y=(0,v.createPromiseCapability)();return this.streamControllers[ne]={controller:O,startCall:Y,pullCall:null,cancelCall:null,isClosed:!1},W.postMessage({sourceName:j,targetName:z,action:P,streamId:ne,data:B,desiredSize:O.desiredSize},re),Y.promise},pull:O=>{const Y=(0,v.createPromiseCapability)();return this.streamControllers[ne].pullCall=Y,W.postMessage({sourceName:j,targetName:z,stream:_.PULL,streamId:ne,desiredSize:O.desiredSize}),Y.promise},cancel:O=>{(0,v.assert)(O instanceof Error,"cancel must have a valid reason");const Y=(0,v.createPromiseCapability)();return this.streamControllers[ne].cancelCall=Y,this.streamControllers[ne].isClosed=!0,W.postMessage({sourceName:j,targetName:z,stream:_.CANCEL,streamId:ne,reason:E(O)}),Y.promise}},ee)}_createStreamSink(P){const B=P.streamId,ee=this.sourceName,re=P.sourceName,ne=this.comObj,j=this,z=this.actionHandler[P.action],W={enqueue(O,Y=1,Q){if(this.isCancelled)return;const X=this.desiredSize;this.desiredSize-=Y,X>0&&this.desiredSize<=0&&(this.sinkCapability=(0,v.createPromiseCapability)(),this.ready=this.sinkCapability.promise),ne.postMessage({sourceName:ee,targetName:re,stream:_.ENQUEUE,streamId:B,chunk:O},Q)},close(){this.isCancelled||(this.isCancelled=!0,ne.postMessage({sourceName:ee,targetName:re,stream:_.CLOSE,streamId:B}),delete j.streamSinks[B])},error(O){(0,v.assert)(O instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,ne.postMessage({sourceName:ee,targetName:re,stream:_.ERROR,streamId:B,reason:E(O)}))},sinkCapability:(0,v.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:P.desiredSize,ready:null};W.sinkCapability.resolve(),W.ready=W.sinkCapability.promise,this.streamSinks[B]=W,new Promise(function(O){O(z(P.data,W))}).then(function(){ne.postMessage({sourceName:ee,targetName:re,stream:_.START_COMPLETE,streamId:B,success:!0})},function(O){ne.postMessage({sourceName:ee,targetName:re,stream:_.START_COMPLETE,streamId:B,reason:E(O)})})}_processStreamMessage(P){const B=P.streamId,ee=this.sourceName,re=P.sourceName,ne=this.comObj,j=this.streamControllers[B],z=this.streamSinks[B];switch(P.stream){case _.START_COMPLETE:P.success?j.startCall.resolve():j.startCall.reject(E(P.reason));break;case _.PULL_COMPLETE:P.success?j.pullCall.resolve():j.pullCall.reject(E(P.reason));break;case _.PULL:if(!z){ne.postMessage({sourceName:ee,targetName:re,stream:_.PULL_COMPLETE,streamId:B,success:!0});break}z.desiredSize<=0&&P.desiredSize>0&&z.sinkCapability.resolve(),z.desiredSize=P.desiredSize,new Promise(function(W){W(z.onPull&&z.onPull())}).then(function(){ne.postMessage({sourceName:ee,targetName:re,stream:_.PULL_COMPLETE,streamId:B,success:!0})},function(W){ne.postMessage({sourceName:ee,targetName:re,stream:_.PULL_COMPLETE,streamId:B,reason:E(W)})});break;case _.ENQUEUE:if((0,v.assert)(j,"enqueue should have stream controller"),j.isClosed)break;j.controller.enqueue(P.chunk);break;case _.CLOSE:if((0,v.assert)(j,"close should have stream controller"),j.isClosed)break;j.isClosed=!0,j.controller.close(),this._deleteStreamController(j,B);break;case _.ERROR:(0,v.assert)(j,"error should have stream controller"),j.controller.error(E(P.reason)),this._deleteStreamController(j,B);break;case _.CANCEL_COMPLETE:P.success?j.cancelCall.resolve():j.cancelCall.reject(E(P.reason)),this._deleteStreamController(j,B);break;case _.CANCEL:if(!z)break;new Promise(function(W){W(z.onCancel&&z.onCancel(E(P.reason)))}).then(function(){ne.postMessage({sourceName:ee,targetName:re,stream:_.CANCEL_COMPLETE,streamId:B,success:!0})},function(W){ne.postMessage({sourceName:ee,targetName:re,stream:_.CANCEL_COMPLETE,streamId:B,reason:E(W)})}),z.sinkCapability.reject(E(P.reason)),z.isCancelled=!0,delete this.streamSinks[B];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(P,B){await Promise.allSettled([P.startCall&&P.startCall.promise,P.pullCall&&P.pullCall.promise,P.cancelCall&&P.cancelCall.promise]),delete this.streamControllers[B]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}d.MessageHandler=R},(c,d,g)=>{var _,E;Object.defineProperty(d,"__esModule",{value:!0}),d.Metadata=void 0;var v=g(1);class b{constructor({parsedData:U,rawData:P}){qt(this,_,void 0);qt(this,E,void 0);nr(this,_,U),nr(this,E,P)}getRaw(){return nt(this,E)}get(U){var P;return(P=nt(this,_).get(U))!=null?P:null}getAll(){return(0,v.objectFromMap)(nt(this,_))}has(U){return nt(this,_).has(U)}}_=new WeakMap,E=new WeakMap,d.Metadata=b},(c,d,g)=>{var U,P,B,ee,re,ne,pa;Object.defineProperty(d,"__esModule",{value:!0}),d.OptionalContentConfig=void 0;var v=g(1),b=g(8);const _=Symbol("INTERNAL");class E{constructor(W,O){qt(this,U,!0);this.name=W,this.intent=O}get visible(){return nt(this,U)}_setVisible(W,O){W!==_&&(0,v.unreachable)("Internal method `_setVisible` called."),nr(this,U,O)}}U=new WeakMap;class R{constructor(W){qt(this,ne);qt(this,P,null);qt(this,B,new Map);qt(this,ee,null);qt(this,re,null);if(this.name=null,this.creator=null,W!==null){this.name=W.name,this.creator=W.creator,nr(this,re,W.order);for(const O of W.groups)nt(this,B).set(O.id,new E(O.name,O.intent));if(W.baseState==="OFF")for(const O of nt(this,B).values())O._setVisible(_,!1);for(const O of W.on)nt(this,B).get(O)._setVisible(_,!0);for(const O of W.off)nt(this,B).get(O)._setVisible(_,!1);nr(this,ee,this.getHash())}}isVisible(W){if(nt(this,B).size===0)return!0;if(!W)return(0,v.warn)("Optional content group not defined."),!0;if(W.type==="OCG")return nt(this,B).has(W.id)?nt(this,B).get(W.id).visible:((0,v.warn)(`Optional content group not found: ${W.id}`),!0);if(W.type==="OCMD"){if(W.expression)return Yt(this,ne,pa).call(this,W.expression);if(!W.policy||W.policy==="AnyOn"){for(const O of W.ids){if(!nt(this,B).has(O))return(0,v.warn)(`Optional content group not found: ${O}`),!0;if(nt(this,B).get(O).visible)return!0}return!1}else if(W.policy==="AllOn"){for(const O of W.ids){if(!nt(this,B).has(O))return(0,v.warn)(`Optional content group not found: ${O}`),!0;if(!nt(this,B).get(O).visible)return!1}return!0}else if(W.policy==="AnyOff"){for(const O of W.ids){if(!nt(this,B).has(O))return(0,v.warn)(`Optional content group not found: ${O}`),!0;if(!nt(this,B).get(O).visible)return!0}return!1}else if(W.policy==="AllOff"){for(const O of W.ids){if(!nt(this,B).has(O))return(0,v.warn)(`Optional content group not found: ${O}`),!0;if(nt(this,B).get(O).visible)return!1}return!0}return(0,v.warn)(`Unknown optional content policy ${W.policy}.`),!0}return(0,v.warn)(`Unknown group type ${W.type}.`),!0}setVisibility(W,O=!0){if(!nt(this,B).has(W)){(0,v.warn)(`Optional content group not found: ${W}`);return}nt(this,B).get(W)._setVisible(_,!!O),nr(this,P,null)}get hasInitialVisibility(){return this.getHash()===nt(this,ee)}getOrder(){return nt(this,B).size?nt(this,re)?nt(this,re).slice():[...nt(this,B).keys()]:null}getGroups(){return nt(this,B).size>0?(0,v.objectFromMap)(nt(this,B)):null}getGroup(W){return nt(this,B).get(W)||null}getHash(){if(nt(this,P)!==null)return nt(this,P);const W=new b.MurmurHash3_64;for(const[O,Y]of nt(this,B))W.update(`${O}:${Y.visible}`);return nr(this,P,W.hexdigest())}}P=new WeakMap,B=new WeakMap,ee=new WeakMap,re=new WeakMap,ne=new WeakSet,pa=function(W){const O=W.length;if(O<2)return!0;const Y=W[0];for(let Q=1;Q<O;Q++){const X=W[Q];let H;if(Array.isArray(X))H=Yt(this,ne,pa).call(this,X);else if(nt(this,B).has(X))H=nt(this,B).get(X).visible;else return(0,v.warn)(`Optional content group not found: ${X}`),!0;switch(Y){case"And":if(!H)return!1;break;case"Or":if(H)return!0;break;case"Not":return!H;default:return!0}}return Y==="And"},d.OptionalContentConfig=R},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFDataTransportStream=void 0;var v=g(1),b=g(6);class _{constructor(P,B){(0,v.assert)(B,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=P.progressiveDone||!1,this._contentDispositionFilename=P.contentDispositionFilename||null;const ee=P.initialData;if((ee==null?void 0:ee.length)>0){const re=new Uint8Array(ee).buffer;this._queuedChunks.push(re)}this._pdfDataRangeTransport=B,this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._contentLength=P.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((re,ne)=>{this._onReceiveData({begin:re,chunk:ne})}),this._pdfDataRangeTransport.addProgressListener((re,ne)=>{this._onProgress({loaded:re,total:ne})}),this._pdfDataRangeTransport.addProgressiveReadListener(re=>{this._onReceiveData({chunk:re})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(P){const B=new Uint8Array(P.chunk).buffer;if(P.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(B):this._queuedChunks.push(B);else{const ee=this._rangeReaders.some(function(re){return re._begin!==P.begin?!1:(re._enqueue(B),!0)});(0,v.assert)(ee,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var P,B;return(B=(P=this._fullRequestReader)==null?void 0:P._loaded)!=null?B:0}_onProgress(P){var B,ee,re,ne;P.total===void 0?(ee=(B=this._rangeReaders[0])==null?void 0:B.onProgress)==null||ee.call(B,{loaded:P.loaded}):(ne=(re=this._fullRequestReader)==null?void 0:re.onProgress)==null||ne.call(re,{loaded:P.loaded,total:P.total})}_onProgressiveDone(){var P;(P=this._fullRequestReader)==null||P.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(P){const B=this._rangeReaders.indexOf(P);B>=0&&this._rangeReaders.splice(B,1)}getFullReader(){(0,v.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const P=this._queuedChunks;return this._queuedChunks=null,new E(this,P,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(P,B){if(B<=this._progressiveDataLength)return null;const ee=new R(this,P,B);return this._pdfDataRangeTransport.requestDataRange(P,B),this._rangeReaders.push(ee),ee}cancelAllRequests(P){var B;(B=this._fullRequestReader)==null||B.cancel(P);for(const ee of this._rangeReaders.slice(0))ee.cancel(P);this._pdfDataRangeTransport.abort()}}d.PDFDataTransportStream=_;class E{constructor(P,B,ee=!1,re=null){this._stream=P,this._done=ee||!1,this._filename=(0,b.isPdfFile)(re)?re:null,this._queuedChunks=B||[],this._loaded=0;for(const ne of this._queuedChunks)this._loaded+=ne.byteLength;this._requests=[],this._headersReady=Promise.resolve(),P._fullRequestReader=this,this.onProgress=null}_enqueue(P){this._done||(this._requests.length>0?this._requests.shift().resolve({value:P,done:!1}):this._queuedChunks.push(P),this._loaded+=P.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=(0,v.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class R{constructor(P,B,ee){this._stream=P,this._begin=B,this._end=ee,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(P){if(!this._done){if(this._requests.length===0)this._queuedChunk=P;else{this._requests.shift().resolve({value:P,done:!1});for(const ee of this._requests)ee.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const B=this._queuedChunk;return this._queuedChunk=null,{value:B,done:!1}}if(this._done)return{value:void 0,done:!0};const P=(0,v.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.XfaText=void 0;class g{static textContent(b){const _=[],E={items:_,styles:Object.create(null)};function R(U){var ee;if(!U)return;let P=null;const B=U.name;if(B==="#text")P=U.value;else if(g.shouldBuildText(B))(ee=U==null?void 0:U.attributes)!=null&&ee.textContent?P=U.attributes.textContent:U.value&&(P=U.value);else return;if(P!==null&&_.push({str:P}),!!U.children)for(const re of U.children)R(re)}return R(b),E}static shouldBuildText(b){return!(b==="textarea"||b==="input"||b==="option"||b==="select")}}d.XfaText=g},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.NodeStandardFontDataFactory=d.NodeCanvasFactory=d.NodeCMapReaderFactory=void 0;var v=g(7);const b=function(U){return new Promise((P,B)=>{require$$5.readFile(U,(re,ne)=>{if(re||!ne){B(new Error(re));return}P(new Uint8Array(ne))})})};class _ extends v.BaseCanvasFactory{_createCanvas(P,B){return require$$5.createCanvas(P,B)}}d.NodeCanvasFactory=_;class E extends v.BaseCMapReaderFactory{_fetchData(P,B){return b(P).then(ee=>({cMapData:ee,compressionType:B}))}}d.NodeCMapReaderFactory=E;class R extends v.BaseStandardFontDataFactory{_fetchData(P){return b(P)}}d.NodeStandardFontDataFactory=R},(c,d,g)=>{var U,P,B,ee,re,ne,j,z,W,ha,Y,Va,X,ma,G,Ha;Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationEditorLayer=void 0;var v=g(5),b=g(1),_=g(22),E=g(23);const Ee=class{constructor(Ce){qt(this,W);qt(this,Y);qt(this,X);qt(this,G);qt(this,U,void 0);qt(this,P,!1);qt(this,B,this.pointerup.bind(this));qt(this,ee,this.pointerdown.bind(this));qt(this,re,new Map);qt(this,ne,!1);qt(this,j,!1);qt(this,z,void 0);Ee._initialized||(Ee._initialized=!0,_.FreeTextEditor.initialize(Ce.l10n),E.InkEditor.initialize(Ce.l10n)),Ce.uiManager.registerEditorTypes([_.FreeTextEditor,E.InkEditor]),nr(this,z,Ce.uiManager),this.annotationStorage=Ce.annotationStorage,this.pageIndex=Ce.pageIndex,this.div=Ce.div,nr(this,U,Ce.accessibilityManager),nt(this,z).addLayer(this)}updateToolbar(Ce){nt(this,z).updateToolbar(Ce)}updateMode(Ce=nt(this,z).getMode()){Yt(this,G,Ha).call(this),Ce===b.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),nt(this,z).unselectAll(),this.div.classList.toggle("freeTextEditing",Ce===b.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Ce===b.AnnotationEditorType.INK)}addInkEditorIfNeeded(Ce){if(!Ce&&nt(this,z).getMode()!==b.AnnotationEditorType.INK)return;if(!Ce){for(const mt of nt(this,re).values())if(mt.isEmpty()){mt.setInBackground();return}}Yt(this,X,ma).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(Ce){nt(this,z).setEditingState(Ce)}addCommands(Ce){nt(this,z).addCommands(Ce)}enable(){this.div.style.pointerEvents="auto";for(const Ce of nt(this,re).values())Ce.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const Ce of nt(this,re).values())Ce.disableEditing()}setActiveEditor(Ce){nt(this,z).getActive()!==Ce&&nt(this,z).setActiveEditor(Ce)}enableClick(){this.div.addEventListener("pointerdown",nt(this,ee)),this.div.addEventListener("pointerup",nt(this,B))}disableClick(){this.div.removeEventListener("pointerdown",nt(this,ee)),this.div.removeEventListener("pointerup",nt(this,B))}attach(Ce){nt(this,re).set(Ce.id,Ce)}detach(Ce){var Oe;nt(this,re).delete(Ce.id),(Oe=nt(this,U))==null||Oe.removePointerInTextLayer(Ce.contentDiv)}remove(Ce){nt(this,z).removeEditor(Ce),this.detach(Ce),this.annotationStorage.remove(Ce.id),Ce.div.style.display="none",setTimeout(()=>{Ce.div.style.display="",Ce.div.remove(),Ce.isAttachedToDOM=!1,document.activeElement===document.body&&nt(this,z).focusMainContainer()},0),nt(this,j)||this.addInkEditorIfNeeded(!1)}add(Ce){if(Yt(this,W,ha).call(this,Ce),nt(this,z).addEditor(Ce),this.attach(Ce),!Ce.isAttachedToDOM){const Oe=Ce.render();this.div.append(Oe),Ce.isAttachedToDOM=!0}this.moveEditorInDOM(Ce),Ce.onceAdded(),this.addToAnnotationStorage(Ce)}moveEditorInDOM(Ce){var Oe;(Oe=nt(this,U))==null||Oe.moveElementInDOM(this.div,Ce.div,Ce.contentDiv,!0)}addToAnnotationStorage(Ce){!Ce.isEmpty()&&!this.annotationStorage.has(Ce.id)&&this.annotationStorage.setValue(Ce.id,Ce)}addOrRebuild(Ce){Ce.needsToBeRebuilt()?Ce.rebuild():this.add(Ce)}addANewEditor(Ce){const Oe=()=>{this.addOrRebuild(Ce)},mt=()=>{Ce.remove()};this.addCommands({cmd:Oe,undo:mt,mustExec:!0})}addUndoableEditor(Ce){const Oe=()=>{this.addOrRebuild(Ce)},mt=()=>{Ce.remove()};this.addCommands({cmd:Oe,undo:mt,mustExec:!1})}getNextId(){return nt(this,z).getId()}deserialize(Ce){switch(Ce.annotationType){case b.AnnotationEditorType.FREETEXT:return _.FreeTextEditor.deserialize(Ce,this);case b.AnnotationEditorType.INK:return E.InkEditor.deserialize(Ce,this)}return null}setSelected(Ce){nt(this,z).setSelected(Ce)}toggleSelected(Ce){nt(this,z).toggleSelected(Ce)}isSelected(Ce){return nt(this,z).isSelected(Ce)}unselect(Ce){nt(this,z).unselect(Ce)}pointerup(Ce){const Oe=v.KeyboardManager.platform.isMac;if(!(Ce.button!==0||Ce.ctrlKey&&Oe)&&Ce.target===this.div&&!!nt(this,ne)){if(nr(this,ne,!1),!nt(this,P)){nr(this,P,!0);return}Yt(this,X,ma).call(this,Ce)}}pointerdown(Ce){const Oe=v.KeyboardManager.platform.isMac;if(Ce.button!==0||Ce.ctrlKey&&Oe||Ce.target!==this.div)return;nr(this,ne,!0);const mt=nt(this,z).getActive();nr(this,P,!mt||mt.isEmpty())}drop(Ce){const Oe=Ce.dataTransfer.getData("text/plain"),mt=nt(this,z).getEditor(Oe);if(!mt)return;Ce.preventDefault(),Ce.dataTransfer.dropEffect="move",Yt(this,W,ha).call(this,mt);const Tt=this.div.getBoundingClientRect(),St=Ce.clientX-Tt.x,ft=Ce.clientY-Tt.y;mt.translate(St-mt.startX,ft-mt.startY),this.moveEditorInDOM(mt),mt.div.focus()}dragover(Ce){Ce.preventDefault()}destroy(){var Ce,Oe;((Ce=nt(this,z).getActive())==null?void 0:Ce.parent)===this&&nt(this,z).setActiveEditor(null);for(const mt of nt(this,re).values())(Oe=nt(this,U))==null||Oe.removePointerInTextLayer(mt.contentDiv),mt.isAttachedToDOM=!1,mt.div.remove(),mt.parent=null;this.div=null,nt(this,re).clear(),nt(this,z).removeLayer(this)}render(Ce){this.viewport=Ce.viewport,(0,v.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const Oe of nt(this,z).getEditors(this.pageIndex))this.add(Oe);this.updateMode()}update(Ce){nt(this,z).commitOrRemove(),this.viewport=Ce.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[Ce,Oe,mt,Tt]=this.viewport.viewBox,St=mt-Ce,ft=Tt-Oe;return[St,ft]}get viewportBaseDimensions(){const{width:Ce,height:Oe,rotation:mt}=this.viewport;return mt%180===0?[Ce,Oe]:[Oe,Ce]}setDimensions(){const{width:Ce,height:Oe,rotation:mt}=this.viewport,Tt=mt%180!==0,St=Math.floor(Ce)+"px",ft=Math.floor(Oe)+"px";this.div.style.width=Tt?ft:St,this.div.style.height=Tt?St:ft,this.div.setAttribute("data-main-rotation",mt)}};let R=Ee;U=new WeakMap,P=new WeakMap,B=new WeakMap,ee=new WeakMap,re=new WeakMap,ne=new WeakMap,j=new WeakMap,z=new WeakMap,W=new WeakSet,ha=function(Ce){var Oe;Ce.parent!==this&&(this.attach(Ce),Ce.pageIndex=this.pageIndex,(Oe=Ce.parent)==null||Oe.detach(Ce),Ce.parent=this,Ce.div&&Ce.isAttachedToDOM&&(Ce.div.remove(),this.div.append(Ce.div)))},Y=new WeakSet,Va=function(Ce){switch(nt(this,z).getMode()){case b.AnnotationEditorType.FREETEXT:return new _.FreeTextEditor(Ce);case b.AnnotationEditorType.INK:return new E.InkEditor(Ce)}return null},X=new WeakSet,ma=function(Ce){const Oe=this.getNextId(),mt=Yt(this,Y,Va).call(this,{parent:this,id:Oe,x:Ce.offsetX,y:Ce.offsetY});return mt&&this.add(mt),mt},G=new WeakSet,Ha=function(){nr(this,j,!0);for(const Ce of nt(this,re).values())Ce.isEmpty()&&Ce.remove();nr(this,j,!1)},Dr(R,"_initialized",!1),d.AnnotationEditorLayer=R},(c,d,g)=>{var R,U,P,B,ee,re,ne,j,z,W,ja,Y,za,X,Wa,G,ga;Object.defineProperty(d,"__esModule",{value:!0}),d.FreeTextEditor=void 0;var v=g(1),b=g(5),_=g(4);const Ee=class extends _.AnnotationEditor{constructor(Oe){super({...Oe,name:"freeTextEditor"});qt(this,W);qt(this,Y);qt(this,X);qt(this,G);qt(this,R,this.editorDivBlur.bind(this));qt(this,U,this.editorDivFocus.bind(this));qt(this,P,this.editorDivInput.bind(this));qt(this,B,this.editorDivKeydown.bind(this));qt(this,ee,void 0);qt(this,re,"");qt(this,ne,`${this.id}-editor`);qt(this,j,!1);qt(this,z,void 0);nr(this,ee,Oe.color||Ee._defaultColor||_.AnnotationEditor._defaultLineColor),nr(this,z,Oe.fontSize||Ee._defaultFontSize)}static initialize(Oe){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(Tt=>[Tt,Oe.get(Tt)]));const mt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(mt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Oe,mt){switch(Oe){case v.AnnotationEditorParamsType.FREETEXT_SIZE:Ee._defaultFontSize=mt;break;case v.AnnotationEditorParamsType.FREETEXT_COLOR:Ee._defaultColor=mt;break}}updateParams(Oe,mt){switch(Oe){case v.AnnotationEditorParamsType.FREETEXT_SIZE:Yt(this,W,ja).call(this,mt);break;case v.AnnotationEditorParamsType.FREETEXT_COLOR:Yt(this,Y,za).call(this,mt);break}}static get defaultPropertiesToUpdate(){return[[v.AnnotationEditorParamsType.FREETEXT_SIZE,Ee._defaultFontSize],[v.AnnotationEditorParamsType.FREETEXT_COLOR,Ee._defaultColor||_.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[v.AnnotationEditorParamsType.FREETEXT_SIZE,nt(this,z)],[v.AnnotationEditorParamsType.FREETEXT_COLOR,nt(this,ee)]]}getInitialTranslation(){return[-Ee._internalPadding*this.parent.scaleFactor,-(Ee._internalPadding+nt(this,z))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(v.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",nt(this,B)),this.editorDiv.addEventListener("focus",nt(this,U)),this.editorDiv.addEventListener("blur",nt(this,R)),this.editorDiv.addEventListener("input",nt(this,P)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",nt(this,ne)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",nt(this,B)),this.editorDiv.removeEventListener("focus",nt(this,U)),this.editorDiv.removeEventListener("blur",nt(this,R)),this.editorDiv.removeEventListener("input",nt(this,P)),this.div.focus(),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Oe){super.focusin(Oe),Oe.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){super.commit(),nt(this,j)||(nr(this,j,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),nr(this,re,Yt(this,X,Wa).call(this).trimEnd()),Yt(this,G,ga).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(Oe){this.enableEditMode(),this.editorDiv.focus()}keydown(Oe){Oe.target===this.div&&Oe.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(Oe){Ee._keyboardManager.exec(this,Oe)}editorDivFocus(Oe){this.isEditing=!0}editorDivBlur(Oe){this.isEditing=!1}editorDivInput(Oe){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Oe,mt;this.width&&(Oe=this.x,mt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",nt(this,ne)),this.enableEditing(),Ee._l10nPromise.get("editor_free_text2_aria_label").then(St=>{var ft;return(ft=this.editorDiv)==null?void 0:ft.setAttribute("aria-label",St)}),Ee._l10nPromise.get("free_text2_default_content").then(St=>{var ft;return(ft=this.editorDiv)==null?void 0:ft.setAttribute("default-content",St)}),this.editorDiv.contentEditable=!0;const{style:Tt}=this.editorDiv;if(Tt.fontSize=`calc(${nt(this,z)}px * var(--scale-factor))`,Tt.color=nt(this,ee),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,b.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[St,ft]=this.parent.viewportBaseDimensions;this.setAt(Oe*St,mt*ft,this.width*St,this.height*ft);for(const ut of nt(this,re).split(`
`)){const wt=document.createElement("div");wt.append(ut?document.createTextNode(ut):document.createElement("br")),this.editorDiv.append(wt)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Oe,mt){const Tt=super.deserialize(Oe,mt);return nr(Tt,z,Oe.fontSize),nr(Tt,ee,v.Util.makeHexColor(...Oe.color)),nr(Tt,re,Oe.value),Tt}serialize(){if(this.isEmpty())return null;const Oe=Ee._internalPadding*this.parent.scaleFactor,mt=this.getRect(Oe,Oe),Tt=_.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:v.AnnotationEditorType.FREETEXT,color:Tt,fontSize:nt(this,z),value:nt(this,re),pageIndex:this.parent.pageIndex,rect:mt,rotation:this.rotation}}};let E=Ee;R=new WeakMap,U=new WeakMap,P=new WeakMap,B=new WeakMap,ee=new WeakMap,re=new WeakMap,ne=new WeakMap,j=new WeakMap,z=new WeakMap,W=new WeakSet,ja=function(Oe){const mt=St=>{this.editorDiv.style.fontSize=`calc(${St}px * var(--scale-factor))`,this.translate(0,-(St-nt(this,z))*this.parent.scaleFactor),nr(this,z,St),Yt(this,G,ga).call(this)},Tt=nt(this,z);this.parent.addCommands({cmd:()=>{mt(Oe)},undo:()=>{mt(Tt)},mustExec:!0,type:v.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Y=new WeakSet,za=function(Oe){const mt=nt(this,ee);this.parent.addCommands({cmd:()=>{nr(this,ee,Oe),this.editorDiv.style.color=Oe},undo:()=>{nr(this,ee,mt),this.editorDiv.style.color=mt},mustExec:!0,type:v.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},X=new WeakSet,Wa=function(){const Oe=this.editorDiv.getElementsByTagName("div");if(Oe.length===0)return this.editorDiv.innerText;const mt=[];for(const Tt of Oe)mt.push(Tt.innerText.replace(/\r\n?|\n/,""));return mt.join(`
`)},G=new WeakSet,ga=function(){const[Oe,mt]=this.parent.viewportBaseDimensions,Tt=this.div.getBoundingClientRect();this.width=Tt.width/Oe,this.height=Tt.height/mt},Dr(E,"_freeTextDefaultContent",""),Dr(E,"_l10nPromise"),Dr(E,"_internalPadding",0),Dr(E,"_defaultColor",null),Dr(E,"_defaultFontSize",10),Dr(E,"_keyboardManager",new b.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Ee.prototype.commitOrRemove]])),Dr(E,"_type","freetext"),d.FreeTextEditor=E},(c,d,g)=>{var B,ee,re,ne,j,z,W,O,Y,Q,X,H,G,ie,Ee,Za,Ce,Ya,mt,Ga,St,Xa,ut,ya,Et,Ka,Mt,Qa,et,Ja,oe,Cn,tt,va,Qe,Kn,_t,Qn,dt,Bn,Lt,ba,V,Jn,Z,_a,xe,ei,vt,ti,rt,ri,ot,wa,ct,ea,zt,Un,mr,Ea;Object.defineProperty(d,"__esModule",{value:!0}),d.InkEditor=void 0,Object.defineProperty(d,"fitCurve",{enumerable:!0,get:function(){return _.fitCurve}});var v=g(1),b=g(4),_=g(24),E=g(5);const R=16,U=100,A=class extends b.AnnotationEditor{constructor(ae){super({...ae,name:"inkEditor"});qt(this,Ee);qt(this,Ce);qt(this,mt);qt(this,St);qt(this,ut);qt(this,Et);qt(this,Mt);qt(this,et);qt(this,oe);qt(this,tt);qt(this,Qe);qt(this,_t);qt(this,dt);qt(this,Lt);qt(this,V);qt(this,xe);qt(this,vt);qt(this,rt);qt(this,ot);qt(this,ct);qt(this,zt);qt(this,mr);qt(this,B,0);qt(this,ee,0);qt(this,re,0);qt(this,ne,this.canvasPointermove.bind(this));qt(this,j,this.canvasPointerleave.bind(this));qt(this,z,this.canvasPointerup.bind(this));qt(this,W,this.canvasPointerdown.bind(this));qt(this,O,!1);qt(this,Y,!1);qt(this,Q,null);qt(this,X,null);qt(this,H,0);qt(this,G,0);qt(this,ie,null);this.color=ae.color||null,this.thickness=ae.thickness||null,this.opacity=ae.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(ae){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(Ae=>[Ae,ae.get(Ae)]))}static updateDefaultParams(ae,Ae){switch(ae){case v.AnnotationEditorParamsType.INK_THICKNESS:A._defaultThickness=Ae;break;case v.AnnotationEditorParamsType.INK_COLOR:A._defaultColor=Ae;break;case v.AnnotationEditorParamsType.INK_OPACITY:A._defaultOpacity=Ae/100;break}}updateParams(ae,Ae){switch(ae){case v.AnnotationEditorParamsType.INK_THICKNESS:Yt(this,Ee,Za).call(this,Ae);break;case v.AnnotationEditorParamsType.INK_COLOR:Yt(this,Ce,Ya).call(this,Ae);break;case v.AnnotationEditorParamsType.INK_OPACITY:Yt(this,mt,Ga).call(this,Ae);break}}static get defaultPropertiesToUpdate(){return[[v.AnnotationEditorParamsType.INK_THICKNESS,A._defaultThickness],[v.AnnotationEditorParamsType.INK_COLOR,A._defaultColor||b.AnnotationEditor._defaultLineColor],[v.AnnotationEditorParamsType.INK_OPACITY,Math.round(A._defaultOpacity*100)]]}get propertiesToUpdate(){var ae;return[[v.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||A._defaultThickness],[v.AnnotationEditorParamsType.INK_COLOR,this.color||A._defaultColor||b.AnnotationEditor._defaultLineColor],[v.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((ae=this.opacity)!=null?ae:A._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(Yt(this,Qe,Kn).call(this),Yt(this,_t,Qn).call(this)),this.isAttachedToDOM||(this.parent.add(this),Yt(this,dt,Bn).call(this)),Yt(this,zt,Un).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,nt(this,X).disconnect(),nr(this,X,null),super.remove())}enableEditMode(){nt(this,O)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",nt(this,W)),this.canvas.addEventListener("pointerup",nt(this,z)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",nt(this,W)),this.canvas.removeEventListener("pointerup",nt(this,z)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){nt(this,O)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),nr(this,O,!0),this.div.classList.add("disabled"),Yt(this,zt,Un).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(ae){super.focusin(ae),this.enableEditMode()}canvasPointerdown(ae){ae.button!==0||!this.isInEditMode()||nt(this,O)||(this.setInForeground(),ae.type!=="mouse"&&this.div.focus(),ae.stopPropagation(),this.canvas.addEventListener("pointerleave",nt(this,j)),this.canvas.addEventListener("pointermove",nt(this,ne)),Yt(this,Et,Ka).call(this,ae.offsetX,ae.offsetY))}canvasPointermove(ae){ae.stopPropagation(),Yt(this,Mt,Qa).call(this,ae.offsetX,ae.offsetY)}canvasPointerup(ae){ae.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(ae.stopPropagation(),Yt(this,tt,va).call(this,ae),this.setInBackground())}canvasPointerleave(ae){Yt(this,tt,va).call(this,ae),this.setInBackground()}render(){if(this.div)return this.div;let ae,Ae;this.width&&(ae=this.x,Ae=this.y),super.render(),A._l10nPromise.get("editor_ink2_aria_label").then(jt=>{var Jt;return(Jt=this.div)==null?void 0:Jt.setAttribute("aria-label",jt)});const[it,Ut,Gt,ar]=Yt(this,St,Xa).call(this);if(this.setAt(it,Ut,0,0),this.setDims(Gt,ar),Yt(this,Qe,Kn).call(this),this.width){const[jt,Jt]=this.parent.viewportBaseDimensions;this.setAt(ae*jt,Ae*Jt,this.width*jt,this.height*Jt),nr(this,Y,!0),Yt(this,dt,Bn).call(this),this.setDims(this.width*jt,this.height*Jt),Yt(this,oe,Cn).call(this),Yt(this,mr,Ea).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Yt(this,_t,Qn).call(this),this.div}setDimensions(ae,Ae){const it=Math.round(ae),Ut=Math.round(Ae);if(nt(this,H)===it&&nt(this,G)===Ut)return;nr(this,H,it),nr(this,G,Ut),this.canvas.style.visibility="hidden",nt(this,B)&&Math.abs(nt(this,B)-ae/Ae)>.01&&(Ae=Math.ceil(ae/nt(this,B)),this.setDims(ae,Ae));const[Gt,ar]=this.parent.viewportBaseDimensions;this.width=ae/Gt,this.height=Ae/ar,nt(this,O)&&Yt(this,Lt,ba).call(this,ae,Ae),Yt(this,dt,Bn).call(this),Yt(this,oe,Cn).call(this),this.canvas.style.visibility="visible"}static deserialize(ae,Ae){var Rr,Ar;const it=super.deserialize(ae,Ae);it.thickness=ae.thickness,it.color=v.Util.makeHexColor(...ae.color),it.opacity=ae.opacity;const[Ut,Gt]=Ae.pageDimensions,ar=it.width*Ut,jt=it.height*Gt,Jt=Ae.scaleFactor,dr=ae.thickness/2;nr(it,B,ar/jt),nr(it,O,!0),nr(it,H,Math.round(ar)),nr(it,G,Math.round(jt));for(const{bezier:hr}of ae.paths){const qr=[];it.paths.push(qr);let Wr=Jt*(hr[0]-dr),Lr=Jt*(jt-hr[1]-dr);for(let Ur=2,Xt=hr.length;Ur<Xt;Ur+=6){const _r=Jt*(hr[Ur]-dr),Ir=Jt*(jt-hr[Ur+1]-dr),Vr=Jt*(hr[Ur+2]-dr),xn=Jt*(jt-hr[Ur+3]-dr),Sn=Jt*(hr[Ur+4]-dr),Pn=Jt*(jt-hr[Ur+5]-dr);qr.push([[Wr,Lr],[_r,Ir],[Vr,xn],[Sn,Pn]]),Wr=Sn,Lr=Pn}const Zr=Yt(this,Z,_a).call(this,qr);it.bezierPath2D.push(Zr)}const cr=Yt(Rr=it,ot,wa).call(Rr);return nr(it,re,Math.max(R,cr[2]-cr[0])),nr(it,ee,Math.max(R,cr[3]-cr[1])),Yt(Ar=it,Lt,ba).call(Ar,ar,jt),it}serialize(){if(this.isEmpty())return null;const ae=this.getRect(0,0),Ae=this.rotation%180===0?ae[3]-ae[1]:ae[2]-ae[0],it=b.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:v.AnnotationEditorType.INK,color:it,thickness:this.thickness,opacity:this.opacity,paths:Yt(this,xe,ei).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,Ae),pageIndex:this.parent.pageIndex,rect:ae,rotation:this.rotation}}};let P=A;B=new WeakMap,ee=new WeakMap,re=new WeakMap,ne=new WeakMap,j=new WeakMap,z=new WeakMap,W=new WeakMap,O=new WeakMap,Y=new WeakMap,Q=new WeakMap,X=new WeakMap,H=new WeakMap,G=new WeakMap,ie=new WeakMap,Ee=new WeakSet,Za=function(ae){const Ae=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=ae,Yt(this,zt,Un).call(this)},undo:()=>{this.thickness=Ae,Yt(this,zt,Un).call(this)},mustExec:!0,type:v.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Ce=new WeakSet,Ya=function(ae){const Ae=this.color;this.parent.addCommands({cmd:()=>{this.color=ae,Yt(this,oe,Cn).call(this)},undo:()=>{this.color=Ae,Yt(this,oe,Cn).call(this)},mustExec:!0,type:v.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},mt=new WeakSet,Ga=function(ae){ae/=100;const Ae=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=ae,Yt(this,oe,Cn).call(this)},undo:()=>{this.opacity=Ae,Yt(this,oe,Cn).call(this)},mustExec:!0,type:v.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},St=new WeakSet,Xa=function(){const{width:ae,height:Ae,rotation:it}=this.parent.viewport;switch(it){case 90:return[0,ae,ae,Ae];case 180:return[ae,Ae,ae,Ae];case 270:return[Ae,0,ae,Ae];default:return[0,0,ae,Ae]}},ut=new WeakSet,ya=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,E.opacityToHex)(this.opacity)}`},Et=new WeakSet,Ka=function(ae,Ae){var it;this.isEditing=!0,nt(this,Y)||(nr(this,Y,!0),Yt(this,dt,Bn).call(this),this.thickness||(this.thickness=A._defaultThickness),this.color||(this.color=A._defaultColor||b.AnnotationEditor._defaultLineColor),(it=this.opacity)!=null||(this.opacity=A._defaultOpacity)),this.currentPath.push([ae,Ae]),nr(this,Q,null),Yt(this,ut,ya).call(this),this.ctx.beginPath(),this.ctx.moveTo(ae,Ae),nr(this,ie,()=>{!nt(this,ie)||(nt(this,Q)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):Yt(this,oe,Cn).call(this),this.ctx.lineTo(...nt(this,Q)),nr(this,Q,null),this.ctx.stroke()),window.requestAnimationFrame(nt(this,ie)))}),window.requestAnimationFrame(nt(this,ie))},Mt=new WeakSet,Qa=function(ae,Ae){const[it,Ut]=this.currentPath.at(-1);ae===it&&Ae===Ut||(this.currentPath.push([ae,Ae]),nr(this,Q,[ae,Ae]))},et=new WeakSet,Ja=function(ae,Ae){var dr;this.ctx.closePath(),nr(this,ie,null),ae=Math.min(Math.max(ae,0),this.canvas.width),Ae=Math.min(Math.max(Ae,0),this.canvas.height);const[it,Ut]=this.currentPath.at(-1);(ae!==it||Ae!==Ut)&&this.currentPath.push([ae,Ae]);let Gt;if(this.currentPath.length!==1)Gt=(0,_.fitCurve)(this.currentPath,30,null);else{const cr=[ae,Ae];Gt=[[cr,cr.slice(),cr.slice(),cr]]}const ar=Yt(dr=A,Z,_a).call(dr,Gt);this.currentPath.length=0;const jt=()=>{this.paths.push(Gt),this.bezierPath2D.push(ar),this.rebuild()},Jt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Yt(this,Qe,Kn).call(this),Yt(this,_t,Qn).call(this)),Yt(this,zt,Un).call(this))};this.parent.addCommands({cmd:jt,undo:Jt,mustExec:!0})},oe=new WeakSet,Cn=function(){if(this.isEmpty()){Yt(this,V,Jn).call(this);return}Yt(this,ut,ya).call(this);const{canvas:ae,ctx:Ae}=this;Ae.setTransform(1,0,0,1,0,0),Ae.clearRect(0,0,ae.width,ae.height),Yt(this,V,Jn).call(this);for(const it of this.bezierPath2D)Ae.stroke(it)},tt=new WeakSet,va=function(ae){Yt(this,et,Ja).call(this,ae.offsetX,ae.offsetY),this.canvas.removeEventListener("pointerleave",nt(this,j)),this.canvas.removeEventListener("pointermove",nt(this,ne)),this.parent.addToAnnotationStorage(this)},Qe=new WeakSet,Kn=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",A._l10nPromise.get("editor_ink_canvas_aria_label").then(ae=>{var Ae;return(Ae=this.canvas)==null?void 0:Ae.setAttribute("aria-label",ae)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},_t=new WeakSet,Qn=function(){let ae=null;nr(this,X,new ResizeObserver(Ae=>{const it=Ae[0].contentRect;it.width&&it.height&&(ae!==null&&clearTimeout(ae),ae=setTimeout(()=>{this.fixDims(),ae=null},U),this.setDimensions(it.width,it.height))})),nt(this,X).observe(this.div)},dt=new WeakSet,Bn=function(){if(!nt(this,Y))return;const[ae,Ae]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*ae),this.canvas.height=Math.ceil(this.height*Ae),Yt(this,V,Jn).call(this)},Lt=new WeakSet,ba=function(ae,Ae){const it=Yt(this,ct,ea).call(this),Ut=(ae-it)/nt(this,re),Gt=(Ae-it)/nt(this,ee);this.scaleFactor=Math.min(Ut,Gt)},V=new WeakSet,Jn=function(){const ae=Yt(this,ct,ea).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ae,this.translationY*this.scaleFactor+ae)},Z=new WeakSet,_a=function(ae){const Ae=new Path2D;for(let it=0,Ut=ae.length;it<Ut;it++){const[Gt,ar,jt,Jt]=ae[it];it===0&&Ae.moveTo(...Gt),Ae.bezierCurveTo(ar[0],ar[1],jt[0],jt[1],Jt[0],Jt[1])}return Ae},xe=new WeakSet,ei=function(ae,Ae,it,Ut){const ar=[],jt=this.thickness/2;let Jt,dr;for(const cr of this.paths){Jt=[],dr=[];for(let Rr=0,Ar=cr.length;Rr<Ar;Rr++){const[hr,qr,Wr,Lr]=cr[Rr],Zr=ae*(hr[0]+Ae)+jt,Ur=Ut-ae*(hr[1]+it)-jt,Xt=ae*(qr[0]+Ae)+jt,_r=Ut-ae*(qr[1]+it)-jt,Ir=ae*(Wr[0]+Ae)+jt,Vr=Ut-ae*(Wr[1]+it)-jt,xn=ae*(Lr[0]+Ae)+jt,Sn=Ut-ae*(Lr[1]+it)-jt;Rr===0&&(Jt.push(Zr,Ur),dr.push(Zr,Ur)),Jt.push(Xt,_r,Ir,Vr,xn,Sn),Yt(this,vt,ti).call(this,Zr,Ur,Xt,_r,Ir,Vr,xn,Sn,4,dr)}ar.push({bezier:Jt,points:dr})}return ar},vt=new WeakSet,ti=function(ae,Ae,it,Ut,Gt,ar,jt,Jt,dr,cr){if(Yt(this,rt,ri).call(this,ae,Ae,it,Ut,Gt,ar,jt,Jt)){cr.push(jt,Jt);return}for(let Rr=1;Rr<dr-1;Rr++){const Ar=Rr/dr,hr=1-Ar;let qr=Ar*ae+hr*it,Wr=Ar*Ae+hr*Ut,Lr=Ar*it+hr*Gt,Zr=Ar*Ut+hr*ar;const Ur=Ar*Gt+hr*jt,Xt=Ar*ar+hr*Jt;qr=Ar*qr+hr*Lr,Wr=Ar*Wr+hr*Zr,Lr=Ar*Lr+hr*Ur,Zr=Ar*Zr+hr*Xt,qr=Ar*qr+hr*Lr,Wr=Ar*Wr+hr*Zr,cr.push(qr,Wr)}cr.push(jt,Jt)},rt=new WeakSet,ri=function(ae,Ae,it,Ut,Gt,ar,jt,Jt){const cr=(3*it-2*ae-jt)**2,Rr=(3*Ut-2*Ae-Jt)**2,Ar=(3*Gt-ae-2*jt)**2,hr=(3*ar-Ae-2*Jt)**2;return Math.max(cr,Ar)+Math.max(Rr,hr)<=10},ot=new WeakSet,wa=function(){let ae=1/0,Ae=-1/0,it=1/0,Ut=-1/0;for(const Gt of this.paths)for(const[ar,jt,Jt,dr]of Gt){const cr=v.Util.bezierBoundingBox(...ar,...jt,...Jt,...dr);ae=Math.min(ae,cr[0]),it=Math.min(it,cr[1]),Ae=Math.max(Ae,cr[2]),Ut=Math.max(Ut,cr[3])}return[ae,it,Ae,Ut]},ct=new WeakSet,ea=function(){return nt(this,O)?Math.ceil(this.thickness*this.parent.scaleFactor):0},zt=new WeakSet,Un=function(ae=!1){if(this.isEmpty())return;if(!nt(this,O)){Yt(this,oe,Cn).call(this);return}const Ae=Yt(this,ot,wa).call(this),it=Yt(this,ct,ea).call(this);nr(this,re,Math.max(R,Ae[2]-Ae[0])),nr(this,ee,Math.max(R,Ae[3]-Ae[1]));const Ut=Math.ceil(it+nt(this,re)*this.scaleFactor),Gt=Math.ceil(it+nt(this,ee)*this.scaleFactor),[ar,jt]=this.parent.viewportBaseDimensions;this.width=Ut/ar,this.height=Gt/jt,nr(this,B,Ut/Gt),Yt(this,mr,Ea).call(this);const Jt=this.translationX,dr=this.translationY;this.translationX=-Ae[0],this.translationY=-Ae[1],Yt(this,dt,Bn).call(this),Yt(this,oe,Cn).call(this),nr(this,H,Ut),nr(this,G,Gt),this.setDims(Ut,Gt);const cr=ae?it/this.scaleFactor/2:0;this.translate(Jt-this.translationX-cr,dr-this.translationY-cr)},mr=new WeakSet,Ea=function(){const{style:ae}=this.div;nt(this,B)>=1?(ae.minHeight=`${R}px`,ae.minWidth=`${Math.round(nt(this,B)*R)}px`):(ae.minWidth=`${R}px`,ae.minHeight=`${Math.round(R/nt(this,B))}px`)},qt(P,Z),Dr(P,"_defaultColor",null),Dr(P,"_defaultOpacity",1),Dr(P,"_defaultThickness",1),Dr(P,"_l10nPromise"),Dr(P,"_type","ink"),d.InkEditor=P},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.fitCurve=void 0;const v=g(25);d.fitCurve=v},c=>{function d(j,z,W){if(!Array.isArray(j))throw new TypeError("First argument should be an array");if(j.forEach(X=>{if(!Array.isArray(X)||X.some(H=>typeof H!="number")||X.length!==j[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),j=j.filter((X,H)=>H===0||!X.every((G,ie)=>G===j[H-1][ie])),j.length<2)return[];const O=j.length,Y=ee(j[1],j[0]),Q=ee(j[O-2],j[O-1]);return g(j,Y,Q,z,W)}function g(j,z,W,O,Y){var X,H,G,ie,Ee,be,Ce,Oe,mt,Tt,St,ft,ut;if(j.length===2)return ft=re.vectorLen(re.subtract(j[0],j[1]))/3,X=[j[0],re.addArrays(j[0],re.mulItems(z,ft)),re.addArrays(j[1],re.mulItems(W,ft)),j[1]],[X];if(H=R(j),[X,ie,be]=v(j,H,H,z,W,Y),ie===0||ie<O)return[X];if(ie<O*O)for(G=H,Ee=ie,Ce=be,ut=0;ut<20;ut++){if(G=_(X,j,G),[X,ie,be]=v(j,H,G,z,W,Y),ie<O)return[X];if(be===Ce){let wt=ie/Ee;if(wt>.9999&&wt<1.0001)break}Ee=ie,Ce=be}return St=[],Oe=re.subtract(j[be-1],j[be+1]),Oe.every(wt=>wt===0)&&(Oe=re.subtract(j[be-1],j[be]),[Oe[0],Oe[1]]=[-Oe[1],Oe[0]]),mt=re.normalize(Oe),Tt=re.mulItems(mt,-1),St=St.concat(g(j.slice(0,be+1),z,mt,O,Y)),St=St.concat(g(j.slice(be),Tt,W,O,Y)),St}function v(j,z,W,O,Y,Q){var X,H,G;return X=b(j,W,O,Y),[H,G]=U(j,X,z),Q&&Q({bez:X,points:j,params:z,maxErr:H,maxPoint:G}),[X,H,G]}function b(j,z,W,O){var Y,Q,X,H,G,ie,Ee,be,Ce,Oe,mt,Tt,St,ft,ut,wt,Et,Pt=j[0],Mt=j[j.length-1];for(Y=[Pt,null,null,Mt],Q=re.zeros_Xx2x2(z.length),St=0,ft=z.length;St<ft;St++)wt=z[St],Et=1-wt,X=Q[St],X[0]=re.mulItems(W,3*wt*(Et*Et)),X[1]=re.mulItems(O,3*Et*(wt*wt));for(H=[[0,0],[0,0]],G=[0,0],St=0,ft=j.length;St<ft;St++)wt=z[St],X=Q[St],H[0][0]+=re.dot(X[0],X[0]),H[0][1]+=re.dot(X[0],X[1]),H[1][0]+=re.dot(X[0],X[1]),H[1][1]+=re.dot(X[1],X[1]),ut=re.subtract(j[St],ne.q([Pt,Pt,Mt,Mt],wt)),G[0]+=re.dot(X[0],ut),G[1]+=re.dot(X[1],ut);return ie=H[0][0]*H[1][1]-H[1][0]*H[0][1],Ee=H[0][0]*G[1]-H[1][0]*G[0],be=G[0]*H[1][1]-G[1]*H[0][1],Ce=ie===0?0:be/ie,Oe=ie===0?0:Ee/ie,Tt=re.vectorLen(re.subtract(Pt,Mt)),mt=1e-6*Tt,Ce<mt||Oe<mt?(Y[1]=re.addArrays(Pt,re.mulItems(W,Tt/3)),Y[2]=re.addArrays(Mt,re.mulItems(O,Tt/3))):(Y[1]=re.addArrays(Pt,re.mulItems(W,Ce)),Y[2]=re.addArrays(Mt,re.mulItems(O,Oe))),Y}function _(j,z,W){return W.map((O,Y)=>E(j,z[Y],O))}function E(j,z,W){var O=re.subtract(ne.q(j,W),z),Y=ne.qprime(j,W),Q=re.mulMatrix(O,Y),X=re.sum(re.squareItems(Y))+2*re.mulMatrix(O,ne.qprimeprime(j,W));return X===0?W:W-Q/X}function R(j){var z=[],W,O,Y;return j.forEach((Q,X)=>{W=X?O+re.vectorLen(re.subtract(Q,Y)):0,z.push(W),O=W,Y=Q}),z=z.map(Q=>Q/O),z}function U(j,z,W){var O,Y,Q,X,H,G,ie,Ee;Y=0,Q=Math.floor(j.length/2);const be=P(z,10);for(H=0,G=j.length;H<G;H++)ie=j[H],Ee=B(z,W[H],be,10),X=re.subtract(ne.q(z,Ee),ie),O=X[0]*X[0]+X[1]*X[1],O>Y&&(Y=O,Q=H);return[Y,Q]}var P=function(j,z){for(var W,O=[0],Y=j[0],Q=0,X=1;X<=z;X++)W=ne.q(j,X/z),Q+=re.vectorLen(re.subtract(W,Y)),O.push(Q),Y=W;return O=O.map(H=>H/Q),O};function B(j,z,W,O){if(z<0)return 0;if(z>1)return 1;for(var Y,Q,X,H,G,ie=1;ie<=O;ie++)if(z<=W[ie]){H=(ie-1)/O,X=ie/O,Q=W[ie-1],Y=W[ie],G=(z-Q)/(Y-Q)*(X-H)+H;break}return G}function ee(j,z){return re.normalize(re.subtract(j,z))}class re{static zeros_Xx2x2(z){for(var W=[];z--;)W.push([0,0]);return W}static mulItems(z,W){return z.map(O=>O*W)}static mulMatrix(z,W){return z.reduce((O,Y,Q)=>O+Y*W[Q],0)}static subtract(z,W){return z.map((O,Y)=>O-W[Y])}static addArrays(z,W){return z.map((O,Y)=>O+W[Y])}static addItems(z,W){return z.map(O=>O+W)}static sum(z){return z.reduce((W,O)=>W+O)}static dot(z,W){return re.mulMatrix(z,W)}static vectorLen(z){return Math.hypot(...z)}static divItems(z,W){return z.map(O=>O/W)}static squareItems(z){return z.map(W=>W*W)}static normalize(z){return this.divItems(z,this.vectorLen(z))}}class ne{static q(z,W){var O=1-W,Y=re.mulItems(z[0],O*O*O),Q=re.mulItems(z[1],3*O*O*W),X=re.mulItems(z[2],3*O*W*W),H=re.mulItems(z[3],W*W*W);return re.addArrays(re.addArrays(Y,Q),re.addArrays(X,H))}static qprime(z,W){var O=1-W,Y=re.mulItems(re.subtract(z[1],z[0]),3*O*O),Q=re.mulItems(re.subtract(z[2],z[1]),6*O*W),X=re.mulItems(re.subtract(z[3],z[2]),3*W*W);return re.addArrays(re.addArrays(Y,Q),X)}static qprimeprime(z,W){return re.addArrays(re.mulItems(re.addArrays(re.subtract(z[2],re.mulItems(z[1],2)),z[0]),6*(1-W)),re.mulItems(re.addArrays(re.subtract(z[3],re.mulItems(z[2],2)),z[1]),6*W))}}c.exports=d,c.exports.fitCubic=g,c.exports.createTangent=ee},(c,d,g)=>{var Pe,Nn,Ye,ni,Qe,xa,_t,Sa,dt,Ta;Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationLayer=void 0;var v=g(1),b=g(6),_=g(3),E=g(27),R=g(28);const U=1e3,P=9,B=new WeakSet;function ee(Vt){return{width:Vt[2]-Vt[0],height:Vt[3]-Vt[1]}}class re{static create(V){switch(V.data.annotationType){case v.AnnotationType.LINK:return new j(V);case v.AnnotationType.TEXT:return new z(V);case v.AnnotationType.WIDGET:switch(V.data.fieldType){case"Tx":return new O(V);case"Btn":return V.data.radioButton?new Q(V):V.data.checkBox?new Y(V):new X(V);case"Ch":return new H(V)}return new W(V);case v.AnnotationType.POPUP:return new G(V);case v.AnnotationType.FREETEXT:return new Ee(V);case v.AnnotationType.LINE:return new be(V);case v.AnnotationType.SQUARE:return new Ce(V);case v.AnnotationType.CIRCLE:return new Oe(V);case v.AnnotationType.POLYLINE:return new mt(V);case v.AnnotationType.CARET:return new St(V);case v.AnnotationType.INK:return new ft(V);case v.AnnotationType.POLYGON:return new Tt(V);case v.AnnotationType.HIGHLIGHT:return new ut(V);case v.AnnotationType.UNDERLINE:return new wt(V);case v.AnnotationType.SQUIGGLY:return new Et(V);case v.AnnotationType.STRIKEOUT:return new Pt(V);case v.AnnotationType.STAMP:return new Mt(V);case v.AnnotationType.FILEATTACHMENT:return new Bt(V);default:return new ne(V)}}}class ne{constructor(V,{isRenderable:M=!1,ignoreBorder:Z=!1,createQuadrilaterals:te=!1}={}){this.isRenderable=M,this.data=V.data,this.layer=V.layer,this.page=V.page,this.viewport=V.viewport,this.linkService=V.linkService,this.downloadManager=V.downloadManager,this.imageResourcesPath=V.imageResourcesPath,this.renderForms=V.renderForms,this.svgFactory=V.svgFactory,this.annotationStorage=V.annotationStorage,this.enableScripting=V.enableScripting,this.hasJSActions=V.hasJSActions,this._fieldObjects=V.fieldObjects,this._mouseState=V.mouseState,M&&(this.container=this._createContainer(Z)),te&&(this.quadrilaterals=this._createQuadrilaterals(Z))}_createContainer(V=!1){const M=this.data,Z=this.page,te=this.viewport,xe=document.createElement("section"),{width:at,height:vt}=ee(M.rect),[st,rt,ht,ot]=te.viewBox,$t=ht-st,ct=ot-rt;xe.setAttribute("data-annotation-id",M.id);const kt=v.Util.normalizeRect([M.rect[0],Z.view[3]-M.rect[1]+Z.view[1],M.rect[2],Z.view[3]-M.rect[3]+Z.view[1]]);if(!V&&M.borderStyle.width>0){xe.style.borderWidth=`${M.borderStyle.width}px`;const Wt=M.borderStyle.horizontalCornerRadius,mr=M.borderStyle.verticalCornerRadius;if(Wt>0||mr>0){const A=`calc(${Wt}px * var(--scale-factor)) / calc(${mr}px * var(--scale-factor))`;xe.style.borderRadius=A}else if(this instanceof Q){const A=`calc(${at}px * var(--scale-factor)) / calc(${vt}px * var(--scale-factor))`;xe.style.borderRadius=A}switch(M.borderStyle.style){case v.AnnotationBorderStyleType.SOLID:xe.style.borderStyle="solid";break;case v.AnnotationBorderStyleType.DASHED:xe.style.borderStyle="dashed";break;case v.AnnotationBorderStyleType.BEVELED:(0,v.warn)("Unimplemented border style: beveled");break;case v.AnnotationBorderStyleType.INSET:(0,v.warn)("Unimplemented border style: inset");break;case v.AnnotationBorderStyleType.UNDERLINE:xe.style.borderBottomStyle="solid";break}const or=M.borderColor||null;or?xe.style.borderColor=v.Util.makeHexColor(or[0]|0,or[1]|0,or[2]|0):xe.style.borderWidth=0}xe.style.left=`${100*(kt[0]-st)/$t}%`,xe.style.top=`${100*(kt[1]-rt)/ct}%`;const{rotation:zt}=M;return M.hasOwnCanvas||zt===0?(xe.style.width=`${100*at/$t}%`,xe.style.height=`${100*vt/ct}%`):this.setRotation(zt,xe),xe}setRotation(V,M=this.container){const[Z,te,xe,at]=this.viewport.viewBox,vt=xe-Z,st=at-te,{width:rt,height:ht}=ee(this.data.rect);let ot,$t;V%180===0?(ot=100*rt/vt,$t=100*ht/st):(ot=100*ht/vt,$t=100*rt/st),M.style.width=`${ot}%`,M.style.height=`${$t}%`,M.setAttribute("data-main-rotation",(360-V)%360)}get _commonActions(){const V=(M,Z,te)=>{const xe=te.detail[M];te.target.style[Z]=E.ColorConverters[`${xe[0]}_HTML`](xe.slice(1))};return(0,v.shadow)(this,"_commonActions",{display:M=>{const Z=M.detail.display%2===1;this.container.style.visibility=Z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:Z,print:M.detail.display===0||M.detail.display===3})},print:M=>{this.annotationStorage.setValue(this.data.id,{print:M.detail.print})},hidden:M=>{this.container.style.visibility=M.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:M.detail.hidden})},focus:M=>{setTimeout(()=>M.target.focus({preventScroll:!1}),0)},userName:M=>{M.target.title=M.detail.userName},readonly:M=>{M.detail.readonly?M.target.setAttribute("readonly",""):M.target.removeAttribute("readonly")},required:M=>{this._setRequired(M.target,M.detail.required)},bgColor:M=>{V("bgColor","backgroundColor",M)},fillColor:M=>{V("fillColor","backgroundColor",M)},fgColor:M=>{V("fgColor","color",M)},textColor:M=>{V("textColor","color",M)},borderColor:M=>{V("borderColor","borderColor",M)},strokeColor:M=>{V("strokeColor","borderColor",M)},rotation:M=>{const Z=M.detail.rotation;this.setRotation(Z),this.annotationStorage.setValue(this.data.id,{rotation:Z})}})}_dispatchEventFromSandbox(V,M){const Z=this._commonActions;for(const te of Object.keys(M.detail)){const xe=V[te]||Z[te];xe==null||xe(M)}}_setDefaultPropertiesFromJS(V){if(!this.enableScripting)return;const M=this.annotationStorage.getRawValue(this.data.id);if(!M)return;const Z=this._commonActions;for(const[te,xe]of Object.entries(M)){const at=Z[te];if(at){const vt={detail:{[te]:xe},target:V};at(vt),delete M[te]}}}_createQuadrilaterals(V=!1){if(!this.data.quadPoints)return null;const M=[],Z=this.data.rect;for(const te of this.data.quadPoints)this.data.rect=[te[2].x,te[2].y,te[1].x,te[1].y],M.push(this._createContainer(V));return this.data.rect=Z,M}_createPopup(V,M){let Z=this.container;this.quadrilaterals&&(V=V||this.quadrilaterals,Z=this.quadrilaterals[0]),V||(V=document.createElement("div"),V.className="popupTriggerArea",Z.append(V));const xe=new ie({container:Z,trigger:V,color:M.color,titleObj:M.titleObj,modificationDate:M.modificationDate,contentsObj:M.contentsObj,richText:M.richText,hideWrapper:!0}).render();xe.style.left="100%",Z.append(xe)}_renderQuadrilaterals(V){for(const M of this.quadrilaterals)M.className=V;return this.quadrilaterals}render(){(0,v.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(V,M=null){const Z=[];if(this._fieldObjects){const te=this._fieldObjects[V];if(te)for(const{page:xe,id:at,exportValues:vt}of te){if(xe===-1||at===M)continue;const st=typeof vt=="string"?vt:null,rt=document.querySelector(`[data-element-id="${at}"]`);if(rt&&!B.has(rt)){(0,v.warn)(`_getElementsByName - element not allowed: ${at}`);continue}Z.push({id:at,exportValue:st,domElement:rt})}return Z}for(const te of document.getElementsByName(V)){const{exportValue:xe}=te,at=te.getAttribute("data-element-id");at!==M&&(!B.has(te)||Z.push({id:at,exportValue:xe,domElement:te}))}return Z}static get platform(){const V=typeof navigator<"u"?navigator.platform:"";return(0,v.shadow)(this,"platform",{isWin:V.includes("Win"),isMac:V.includes("Mac")})}}class j extends ne{constructor(M,Z=null){super(M,{isRenderable:!0,ignoreBorder:!!(Z!=null&&Z.ignoreBorder),createQuadrilaterals:!0});qt(this,Pe);qt(this,Ye);this.isTooltipOnly=M.data.isTooltipOnly}render(){const{data:M,linkService:Z}=this,te=document.createElement("a");te.setAttribute("data-element-id",M.id);let xe=!1;return M.url?(Z.addLinkAttributes(te,M.url,M.newWindow),xe=!0):M.action?(this._bindNamedAction(te,M.action),xe=!0):M.attachment?(this._bindAttachment(te,M.attachment),xe=!0):M.setOCGState?(Yt(this,Ye,ni).call(this,te,M.setOCGState),xe=!0):M.dest?(this._bindLink(te,M.dest),xe=!0):(M.actions&&(M.actions.Action||M.actions["Mouse Up"]||M.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(te,M),xe=!0),M.resetForm?(this._bindResetFormAction(te,M.resetForm),xe=!0):this.isTooltipOnly&&!xe&&(this._bindLink(te,""),xe=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((at,vt)=>{const st=vt===0?te:te.cloneNode();return at.append(st),at}):(this.container.className="linkAnnotation",xe&&this.container.append(te),this.container)}_bindLink(M,Z){M.href=this.linkService.getDestinationHash(Z),M.onclick=()=>(Z&&this.linkService.goToDestination(Z),!1),(Z||Z==="")&&Yt(this,Pe,Nn).call(this)}_bindNamedAction(M,Z){M.href=this.linkService.getAnchorUrl(""),M.onclick=()=>(this.linkService.executeNamedAction(Z),!1),Yt(this,Pe,Nn).call(this)}_bindAttachment(M,Z){M.href=this.linkService.getAnchorUrl(""),M.onclick=()=>{var te;return(te=this.downloadManager)==null||te.openOrDownloadData(this.container,Z.content,Z.filename),!1},Yt(this,Pe,Nn).call(this)}_bindJSAction(M,Z){M.href=this.linkService.getAnchorUrl("");const te=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const xe of Object.keys(Z.actions)){const at=te.get(xe);!at||(M[at]=()=>{var vt;return(vt=this.linkService.eventBus)==null||vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Z.id,name:xe}}),!1})}M.onclick||(M.onclick=()=>!1),Yt(this,Pe,Nn).call(this)}_bindResetFormAction(M,Z){const te=M.onclick;if(te||(M.href=this.linkService.getAnchorUrl("")),Yt(this,Pe,Nn).call(this),!this._fieldObjects){(0,v.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),te||(M.onclick=()=>!1);return}M.onclick=()=>{var ot;te==null||te();const{fields:xe,refs:at,include:vt}=Z,st=[];if(xe.length!==0||at.length!==0){const $t=new Set(at);for(const ct of xe){const kt=this._fieldObjects[ct]||[];for(const{id:zt}of kt)$t.add(zt)}for(const ct of Object.values(this._fieldObjects))for(const kt of ct)$t.has(kt.id)===vt&&st.push(kt)}else for(const $t of Object.values(this._fieldObjects))st.push(...$t);const rt=this.annotationStorage,ht=[];for(const $t of st){const{id:ct}=$t;switch(ht.push(ct),$t.type){case"text":{const zt=$t.defaultValue||"";rt.setValue(ct,{value:zt});break}case"checkbox":case"radiobutton":{const zt=$t.defaultValue===$t.exportValues;rt.setValue(ct,{value:zt});break}case"combobox":case"listbox":{const zt=$t.defaultValue||"";rt.setValue(ct,{value:zt});break}default:continue}const kt=document.querySelector(`[data-element-id="${ct}"]`);if(kt){if(!B.has(kt)){(0,v.warn)(`_bindResetFormAction - element not allowed: ${ct}`);continue}}else continue;kt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ht,name:"ResetForm"}})),!1}}}Pe=new WeakSet,Nn=function(){this.container.setAttribute("data-internal-link","")},Ye=new WeakSet,ni=function(M,Z){M.href=this.linkService.getAnchorUrl(""),M.onclick=()=>(this.linkService.executeSetOCGState(Z),!1),Yt(this,Pe,Nn).call(this)};class z extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M})}render(){this.container.className="textAnnotation";const V=document.createElement("img");return V.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",V.alt="[{{type}} Annotation]",V.dataset.l10nId="text_annotation_type",V.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(V,this.data),this.container.append(V),this.container}}class W extends ne{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(V){const{isWin:M,isMac:Z}=ne.platform;return M&&V.ctrlKey||Z&&V.metaKey}_setEventListener(V,M,Z,te){M.includes("mouse")?V.addEventListener(M,xe=>{var at;(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Z,value:te(xe),shift:xe.shiftKey,modifier:this._getKeyModifier(xe)}})}):V.addEventListener(M,xe=>{var at;(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Z,value:te(xe)}})})}_setEventListeners(V,M,Z){var te;for(const[xe,at]of M)(at==="Action"||((te=this.data.actions)==null?void 0:te[at]))&&this._setEventListener(V,xe,at,Z)}_setBackgroundColor(V){const M=this.data.backgroundColor||null;V.style.backgroundColor=M===null?"transparent":v.Util.makeHexColor(M[0],M[1],M[2])}_setTextStyle(V){const M=["left","center","right"],{fontColor:Z}=this.data.defaultAppearanceData,te=this.data.defaultAppearanceData.fontSize||P,xe=V.style;let at;const vt=2,st=rt=>Math.round(10*rt)/10;if(this.data.multiLine){const rt=Math.abs(this.data.rect[3]-this.data.rect[1]-vt),ht=Math.round(rt/(v.LINE_FACTOR*te))||1,ot=rt/ht;at=Math.min(te,st(ot/v.LINE_FACTOR))}else{const rt=Math.abs(this.data.rect[3]-this.data.rect[1]-vt);at=Math.min(te,st(rt/v.LINE_FACTOR))}xe.fontSize=`calc(${at}px * var(--scale-factor))`,xe.color=v.Util.makeHexColor(Z[0],Z[1],Z[2]),this.data.textAlignment!==null&&(xe.textAlign=M[this.data.textAlignment])}_setRequired(V,M){M?V.setAttribute("required",!0):V.removeAttribute("required"),V.setAttribute("aria-required",M)}}class O extends W{constructor(V){const M=V.renderForms||!V.data.hasAppearance&&!!V.data.fieldValue;super(V,{isRenderable:M})}setPropertyOnSiblings(V,M,Z,te){const xe=this.annotationStorage;for(const at of this._getElementsByName(V.name,V.id))at.domElement&&(at.domElement[M]=Z),xe.setValue(at.id,{[te]:Z})}render(){var te;const V=this.annotationStorage,M=this.data.id;this.container.className="textWidgetAnnotation";let Z=null;if(this.renderForms){const xe=V.getValue(M,{value:this.data.fieldValue});let at=xe.formattedValue||xe.value||"";const vt=V.getValue(M,{charLimit:this.data.maxLen}).charLimit;vt&&at.length>vt&&(at=at.slice(0,vt));const st={userValue:at,formattedValue:null,valueOnFocus:""};this.data.multiLine?(Z=document.createElement("textarea"),Z.textContent=at,this.data.doNotScroll&&(Z.style.overflowY="hidden")):(Z=document.createElement("input"),Z.type="text",Z.setAttribute("value",at),this.data.doNotScroll&&(Z.style.overflowX="hidden")),B.add(Z),Z.setAttribute("data-element-id",M),Z.disabled=this.data.readOnly,Z.name=this.data.fieldName,Z.tabIndex=U,this._setRequired(Z,this.data.required),vt&&(Z.maxLength=vt),Z.addEventListener("input",ht=>{V.setValue(M,{value:ht.target.value}),this.setPropertyOnSiblings(Z,"value",ht.target.value,"value")}),Z.addEventListener("resetform",ht=>{var $t;const ot=($t=this.data.defaultFieldValue)!=null?$t:"";Z.value=st.userValue=ot,st.formattedValue=null});let rt=ht=>{const{formattedValue:ot}=st;ot!=null&&(ht.target.value=ot),ht.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Z.addEventListener("focus",ot=>{st.userValue&&(ot.target.value=st.userValue),st.valueOnFocus=ot.target.value}),Z.addEventListener("updatefromsandbox",ot=>{const $t={value(ct){var kt;st.userValue=(kt=ct.detail.value)!=null?kt:"",V.setValue(M,{value:st.userValue.toString()}),ct.target.value=st.userValue},formattedValue(ct){const{formattedValue:kt}=ct.detail;st.formattedValue=kt,kt!=null&&ct.target!==document.activeElement&&(ct.target.value=kt),V.setValue(M,{formattedValue:kt})},selRange(ct){ct.target.setSelectionRange(...ct.detail.selRange)},charLimit:ct=>{var mr;const{charLimit:kt}=ct.detail,{target:zt}=ct;if(kt===0){zt.removeAttribute("maxLength");return}zt.setAttribute("maxLength",kt);let Wt=st.userValue;!Wt||Wt.length<=kt||(Wt=Wt.slice(0,kt),zt.value=st.userValue=Wt,V.setValue(M,{value:Wt}),(mr=this.linkService.eventBus)==null||mr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:Wt,willCommit:!0,commitKey:1,selStart:zt.selectionStart,selEnd:zt.selectionEnd}}))}};this._dispatchEventFromSandbox($t,ot)}),Z.addEventListener("keydown",ot=>{var kt;let $t=-1;if(ot.key==="Escape"?$t=0:ot.key==="Enter"&&!this.data.multiLine?$t=2:ot.key==="Tab"&&($t=3),$t===-1)return;const{value:ct}=ot.target;st.valueOnFocus!==ct&&(st.userValue=ct,(kt=this.linkService.eventBus)==null||kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:ct,willCommit:!0,commitKey:$t,selStart:ot.target.selectionStart,selEnd:ot.target.selectionEnd}}))});const ht=rt;rt=null,Z.addEventListener("blur",ot=>{var ct;const{value:$t}=ot.target;st.userValue=$t,this._mouseState.isDown&&st.valueOnFocus!==$t&&((ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:$t,willCommit:!0,commitKey:1,selStart:ot.target.selectionStart,selEnd:ot.target.selectionEnd}})),ht(ot)}),(te=this.data.actions)!=null&&te.Keystroke&&Z.addEventListener("beforeinput",ot=>{var A;const{data:$t,target:ct}=ot,{value:kt,selectionStart:zt,selectionEnd:Wt}=ct;let mr=zt,or=Wt;switch(ot.inputType){case"deleteWordBackward":{const K=kt.substring(0,zt).match(/\w*[^\w]*$/);K&&(mr-=K[0].length);break}case"deleteWordForward":{const K=kt.substring(zt).match(/^[^\w]*\w*/);K&&(or+=K[0].length);break}case"deleteContentBackward":zt===Wt&&(mr-=1);break;case"deleteContentForward":zt===Wt&&(or+=1);break}ot.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:kt,change:$t||"",willCommit:!1,selStart:mr,selEnd:or}})}),this._setEventListeners(Z,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ot=>ot.target.value)}if(rt&&Z.addEventListener("blur",rt),this.data.comb){const ot=(this.data.rect[2]-this.data.rect[0])/vt;Z.classList.add("comb"),Z.style.letterSpacing=`calc(${ot}px * var(--scale-factor) - 1ch)`}}else Z=document.createElement("div"),Z.textContent=this.data.fieldValue,Z.style.verticalAlign="middle",Z.style.display="table-cell";return this._setTextStyle(Z),this._setBackgroundColor(Z),this._setDefaultPropertiesFromJS(Z),this.container.append(Z),this.container}}class Y extends W{constructor(V){super(V,{isRenderable:V.renderForms})}render(){const V=this.annotationStorage,M=this.data,Z=M.id;let te=V.getValue(Z,{value:M.exportValue===M.fieldValue}).value;typeof te=="string"&&(te=te!=="Off",V.setValue(Z,{value:te})),this.container.className="buttonWidgetAnnotation checkBox";const xe=document.createElement("input");return B.add(xe),xe.setAttribute("data-element-id",Z),xe.disabled=M.readOnly,this._setRequired(xe,this.data.required),xe.type="checkbox",xe.name=M.fieldName,te&&xe.setAttribute("checked",!0),xe.setAttribute("exportValue",M.exportValue),xe.tabIndex=U,xe.addEventListener("change",at=>{const{name:vt,checked:st}=at.target;for(const rt of this._getElementsByName(vt,Z)){const ht=st&&rt.exportValue===M.exportValue;rt.domElement&&(rt.domElement.checked=ht),V.setValue(rt.id,{value:ht})}V.setValue(Z,{value:st})}),xe.addEventListener("resetform",at=>{const vt=M.defaultFieldValue||"Off";at.target.checked=vt===M.exportValue}),this.enableScripting&&this.hasJSActions&&(xe.addEventListener("updatefromsandbox",at=>{const vt={value(st){st.target.checked=st.detail.value!=="Off",V.setValue(Z,{value:st.target.checked})}};this._dispatchEventFromSandbox(vt,at)}),this._setEventListeners(xe,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],at=>at.target.checked)),this._setBackgroundColor(xe),this._setDefaultPropertiesFromJS(xe),this.container.append(xe),this.container}}class Q extends W{constructor(V){super(V,{isRenderable:V.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const V=this.annotationStorage,M=this.data,Z=M.id;let te=V.getValue(Z,{value:M.fieldValue===M.buttonValue}).value;typeof te=="string"&&(te=te!==M.buttonValue,V.setValue(Z,{value:te}));const xe=document.createElement("input");if(B.add(xe),xe.setAttribute("data-element-id",Z),xe.disabled=M.readOnly,this._setRequired(xe,this.data.required),xe.type="radio",xe.name=M.fieldName,te&&xe.setAttribute("checked",!0),xe.tabIndex=U,xe.addEventListener("change",at=>{const{name:vt,checked:st}=at.target;for(const rt of this._getElementsByName(vt,Z))V.setValue(rt.id,{value:!1});V.setValue(Z,{value:st})}),xe.addEventListener("resetform",at=>{const vt=M.defaultFieldValue;at.target.checked=vt!=null&&vt===M.buttonValue}),this.enableScripting&&this.hasJSActions){const at=M.buttonValue;xe.addEventListener("updatefromsandbox",vt=>{const st={value:rt=>{const ht=at===rt.detail.value;for(const ot of this._getElementsByName(rt.target.name)){const $t=ht&&ot.id===Z;ot.domElement&&(ot.domElement.checked=$t),V.setValue(ot.id,{value:$t})}}};this._dispatchEventFromSandbox(st,vt)}),this._setEventListeners(xe,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],vt=>vt.target.checked)}return this._setBackgroundColor(xe),this._setDefaultPropertiesFromJS(xe),this.container.append(xe),this.container}}class X extends j{constructor(V){super(V,{ignoreBorder:V.data.hasAppearance})}render(){const V=super.render();V.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(V.title=this.data.alternativeText);const M=V.lastChild;return this.enableScripting&&this.hasJSActions&&M&&(this._setDefaultPropertiesFromJS(M),M.addEventListener("updatefromsandbox",Z=>{this._dispatchEventFromSandbox({},Z)})),V}}class H extends W{constructor(V){super(V,{isRenderable:V.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const V=this.annotationStorage,M=this.data.id,Z=V.getValue(M,{value:this.data.fieldValue}),te=document.createElement("select");B.add(te),te.setAttribute("data-element-id",M),te.disabled=this.data.readOnly,this._setRequired(te,this.data.required),te.name=this.data.fieldName,te.tabIndex=U;let xe=this.data.combo&&this.data.options.length>0;this.data.combo||(te.size=this.data.options.length,this.data.multiSelect&&(te.multiple=!0)),te.addEventListener("resetform",rt=>{const ht=this.data.defaultFieldValue;for(const ot of te.options)ot.selected=ot.value===ht});for(const rt of this.data.options){const ht=document.createElement("option");ht.textContent=rt.displayValue,ht.value=rt.exportValue,Z.value.includes(rt.exportValue)&&(ht.setAttribute("selected",!0),xe=!1),te.append(ht)}let at=null;if(xe){const rt=document.createElement("option");rt.value=" ",rt.setAttribute("hidden",!0),rt.setAttribute("selected",!0),te.prepend(rt),at=()=>{rt.remove(),te.removeEventListener("input",at),at=null},te.addEventListener("input",at)}const vt=(rt,ht)=>{const ot=ht?"value":"textContent",$t=rt.target.options;return rt.target.multiple?Array.prototype.filter.call($t,ct=>ct.selected).map(ct=>ct[ot]):$t.selectedIndex===-1?null:$t[$t.selectedIndex][ot]},st=rt=>{const ht=rt.target.options;return Array.prototype.map.call(ht,ot=>({displayValue:ot.textContent,exportValue:ot.value}))};return this.enableScripting&&this.hasJSActions?(te.addEventListener("updatefromsandbox",rt=>{const ht={value(ot){at==null||at();const $t=ot.detail.value,ct=new Set(Array.isArray($t)?$t:[$t]);for(const kt of te.options)kt.selected=ct.has(kt.value);V.setValue(M,{value:vt(ot,!0)})},multipleSelection(ot){te.multiple=!0},remove(ot){const $t=te.options,ct=ot.detail.remove;$t[ct].selected=!1,te.remove(ct),$t.length>0&&Array.prototype.findIndex.call($t,zt=>zt.selected)===-1&&($t[0].selected=!0),V.setValue(M,{value:vt(ot,!0),items:st(ot)})},clear(ot){for(;te.length!==0;)te.remove(0);V.setValue(M,{value:null,items:[]})},insert(ot){const{index:$t,displayValue:ct,exportValue:kt}=ot.detail.insert,zt=te.children[$t],Wt=document.createElement("option");Wt.textContent=ct,Wt.value=kt,zt?zt.before(Wt):te.append(Wt),V.setValue(M,{value:vt(ot,!0),items:st(ot)})},items(ot){const{items:$t}=ot.detail;for(;te.length!==0;)te.remove(0);for(const ct of $t){const{displayValue:kt,exportValue:zt}=ct,Wt=document.createElement("option");Wt.textContent=kt,Wt.value=zt,te.append(Wt)}te.options.length>0&&(te.options[0].selected=!0),V.setValue(M,{value:vt(ot,!0),items:st(ot)})},indices(ot){const $t=new Set(ot.detail.indices);for(const ct of ot.target.options)ct.selected=$t.has(ct.index);V.setValue(M,{value:vt(ot,!0)})},editable(ot){ot.target.disabled=!ot.detail.editable}};this._dispatchEventFromSandbox(ht,rt)}),te.addEventListener("input",rt=>{var $t;const ht=vt(rt,!0),ot=vt(rt,!1);V.setValue(M,{value:ht}),($t=this.linkService.eventBus)==null||$t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:ot,changeEx:ht,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(te,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],rt=>rt.target.checked)):te.addEventListener("input",function(rt){V.setValue(M,{value:vt(rt,!0)})}),this.data.combo&&this._setTextStyle(te),this._setBackgroundColor(te),this._setDefaultPropertiesFromJS(te),this.container.append(te),this.container}}const Ze=class extends ne{constructor(V){var te,xe,at;const{data:M}=V,Z=!Ze.IGNORE_TYPES.has(M.parentType)&&!!(((te=M.titleObj)==null?void 0:te.str)||((xe=M.contentsObj)==null?void 0:xe.str)||((at=M.richText)==null?void 0:at.str));super(V,{isRenderable:Z})}render(){this.container.className="popupAnnotation";const V=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(V.length===0)return this.container;const M=new ie({container:this.container,trigger:Array.from(V),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),Z=this.page,te=v.Util.normalizeRect([this.data.parentRect[0],Z.view[3]-this.data.parentRect[1]+Z.view[1],this.data.parentRect[2],Z.view[3]-this.data.parentRect[3]+Z.view[1]]),xe=te[0]+this.data.parentRect[2]-this.data.parentRect[0],at=te[1],[vt,st,rt,ht]=this.viewport.viewBox,ot=rt-vt,$t=ht-st;return this.container.style.left=`${100*(xe-vt)/ot}%`,this.container.style.top=`${100*(at-st)/$t}%`,this.container.append(M.render()),this.container}};let G=Ze;Dr(G,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class ie{constructor(V){this.container=V.container,this.trigger=V.trigger,this.color=V.color,this.titleObj=V.titleObj,this.modificationDate=V.modificationDate,this.contentsObj=V.contentsObj,this.richText=V.richText,this.hideWrapper=V.hideWrapper||!1,this.pinned=!1}render(){var vt,st;const M=document.createElement("div");M.className="popupWrapper",this.hideElement=this.hideWrapper?M:this.container,this.hideElement.hidden=!0;const Z=document.createElement("div");Z.className="popup";const te=this.color;if(te){const rt=.7*(255-te[0])+te[0],ht=.7*(255-te[1])+te[1],ot=.7*(255-te[2])+te[2];Z.style.backgroundColor=v.Util.makeHexColor(rt|0,ht|0,ot|0)}const xe=document.createElement("h1");xe.dir=this.titleObj.dir,xe.textContent=this.titleObj.str,Z.append(xe);const at=b.PDFDateString.toDateObject(this.modificationDate);if(at){const rt=document.createElement("span");rt.className="popupDate",rt.textContent="{{date}}, {{time}}",rt.dataset.l10nId="annotation_date_string",rt.dataset.l10nArgs=JSON.stringify({date:at.toLocaleDateString(),time:at.toLocaleTimeString()}),Z.append(rt)}if(((vt=this.richText)==null?void 0:vt.str)&&(!((st=this.contentsObj)!=null&&st.str)||this.contentsObj.str===this.richText.str))R.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:Z}),Z.lastChild.className="richText popupContent";else{const rt=this._formatContents(this.contentsObj);Z.append(rt)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const rt of this.trigger)rt.addEventListener("click",this._toggle.bind(this)),rt.addEventListener("mouseover",this._show.bind(this,!1)),rt.addEventListener("mouseout",this._hide.bind(this,!1));return Z.addEventListener("click",this._hide.bind(this,!0)),M.append(Z),M}_formatContents({str:V,dir:M}){const Z=document.createElement("p");Z.className="popupContent",Z.dir=M;const te=V.split(/(?:\r\n?|\n)/);for(let xe=0,at=te.length;xe<at;++xe){const vt=te[xe];Z.append(document.createTextNode(vt)),xe<at-1&&Z.append(document.createElement("br"))}return Z}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(V=!1){V&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(V=!0){V&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class Ee extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M,ignoreBorder:!0}),this.textContent=V.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const V=document.createElement("div");V.className="annotationTextContent",V.setAttribute("role","comment");for(const M of this.textContent){const Z=document.createElement("span");Z.textContent=M,V.append(Z)}this.container.append(V)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class be extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const V=this.data,{width:M,height:Z}=ee(V.rect),te=this.svgFactory.create(M,Z,!0),xe=this.svgFactory.createElement("svg:line");return xe.setAttribute("x1",V.rect[2]-V.lineCoordinates[0]),xe.setAttribute("y1",V.rect[3]-V.lineCoordinates[1]),xe.setAttribute("x2",V.rect[2]-V.lineCoordinates[2]),xe.setAttribute("y2",V.rect[3]-V.lineCoordinates[3]),xe.setAttribute("stroke-width",V.borderStyle.width||1),xe.setAttribute("stroke","transparent"),xe.setAttribute("fill","transparent"),te.append(xe),this.container.append(te),this._createPopup(xe,V),this.container}}class Ce extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const V=this.data,{width:M,height:Z}=ee(V.rect),te=this.svgFactory.create(M,Z,!0),xe=V.borderStyle.width,at=this.svgFactory.createElement("svg:rect");return at.setAttribute("x",xe/2),at.setAttribute("y",xe/2),at.setAttribute("width",M-xe),at.setAttribute("height",Z-xe),at.setAttribute("stroke-width",xe||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),te.append(at),this.container.append(te),this._createPopup(at,V),this.container}}class Oe extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const V=this.data,{width:M,height:Z}=ee(V.rect),te=this.svgFactory.create(M,Z,!0),xe=V.borderStyle.width,at=this.svgFactory.createElement("svg:ellipse");return at.setAttribute("cx",M/2),at.setAttribute("cy",Z/2),at.setAttribute("rx",M/2-xe/2),at.setAttribute("ry",Z/2-xe/2),at.setAttribute("stroke-width",xe||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),te.append(at),this.container.append(te),this._createPopup(at,V),this.container}}class mt extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const V=this.data,{width:M,height:Z}=ee(V.rect),te=this.svgFactory.create(M,Z,!0);let xe=[];for(const vt of V.vertices){const st=vt.x-V.rect[0],rt=V.rect[3]-vt.y;xe.push(st+","+rt)}xe=xe.join(" ");const at=this.svgFactory.createElement(this.svgElementName);return at.setAttribute("points",xe),at.setAttribute("stroke-width",V.borderStyle.width||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),te.append(at),this.container.append(te),this._createPopup(at,V),this.container}}class Tt extends mt{constructor(V){super(V),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class St extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ft extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const V=this.data,{width:M,height:Z}=ee(V.rect),te=this.svgFactory.create(M,Z,!0);for(const xe of V.inkLists){let at=[];for(const st of xe){const rt=st.x-V.rect[0],ht=V.rect[3]-st.y;at.push(`${rt},${ht}`)}at=at.join(" ");const vt=this.svgFactory.createElement(this.svgElementName);vt.setAttribute("points",at),vt.setAttribute("stroke-width",V.borderStyle.width||1),vt.setAttribute("stroke","transparent"),vt.setAttribute("fill","transparent"),this._createPopup(vt,V),te.append(vt)}return this.container.append(te),this.container}}class ut extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class wt extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Et extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class Pt extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class Mt extends ne{constructor(V){var Z,te,xe;const M=!!(V.data.hasPopup||((Z=V.data.titleObj)==null?void 0:Z.str)||((te=V.data.contentsObj)==null?void 0:te.str)||((xe=V.data.richText)==null?void 0:xe.str));super(V,{isRenderable:M,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Bt extends ne{constructor(V){var te;super(V,{isRenderable:!0});const{filename:M,content:Z}=this.data.file;this.filename=(0,b.getFilenameFromUrl)(M,!0),this.content=Z,(te=this.linkService.eventBus)==null||te.dispatch("fileattachmentannotation",{source:this,filename:M,content:Z})}render(){var M,Z;this.container.className="fileAttachmentAnnotation";const V=document.createElement("div");return V.className="popupTriggerArea",V.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((M=this.data.titleObj)==null?void 0:M.str)||((Z=this.data.contentsObj)==null?void 0:Z.str)||this.data.richText)&&this._createPopup(V,this.data),this.container.append(V),this.container}_download(){var V;(V=this.downloadManager)==null||V.openOrDownloadData(this.container,this.content,this.filename)}}const Lt=class{static render(V){var vt,st;const{annotations:M,div:Z,viewport:te,accessibilityManager:xe}=V;Yt(this,_t,Sa).call(this,Z,te);let at=0;for(const rt of M){if(rt.annotationType!==v.AnnotationType.POPUP){const{width:ot,height:$t}=ee(rt.rect);if(ot<=0||$t<=0)continue}const ht=re.create({data:rt,layer:Z,page:V.page,viewport:te,linkService:V.linkService,downloadManager:V.downloadManager,imageResourcesPath:V.imageResourcesPath||"",renderForms:V.renderForms!==!1,svgFactory:new b.DOMSVGFactory,annotationStorage:V.annotationStorage||new _.AnnotationStorage,enableScripting:V.enableScripting,hasJSActions:V.hasJSActions,fieldObjects:V.fieldObjects,mouseState:V.mouseState||{isDown:!1}});if(ht.isRenderable){const ot=ht.render();if(rt.hidden&&(ot.style.visibility="hidden"),Array.isArray(ot))for(const $t of ot)$t.style.zIndex=at++,Yt(vt=Lt,Qe,xa).call(vt,$t,rt.id,Z,xe);else ot.style.zIndex=at++,ht instanceof G?Z.prepend(ot):Yt(st=Lt,Qe,xa).call(st,ot,rt.id,Z,xe)}}Yt(this,dt,Ta).call(this,Z,V.annotationCanvasMap)}static update(V){const{annotationCanvasMap:M,div:Z,viewport:te}=V;Yt(this,_t,Sa).call(this,Z,te),Yt(this,dt,Ta).call(this,Z,M),Z.hidden=!1}};let et=Lt;Qe=new WeakSet,xa=function(V,M,Z,te){const xe=V.firstChild||V;xe.id=`${b.AnnotationPrefix}${M}`,Z.append(V),te==null||te.moveElementInDOM(Z,V,xe,!1)},_t=new WeakSet,Sa=function(V,{width:M,height:Z,rotation:te}){const{style:xe}=V,at=te%180!==0,vt=Math.floor(M)+"px",st=Math.floor(Z)+"px";xe.width=at?st:vt,xe.height=at?vt:st,V.setAttribute("data-main-rotation",te)},dt=new WeakSet,Ta=function(V,M){if(!!M){for(const[Z,te]of M){const xe=V.querySelector(`[data-annotation-id="${Z}"]`);if(!xe)continue;const{firstChild:at}=xe;at?at.nodeName==="CANVAS"?at.replaceWith(te):at.before(te):xe.append(te)}M.clear()}},qt(et,Qe),qt(et,_t),qt(et,dt),d.AnnotationLayer=et},(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ColorConverters=void 0;function g(b){return Math.floor(Math.max(0,Math.min(1,b))*255).toString(16).padStart(2,"0")}class v{static CMYK_G([_,E,R,U]){return["G",1-Math.min(1,.3*_+.59*R+.11*E+U)]}static G_CMYK([_]){return["CMYK",0,0,0,1-_]}static G_RGB([_]){return["RGB",_,_,_]}static G_HTML([_]){const E=g(_);return`#${E}${E}${E}`}static RGB_G([_,E,R]){return["G",.3*_+.59*E+.11*R]}static RGB_HTML([_,E,R]){const U=g(_),P=g(E),B=g(R);return`#${U}${P}${B}`}static T_HTML(){return"#00000000"}static CMYK_RGB([_,E,R,U]){return["RGB",1-Math.min(1,_+U),1-Math.min(1,R+U),1-Math.min(1,E+U)]}static CMYK_HTML(_){const E=this.CMYK_RGB(_).slice(1);return this.RGB_HTML(E)}static RGB_CMYK([_,E,R]){const U=1-_,P=1-E,B=1-R,ee=Math.min(U,P,B);return["CMYK",U,P,B,ee]}}d.ColorConverters=v},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.XfaLayer=void 0;var v=g(19);class b{static setupStorage(E,R,U,P,B){const ee=P.getValue(R,{value:null});switch(U.name){case"textarea":if(ee.value!==null&&(E.textContent=ee.value),B==="print")break;E.addEventListener("input",re=>{P.setValue(R,{value:re.target.value})});break;case"input":if(U.attributes.type==="radio"||U.attributes.type==="checkbox"){if(ee.value===U.attributes.xfaOn?E.setAttribute("checked",!0):ee.value===U.attributes.xfaOff&&E.removeAttribute("checked"),B==="print")break;E.addEventListener("change",re=>{P.setValue(R,{value:re.target.checked?re.target.getAttribute("xfaOn"):re.target.getAttribute("xfaOff")})})}else{if(ee.value!==null&&E.setAttribute("value",ee.value),B==="print")break;E.addEventListener("input",re=>{P.setValue(R,{value:re.target.value})})}break;case"select":if(ee.value!==null)for(const re of U.children)re.attributes.value===ee.value&&(re.attributes.selected=!0);E.addEventListener("input",re=>{const ne=re.target.options,j=ne.selectedIndex===-1?"":ne[ne.selectedIndex].value;P.setValue(R,{value:j})});break}}static setAttributes({html:E,element:R,storage:U=null,intent:P,linkService:B}){const{attributes:ee}=R,re=E instanceof HTMLAnchorElement;ee.type==="radio"&&(ee.name=`${ee.name}-${P}`);for(const[ne,j]of Object.entries(ee))if(j!=null)switch(ne){case"class":j.length&&E.setAttribute(ne,j.join(" "));break;case"dataId":break;case"id":E.setAttribute("data-element-id",j);break;case"style":Object.assign(E.style,j);break;case"textContent":E.textContent=j;break;default:(!re||ne!=="href"&&ne!=="newWindow")&&E.setAttribute(ne,j)}re&&B.addLinkAttributes(E,ee.href,ee.newWindow),U&&ee.dataId&&this.setupStorage(E,ee.dataId,R,U)}static render(E){var z;const R=E.annotationStorage,U=E.linkService,P=E.xfaHtml,B=E.intent||"display",ee=document.createElement(P.name);P.attributes&&this.setAttributes({html:ee,element:P,intent:B,linkService:U});const re=[[P,-1,ee]],ne=E.div;if(ne.append(ee),E.viewport){const W=`matrix(${E.viewport.transform.join(",")})`;ne.style.transform=W}B!=="richText"&&ne.setAttribute("class","xfaLayer xfaFont");const j=[];for(;re.length>0;){const[W,O,Y]=re.at(-1);if(O+1===W.children.length){re.pop();continue}const Q=W.children[++re.at(-1)[1]];if(Q===null)continue;const{name:X}=Q;if(X==="#text"){const G=document.createTextNode(Q.value);j.push(G),Y.append(G);continue}let H;if((z=Q==null?void 0:Q.attributes)!=null&&z.xmlns?H=document.createElementNS(Q.attributes.xmlns,X):H=document.createElement(X),Y.append(H),Q.attributes&&this.setAttributes({html:H,element:Q,storage:R,intent:B,linkService:U}),Q.children&&Q.children.length>0)re.push([Q,-1,H]);else if(Q.value){const G=document.createTextNode(Q.value);v.XfaText.shouldBuildText(X)&&j.push(G),H.append(G)}}for(const W of ne.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))W.setAttribute("readOnly",!0);return{textDivs:j}}static update(E){const R=`matrix(${E.viewport.transform.join(",")})`;E.div.style.transform=R,E.div.hidden=!1}}d.XfaLayer=b},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TextLayerRenderTask=void 0,d.renderTextLayer=ne;var v=g(1),b=g(6);const _=1e5,E=30,R=.8,U=new Map;function P(j,z){const W=U.get(j);if(W)return W;z.save(),z.font=`${E}px ${j}`;const O=z.measureText("");let Y=O.fontBoundingBoxAscent,Q=Math.abs(O.fontBoundingBoxDescent);if(Y){z.restore();const H=Y/(Y+Q);return U.set(j,H),H}z.strokeStyle="red",z.clearRect(0,0,E,E),z.strokeText("g",0,0);let X=z.getImageData(0,0,E,E).data;Q=0;for(let H=X.length-1-3;H>=0;H-=4)if(X[H]>0){Q=Math.ceil(H/4/E);break}z.clearRect(0,0,E,E),z.strokeText("A",0,E),X=z.getImageData(0,0,E,E).data,Y=0;for(let H=0,G=X.length;H<G;H+=4)if(X[H]>0){Y=E-Math.floor(H/4/E);break}if(z.restore(),Y){const H=Y/(Y+Q);return U.set(j,H),H}return U.set(j,R),R}function B(j,z,W,O){const Y=document.createElement("span"),Q={angle:0,canvasWidth:0,hasText:z.str!=="",hasEOL:z.hasEOL,fontSize:0};j._textDivs.push(Y);const X=v.Util.transform(j._viewport.transform,z.transform);let H=Math.atan2(X[1],X[0]);const G=W[z.fontName];G.vertical&&(H+=Math.PI/2);const ie=Math.hypot(X[2],X[3]),Ee=ie*P(G.fontFamily,O);let be,Ce;H===0?(be=X[4],Ce=X[5]-Ee):(be=X[4]+Ee*Math.sin(H),Ce=X[5]-Ee*Math.cos(H)),Y.style.left=`${be}px`,Y.style.top=`${Ce}px`,Y.style.fontSize=`${ie}px`,Y.style.fontFamily=G.fontFamily,Q.fontSize=ie,Y.setAttribute("role","presentation"),Y.textContent=z.str,Y.dir=z.dir,j._fontInspectorEnabled&&(Y.dataset.fontName=z.fontName),H!==0&&(Q.angle=H*(180/Math.PI));let Oe=!1;if(z.str.length>1)Oe=!0;else if(z.str!==" "&&z.transform[0]!==z.transform[3]){const mt=Math.abs(z.transform[0]),Tt=Math.abs(z.transform[3]);mt!==Tt&&Math.max(mt,Tt)/Math.min(mt,Tt)>1.5&&(Oe=!0)}Oe&&(G.vertical?Q.canvasWidth=z.height*j._viewport.scale:Q.canvasWidth=z.width*j._viewport.scale),j._textDivProperties.set(Y,Q),j._textContentStream&&j._layoutText(Y)}function ee(j){if(j._canceled)return;const z=j._textDivs,W=j._capability;if(z.length>_){j._renderingDone=!0,W.resolve();return}if(!j._textContentStream)for(const Y of z)j._layoutText(Y);j._renderingDone=!0,W.resolve()}class re{constructor({textContent:z,textContentStream:W,container:O,viewport:Y,textDivs:Q,textContentItemsStr:X}){var H;this._textContent=z,this._textContentStream=W,this._container=O,this._document=O.ownerDocument,this._viewport=Y,this._textDivs=Q||[],this._textContentItemsStr=X||[],this._fontInspectorEnabled=!!((H=globalThis.FontInspector)!=null&&H.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,v.createPromiseCapability)(),this._renderTimer=null,this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._textDivProperties=null,this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new v.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(z,W){for(const O of z){if(O.str===void 0){if(O.type==="beginMarkedContentProps"||O.type==="beginMarkedContent"){const Y=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),O.id!==null&&this._container.setAttribute("id",`${O.id}`),Y.append(this._container)}else O.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(O.str),B(this,O,W,this._layoutTextCtx)}}_layoutText(z){const W=this._textDivProperties.get(z);let O="";if(W.canvasWidth!==0&&W.hasText){const{fontFamily:Y}=z.style,{fontSize:Q}=W;(Q!==this._layoutTextLastFontSize||Y!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${Q*this._devicePixelRatio}px ${Y}`,this._layoutTextLastFontSize=Q,this._layoutTextLastFontFamily=Y);const{width:X}=this._layoutTextCtx.measureText(z.textContent);X>0&&(O=`scaleX(${this._devicePixelRatio*W.canvasWidth/X})`)}if(W.angle!==0&&(O=`rotate(${W.angle}deg) ${O}`),O.length>0&&(z.style.transform=O),W.hasText&&this._container.append(z),W.hasEOL){const Y=document.createElement("br");Y.setAttribute("role","presentation"),this._container.append(Y)}}_render(z=0){const W=(0,v.createPromiseCapability)();let O=Object.create(null);const Y=this._document.createElement("canvas");if(Y.height=Y.width=E,this._layoutTextCtx=Y.getContext("2d",{alpha:!1}),this._textContent){const Q=this._textContent.items,X=this._textContent.styles;this._processItems(Q,X),W.resolve()}else if(this._textContentStream){const Q=()=>{this._reader.read().then(({value:X,done:H})=>{if(H){W.resolve();return}Object.assign(O,X.styles),this._processItems(X.items,O),Q()},W.reject)};this._reader=this._textContentStream.getReader(),Q()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');W.promise.then(()=>{O=null,z?((0,b.deprecated)("The TextLayerRender `timeout` parameter will be removed in the future, since streaming of textContent has made it obsolete."),this._renderTimer=setTimeout(()=>{ee(this),this._renderTimer=null},z)):ee(this)},this._capability.reject)}}d.TextLayerRenderTask=re;function ne(j){const z=new re({textContent:j.textContent,textContentStream:j.textContentStream,container:j.container,viewport:j.viewport,textDivs:j.textDivs,textContentItemsStr:j.textContentItemsStr});return z._render(j.timeout),z}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.SVGGraphics=void 0;var v=g(6),b=g(1),_=g(12);let E=class{constructor(){(0,b.unreachable)("Not implemented: SVGGraphics")}};d.SVGGraphics=E;{let z=function(H){let G=[];const ie=[];for(const Ee of H){if(Ee.fn==="save"){G.push({fnId:92,fn:"group",items:[]}),ie.push(G),G=G.at(-1).items;continue}Ee.fn==="restore"?G=ie.pop():G.push(Ee)}return G},W=function(H){if(Number.isInteger(H))return H.toString();const G=H.toFixed(10);let ie=G.length-1;if(G[ie]!=="0")return G;do ie--;while(G[ie]==="0");return G.substring(0,G[ie]==="."?ie:ie+1)},O=function(H){if(H[4]===0&&H[5]===0){if(H[1]===0&&H[2]===0)return H[0]===1&&H[3]===1?"":`scale(${W(H[0])} ${W(H[3])})`;if(H[0]===H[3]&&H[1]===-H[2]){const G=Math.acos(H[0])*180/Math.PI;return`rotate(${W(G)})`}}else if(H[0]===1&&H[1]===0&&H[2]===0&&H[3]===1)return`translate(${W(H[4])} ${W(H[5])})`;return`matrix(${W(H[0])} ${W(H[1])} ${W(H[2])} ${W(H[3])} ${W(H[4])} ${W(H[5])})`};const R={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},U="http://www.w3.org/XML/1998/namespace",P="http://www.w3.org/1999/xlink",B=["butt","round","square"],ee=["miter","round","bevel"],re=function(H,G="",ie=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!ie)return URL.createObjectURL(new Blob([H],{type:G}));const Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let be=`data:${G};base64,`;for(let Ce=0,Oe=H.length;Ce<Oe;Ce+=3){const mt=H[Ce]&255,Tt=H[Ce+1]&255,St=H[Ce+2]&255,ft=mt>>2,ut=(mt&3)<<4|Tt>>4,wt=Ce+1<Oe?(Tt&15)<<2|St>>6:64,Et=Ce+2<Oe?St&63:64;be+=Ee[ft]+Ee[ut]+Ee[wt]+Ee[Et]}return be},ne=function(){const H=new Uint8Array([137,80,78,71,13,10,26,10]),G=12,ie=new Int32Array(256);for(let St=0;St<256;St++){let ft=St;for(let ut=0;ut<8;ut++)ft&1?ft=3988292384^ft>>1&2147483647:ft=ft>>1&2147483647;ie[St]=ft}function Ee(St,ft,ut){let wt=-1;for(let Et=ft;Et<ut;Et++){const Pt=(wt^St[Et])&255,Mt=ie[Pt];wt=wt>>>8^Mt}return wt^-1}function be(St,ft,ut,wt){let Et=wt;const Pt=ft.length;ut[Et]=Pt>>24&255,ut[Et+1]=Pt>>16&255,ut[Et+2]=Pt>>8&255,ut[Et+3]=Pt&255,Et+=4,ut[Et]=St.charCodeAt(0)&255,ut[Et+1]=St.charCodeAt(1)&255,ut[Et+2]=St.charCodeAt(2)&255,ut[Et+3]=St.charCodeAt(3)&255,Et+=4,ut.set(ft,Et),Et+=ft.length;const Mt=Ee(ut,wt+4,Et);ut[Et]=Mt>>24&255,ut[Et+1]=Mt>>16&255,ut[Et+2]=Mt>>8&255,ut[Et+3]=Mt&255}function Ce(St,ft,ut){let wt=1,Et=0;for(let Pt=ft;Pt<ut;++Pt)wt=(wt+(St[Pt]&255))%65521,Et=(Et+wt)%65521;return Et<<16|wt}function Oe(St){if(!_.isNodeJS)return mt(St);try{let ft;parseInt(process.versions.node)>=8?ft=St:ft=Buffer.from(St);const ut=require$$5.deflateSync(ft,{level:9});return ut instanceof Uint8Array?ut:new Uint8Array(ut)}catch(ft){(0,b.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ft)}return mt(St)}function mt(St){let ft=St.length;const ut=65535,wt=Math.ceil(ft/ut),Et=new Uint8Array(2+ft+wt*5+4);let Pt=0;Et[Pt++]=120,Et[Pt++]=156;let Mt=0;for(;ft>ut;)Et[Pt++]=0,Et[Pt++]=255,Et[Pt++]=255,Et[Pt++]=0,Et[Pt++]=0,Et.set(St.subarray(Mt,Mt+ut),Pt),Pt+=ut,Mt+=ut,ft-=ut;Et[Pt++]=1,Et[Pt++]=ft&255,Et[Pt++]=ft>>8&255,Et[Pt++]=~ft&65535&255,Et[Pt++]=(~ft&65535)>>8&255,Et.set(St.subarray(Mt),Pt),Pt+=St.length-Mt;const Bt=Ce(St,0,St.length);return Et[Pt++]=Bt>>24&255,Et[Pt++]=Bt>>16&255,Et[Pt++]=Bt>>8&255,Et[Pt++]=Bt&255,Et}function Tt(St,ft,ut,wt){const Et=St.width,Pt=St.height;let Mt,Bt,et;const Pe=St.data;switch(ft){case b.ImageKind.GRAYSCALE_1BPP:Bt=0,Mt=1,et=Et+7>>3;break;case b.ImageKind.RGB_24BPP:Bt=2,Mt=8,et=Et*3;break;case b.ImageKind.RGBA_32BPP:Bt=6,Mt=8,et=Et*4;break;default:throw new Error("invalid format")}const oe=new Uint8Array((1+et)*Pt);let Ye=0,tt=0;for(let dt=0;dt<Pt;++dt)oe[Ye++]=0,oe.set(Pe.subarray(tt,tt+et),Ye),tt+=et,Ye+=et;if(ft===b.ImageKind.GRAYSCALE_1BPP&&wt){Ye=0;for(let dt=0;dt<Pt;dt++){Ye++;for(let xt=0;xt<et;xt++)oe[Ye++]^=255}}const Ze=new Uint8Array([Et>>24&255,Et>>16&255,Et>>8&255,Et&255,Pt>>24&255,Pt>>16&255,Pt>>8&255,Pt&255,Mt,Bt,0,0,0]),Qe=Oe(oe),lt=H.length+G*3+Ze.length+Qe.length,_t=new Uint8Array(lt);let Nt=0;return _t.set(H,Nt),Nt+=H.length,be("IHDR",Ze,_t,Nt),Nt+=G+Ze.length,be("IDATA",Qe,_t,Nt),Nt+=G+Qe.length,be("IEND",new Uint8Array(0),_t,Nt),re(_t,"image/png",ut)}return function(ft,ut,wt){const Et=ft.kind===void 0?b.ImageKind.GRAYSCALE_1BPP:ft.kind;return Tt(ft,Et,ut,wt)}}();class j{constructor(){this.fontSizeScale=1,this.fontWeight=R.fontWeight,this.fontSize=0,this.textMatrix=b.IDENTITY_MATRIX,this.fontMatrix=b.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=b.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=R.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(G,ie){this.x=G,this.y=ie}}let Y=0,Q=0,X=0;d.SVGGraphics=E=class{constructor(H,G,ie=!1){(0,v.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new v.DOMSVGFactory,this.current=new j,this.transformMatrix=b.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=H,this.objs=G,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!ie,this._operatorIdMapping=[];for(const Ee in b.OPS)this._operatorIdMapping[b.OPS[Ee]]=Ee}getObject(H,G=null){return typeof H=="string"?H.startsWith("g_")?this.commonObjs.get(H):this.objs.get(H):G}save(){this.transformStack.push(this.transformMatrix);const H=this.current;this.extraStack.push(H),this.current=H.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(H){this.save(),this.executeOpTree(H),this.restore()}loadDependencies(H){const G=H.fnArray,ie=H.argsArray;for(let Ee=0,be=G.length;Ee<be;Ee++)if(G[Ee]===b.OPS.dependency)for(const Ce of ie[Ee]){const Oe=Ce.startsWith("g_")?this.commonObjs:this.objs,mt=new Promise(Tt=>{Oe.get(Ce,Tt)});this.current.dependencies.push(mt)}return Promise.all(this.current.dependencies)}transform(H,G,ie,Ee,be,Ce){const Oe=[H,G,ie,Ee,be,Ce];this.transformMatrix=b.Util.transform(this.transformMatrix,Oe),this.tgrp=null}getSVG(H,G){this.viewport=G;const ie=this._initialize(G);return this.loadDependencies(H).then(()=>(this.transformMatrix=b.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(H)),ie))}convertOpList(H){const G=this._operatorIdMapping,ie=H.argsArray,Ee=H.fnArray,be=[];for(let Ce=0,Oe=Ee.length;Ce<Oe;Ce++){const mt=Ee[Ce];be.push({fnId:mt,fn:G[mt],args:ie[Ce]})}return z(be)}executeOpTree(H){for(const G of H){const ie=G.fn,Ee=G.fnId,be=G.args;switch(Ee|0){case b.OPS.beginText:this.beginText();break;case b.OPS.dependency:break;case b.OPS.setLeading:this.setLeading(be);break;case b.OPS.setLeadingMoveText:this.setLeadingMoveText(be[0],be[1]);break;case b.OPS.setFont:this.setFont(be);break;case b.OPS.showText:this.showText(be[0]);break;case b.OPS.showSpacedText:this.showText(be[0]);break;case b.OPS.endText:this.endText();break;case b.OPS.moveText:this.moveText(be[0],be[1]);break;case b.OPS.setCharSpacing:this.setCharSpacing(be[0]);break;case b.OPS.setWordSpacing:this.setWordSpacing(be[0]);break;case b.OPS.setHScale:this.setHScale(be[0]);break;case b.OPS.setTextMatrix:this.setTextMatrix(be[0],be[1],be[2],be[3],be[4],be[5]);break;case b.OPS.setTextRise:this.setTextRise(be[0]);break;case b.OPS.setTextRenderingMode:this.setTextRenderingMode(be[0]);break;case b.OPS.setLineWidth:this.setLineWidth(be[0]);break;case b.OPS.setLineJoin:this.setLineJoin(be[0]);break;case b.OPS.setLineCap:this.setLineCap(be[0]);break;case b.OPS.setMiterLimit:this.setMiterLimit(be[0]);break;case b.OPS.setFillRGBColor:this.setFillRGBColor(be[0],be[1],be[2]);break;case b.OPS.setStrokeRGBColor:this.setStrokeRGBColor(be[0],be[1],be[2]);break;case b.OPS.setStrokeColorN:this.setStrokeColorN(be);break;case b.OPS.setFillColorN:this.setFillColorN(be);break;case b.OPS.shadingFill:this.shadingFill(be[0]);break;case b.OPS.setDash:this.setDash(be[0],be[1]);break;case b.OPS.setRenderingIntent:this.setRenderingIntent(be[0]);break;case b.OPS.setFlatness:this.setFlatness(be[0]);break;case b.OPS.setGState:this.setGState(be[0]);break;case b.OPS.fill:this.fill();break;case b.OPS.eoFill:this.eoFill();break;case b.OPS.stroke:this.stroke();break;case b.OPS.fillStroke:this.fillStroke();break;case b.OPS.eoFillStroke:this.eoFillStroke();break;case b.OPS.clip:this.clip("nonzero");break;case b.OPS.eoClip:this.clip("evenodd");break;case b.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case b.OPS.paintImageXObject:this.paintImageXObject(be[0]);break;case b.OPS.paintInlineImageXObject:this.paintInlineImageXObject(be[0]);break;case b.OPS.paintImageMaskXObject:this.paintImageMaskXObject(be[0]);break;case b.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(be[0],be[1]);break;case b.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case b.OPS.closePath:this.closePath();break;case b.OPS.closeStroke:this.closeStroke();break;case b.OPS.closeFillStroke:this.closeFillStroke();break;case b.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case b.OPS.nextLine:this.nextLine();break;case b.OPS.transform:this.transform(be[0],be[1],be[2],be[3],be[4],be[5]);break;case b.OPS.constructPath:this.constructPath(be[0],be[1]);break;case b.OPS.endPath:this.endPath();break;case 92:this.group(G.items);break;default:(0,b.warn)(`Unimplemented operator ${ie}`);break}}}setWordSpacing(H){this.current.wordSpacing=H}setCharSpacing(H){this.current.charSpacing=H}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(H,G,ie,Ee,be,Ce){const Oe=this.current;Oe.textMatrix=Oe.lineMatrix=[H,G,ie,Ee,be,Ce],Oe.textMatrixScale=Math.hypot(H,G),Oe.x=Oe.lineX=0,Oe.y=Oe.lineY=0,Oe.xcoords=[],Oe.ycoords=[],Oe.tspan=this.svgFactory.createElement("svg:tspan"),Oe.tspan.setAttributeNS(null,"font-family",Oe.fontFamily),Oe.tspan.setAttributeNS(null,"font-size",`${W(Oe.fontSize)}px`),Oe.tspan.setAttributeNS(null,"y",W(-Oe.y)),Oe.txtElement=this.svgFactory.createElement("svg:text"),Oe.txtElement.append(Oe.tspan)}beginText(){const H=this.current;H.x=H.lineX=0,H.y=H.lineY=0,H.textMatrix=b.IDENTITY_MATRIX,H.lineMatrix=b.IDENTITY_MATRIX,H.textMatrixScale=1,H.tspan=this.svgFactory.createElement("svg:tspan"),H.txtElement=this.svgFactory.createElement("svg:text"),H.txtgrp=this.svgFactory.createElement("svg:g"),H.xcoords=[],H.ycoords=[]}moveText(H,G){const ie=this.current;ie.x=ie.lineX+=H,ie.y=ie.lineY+=G,ie.xcoords=[],ie.ycoords=[],ie.tspan=this.svgFactory.createElement("svg:tspan"),ie.tspan.setAttributeNS(null,"font-family",ie.fontFamily),ie.tspan.setAttributeNS(null,"font-size",`${W(ie.fontSize)}px`),ie.tspan.setAttributeNS(null,"y",W(-ie.y))}showText(H){const G=this.current,ie=G.font,Ee=G.fontSize;if(Ee===0)return;const be=G.fontSizeScale,Ce=G.charSpacing,Oe=G.wordSpacing,mt=G.fontDirection,Tt=G.textHScale*mt,St=ie.vertical,ft=St?1:-1,ut=ie.defaultVMetrics,wt=Ee*G.fontMatrix[0];let Et=0;for(const Bt of H){if(Bt===null){Et+=mt*Oe;continue}else if(typeof Bt=="number"){Et+=ft*Bt*Ee/1e3;continue}const et=(Bt.isSpace?Oe:0)+Ce,Pe=Bt.fontChar;let oe,Ye,tt=Bt.width;if(St){let Qe;const lt=Bt.vmetric||ut;Qe=Bt.vmetric?lt[1]:tt*.5,Qe=-Qe*wt;const _t=lt[2]*wt;tt=lt?-lt[0]:tt,oe=Qe/be,Ye=(Et+_t)/be}else oe=Et/be,Ye=0;(Bt.isInFont||ie.missingFile)&&(G.xcoords.push(G.x+oe),St&&G.ycoords.push(-G.y+Ye),G.tspan.textContent+=Pe);let Ze;St?Ze=tt*wt-et*mt:Ze=tt*wt+et*mt,Et+=Ze}G.tspan.setAttributeNS(null,"x",G.xcoords.map(W).join(" ")),St?G.tspan.setAttributeNS(null,"y",G.ycoords.map(W).join(" ")):G.tspan.setAttributeNS(null,"y",W(-G.y)),St?G.y-=Et:G.x+=Et*Tt,G.tspan.setAttributeNS(null,"font-family",G.fontFamily),G.tspan.setAttributeNS(null,"font-size",`${W(G.fontSize)}px`),G.fontStyle!==R.fontStyle&&G.tspan.setAttributeNS(null,"font-style",G.fontStyle),G.fontWeight!==R.fontWeight&&G.tspan.setAttributeNS(null,"font-weight",G.fontWeight);const Pt=G.textRenderingMode&b.TextRenderingMode.FILL_STROKE_MASK;if(Pt===b.TextRenderingMode.FILL||Pt===b.TextRenderingMode.FILL_STROKE?(G.fillColor!==R.fillColor&&G.tspan.setAttributeNS(null,"fill",G.fillColor),G.fillAlpha<1&&G.tspan.setAttributeNS(null,"fill-opacity",G.fillAlpha)):G.textRenderingMode===b.TextRenderingMode.ADD_TO_PATH?G.tspan.setAttributeNS(null,"fill","transparent"):G.tspan.setAttributeNS(null,"fill","none"),Pt===b.TextRenderingMode.STROKE||Pt===b.TextRenderingMode.FILL_STROKE){const Bt=1/(G.textMatrixScale||1);this._setStrokeAttributes(G.tspan,Bt)}let Mt=G.textMatrix;G.textRise!==0&&(Mt=Mt.slice(),Mt[5]+=G.textRise),G.txtElement.setAttributeNS(null,"transform",`${O(Mt)} scale(${W(Tt)}, -1)`),G.txtElement.setAttributeNS(U,"xml:space","preserve"),G.txtElement.append(G.tspan),G.txtgrp.append(G.txtElement),this._ensureTransformGroup().append(G.txtElement)}setLeadingMoveText(H,G){this.setLeading(-G),this.moveText(H,G)}addFontStyle(H){if(!H.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const G=re(H.data,H.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${H.loadedName}"; src: url(${G}); }
`}setFont(H){const G=this.current,ie=this.commonObjs.get(H[0]);let Ee=H[1];G.font=ie,this.embedFonts&&!ie.missingFile&&!this.embeddedFonts[ie.loadedName]&&(this.addFontStyle(ie),this.embeddedFonts[ie.loadedName]=ie),G.fontMatrix=ie.fontMatrix||b.FONT_IDENTITY_MATRIX;let be="normal";ie.black?be="900":ie.bold&&(be="bold");const Ce=ie.italic?"italic":"normal";Ee<0?(Ee=-Ee,G.fontDirection=-1):G.fontDirection=1,G.fontSize=Ee,G.fontFamily=ie.loadedName,G.fontWeight=be,G.fontStyle=Ce,G.tspan=this.svgFactory.createElement("svg:tspan"),G.tspan.setAttributeNS(null,"y",W(-G.y)),G.xcoords=[],G.ycoords=[]}endText(){var G;const H=this.current;H.textRenderingMode&b.TextRenderingMode.ADD_TO_PATH_FLAG&&((G=H.txtElement)==null?void 0:G.hasChildNodes())&&(H.element=H.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(H){H>0&&(this.current.lineWidth=H)}setLineCap(H){this.current.lineCap=B[H]}setLineJoin(H){this.current.lineJoin=ee[H]}setMiterLimit(H){this.current.miterLimit=H}setStrokeAlpha(H){this.current.strokeAlpha=H}setStrokeRGBColor(H,G,ie){this.current.strokeColor=b.Util.makeHexColor(H,G,ie)}setFillAlpha(H){this.current.fillAlpha=H}setFillRGBColor(H,G,ie){this.current.fillColor=b.Util.makeHexColor(H,G,ie),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(H){this.current.strokeColor=this._makeColorN_Pattern(H)}setFillColorN(H){this.current.fillColor=this._makeColorN_Pattern(H)}shadingFill(H){const G=this.viewport.width,ie=this.viewport.height,Ee=b.Util.inverseTransform(this.transformMatrix),be=b.Util.applyTransform([0,0],Ee),Ce=b.Util.applyTransform([0,ie],Ee),Oe=b.Util.applyTransform([G,0],Ee),mt=b.Util.applyTransform([G,ie],Ee),Tt=Math.min(be[0],Ce[0],Oe[0],mt[0]),St=Math.min(be[1],Ce[1],Oe[1],mt[1]),ft=Math.max(be[0],Ce[0],Oe[0],mt[0]),ut=Math.max(be[1],Ce[1],Oe[1],mt[1]),wt=this.svgFactory.createElement("svg:rect");wt.setAttributeNS(null,"x",Tt),wt.setAttributeNS(null,"y",St),wt.setAttributeNS(null,"width",ft-Tt),wt.setAttributeNS(null,"height",ut-St),wt.setAttributeNS(null,"fill",this._makeShadingPattern(H)),this.current.fillAlpha<1&&wt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(wt)}_makeColorN_Pattern(H){return H[0]==="TilingPattern"?this._makeTilingPattern(H):this._makeShadingPattern(H)}_makeTilingPattern(H){const G=H[1],ie=H[2],Ee=H[3]||b.IDENTITY_MATRIX,[be,Ce,Oe,mt]=H[4],Tt=H[5],St=H[6],ft=H[7],ut=`shading${X++}`,[wt,Et,Pt,Mt]=b.Util.normalizeRect([...b.Util.applyTransform([be,Ce],Ee),...b.Util.applyTransform([Oe,mt],Ee)]),[Bt,et]=b.Util.singularValueDecompose2dScale(Ee),Pe=Tt*Bt,oe=St*et,Ye=this.svgFactory.createElement("svg:pattern");Ye.setAttributeNS(null,"id",ut),Ye.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Ye.setAttributeNS(null,"width",Pe),Ye.setAttributeNS(null,"height",oe),Ye.setAttributeNS(null,"x",`${wt}`),Ye.setAttributeNS(null,"y",`${Et}`);const tt=this.svg,Ze=this.transformMatrix,Qe=this.current.fillColor,lt=this.current.strokeColor,_t=this.svgFactory.create(Pt-wt,Mt-Et);if(this.svg=_t,this.transformMatrix=Ee,ft===2){const Nt=b.Util.makeHexColor(...G);this.current.fillColor=Nt,this.current.strokeColor=Nt}return this.executeOpTree(this.convertOpList(ie)),this.svg=tt,this.transformMatrix=Ze,this.current.fillColor=Qe,this.current.strokeColor=lt,Ye.append(_t.childNodes[0]),this.defs.append(Ye),`url(#${ut})`}_makeShadingPattern(H){switch(typeof H=="string"&&(H=this.objs.get(H)),H[0]){case"RadialAxial":const G=`shading${X++}`,ie=H[3];let Ee;switch(H[1]){case"axial":const be=H[4],Ce=H[5];Ee=this.svgFactory.createElement("svg:linearGradient"),Ee.setAttributeNS(null,"id",G),Ee.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Ee.setAttributeNS(null,"x1",be[0]),Ee.setAttributeNS(null,"y1",be[1]),Ee.setAttributeNS(null,"x2",Ce[0]),Ee.setAttributeNS(null,"y2",Ce[1]);break;case"radial":const Oe=H[4],mt=H[5],Tt=H[6],St=H[7];Ee=this.svgFactory.createElement("svg:radialGradient"),Ee.setAttributeNS(null,"id",G),Ee.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Ee.setAttributeNS(null,"cx",mt[0]),Ee.setAttributeNS(null,"cy",mt[1]),Ee.setAttributeNS(null,"r",St),Ee.setAttributeNS(null,"fx",Oe[0]),Ee.setAttributeNS(null,"fy",Oe[1]),Ee.setAttributeNS(null,"fr",Tt);break;default:throw new Error(`Unknown RadialAxial type: ${H[1]}`)}for(const be of ie){const Ce=this.svgFactory.createElement("svg:stop");Ce.setAttributeNS(null,"offset",be[0]),Ce.setAttributeNS(null,"stop-color",be[1]),Ee.append(Ce)}return this.defs.append(Ee),`url(#${G})`;case"Mesh":return(0,b.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${H[0]}`)}}setDash(H,G){this.current.dashArray=H,this.current.dashPhase=G}constructPath(H,G){const ie=this.current;let Ee=ie.x,be=ie.y,Ce=[],Oe=0;for(const mt of H)switch(mt|0){case b.OPS.rectangle:Ee=G[Oe++],be=G[Oe++];const Tt=G[Oe++],St=G[Oe++],ft=Ee+Tt,ut=be+St;Ce.push("M",W(Ee),W(be),"L",W(ft),W(be),"L",W(ft),W(ut),"L",W(Ee),W(ut),"Z");break;case b.OPS.moveTo:Ee=G[Oe++],be=G[Oe++],Ce.push("M",W(Ee),W(be));break;case b.OPS.lineTo:Ee=G[Oe++],be=G[Oe++],Ce.push("L",W(Ee),W(be));break;case b.OPS.curveTo:Ee=G[Oe+4],be=G[Oe+5],Ce.push("C",W(G[Oe]),W(G[Oe+1]),W(G[Oe+2]),W(G[Oe+3]),W(Ee),W(be)),Oe+=6;break;case b.OPS.curveTo2:Ce.push("C",W(Ee),W(be),W(G[Oe]),W(G[Oe+1]),W(G[Oe+2]),W(G[Oe+3])),Ee=G[Oe+2],be=G[Oe+3],Oe+=4;break;case b.OPS.curveTo3:Ee=G[Oe+2],be=G[Oe+3],Ce.push("C",W(G[Oe]),W(G[Oe+1]),W(Ee),W(be),W(Ee),W(be)),Oe+=4;break;case b.OPS.closePath:Ce.push("Z");break}Ce=Ce.join(" "),ie.path&&H.length>0&&H[0]!==b.OPS.rectangle&&H[0]!==b.OPS.moveTo?Ce=ie.path.getAttributeNS(null,"d")+Ce:(ie.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(ie.path)),ie.path.setAttributeNS(null,"d",Ce),ie.path.setAttributeNS(null,"fill","none"),ie.element=ie.path,ie.setCurrentPoint(Ee,be)}endPath(){const H=this.current;if(H.path=null,!this.pendingClip)return;if(!H.element){this.pendingClip=null;return}const G=`clippath${Y++}`,ie=this.svgFactory.createElement("svg:clipPath");ie.setAttributeNS(null,"id",G),ie.setAttributeNS(null,"transform",O(this.transformMatrix));const Ee=H.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Ee.setAttributeNS(null,"clip-rule","evenodd"):Ee.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,ie.append(Ee),this.defs.append(ie),H.activeClipUrl){H.clipGroup=null;for(const be of this.extraStack)be.clipGroup=null;ie.setAttributeNS(null,"clip-path",H.activeClipUrl)}H.activeClipUrl=`url(#${G})`,this.tgrp=null}clip(H){this.pendingClip=H}closePath(){const H=this.current;if(H.path){const G=`${H.path.getAttributeNS(null,"d")}Z`;H.path.setAttributeNS(null,"d",G)}}setLeading(H){this.current.leading=-H}setTextRise(H){this.current.textRise=H}setTextRenderingMode(H){this.current.textRenderingMode=H}setHScale(H){this.current.textHScale=H/100}setRenderingIntent(H){}setFlatness(H){}setGState(H){for(const[G,ie]of H)switch(G){case"LW":this.setLineWidth(ie);break;case"LC":this.setLineCap(ie);break;case"LJ":this.setLineJoin(ie);break;case"ML":this.setMiterLimit(ie);break;case"D":this.setDash(ie[0],ie[1]);break;case"RI":this.setRenderingIntent(ie);break;case"FL":this.setFlatness(ie);break;case"Font":this.setFont(ie);break;case"CA":this.setStrokeAlpha(ie);break;case"ca":this.setFillAlpha(ie);break;default:(0,b.warn)(`Unimplemented graphic state operator ${G}`);break}}fill(){const H=this.current;H.element&&(H.element.setAttributeNS(null,"fill",H.fillColor),H.element.setAttributeNS(null,"fill-opacity",H.fillAlpha),this.endPath())}stroke(){const H=this.current;H.element&&(this._setStrokeAttributes(H.element),H.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(H,G=1){const ie=this.current;let Ee=ie.dashArray;G!==1&&Ee.length>0&&(Ee=Ee.map(function(be){return G*be})),H.setAttributeNS(null,"stroke",ie.strokeColor),H.setAttributeNS(null,"stroke-opacity",ie.strokeAlpha),H.setAttributeNS(null,"stroke-miterlimit",W(ie.miterLimit)),H.setAttributeNS(null,"stroke-linecap",ie.lineCap),H.setAttributeNS(null,"stroke-linejoin",ie.lineJoin),H.setAttributeNS(null,"stroke-width",W(G*ie.lineWidth)+"px"),H.setAttributeNS(null,"stroke-dasharray",Ee.map(W).join(" ")),H.setAttributeNS(null,"stroke-dashoffset",W(G*ie.dashPhase)+"px")}eoFill(){var H;(H=this.current.element)==null||H.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var H;(H=this.current.element)==null||H.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x","0"),H.setAttributeNS(null,"y","0"),H.setAttributeNS(null,"width","1px"),H.setAttributeNS(null,"height","1px"),H.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(H)}paintImageXObject(H){const G=this.getObject(H);if(!G){(0,b.warn)(`Dependent image with object ID ${H} is not ready yet`);return}this.paintInlineImageXObject(G)}paintInlineImageXObject(H,G){const ie=H.width,Ee=H.height,be=ne(H,this.forceDataSchema,!!G),Ce=this.svgFactory.createElement("svg:rect");Ce.setAttributeNS(null,"x","0"),Ce.setAttributeNS(null,"y","0"),Ce.setAttributeNS(null,"width",W(ie)),Ce.setAttributeNS(null,"height",W(Ee)),this.current.element=Ce,this.clip("nonzero");const Oe=this.svgFactory.createElement("svg:image");Oe.setAttributeNS(P,"xlink:href",be),Oe.setAttributeNS(null,"x","0"),Oe.setAttributeNS(null,"y",W(-Ee)),Oe.setAttributeNS(null,"width",W(ie)+"px"),Oe.setAttributeNS(null,"height",W(Ee)+"px"),Oe.setAttributeNS(null,"transform",`scale(${W(1/ie)} ${W(-1/Ee)})`),G?G.append(Oe):this._ensureTransformGroup().append(Oe)}paintImageMaskXObject(H){const G=this.getObject(H.data,H);if(G.bitmap){(0,b.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const ie=this.current,Ee=G.width,be=G.height,Ce=ie.fillColor;ie.maskId=`mask${Q++}`;const Oe=this.svgFactory.createElement("svg:mask");Oe.setAttributeNS(null,"id",ie.maskId);const mt=this.svgFactory.createElement("svg:rect");mt.setAttributeNS(null,"x","0"),mt.setAttributeNS(null,"y","0"),mt.setAttributeNS(null,"width",W(Ee)),mt.setAttributeNS(null,"height",W(be)),mt.setAttributeNS(null,"fill",Ce),mt.setAttributeNS(null,"mask",`url(#${ie.maskId})`),this.defs.append(Oe),this._ensureTransformGroup().append(mt),this.paintInlineImageXObject(G,Oe)}paintFormXObjectBegin(H,G){if(Array.isArray(H)&&H.length===6&&this.transform(H[0],H[1],H[2],H[3],H[4],H[5]),G){const ie=G[2]-G[0],Ee=G[3]-G[1],be=this.svgFactory.createElement("svg:rect");be.setAttributeNS(null,"x",G[0]),be.setAttributeNS(null,"y",G[1]),be.setAttributeNS(null,"width",W(ie)),be.setAttributeNS(null,"height",W(Ee)),this.current.element=be,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(H){const G=this.svgFactory.create(H.width,H.height),ie=this.svgFactory.createElement("svg:defs");G.append(ie),this.defs=ie;const Ee=this.svgFactory.createElement("svg:g");return Ee.setAttributeNS(null,"transform",O(H.transform)),G.append(Ee),this.svg=Ee,G}_ensureClipGroup(){if(!this.current.clipGroup){const H=this.svgFactory.createElement("svg:g");H.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(H),this.current.clipGroup=H}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",O(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFNodeStream=void 0;var v=g(1),b=g(32);const _=require$$5,E=require$$5,R=require$$5,U=require$$5,P=/^file:\/\/\/[a-zA-Z]:\//;function B(Q){const X=U.parse(Q);return X.protocol==="file:"||X.host?X:/^[a-z]:[/\\]/i.test(Q)?U.parse(`file:///${Q}`):(X.host||(X.protocol="file:"),X)}class ee{constructor(X){this.source=X,this.url=B(X.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&X.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var X,H;return(H=(X=this._fullRequestReader)==null?void 0:X._loaded)!=null?H:0}getFullReader(){return(0,v.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new O(this):new z(this),this._fullRequestReader}getRangeReader(X,H){if(H<=this._progressiveDataLength)return null;const G=this.isFsUrl?new Y(this,X,H):new W(this,X,H);return this._rangeRequestReaders.push(G),G}cancelAllRequests(X){var H;(H=this._fullRequestReader)==null||H.cancel(X);for(const G of this._rangeRequestReaders.slice(0))G.cancel(X)}}d.PDFNodeStream=ee;class re{constructor(X){this._url=X.url,this._done=!1,this._storedError=null,this.onProgress=null;const H=X.source;this._contentLength=H.length,this._loaded=0,this._filename=null,this._disableRange=H.disableRange||!1,this._rangeChunkSize=H.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!H.disableStream,this._isRangeSupported=!H.disableRange,this._readableStream=null,this._readCapability=(0,v.createPromiseCapability)(),this._headersCapability=(0,v.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var G;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const X=this._readableStream.read();return X===null?(this._readCapability=(0,v.createPromiseCapability)(),this.read()):(this._loaded+=X.length,(G=this.onProgress)==null||G.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(X).buffer,done:!1})}cancel(X){if(!this._readableStream){this._error(X);return}this._readableStream.destroy(X)}_error(X){this._storedError=X,this._readCapability.resolve()}_setReadableStream(X){this._readableStream=X,X.on("readable",()=>{this._readCapability.resolve()}),X.on("end",()=>{X.destroy(),this._done=!0,this._readCapability.resolve()}),X.on("error",H=>{this._error(H)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new v.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ne{constructor(X){this._url=X.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,v.createPromiseCapability)();const H=X.source;this._isStreamingSupported=!H.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var G;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const X=this._readableStream.read();return X===null?(this._readCapability=(0,v.createPromiseCapability)(),this.read()):(this._loaded+=X.length,(G=this.onProgress)==null||G.call(this,{loaded:this._loaded}),{value:new Uint8Array(X).buffer,done:!1})}cancel(X){if(!this._readableStream){this._error(X);return}this._readableStream.destroy(X)}_error(X){this._storedError=X,this._readCapability.resolve()}_setReadableStream(X){this._readableStream=X,X.on("readable",()=>{this._readCapability.resolve()}),X.on("end",()=>{X.destroy(),this._done=!0,this._readCapability.resolve()}),X.on("error",H=>{this._error(H)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function j(Q,X){return{protocol:Q.protocol,auth:Q.auth,host:Q.hostname,port:Q.port,path:Q.path,method:"GET",headers:X}}class z extends re{constructor(X){super(X);const H=G=>{if(G.statusCode===404){const Ce=new v.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Ce,this._headersCapability.reject(Ce);return}this._headersCapability.resolve(),this._setReadableStream(G);const ie=Ce=>this._readableStream.headers[Ce.toLowerCase()],{allowRangeRequests:Ee,suggestedLength:be}=(0,b.validateRangeRequestCapabilities)({getResponseHeader:ie,isHttp:X.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Ee,this._contentLength=be||this._contentLength,this._filename=(0,b.extractFilenameFromHeader)(ie)};this._request=null,this._url.protocol==="http:"?this._request=E.request(j(this._url,X.httpHeaders),H):this._request=R.request(j(this._url,X.httpHeaders),H),this._request.on("error",G=>{this._storedError=G,this._headersCapability.reject(G)}),this._request.end()}}class W extends ne{constructor(X,H,G){super(X),this._httpHeaders={};for(const Ee in X.httpHeaders){const be=X.httpHeaders[Ee];typeof be>"u"||(this._httpHeaders[Ee]=be)}this._httpHeaders.Range=`bytes=${H}-${G-1}`;const ie=Ee=>{if(Ee.statusCode===404){const be=new v.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=be;return}this._setReadableStream(Ee)};this._request=null,this._url.protocol==="http:"?this._request=E.request(j(this._url,this._httpHeaders),ie):this._request=R.request(j(this._url,this._httpHeaders),ie),this._request.on("error",Ee=>{this._storedError=Ee}),this._request.end()}}class O extends re{constructor(X){super(X);let H=decodeURIComponent(this._url.path);P.test(this._url.href)&&(H=H.replace(/^\//,"")),_.lstat(H,(G,ie)=>{if(G){G.code==="ENOENT"&&(G=new v.MissingPDFException(`Missing PDF "${H}".`)),this._storedError=G,this._headersCapability.reject(G);return}this._contentLength=ie.size,this._setReadableStream(_.createReadStream(H)),this._headersCapability.resolve()})}}class Y extends ne{constructor(X,H,G){super(X);let ie=decodeURIComponent(this._url.path);P.test(this._url.href)&&(ie=ie.replace(/^\//,"")),this._setReadableStream(_.createReadStream(ie,{start:H,end:G-1}))}}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.createResponseStatusError=U,d.extractFilenameFromHeader=R,d.validateRangeRequestCapabilities=E,d.validateResponseStatus=P;var v=g(1),b=g(33),_=g(6);function E({getResponseHeader:B,isHttp:ee,rangeChunkSize:re,disableRange:ne}){const j={allowRangeRequests:!1,suggestedLength:void 0},z=parseInt(B("Content-Length"),10);return!Number.isInteger(z)||(j.suggestedLength=z,z<=2*re)||ne||!ee||B("Accept-Ranges")!=="bytes"||(B("Content-Encoding")||"identity")!=="identity"||(j.allowRangeRequests=!0),j}function R(B){const ee=B("Content-Disposition");if(ee){let re=(0,b.getFilenameFromContentDispositionHeader)(ee);if(re.includes("%"))try{re=decodeURIComponent(re)}catch{}if((0,_.isPdfFile)(re))return re}return null}function U(B,ee){return B===404||B===0&&ee.startsWith("file:")?new v.MissingPDFException('Missing PDF "'+ee+'".'):new v.UnexpectedResponseException(`Unexpected server response (${B}) while retrieving PDF "${ee}".`,B)}function P(B){return B===200||B===206}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getFilenameFromContentDispositionHeader=b;var v=g(1);function b(_){let E=!0,R=U("filename\\*","i").exec(_);if(R){R=R[1];let z=re(R);return z=unescape(z),z=ne(z),z=j(z),B(z)}if(R=ee(_),R){const z=j(R);return B(z)}if(R=U("filename","i").exec(_),R){R=R[1];let z=re(R);return z=j(z),B(z)}function U(z,W){return new RegExp("(?:^|;)\\s*"+z+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',W)}function P(z,W){if(z){if(!/^[\x00-\xFF]+$/.test(W))return W;try{const O=new TextDecoder(z,{fatal:!0}),Y=(0,v.stringToBytes)(W);W=O.decode(Y),E=!1}catch{}}return W}function B(z){return E&&/[\x80-\xff]/.test(z)&&(z=P("utf-8",z),E&&(z=P("iso-8859-1",z))),z}function ee(z){const W=[];let O;const Y=U("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(O=Y.exec(z))!==null;){let[,X,H,G]=O;if(X=parseInt(X,10),X in W){if(X===0)break;continue}W[X]=[H,G]}const Q=[];for(let X=0;X<W.length&&X in W;++X){let[H,G]=W[X];G=re(G),H&&(G=unescape(G),X===0&&(G=ne(G))),Q.push(G)}return Q.join("")}function re(z){if(z.startsWith('"')){const W=z.slice(1).split('\\"');for(let O=0;O<W.length;++O){const Y=W[O].indexOf('"');Y!==-1&&(W[O]=W[O].slice(0,Y),W.length=O+1),W[O]=W[O].replace(/\\(.)/g,"$1")}z=W.join('"')}return z}function ne(z){const W=z.indexOf("'");if(W===-1)return z;const O=z.slice(0,W),Q=z.slice(W+1).replace(/^[^']*'/,"");return P(O,Q)}function j(z){return!z.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(z)?z:z.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(W,O,Y,Q){if(Y==="q"||Y==="Q")return Q=Q.replace(/_/g," "),Q=Q.replace(/=([0-9a-fA-F]{2})/g,function(X,H){return String.fromCharCode(parseInt(H,16))}),P(O,Q);try{Q=atob(Q)}catch{}return P(O,Q)})}return""}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFNetworkStream=void 0;var v=g(1),b=g(32);const _=200,E=206;function R(re){const ne=re.response;return typeof ne!="string"?ne:(0,v.stringToBytes)(ne).buffer}class U{constructor(ne,j={}){this.url=ne,this.isHttp=/^https?:/i.test(ne),this.httpHeaders=this.isHttp&&j.httpHeaders||Object.create(null),this.withCredentials=j.withCredentials||!1,this.getXhr=j.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(ne,j,z){const W={begin:ne,end:j};for(const O in z)W[O]=z[O];return this.request(W)}requestFull(ne){return this.request(ne)}request(ne){const j=this.getXhr(),z=this.currXhrId++,W=this.pendingRequests[z]={xhr:j};j.open("GET",this.url),j.withCredentials=this.withCredentials;for(const O in this.httpHeaders){const Y=this.httpHeaders[O];typeof Y>"u"||j.setRequestHeader(O,Y)}return this.isHttp&&"begin"in ne&&"end"in ne?(j.setRequestHeader("Range",`bytes=${ne.begin}-${ne.end-1}`),W.expectedStatus=E):W.expectedStatus=_,j.responseType="arraybuffer",ne.onError&&(j.onerror=function(O){ne.onError(j.status)}),j.onreadystatechange=this.onStateChange.bind(this,z),j.onprogress=this.onProgress.bind(this,z),W.onHeadersReceived=ne.onHeadersReceived,W.onDone=ne.onDone,W.onError=ne.onError,W.onProgress=ne.onProgress,j.send(null),z}onProgress(ne,j){var W;const z=this.pendingRequests[ne];!z||(W=z.onProgress)==null||W.call(z,j)}onStateChange(ne,j){var X,H,G;const z=this.pendingRequests[ne];if(!z)return;const W=z.xhr;if(W.readyState>=2&&z.onHeadersReceived&&(z.onHeadersReceived(),delete z.onHeadersReceived),W.readyState!==4||!(ne in this.pendingRequests))return;if(delete this.pendingRequests[ne],W.status===0&&this.isHttp){(X=z.onError)==null||X.call(z,W.status);return}const O=W.status||_;if(!(O===_&&z.expectedStatus===E)&&O!==z.expectedStatus){(H=z.onError)==null||H.call(z,W.status);return}const Q=R(W);if(O===E){const ie=W.getResponseHeader("Content-Range"),Ee=/bytes (\d+)-(\d+)\/(\d+)/.exec(ie);z.onDone({begin:parseInt(Ee[1],10),chunk:Q})}else Q?z.onDone({begin:0,chunk:Q}):(G=z.onError)==null||G.call(z,W.status)}getRequestXhr(ne){return this.pendingRequests[ne].xhr}isPendingRequest(ne){return ne in this.pendingRequests}abortRequest(ne){const j=this.pendingRequests[ne].xhr;delete this.pendingRequests[ne],j.abort()}}class P{constructor(ne){this._source=ne,this._manager=new U(ne.url,{httpHeaders:ne.httpHeaders,withCredentials:ne.withCredentials}),this._rangeChunkSize=ne.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(ne){const j=this._rangeRequestReaders.indexOf(ne);j>=0&&this._rangeRequestReaders.splice(j,1)}getFullReader(){return(0,v.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new B(this._manager,this._source),this._fullRequestReader}getRangeReader(ne,j){const z=new ee(this._manager,ne,j);return z.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(z),z}cancelAllRequests(ne){var j;(j=this._fullRequestReader)==null||j.cancel(ne);for(const z of this._rangeRequestReaders.slice(0))z.cancel(ne)}}d.PDFNetworkStream=P;class B{constructor(ne,j){this._manager=ne;const z={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=j.url,this._fullRequestId=ne.requestFull(z),this._headersReceivedCapability=(0,v.createPromiseCapability)(),this._disableRange=j.disableRange||!1,this._contentLength=j.length,this._rangeChunkSize=j.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const ne=this._fullRequestId,j=this._manager.getRequestXhr(ne),z=Y=>j.getResponseHeader(Y),{allowRangeRequests:W,suggestedLength:O}=(0,b.validateRangeRequestCapabilities)({getResponseHeader:z,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});W&&(this._isRangeSupported=!0),this._contentLength=O||this._contentLength,this._filename=(0,b.extractFilenameFromHeader)(z),this._isRangeSupported&&this._manager.abortRequest(ne),this._headersReceivedCapability.resolve()}_onDone(ne){if(ne&&(this._requests.length>0?this._requests.shift().resolve({value:ne.chunk,done:!1}):this._cachedChunks.push(ne.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const j of this._requests)j.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(ne){this._storedError=(0,b.createResponseStatusError)(ne,this._url),this._headersReceivedCapability.reject(this._storedError);for(const j of this._requests)j.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(ne){var j;(j=this.onProgress)==null||j.call(this,{loaded:ne.loaded,total:ne.lengthComputable?ne.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const ne=(0,v.createPromiseCapability)();return this._requests.push(ne),ne.promise}cancel(ne){this._done=!0,this._headersReceivedCapability.reject(ne);for(const j of this._requests)j.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ee{constructor(ne,j,z){this._manager=ne;const W={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ne.url,this._requestId=ne.requestRange(j,z,W),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var ne;(ne=this.onClosed)==null||ne.call(this,this)}_onDone(ne){const j=ne.chunk;this._requests.length>0?this._requests.shift().resolve({value:j,done:!1}):this._queuedChunk=j,this._done=!0;for(const z of this._requests)z.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(ne){this._storedError=(0,b.createResponseStatusError)(ne,this._url);for(const j of this._requests)j.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(ne){var j;this.isStreamingSupported||(j=this.onProgress)==null||j.call(this,{loaded:ne.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const j=this._queuedChunk;return this._queuedChunk=null,{value:j,done:!1}}if(this._done)return{value:void 0,done:!0};const ne=(0,v.createPromiseCapability)();return this._requests.push(ne),ne.promise}cancel(ne){this._done=!0;for(const j of this._requests)j.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFFetchStream=void 0;var v=g(1),b=g(32);function _(B,ee,re){return{method:"GET",headers:B,signal:re.signal,mode:"cors",credentials:ee?"include":"same-origin",redirect:"follow"}}function E(B){const ee=new Headers;for(const re in B){const ne=B[re];typeof ne>"u"||ee.append(re,ne)}return ee}class R{constructor(ee){this.source=ee,this.isHttp=/^https?:/i.test(ee.url),this.httpHeaders=this.isHttp&&ee.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ee,re;return(re=(ee=this._fullRequestReader)==null?void 0:ee._loaded)!=null?re:0}getFullReader(){return(0,v.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new U(this),this._fullRequestReader}getRangeReader(ee,re){if(re<=this._progressiveDataLength)return null;const ne=new P(this,ee,re);return this._rangeRequestReaders.push(ne),ne}cancelAllRequests(ee){var re;(re=this._fullRequestReader)==null||re.cancel(ee);for(const ne of this._rangeRequestReaders.slice(0))ne.cancel(ee)}}d.PDFFetchStream=R;class U{constructor(ee){this._stream=ee,this._reader=null,this._loaded=0,this._filename=null;const re=ee.source;this._withCredentials=re.withCredentials||!1,this._contentLength=re.length,this._headersCapability=(0,v.createPromiseCapability)(),this._disableRange=re.disableRange||!1,this._rangeChunkSize=re.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!re.disableStream,this._isRangeSupported=!re.disableRange,this._headers=E(this._stream.httpHeaders);const ne=re.url;fetch(ne,_(this._headers,this._withCredentials,this._abortController)).then(j=>{if(!(0,b.validateResponseStatus)(j.status))throw(0,b.createResponseStatusError)(j.status,ne);this._reader=j.body.getReader(),this._headersCapability.resolve();const z=Y=>j.headers.get(Y),{allowRangeRequests:W,suggestedLength:O}=(0,b.validateRangeRequestCapabilities)({getResponseHeader:z,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=W,this._contentLength=O||this._contentLength,this._filename=(0,b.extractFilenameFromHeader)(z),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new v.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var j;await this._headersCapability.promise;const{value:ee,done:re}=await this._reader.read();return re?{value:ee,done:re}:(this._loaded+=ee.byteLength,(j=this.onProgress)==null||j.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(ee).buffer,done:!1})}cancel(ee){var re;(re=this._reader)==null||re.cancel(ee),this._abortController.abort()}}class P{constructor(ee,re,ne){this._stream=ee,this._reader=null,this._loaded=0;const j=ee.source;this._withCredentials=j.withCredentials||!1,this._readCapability=(0,v.createPromiseCapability)(),this._isStreamingSupported=!j.disableStream,this._abortController=new AbortController,this._headers=E(this._stream.httpHeaders),this._headers.append("Range",`bytes=${re}-${ne-1}`);const z=j.url;fetch(z,_(this._headers,this._withCredentials,this._abortController)).then(W=>{if(!(0,b.validateResponseStatus)(W.status))throw(0,b.createResponseStatusError)(W.status,z);this._readCapability.resolve(),this._reader=W.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var j;await this._readCapability.promise;const{value:ee,done:re}=await this._reader.read();return re?{value:ee,done:re}:(this._loaded+=ee.byteLength,(j=this.onProgress)==null||j.call(this,{loaded:this._loaded}),{value:new Uint8Array(ee).buffer,done:!1})}cancel(ee){var re;(re=this._reader)==null||re.cancel(ee),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(c){var d=__webpack_module_cache__[c];if(d!==void 0)return d.exports;var g=__webpack_module_cache__[c]={exports:{}};return __webpack_modules__[c](g,g.exports,__w_pdfjs_require__),g.exports}var __webpack_exports__={};return(()=>{var c=__webpack_exports__;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"AnnotationEditorLayer",{enumerable:!0,get:function(){return b.AnnotationEditorLayer}}),Object.defineProperty(c,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return d.AnnotationEditorParamsType}}),Object.defineProperty(c,"AnnotationEditorType",{enumerable:!0,get:function(){return d.AnnotationEditorType}}),Object.defineProperty(c,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return _.AnnotationEditorUIManager}}),Object.defineProperty(c,"AnnotationLayer",{enumerable:!0,get:function(){return E.AnnotationLayer}}),Object.defineProperty(c,"AnnotationMode",{enumerable:!0,get:function(){return d.AnnotationMode}}),Object.defineProperty(c,"CMapCompressionType",{enumerable:!0,get:function(){return d.CMapCompressionType}}),Object.defineProperty(c,"GlobalWorkerOptions",{enumerable:!0,get:function(){return R.GlobalWorkerOptions}}),Object.defineProperty(c,"InvalidPDFException",{enumerable:!0,get:function(){return d.InvalidPDFException}}),Object.defineProperty(c,"MissingPDFException",{enumerable:!0,get:function(){return d.MissingPDFException}}),Object.defineProperty(c,"OPS",{enumerable:!0,get:function(){return d.OPS}}),Object.defineProperty(c,"PDFDataRangeTransport",{enumerable:!0,get:function(){return g.PDFDataRangeTransport}}),Object.defineProperty(c,"PDFDateString",{enumerable:!0,get:function(){return v.PDFDateString}}),Object.defineProperty(c,"PDFWorker",{enumerable:!0,get:function(){return g.PDFWorker}}),Object.defineProperty(c,"PasswordResponses",{enumerable:!0,get:function(){return d.PasswordResponses}}),Object.defineProperty(c,"PermissionFlag",{enumerable:!0,get:function(){return d.PermissionFlag}}),Object.defineProperty(c,"PixelsPerInch",{enumerable:!0,get:function(){return v.PixelsPerInch}}),Object.defineProperty(c,"RenderingCancelledException",{enumerable:!0,get:function(){return v.RenderingCancelledException}}),Object.defineProperty(c,"SVGGraphics",{enumerable:!0,get:function(){return B.SVGGraphics}}),Object.defineProperty(c,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return d.UNSUPPORTED_FEATURES}}),Object.defineProperty(c,"UnexpectedResponseException",{enumerable:!0,get:function(){return d.UnexpectedResponseException}}),Object.defineProperty(c,"Util",{enumerable:!0,get:function(){return d.Util}}),Object.defineProperty(c,"VerbosityLevel",{enumerable:!0,get:function(){return d.VerbosityLevel}}),Object.defineProperty(c,"XfaLayer",{enumerable:!0,get:function(){return ee.XfaLayer}}),Object.defineProperty(c,"build",{enumerable:!0,get:function(){return g.build}}),Object.defineProperty(c,"createPromiseCapability",{enumerable:!0,get:function(){return d.createPromiseCapability}}),Object.defineProperty(c,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return d.createValidAbsoluteUrl}}),Object.defineProperty(c,"getDocument",{enumerable:!0,get:function(){return g.getDocument}}),Object.defineProperty(c,"getFilenameFromUrl",{enumerable:!0,get:function(){return v.getFilenameFromUrl}}),Object.defineProperty(c,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return v.getPdfFilenameFromUrl}}),Object.defineProperty(c,"getXfaPageViewport",{enumerable:!0,get:function(){return v.getXfaPageViewport}}),Object.defineProperty(c,"isPdfFile",{enumerable:!0,get:function(){return v.isPdfFile}}),Object.defineProperty(c,"loadScript",{enumerable:!0,get:function(){return v.loadScript}}),Object.defineProperty(c,"renderTextLayer",{enumerable:!0,get:function(){return P.renderTextLayer}}),Object.defineProperty(c,"shadow",{enumerable:!0,get:function(){return d.shadow}}),Object.defineProperty(c,"version",{enumerable:!0,get:function(){return g.version}});var d=__w_pdfjs_require__(1),g=__w_pdfjs_require__(2),v=__w_pdfjs_require__(6),b=__w_pdfjs_require__(21),_=__w_pdfjs_require__(5),E=__w_pdfjs_require__(26),R=__w_pdfjs_require__(14),U=__w_pdfjs_require__(12),P=__w_pdfjs_require__(29),B=__w_pdfjs_require__(30),ee=__w_pdfjs_require__(28);if(U.isNodeJS){const{PDFNodeStream:re}=__w_pdfjs_require__(31);(0,g.setPDFNetworkStreamFactory)(ne=>new re(ne))}else{const{PDFNetworkStream:re}=__w_pdfjs_require__(34),{PDFFetchStream:ne}=__w_pdfjs_require__(35);(0,g.setPDFNetworkStreamFactory)(j=>(0,v.isValidFetchUrl)(j.url)?new ne(j):new re(j))}})(),__webpack_exports__})())})(pdf);(function(c){var d=react.exports,g=pdf.exports;function v(ve){var ze=Object.create(null);return ve&&Object.keys(ve).forEach(function(pt){if(pt!=="default"){var yt=Object.getOwnPropertyDescriptor(ve,pt);Object.defineProperty(ze,pt,yt.get?yt:{enumerable:!0,get:function(){return ve[pt]}})}}),ze.default=ve,Object.freeze(ze)}var b,_=v(d),E=v(g);c.AnnotationType=void 0,(b=c.AnnotationType||(c.AnnotationType={}))[b.Text=1]="Text",b[b.Link=2]="Link",b[b.FreeText=3]="FreeText",b[b.Line=4]="Line",b[b.Square=5]="Square",b[b.Circle=6]="Circle",b[b.Polygon=7]="Polygon",b[b.Polyline=8]="Polyline",b[b.Highlight=9]="Highlight",b[b.Underline=10]="Underline",b[b.Squiggly=11]="Squiggly",b[b.StrikeOut=12]="StrikeOut",b[b.Stamp=13]="Stamp",b[b.Caret=14]="Caret",b[b.Ink=15]="Ink",b[b.Popup=16]="Popup",b[b.FileAttachment=17]="FileAttachment";var R=function(ve,ze){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,yt){pt.__proto__=yt}||function(pt,yt){for(var Ct in yt)Object.prototype.hasOwnProperty.call(yt,Ct)&&(pt[Ct]=yt[Ct])},R(ve,ze)};function U(ve,ze){if(typeof ze!="function"&&ze!==null)throw new TypeError("Class extends value "+String(ze)+" is not a constructor or null");function pt(){this.constructor=ve}R(ve,ze),ve.prototype=ze===null?Object.create(ze):(pt.prototype=ze.prototype,new pt)}var P,B=function(){return B=Object.assign||function(ve){for(var ze,pt=1,yt=arguments.length;pt<yt;pt++)for(var Ct in ze=arguments[pt])Object.prototype.hasOwnProperty.call(ze,Ct)&&(ve[Ct]=ze[Ct]);return ve},B.apply(this,arguments)};c.TextDirection=void 0,(P=c.TextDirection||(c.TextDirection={})).RightToLeft="RTL",P.LeftToRight="LTR";var ee,re=_.createContext({currentTheme:"light",direction:c.TextDirection.LeftToRight,setCurrentTheme:function(){}}),ne=function(ve){var ze=[];return Object.keys(ve).forEach(function(pt){pt&&ve[pt]&&ze.push(pt)}),ze.join(" ")},j=typeof window<"u"?_.useLayoutEffect:_.useEffect,z=function(ve){var ze=_.useRef(null),pt=ve.once,yt=ve.threshold,Ct=ve.onVisibilityChanged;return j(function(){var Rt=ze.current;if(Rt){var Ft=new IntersectionObserver(function(Ot){Ot.forEach(function(bt){var It=bt.isIntersecting,Dt=bt.intersectionRatio;Ct({isVisible:It,ratio:Dt}),It&&pt&&(Ft.unobserve(Rt),Ft.disconnect())})},{threshold:yt||0});return Ft.observe(Rt),function(){Ft.unobserve(Rt),Ft.disconnect()}}},[]),ze},W=function(ve){var ze=ve.children,pt=ve.ignoreDirection,yt=pt!==void 0&&pt,Ct=ve.size,Rt=Ct===void 0?24:Ct,Ft=_.useContext(re).direction,Ot=!yt&&Ft===c.TextDirection.RightToLeft,bt="".concat(Rt||24,"px");return _.createElement("svg",{"aria-hidden":"true",className:ne({"rpv-core__icon":!0,"rpv-core__icon--rtl":Ot}),focusable:"false",height:bt,viewBox:"0 0 24 24",width:bt},ze)},O=function(){return _.createElement(W,{size:16},_.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},Y=function(ve){var ze=ve.children,pt=ve.testId,yt=ve.onClick,Ct=_.useContext(re).direction===c.TextDirection.RightToLeft,Rt=pt?{"data-testid":pt}:{};return _.createElement("button",B({className:ne({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":Ct}),type:"button",onClick:yt},Rt),ze)},Q=function(ve){var ze=ve.size,pt=ze===void 0?"4rem":ze,yt=ve.testId,Ct=_.useState(!1),Rt=Ct[0],Ft=Ct[1],Ot=yt?{"data-testid":yt}:{},bt=z({onVisibilityChanged:function(It){Ft(It.isVisible)}});return _.createElement("div",B({},Ot,{className:ne({"rpv-core__spinner":!0,"rpv-core__spinner--animating":Rt}),ref:bt,style:{height:pt,width:pt}}))},X=function(ve){var ze=ve.ariaLabel,pt=ze===void 0?"":ze,yt=ve.autoFocus,Ct=yt!==void 0&&yt,Rt=ve.placeholder,Ft=Rt===void 0?"":Rt,Ot=ve.testId,bt=ve.type,It=bt===void 0?"text":bt,Dt=ve.value,Kt=Dt===void 0?"":Dt,Ht=ve.onChange,Qt=ve.onKeyDown,Zt=Qt===void 0?function(){}:Qt,pr=_.useContext(re).direction,tr=_.useRef(),gr=pr===c.TextDirection.RightToLeft,sr={ref:tr,"data-testid":"","aria-label":pt,className:ne({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":gr}),placeholder:Ft,value:Kt,onChange:function(lr){return Ht(lr.target.value)},onKeyDown:Zt};return Ot&&(sr["data-testid"]=Ot),j(function(){if(Ct){var lr=tr.current;if(lr){var vr=window.scrollX,ur=window.scrollY;lr.focus(),window.scrollTo(vr,ur)}}},[]),It==="text"?_.createElement("input",B({type:"text"},sr)):_.createElement("input",B({type:"password"},sr))},H=function(){var ve=_.useRef(!1);return _.useEffect(function(){return ve.current=!0,function(){ve.current=!1}},[]),ve};(function(ve){ve.NotRenderedYet="NotRenderedYet",ve.Rendering="Rendering",ve.Rendered="Rendered"})(ee||(ee={}));var G,ie=function(ve){var ze=ve.doc,pt=ze.numPages,yt=ze.loadingTask.docId,Ct=_.useMemo(function(){return Array(pt).fill(null).map(function(Ot,bt){return{pageIndex:bt,renderStatus:ee.NotRenderedYet,visibility:-9999}})},[yt]),Rt=_.useRef({currentRenderingPage:-1,startRange:0,endRange:pt-1,visibilities:Ct}),Ft=function(Ot,bt){Rt.current.visibilities[Ot].visibility=bt};return{getHighestPriorityPage:function(){var Ot=Rt.current.visibilities.slice(Rt.current.startRange,Rt.current.endRange+1).filter(function(Ht){return Ht.visibility>-9999});if(!Ot.length)return-1;for(var bt=Ot[0].pageIndex,It=Ot[Ot.length-1].pageIndex,Dt=Ot.length,Kt=0;Kt<Dt;Kt++){if(Ot[Kt].renderStatus===ee.Rendering)return-1;if(Ot[Kt].renderStatus===ee.NotRenderedYet)return Ot[Kt].pageIndex}return It+1<pt&&Rt.current.visibilities[It+1].renderStatus!==ee.Rendered?It+1:bt-1>=0&&Rt.current.visibilities[bt-1].renderStatus!==ee.Rendered?bt-1:-1},isInRange:function(Ot){return Ot>=Rt.current.startRange&&Ot<=Rt.current.endRange},markNotRendered:function(){for(var Ot=0;Ot<pt;Ot++)Rt.current.visibilities[Ot].renderStatus=ee.NotRenderedYet},markRendered:function(Ot){Rt.current.visibilities[Ot].renderStatus=ee.Rendered},markRendering:function(Ot){Rt.current.currentRenderingPage!==-1&&Rt.current.currentRenderingPage!==Ot&&Rt.current.visibilities[Rt.current.currentRenderingPage].renderStatus===ee.Rendering&&(Rt.current.visibilities[Rt.current.currentRenderingPage].renderStatus=ee.NotRenderedYet),Rt.current.visibilities[Ot].renderStatus=ee.Rendering,Rt.current.currentRenderingPage=Ot},setOutOfRange:function(Ot){Ft(Ot,-9999)},setRange:function(Ot,bt){Rt.current.startRange=Ot,Rt.current.endRange=bt;for(var It=0;It<pt;It++)(It<Ot||It>bt)&&(Rt.current.visibilities[It].visibility=-9999,Rt.current.visibilities[It].renderStatus=ee.NotRenderedYet)},setVisibility:Ft}},Ee={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},be=_.createContext({l10n:Ee,setL10n:function(){}}),Ce=0,Oe=function(){return Ce++},mt=function(ve,ze,pt){var yt=function(Ct){var Rt=ze.current;if(Rt){var Ft=Ct.target;if(Ft instanceof Element&&Ft.shadowRoot){var Ot=Ct.composedPath();Ot.length>0&&!Rt.contains(Ot[0])&&pt()}else Rt.contains(Ft)||pt()}};_.useEffect(function(){if(ve){var Ct={capture:!0};return document.addEventListener("click",yt,Ct),function(){document.removeEventListener("click",yt,Ct)}}},[])},Tt=function(ve){var ze=function(pt){pt.key==="Escape"&&ve()};_.useEffect(function(){return document.addEventListener("keyup",ze),function(){document.removeEventListener("keyup",ze)}},[])},St=function(ve){var ze=ve.ariaControlsSuffix,pt=ve.children,yt=ve.closeOnClickOutside,Ct=ve.closeOnEscape,Rt=ve.onToggle,Ft=_.useRef(),Ot=_.useContext(re).direction===c.TextDirection.RightToLeft;return _.useEffect(function(){var bt=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=bt}},[]),Tt(function(){Ft.current&&Ct&&Rt()}),mt(yt,Ft,Rt),j(function(){var bt=Ft.current;if(bt){var It=.75*document.body.clientHeight;bt.getBoundingClientRect().height>=It&&(bt.style.overflow="auto",bt.style.maxHeight="".concat(It,"px"))}},[]),_.createElement("div",{"aria-modal":"true",className:ne({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":Ot}),id:"rpv-core__modal-body-".concat(ze),ref:Ft,role:"dialog",tabIndex:-1},pt)},ft=function(ve){var ze=ve.children;return _.createElement("div",{className:"rpv-core__modal-overlay"},ze)};c.ToggleStatus=void 0,(G=c.ToggleStatus||(c.ToggleStatus={})).Close="Close",G.Open="Open",G.Toggle="Toggle";var ut,wt=function(ve){var ze=_.useState(ve),pt=ze[0],yt=ze[1];return{opened:pt,toggle:function(Ct){switch(Ct){case c.ToggleStatus.Close:yt(!1);break;case c.ToggleStatus.Open:yt(!0);break;case c.ToggleStatus.Toggle:default:yt(function(Rt){return!Rt})}}}},Et=function(ve){var ze=ve.content,pt=ve.isOpened,yt=pt!==void 0&&pt,Ct=ve.target,Rt=wt(yt),Ft=Rt.opened,Ot=Rt.toggle;return _.createElement(_.Fragment,null,Ct&&Ct(Ot,Ft),Ft&&ze(Ot))};c.Position=void 0,(ut=c.Position||(c.Position={})).TopLeft="TOP_LEFT",ut.TopCenter="TOP_CENTER",ut.TopRight="TOP_RIGHT",ut.RightTop="RIGHT_TOP",ut.RightCenter="RIGHT_CENTER",ut.RightBottom="RIGHT_BOTTOM",ut.BottomLeft="BOTTOM_LEFT",ut.BottomCenter="BOTTOM_CENTER",ut.BottomRight="BOTTOM_RIGHT",ut.LeftTop="LEFT_TOP",ut.LeftCenter="LEFT_CENTER",ut.LeftBottom="LEFT_BOTTOM";var Pt,Mt,Bt,et,Pe,oe=function(ve,ze,pt,yt,Ct){j(function(){var Rt=ze.current,Ft=ve.current,Ot=pt.current;if(Ft&&Rt&&Ot){var bt=Ot.getBoundingClientRect(),It=function(Ht,Qt,Zt,pr){var tr=Qt.getBoundingClientRect(),gr=Ht.getBoundingClientRect(),sr=gr.height,lr=gr.width,vr=0,ur=0;switch(Zt){case c.Position.TopLeft:vr=tr.top-sr,ur=tr.left;break;case c.Position.TopCenter:vr=tr.top-sr,ur=tr.left+tr.width/2-lr/2;break;case c.Position.TopRight:vr=tr.top-sr,ur=tr.left+tr.width-lr;break;case c.Position.RightTop:vr=tr.top,ur=tr.left+tr.width;break;case c.Position.RightCenter:vr=tr.top+tr.height/2-sr/2,ur=tr.left+tr.width;break;case c.Position.RightBottom:vr=tr.top+tr.height-sr,ur=tr.left+tr.width;break;case c.Position.BottomLeft:vr=tr.top+tr.height,ur=tr.left;break;case c.Position.BottomCenter:vr=tr.top+tr.height,ur=tr.left+tr.width/2-lr/2;break;case c.Position.BottomRight:vr=tr.top+tr.height,ur=tr.left+tr.width-lr;break;case c.Position.LeftTop:vr=tr.top,ur=tr.left-lr;break;case c.Position.LeftCenter:vr=tr.top+tr.height/2-sr/2,ur=tr.left-lr;break;case c.Position.LeftBottom:vr=tr.top+tr.height-sr,ur=tr.left-lr}return{left:ur+(pr.left||0),top:vr+(pr.top||0)}}(Ft,Rt,yt,Ct),Dt=It.top,Kt=It.left;Ft.style.top="".concat(Dt-bt.top,"px"),Ft.style.left="".concat(Kt-bt.left,"px")}},[])},Ye=function(ve){var ze,pt=ve.customClassName,yt=ve.position;return _.createElement("div",{className:ne((ze={"rpv-core__arrow":!0,"rpv-core__arrow--tl":yt===c.Position.TopLeft,"rpv-core__arrow--tc":yt===c.Position.TopCenter,"rpv-core__arrow--tr":yt===c.Position.TopRight,"rpv-core__arrow--rt":yt===c.Position.RightTop,"rpv-core__arrow--rc":yt===c.Position.RightCenter,"rpv-core__arrow--rb":yt===c.Position.RightBottom,"rpv-core__arrow--bl":yt===c.Position.BottomLeft,"rpv-core__arrow--bc":yt===c.Position.BottomCenter,"rpv-core__arrow--br":yt===c.Position.BottomRight,"rpv-core__arrow--lt":yt===c.Position.LeftTop,"rpv-core__arrow--lc":yt===c.Position.LeftCenter,"rpv-core__arrow--lb":yt===c.Position.LeftBottom},ze["".concat(pt)]=pt!=="",ze))})},tt=function(ve){var ze=ve.ariaControlsSuffix,pt=ve.children,yt=ve.closeOnClickOutside,Ct=ve.offset,Rt=ve.position,Ft=ve.targetRef,Ot=ve.onClose,bt=_.useRef(),It=_.useRef(),Dt=_.useRef(),Kt=_.useContext(re).direction===c.TextDirection.RightToLeft;mt(yt,bt,Ot),oe(bt,Ft,Dt,Rt,Ct),j(function(){var Qt=It.current;if(Qt){var Zt=.75*document.body.clientHeight;Qt.getBoundingClientRect().height>=Zt&&(Qt.style.overflow="auto",Qt.style.maxHeight="".concat(Zt,"px"))}},[]);var Ht="rpv-core__popover-body-inner-".concat(ze);return _.createElement(_.Fragment,null,_.createElement("div",{ref:Dt,style:{left:0,position:"absolute",top:0}}),_.createElement("div",{"aria-describedby":Ht,className:ne({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Kt}),id:"rpv-core__popover-body-".concat(ze),ref:bt,role:"dialog",tabIndex:-1},_.createElement(Ye,{customClassName:"rpv-core__popover-body-arrow",position:Rt}),_.createElement("div",{id:Ht,ref:It},pt)))},Ze=function(ve){var ze=ve.closeOnEscape,pt=ve.onClose,yt=_.useRef();return Tt(function(){yt.current&&ze&&pt()}),_.createElement("div",{className:"rpv-core__popover-overlay",ref:yt})},Qe=function(ve){var ze=ve.ariaControlsSuffix,pt=ve.children,yt=ve.contentRef,Ct=ve.offset,Rt=ve.position,Ft=ve.targetRef,Ot=_.useRef(),bt=_.useContext(re).direction===c.TextDirection.RightToLeft;return oe(yt,Ft,Ot,Rt,Ct),_.createElement(_.Fragment,null,_.createElement("div",{ref:Ot,style:{left:0,position:"absolute",top:0}}),_.createElement("div",{className:ne({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":bt}),id:"rpv-core__tooltip-body-".concat(ze),ref:yt,role:"tooltip"},_.createElement(Ye,{customClassName:"rpv-core__tooltip-body-arrow",position:Rt}),_.createElement("div",{className:"rpv-core__tooltip-body-content"},pt)))};c.LayerRenderStatus=void 0,(Pt=c.LayerRenderStatus||(c.LayerRenderStatus={}))[Pt.PreRender=0]="PreRender",Pt[Pt.DidRender=1]="DidRender",c.PageMode=void 0,(Mt=c.PageMode||(c.PageMode={})).Attachments="UseAttachments",Mt.Bookmarks="UseOutlines",Mt.ContentGroup="UseOC",Mt.Default="UserNone",Mt.FullScreen="FullScreen",Mt.Thumbnails="UseThumbs",c.RotateDirection=void 0,(Bt=c.RotateDirection||(c.RotateDirection={})).Backward="Backward",Bt.Forward="Forward",c.ScrollMode=void 0,(et=c.ScrollMode||(c.ScrollMode={})).Horizontal="Horizontal",et.Vertical="Vertical",et.Wrapped="Wrapped",c.SpecialZoomLevel=void 0,(Pe=c.SpecialZoomLevel||(c.SpecialZoomLevel={})).ActualSize="ActualSize",Pe.PageFit="PageFit",Pe.PageWidth="PageWidth";var lt=function(ve,ze){switch(ze[1].name){case"XYZ":return{bottomOffset:function(pt,yt){return ze[3]===null?yt:ze[3]},leftOffset:function(pt,yt){return ze[2]===null?0:ze[2]},pageIndex:ve,scaleTo:ze[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:ve,scaleTo:c.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:ze[2],leftOffset:0,pageIndex:ve,scaleTo:c.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:ve,scaleTo:1}}},_t=new Map,Nt=new Map,dt=function(ve,ze){return"".concat(ve.loadingTask.docId,"___").concat(ze.num,"R").concat(ze.gen===0?"":ze.gen)},xt=function(ve,ze,pt){_t.set(dt(ve,ze),pt)},Lt=function(ve,ze){if(!ve)return Promise.reject("The document is not loaded yet");var pt="".concat(ve.loadingTask.docId,"___").concat(ze),yt=Nt.get(pt);return yt?Promise.resolve(yt):new Promise(function(Ct,Rt){ve.getPage(ze+1).then(function(Ft){Nt.set(pt,Ft),Ft.ref&&xt(ve,Ft.ref,ze),Ct(Ft)})})},Vt=function(ve,ze){return new Promise(function(pt){new Promise(function(yt){typeof ze=="string"?ve.getDestination(ze).then(function(Ct){yt(Ct)}):yt(ze)}).then(function(yt){if(typeof yt[0]=="object"&&yt[0]!==null){var Ct=yt[0],Rt=function(Ot,bt){var It=dt(Ot,bt);return _t.has(It)?_t.get(It):null}(ve,Ct);Rt===null?ve.getPageIndex(Ct).then(function(Ot){xt(ve,Ct,Ot),Vt(ve,ze).then(function(bt){return pt(bt)})}):pt(lt(Rt,yt))}else{var Ft=lt(yt[0],yt);pt(Ft)}})})};function V(ve){var ze=_.useRef(ve);return _.useEffect(function(){ze.current=ve},[ve]),ze.current}var M,Z=function(ve,ze){var pt=ze.rect;return ve.height!==pt.height||ve.width!==pt.width?pt:ve},te=function(ve){return 1-Math.pow(1-ve,4)},xe={left:0,top:0},at={capture:!1,passive:!0},vt=function(ve){var ze=ve.elementRef,pt=ve.isRtl,yt=ve.scrollMode,Ct=ve.onSmoothScroll,Rt=function(tr){var gr=H(),sr=_.useRef(0),lr=_.useState(tr),vr=lr[0],ur=lr[1],xr=_.useCallback(function(Tr){cancelAnimationFrame(sr.current),sr.current=requestAnimationFrame(function(){gr.current&&ur(Tr)})},[]);return _.useEffect(function(){return function(){cancelAnimationFrame(sr.current)}},[]),[vr,xr]}(xe),Ft=Rt[0],Ot=Rt[1],bt=_.useState(ze.current),It=bt[0],Dt=bt[1],Kt=pt?-1:1,Ht=_.useRef(yt);Ht.current=yt;var Qt=_.useCallback(function(){return Ct(!1)},[]),Zt=_.useCallback(function(){if(It)switch(Ht.current){case c.ScrollMode.Horizontal:Ot({left:Kt*It.scrollLeft,top:0});break;case c.ScrollMode.Vertical:default:Ot({left:0,top:It.scrollTop})}},[It]);j(function(){Dt(ze.current)}),j(function(){if(It)return It.addEventListener("scroll",Zt,at),function(){It.removeEventListener("scroll",Zt,at)}},[It]);var pr=_.useCallback(function(tr,gr){var sr=ze.current;if(sr){var lr=0,vr=c.ScrollMode.Vertical;switch(Ht.current){case c.ScrollMode.Horizontal:lr=Kt*tr.left,vr=c.ScrollMode.Horizontal;break;case c.ScrollMode.Vertical:default:lr=tr.top,vr=c.ScrollMode.Vertical}if(gr)Ct(!0),function(ur,xr,Tr,zr,Mr,rn){Mr===void 0&&(Mr=function(Gr){return Gr}),rn===void 0&&(rn=function(){});var Nr=0;switch(xr){case c.ScrollMode.Horizontal:Nr=ur.scrollLeft;case c.ScrollMode.Vertical:default:Nr=ur.scrollTop}var Kr,Yr=-1,cn=Nr-Tr;if(cn!==0){var Br=function(Gr){Yr===-1&&(Yr=Gr);var nn=Gr-Yr,un=Math.min(nn/zr,1),Sr=Mr(un),br=Nr-cn*Sr;switch(xr){case c.ScrollMode.Horizontal:ur.scrollLeft=br;case c.ScrollMode.Vertical:default:ur.scrollTop=br}br===Tr&&rn(),nn<zr?Kr=window.requestAnimationFrame(Br):window.cancelAnimationFrame(Kr)};Kr=window.requestAnimationFrame(Br)}}(sr,vr,lr,400,te,Qt);else switch(Ht.current){case c.ScrollMode.Horizontal:sr.scrollLeft=lr;break;case c.ScrollMode.Vertical:default:sr.scrollTop=lr}}},[ze]);return{scrollOffset:Ft,scrollTo:pr}},st={height:0,width:0},rt={left:0,top:0},ht=function(ve){var ze=ve.estimateSize,pt=ve.isRtl,yt=ve.numberOfItems,Ct=ve.setStartRange,Rt=ve.setEndRange,Ft=ve.parentRef,Ot=ve.scrollMode,bt=ve.transformSize,It=_.useState(!1),Dt=It[0],Kt=It[1],Ht=_.useCallback(function(Sr){return Kt(Sr)},[]),Qt=vt({elementRef:Ft,isRtl:pt,scrollMode:Ot,onSmoothScroll:Ht}),Zt=Qt.scrollOffset,pr=Qt.scrollTo,tr=function(Sr){var br=Sr.elementRef,Cr=_.useState(br.current),wr=Cr[0],Or=Cr[1],kr=_.useRef(!1),$r=_.useReducer(Z,{height:0,width:0}),pn=$r[0],Hr=$r[1];return j(function(){br.current!==wr&&Or(br.current)}),j(function(){if(wr&&!kr.current){kr.current=!0;var dn=wr.getBoundingClientRect(),gn=dn.height,yn=dn.width;Hr({rect:{height:gn,width:yn}})}},[wr]),_.useEffect(function(){if(wr){var dn=new ResizeObserver(function(gn,yn){gn.forEach(function(vn){if(vn.target===wr){var Fr=vn.contentRect,hn=Fr.height,mn=Fr.width;Hr({rect:{height:hn,width:mn}})}})});return dn.observe(wr),function(){dn.unobserve(wr)}}},[wr]),pn}({elementRef:Ft}),gr=_.useRef({scrollOffset:rt,measurements:[],parentRect:st,totalSize:st});gr.current.scrollOffset=Zt,gr.current.parentRect=tr;var sr=_.useState({}),lr=sr[0],vr=sr[1],ur=_.useMemo(function(){for(var Sr=[],br=0,Cr={left:0,top:0},wr=0,Or=0;Or<yt;Or++){var kr=lr[Or]||bt(Or,ze(Or)),$r=rt;if(Or===0)br=kr.width,Cr={left:0,top:0},wr=kr.height;else switch(Ot){case c.ScrollMode.Wrapped:(br+=kr.width)<tr.width?($r={left:Sr[Or-1].end.left,top:Cr.top},wr=Math.max(wr,kr.height)):(br=kr.width,Cr={left:($r={left:Cr.left,top:Cr.top+wr}).left,top:$r.top},wr=kr.height);break;case c.ScrollMode.Horizontal:case c.ScrollMode.Vertical:default:$r=Sr[Or-1].end}var pn={left:$r.left+kr.width,top:$r.top+kr.height};Sr[Or]={index:Or,start:$r,size:kr,end:pn,visibility:-1}}return Sr},[ze,Ot,tr,lr,bt]),xr=ur[yt-1]?{height:ur[yt-1].end.top,width:ur[yt-1].end.left}:st;gr.current.measurements=ur,gr.current.totalSize=xr;var Tr=function(Sr,br,Cr,wr){var Or=0;switch(Sr){case c.ScrollMode.Horizontal:Or=wr.left;break;case c.ScrollMode.Vertical:default:Or=wr.top}var kr=br.length-1,$r=function(jr,wn,Rn,bn){for(;jr<=wn;){var Tn=(jr+wn)/2|0,kn=bn(Tn);if(kn<Rn)jr=Tn+1;else{if(!(kn>Rn))return Tn;wn=Tn-1}}return jr>0?jr-1:0}(0,kr,Or,function(jr){switch(Sr){case c.ScrollMode.Horizontal:return br[jr].start.left;case c.ScrollMode.Wrapped:case c.ScrollMode.Vertical:default:return br[jr].start.top}});if(Sr===c.ScrollMode.Wrapped)for(var pn=br[$r].start.top;$r-1>=0&&br[$r-1].start.top===pn&&br[$r-1].start.left>=wr.left;)$r--;for(var Hr=$r,dn={},gn=$r,yn=-1;Hr<=kr;){var vn=br[Hr].size,Fr=st,hn={top:br[Hr].start.top-wr.top,left:br[Hr].start.left-wr.left},mn={height:Cr.height-hn.top,width:Cr.width-hn.left};if(Sr===c.ScrollMode.Horizontal&&mn.width<0){Hr--;break}if(Sr===c.ScrollMode.Vertical&&mn.height<0){Hr--;break}if(Sr===c.ScrollMode.Wrapped&&(mn.width<0||mn.height<0)){Hr--;break}if(Sr===c.ScrollMode.Vertical)Fr.width=1;else if(hn.left<0){var On=vn.width- -hn.left;Fr.width=On<=Cr.width?On/Cr.width:1}else Fr.width=vn.width<=mn.width?1:mn.width/vn.width;if(Sr===c.ScrollMode.Horizontal)Fr.height=1;else if(hn.top<0){var an=vn.height- -hn.top;Fr.height=an<=Cr.height?an/Cr.height:1}else Fr.height=vn.height<=mn.height?1:mn.height/vn.height;dn[Hr]=Fr.width*Fr.height,yn<dn[Hr]&&(yn=dn[Hr],gn=Hr),Hr++}return{start:$r,end:Hr,maxVisbilityIndex:gn,visibilities:dn}}(Ot,gr.current.measurements,gr.current.parentRect,gr.current.scrollOffset),zr=Tr.maxVisbilityIndex,Mr=Tr.visibilities,rn=Tr.start,Nr=Tr.end,Kr=Ct(rn),Yr=Rt(Nr),cn=_.useMemo(function(){for(var Sr=[],br=function(wr){var Or=ur[wr],kr=B(B({},Or),{visibility:Mr[wr]!==void 0?Mr[wr]:-1,measureRef:function($r){if($r){var pn=$r.getBoundingClientRect();if(pn.height!==0||pn.width!==0){var Hr=bt(wr,{height:pn.height,width:pn.width});Hr.height===Or.size.height&&Hr.width===Or.size.width||vr(function(dn){var gn;return B(B({},dn),((gn={})[wr]=Hr,gn))})}}}});Sr.push(kr)},Cr=Kr;Cr<=Yr;Cr++)br(Cr);return Sr},[bt,Mr,ur]),Br=_.useCallback(function(Sr,br){var Cr,wr,Or,kr=gr.current.measurements[Cr=0,wr=yt-1,Or=Sr,Math.max(Cr,Math.min(Or,wr))];kr&&pr({left:br.left+kr.start.left,top:br.top+kr.start.top},!0)},[pr]),Gr=_.useCallback(function(){switch(Ot){case c.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(xr.width,"px")};case c.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(xr.height,"px"),width:"100%"}}},[Ot,xr]),nn=_.useCallback(function(Sr){var br,Cr,wr,Or=pt?"right":"left",kr=pt?-1:1;switch(Ot){case c.ScrollMode.Horizontal:return(br={height:"100%",width:"".concat(Sr.size.width,"px")})[Or]=0,br.position="absolute",br.top=0,br.transform="translateX(".concat(Sr.start.left*kr,"px)"),br;case c.ScrollMode.Wrapped:return(Cr={height:"".concat(Sr.size.height,"px"),width:"".concat(Sr.size.width,"px")})[Or]=0,Cr.position="absolute",Cr.top=0,Cr.transform="translate(".concat(Sr.start.left*kr,"px, ").concat(Sr.start.top,"px)"),Cr;case c.ScrollMode.Vertical:default:return(wr={height:"".concat(Sr.size.height,"px"),width:"100%"})[Or]=0,wr.position="absolute",wr.top=0,wr.transform="translateY(".concat(Sr.start.top,"px)"),wr}},[pt,Ot]),un=_.useCallback(function(Sr){vr({});var br=gr.current.scrollOffset,Cr={left:br.left*Sr,top:br.top*Sr};pr(Cr,!1)},[]);return{isSmoothScrolling:Dt,startIndex:rn,startRange:Kr,endIndex:Nr,endRange:Yr,maxVisbilityIndex:zr,virtualItems:cn,getContainerStyles:Gr,getItemStyles:nn,scrollToItem:Br,zoom:un}};(function(ve){ve[ve.Solid=1]="Solid",ve[ve.Dashed=2]="Dashed",ve[ve.Beveled=3]="Beveled",ve[ve.Inset=4]="Inset",ve[ve.Underline=5]="Underline"})(M||(M={}));var ot,$t=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),ct=function(ve,ze,pt,yt){var Ct=parseInt(ve,10);return Ct>=ze&&Ct<=pt?Ct:yt},kt=function(ve){return ve.contentsObj?ve.contentsObj.str:ve.contents||""},zt=function(ve){return ve.titleObj?ve.titleObj.str:ve.title||""},Wt=function(ve){var ze=ve.annotation,pt=_.useContext(re).direction,yt=zt(ze),Ct=kt(ze),Rt=pt===c.TextDirection.RightToLeft,Ft=_.useRef(),Ot="";if(ze.modificationDate){var bt=function(It){var Dt=$t.exec(It);if(!Dt)return null;var Kt=parseInt(Dt[1],10),Ht=ct(Dt[2],1,12,1)-1,Qt=ct(Dt[3],1,31,1),Zt=ct(Dt[4],0,23,0),pr=ct(Dt[5],0,59,0),tr=ct(Dt[6],0,59,0),gr=Dt[7]||"Z",sr=ct(Dt[8],0,23,0),lr=ct(Dt[9],0,59,0);switch(gr){case"-":Zt+=sr,pr+=lr;break;case"+":Zt-=sr,pr-=lr}return new Date(Date.UTC(Kt,Ht,Qt,Zt,pr,tr))}(ze.modificationDate);Ot=bt?"".concat(bt.toLocaleDateString(),", ").concat(bt.toLocaleTimeString()):""}return _.useLayoutEffect(function(){if(Ft.current){var It=document.querySelector('[data-annotation-id="'.concat(ze.id,'"]'));if(It){var Dt=It;return Dt.style.zIndex+=1,function(){Dt.style.zIndex="".concat(parseInt(Dt.style.zIndex,10)-1)}}}},[]),_.createElement("div",{ref:Ft,className:ne({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":Rt}),style:{top:ze.annotationType===c.AnnotationType.Popup?"":"100%"}},yt&&_.createElement(_.Fragment,null,_.createElement("div",{className:ne({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!Rt,"rpv-core__annotation-popup-title--rtl":Rt})},yt),_.createElement("div",{className:"rpv-core__annotation-popup-date"},Ot)),Ct&&_.createElement("div",{className:"rpv-core__annotation-popup-content"},Ct.split(`
`).map(function(It,Dt){return _.createElement(_.Fragment,{key:Dt},It,_.createElement("br",null))})))};(function(ve){ve.Click="Click",ve.Hover="Hover"})(ot||(ot={}));var mr,or=function(ve){var ze,pt=ve.annotation,yt=ve.children,Ct=ve.ignoreBorder,Rt=ve.hasPopup,Ft=ve.isRenderable,Ot=ve.page,bt=ve.viewport,It=pt.rect,Dt=function(){var Tr=wt(!1),zr=Tr.opened,Mr=Tr.toggle,rn=_.useState(ot.Hover),Nr=rn[0],Kr=rn[1];return{opened:zr,closeOnHover:function(){Nr===ot.Hover&&Mr(c.ToggleStatus.Close)},openOnHover:function(){Nr===ot.Hover&&Mr(c.ToggleStatus.Open)},toggleOnClick:function(){switch(Nr){case ot.Click:zr&&Kr(ot.Hover),Mr(c.ToggleStatus.Toggle);break;case ot.Hover:Kr(ot.Click),Mr(c.ToggleStatus.Open)}}}}(),Kt=Dt.closeOnHover,Ht=Dt.opened,Qt=Dt.openOnHover,Zt=Dt.toggleOnClick,pr=(ze=[It[0],Ot.view[3]+Ot.view[1]-It[1],It[2],Ot.view[3]+Ot.view[1]-It[3]],[Math.min(ze[0],ze[2]),Math.min(ze[1],ze[3]),Math.max(ze[0],ze[2]),Math.max(ze[1],ze[3])]),tr=It[2]-It[0],gr=It[3]-It[1],sr={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!Ct&&pt.borderStyle.width>0){switch(pt.borderStyle.style){case M.Dashed:sr.borderStyle="dashed";break;case M.Solid:sr.borderStyle="solid";break;case M.Underline:sr=Object.assign({borderBottomStyle:"solid"},sr);case M.Beveled:case M.Inset:}var lr=pt.borderStyle.width;sr.borderWidth="".concat(lr,"px"),pt.borderStyle.style!==M.Underline&&(tr-=2*lr,gr-=2*lr);var vr=pt.borderStyle,ur=vr.horizontalCornerRadius,xr=vr.verticalCornerRadius;(ur>0||xr>0)&&(sr.borderRadius="".concat(ur,"px / ").concat(xr,"px")),pt.color?sr.borderColor="rgb(".concat(0|pt.color[0],", ").concat(0|pt.color[1],", ").concat(0|pt.color[2],")"):sr.borderWidth="0"}return _.createElement(_.Fragment,null,Ft&&yt({popup:{opened:Ht,closeOnHover:Kt,openOnHover:Qt,toggleOnClick:Zt},slot:{attrs:{style:Object.assign({height:"".concat(gr,"px"),left:"".concat(pr[0],"px"),top:"".concat(pr[1],"px"),transform:"matrix(".concat(bt.transform.join(","),")"),transformOrigin:"-".concat(pr[0],"px -").concat(pr[1],"px"),width:"".concat(tr,"px")},sr)},children:_.createElement(_.Fragment,null,Rt&&Ht&&_.createElement(Wt,{annotation:pt}))}}))},A=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=ze.hasPopup===!1,Rt=zt(ze),Ft=kt(ze),Ot=!!(ze.hasPopup||Rt||Ft);return _.createElement(or,{annotation:ze,hasPopup:Ct,ignoreBorder:!0,isRenderable:Ot,page:pt,viewport:yt},function(bt){return _.createElement("div",B({},bt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":ze.id,onClick:bt.popup.toggleOnClick,onMouseEnter:bt.popup.openOnHover,onMouseLeave:bt.popup.closeOnHover}),bt.slot.children)})},K=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=ze.hasPopup===!1,Rt=zt(ze),Ft=kt(ze),Ot=!!(ze.hasPopup||Rt||Ft),bt=ze.rect,It=bt[2]-bt[0],Dt=bt[3]-bt[1],Kt=ze.borderStyle.width;return _.createElement(or,{annotation:ze,hasPopup:Ct,ignoreBorder:!0,isRenderable:Ot,page:pt,viewport:yt},function(Ht){return _.createElement("div",B({},Ht.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":ze.id,onClick:Ht.popup.toggleOnClick,onMouseEnter:Ht.popup.openOnHover,onMouseLeave:Ht.popup.closeOnHover}),_.createElement("svg",{height:"".concat(Dt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(It," ").concat(Dt),width:"".concat(It,"px")},_.createElement("circle",{cy:Dt/2,fill:"none",rx:It/2-Kt/2,ry:Dt/2-Kt/2,stroke:"transparent",strokeWidth:Kt||1})),Ht.slot.children)})},Se=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=zt(ze),Rt=kt(ze),Ft=!(ze.hasPopup!==!1||!Ct&&!Rt),Ot=function(){var bt,It,Dt,Kt,Ht=ze.file;Ht&&(bt=Ht.filename,It=Ht.content,Dt=typeof It=="string"?"":URL.createObjectURL(new Blob([It],{type:""})),(Kt=document.createElement("a")).style.display="none",Kt.href=Dt||bt,Kt.setAttribute("download",function(Qt){var Zt=Qt.split("/").pop();return Zt?Zt.split("#")[0].split("?")[0]:Qt}(bt)),document.body.appendChild(Kt),Kt.click(),document.body.removeChild(Kt),Dt&&URL.revokeObjectURL(Dt))};return _.createElement(or,{annotation:ze,hasPopup:Ft,ignoreBorder:!0,isRenderable:!0,page:pt,viewport:yt},function(bt){return _.createElement("div",B({},bt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":ze.id,onClick:bt.popup.toggleOnClick,onDoubleClick:Ot,onMouseEnter:bt.popup.openOnHover,onMouseLeave:bt.popup.closeOnHover}),bt.slot.children)})},ae=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=ze.hasPopup===!1,Rt=zt(ze),Ft=kt(ze),Ot=!!(ze.hasPopup||Rt||Ft);return _.createElement(or,{annotation:ze,hasPopup:Ct,ignoreBorder:!0,isRenderable:Ot,page:pt,viewport:yt},function(bt){return _.createElement("div",B({},bt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":ze.id,onClick:bt.popup.toggleOnClick,onMouseEnter:bt.popup.openOnHover,onMouseLeave:bt.popup.closeOnHover}),bt.slot.children)})},Ae=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=zt(ze),Rt=kt(ze),Ft=!(!Ct&&!Rt),Ot=!ze.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(ze.parentType)!==-1;return j(function(){if(ze.parentId){var bt=document.querySelector('[data-annotation-id="'.concat(ze.parentId,'"]')),It=document.querySelector('[data-annotation-id="'.concat(ze.id,'"]'));if(bt&&It){var Dt=parseFloat(bt.style.left),Kt=parseFloat(bt.style.top)+parseFloat(bt.style.height);It.style.left="".concat(Dt,"px"),It.style.top="".concat(Kt,"px"),It.style.transformOrigin="-".concat(Dt,"px -").concat(Kt,"px")}}},[]),_.createElement(or,{annotation:ze,hasPopup:Ot,ignoreBorder:!1,isRenderable:Ft,page:pt,viewport:yt},function(bt){return _.createElement("div",B({},bt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":ze.id}),_.createElement(Wt,{annotation:ze}))})},it=function(ve){var ze=ve.annotation,pt=ve.childAnnotation,yt=ve.page,Ct=ve.viewport,Rt=ze.hasPopup===!1,Ft=zt(ze),Ot=kt(ze),bt=!!(ze.hasPopup||Ft||Ot);if(ze.quadPoints&&ze.quadPoints.length>0){var It=ze.quadPoints.map(function(Dt){return Object.assign({},ze,{rect:[Dt[2].x,Dt[2].y,Dt[1].x,Dt[1].y],quadPoints:[]})});return _.createElement(_.Fragment,null,It.map(function(Dt,Kt){return _.createElement(it,{key:Kt,annotation:Dt,childAnnotation:pt,page:yt,viewport:Ct})}))}return _.createElement(or,{annotation:ze,hasPopup:Rt,ignoreBorder:!0,isRenderable:bt,page:yt,viewport:Ct},function(Dt){return _.createElement(_.Fragment,null,_.createElement("div",B({},Dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":ze.id,onClick:Dt.popup.toggleOnClick,onMouseEnter:Dt.popup.openOnHover,onMouseLeave:Dt.popup.closeOnHover}),Dt.slot.children),pt&&pt.annotationType===c.AnnotationType.Popup&&Dt.popup.opened&&_.createElement(Ae,{annotation:pt,page:yt,viewport:Ct}))})},Ut=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=ze.hasPopup===!1,Rt=zt(ze),Ft=kt(ze),Ot=!!(ze.hasPopup||Rt||Ft),bt=ze.rect,It=bt[2]-bt[0],Dt=bt[3]-bt[1],Kt=ze.borderStyle.width;return _.createElement(or,{annotation:ze,hasPopup:Ct,ignoreBorder:!0,isRenderable:Ot,page:pt,viewport:yt},function(Ht){return _.createElement("div",B({},Ht.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":ze.id,onClick:Ht.popup.toggleOnClick,onMouseEnter:Ht.popup.openOnHover,onMouseLeave:Ht.popup.closeOnHover}),ze.inkLists&&ze.inkLists.length&&_.createElement("svg",{height:"".concat(Dt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(It," ").concat(Dt),width:"".concat(It,"px")},ze.inkLists.map(function(Qt,Zt){return _.createElement("polyline",{key:Zt,fill:"none",stroke:"transparent",strokeWidth:Kt||1,points:Qt.map(function(pr){return"".concat(pr.x-bt[0],",").concat(bt[3]-pr.y)}).join(" ")})})),Ht.slot.children)})},Gt=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=ze.hasPopup===!1,Rt=zt(ze),Ft=kt(ze),Ot=!!(ze.hasPopup||Rt||Ft),bt=ze.rect,It=bt[2]-bt[0],Dt=bt[3]-bt[1],Kt=ze.borderStyle.width;return _.createElement(or,{annotation:ze,hasPopup:Ct,ignoreBorder:!0,isRenderable:Ot,page:pt,viewport:yt},function(Ht){return _.createElement("div",B({},Ht.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":ze.id,onClick:Ht.popup.toggleOnClick,onMouseEnter:Ht.popup.openOnHover,onMouseLeave:Ht.popup.closeOnHover}),_.createElement("svg",{height:"".concat(Dt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(It," ").concat(Dt),width:"".concat(It,"px")},_.createElement("line",{stroke:"transparent",strokeWidth:Kt||1,x1:bt[2]-ze.lineCoordinates[0],x2:bt[2]-ze.lineCoordinates[2],y1:bt[3]-ze.lineCoordinates[1],y2:bt[3]-ze.lineCoordinates[3]})),Ht.slot.children)})},ar=/^([^\w]*)(javascript|data|vbscript)/im,jt=/&#(\w+)(^\w|;)?/g,Jt=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,dr=/^([^:]+):/gm,cr=function(ve,ze){ze===void 0&&(ze="about:blank");var pt,yt=(pt=ve||"",pt.replace(jt,function(Ot,bt){return String.fromCharCode(bt)})).replace(Jt,"").trim();if(!yt)return ze;var Ct=yt[0];if(Ct==="."||Ct==="/")return yt;var Rt=yt.match(dr);if(!Rt)return yt;var Ft=Rt[0];return ar.test(Ft)?ze:yt},Rr=function(ve){var ze,pt=ve.annotation,yt=ve.doc,Ct=ve.outlines,Rt=ve.page,Ft=ve.viewport,Ot=ve.onExecuteNamedAction,bt=ve.onJumpToDest,It=!!(pt.url||pt.dest||pt.action||pt.unsafeUrl),Dt={};if(pt.url||pt.unsafeUrl){var Kt=cr(pt.url||pt.unsafeUrl,"");Kt?Dt={"data-target":"external",href:Kt,rel:"noopener noreferrer nofollow",target:pt.newWindow?"_blank":"",title:Kt}:It=!1}else Dt={href:"","data-annotation-link":pt.id,onClick:function(Qt){Qt.preventDefault(),pt.action?Ot(pt.action):Vt(yt,pt.dest).then(function(Zt){var pr=Zt.pageIndex,tr=Zt.bottomOffset,gr=Zt.leftOffset,sr=Zt.scaleTo;bt(pr,tr,gr,sr)})}};var Ht=Ct&&Ct.length&&pt.dest&&typeof pt.dest=="string"?(ze=Ct.find(function(Qt){return Qt.dest===pt.dest}))===null||ze===void 0?void 0:ze.title:"";return Ht&&(Dt=Object.assign({},Dt,{title:Ht,"aria-label":Ht})),_.createElement(or,{annotation:pt,hasPopup:!1,ignoreBorder:!1,isRenderable:It,page:Rt,viewport:Ft},function(Qt){return _.createElement("div",B({},Qt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":pt.id,"data-testid":"core__annotation--link-".concat(pt.id)}),_.createElement("a",B({},Dt)))})},Ar=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=ze.hasPopup===!1,Rt=zt(ze),Ft=kt(ze),Ot=!!(ze.hasPopup||Rt||Ft),bt=ze.rect,It=bt[2]-bt[0],Dt=bt[3]-bt[1],Kt=ze.borderStyle.width;return _.createElement(or,{annotation:ze,hasPopup:Ct,ignoreBorder:!0,isRenderable:Ot,page:pt,viewport:yt},function(Ht){return _.createElement("div",B({},Ht.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":ze.id,onClick:Ht.popup.toggleOnClick,onMouseEnter:Ht.popup.openOnHover,onMouseLeave:Ht.popup.closeOnHover}),ze.vertices&&ze.vertices.length&&_.createElement("svg",{height:"".concat(Dt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(It," ").concat(Dt),width:"".concat(It,"px")},_.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Kt||1,points:ze.vertices.map(function(Qt){return"".concat(Qt.x-bt[0],",").concat(bt[3]-Qt.y)}).join(" ")})),Ht.slot.children)})},hr=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=ze.hasPopup===!1,Rt=zt(ze),Ft=kt(ze),Ot=!!(ze.hasPopup||Rt||Ft),bt=ze.rect,It=bt[2]-bt[0],Dt=bt[3]-bt[1],Kt=ze.borderStyle.width;return _.createElement(or,{annotation:ze,hasPopup:Ct,ignoreBorder:!0,isRenderable:Ot,page:pt,viewport:yt},function(Ht){return _.createElement("div",B({},Ht.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":ze.id,onClick:Ht.popup.toggleOnClick,onMouseEnter:Ht.popup.openOnHover,onMouseLeave:Ht.popup.closeOnHover}),ze.vertices&&ze.vertices.length&&_.createElement("svg",{height:"".concat(Dt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(It," ").concat(Dt),width:"".concat(It,"px")},_.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Kt||1,points:ze.vertices.map(function(Qt){return"".concat(Qt.x-bt[0],",").concat(bt[3]-Qt.y)}).join(" ")})),Ht.slot.children)})},qr=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=ze.hasPopup===!1,Rt=zt(ze),Ft=kt(ze),Ot=!!(ze.hasPopup||Rt||Ft),bt=ze.rect,It=bt[2]-bt[0],Dt=bt[3]-bt[1],Kt=ze.borderStyle.width;return _.createElement(or,{annotation:ze,hasPopup:Ct,ignoreBorder:!0,isRenderable:Ot,page:pt,viewport:yt},function(Ht){return _.createElement("div",B({},Ht.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":ze.id,onClick:Ht.popup.toggleOnClick,onMouseEnter:Ht.popup.openOnHover,onMouseLeave:Ht.popup.closeOnHover}),_.createElement("svg",{height:"".concat(Dt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(It," ").concat(Dt),width:"".concat(It,"px")},_.createElement("rect",{height:Dt-Kt,fill:"none",stroke:"transparent",strokeWidth:Kt||1,x:Kt/2,y:Kt/2,width:It-Kt})),Ht.slot.children)})},Wr=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=ze.hasPopup===!1,Rt=zt(ze),Ft=kt(ze),Ot=!!(ze.hasPopup||Rt||Ft);return _.createElement(or,{annotation:ze,hasPopup:Ct,ignoreBorder:!0,isRenderable:Ot,page:pt,viewport:yt},function(bt){return _.createElement("div",B({},bt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":ze.id,onClick:bt.popup.toggleOnClick,onMouseEnter:bt.popup.openOnHover,onMouseLeave:bt.popup.closeOnHover}),bt.slot.children)})},Lr=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=ze.hasPopup===!1,Rt=zt(ze),Ft=kt(ze),Ot=!!(ze.hasPopup||Rt||Ft);return _.createElement(or,{annotation:ze,hasPopup:Ct,ignoreBorder:!0,isRenderable:Ot,page:pt,viewport:yt},function(bt){return _.createElement("div",B({},bt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":ze.id,onClick:bt.popup.toggleOnClick,onMouseEnter:bt.popup.openOnHover,onMouseLeave:bt.popup.closeOnHover}),bt.slot.children)})},Zr=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=ze.hasPopup===!1,Rt=zt(ze),Ft=kt(ze),Ot=!!(ze.hasPopup||Rt||Ft);return _.createElement(or,{annotation:ze,hasPopup:Ct,ignoreBorder:!0,isRenderable:Ot,page:pt,viewport:yt},function(bt){return _.createElement("div",B({},bt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":ze.id,onClick:bt.popup.toggleOnClick,onMouseEnter:bt.popup.openOnHover,onMouseLeave:bt.popup.closeOnHover}),bt.slot.children)})},Ur=function(){return _.createElement(W,{size:16},_.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),_.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),_.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),_.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},Xt=function(){return _.createElement(W,{size:16},_.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),_.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),_.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),_.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),_.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),_.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),_.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),_.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),_.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),_.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},_r=function(){return _.createElement(W,{size:16},_.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),_.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Ir=function(){return _.createElement(W,{size:16},_.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),_.createElement("path",{d:"M6 4.5L6 0.5"}),_.createElement("path",{d:"M18 4.5L18 0.5"}),_.createElement("path",{d:"M10 4.5L10 0.5"}),_.createElement("path",{d:"M14 4.5L14 0.5"}))},Vr=function(){return _.createElement(W,{size:16},_.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),_.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),_.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},xn=function(){return _.createElement(W,{size:16},_.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},Sn=function(ve){var ze=ve.annotation,pt=ve.childAnnotation,yt=ve.page,Ct=ve.viewport,Rt=ze.hasPopup===!1,Ft=zt(ze),Ot=kt(ze),bt=!!(ze.hasPopup||Ft||Ot),It=ze.name?ze.name.toLowerCase():"";return _.createElement(or,{annotation:ze,hasPopup:Rt,ignoreBorder:!1,isRenderable:bt,page:yt,viewport:Ct},function(Dt){return _.createElement(_.Fragment,null,_.createElement("div",B({},Dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":ze.id,onClick:Dt.popup.toggleOnClick,onMouseEnter:Dt.popup.openOnHover,onMouseLeave:Dt.popup.closeOnHover}),It&&_.createElement("div",{className:"rpv-core__annotation-text-icon"},It==="check"&&_.createElement(O,null),It==="comment"&&_.createElement(Ur,null),It==="help"&&_.createElement(Xt,null),It==="insert"&&_.createElement(xn,null),It==="key"&&_.createElement(_r,null),It==="note"&&_.createElement(Ir,null),(It==="newparagraph"||It==="paragraph")&&_.createElement(Vr,null)),Dt.slot.children),pt&&pt.annotationType===c.AnnotationType.Popup&&Dt.popup.opened&&_.createElement(Ae,{annotation:pt,page:yt,viewport:Ct}))})},Pn=function(ve){var ze=ve.annotation,pt=ve.page,yt=ve.viewport,Ct=ze.hasPopup===!1,Rt=zt(ze),Ft=kt(ze),Ot=!!(ze.hasPopup||Rt||Ft);return _.createElement(or,{annotation:ze,hasPopup:Ct,ignoreBorder:!0,isRenderable:Ot,page:pt,viewport:yt},function(bt){return _.createElement("div",B({},bt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":ze.id,onClick:bt.popup.toggleOnClick,onMouseEnter:bt.popup.openOnHover,onMouseLeave:bt.popup.closeOnHover}),bt.slot.children)})},zn=function(ve){var ze=ve.annotations,pt=ve.doc,yt=ve.outlines,Ct=ve.page,Rt=ve.pageIndex,Ft=ve.plugins,Ot=ve.rotation,bt=ve.scale,It=ve.onExecuteNamedAction,Dt=ve.onJumpToDest,Kt=_.useRef(),Ht=Ct.getViewport({rotation:Ot,scale:bt}).clone({dontFlip:!0}),Qt=ze.filter(function(Zt){return!Zt.parentId});return j(function(){var Zt=Kt.current;Zt&&Ft.forEach(function(pr){pr.onAnnotationLayerRender&&pr.onAnnotationLayerRender({annotations:Qt,container:Zt,pageIndex:Rt,rotation:Ot,scale:bt})})},[]),_.createElement("div",{ref:Kt,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(Rt)},Qt.map(function(Zt){var pr=ze.find(function(tr){return tr.parentId===Zt.id});switch(Zt.annotationType){case c.AnnotationType.Caret:return _.createElement(A,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.Circle:return _.createElement(K,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.FileAttachment:return _.createElement(Se,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.FreeText:return _.createElement(ae,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.Highlight:return _.createElement(it,{key:Zt.id,annotation:Zt,childAnnotation:pr,page:Ct,viewport:Ht});case c.AnnotationType.Ink:return _.createElement(Ut,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.Line:return _.createElement(Gt,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.Link:return _.createElement(Rr,{key:Zt.id,annotation:Zt,doc:pt,outlines:yt,page:Ct,viewport:Ht,onExecuteNamedAction:It,onJumpToDest:Dt});case c.AnnotationType.Polygon:return _.createElement(Ar,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.Polyline:return _.createElement(hr,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.Popup:return _.createElement(Ae,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.Square:return _.createElement(qr,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.Squiggly:return _.createElement(Wr,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.Stamp:return _.createElement(Lr,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.StrikeOut:return _.createElement(Zr,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});case c.AnnotationType.Text:return _.createElement(Sn,{key:Zt.id,annotation:Zt,childAnnotation:pr,page:Ct,viewport:Ht});case c.AnnotationType.Underline:return _.createElement(Pn,{key:Zt.id,annotation:Zt,page:Ct,viewport:Ht});default:return _.createElement(_.Fragment,{key:Zt.id})}}))},ta=function(ve){var ze=ve.page,pt=ve.renderAnnotations,yt=H(),Ct=_.useState({loading:!0,annotations:[]}),Rt=Ct[0],Ft=Ct[1];return _.useEffect(function(){ze.getAnnotations({intent:"display"}).then(function(Ot){yt.current&&Ft({loading:!1,annotations:Ot})})},[]),Rt.loading?_.createElement(_.Fragment,null):pt(Rt.annotations)},fr=function(ve){var ze=ve.doc,pt=ve.outlines,yt=ve.page,Ct=ve.pageIndex,Rt=ve.plugins,Ft=ve.rotation,Ot=ve.scale,bt=ve.onExecuteNamedAction,It=ve.onJumpToDest;return _.createElement(ta,{page:yt,renderAnnotations:function(Dt){return _.createElement(zn,{annotations:Dt,doc:ze,outlines:pt,page:yt,pageIndex:Ct,plugins:Rt,rotation:Ft,scale:Ot,onExecuteNamedAction:bt,onJumpToDest:It})}})},At=function(ve,ze){var pt=ve%ze;return pt===0?ve:Math.floor(ve-pt)},er=function(ve){var ze=ve.canvasLayerRef,pt=ve.height,yt=ve.page,Ct=ve.pageIndex,Rt=ve.plugins,Ft=ve.rotation,Ot=ve.scale,bt=ve.width,It=ve.onRenderCanvasCompleted,Dt=_.useRef();return j(function(){var Kt=Dt.current;Kt&&Kt.cancel();var Ht=ze.current;Rt.forEach(function(Tr){Tr.onCanvasLayerRender&&Tr.onCanvasLayerRender({ele:Ht,pageIndex:Ct,rotation:Ft,scale:Ot,status:c.LayerRenderStatus.PreRender})});var Qt=yt.getViewport({rotation:Ft,scale:Ot}),Zt=window.devicePixelRatio||1,pr=Math.sqrt(16777216/(Qt.width*Qt.height)),tr=Zt>pr;tr?Ht.style.transform="scale(1, 1)":Ht.style.removeProperty("transform");var gr=Math.min(pr,Zt),sr=function(Tr,zr){var Mr,rn;if(Math.floor(Tr)===Tr)return[Tr,1];var Nr=1/Tr;if(Nr>zr)return[1,zr];if(Math.floor(Nr)===Nr)return[1,Nr];for(var Kr=Tr>1?Nr:Tr,Yr=0,cn=1,Br=1,Gr=1;;){var nn=Yr+Br,un=cn+Gr;if(un>zr)break;Kr<=nn/un?(Br=(Mr=[nn,un])[0],Gr=Mr[1]):(Yr=(rn=[nn,un])[0],cn=rn[1])}return Kr<(Yr/cn+Br/Gr)/2?Kr===Tr?[Yr,cn]:[cn,Yr]:Kr===Tr?[Br,Gr]:[Gr,Br]}(gr,8),lr=sr[0],vr=sr[1];Ht.width=At(Qt.width*gr,lr),Ht.height=At(Qt.height*gr,lr),Ht.style.width="".concat(At(Qt.width,vr),"px"),Ht.style.height="".concat(At(Qt.height,vr),"px"),Ht.hidden=!0;var ur=Ht.getContext("2d",{alpha:!1}),xr=tr||Zt!==1?[gr,0,0,gr,0,0]:null;return Dt.current=yt.render({canvasContext:ur,transform:xr,viewport:Qt}),Dt.current.promise.then(function(){Ht.hidden=!1,Rt.forEach(function(Tr){Tr.onCanvasLayerRender&&Tr.onCanvasLayerRender({ele:Ht,pageIndex:Ct,rotation:Ft,scale:Ot,status:c.LayerRenderStatus.DidRender})}),It()},function(){It()}),function(){Ht&&(Ht.width=0,Ht.height=0)}},[]),_.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(pt,"px"),width:"".concat(bt,"px")}},_.createElement("canvas",{ref:ze}))},ir=function(ve){var ze=ve.height,pt=ve.page,yt=ve.rotation,Ct=ve.scale,Rt=ve.width,Ft=_.useRef();return j(function(){var Ot=Ft.current,bt=pt.getViewport({rotation:yt,scale:Ct});pt.getOperatorList().then(function(It){(function(){var Dt=Ft.current;Dt&&(Dt.innerHTML="")})(),new E.SVGGraphics(pt.commonObjs,pt.objs).getSVG(It,bt).then(function(Dt){Dt.style.height="".concat(ze,"px"),Dt.style.width="".concat(Rt,"px"),Ot.appendChild(Dt)})})},[]),_.createElement("div",{className:"rpv-core__svg-layer",ref:Ft})},Pr=function(ve){var ze=ve.containerRef,pt=ve.page,yt=ve.pageIndex,Ct=ve.plugins,Rt=ve.rotation,Ft=ve.scale,Ot=ve.onRenderTextCompleted,bt=_.useRef(),It=function(){var Dt=ze.current;Dt&&([].slice.call(Dt.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(Kt){return Dt.removeChild(Kt)}),[].slice.call(Dt.querySelectorAll('br[role="presentation"]')).forEach(function(Kt){return Dt.removeChild(Kt)}))};return j(function(){var Dt=bt.current;Dt&&Dt.cancel();var Kt=ze.current;if(Kt){Kt.removeAttribute("data-testid");var Ht=pt.getViewport({rotation:Rt,scale:Ft});return Ct.forEach(function(Qt){Qt.onTextLayerRender&&Qt.onTextLayerRender({ele:Kt,pageIndex:yt,scale:Ft,status:c.LayerRenderStatus.PreRender})}),pt.getTextContent().then(function(Qt){It(),bt.current=E.renderTextLayer({container:Kt,textContent:Qt,viewport:Ht}),bt.current.promise.then(function(){Kt.setAttribute("data-testid","core__text-layer-".concat(yt)),[].slice.call(Kt.children).forEach(function(Zt){Zt.classList.contains("rpv-core__text-layer-text--not")||Zt.classList.add("rpv-core__text-layer-text")}),Ct.forEach(function(Zt){Zt.onTextLayerRender&&Zt.onTextLayerRender({ele:Kt,pageIndex:yt,scale:Ft,status:c.LayerRenderStatus.DidRender})}),Ot()},function(){Kt.removeAttribute("data-testid"),Ot()})}),function(){var Qt;It(),(Qt=bt.current)===null||Qt===void 0||Qt.cancel()}}},[]),_.createElement("div",{className:"rpv-core__text-layer",ref:ze})},ln=function(ve){var ze=ve.doc,pt=ve.outlines,yt=ve.pageIndex,Ct=ve.pageRotation,Rt=ve.pageSize,Ft=ve.plugins,Ot=ve.renderPage,bt=ve.renderQueueKey,It=ve.rotation,Dt=ve.scale,Kt=ve.shouldRender,Ht=ve.onExecuteNamedAction,Qt=ve.onJumpToDest,Zt=ve.onRenderCompleted,pr=ve.onRotatePage,tr=H(),gr=_.useState(null),sr=gr[0],lr=gr[1],vr=_.useState(!1),ur=vr[0],xr=vr[1],Tr=_.useState(!1),zr=Tr[0],Mr=Tr[1],rn=_.useRef(),Nr=_.useRef(),Kr=Math.abs(It+Ct)%180==0,Yr=Rt.pageWidth*Dt,cn=Rt.pageHeight*Dt,Br=Kr?Yr:cn,Gr=Kr?cn:Yr,nn=(Rt.rotation+It+Ct)%360,un=_.useRef(0),Sr=Ot||function(br){return _.createElement(_.Fragment,null,br.canvasLayer.children,br.textLayer.children,br.annotationLayer.children)};return _.useEffect(function(){lr(null),xr(!1),Mr(!1)},[Ct,It,Dt]),_.useEffect(function(){Kt&&tr.current&&!sr&&Lt(ze,yt).then(function(br){tr.current&&(un.current=bt,lr(br))})},[Kt,sr]),_.useEffect(function(){ur&&zr&&(bt!==un.current?(lr(null),xr(!1),Mr(!1)):Zt(yt))},[ur,zr]),_.createElement("div",{className:"rpv-core__page-layer","data-testid":"core__page-layer-".concat(yt),style:{height:"".concat(Gr,"px"),width:"".concat(Br,"px")}},sr?_.createElement(_.Fragment,null,Sr({annotationLayer:{attrs:{},children:_.createElement(fr,{doc:ze,outlines:pt,page:sr,pageIndex:yt,plugins:Ft,rotation:nn,scale:Dt,onExecuteNamedAction:Ht,onJumpToDest:Qt})},canvasLayer:{attrs:{},children:_.createElement(er,{canvasLayerRef:rn,height:Gr,page:sr,pageIndex:yt,plugins:Ft,rotation:nn,scale:Dt,width:Br,onRenderCanvasCompleted:function(){tr.current&&xr(!0)}})},canvasLayerRendered:ur,doc:ze,height:Gr,pageIndex:yt,rotation:nn,scale:Dt,svgLayer:{attrs:{},children:_.createElement(ir,{height:Gr,page:sr,rotation:nn,scale:Dt,width:Br})},textLayer:{attrs:{},children:_.createElement(Pr,{containerRef:Nr,page:sr,pageIndex:yt,plugins:Ft,rotation:nn,scale:Dt,onRenderTextCompleted:function(){tr.current&&Mr(!0)}})},textLayerRendered:zr,width:Br,markRendered:Zt,onRotatePage:function(br){return pr(yt,br)}}),Ft.map(function(br,Cr){return br.renderPageLayer?_.createElement(_.Fragment,{key:Cr},br.renderPageLayer({canvasLayerRef:rn,canvasLayerRendered:ur,doc:ze,height:Gr,pageIndex:yt,rotation:nn,scale:Dt,textLayerRef:Nr,textLayerRendered:zr,width:Br})):_.createElement(_.Fragment,{key:Cr})})):_.createElement(Q,{testId:"core__page-layer-loading-".concat(yt)}))},Jr=function(ve,ze,pt,yt){switch(yt){case c.SpecialZoomLevel.ActualSize:return 1;case c.SpecialZoomLevel.PageFit:return Math.min((ve.clientWidth-17)/pt,(ve.clientHeight-16)/ze);case c.SpecialZoomLevel.PageWidth:return(ve.clientWidth-17)/pt}},en=function(ve){var ze=[];return ve.map(function(pt){ze=ze.concat(pt).concat(function(yt){var Ct=[];return yt.items&&yt.items.length>0&&(Ct=Ct.concat(en(yt.items))),Ct}(pt))}),ze},Dn={buildPageStyles:function(){return{}},tranformSize:function(ve){return ve.size}},tn=function(ve){var ze=ve.currentFile,pt=ve.defaultScale,yt=ve.doc,Ct=ve.initialPage,Rt=ve.initialRotation,Ft=ve.initialScale,Ot=ve.pageLayout,bt=ve.pageSizes,It=ve.plugins,Dt=ve.renderPage,Kt=ve.scrollMode,Ht=ve.viewerState,Qt=ve.onDocumentLoad,Zt=ve.onOpenFile,pr=ve.onPageChange,tr=ve.onRotate,gr=ve.onRotatePage,sr=ve.onZoom,lr=yt.numPages,vr=yt.loadingTask.docId,ur=_.useContext(be).l10n,xr=_.useContext(re),Tr=xr.direction===c.TextDirection.RightToLeft,zr=_.useRef(),Mr=_.useRef(),rn=_.useState(Ct),Nr=rn[0],Kr=rn[1],Yr=_.useRef(null),cn=_.useState(Rt),Br=cn[0],Gr=cn[1],nn=V(Br),un=_.useState(!1),Sr=un[0],br=un[1],Cr=_.useState(new Map),wr=Cr[0],Or=Cr[1],kr=_.useState(Kt),$r=kr[0],pn=kr[1],Hr=V($r),dn=function(rr){var yr=H(),Er=_.useState([]),Xr=Er[0],on=Er[1];return _.useEffect(function(){rr.getOutline().then(function(Qr){if(yr.current&&Qr!==null){var _n=en(Qr);on(_n)}})},[]),Xr}(yt),gn=_.useState(Ft),yn=gn[0],vn=gn[1],Fr=_.useRef(Ht),hn=_.useRef(typeof pt=="string"?pt:null),mn=_.useState(-1),On=mn[0],an=mn[1],jr=_.useState(0),wn=jr[0],Rn=jr[1],bn=ie({doc:yt});_.useEffect(function(){return function(){_t.clear(),Nt.clear()}},[vr]);var Tn,kn,Zn,aa,Ra=_.useMemo(function(){return Object.assign({},Dn,Ot)},[]),si=_.useCallback(function(rr){var yr=[bt[rr].pageHeight,bt[rr].pageWidth],Er=Math.abs(Br)%180==0?{height:yr[0],width:yr[1]}:{height:yr[1],width:yr[0]};return{height:Er.height*yn,width:Er.width*yn}},[Br,yn]),ci=_.useCallback(function(rr){return Math.max(rr-3,0)},[]),li=_.useCallback(function(rr){return Math.min(rr+3,lr-1)},[lr]),ui=_.useCallback(function(rr,yr){return Ra.tranformSize({numPages:lr,pageIndex:rr,size:yr})},[]),sn=ht({estimateSize:si,isRtl:Tr,numberOfItems:lr,parentRef:Mr,scrollMode:$r,setStartRange:ci,setEndRange:li,transformSize:ui}),di=(Tn=function(rr){hn.current&&(an(-1),Vn(hn.current))},kn=200,Zn=_.useRef(),aa=function(){Zn.current&&clearTimeout(Zn.current)},_.useEffect(function(){return function(){return aa()}},[]),_.useCallback(function(){for(var rr=[],yr=0;yr<arguments.length;yr++)rr[yr]=arguments[yr];aa(),Zn.current=setTimeout(function(){Tn.apply(void 0,rr)},kn)},[Tn,kn]));(function(rr){var yr=rr.targetRef,Er=rr.onResize;j(function(){var Xr=new ResizeObserver(function(Qr){Qr.forEach(function(_n){Er(_n.target)})}),on=yr.current;if(on)return Xr.observe(on),function(){Xr.unobserve(on)}},[])})({targetRef:Mr,onResize:di});var Fn=function(rr){var yr=rr;It.forEach(function(Er){Er.onViewerStateChange&&(yr=Er.onViewerStateChange(yr))}),Fr.current=yr},fi=function(){return Mr.current},pi=function(){return Fr.current},Pa=_.useCallback(function(rr,yr,Er,Xr){var on=Mr.current,Qr=Fr.current;on&&Qr&&Lt(yt,rr).then(function(_n){var An=_n.getViewport({scale:1}),In=0,Yn=(typeof yr=="function"?yr(An.width,An.height):yr)||0,Gn=(typeof Er=="function"?Er(An.width,An.height):Er)||0,Ln=Qr.scale;switch(Xr){case c.SpecialZoomLevel.PageFit:In=0,Gn=0,Vn(c.SpecialZoomLevel.PageFit);break;case c.SpecialZoomLevel.PageWidth:Ln=Jr(on,bt[rr].pageHeight,bt[rr].pageWidth,c.SpecialZoomLevel.PageWidth),In=(An.height-Yn)*Ln,Gn*=Ln,Vn(Ln);break;default:In=(An.height-Yn)*Ln,Gn*=Ln}switch(Qr.scrollMode){case c.ScrollMode.Horizontal:sn.scrollToItem(rr,{left:Gn,top:0});break;case c.ScrollMode.Vertical:default:sn.scrollToItem(rr,{left:0,top:In})}})},[]),$n=_.useCallback(function(rr){0<=rr&&rr<lr&&sn.scrollToItem(rr,{left:0,top:0})},[]),Oa=_.useCallback(function(rr){var yr,Er;(yr=rr.name,Er=yr.split(/\./).pop(),Er?Er.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(Xr){var on=new FileReader;on.readAsArrayBuffer(rr),on.onload=function(){var Qr=new Uint8Array(on.result);Xr(Qr)}}).then(function(Xr){Zt(rr.name,Xr)})},[Zt]),$a=_.useCallback(function(rr){var yr=rr===c.RotateDirection.Backward?-90:90,Er=Fr.current.rotation,Xr=Er===360||Er===-360?yr:Er+yr;bn.markNotRendered(),Gr(Xr),Fn(B(B({},Fr.current),{rotation:Xr})),tr({direction:rr,doc:yt,rotation:Xr})},[]),ia=_.useCallback(function(rr,yr){var Er=yr===c.RotateDirection.Backward?-90:90,Xr=Fr.current.pagesRotation,on=(Xr.has(rr)?Xr.get(rr):Rt)+Er,Qr=Xr.set(rr,on);Or(Qr),br(function(_n){return!_n}),Fn(B(B({},Fr.current),{pagesRotation:Qr,rotatedPage:rr})),gr({direction:yr,doc:yt,pageIndex:rr,rotation:on}),bn.markRendering(rr),an(rr)},[]),Ia=_.useCallback(function(rr){Fn(B(B({},Fr.current),{scrollMode:rr})),pn(rr)},[]),Vn=_.useCallback(function(rr){var yr=Mr.current,Er=Fr.current.pageIndex;if(!(Er<0||Er>=lr)){var Xr=bt[Er].pageHeight,on=bt[Er].pageWidth,Qr=yr?typeof rr=="string"?Jr(yr,Xr,on,rr):rr:1;hn.current=typeof rr=="string"?rr:null,Qr!==Fr.current.scale&&(sn.zoom(Qr/Fr.current.scale),Rn(function(_n){return _n+1}),bn.markNotRendered(),vn(Qr),sr({doc:yt,scale:Qr}),Fn(B(B({},Fr.current),{scale:Qr})))}},[]);_.useEffect(function(){var rr={getPagesContainer:fi,getViewerState:pi,jumpToDestination:Pa,jumpToPage:$n,openFile:Oa,rotate:$a,rotatePage:ia,setViewerState:Fn,switchScrollMode:Ia,zoom:Vn};return It.forEach(function(yr){yr.install&&yr.install(rr)}),function(){It.forEach(function(yr){yr.uninstall&&yr.uninstall(rr)})}},[vr]),_.useEffect(function(){Qt({doc:yt,file:ze}),It.forEach(function(rr){rr.onDocumentLoad&&rr.onDocumentLoad({doc:yt,file:ze})}),Ct&&$n(Ct)},[vr]),j(function(){var rr=Fr.current.pageIndex;rr>-1&&Hr!==$r&&sn.scrollToItem(rr,{left:0,top:0})},[$r]),j(function(){var rr=Fr.current.pageIndex;rr>-1&&nn!==Br&&sn.scrollToItem(rr,{left:0,top:0})},[Br]),_.useEffect(function(){sn.isSmoothScrolling||Yr.current!==null&&Yr.current===Nr||(Yr.current=Nr,pr({currentPage:Nr,doc:yt}))},[Nr,sn.isSmoothScrolling]),_.useEffect(function(){var rr=sn.startRange,yr=sn.endRange,Er=sn.maxVisbilityIndex,Xr=sn.virtualItems,on=Er;Kr(on),Fn(B(B({},Fr.current),{pageIndex:on})),bn.setRange(rr,yr);for(var Qr=function(An){var In=Xr.find(function(Yn){return Yn.index===An});In&&bn.setVisibility(An,In.visibility)},_n=rr;_n<=yr;_n++)Qr(_n);Na()},[sn.startRange,sn.endRange,sn.maxVisbilityIndex,Sr,Br,yn]);var hi=_.useCallback(function(rr){bn.markRendered(rr),Na()},[wn]),Na=function(){var rr=bn.getHighestPriorityPage();rr>-1&&bn.isInRange(rr)&&(bn.markRendering(rr),an(rr))},mi=function(rr){var yr=Nr-1,Er=Nr+1;switch(rr){case"FirstPage":$n(0);break;case"LastPage":$n(lr-1);break;case"NextPage":Er<lr&&$n(Er);break;case"PrevPage":yr>=0&&$n(yr)}},gi=_.useCallback(function(){var rr=ur&&ur.core?ur.core.pageLabel:"Page {{pageIndex}}",yr={attrs:{"data-testid":"core__inner-container",ref:zr,style:{height:"100%"}},children:_.createElement(_.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:ne({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":$r===c.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":Tr,"rpv-core__inner-pages--vertical":$r===c.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":$r===c.ScrollMode.Wrapped}),ref:Mr,style:{height:"100%",overflow:"auto",position:"relative"}},children:_.createElement("div",{style:sn.getContainerStyles()},sn.virtualItems.map(function(Er){return _.createElement("div",{"aria-label":rr.replace("{{pageIndex}}","".concat(Er.index+1)),className:"rpv-core__inner-page",key:Er.index,role:"region",style:Object.assign({},sn.getItemStyles(Er),Ra.buildPageStyles({numPages:lr,pageIndex:Er.index}))},_.createElement(ln,{doc:yt,outlines:dn,pageIndex:Er.index,pageRotation:wr.has(Er.index)?wr.get(Er.index):0,pageSize:bt[Er.index],plugins:It,renderPage:Dt,renderQueueKey:wn,rotation:Br,scale:yn,shouldRender:On===Er.index,onExecuteNamedAction:mi,onJumpToDest:Pa,onRenderCompleted:hi,onRotatePage:ia}))}))}};return It.forEach(function(Er){Er.renderViewer&&(yr=Er.renderViewer({containerRef:zr,doc:yt,pagesRotation:wr,pageSizes:bt,rotation:Br,slot:yr,themeContext:xr,jumpToPage:$n,openFile:Oa,rotate:$a,rotatePage:ia,switchScrollMode:Ia,zoom:Vn}))}),yr},[It,sn]),Da=_.useCallback(function(rr){return _.createElement("div",B({},rr.attrs,{style:rr.attrs&&rr.attrs.style?rr.attrs.style:{}}),rr.children,rr.subSlot&&Da(rr.subSlot))},[]);return Da(gi())},Mn=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Wn=function(ve){var ze=ve.defaultScale,pt=ve.doc,yt=ve.render,Ct=ve.scrollMode,Rt=_.useRef(),Ft=_.useState(1),Ot=Ft[0],bt=Ft[1],It=_.useState([]),Dt=It[0],Kt=It[1];return _.useLayoutEffect(function(){var Ht=Array(pt.numPages).fill(0).map(function(Qt,Zt){return new Promise(function(pr,tr){Lt(pt,Zt).then(function(gr){var sr=gr.getViewport({scale:1});pr({pageHeight:sr.height,pageWidth:sr.width,rotation:sr.rotation})})})});Promise.all(Ht).then(function(Qt){Kt(Qt);var Zt=Rt.current;if(Zt&&Qt.length!==0){var pr=Qt[0].pageWidth,tr=Qt[0].pageHeight,gr=Zt.parentElement,sr=(gr.clientWidth-45)/pr,lr=(gr.clientHeight-45)/tr,vr=sr;switch(Ct){case c.ScrollMode.Horizontal:vr=Math.min(sr,lr);break;case c.ScrollMode.Vertical:default:vr=sr}var ur,xr,Tr=ze?typeof ze=="string"?Jr(gr,tr,pr,ze):ze:(ur=vr,(xr=Mn.findIndex(function(zr){return zr>=ur}))===-1||xr===0?ur:Mn[xr-1]);bt(Tr)}})},[pt.loadingTask.docId]),Dt.length===0?_.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:Rt},_.createElement(Q,null)):yt(Dt,Ot)},qn=function(){};(function(ve){ve[ve.REQUIRE_PASSWORD=0]="REQUIRE_PASSWORD",ve[ve.WRONG_PASSWORD=1]="WRONG_PASSWORD"})(mr||(mr={}));var ra=function(ve){function ze(pt,yt){var Ct=ve.call(this)||this;return Ct.verifyPassword=pt,Ct.submitPassword=yt,Ct}return U(ze,ve),ze}(qn),ai=function(ve){var ze=ve.submitPassword,pt=ve.verifyPassword,yt=ve.onDocumentAskPassword,Ct=_.useContext(be).l10n,Rt=_.useState(""),Ft=Rt[0],Ot=Rt[1],bt=_.useContext(re).direction===c.TextDirection.RightToLeft,It=function(){return pt(Ft)};return _.useEffect(function(){yt&&yt({verifyPassword:pt})},[]),_.createElement("div",{className:"rpv-core__asking-password-wrapper"},_.createElement("div",{className:ne({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":bt})},_.createElement("div",{className:"rpv-core__asking-password-message"},ze===mr.REQUIRE_PASSWORD&&Ct.core.askingPassword.requirePasswordToOpen,ze===mr.WRONG_PASSWORD&&Ct.core.wrongPassword.tryAgain),_.createElement("div",{className:"rpv-core__asking-password-body"},_.createElement("div",{className:ne({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!bt,"rpv-core__asking-password-input--rtl":bt})},_.createElement(X,{testId:"core__asking-password-input",type:"password",value:Ft,onChange:Ot,onKeyDown:function(Dt){Dt.key==="Enter"&&It()}})),_.createElement(Y,{onClick:It},Ct.core.askingPassword.submit))))},Ca=function(ve){function ze(pt){var yt=ve.call(this)||this;return yt.doc=pt,yt}return U(ze,ve),ze}(qn),Aa=function(ve){function ze(pt){var yt=ve.call(this)||this;return yt.error=pt,yt}return U(ze,ve),ze}(qn),na=function(ve){function ze(pt){var yt=ve.call(this)||this;return yt.percentages=pt,yt}return U(ze,ve),ze}(qn),ii=function(ve){var ze=ve.characterMap,pt=ve.file,yt=ve.httpHeaders,Ct=ve.render,Rt=ve.renderError,Ft=ve.renderLoader,Ot=ve.transformGetDocumentParams,bt=ve.withCredentials,It=ve.onDocumentAskPassword,Dt=_.useContext(re).direction===c.TextDirection.RightToLeft,Kt=_.useState(new na(0)),Ht=Kt[0],Qt=Kt[1],Zt=_.useState(0);Zt[0],Zt[1];var pr=_.useRef(""),tr=_.useState(null);tr[0],tr[1];var gr=H();return _.useEffect(function(){pr.current="",Qt(new na(0));var sr=new E.PDFWorker({name:"PDFWorker_".concat(Date.now())}),lr=Object.assign({httpHeaders:yt,withCredentials:bt,worker:sr},typeof pt=="string"?{url:pt}:{data:pt},ze?{cMapUrl:ze.url,cMapPacked:ze.isCompressed}:{}),vr=Ot?Ot(lr):lr,ur=E.getDocument(vr);return ur.onPassword=function(xr,Tr){switch(Tr){case E.PasswordResponses.NEED_PASSWORD:gr.current&&Qt(new ra(xr,mr.REQUIRE_PASSWORD));break;case E.PasswordResponses.INCORRECT_PASSWORD:gr.current&&Qt(new ra(xr,mr.WRONG_PASSWORD))}},ur.onProgress=function(xr){var Tr=xr.total>0?Math.min(100,100*xr.loaded/xr.total):100;gr.current&&pr.current===""&&Qt(new na(Tr))},ur.promise.then(function(xr){pr.current=xr.loadingTask.docId,gr.current&&Qt(new Ca(xr))},function(xr){return gr.current&&!sr.destroyed&&Qt(new Aa({message:xr.message||"Cannot load document",name:xr.name}))}),function(){ur.destroy(),sr.destroy()}},[pt]),Ht instanceof ra?_.createElement(ai,{submitPassword:Ht.submitPassword,verifyPassword:Ht.verifyPassword,onDocumentAskPassword:It}):Ht instanceof Ca?Ct(Ht.doc):Ht instanceof Aa?Rt?Rt(Ht.error):_.createElement("div",{className:ne({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Dt})},_.createElement("div",{className:"rpv-core__doc-error-text"},Ht.error.message)):_.createElement("div",{"data-testid":"core__doc-loading",className:ne({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Dt})},Ft?Ft(Ht.percentages):_.createElement(Q,null))},oi=function(ve,ze){var pt=_.useMemo(function(){return ve==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":ve},[]),yt=_.useState(pt),Ct=yt[0],Rt=yt[1],Ft=V(Ct);return _.useEffect(function(){if(ve==="auto"){var Ot=window.matchMedia("(prefers-color-scheme: dark)"),bt=function(It){Rt(It.matches?"dark":"light")};return Ot.addEventListener("change",bt),function(){return Ot.removeEventListener("change",bt)}}},[]),_.useEffect(function(){Ct!==Ft&&ze&&ze(Ct)},[Ct]),_.useEffect(function(){ve!==Ct&&Rt(ve)},[ve]),{currentTheme:Ct,setCurrentTheme:Rt}};c.Button=function(ve){var ze=ve.children,pt=ve.testId,yt=ve.onClick,Ct=_.useContext(re).direction===c.TextDirection.RightToLeft,Rt=pt?{"data-testid":pt}:{};return _.createElement("button",B({className:ne({"rpv-core__button":!0,"rpv-core__button--rtl":Ct}),type:"button",onClick:yt},Rt),ze)},c.Icon=W,c.LazyRender=function(ve){var ze=ve.attrs,pt=ve.children,yt=ve.testId,Ct=_.useState(!1),Rt=Ct[0],Ft=Ct[1],Ot=yt?B(B({},ze),{"data-testid":yt}):ze,bt=z({once:!0,onVisibilityChanged:function(It){It.isVisible&&Ft(!0)}});return _.createElement("div",B({ref:bt},Ot),Rt&&pt)},c.LocalizationContext=be,c.Menu=function(ve){var ze=ve.children,pt=_.useRef(),yt=_.useRef([]),Ct=_.useContext(re).direction===c.TextDirection.RightToLeft,Rt=function(Ot){if(pt.current)switch(Ot.key){case"Tab":Ot.preventDefault();break;case"ArrowDown":Ot.preventDefault(),Ft(function(bt,It){return It+1});break;case"ArrowUp":Ot.preventDefault(),Ft(function(bt,It){return It-1});break;case"End":Ot.preventDefault(),Ft(function(bt,It){return bt.length-1});break;case"Home":Ot.preventDefault(),Ft(function(bt,It){return 0})}},Ft=function(Ot){if(pt.current){var bt=yt.current,It=bt.findIndex(function(Kt){return Kt.getAttribute("tabindex")==="0"}),Dt=Math.min(bt.length-1,Math.max(0,Ot(bt,It)));It>=0&&It<=bt.length-1&&bt[It].setAttribute("tabindex","-1"),bt[Dt].setAttribute("tabindex","0"),bt[Dt].focus()}};return j(function(){var Ot=pt.current;if(Ot){var bt=function(It){var Dt=[];return It.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(Kt){if(Kt instanceof HTMLElement){var Ht=Kt.parentElement;(Ht===It||window.getComputedStyle(Ht).display!=="none")&&Dt.push(Kt)}}),Dt}(Ot);yt.current=bt}},[]),j(function(){return document.addEventListener("keydown",Rt),function(){document.removeEventListener("keydown",Rt)}},[]),_.createElement("div",{ref:pt,"aria-orientation":"vertical",className:ne({"rpv-core__menu":!0,"rpv-core__menu--rtl":Ct}),role:"menu",tabIndex:0},ze)},c.MenuDivider=function(){return _.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},c.MenuItem=function(ve){var ze=ve.checked,pt=ze!==void 0&&ze,yt=ve.children,Ct=ve.icon,Rt=Ct===void 0?null:Ct,Ft=ve.isDisabled,Ot=Ft!==void 0&&Ft,bt=ve.testId,It=ve.onClick,Dt=_.useContext(re).direction===c.TextDirection.RightToLeft,Kt=bt?{"data-testid":bt}:{};return _.createElement("button",B({className:ne({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":Ot,"rpv-core__menu-item--ltr":!Dt,"rpv-core__menu-item--rtl":Dt}),role:"menuitem",tabIndex:-1,type:"button",onClick:It},Kt),_.createElement("div",{className:ne({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!Dt,"rpv-core__menu-item-icon--rtl":Dt})},Rt),_.createElement("div",{className:ne({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!Dt,"rpv-core__menu-item-label--rtl":Dt})},yt),_.createElement("div",{className:ne({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!Dt,"rpv-core__menu-item-check--rtl":Dt})},pt&&_.createElement(O,null)))},c.MinimalButton=function(ve){var ze=ve.ariaLabel,pt=ze===void 0?"":ze,yt=ve.ariaKeyShortcuts,Ct=yt===void 0?"":yt,Rt=ve.children,Ft=ve.isDisabled,Ot=Ft!==void 0&&Ft,bt=ve.isSelected,It=bt!==void 0&&bt,Dt=ve.testId,Kt=ve.onClick,Ht=_.useContext(re).direction===c.TextDirection.RightToLeft,Qt=Dt?{"data-testid":Dt}:{};return _.createElement("button",B({"aria-label":pt},Ct&&{"aria-keyshortcuts":Ct},Ot&&{"aria-disabled":!0},{className:ne({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":Ot,"rpv-core__minimal-button--rtl":Ht,"rpv-core__minimal-button--selected":It}),type:"button",onClick:Kt},Qt),Rt)},c.Modal=function(ve){var ze=ve.ariaControlsSuffix,pt=ve.closeOnClickOutside,yt=ve.closeOnEscape,Ct=ve.content,Rt=ve.isOpened,Ft=Rt!==void 0&&Rt,Ot=ve.target,bt=ze||"".concat(Oe());return _.createElement(Et,{target:Ot?function(It,Dt){return _.createElement("div",{"aria-expanded":Dt?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(bt)},Ot(It,Dt))}:null,content:function(It){return _.createElement(ft,null,_.createElement(St,{ariaControlsSuffix:bt,closeOnClickOutside:pt,closeOnEscape:yt,onToggle:It},Ct(It)))},isOpened:Ft})},c.Popover=function(ve){var ze=ve.ariaHasPopup,pt=ze===void 0?"dialog":ze,yt=ve.ariaControlsSuffix,Ct=ve.closeOnClickOutside,Rt=ve.closeOnEscape,Ft=ve.content,Ot=ve.lockScroll,bt=Ot===void 0||Ot,It=ve.offset,Dt=ve.position,Kt=ve.target,Ht=wt(!1),Qt=Ht.opened,Zt=Ht.toggle,pr=_.useRef(),tr=_.useMemo(function(){return yt||"".concat(Oe())},[]);return _.createElement("div",{ref:pr,"aria-expanded":Qt?"true":"false","aria-haspopup":pt,"aria-controls":"rpv-core__popver-body-".concat(tr)},Kt(Zt,Qt),Qt&&_.createElement(_.Fragment,null,bt&&_.createElement(Ze,{closeOnEscape:Rt,onClose:Zt}),_.createElement(tt,{ariaControlsSuffix:tr,closeOnClickOutside:Ct,offset:It,position:Dt,targetRef:pr,onClose:Zt},Ft(Zt))))},c.PrimaryButton=Y,c.ProgressBar=function(ve){var ze=ve.progress,pt=_.useContext(re).direction===c.TextDirection.RightToLeft;return _.createElement("div",{className:ne({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":pt})},_.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(ze,"%")}},ze,"%"))},c.Separator=function(){return _.createElement("div",{className:"rpv-core__separator"})},c.Spinner=Q,c.Splitter=function(ve){var ze=ve.constrain,pt=_.useContext(re).direction===c.TextDirection.RightToLeft,yt=_.useRef(),Ct=_.useRef(),Rt=_.useRef(),Ft=_.useRef(0),Ot=_.useRef(0),bt=_.useRef(0),It=_.useRef(0),Dt={capture:!0},Kt=function(Qt){var Zt=yt.current,pr=Ct.current,tr=Rt.current;if(Zt&&pr&&tr){var gr=It.current,sr=Qt.clientX-Ft.current,lr=bt.current+(pt?-sr:sr),vr=Zt.parentElement.getBoundingClientRect().width,ur=100*lr/vr;if(Zt.classList.add("rpv-core__splitter--resizing"),ze){var xr=vr-lr-gr;if(!ze({firstHalfPercentage:ur,firstHalfSize:lr,secondHalfPercentage:100*xr/vr,secondHalfSize:xr}))return}pr.style.width="".concat(ur,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),pr.classList.add("rpv-core__splitter-sibling--resizing"),tr.classList.add("rpv-core__splitter-sibling--resizing")}},Ht=function(Qt){var Zt=yt.current,pr=Ct.current,tr=Rt.current;Zt&&pr&&tr&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),Zt.classList.remove("rpv-core__splitter--resizing"),pr.classList.remove("rpv-core__splitter-sibling--resizing"),tr.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Kt,Dt),document.removeEventListener("mouseup",Ht,Dt))};return _.useEffect(function(){var Qt=yt.current;Qt&&(It.current=Qt.getBoundingClientRect().width,Ct.current=Qt.previousElementSibling,Rt.current=Qt.nextElementSibling)},[]),_.createElement("div",{ref:yt,className:"rpv-core__splitter",onMouseDown:function(Qt){var Zt=Ct.current;Zt&&(Ft.current=Qt.clientX,Ot.current=Qt.clientY,bt.current=Zt.getBoundingClientRect().width,document.addEventListener("mousemove",Kt,Dt),document.addEventListener("mouseup",Ht,Dt))}})},c.TextBox=X,c.ThemeContext=re,c.Tooltip=function(ve){var ze=ve.ariaControlsSuffix,pt=ve.content,yt=ve.offset,Ct=ve.position,Rt=ve.target,Ft=wt(!1),Ot=Ft.opened,bt=Ft.toggle,It=_.useRef(),Dt=_.useRef(),Kt=_.useMemo(function(){return ze||"".concat(Oe())},[]);Tt(function(){It.current&&document.activeElement&&It.current.contains(document.activeElement)&&Qt()});var Ht=function(){bt(c.ToggleStatus.Open)},Qt=function(){bt(c.ToggleStatus.Close)};return _.createElement(_.Fragment,null,_.createElement("div",{ref:It,"aria-describedby":"rpv-core__tooltip-body-".concat(Kt),onBlur:function(Zt){Zt.relatedTarget instanceof HTMLElement&&Zt.currentTarget.parentElement&&Zt.currentTarget.parentElement.contains(Zt.relatedTarget)?Dt.current&&(Dt.current.style.display="none"):Qt()},onFocus:Ht,onMouseEnter:Ht,onMouseLeave:Qt},Rt),Ot&&_.createElement(Qe,{ariaControlsSuffix:Kt,contentRef:Dt,offset:yt,position:Ct,targetRef:It},pt()))},c.Viewer=function(ve){var ze=ve.characterMap,pt=ve.defaultScale,yt=ve.fileUrl,Ct=ve.httpHeaders,Rt=Ct===void 0?{}:Ct,Ft=ve.initialPage,Ot=Ft===void 0?0:Ft,bt=ve.pageLayout,It=ve.initialRotation,Dt=It===void 0?0:It,Kt=ve.localization,Ht=ve.plugins,Qt=Ht===void 0?[]:Ht,Zt=ve.renderError,pr=ve.renderPage,tr=ve.renderLoader,gr=ve.scrollMode,sr=gr===void 0?c.ScrollMode.Vertical:gr,lr=ve.transformGetDocumentParams,vr=ve.theme,ur=vr===void 0?{direction:c.TextDirection.LeftToRight,theme:"light"}:vr,xr=ve.withCredentials,Tr=xr!==void 0&&xr,zr=ve.onDocumentAskPassword,Mr=ve.onDocumentLoad,rn=Mr===void 0?function(){}:Mr,Nr=ve.onPageChange,Kr=Nr===void 0?function(){}:Nr,Yr=ve.onRotate,cn=Yr===void 0?function(){}:Yr,Br=ve.onRotatePage,Gr=Br===void 0?function(){}:Br,nn=ve.onSwitchTheme,un=nn===void 0?function(){}:nn,Sr=ve.onZoom,br=Sr===void 0?function(){}:Sr,Cr=_.useState({data:yt,name:typeof yt=="string"?yt:"",shouldLoad:!1}),wr=Cr[0],Or=Cr[1],kr=function(an,jr){Or({data:jr,name:an,shouldLoad:!0})},$r=_.useState(!1),pn=$r[0],Hr=$r[1],dn=V(wr);_.useEffect(function(){var an,jr,wn,Rn;an=dn.data,Rn=typeof(jr=yt),(wn=typeof an)=="string"&&Rn==="string"&&an===jr||wn==="object"&&Rn==="object"&&an.length===jr.length&&an.every(function(bn,Tn){return bn===jr[Tn]})||Or({data:yt,name:typeof yt=="string"?yt:"",shouldLoad:pn})},[yt,pn]);var gn=z({onVisibilityChanged:function(an){Hr(an.isVisible),an.isVisible&&Or(function(jr){return Object.assign({},jr,{shouldLoad:!0})})}}),yn=typeof ur=="string"?{direction:c.TextDirection.LeftToRight,theme:ur}:ur,vn=_.useState(Kt||Ee),Fr=vn[0],hn=vn[1],mn={l10n:Fr,setL10n:hn},On=Object.assign({},{direction:yn.direction},oi(yn.theme||"light",un));return _.useEffect(function(){Kt&&hn(Kt)},[Kt]),_.createElement(be.Provider,{value:mn},_.createElement(re.Provider,{value:On},_.createElement("div",{ref:gn,className:"rpv-core__viewer rpv-core__viewer--".concat(On.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},wr.shouldLoad&&_.createElement(ii,{characterMap:ze,file:wr.data,httpHeaders:Rt,render:function(an){return _.createElement(Wn,{defaultScale:pt,doc:an,render:function(jr,wn){return _.createElement(tn,{currentFile:{data:wr.data,name:wr.name},defaultScale:pt,doc:an,initialPage:Ot,initialRotation:Dt,initialScale:wn,pageLayout:bt,pageSizes:jr,plugins:Qt,renderPage:pr,scrollMode:sr,viewerState:{file:wr,pageIndex:-1,pageHeight:jr[0].pageHeight,pageWidth:jr[0].pageWidth,pagesRotation:new Map,rotation:Dt,scale:wn,scrollMode:sr},onDocumentLoad:rn,onOpenFile:kr,onPageChange:Kr,onRotate:cn,onRotatePage:Gr,onZoom:br})},scrollMode:sr})},renderError:Zt,renderLoader:tr,transformGetDocumentParams:lr,withCredentials:Tr,onDocumentAskPassword:zr}))))},c.Worker=function(ve){var ze=ve.children,pt=ve.workerUrl;return E.GlobalWorkerOptions.workerSrc=pt,_.createElement(_.Fragment,null,ze)},c.classNames=ne,c.createStore=function(ve){var ze=ve||{},pt={},yt=function(Rt,Ft){var Ot;ze=B(B({},ze),((Ot={})[Rt]=Ft,Ot)),(pt[Rt]||[]).forEach(function(bt){return bt(ze[Rt])})},Ct=function(Rt){return ze[Rt]};return{subscribe:function(Rt,Ft){pt[Rt]=(pt[Rt]||[]).concat(Ft)},unsubscribe:function(Rt,Ft){pt[Rt]=(pt[Rt]||[]).filter(function(Ot){return Ot!==Ft})},update:function(Rt,Ft){yt(Rt,Ft)},updateCurrentValue:function(Rt,Ft){var Ot=Ct(Rt);Ot!==void 0&&yt(Rt,Ft(Ot))},get:function(Rt){return Ct(Rt)}}},c.getDestination=Vt,c.getPage=Lt,c.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},c.useIntersectionObserver=z,c.useIsMounted=H,c.useIsomorphicLayoutEffect=j,c.useRenderQueue=ie})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2022 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(c){c.exports=core_min})(lib);const index="";var libExports$1=requireLib(),buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(c){var d=c.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=c.indexOf("=");g===-1&&(g=d);var v=g===d?0:4-g%4;return[g,v]}function byteLength(c){var d=getLens(c),g=d[0],v=d[1];return(g+v)*3/4-v}function _byteLength(c,d,g){return(d+g)*3/4-g}function toByteArray(c){var d,g=getLens(c),v=g[0],b=g[1],_=new Arr(_byteLength(c,v,b)),E=0,R=b>0?v-4:v,U;for(U=0;U<R;U+=4)d=revLookup[c.charCodeAt(U)]<<18|revLookup[c.charCodeAt(U+1)]<<12|revLookup[c.charCodeAt(U+2)]<<6|revLookup[c.charCodeAt(U+3)],_[E++]=d>>16&255,_[E++]=d>>8&255,_[E++]=d&255;return b===2&&(d=revLookup[c.charCodeAt(U)]<<2|revLookup[c.charCodeAt(U+1)]>>4,_[E++]=d&255),b===1&&(d=revLookup[c.charCodeAt(U)]<<10|revLookup[c.charCodeAt(U+1)]<<4|revLookup[c.charCodeAt(U+2)]>>2,_[E++]=d>>8&255,_[E++]=d&255),_}function tripletToBase64(c){return lookup[c>>18&63]+lookup[c>>12&63]+lookup[c>>6&63]+lookup[c&63]}function encodeChunk(c,d,g){for(var v,b=[],_=d;_<g;_+=3)v=(c[_]<<16&16711680)+(c[_+1]<<8&65280)+(c[_+2]&255),b.push(tripletToBase64(v));return b.join("")}function fromByteArray(c){for(var d,g=c.length,v=g%3,b=[],_=16383,E=0,R=g-v;E<R;E+=_)b.push(encodeChunk(c,E,E+_>R?R:E+_));return v===1?(d=c[g-1],b.push(lookup[d>>2]+lookup[d<<4&63]+"==")):v===2&&(d=(c[g-2]<<8)+c[g-1],b.push(lookup[d>>10]+lookup[d>>4&63]+lookup[d<<2&63]+"=")),b.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(c,d,g,v,b){var _,E,R=b*8-v-1,U=(1<<R)-1,P=U>>1,B=-7,ee=g?b-1:0,re=g?-1:1,ne=c[d+ee];for(ee+=re,_=ne&(1<<-B)-1,ne>>=-B,B+=R;B>0;_=_*256+c[d+ee],ee+=re,B-=8);for(E=_&(1<<-B)-1,_>>=-B,B+=v;B>0;E=E*256+c[d+ee],ee+=re,B-=8);if(_===0)_=1-P;else{if(_===U)return E?NaN:(ne?-1:1)*(1/0);E=E+Math.pow(2,v),_=_-P}return(ne?-1:1)*E*Math.pow(2,_-v)};ieee754.write=function(c,d,g,v,b,_){var E,R,U,P=_*8-b-1,B=(1<<P)-1,ee=B>>1,re=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,ne=v?0:_-1,j=v?1:-1,z=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(R=isNaN(d)?1:0,E=B):(E=Math.floor(Math.log(d)/Math.LN2),d*(U=Math.pow(2,-E))<1&&(E--,U*=2),E+ee>=1?d+=re/U:d+=re*Math.pow(2,1-ee),d*U>=2&&(E++,U/=2),E+ee>=B?(R=0,E=B):E+ee>=1?(R=(d*U-1)*Math.pow(2,b),E=E+ee):(R=d*Math.pow(2,ee-1)*Math.pow(2,b),E=0));b>=8;c[g+ne]=R&255,ne+=j,R/=256,b-=8);for(E=E<<b|R,P+=b;P>0;c[g+ne]=E&255,ne+=j,E/=256,P-=8);c[g+ne-j]|=z*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(c){var d=base64Js,g=ieee754,v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;c.Buffer=R,c.SlowBuffer=Y,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,R.TYPED_ARRAY_SUPPORT=_(),!R.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function _(){try{var V=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(V,M),V.foo()===42}catch{return!1}}Object.defineProperty(R.prototype,"parent",{enumerable:!0,get:function(){if(!!R.isBuffer(this))return this.buffer}}),Object.defineProperty(R.prototype,"offset",{enumerable:!0,get:function(){if(!!R.isBuffer(this))return this.byteOffset}});function E(V){if(V>b)throw new RangeError('The value "'+V+'" is invalid for option "size"');var M=new Uint8Array(V);return Object.setPrototypeOf(M,R.prototype),M}function R(V,M,Z){if(typeof V=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ee(V)}return U(V,M,Z)}R.poolSize=8192;function U(V,M,Z){if(typeof V=="string")return re(V,M);if(ArrayBuffer.isView(V))return j(V);if(V==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(xt(V,ArrayBuffer)||V&&xt(V.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xt(V,SharedArrayBuffer)||V&&xt(V.buffer,SharedArrayBuffer)))return z(V,M,Z);if(typeof V=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var te=V.valueOf&&V.valueOf();if(te!=null&&te!==V)return R.from(te,M,Z);var xe=W(V);if(xe)return xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof V[Symbol.toPrimitive]=="function")return R.from(V[Symbol.toPrimitive]("string"),M,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}R.from=function(V,M,Z){return U(V,M,Z)},Object.setPrototypeOf(R.prototype,Uint8Array.prototype),Object.setPrototypeOf(R,Uint8Array);function P(V){if(typeof V!="number")throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function B(V,M,Z){return P(V),V<=0?E(V):M!==void 0?typeof Z=="string"?E(V).fill(M,Z):E(V).fill(M):E(V)}R.alloc=function(V,M,Z){return B(V,M,Z)};function ee(V){return P(V),E(V<0?0:O(V)|0)}R.allocUnsafe=function(V){return ee(V)},R.allocUnsafeSlow=function(V){return ee(V)};function re(V,M){if((typeof M!="string"||M==="")&&(M="utf8"),!R.isEncoding(M))throw new TypeError("Unknown encoding: "+M);var Z=Q(V,M)|0,te=E(Z),xe=te.write(V,M);return xe!==Z&&(te=te.slice(0,xe)),te}function ne(V){for(var M=V.length<0?0:O(V.length)|0,Z=E(M),te=0;te<M;te+=1)Z[te]=V[te]&255;return Z}function j(V){if(xt(V,Uint8Array)){var M=new Uint8Array(V);return z(M.buffer,M.byteOffset,M.byteLength)}return ne(V)}function z(V,M,Z){if(M<0||V.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(V.byteLength<M+(Z||0))throw new RangeError('"length" is outside of buffer bounds');var te;return M===void 0&&Z===void 0?te=new Uint8Array(V):Z===void 0?te=new Uint8Array(V,M):te=new Uint8Array(V,M,Z),Object.setPrototypeOf(te,R.prototype),te}function W(V){if(R.isBuffer(V)){var M=O(V.length)|0,Z=E(M);return Z.length===0||V.copy(Z,0,0,M),Z}if(V.length!==void 0)return typeof V.length!="number"||Lt(V.length)?E(0):ne(V);if(V.type==="Buffer"&&Array.isArray(V.data))return ne(V.data)}function O(V){if(V>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return V|0}function Y(V){return+V!=V&&(V=0),R.alloc(+V)}R.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==R.prototype},R.compare=function(M,Z){if(xt(M,Uint8Array)&&(M=R.from(M,M.offset,M.byteLength)),xt(Z,Uint8Array)&&(Z=R.from(Z,Z.offset,Z.byteLength)),!R.isBuffer(M)||!R.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===Z)return 0;for(var te=M.length,xe=Z.length,at=0,vt=Math.min(te,xe);at<vt;++at)if(M[at]!==Z[at]){te=M[at],xe=Z[at];break}return te<xe?-1:xe<te?1:0},R.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},R.concat=function(M,Z){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return R.alloc(0);var te;if(Z===void 0)for(Z=0,te=0;te<M.length;++te)Z+=M[te].length;var xe=R.allocUnsafe(Z),at=0;for(te=0;te<M.length;++te){var vt=M[te];if(xt(vt,Uint8Array))at+vt.length>xe.length?R.from(vt).copy(xe,at):Uint8Array.prototype.set.call(xe,vt,at);else if(R.isBuffer(vt))vt.copy(xe,at);else throw new TypeError('"list" argument must be an Array of Buffers');at+=vt.length}return xe};function Q(V,M){if(R.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||xt(V,ArrayBuffer))return V.byteLength;if(typeof V!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);var Z=V.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&Z===0)return 0;for(var xe=!1;;)switch(M){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return Qe(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return Nt(V).length;default:if(xe)return te?-1:Qe(V).length;M=(""+M).toLowerCase(),xe=!0}}R.byteLength=Q;function X(V,M,Z){var te=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,M>>>=0,Z<=M))return"";for(V||(V="utf8");;)switch(V){case"hex":return Pt(this,M,Z);case"utf8":case"utf-8":return St(this,M,Z);case"ascii":return wt(this,M,Z);case"latin1":case"binary":return Et(this,M,Z);case"base64":return Tt(this,M,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Mt(this,M,Z);default:if(te)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),te=!0}}R.prototype._isBuffer=!0;function H(V,M,Z){var te=V[M];V[M]=V[Z],V[Z]=te}R.prototype.swap16=function(){var M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Z=0;Z<M;Z+=2)H(this,Z,Z+1);return this},R.prototype.swap32=function(){var M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Z=0;Z<M;Z+=4)H(this,Z,Z+3),H(this,Z+1,Z+2);return this},R.prototype.swap64=function(){var M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Z=0;Z<M;Z+=8)H(this,Z,Z+7),H(this,Z+1,Z+6),H(this,Z+2,Z+5),H(this,Z+3,Z+4);return this},R.prototype.toString=function(){var M=this.length;return M===0?"":arguments.length===0?St(this,0,M):X.apply(this,arguments)},R.prototype.toLocaleString=R.prototype.toString,R.prototype.equals=function(M){if(!R.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:R.compare(this,M)===0},R.prototype.inspect=function(){var M="",Z=c.INSPECT_MAX_BYTES;return M=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(M+=" ... "),"<Buffer "+M+">"},v&&(R.prototype[v]=R.prototype.inspect),R.prototype.compare=function(M,Z,te,xe,at){if(xt(M,Uint8Array)&&(M=R.from(M,M.offset,M.byteLength)),!R.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(Z===void 0&&(Z=0),te===void 0&&(te=M?M.length:0),xe===void 0&&(xe=0),at===void 0&&(at=this.length),Z<0||te>M.length||xe<0||at>this.length)throw new RangeError("out of range index");if(xe>=at&&Z>=te)return 0;if(xe>=at)return-1;if(Z>=te)return 1;if(Z>>>=0,te>>>=0,xe>>>=0,at>>>=0,this===M)return 0;for(var vt=at-xe,st=te-Z,rt=Math.min(vt,st),ht=this.slice(xe,at),ot=M.slice(Z,te),$t=0;$t<rt;++$t)if(ht[$t]!==ot[$t]){vt=ht[$t],st=ot[$t];break}return vt<st?-1:st<vt?1:0};function G(V,M,Z,te,xe){if(V.length===0)return-1;if(typeof Z=="string"?(te=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Lt(Z)&&(Z=xe?0:V.length-1),Z<0&&(Z=V.length+Z),Z>=V.length){if(xe)return-1;Z=V.length-1}else if(Z<0)if(xe)Z=0;else return-1;if(typeof M=="string"&&(M=R.from(M,te)),R.isBuffer(M))return M.length===0?-1:ie(V,M,Z,te,xe);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?xe?Uint8Array.prototype.indexOf.call(V,M,Z):Uint8Array.prototype.lastIndexOf.call(V,M,Z):ie(V,[M],Z,te,xe);throw new TypeError("val must be string, number or Buffer")}function ie(V,M,Z,te,xe){var at=1,vt=V.length,st=M.length;if(te!==void 0&&(te=String(te).toLowerCase(),te==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(V.length<2||M.length<2)return-1;at=2,vt/=2,st/=2,Z/=2}function rt(kt,zt){return at===1?kt[zt]:kt.readUInt16BE(zt*at)}var ht;if(xe){var ot=-1;for(ht=Z;ht<vt;ht++)if(rt(V,ht)===rt(M,ot===-1?0:ht-ot)){if(ot===-1&&(ot=ht),ht-ot+1===st)return ot*at}else ot!==-1&&(ht-=ht-ot),ot=-1}else for(Z+st>vt&&(Z=vt-st),ht=Z;ht>=0;ht--){for(var $t=!0,ct=0;ct<st;ct++)if(rt(V,ht+ct)!==rt(M,ct)){$t=!1;break}if($t)return ht}return-1}R.prototype.includes=function(M,Z,te){return this.indexOf(M,Z,te)!==-1},R.prototype.indexOf=function(M,Z,te){return G(this,M,Z,te,!0)},R.prototype.lastIndexOf=function(M,Z,te){return G(this,M,Z,te,!1)};function Ee(V,M,Z,te){Z=Number(Z)||0;var xe=V.length-Z;te?(te=Number(te),te>xe&&(te=xe)):te=xe;var at=M.length;te>at/2&&(te=at/2);for(var vt=0;vt<te;++vt){var st=parseInt(M.substr(vt*2,2),16);if(Lt(st))return vt;V[Z+vt]=st}return vt}function be(V,M,Z,te){return dt(Qe(M,V.length-Z),V,Z,te)}function Ce(V,M,Z,te){return dt(lt(M),V,Z,te)}function Oe(V,M,Z,te){return dt(Nt(M),V,Z,te)}function mt(V,M,Z,te){return dt(_t(M,V.length-Z),V,Z,te)}R.prototype.write=function(M,Z,te,xe){if(Z===void 0)xe="utf8",te=this.length,Z=0;else if(te===void 0&&typeof Z=="string")xe=Z,te=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(te)?(te=te>>>0,xe===void 0&&(xe="utf8")):(xe=te,te=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var at=this.length-Z;if((te===void 0||te>at)&&(te=at),M.length>0&&(te<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");xe||(xe="utf8");for(var vt=!1;;)switch(xe){case"hex":return Ee(this,M,Z,te);case"utf8":case"utf-8":return be(this,M,Z,te);case"ascii":case"latin1":case"binary":return Ce(this,M,Z,te);case"base64":return Oe(this,M,Z,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mt(this,M,Z,te);default:if(vt)throw new TypeError("Unknown encoding: "+xe);xe=(""+xe).toLowerCase(),vt=!0}},R.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Tt(V,M,Z){return M===0&&Z===V.length?d.fromByteArray(V):d.fromByteArray(V.slice(M,Z))}function St(V,M,Z){Z=Math.min(V.length,Z);for(var te=[],xe=M;xe<Z;){var at=V[xe],vt=null,st=at>239?4:at>223?3:at>191?2:1;if(xe+st<=Z){var rt,ht,ot,$t;switch(st){case 1:at<128&&(vt=at);break;case 2:rt=V[xe+1],(rt&192)===128&&($t=(at&31)<<6|rt&63,$t>127&&(vt=$t));break;case 3:rt=V[xe+1],ht=V[xe+2],(rt&192)===128&&(ht&192)===128&&($t=(at&15)<<12|(rt&63)<<6|ht&63,$t>2047&&($t<55296||$t>57343)&&(vt=$t));break;case 4:rt=V[xe+1],ht=V[xe+2],ot=V[xe+3],(rt&192)===128&&(ht&192)===128&&(ot&192)===128&&($t=(at&15)<<18|(rt&63)<<12|(ht&63)<<6|ot&63,$t>65535&&$t<1114112&&(vt=$t))}}vt===null?(vt=65533,st=1):vt>65535&&(vt-=65536,te.push(vt>>>10&1023|55296),vt=56320|vt&1023),te.push(vt),xe+=st}return ut(te)}var ft=4096;function ut(V){var M=V.length;if(M<=ft)return String.fromCharCode.apply(String,V);for(var Z="",te=0;te<M;)Z+=String.fromCharCode.apply(String,V.slice(te,te+=ft));return Z}function wt(V,M,Z){var te="";Z=Math.min(V.length,Z);for(var xe=M;xe<Z;++xe)te+=String.fromCharCode(V[xe]&127);return te}function Et(V,M,Z){var te="";Z=Math.min(V.length,Z);for(var xe=M;xe<Z;++xe)te+=String.fromCharCode(V[xe]);return te}function Pt(V,M,Z){var te=V.length;(!M||M<0)&&(M=0),(!Z||Z<0||Z>te)&&(Z=te);for(var xe="",at=M;at<Z;++at)xe+=Vt[V[at]];return xe}function Mt(V,M,Z){for(var te=V.slice(M,Z),xe="",at=0;at<te.length-1;at+=2)xe+=String.fromCharCode(te[at]+te[at+1]*256);return xe}R.prototype.slice=function(M,Z){var te=this.length;M=~~M,Z=Z===void 0?te:~~Z,M<0?(M+=te,M<0&&(M=0)):M>te&&(M=te),Z<0?(Z+=te,Z<0&&(Z=0)):Z>te&&(Z=te),Z<M&&(Z=M);var xe=this.subarray(M,Z);return Object.setPrototypeOf(xe,R.prototype),xe};function Bt(V,M,Z){if(V%1!==0||V<0)throw new RangeError("offset is not uint");if(V+M>Z)throw new RangeError("Trying to access beyond buffer length")}R.prototype.readUintLE=R.prototype.readUIntLE=function(M,Z,te){M=M>>>0,Z=Z>>>0,te||Bt(M,Z,this.length);for(var xe=this[M],at=1,vt=0;++vt<Z&&(at*=256);)xe+=this[M+vt]*at;return xe},R.prototype.readUintBE=R.prototype.readUIntBE=function(M,Z,te){M=M>>>0,Z=Z>>>0,te||Bt(M,Z,this.length);for(var xe=this[M+--Z],at=1;Z>0&&(at*=256);)xe+=this[M+--Z]*at;return xe},R.prototype.readUint8=R.prototype.readUInt8=function(M,Z){return M=M>>>0,Z||Bt(M,1,this.length),this[M]},R.prototype.readUint16LE=R.prototype.readUInt16LE=function(M,Z){return M=M>>>0,Z||Bt(M,2,this.length),this[M]|this[M+1]<<8},R.prototype.readUint16BE=R.prototype.readUInt16BE=function(M,Z){return M=M>>>0,Z||Bt(M,2,this.length),this[M]<<8|this[M+1]},R.prototype.readUint32LE=R.prototype.readUInt32LE=function(M,Z){return M=M>>>0,Z||Bt(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},R.prototype.readUint32BE=R.prototype.readUInt32BE=function(M,Z){return M=M>>>0,Z||Bt(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},R.prototype.readIntLE=function(M,Z,te){M=M>>>0,Z=Z>>>0,te||Bt(M,Z,this.length);for(var xe=this[M],at=1,vt=0;++vt<Z&&(at*=256);)xe+=this[M+vt]*at;return at*=128,xe>=at&&(xe-=Math.pow(2,8*Z)),xe},R.prototype.readIntBE=function(M,Z,te){M=M>>>0,Z=Z>>>0,te||Bt(M,Z,this.length);for(var xe=Z,at=1,vt=this[M+--xe];xe>0&&(at*=256);)vt+=this[M+--xe]*at;return at*=128,vt>=at&&(vt-=Math.pow(2,8*Z)),vt},R.prototype.readInt8=function(M,Z){return M=M>>>0,Z||Bt(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},R.prototype.readInt16LE=function(M,Z){M=M>>>0,Z||Bt(M,2,this.length);var te=this[M]|this[M+1]<<8;return te&32768?te|4294901760:te},R.prototype.readInt16BE=function(M,Z){M=M>>>0,Z||Bt(M,2,this.length);var te=this[M+1]|this[M]<<8;return te&32768?te|4294901760:te},R.prototype.readInt32LE=function(M,Z){return M=M>>>0,Z||Bt(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},R.prototype.readInt32BE=function(M,Z){return M=M>>>0,Z||Bt(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},R.prototype.readFloatLE=function(M,Z){return M=M>>>0,Z||Bt(M,4,this.length),g.read(this,M,!0,23,4)},R.prototype.readFloatBE=function(M,Z){return M=M>>>0,Z||Bt(M,4,this.length),g.read(this,M,!1,23,4)},R.prototype.readDoubleLE=function(M,Z){return M=M>>>0,Z||Bt(M,8,this.length),g.read(this,M,!0,52,8)},R.prototype.readDoubleBE=function(M,Z){return M=M>>>0,Z||Bt(M,8,this.length),g.read(this,M,!1,52,8)};function et(V,M,Z,te,xe,at){if(!R.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>xe||M<at)throw new RangeError('"value" argument is out of bounds');if(Z+te>V.length)throw new RangeError("Index out of range")}R.prototype.writeUintLE=R.prototype.writeUIntLE=function(M,Z,te,xe){if(M=+M,Z=Z>>>0,te=te>>>0,!xe){var at=Math.pow(2,8*te)-1;et(this,M,Z,te,at,0)}var vt=1,st=0;for(this[Z]=M&255;++st<te&&(vt*=256);)this[Z+st]=M/vt&255;return Z+te},R.prototype.writeUintBE=R.prototype.writeUIntBE=function(M,Z,te,xe){if(M=+M,Z=Z>>>0,te=te>>>0,!xe){var at=Math.pow(2,8*te)-1;et(this,M,Z,te,at,0)}var vt=te-1,st=1;for(this[Z+vt]=M&255;--vt>=0&&(st*=256);)this[Z+vt]=M/st&255;return Z+te},R.prototype.writeUint8=R.prototype.writeUInt8=function(M,Z,te){return M=+M,Z=Z>>>0,te||et(this,M,Z,1,255,0),this[Z]=M&255,Z+1},R.prototype.writeUint16LE=R.prototype.writeUInt16LE=function(M,Z,te){return M=+M,Z=Z>>>0,te||et(this,M,Z,2,65535,0),this[Z]=M&255,this[Z+1]=M>>>8,Z+2},R.prototype.writeUint16BE=R.prototype.writeUInt16BE=function(M,Z,te){return M=+M,Z=Z>>>0,te||et(this,M,Z,2,65535,0),this[Z]=M>>>8,this[Z+1]=M&255,Z+2},R.prototype.writeUint32LE=R.prototype.writeUInt32LE=function(M,Z,te){return M=+M,Z=Z>>>0,te||et(this,M,Z,4,4294967295,0),this[Z+3]=M>>>24,this[Z+2]=M>>>16,this[Z+1]=M>>>8,this[Z]=M&255,Z+4},R.prototype.writeUint32BE=R.prototype.writeUInt32BE=function(M,Z,te){return M=+M,Z=Z>>>0,te||et(this,M,Z,4,4294967295,0),this[Z]=M>>>24,this[Z+1]=M>>>16,this[Z+2]=M>>>8,this[Z+3]=M&255,Z+4},R.prototype.writeIntLE=function(M,Z,te,xe){if(M=+M,Z=Z>>>0,!xe){var at=Math.pow(2,8*te-1);et(this,M,Z,te,at-1,-at)}var vt=0,st=1,rt=0;for(this[Z]=M&255;++vt<te&&(st*=256);)M<0&&rt===0&&this[Z+vt-1]!==0&&(rt=1),this[Z+vt]=(M/st>>0)-rt&255;return Z+te},R.prototype.writeIntBE=function(M,Z,te,xe){if(M=+M,Z=Z>>>0,!xe){var at=Math.pow(2,8*te-1);et(this,M,Z,te,at-1,-at)}var vt=te-1,st=1,rt=0;for(this[Z+vt]=M&255;--vt>=0&&(st*=256);)M<0&&rt===0&&this[Z+vt+1]!==0&&(rt=1),this[Z+vt]=(M/st>>0)-rt&255;return Z+te},R.prototype.writeInt8=function(M,Z,te){return M=+M,Z=Z>>>0,te||et(this,M,Z,1,127,-128),M<0&&(M=255+M+1),this[Z]=M&255,Z+1},R.prototype.writeInt16LE=function(M,Z,te){return M=+M,Z=Z>>>0,te||et(this,M,Z,2,32767,-32768),this[Z]=M&255,this[Z+1]=M>>>8,Z+2},R.prototype.writeInt16BE=function(M,Z,te){return M=+M,Z=Z>>>0,te||et(this,M,Z,2,32767,-32768),this[Z]=M>>>8,this[Z+1]=M&255,Z+2},R.prototype.writeInt32LE=function(M,Z,te){return M=+M,Z=Z>>>0,te||et(this,M,Z,4,2147483647,-2147483648),this[Z]=M&255,this[Z+1]=M>>>8,this[Z+2]=M>>>16,this[Z+3]=M>>>24,Z+4},R.prototype.writeInt32BE=function(M,Z,te){return M=+M,Z=Z>>>0,te||et(this,M,Z,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[Z]=M>>>24,this[Z+1]=M>>>16,this[Z+2]=M>>>8,this[Z+3]=M&255,Z+4};function Pe(V,M,Z,te,xe,at){if(Z+te>V.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function oe(V,M,Z,te,xe){return M=+M,Z=Z>>>0,xe||Pe(V,M,Z,4),g.write(V,M,Z,te,23,4),Z+4}R.prototype.writeFloatLE=function(M,Z,te){return oe(this,M,Z,!0,te)},R.prototype.writeFloatBE=function(M,Z,te){return oe(this,M,Z,!1,te)};function Ye(V,M,Z,te,xe){return M=+M,Z=Z>>>0,xe||Pe(V,M,Z,8),g.write(V,M,Z,te,52,8),Z+8}R.prototype.writeDoubleLE=function(M,Z,te){return Ye(this,M,Z,!0,te)},R.prototype.writeDoubleBE=function(M,Z,te){return Ye(this,M,Z,!1,te)},R.prototype.copy=function(M,Z,te,xe){if(!R.isBuffer(M))throw new TypeError("argument should be a Buffer");if(te||(te=0),!xe&&xe!==0&&(xe=this.length),Z>=M.length&&(Z=M.length),Z||(Z=0),xe>0&&xe<te&&(xe=te),xe===te||M.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(te<0||te>=this.length)throw new RangeError("Index out of range");if(xe<0)throw new RangeError("sourceEnd out of bounds");xe>this.length&&(xe=this.length),M.length-Z<xe-te&&(xe=M.length-Z+te);var at=xe-te;return this===M&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Z,te,xe):Uint8Array.prototype.set.call(M,this.subarray(te,xe),Z),at},R.prototype.fill=function(M,Z,te,xe){if(typeof M=="string"){if(typeof Z=="string"?(xe=Z,Z=0,te=this.length):typeof te=="string"&&(xe=te,te=this.length),xe!==void 0&&typeof xe!="string")throw new TypeError("encoding must be a string");if(typeof xe=="string"&&!R.isEncoding(xe))throw new TypeError("Unknown encoding: "+xe);if(M.length===1){var at=M.charCodeAt(0);(xe==="utf8"&&at<128||xe==="latin1")&&(M=at)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(Z<0||this.length<Z||this.length<te)throw new RangeError("Out of range index");if(te<=Z)return this;Z=Z>>>0,te=te===void 0?this.length:te>>>0,M||(M=0);var vt;if(typeof M=="number")for(vt=Z;vt<te;++vt)this[vt]=M;else{var st=R.isBuffer(M)?M:R.from(M,xe),rt=st.length;if(rt===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(vt=0;vt<te-Z;++vt)this[vt+Z]=st[vt%rt]}return this};var tt=/[^+/0-9A-Za-z-_]/g;function Ze(V){if(V=V.split("=")[0],V=V.trim().replace(tt,""),V.length<2)return"";for(;V.length%4!==0;)V=V+"=";return V}function Qe(V,M){M=M||1/0;for(var Z,te=V.length,xe=null,at=[],vt=0;vt<te;++vt){if(Z=V.charCodeAt(vt),Z>55295&&Z<57344){if(!xe){if(Z>56319){(M-=3)>-1&&at.push(239,191,189);continue}else if(vt+1===te){(M-=3)>-1&&at.push(239,191,189);continue}xe=Z;continue}if(Z<56320){(M-=3)>-1&&at.push(239,191,189),xe=Z;continue}Z=(xe-55296<<10|Z-56320)+65536}else xe&&(M-=3)>-1&&at.push(239,191,189);if(xe=null,Z<128){if((M-=1)<0)break;at.push(Z)}else if(Z<2048){if((M-=2)<0)break;at.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((M-=3)<0)break;at.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((M-=4)<0)break;at.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return at}function lt(V){for(var M=[],Z=0;Z<V.length;++Z)M.push(V.charCodeAt(Z)&255);return M}function _t(V,M){for(var Z,te,xe,at=[],vt=0;vt<V.length&&!((M-=2)<0);++vt)Z=V.charCodeAt(vt),te=Z>>8,xe=Z%256,at.push(xe),at.push(te);return at}function Nt(V){return d.toByteArray(Ze(V))}function dt(V,M,Z,te){for(var xe=0;xe<te&&!(xe+Z>=M.length||xe>=V.length);++xe)M[xe+Z]=V[xe];return xe}function xt(V,M){return V instanceof M||V!=null&&V.constructor!=null&&V.constructor.name!=null&&V.constructor.name===M.name}function Lt(V){return V!==V}var Vt=function(){for(var V="0123456789abcdef",M=new Array(256),Z=0;Z<16;++Z)for(var te=Z*16,xe=0;xe<16;++xe)M[te+xe]=V[Z]+V[xe];return M}()})(buffer);var XmlBeautify={exports:{}};/*! For license information please see XmlBeautify.js.LICENSE.txt */(function(c,d){(function(g,v){c.exports=v()})(commonjsGlobal,()=>(()=>{var g={d:(E,R)=>{for(var U in R)g.o(R,U)&&!g.o(E,U)&&Object.defineProperty(E,U,{enumerable:!0,get:R[U]})},o:(E,R)=>Object.prototype.hasOwnProperty.call(E,R)},v={};function b(E,R){for(var U=0;U<R.length;U++){var P=R[U];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(E,P.key,P)}}g.d(v,{default:()=>_});var _=function(){function E(P){(function(ee,re){if(!(ee instanceof re))throw new TypeError("Cannot call a class as a function")})(this,E);var B=P||{};this.userExternalParser=!1,B.parser?(this.userExternalParser=!0,this.parser=new B.parser):this.parser=new DOMParser}var R,U;return R=E,(U=[{key:"hasXmlDef",value:function(P){return P.indexOf("<?xml")>=0}},{key:"getEncoding",value:function(P){if(!this.hasXmlDef(P))return null;var B=P.toLowerCase().indexOf('encoding="')+10,ee=P.indexOf('"?>');return P.substr(B,ee-B)}},{key:"_children",value:function(P){for(var B=[],ee=P.childNodes.length,re=0;re<ee;re++)P.childNodes[re].nodeType===1&&B.push(P.childNodes[re]);return B}},{key:"beautify",value:function(P,B){var ee=this,re=ee.parser.parseFromString(P,"text/xml"),ne="  ",j=!1;B&&(B.indent&&(ne=B.indent),B.useSelfClosingElement==1&&(j=B.useSelfClosingElement));var z=null;ee.hasXmlDef(P)&&(z='<?xml version="1.0" encoding="'+ee.getEncoding(P)+'"?>');var W={indentText:ne,xmlText:"",useSelfClosingElement:j,indentLevel:0};ee.userExternalParser?ee._parseInternally(this._children(re)[0],W):ee._parseInternally(re.children[0],W);var O="";return z&&(O+=z+`
`),O+=W.xmlText}},{key:"_parseInternally",value:function(P,B){var ee,re=this,ne=P.textContent;ne.replace(/ /g,"").replace(/\r?\n/g,"").replace(/\n/g,"").replace(/\t/g,"").length==0&&(ne=""),ee=re.userExternalParser?!(re._children(P).length>0):!(P.children.length>0);var j=ne&&ne.length>0,z=ee&&j,W=ee&&!j,O=B.useSelfClosingElement,Y="";if(z){var Q=re._getFirstCDATAChild(P),X=Q.hasCDATAChild,H=Q.content;Y+=X?H:ne}for(var G,ie="",Ee=0;Ee<B.indentLevel;Ee++)ie+=B.indentText;B.xmlText+=ie,B.xmlText+="<"+P.tagName;for(var be=0;be<P.attributes.length;be++){var Ce=P.attributes[be];B.xmlText+=" "+Ce.name+'="'+Ce.textContent+'"'}B.xmlText+=W&&O?" />":">",z?B.xmlText+=Y:W&&!O||(B.xmlText+=`
`),B.indentLevel++,G=re.userExternalParser?re._children(P).length:P.children.length;for(var Oe=0;Oe<G;Oe++){var mt=void 0;mt=re.userExternalParser?re._children(P)[Oe]:P.children[Oe],re._parseInternally(mt,B)}if(B.indentLevel--,W){if(!O){var Tt="</"+P.tagName+">";B.xmlText+=Tt,B.xmlText+=`
`}}else{var St="</"+P.tagName+">";ee&&j||(B.xmlText+=ie),B.xmlText+=St,B.xmlText+=`
`}}},{key:"_getFirstCDATAChild",value:function(P){for(var B=P.childNodes.length,ee="",re=!1,ne=0;ne<B;ne++)P.childNodes[ne].nodeType===3?P.childNodes[ne].data.replace(/ /g,"").replace(/\r?\n/g,"").replace(/\n/g,"").replace(/\t/g,"").length>0&&(ee+=P.childNodes[ne].data):P.childNodes[ne].nodeType===4&&(ee+="<![CDATA[",ee+=P.childNodes[ne].data,ee+="]]>",re=!0);return re?{hasCDATAChild:!0,content:ee}:{hasCDATAChild:!1}}}])&&b(R.prototype,U),Object.defineProperty(R,"prototype",{writable:!1}),E}();return v=v.default})())})(XmlBeautify);var xpath={};(function(c){var d=c;(function(g){function v(A){var K=Array.prototype.slice,Se=A.length,ae=function(it,Ut){return function(){return Ut.apply(this,it.concat(K.call(arguments)))}},Ae=function(){var it=K.call(arguments);return it.length<Se?ae(it,Ae):A.apply(this,K.apply(arguments,[0,Se]))};return Ae}var b=function(A,K){for(var Se=0;Se<K.length;Se+=1)A(K[Se],Se,K)},_=function(A,K,Se){var ae=K;return b(function(Ae,it){ae=A(ae,Ae,it)},Se),ae},E=function(A,K){var Se=new Array(K.length);return b(function(ae,Ae){Se[Ae]=A(ae)},K),Se},R=function(A,K){var Se=[];return b(function(ae,Ae){A(ae,Ae)&&Se.push(ae)},K),Se},U=function(A,K){for(var Se=0;Se<A.length;Se+=1)if(A[Se]===K)return!0;return!1};function P(A){return function(){return A}}function B(A){return A.toString()}var ee=function(A,K){return K.join(A)},re=function(A,K,Se){return A+Se+K},ne=Array.prototype.concat,j=32767;function z(A){for(var K=[],Se=0;Se<A.length;Se+=j){var ae=A.slice(Se,Se+j);K=ne.apply(K,ae)}return K}function W(A,K){for(var Se=Object(A),ae=1;ae<arguments.length;ae++){var Ae=arguments[ae];if(Ae!=null)for(var it in Ae)Object.prototype.hasOwnProperty.call(Ae,it)&&(Se[it]=Ae[it])}return Se}O.prototype=new Object,O.prototype.constructor=O,O.superclass=Object.prototype;function O(){this.init()}O.prototype.init=function(){this.reduceActions=[],this.reduceActions[3]=function(A){return new Ee(A[0],A[2])},this.reduceActions[5]=function(A){return new be(A[0],A[2])},this.reduceActions[7]=function(A){return new Ce(A[0],A[2])},this.reduceActions[8]=function(A){return new Oe(A[0],A[2])},this.reduceActions[10]=function(A){return new mt(A[0],A[2])},this.reduceActions[11]=function(A){return new Tt(A[0],A[2])},this.reduceActions[12]=function(A){return new St(A[0],A[2])},this.reduceActions[13]=function(A){return new ft(A[0],A[2])},this.reduceActions[15]=function(A){return new ut(A[0],A[2])},this.reduceActions[16]=function(A){return new wt(A[0],A[2])},this.reduceActions[18]=function(A){return new Et(A[0],A[2])},this.reduceActions[19]=function(A){return new Pt(A[0],A[2])},this.reduceActions[20]=function(A){return new Mt(A[0],A[2])},this.reduceActions[22]=function(A){return new G(A[1])},this.reduceActions[24]=function(A){return new Bt(A[0],A[2])},this.reduceActions[25]=function(A){return new et(void 0,void 0,A[0])},this.reduceActions[27]=function(A){return A[0].locationPath=A[2],A[0]},this.reduceActions[28]=function(A){return A[0].locationPath=A[2],A[0].locationPath.steps.unshift(new Ze(Ze.DESCENDANTORSELF,Qe.nodeTest,[])),A[0]},this.reduceActions[29]=function(A){return new et(A[0],[],void 0)},this.reduceActions[30]=function(A){return ot.instance_of(A[0],et)?(A[0].filterPredicates==null&&(A[0].filterPredicates=[]),A[0].filterPredicates.push(A[1]),A[0]):new et(A[0],[A[1]],void 0)},this.reduceActions[32]=function(A){return A[1]},this.reduceActions[33]=function(A){return new dt(A[0])},this.reduceActions[34]=function(A){return new xt(A[0])},this.reduceActions[36]=function(A){return new _t(A[0],[])},this.reduceActions[37]=function(A){return new _t(A[0],A[2])},this.reduceActions[38]=function(A){return[A[0]]},this.reduceActions[39]=function(A){return A[2].unshift(A[0]),A[2]},this.reduceActions[43]=function(A){return new tt(!0,[])},this.reduceActions[44]=function(A){return A[1].absolute=!0,A[1]},this.reduceActions[46]=function(A){return new tt(!1,[A[0]])},this.reduceActions[47]=function(A){return A[0].steps.push(A[2]),A[0]},this.reduceActions[49]=function(A){return new Ze(A[0],A[1],[])},this.reduceActions[50]=function(A){return new Ze(Ze.CHILD,A[0],[])},this.reduceActions[51]=function(A){return new Ze(A[0],A[1],A[2])},this.reduceActions[52]=function(A){return new Ze(Ze.CHILD,A[0],A[1])},this.reduceActions[54]=function(A){return[A[0]]},this.reduceActions[55]=function(A){return A[1].unshift(A[0]),A[1]},this.reduceActions[56]=function(A){return A[0]=="ancestor"?Ze.ANCESTOR:A[0]=="ancestor-or-self"?Ze.ANCESTORORSELF:A[0]=="attribute"?Ze.ATTRIBUTE:A[0]=="child"?Ze.CHILD:A[0]=="descendant"?Ze.DESCENDANT:A[0]=="descendant-or-self"?Ze.DESCENDANTORSELF:A[0]=="following"?Ze.FOLLOWING:A[0]=="following-sibling"?Ze.FOLLOWINGSIBLING:A[0]=="namespace"?Ze.NAMESPACE:A[0]=="parent"?Ze.PARENT:A[0]=="preceding"?Ze.PRECEDING:A[0]=="preceding-sibling"?Ze.PRECEDINGSIBLING:A[0]=="self"?Ze.SELF:-1},this.reduceActions[57]=function(A){return Ze.ATTRIBUTE},this.reduceActions[59]=function(A){return A[0]=="comment"?Qe.commentTest:A[0]=="text"?Qe.textTest:A[0]=="processing-instruction"?Qe.anyPiTest:A[0]=="node"?Qe.nodeTest:new Qe(-1,void 0)},this.reduceActions[60]=function(A){return new Qe.PITest(A[2])},this.reduceActions[61]=function(A){return A[1]},this.reduceActions[63]=function(A){return A[1].absolute=!0,A[1].steps.unshift(new Ze(Ze.DESCENDANTORSELF,Qe.nodeTest,[])),A[1]},this.reduceActions[64]=function(A){return A[0].steps.push(new Ze(Ze.DESCENDANTORSELF,Qe.nodeTest,[])),A[0].steps.push(A[2]),A[0]},this.reduceActions[65]=function(A){return new Ze(Ze.SELF,Qe.nodeTest,[])},this.reduceActions[66]=function(A){return new Ze(Ze.PARENT,Qe.nodeTest,[])},this.reduceActions[67]=function(A){return new lt(A[1])},this.reduceActions[68]=function(A){return Qe.nameTestAny},this.reduceActions[69]=function(A){return new Qe.NameTestPrefixAny(A[0].split(":")[0])},this.reduceActions[70]=function(A){return new Qe.NameTestQName(A[0])}},O.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "],O.actionTableNumber=[` 1 0        /.-,+*)('    & %$  #  "!`,"                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               ",` 1 0        /.-,+*)('    & %$  #  "!`,`K1  KKKKKKKK .  +*)('KKKKKK  KK# K" `,` 1 0        /.-,+*)('    & %$  #  "!`,"                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       ",` 1           .  +*)('          #  " `,"b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               ",` 1 0        /.-,+*)('    & %$m #  "!`,"_  f________         ______e __  _  ",` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('      %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1           .  +*)('          #  " `,` 1           .  +*)('          #  " `,">  >>>>>>>>>         >>>>>>> >> >>  ",` 1           .  +*)('          #  " `,` 1           .  +*)('          #  " `,"Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                             \x87      ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                             \x88      ","                             F\x89     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                 \x8A  ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  ",` 1 0        /.-,+*)('    & %$  #  "!`,"]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "],O.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         \x7F=>?@ AB  CDEFGH IJ ","\x80456789:;<=>?@ AB  CDEFGH IJ\x81","            \x82        EFGH IJ ","            \x83        EFGH IJ ","                             ","                     \x84 GH IJ ","                     \x85 GH IJ ","              i          \x86   ","              i          \x87   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ AB\x8CqCDEFGH IJ ","                             ","                             "],O.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]],O.DOUBLEDOT=2,O.DOUBLECOLON=3,O.DOUBLESLASH=4,O.NOTEQUAL=5,O.LESSTHANOREQUAL=6,O.GREATERTHANOREQUAL=7,O.AND=8,O.OR=9,O.MOD=10,O.DIV=11,O.MULTIPLYOPERATOR=12,O.FUNCTIONNAME=13,O.AXISNAME=14,O.LITERAL=15,O.NUMBER=16,O.ASTERISKNAMETEST=17,O.QNAME=18,O.NCNAMECOLONASTERISK=19,O.NODETYPE=20,O.PROCESSINGINSTRUCTIONWITHLITERAL=21,O.EQUALS=22,O.LESSTHAN=23,O.GREATERTHAN=24,O.PLUS=25,O.MINUS=26,O.BAR=27,O.SLASH=28,O.LEFTPARENTHESIS=29,O.RIGHTPARENTHESIS=30,O.COMMA=31,O.AT=32,O.LEFTBRACKET=33,O.RIGHTBRACKET=34,O.DOT=35,O.DOLLAR=36,O.prototype.tokenize=function(A){for(var K=[],Se=[],ae=A+"\0",Ae=0,it=ae.charAt(Ae++);;){for(;it==" "||it=="	"||it=="\r"||it==`
`;)it=ae.charAt(Ae++);if(it=="\0"||Ae>=ae.length)break;if(it=="("){K.push(O.LEFTPARENTHESIS),Se.push(it),it=ae.charAt(Ae++);continue}if(it==")"){K.push(O.RIGHTPARENTHESIS),Se.push(it),it=ae.charAt(Ae++);continue}if(it=="["){K.push(O.LEFTBRACKET),Se.push(it),it=ae.charAt(Ae++);continue}if(it=="]"){K.push(O.RIGHTBRACKET),Se.push(it),it=ae.charAt(Ae++);continue}if(it=="@"){K.push(O.AT),Se.push(it),it=ae.charAt(Ae++);continue}if(it==","){K.push(O.COMMA),Se.push(it),it=ae.charAt(Ae++);continue}if(it=="|"){K.push(O.BAR),Se.push(it),it=ae.charAt(Ae++);continue}if(it=="+"){K.push(O.PLUS),Se.push(it),it=ae.charAt(Ae++);continue}if(it=="-"){K.push(O.MINUS),Se.push(it),it=ae.charAt(Ae++);continue}if(it=="="){K.push(O.EQUALS),Se.push(it),it=ae.charAt(Ae++);continue}if(it=="$"){K.push(O.DOLLAR),Se.push(it),it=ae.charAt(Ae++);continue}if(it=="."){if(it=ae.charAt(Ae++),it=="."){K.push(O.DOUBLEDOT),Se.push(".."),it=ae.charAt(Ae++);continue}if(it>="0"&&it<="9"){var Ut="."+it;for(it=ae.charAt(Ae++);it>="0"&&it<="9";)Ut+=it,it=ae.charAt(Ae++);K.push(O.NUMBER),Se.push(Ut);continue}K.push(O.DOT),Se.push(".");continue}if(it=="'"||it=='"'){for(var Gt=it,ar="";Ae<ae.length&&(it=ae.charAt(Ae))!==Gt;)ar+=it,Ae+=1;if(it!==Gt)throw $t.fromMessage("Unterminated string literal: "+Gt+ar);Ae+=1,K.push(O.LITERAL),Se.push(ar),it=ae.charAt(Ae++);continue}if(it>="0"&&it<="9"){var Ut=it;for(it=ae.charAt(Ae++);it>="0"&&it<="9";)Ut+=it,it=ae.charAt(Ae++);if(it=="."&&ae.charAt(Ae)>="0"&&ae.charAt(Ae)<="9")for(Ut+=it,Ut+=ae.charAt(Ae++),it=ae.charAt(Ae++);it>="0"&&it<="9";)Ut+=it,it=ae.charAt(Ae++);K.push(O.NUMBER),Se.push(Ut);continue}if(it=="*"){if(K.length>0){var jt=K[K.length-1];if(jt!=O.AT&&jt!=O.DOUBLECOLON&&jt!=O.LEFTPARENTHESIS&&jt!=O.LEFTBRACKET&&jt!=O.AND&&jt!=O.OR&&jt!=O.MOD&&jt!=O.DIV&&jt!=O.MULTIPLYOPERATOR&&jt!=O.SLASH&&jt!=O.DOUBLESLASH&&jt!=O.BAR&&jt!=O.PLUS&&jt!=O.MINUS&&jt!=O.EQUALS&&jt!=O.NOTEQUAL&&jt!=O.LESSTHAN&&jt!=O.LESSTHANOREQUAL&&jt!=O.GREATERTHAN&&jt!=O.GREATERTHANOREQUAL){K.push(O.MULTIPLYOPERATOR),Se.push(it),it=ae.charAt(Ae++);continue}}K.push(O.ASTERISKNAMETEST),Se.push(it),it=ae.charAt(Ae++);continue}if(it==":"&&ae.charAt(Ae)==":"){K.push(O.DOUBLECOLON),Se.push("::"),Ae++,it=ae.charAt(Ae++);continue}if(it=="/"){if(it=ae.charAt(Ae++),it=="/"){K.push(O.DOUBLESLASH),Se.push("//"),it=ae.charAt(Ae++);continue}K.push(O.SLASH),Se.push("/");continue}if(it=="!"&&ae.charAt(Ae)=="="){K.push(O.NOTEQUAL),Se.push("!="),Ae++,it=ae.charAt(Ae++);continue}if(it=="<"){if(ae.charAt(Ae)=="="){K.push(O.LESSTHANOREQUAL),Se.push("<="),Ae++,it=ae.charAt(Ae++);continue}K.push(O.LESSTHAN),Se.push("<"),it=ae.charAt(Ae++);continue}if(it==">"){if(ae.charAt(Ae)=="="){K.push(O.GREATERTHANOREQUAL),Se.push(">="),Ae++,it=ae.charAt(Ae++);continue}K.push(O.GREATERTHAN),Se.push(">"),it=ae.charAt(Ae++);continue}if(it=="_"||ot.isLetter(it.charCodeAt(0))){var Jt=it;for(it=ae.charAt(Ae++);ot.isNCNameChar(it.charCodeAt(0));)Jt+=it,it=ae.charAt(Ae++);if(K.length>0){var jt=K[K.length-1];if(jt!=O.AT&&jt!=O.DOUBLECOLON&&jt!=O.LEFTPARENTHESIS&&jt!=O.LEFTBRACKET&&jt!=O.AND&&jt!=O.OR&&jt!=O.MOD&&jt!=O.DIV&&jt!=O.MULTIPLYOPERATOR&&jt!=O.SLASH&&jt!=O.DOUBLESLASH&&jt!=O.BAR&&jt!=O.PLUS&&jt!=O.MINUS&&jt!=O.EQUALS&&jt!=O.NOTEQUAL&&jt!=O.LESSTHAN&&jt!=O.LESSTHANOREQUAL&&jt!=O.GREATERTHAN&&jt!=O.GREATERTHANOREQUAL){if(Jt=="and"){K.push(O.AND),Se.push(Jt);continue}if(Jt=="or"){K.push(O.OR),Se.push(Jt);continue}if(Jt=="mod"){K.push(O.MOD),Se.push(Jt);continue}if(Jt=="div"){K.push(O.DIV),Se.push(Jt);continue}}}if(it==":"){if(ae.charAt(Ae)=="*"){K.push(O.NCNAMECOLONASTERISK),Se.push(Jt+":*"),Ae++,it=ae.charAt(Ae++);continue}if(ae.charAt(Ae)=="_"||ot.isLetter(ae.charCodeAt(Ae))){for(Jt+=":",it=ae.charAt(Ae++);ot.isNCNameChar(it.charCodeAt(0));)Jt+=it,it=ae.charAt(Ae++);if(it=="("){K.push(O.FUNCTIONNAME),Se.push(Jt);continue}K.push(O.QNAME),Se.push(Jt);continue}if(ae.charAt(Ae)==":"){K.push(O.AXISNAME),Se.push(Jt);continue}}if(it=="("){if(Jt=="comment"||Jt=="text"||Jt=="node"){K.push(O.NODETYPE),Se.push(Jt);continue}if(Jt=="processing-instruction"){ae.charAt(Ae)==")"?K.push(O.NODETYPE):K.push(O.PROCESSINGINSTRUCTIONWITHLITERAL),Se.push(Jt);continue}K.push(O.FUNCTIONNAME),Se.push(Jt);continue}K.push(O.QNAME),Se.push(Jt);continue}throw new Error("Unexpected character "+it)}return K.push(1),Se.push("[EOF]"),[K,Se]},O.SHIFT="s",O.REDUCE="r",O.ACCEPT="a",O.prototype.parse=function(ar){var K,Se,ae=this.tokenize(ar);if(ae!=null){K=ae[0],Se=ae[1];var Ae=0,it=[],Ut=[],Gt=[],ar,jt,Jt;for(it.push(0),Ut.push(1),Gt.push("_S"),jt=K[Ae],Jt=Se[Ae++];;)switch(ar=it[it.length-1],O.actionTable[ar].charAt(jt-1)){case O.SHIFT:Ut.push(-jt),Gt.push(Jt),it.push(O.actionTableNumber[ar].charCodeAt(jt-1)-32),jt=K[Ae],Jt=Se[Ae++];break;case O.REDUCE:for(var dr=O.productions[O.actionTableNumber[ar].charCodeAt(jt-1)-32][1],cr=[],Rr=0;Rr<dr;Rr++)Ut.pop(),cr.unshift(Gt.pop()),it.pop();var Ar=it[it.length-1];Ut.push(O.productions[O.actionTableNumber[ar].charCodeAt(jt-1)-32][0]),this.reduceActions[O.actionTableNumber[ar].charCodeAt(jt-1)-32]==null?Gt.push(cr[0]):Gt.push(this.reduceActions[O.actionTableNumber[ar].charCodeAt(jt-1)-32](cr)),it.push(O.gotoTable[Ar].charCodeAt(O.productions[O.actionTableNumber[ar].charCodeAt(jt-1)-32][0]-2)-33);break;case O.ACCEPT:return new Y(Gt.pop());default:throw new Error("XPath parse error")}}},Y.prototype=new Object,Y.prototype.constructor=Y,Y.superclass=Object.prototype;function Y(A){this.expression=A}Y.prototype.toString=function(){return this.expression.toString()};function Q(A,K,Se){K in A||(A[K]=Se)}Y.prototype.evaluate=function(A){return A.contextNode=A.expressionContextNode,A.contextSize=1,A.contextPosition=1,A.isHtml&&(Q(A,"caseInsensitive",!0),Q(A,"allowAnyNamespaceForNoPrefix",!0)),Q(A,"caseInsensitive",!1),this.expression.evaluate(A)},Y.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace",Y.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/",X.prototype=new Object,X.prototype.constructor=X,X.superclass=Object.prototype;function X(){}X.prototype.init=function(){},X.prototype.toString=function(){return"<Expression>"},X.prototype.evaluate=function(A){throw new Error("Could not evaluate expression.")},H.prototype=new X,H.prototype.constructor=H,H.superclass=X.prototype;function H(A){arguments.length>0&&this.init(A)}H.prototype.init=function(A){this.rhs=A},G.prototype=new H,G.prototype.constructor=G,G.superclass=H.prototype;function G(A){arguments.length>0&&this.init(A)}G.prototype.init=function(A){G.superclass.init.call(this,A)},G.prototype.evaluate=function(A){return this.rhs.evaluate(A).number().negate()},G.prototype.toString=function(){return"-"+this.rhs.toString()},ie.prototype=new X,ie.prototype.constructor=ie,ie.superclass=X.prototype;function ie(A,K){arguments.length>0&&this.init(A,K)}ie.prototype.init=function(A,K){this.lhs=A,this.rhs=K},Ee.prototype=new ie,Ee.prototype.constructor=Ee,Ee.superclass=ie.prototype;function Ee(A,K){arguments.length>0&&this.init(A,K)}Ee.prototype.init=function(A,K){Ee.superclass.init.call(this,A,K)},Ee.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"},Ee.prototype.evaluate=function(A){var K=this.lhs.evaluate(A).bool();return K.booleanValue()?K:this.rhs.evaluate(A).bool()},be.prototype=new ie,be.prototype.constructor=be,be.superclass=ie.prototype;function be(A,K){arguments.length>0&&this.init(A,K)}be.prototype.init=function(A,K){be.superclass.init.call(this,A,K)},be.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"},be.prototype.evaluate=function(A){var K=this.lhs.evaluate(A).bool();return K.booleanValue()?this.rhs.evaluate(A).bool():K},Ce.prototype=new ie,Ce.prototype.constructor=Ce,Ce.superclass=ie.prototype;function Ce(A,K){arguments.length>0&&this.init(A,K)}Ce.prototype.init=function(A,K){Ce.superclass.init.call(this,A,K)},Ce.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"},Ce.prototype.evaluate=function(A){return this.lhs.evaluate(A).equals(this.rhs.evaluate(A))},Oe.prototype=new ie,Oe.prototype.constructor=Oe,Oe.superclass=ie.prototype;function Oe(A,K){arguments.length>0&&this.init(A,K)}Oe.prototype.init=function(A,K){Oe.superclass.init.call(this,A,K)},Oe.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"},Oe.prototype.evaluate=function(A){return this.lhs.evaluate(A).notequal(this.rhs.evaluate(A))},mt.prototype=new ie,mt.prototype.constructor=mt,mt.superclass=ie.prototype;function mt(A,K){arguments.length>0&&this.init(A,K)}mt.prototype.init=function(A,K){mt.superclass.init.call(this,A,K)},mt.prototype.evaluate=function(A){return this.lhs.evaluate(A).lessthan(this.rhs.evaluate(A))},mt.prototype.toString=function(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"},Tt.prototype=new ie,Tt.prototype.constructor=Tt,Tt.superclass=ie.prototype;function Tt(A,K){arguments.length>0&&this.init(A,K)}Tt.prototype.init=function(A,K){Tt.superclass.init.call(this,A,K)},Tt.prototype.evaluate=function(A){return this.lhs.evaluate(A).greaterthan(this.rhs.evaluate(A))},Tt.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"},St.prototype=new ie,St.prototype.constructor=St,St.superclass=ie.prototype;function St(A,K){arguments.length>0&&this.init(A,K)}St.prototype.init=function(A,K){St.superclass.init.call(this,A,K)},St.prototype.evaluate=function(A){return this.lhs.evaluate(A).lessthanorequal(this.rhs.evaluate(A))},St.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"},ft.prototype=new ie,ft.prototype.constructor=ft,ft.superclass=ie.prototype;function ft(A,K){arguments.length>0&&this.init(A,K)}ft.prototype.init=function(A,K){ft.superclass.init.call(this,A,K)},ft.prototype.evaluate=function(A){return this.lhs.evaluate(A).greaterthanorequal(this.rhs.evaluate(A))},ft.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"},ut.prototype=new ie,ut.prototype.constructor=ut,ut.superclass=ie.prototype;function ut(A,K){arguments.length>0&&this.init(A,K)}ut.prototype.init=function(A,K){ut.superclass.init.call(this,A,K)},ut.prototype.evaluate=function(A){return this.lhs.evaluate(A).number().plus(this.rhs.evaluate(A).number())},ut.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"},wt.prototype=new ie,wt.prototype.constructor=wt,wt.superclass=ie.prototype;function wt(A,K){arguments.length>0&&this.init(A,K)}wt.prototype.init=function(A,K){wt.superclass.init.call(this,A,K)},wt.prototype.evaluate=function(A){return this.lhs.evaluate(A).number().minus(this.rhs.evaluate(A).number())},wt.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"},Et.prototype=new ie,Et.prototype.constructor=Et,Et.superclass=ie.prototype;function Et(A,K){arguments.length>0&&this.init(A,K)}Et.prototype.init=function(A,K){Et.superclass.init.call(this,A,K)},Et.prototype.evaluate=function(A){return this.lhs.evaluate(A).number().multiply(this.rhs.evaluate(A).number())},Et.prototype.toString=function(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"},Pt.prototype=new ie,Pt.prototype.constructor=Pt,Pt.superclass=ie.prototype;function Pt(A,K){arguments.length>0&&this.init(A,K)}Pt.prototype.init=function(A,K){Pt.superclass.init.call(this,A,K)},Pt.prototype.evaluate=function(A){return this.lhs.evaluate(A).number().div(this.rhs.evaluate(A).number())},Pt.prototype.toString=function(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"},Mt.prototype=new ie,Mt.prototype.constructor=Mt,Mt.superclass=ie.prototype;function Mt(A,K){arguments.length>0&&this.init(A,K)}Mt.prototype.init=function(A,K){Mt.superclass.init.call(this,A,K)},Mt.prototype.evaluate=function(A){return this.lhs.evaluate(A).number().mod(this.rhs.evaluate(A).number())},Mt.prototype.toString=function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"},Bt.prototype=new ie,Bt.prototype.constructor=Bt,Bt.superclass=ie.prototype;function Bt(A,K){arguments.length>0&&this.init(A,K)}Bt.prototype.init=function(A,K){Bt.superclass.init.call(this,A,K)},Bt.prototype.evaluate=function(A){return this.lhs.evaluate(A).nodeset().union(this.rhs.evaluate(A).nodeset())},Bt.prototype.toString=function(){return E(B,[this.lhs,this.rhs]).join(" | ")},et.prototype=new X,et.prototype.constructor=et,et.superclass=X.prototype;function et(A,K,Se){arguments.length>0&&this.init(A,K,Se)}et.prototype.init=function(A,K,Se){et.superclass.init.call(this),this.filter=A,this.filterPredicates=K,this.locationPath=Se};function Pe(A){for(;A&&A.parentNode;)A=A.parentNode;return A}et.applyPredicates=function(A,K,Se){if(A.length===0)return Se;var ae=K.extend({});return _(function(Ae,it){return ae.contextSize=Ae.length,R(function(Ut,Gt){return ae.contextNode=Ut,ae.contextPosition=Gt+1,et.predicateMatches(it,ae)},Ae)},Se,A)},et.getRoot=function(A,K){var Se=K[0];if(Se.nodeType===9)return Se;if(A.virtualRoot)return A.virtualRoot;var ae=Se.ownerDocument;if(ae)return ae;for(var Ae=Se;Ae.parentNode!=null;)Ae=Ae.parentNode;return Ae},et.applyStep=function(A,K,Se){var ae=[];switch(K.contextNode=Se,A.axis){case Ze.ANCESTOR:if(K.contextNode===K.virtualRoot)break;var Ae;for(K.contextNode.nodeType==2?Ae=et.getOwnerElement(K.contextNode):Ae=K.contextNode.parentNode;Ae!=null&&(A.nodeTest.matches(Ae,K)&&ae.push(Ae),Ae!==K.virtualRoot);)Ae=Ae.parentNode;break;case Ze.ANCESTORORSELF:for(var Ae=K.contextNode;Ae!=null&&(A.nodeTest.matches(Ae,K)&&ae.push(Ae),Ae!==K.virtualRoot);Ae=Ae.nodeType==2?et.getOwnerElement(Ae):Ae.parentNode);break;case Ze.ATTRIBUTE:var it=K.contextNode.attributes;if(it!=null)for(var Ut=0;Ut<it.length;Ut++){var Ae=it.item(Ut);A.nodeTest.matches(Ae,K)&&ae.push(Ae)}break;case Ze.CHILD:for(var Ae=K.contextNode.firstChild;Ae!=null;Ae=Ae.nextSibling)A.nodeTest.matches(Ae,K)&&ae.push(Ae);break;case Ze.DESCENDANT:for(var cr=[K.contextNode.firstChild];cr.length>0;)for(var Ae=cr.pop();Ae!=null;)A.nodeTest.matches(Ae,K)&&ae.push(Ae),Ae.firstChild!=null?(cr.push(Ae.nextSibling),Ae=Ae.firstChild):Ae=Ae.nextSibling;break;case Ze.DESCENDANTORSELF:A.nodeTest.matches(K.contextNode,K)&&ae.push(K.contextNode);for(var cr=[K.contextNode.firstChild];cr.length>0;)for(var Ae=cr.pop();Ae!=null;)A.nodeTest.matches(Ae,K)&&ae.push(Ae),Ae.firstChild!=null?(cr.push(Ae.nextSibling),Ae=Ae.firstChild):Ae=Ae.nextSibling;break;case Ze.FOLLOWING:if(K.contextNode===K.virtualRoot)break;var cr=[];K.contextNode.firstChild!=null?cr.unshift(K.contextNode.firstChild):cr.unshift(K.contextNode.nextSibling);for(var Ae=K.contextNode.parentNode;Ae!=null&&Ae.nodeType!=9&&Ae!==K.virtualRoot;Ae=Ae.parentNode)cr.unshift(Ae.nextSibling);do for(var Ae=cr.pop();Ae!=null;)A.nodeTest.matches(Ae,K)&&ae.push(Ae),Ae.firstChild!=null?(cr.push(Ae.nextSibling),Ae=Ae.firstChild):Ae=Ae.nextSibling;while(cr.length>0);break;case Ze.FOLLOWINGSIBLING:if(K.contextNode===K.virtualRoot)break;for(var Ae=K.contextNode.nextSibling;Ae!=null;Ae=Ae.nextSibling)A.nodeTest.matches(Ae,K)&&ae.push(Ae);break;case Ze.NAMESPACE:var Gt={};if(K.contextNode.nodeType==1){Gt.xml=Y.XML_NAMESPACE_URI,Gt.xmlns=Y.XMLNS_NAMESPACE_URI;for(var Ae=K.contextNode;Ae!=null&&Ae.nodeType==1;Ae=Ae.parentNode)for(var Ut=0;Ut<Ae.attributes.length;Ut++){var ar=Ae.attributes.item(Ut),jt=String(ar.name);if(jt=="xmlns")Gt[""]==null&&(Gt[""]=ar.value);else if(jt.length>6&&jt.substring(0,6)=="xmlns:"){var Jt=jt.substring(6,jt.length);Gt[Jt]==null&&(Gt[Jt]=ar.value)}}for(var Jt in Gt){var dr=new xe(Jt,Gt[Jt],K.contextNode);A.nodeTest.matches(dr,K)&&ae.push(dr)}}break;case Ze.PARENT:Ae=null,K.contextNode!==K.virtualRoot&&(K.contextNode.nodeType==2?Ae=et.getOwnerElement(K.contextNode):Ae=K.contextNode.parentNode),Ae!=null&&A.nodeTest.matches(Ae,K)&&ae.push(Ae);break;case Ze.PRECEDING:var cr;K.virtualRoot!=null?cr=[K.virtualRoot]:cr=[Pe(K.contextNode)];e:for(;cr.length>0;)for(var Ae=cr.pop();Ae!=null;){if(Ae==K.contextNode)break e;A.nodeTest.matches(Ae,K)&&ae.unshift(Ae),Ae.firstChild!=null?(cr.push(Ae.nextSibling),Ae=Ae.firstChild):Ae=Ae.nextSibling}break;case Ze.PRECEDINGSIBLING:if(K.contextNode===K.virtualRoot)break;for(var Ae=K.contextNode.previousSibling;Ae!=null;Ae=Ae.previousSibling)A.nodeTest.matches(Ae,K)&&ae.push(Ae);break;case Ze.SELF:A.nodeTest.matches(K.contextNode,K)&&ae.push(K.contextNode);break}return ae};function oe(A,K,Se){return et.applyPredicates(A.predicates,K,et.applyStep(A,K,Se))}function Ye(A,K,Se){return z(E(oe.bind(null,Se,A),K))}et.applySteps=function(A,K,Se){return _(Ye.bind(null,K),Se,A)},et.prototype.applyFilter=function(A,K){if(!this.filter)return{nodes:[A.contextNode]};var Se=this.filter.evaluate(A);if(!ot.instance_of(Se,te)){if(this.filterPredicates!=null&&this.filterPredicates.length>0||this.locationPath!=null)throw new Error("Path expression filter must evaluate to a nodeset if predicates or location path are used");return{nonNodes:Se}}return{nodes:et.applyPredicates(this.filterPredicates||[],K,Se.toUnsortedArray())}},et.applyLocationPath=function(A,K,Se){if(!A)return Se;var ae=A.absolute?[et.getRoot(K,Se)]:Se;return et.applySteps(A.steps,K,ae)},et.prototype.evaluate=function(A){var K=W(new at,A),Se=this.applyFilter(A,K);if("nonNodes"in Se)return Se.nonNodes;var ae=new te;return ae.addArray(et.applyLocationPath(this.locationPath,K,Se.nodes)),ae},et.predicateMatches=function(A,K){var Se=A.evaluate(K);return ot.instance_of(Se,xt)?K.contextPosition===Se.numberValue():Se.booleanValue()},et.predicateString=function(A){return re("[","]",A.toString())},et.predicatesString=function(A){return ee("",E(et.predicateString,A))},et.prototype.toString=function(){if(this.filter!=null){var A=B(this.filter);return ot.instance_of(this.filter,dt)?re("'","'",A):this.filterPredicates!=null&&this.filterPredicates.length?re("(",")",A)+et.predicatesString(this.filterPredicates):this.locationPath!=null?A+(this.locationPath.absolute?"":"/")+B(this.locationPath):A}return B(this.locationPath)},et.getOwnerElement=function(A){if(A.ownerElement)return A.ownerElement;try{if(A.selectSingleNode)return A.selectSingleNode("..")}catch{}for(var K=A.nodeType==9?A:A.ownerDocument,Se=K.getElementsByTagName("*"),ae=0;ae<Se.length;ae++)for(var Ae=Se.item(ae),it=Ae.attributes,Ut=0;Ut<it.length;Ut++){var Gt=it.item(Ut);if(Gt===A)return Ae}return null},tt.prototype=new Object,tt.prototype.constructor=tt,tt.superclass=Object.prototype;function tt(A,K){arguments.length>0&&this.init(A,K)}tt.prototype.init=function(A,K){this.absolute=A,this.steps=K},tt.prototype.toString=function(){return(this.absolute?"/":"")+E(B,this.steps).join("/")},Ze.prototype=new Object,Ze.prototype.constructor=Ze,Ze.superclass=Object.prototype;function Ze(A,K,Se){arguments.length>0&&this.init(A,K,Se)}Ze.prototype.init=function(A,K,Se){this.axis=A,this.nodeTest=K,this.predicates=Se},Ze.prototype.toString=function(){return Ze.STEPNAMES[this.axis]+"::"+this.nodeTest.toString()+et.predicatesString(this.predicates)},Ze.ANCESTOR=0,Ze.ANCESTORORSELF=1,Ze.ATTRIBUTE=2,Ze.CHILD=3,Ze.DESCENDANT=4,Ze.DESCENDANTORSELF=5,Ze.FOLLOWING=6,Ze.FOLLOWINGSIBLING=7,Ze.NAMESPACE=8,Ze.PARENT=9,Ze.PRECEDING=10,Ze.PRECEDINGSIBLING=11,Ze.SELF=12,Ze.STEPNAMES=_(function(A,K){return A[K[0]]=K[1],A},{},[[Ze.ANCESTOR,"ancestor"],[Ze.ANCESTORORSELF,"ancestor-or-self"],[Ze.ATTRIBUTE,"attribute"],[Ze.CHILD,"child"],[Ze.DESCENDANT,"descendant"],[Ze.DESCENDANTORSELF,"descendant-or-self"],[Ze.FOLLOWING,"following"],[Ze.FOLLOWINGSIBLING,"following-sibling"],[Ze.NAMESPACE,"namespace"],[Ze.PARENT,"parent"],[Ze.PRECEDING,"preceding"],[Ze.PRECEDINGSIBLING,"preceding-sibling"],[Ze.SELF,"self"]]),Qe.prototype=new Object,Qe.prototype.constructor=Qe,Qe.superclass=Object.prototype;function Qe(A,K){arguments.length>0&&this.init(A,K)}Qe.prototype.init=function(A,K){this.type=A,this.value=K},Qe.prototype.toString=function(){return"<unknown nodetest type>"},Qe.prototype.matches=function(A,K){console.warn("unknown node test type")},Qe.NAMETESTANY=0,Qe.NAMETESTPREFIXANY=1,Qe.NAMETESTQNAME=2,Qe.COMMENT=3,Qe.TEXT=4,Qe.PI=5,Qe.NODE=6,Qe.isNodeType=function(A){return function(K){return U(A,K.nodeType)}},Qe.makeNodeTestType=function(A,K,Se){var ae=Se||function(){};return ae.prototype=new Qe(A),ae.prototype.constructor=ae,W(ae.prototype,K),ae},Qe.makeNodeTypeTest=function(A,K,Se){return new(Qe.makeNodeTestType(A,{matches:Qe.isNodeType(K),toString:P(Se)}))},Qe.hasPrefix=function(A){return A.prefix||(A.nodeName||A.tagName).indexOf(":")!==-1},Qe.isElementOrAttribute=Qe.isNodeType([1,2]),Qe.nameSpaceMatches=function(A,K,Se){var ae=Se.namespaceURI||"";if(!A)return!ae||K.allowAnyNamespaceForNoPrefix&&!Qe.hasPrefix(Se);var Ae=K.namespaceResolver.getNamespace(A,K.expressionContextNode);if(Ae==null)throw new Error("Cannot resolve QName "+A);return Ae===ae},Qe.localNameMatches=function(A,K,Se){var ae=Se.localName||Se.nodeName;return K.caseInsensitive?A.toLowerCase()===ae.toLowerCase():A===ae},Qe.NameTestPrefixAny=Qe.makeNodeTestType(Qe.NAMETESTPREFIXANY,{matches:function(A,K){return Qe.isElementOrAttribute(A)&&Qe.nameSpaceMatches(this.prefix,K,A)},toString:function(){return this.prefix+":*"}},function(K){this.prefix=K}),Qe.NameTestQName=Qe.makeNodeTestType(Qe.NAMETESTQNAME,{matches:function(A,K){return Qe.isNodeType([1,2,xe.XPATH_NAMESPACE_NODE])(A)&&Qe.nameSpaceMatches(this.prefix,K,A)&&Qe.localNameMatches(this.localName,K,A)},toString:function(){return this.name}},function(K){var Se=K.split(":");this.name=K,this.prefix=Se.length>1?Se[0]:null,this.localName=Se[Se.length>1?1:0]}),Qe.PITest=Qe.makeNodeTestType(Qe.PI,{matches:function(A,K){return Qe.isNodeType([7])(A)&&(A.target||A.nodeName)===this.name},toString:function(){return re('processing-instruction("','")',this.name)}},function(A){this.name=A}),Qe.nameTestAny=Qe.makeNodeTypeTest(Qe.NAMETESTANY,[1,2,xe.XPATH_NAMESPACE_NODE],"*"),Qe.textTest=Qe.makeNodeTypeTest(Qe.TEXT,[3,4],"text()"),Qe.commentTest=Qe.makeNodeTypeTest(Qe.COMMENT,[8],"comment()"),Qe.nodeTest=Qe.makeNodeTypeTest(Qe.NODE,[1,2,3,4,7,8,9],"node()"),Qe.anyPiTest=Qe.makeNodeTypeTest(Qe.PI,[7],"processing-instruction()"),lt.prototype=new X,lt.prototype.constructor=lt,lt.superclass=X.prototype;function lt(A){arguments.length>0&&this.init(A)}lt.prototype.init=function(A){this.variable=A},lt.prototype.toString=function(){return"$"+this.variable},lt.prototype.evaluate=function(A){var K=ot.resolveQName(this.variable,A.namespaceResolver,A.contextNode,!1);if(K[0]==null)throw new Error("Cannot resolve QName "+fn);var Se=A.variableResolver.getVariable(K[1],K[0]);if(!Se)throw $t.fromMessage("Undeclared variable: "+this.toString());return Se},_t.prototype=new X,_t.prototype.constructor=_t,_t.superclass=X.prototype;function _t(A,K){arguments.length>0&&this.init(A,K)}_t.prototype.init=function(A,K){this.functionName=A,this.arguments=K},_t.prototype.toString=function(){for(var A=this.functionName+"(",K=0;K<this.arguments.length;K++)K>0&&(A+=", "),A+=this.arguments[K].toString();return A+")"},_t.prototype.evaluate=function(A){var K=st.getFunctionFromContext(this.functionName,A);if(!K)throw new Error("Unknown function "+this.functionName);var Se=[A].concat(this.arguments);return K.apply(A.functionResolver.thisArg,Se)};var Nt=new Object;Nt.equals=function(A,K){return A.equals(K)},Nt.notequal=function(A,K){return A.notequal(K)},Nt.lessthan=function(A,K){return A.lessthan(K)},Nt.greaterthan=function(A,K){return A.greaterthan(K)},Nt.lessthanorequal=function(A,K){return A.lessthanorequal(K)},Nt.greaterthanorequal=function(A,K){return A.greaterthanorequal(K)},dt.prototype=new X,dt.prototype.constructor=dt,dt.superclass=X.prototype;function dt(A){arguments.length>0&&this.init(A)}dt.prototype.init=function(A){this.str=String(A)},dt.prototype.toString=function(){return this.str},dt.prototype.evaluate=function(A){return this},dt.prototype.string=function(){return this},dt.prototype.number=function(){return new xt(this.str)},dt.prototype.bool=function(){return new V(this.str)},dt.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset")},dt.prototype.stringValue=function(){return this.str},dt.prototype.numberValue=function(){return this.number().numberValue()},dt.prototype.booleanValue=function(){return this.bool().booleanValue()},dt.prototype.equals=function(A){return ot.instance_of(A,V)?this.bool().equals(A):ot.instance_of(A,xt)?this.number().equals(A):ot.instance_of(A,te)?A.compareWithString(this,Nt.equals):new V(this.str==A.str)},dt.prototype.notequal=function(A){return ot.instance_of(A,V)?this.bool().notequal(A):ot.instance_of(A,xt)?this.number().notequal(A):ot.instance_of(A,te)?A.compareWithString(this,Nt.notequal):new V(this.str!=A.str)},dt.prototype.lessthan=function(A){return this.number().lessthan(A)},dt.prototype.greaterthan=function(A){return this.number().greaterthan(A)},dt.prototype.lessthanorequal=function(A){return this.number().lessthanorequal(A)},dt.prototype.greaterthanorequal=function(A){return this.number().greaterthanorequal(A)},xt.prototype=new X,xt.prototype.constructor=xt,xt.superclass=X.prototype;function xt(A){arguments.length>0&&this.init(A)}xt.prototype.init=function(A){this.num=typeof A=="string"?this.parse(A):Number(A)},xt.prototype.numberFormat=/^\s*-?[0-9]*\.?[0-9]+\s*$/,xt.prototype.parse=function(A){return this.numberFormat.test(A)?parseFloat(A):Number.NaN};function Lt(A){for(var K=A.split("e-"),Se=K[0].replace(".",""),ae=Number(K[1]),Ae=0;Ae<ae-1;Ae+=1)Se="0"+Se;return"0."+Se}function Vt(A){for(var K=A.split("e"),Se=K[0].replace(".",""),ae=Number(K[1]),Ae=ae+1-Se.length,it=0;it<Ae;it+=1)Se+="0";return Se}xt.prototype.toString=function(){var A=this.num.toString();return A.indexOf("e-")!==-1?Lt(A):A.indexOf("e")!==-1?Vt(A):A},xt.prototype.evaluate=function(A){return this},xt.prototype.string=function(){return new dt(this.toString())},xt.prototype.number=function(){return this},xt.prototype.bool=function(){return new V(this.num)},xt.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset")},xt.prototype.stringValue=function(){return this.string().stringValue()},xt.prototype.numberValue=function(){return this.num},xt.prototype.booleanValue=function(){return this.bool().booleanValue()},xt.prototype.negate=function(){return new xt(-this.num)},xt.prototype.equals=function(A){return ot.instance_of(A,V)?this.bool().equals(A):ot.instance_of(A,dt)?this.equals(A.number()):ot.instance_of(A,te)?A.compareWithNumber(this,Nt.equals):new V(this.num==A.num)},xt.prototype.notequal=function(A){return ot.instance_of(A,V)?this.bool().notequal(A):ot.instance_of(A,dt)?this.notequal(A.number()):ot.instance_of(A,te)?A.compareWithNumber(this,Nt.notequal):new V(this.num!=A.num)},xt.prototype.lessthan=function(A){return ot.instance_of(A,te)?A.compareWithNumber(this,Nt.greaterthan):ot.instance_of(A,V)||ot.instance_of(A,dt)?this.lessthan(A.number()):new V(this.num<A.num)},xt.prototype.greaterthan=function(A){return ot.instance_of(A,te)?A.compareWithNumber(this,Nt.lessthan):ot.instance_of(A,V)||ot.instance_of(A,dt)?this.greaterthan(A.number()):new V(this.num>A.num)},xt.prototype.lessthanorequal=function(A){return ot.instance_of(A,te)?A.compareWithNumber(this,Nt.greaterthanorequal):ot.instance_of(A,V)||ot.instance_of(A,dt)?this.lessthanorequal(A.number()):new V(this.num<=A.num)},xt.prototype.greaterthanorequal=function(A){return ot.instance_of(A,te)?A.compareWithNumber(this,Nt.lessthanorequal):ot.instance_of(A,V)||ot.instance_of(A,dt)?this.greaterthanorequal(A.number()):new V(this.num>=A.num)},xt.prototype.plus=function(A){return new xt(this.num+A.num)},xt.prototype.minus=function(A){return new xt(this.num-A.num)},xt.prototype.multiply=function(A){return new xt(this.num*A.num)},xt.prototype.div=function(A){return new xt(this.num/A.num)},xt.prototype.mod=function(A){return new xt(this.num%A.num)},V.prototype=new X,V.prototype.constructor=V,V.superclass=X.prototype;function V(A){arguments.length>0&&this.init(A)}V.prototype.init=function(A){this.b=Boolean(A)},V.prototype.toString=function(){return this.b.toString()},V.prototype.evaluate=function(A){return this},V.prototype.string=function(){return new dt(this.b)},V.prototype.number=function(){return new xt(this.b)},V.prototype.bool=function(){return this},V.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset")},V.prototype.stringValue=function(){return this.string().stringValue()},V.prototype.numberValue=function(){return this.number().numberValue()},V.prototype.booleanValue=function(){return this.b},V.prototype.not=function(){return new V(!this.b)},V.prototype.equals=function(A){return ot.instance_of(A,dt)||ot.instance_of(A,xt)?this.equals(A.bool()):ot.instance_of(A,te)?A.compareWithBoolean(this,Nt.equals):new V(this.b==A.b)},V.prototype.notequal=function(A){return ot.instance_of(A,dt)||ot.instance_of(A,xt)?this.notequal(A.bool()):ot.instance_of(A,te)?A.compareWithBoolean(this,Nt.notequal):new V(this.b!=A.b)},V.prototype.lessthan=function(A){return this.number().lessthan(A)},V.prototype.greaterthan=function(A){return this.number().greaterthan(A)},V.prototype.lessthanorequal=function(A){return this.number().lessthanorequal(A)},V.prototype.greaterthanorequal=function(A){return this.number().greaterthanorequal(A)},V.true_=new V(!0),V.false_=new V(!1),M.prototype=new Object,M.prototype.constructor=M,M.superclass=Object.prototype;function M(A){this.init(A)}M.prototype.init=function(A){this.left=null,this.right=null,this.node=A,this.depth=1},M.prototype.balance=function(){var A=this.left==null?0:this.left.depth,K=this.right==null?0:this.right.depth;if(A>K+1){var Se=this.left.left==null?0:this.left.left.depth,ae=this.left.right==null?0:this.left.right.depth;Se<ae&&this.left.rotateRR(),this.rotateLL()}else if(A+1<K){var Ae=this.right.right==null?0:this.right.right.depth,it=this.right.left==null?0:this.right.left.depth;it>Ae&&this.right.rotateLL(),this.rotateRR()}},M.prototype.rotateLL=function(){var A=this.node,K=this.right;this.node=this.left.node,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=K,this.right.node=A,this.right.updateInNewLocation(),this.updateInNewLocation()},M.prototype.rotateRR=function(){var A=this.node,K=this.left;this.node=this.right.node,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=K,this.left.node=A,this.left.updateInNewLocation(),this.updateInNewLocation()},M.prototype.updateInNewLocation=function(){this.getDepthFromChildren()},M.prototype.getDepthFromChildren=function(){this.depth=this.node==null?0:1,this.left!=null&&(this.depth=this.left.depth+1),this.right!=null&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1)};function Z(A,K){if(A===K)return 0;if(A.compareDocumentPosition){var Se=A.compareDocumentPosition(K);return Se&1||Se&10?1:Se&20?-1:0}for(var ae=0,Ae=0,it=A;it!=null;it=it.parentNode||it.ownerElement)ae++;for(var Ut=K;Ut!=null;Ut=Ut.parentNode||Ut.ownerElement)Ae++;if(ae>Ae){for(;ae>Ae;)A=A.parentNode||A.ownerElement,ae--;if(A===K)return 1}else if(Ae>ae){for(;Ae>ae;)K=K.parentNode||K.ownerElement,Ae--;if(A===K)return-1}for(var Gt=A.parentNode||A.ownerElement,ar=K.parentNode||K.ownerElement;Gt!==ar;)A=Gt,K=ar,Gt=A.parentNode||A.ownerElement,ar=K.parentNode||K.ownerElement;var jt=ot.isAttribute(A),Jt=ot.isAttribute(K);if(jt&&!Jt)return-1;if(!jt&&Jt)return 1;if(Gt)for(var dr=jt?Gt.attributes:Gt.childNodes,cr=dr.length,Rr=0;Rr<cr;Rr+=1){var Ar=dr[Rr];if(Ar===A)return-1;if(Ar===K)return 1}throw new Error("Unexpected: could not determine node order")}M.prototype.add=function(A){if(A===this.node)return!1;var K=Z(A,this.node),Se=!1;return K==-1?this.left==null?(this.left=new M(A),Se=!0):(Se=this.left.add(A),Se&&this.balance()):K==1&&(this.right==null?(this.right=new M(A),Se=!0):(Se=this.right.add(A),Se&&this.balance())),Se&&this.getDepthFromChildren(),Se},te.prototype=new X,te.prototype.constructor=te,te.superclass=X.prototype;function te(){this.init()}te.prototype.init=function(){this.tree=null,this.nodes=[],this.size=0},te.prototype.toString=function(){var A=this.first();return A==null?"":this.stringForNode(A)},te.prototype.evaluate=function(A){return this},te.prototype.string=function(){return new dt(this.toString())},te.prototype.stringValue=function(){return this.toString()},te.prototype.number=function(){return new xt(this.string())},te.prototype.numberValue=function(){return Number(this.string())},te.prototype.bool=function(){return new V(this.booleanValue())},te.prototype.booleanValue=function(){return!!this.size},te.prototype.nodeset=function(){return this},te.prototype.stringForNode=function(A){return A.nodeType==9||A.nodeType==1||A.nodeType===11?this.stringForContainerNode(A):A.nodeType===2?A.value||A.nodeValue:A.isNamespaceNode?A.namespace:A.nodeValue},te.prototype.stringForContainerNode=function(A){for(var K="",Se=A.firstChild;Se!=null;Se=Se.nextSibling){var ae=Se.nodeType;(ae===1||ae===3||ae===4||ae===9||ae===11)&&(K+=this.stringForNode(Se))}return K},te.prototype.buildTree=function(){if(!this.tree&&this.nodes.length){this.tree=new M(this.nodes[0]);for(var A=1;A<this.nodes.length;A+=1)this.tree.add(this.nodes[A])}return this.tree},te.prototype.first=function(){var A=this.buildTree();if(A==null)return null;for(;A.left!=null;)A=A.left;return A.node},te.prototype.add=function(A){for(var K=0;K<this.nodes.length;K+=1)if(A===this.nodes[K])return;this.tree=null,this.nodes.push(A),this.size+=1},te.prototype.addArray=function(A){var K=this;b(function(Se){K.add(Se)},A)},te.prototype.toArray=function(){var A=[];return this.toArrayRec(this.buildTree(),A),A},te.prototype.toArrayRec=function(A,K){A!=null&&(this.toArrayRec(A.left,K),K.push(A.node),this.toArrayRec(A.right,K))},te.prototype.toUnsortedArray=function(){return this.nodes.slice()},te.prototype.compareWithString=function(A,K){for(var Se=this.toUnsortedArray(),ae=0;ae<Se.length;ae++){var Ae=Se[ae],it=new dt(this.stringForNode(Ae)),Ut=K(it,A);if(Ut.booleanValue())return Ut}return new V(!1)},te.prototype.compareWithNumber=function(A,K){for(var Se=this.toUnsortedArray(),ae=0;ae<Se.length;ae++){var Ae=Se[ae],it=new xt(this.stringForNode(Ae)),Ut=K(it,A);if(Ut.booleanValue())return Ut}return new V(!1)},te.prototype.compareWithBoolean=function(A,K){return K(this.bool(),A)},te.prototype.compareWithNodeSet=function(A,K){for(var Se=this.toUnsortedArray(),ae=function(Gt,ar){return K(ar,Gt)},Ae=0;Ae<Se.length;Ae++){var it=new dt(this.stringForNode(Se[Ae])),Ut=A.compareWithString(it,ae);if(Ut.booleanValue())return Ut}return new V(!1)},te.compareWith=v(function(A,K){return ot.instance_of(K,dt)?this.compareWithString(K,A):ot.instance_of(K,xt)?this.compareWithNumber(K,A):ot.instance_of(K,V)?this.compareWithBoolean(K,A):this.compareWithNodeSet(K,A)}),te.prototype.equals=te.compareWith(Nt.equals),te.prototype.notequal=te.compareWith(Nt.notequal),te.prototype.lessthan=te.compareWith(Nt.lessthan),te.prototype.greaterthan=te.compareWith(Nt.greaterthan),te.prototype.lessthanorequal=te.compareWith(Nt.lessthanorequal),te.prototype.greaterthanorequal=te.compareWith(Nt.greaterthanorequal),te.prototype.union=function(A){var K=new te;return K.addArray(this.toUnsortedArray()),K.addArray(A.toUnsortedArray()),K},xe.prototype=new Object,xe.prototype.constructor=xe,xe.superclass=Object.prototype;function xe(A,K,Se){this.isXPathNamespace=!0,this.ownerDocument=Se.ownerDocument,this.nodeName="#namespace",this.prefix=A,this.localName=A,this.namespaceURI=K,this.nodeValue=K,this.ownerElement=Se,this.nodeType=xe.XPATH_NAMESPACE_NODE}xe.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'},at.prototype=new Object,at.prototype.constructor=at,at.superclass=Object.prototype;function at(A,K,Se){this.variableResolver=A!=null?A:new vt,this.namespaceResolver=K!=null?K:new rt,this.functionResolver=Se!=null?Se:new st}at.prototype.extend=function(A){return W(new at,this,A)},vt.prototype=new Object,vt.prototype.constructor=vt,vt.superclass=Object.prototype;function vt(){}vt.prototype.getVariable=function(A,K){return null},st.prototype=new Object,st.prototype.constructor=st,st.superclass=Object.prototype;function st(A){this.thisArg=A!=null?A:ht,this.functions=new Object,this.addStandardFunctions()}st.prototype.addStandardFunctions=function(){this.functions["{}last"]=ht.last,this.functions["{}position"]=ht.position,this.functions["{}count"]=ht.count,this.functions["{}id"]=ht.id,this.functions["{}local-name"]=ht.localName,this.functions["{}namespace-uri"]=ht.namespaceURI,this.functions["{}name"]=ht.name,this.functions["{}string"]=ht.string,this.functions["{}concat"]=ht.concat,this.functions["{}starts-with"]=ht.startsWith,this.functions["{}contains"]=ht.contains,this.functions["{}substring-before"]=ht.substringBefore,this.functions["{}substring-after"]=ht.substringAfter,this.functions["{}substring"]=ht.substring,this.functions["{}string-length"]=ht.stringLength,this.functions["{}normalize-space"]=ht.normalizeSpace,this.functions["{}translate"]=ht.translate,this.functions["{}boolean"]=ht.boolean_,this.functions["{}not"]=ht.not,this.functions["{}true"]=ht.true_,this.functions["{}false"]=ht.false_,this.functions["{}lang"]=ht.lang,this.functions["{}number"]=ht.number,this.functions["{}sum"]=ht.sum,this.functions["{}floor"]=ht.floor,this.functions["{}ceiling"]=ht.ceiling,this.functions["{}round"]=ht.round},st.prototype.addFunction=function(A,K,Se){this.functions["{"+A+"}"+K]=Se},st.getFunctionFromContext=function(A,K){var Se=ot.resolveQName(A,K.namespaceResolver,K.contextNode,!1);if(Se[0]===null)throw new Error("Cannot resolve QName "+name);return K.functionResolver.getFunction(Se[1],Se[0])},st.prototype.getFunction=function(A,K){return this.functions["{"+K+"}"+A]},rt.prototype=new Object,rt.prototype.constructor=rt,rt.superclass=Object.prototype;function rt(){}rt.prototype.getNamespace=function(A,K){if(A=="xml")return Y.XML_NAMESPACE_URI;if(A=="xmlns")return Y.XMLNS_NAMESPACE_URI;for(K.nodeType==9?K=K.documentElement:K.nodeType==2?K=et.getOwnerElement(K):K.nodeType!=1&&(K=K.parentNode);K!=null&&K.nodeType==1;){for(var Se=K.attributes,ae=0;ae<Se.length;ae++){var Ae=Se.item(ae),it=Ae.name||Ae.nodeName;if(it==="xmlns"&&A===""||it==="xmlns:"+A)return String(Ae.value||Ae.nodeValue)}K=K.parentNode}return null};var ht=new Object;ht.last=function(A){if(arguments.length!=1)throw new Error("Function last expects ()");return new xt(A.contextSize)},ht.position=function(A){if(arguments.length!=1)throw new Error("Function position expects ()");return new xt(A.contextPosition)},ht.count=function(){var A=arguments[0],K;if(arguments.length!=2||!ot.instance_of(K=arguments[1].evaluate(A),te))throw new Error("Function count expects (node-set)");return new xt(K.size)},ht.id=function(){var A=arguments[0],K;if(arguments.length!=2)throw new Error("Function id expects (object)");K=arguments[1].evaluate(A),ot.instance_of(K,te)?K=K.toArray().join(" "):K=K.stringValue();for(var Se=K.split(/[\x0d\x0a\x09\x20]+/),ae=new te,Ae=A.contextNode.nodeType==9?A.contextNode:A.contextNode.ownerDocument,it=0;it<Se.length;it++){var Ut;Ae.getElementById?Ut=Ae.getElementById(Se[it]):Ut=ot.getElementById(Ae,Se[it]),Ut!=null&&ae.add(Ut)}return ae},ht.localName=function(A,K){var Se;if(arguments.length==1)Se=A.contextNode;else if(arguments.length==2)Se=K.evaluate(A).first();else throw new Error("Function local-name expects (node-set?)");return Se==null?new dt(""):new dt(Se.localName||Se.baseName||Se.target||Se.nodeName||"")},ht.namespaceURI=function(){var A=arguments[0],K;if(arguments.length==1)K=A.contextNode;else if(arguments.length==2)K=arguments[1].evaluate(A).first();else throw new Error("Function namespace-uri expects (node-set?)");return K==null?new dt(""):new dt(K.namespaceURI)},ht.name=function(){var A=arguments[0],K;if(arguments.length==1)K=A.contextNode;else if(arguments.length==2)K=arguments[1].evaluate(A).first();else throw new Error("Function name expects (node-set?)");return K==null?new dt(""):K.nodeType==1?new dt(K.nodeName):K.nodeType==2?new dt(K.name||K.nodeName):K.nodeType===7?new dt(K.target||K.nodeName):K.localName==null?new dt(""):new dt(K.localName)},ht.string=function(){var A=arguments[0];if(arguments.length==1)return new dt(te.prototype.stringForNode(A.contextNode));if(arguments.length==2)return arguments[1].evaluate(A).string();throw new Error("Function string expects (object?)")},ht.concat=function(A){if(arguments.length<3)throw new Error("Function concat expects (string, string[, string]*)");for(var K="",Se=1;Se<arguments.length;Se++)K+=arguments[Se].evaluate(A).stringValue();return new dt(K)},ht.startsWith=function(){var A=arguments[0];if(arguments.length!=3)throw new Error("Function startsWith expects (string, string)");var K=arguments[1].evaluate(A).stringValue(),Se=arguments[2].evaluate(A).stringValue();return new V(K.substring(0,Se.length)==Se)},ht.contains=function(){var A=arguments[0];if(arguments.length!=3)throw new Error("Function contains expects (string, string)");var K=arguments[1].evaluate(A).stringValue(),Se=arguments[2].evaluate(A).stringValue();return new V(K.indexOf(Se)!==-1)},ht.substringBefore=function(){var A=arguments[0];if(arguments.length!=3)throw new Error("Function substring-before expects (string, string)");var K=arguments[1].evaluate(A).stringValue(),Se=arguments[2].evaluate(A).stringValue();return new dt(K.substring(0,K.indexOf(Se)))},ht.substringAfter=function(){var A=arguments[0];if(arguments.length!=3)throw new Error("Function substring-after expects (string, string)");var K=arguments[1].evaluate(A).stringValue(),Se=arguments[2].evaluate(A).stringValue();if(Se.length==0)return new dt(K);var ae=K.indexOf(Se);return ae==-1?new dt(""):new dt(K.substring(ae+Se.length))},ht.substring=function(){var A=arguments[0];if(!(arguments.length==3||arguments.length==4))throw new Error("Function substring expects (string, number, number?)");var K=arguments[1].evaluate(A).stringValue(),Se=Math.round(arguments[2].evaluate(A).numberValue())-1,ae=arguments.length==4?Se+Math.round(arguments[3].evaluate(A).numberValue()):void 0;return new dt(K.substring(Se,ae))},ht.stringLength=function(){var A=arguments[0],K;if(arguments.length==1)K=te.prototype.stringForNode(A.contextNode);else if(arguments.length==2)K=arguments[1].evaluate(A).stringValue();else throw new Error("Function string-length expects (string?)");return new xt(K.length)},ht.normalizeSpace=function(){var A=arguments[0],K;if(arguments.length==1)K=te.prototype.stringForNode(A.contextNode);else if(arguments.length==2)K=arguments[1].evaluate(A).stringValue();else throw new Error("Function normalize-space expects (string?)");for(var Se=0,ae=K.length-1;ot.isSpace(K.charCodeAt(ae));)ae--;for(var Ae="";Se<=ae&&ot.isSpace(K.charCodeAt(Se));)Se++;for(;Se<=ae;)if(ot.isSpace(K.charCodeAt(Se)))for(Ae+=" ";Se<=ae&&ot.isSpace(K.charCodeAt(Se));)Se++;else Ae+=K.charAt(Se),Se++;return new dt(Ae)},ht.translate=function(A,K,Se,ae){if(arguments.length!=4)throw new Error("Function translate expects (string, string, string)");var Ae=K.evaluate(A).stringValue(),it=Se.evaluate(A).stringValue(),Ut=ae.evaluate(A).stringValue(),Gt=_(function(jt,Jt,dr){return Jt in jt||(jt[Jt]=dr>Ut.length?"":Ut[dr]),jt},{},it),ar=ee("",E(function(jt){return jt in Gt?Gt[jt]:jt},Ae));return new dt(ar)},ht.boolean_=function(){var A=arguments[0];if(arguments.length!=2)throw new Error("Function boolean expects (object)");return arguments[1].evaluate(A).bool()},ht.not=function(A,K){if(arguments.length!=2)throw new Error("Function not expects (object)");return K.evaluate(A).bool().not()},ht.true_=function(){if(arguments.length!=1)throw new Error("Function true expects ()");return V.true_},ht.false_=function(){if(arguments.length!=1)throw new Error("Function false expects ()");return V.false_},ht.lang=function(){var A=arguments[0];if(arguments.length!=2)throw new Error("Function lang expects (string)");for(var K,Se=A.contextNode;Se!=null&&Se.nodeType!=9;Se=Se.parentNode){var ae=Se.getAttributeNS(Y.XML_NAMESPACE_URI,"lang");if(ae!=null){K=String(ae);break}}if(K==null)return V.false_;var Ae=arguments[1].evaluate(A).stringValue();return new V(K.substring(0,Ae.length)==Ae&&(K.length==Ae.length||K.charAt(Ae.length)=="-"))},ht.number=function(){var A=arguments[0];if(!(arguments.length==1||arguments.length==2))throw new Error("Function number expects (object?)");return arguments.length==1?new xt(te.prototype.stringForNode(A.contextNode)):arguments[1].evaluate(A).number()},ht.sum=function(){var A=arguments[0],K;if(arguments.length!=2||!ot.instance_of(K=arguments[1].evaluate(A),te))throw new Error("Function sum expects (node-set)");K=K.toUnsortedArray();for(var Se=0,ae=0;ae<K.length;ae++)Se+=new xt(te.prototype.stringForNode(K[ae])).numberValue();return new xt(Se)},ht.floor=function(){var A=arguments[0];if(arguments.length!=2)throw new Error("Function floor expects (number)");return new xt(Math.floor(arguments[1].evaluate(A).numberValue()))},ht.ceiling=function(){var A=arguments[0];if(arguments.length!=2)throw new Error("Function ceiling expects (number)");return new xt(Math.ceil(arguments[1].evaluate(A).numberValue()))},ht.round=function(){var A=arguments[0];if(arguments.length!=2)throw new Error("Function round expects (number)");return new xt(Math.round(arguments[1].evaluate(A).numberValue()))};var ot=new Object;ot.isAttribute=function(A){return A&&(A.nodeType===2||A.ownerElement)},ot.splitQName=function(A){var K=A.indexOf(":");return K==-1?[null,A]:[A.substring(0,K),A.substring(K+1)]},ot.resolveQName=function(A,K,Se,ae){var Ae=ot.splitQName(A);return Ae[0]!=null?Ae[0]=K.getNamespace(Ae[0],Se):ae?(Ae[0]=K.getNamespace("",Se),Ae[0]==null&&(Ae[0]="")):Ae[0]="",Ae},ot.isSpace=function(A){return A==9||A==13||A==10||A==32},ot.isLetter=function(A){return A>=65&&A<=90||A>=97&&A<=122||A>=192&&A<=214||A>=216&&A<=246||A>=248&&A<=255||A>=256&&A<=305||A>=308&&A<=318||A>=321&&A<=328||A>=330&&A<=382||A>=384&&A<=451||A>=461&&A<=496||A>=500&&A<=501||A>=506&&A<=535||A>=592&&A<=680||A>=699&&A<=705||A==902||A>=904&&A<=906||A==908||A>=910&&A<=929||A>=931&&A<=974||A>=976&&A<=982||A==986||A==988||A==990||A==992||A>=994&&A<=1011||A>=1025&&A<=1036||A>=1038&&A<=1103||A>=1105&&A<=1116||A>=1118&&A<=1153||A>=1168&&A<=1220||A>=1223&&A<=1224||A>=1227&&A<=1228||A>=1232&&A<=1259||A>=1262&&A<=1269||A>=1272&&A<=1273||A>=1329&&A<=1366||A==1369||A>=1377&&A<=1414||A>=1488&&A<=1514||A>=1520&&A<=1522||A>=1569&&A<=1594||A>=1601&&A<=1610||A>=1649&&A<=1719||A>=1722&&A<=1726||A>=1728&&A<=1742||A>=1744&&A<=1747||A==1749||A>=1765&&A<=1766||A>=2309&&A<=2361||A==2365||A>=2392&&A<=2401||A>=2437&&A<=2444||A>=2447&&A<=2448||A>=2451&&A<=2472||A>=2474&&A<=2480||A==2482||A>=2486&&A<=2489||A>=2524&&A<=2525||A>=2527&&A<=2529||A>=2544&&A<=2545||A>=2565&&A<=2570||A>=2575&&A<=2576||A>=2579&&A<=2600||A>=2602&&A<=2608||A>=2610&&A<=2611||A>=2613&&A<=2614||A>=2616&&A<=2617||A>=2649&&A<=2652||A==2654||A>=2674&&A<=2676||A>=2693&&A<=2699||A==2701||A>=2703&&A<=2705||A>=2707&&A<=2728||A>=2730&&A<=2736||A>=2738&&A<=2739||A>=2741&&A<=2745||A==2749||A==2784||A>=2821&&A<=2828||A>=2831&&A<=2832||A>=2835&&A<=2856||A>=2858&&A<=2864||A>=2866&&A<=2867||A>=2870&&A<=2873||A==2877||A>=2908&&A<=2909||A>=2911&&A<=2913||A>=2949&&A<=2954||A>=2958&&A<=2960||A>=2962&&A<=2965||A>=2969&&A<=2970||A==2972||A>=2974&&A<=2975||A>=2979&&A<=2980||A>=2984&&A<=2986||A>=2990&&A<=2997||A>=2999&&A<=3001||A>=3077&&A<=3084||A>=3086&&A<=3088||A>=3090&&A<=3112||A>=3114&&A<=3123||A>=3125&&A<=3129||A>=3168&&A<=3169||A>=3205&&A<=3212||A>=3214&&A<=3216||A>=3218&&A<=3240||A>=3242&&A<=3251||A>=3253&&A<=3257||A==3294||A>=3296&&A<=3297||A>=3333&&A<=3340||A>=3342&&A<=3344||A>=3346&&A<=3368||A>=3370&&A<=3385||A>=3424&&A<=3425||A>=3585&&A<=3630||A==3632||A>=3634&&A<=3635||A>=3648&&A<=3653||A>=3713&&A<=3714||A==3716||A>=3719&&A<=3720||A==3722||A==3725||A>=3732&&A<=3735||A>=3737&&A<=3743||A>=3745&&A<=3747||A==3749||A==3751||A>=3754&&A<=3755||A>=3757&&A<=3758||A==3760||A>=3762&&A<=3763||A==3773||A>=3776&&A<=3780||A>=3904&&A<=3911||A>=3913&&A<=3945||A>=4256&&A<=4293||A>=4304&&A<=4342||A==4352||A>=4354&&A<=4355||A>=4357&&A<=4359||A==4361||A>=4363&&A<=4364||A>=4366&&A<=4370||A==4412||A==4414||A==4416||A==4428||A==4430||A==4432||A>=4436&&A<=4437||A==4441||A>=4447&&A<=4449||A==4451||A==4453||A==4455||A==4457||A>=4461&&A<=4462||A>=4466&&A<=4467||A==4469||A==4510||A==4520||A==4523||A>=4526&&A<=4527||A>=4535&&A<=4536||A==4538||A>=4540&&A<=4546||A==4587||A==4592||A==4601||A>=7680&&A<=7835||A>=7840&&A<=7929||A>=7936&&A<=7957||A>=7960&&A<=7965||A>=7968&&A<=8005||A>=8008&&A<=8013||A>=8016&&A<=8023||A==8025||A==8027||A==8029||A>=8031&&A<=8061||A>=8064&&A<=8116||A>=8118&&A<=8124||A==8126||A>=8130&&A<=8132||A>=8134&&A<=8140||A>=8144&&A<=8147||A>=8150&&A<=8155||A>=8160&&A<=8172||A>=8178&&A<=8180||A>=8182&&A<=8188||A==8486||A>=8490&&A<=8491||A==8494||A>=8576&&A<=8578||A>=12353&&A<=12436||A>=12449&&A<=12538||A>=12549&&A<=12588||A>=44032&&A<=55203||A>=19968&&A<=40869||A==12295||A>=12321&&A<=12329},ot.isNCNameChar=function(A){return A>=48&&A<=57||A>=1632&&A<=1641||A>=1776&&A<=1785||A>=2406&&A<=2415||A>=2534&&A<=2543||A>=2662&&A<=2671||A>=2790&&A<=2799||A>=2918&&A<=2927||A>=3047&&A<=3055||A>=3174&&A<=3183||A>=3302&&A<=3311||A>=3430&&A<=3439||A>=3664&&A<=3673||A>=3792&&A<=3801||A>=3872&&A<=3881||A==46||A==45||A==95||ot.isLetter(A)||A>=768&&A<=837||A>=864&&A<=865||A>=1155&&A<=1158||A>=1425&&A<=1441||A>=1443&&A<=1465||A>=1467&&A<=1469||A==1471||A>=1473&&A<=1474||A==1476||A>=1611&&A<=1618||A==1648||A>=1750&&A<=1756||A>=1757&&A<=1759||A>=1760&&A<=1764||A>=1767&&A<=1768||A>=1770&&A<=1773||A>=2305&&A<=2307||A==2364||A>=2366&&A<=2380||A==2381||A>=2385&&A<=2388||A>=2402&&A<=2403||A>=2433&&A<=2435||A==2492||A==2494||A==2495||A>=2496&&A<=2500||A>=2503&&A<=2504||A>=2507&&A<=2509||A==2519||A>=2530&&A<=2531||A==2562||A==2620||A==2622||A==2623||A>=2624&&A<=2626||A>=2631&&A<=2632||A>=2635&&A<=2637||A>=2672&&A<=2673||A>=2689&&A<=2691||A==2748||A>=2750&&A<=2757||A>=2759&&A<=2761||A>=2763&&A<=2765||A>=2817&&A<=2819||A==2876||A>=2878&&A<=2883||A>=2887&&A<=2888||A>=2891&&A<=2893||A>=2902&&A<=2903||A>=2946&&A<=2947||A>=3006&&A<=3010||A>=3014&&A<=3016||A>=3018&&A<=3021||A==3031||A>=3073&&A<=3075||A>=3134&&A<=3140||A>=3142&&A<=3144||A>=3146&&A<=3149||A>=3157&&A<=3158||A>=3202&&A<=3203||A>=3262&&A<=3268||A>=3270&&A<=3272||A>=3274&&A<=3277||A>=3285&&A<=3286||A>=3330&&A<=3331||A>=3390&&A<=3395||A>=3398&&A<=3400||A>=3402&&A<=3405||A==3415||A==3633||A>=3636&&A<=3642||A>=3655&&A<=3662||A==3761||A>=3764&&A<=3769||A>=3771&&A<=3772||A>=3784&&A<=3789||A>=3864&&A<=3865||A==3893||A==3895||A==3897||A==3902||A==3903||A>=3953&&A<=3972||A>=3974&&A<=3979||A>=3984&&A<=3989||A==3991||A>=3993&&A<=4013||A>=4017&&A<=4023||A==4025||A>=8400&&A<=8412||A==8417||A>=12330&&A<=12335||A==12441||A==12442||A==183||A==720||A==721||A==903||A==1600||A==3654||A==3782||A==12293||A>=12337&&A<=12341||A>=12445&&A<=12446||A>=12540&&A<=12542},ot.coalesceText=function(A){for(var K=A.firstChild;K!=null;K=K.nextSibling)if(K.nodeType==3||K.nodeType==4){var Se=K.nodeValue,ae=K;for(K=K.nextSibling;K!=null&&(K.nodeType==3||K.nodeType==4);){Se+=K.nodeValue;var Ae=K;K=K.nextSibling,Ae.parentNode.removeChild(Ae)}if(ae.nodeType==4){var it=ae.parentNode;if(ae.nextSibling==null)it.removeChild(ae),it.appendChild(it.ownerDocument.createTextNode(Se));else{var Ut=ae.nextSibling;it.removeChild(ae),it.insertBefore(it.ownerDocument.createTextNode(Se),Ut)}}else ae.nodeValue=Se;if(K==null)break}else K.nodeType==1&&ot.coalesceText(K)},ot.instance_of=function(A,K){for(;A!=null;){if(A.constructor===K)return!0;if(A===Object)return!1;A=A.constructor.superclass}return!1},ot.getElementById=function(A,K){if(A.nodeType==1&&(A.getAttribute("id")==K||A.getAttributeNS(null,"id")==K))return A;for(var Se=A.firstChild;Se!=null;Se=Se.nextSibling){var ae=ot.getElementById(Se,K);if(ae!=null)return ae}return null};var $t=function(){function A(Se,ae){var Ae=ae?": "+ae.toString():"";switch(Se){case K.INVALID_EXPRESSION_ERR:return"Invalid expression"+Ae;case K.TYPE_ERR:return"Type error"+Ae}return null}function K(Se,ae,Ae){var it=Error.call(this,A(Se,ae)||Ae);return it.code=Se,it.exception=ae,it}return K.prototype=Object.create(Error.prototype),K.prototype.constructor=K,K.superclass=Error,K.prototype.toString=function(){return this.message},K.fromMessage=function(Se,ae){return new K(null,ae,Se)},K.INVALID_EXPRESSION_ERR=51,K.TYPE_ERR=52,K}();ct.prototype={},ct.prototype.constructor=ct,ct.superclass=Object.prototype;function ct(A,K,Se){this.xpath=Se.parse(A),this.context=new at,this.context.namespaceResolver=new kt(K)}ct.getOwnerDocument=function(A){return A.nodeType===9?A:A.ownerDocument},ct.detectHtmlDom=function(A){if(!A)return!1;var K=ct.getOwnerDocument(A);try{return K.implementation.hasFeature("HTML","2.0")}catch{return!0}},ct.prototype.evaluate=function(A,K,Se){this.context.expressionContextNode=A,this.context.caseInsensitive=ct.detectHtmlDom(A);var ae=this.xpath.evaluate(this.context);return new Wt(ae,K)},kt.prototype={},kt.prototype.constructor=kt,kt.superclass=Object.prototype;function kt(A){this.xpathNSResolver=A}kt.prototype.getNamespace=function(A,K){return this.xpathNSResolver==null?null:this.xpathNSResolver.lookupNamespaceURI(A)},zt.prototype={},zt.prototype.constructor=zt,zt.superclass=Object.prototype;function zt(A){this.node=A,this.namespaceResolver=new rt}zt.prototype.lookupNamespaceURI=function(A){return this.namespaceResolver.getNamespace(A,this.node)},Wt.prototype={},Wt.prototype.constructor=Wt,Wt.superclass=Object.prototype;function Wt(A,K){switch(K==Wt.ANY_TYPE&&(A.constructor===dt?K=Wt.STRING_TYPE:A.constructor===xt?K=Wt.NUMBER_TYPE:A.constructor===V?K=Wt.BOOLEAN_TYPE:A.constructor===te&&(K=Wt.UNORDERED_NODE_ITERATOR_TYPE)),this.resultType=K,K){case Wt.NUMBER_TYPE:this.numberValue=A.numberValue();return;case Wt.STRING_TYPE:this.stringValue=A.stringValue();return;case Wt.BOOLEAN_TYPE:this.booleanValue=A.booleanValue();return;case Wt.ANY_UNORDERED_NODE_TYPE:case Wt.FIRST_ORDERED_NODE_TYPE:if(A.constructor===te){this.singleNodeValue=A.first();return}break;case Wt.UNORDERED_NODE_ITERATOR_TYPE:case Wt.ORDERED_NODE_ITERATOR_TYPE:if(A.constructor===te){this.invalidIteratorState=!1,this.nodes=A.toArray(),this.iteratorIndex=0;return}break;case Wt.UNORDERED_NODE_SNAPSHOT_TYPE:case Wt.ORDERED_NODE_SNAPSHOT_TYPE:if(A.constructor===te){this.nodes=A.toArray(),this.snapshotLength=this.nodes.length;return}break}throw new $t($t.TYPE_ERR)}Wt.prototype.iterateNext=function(){if(this.resultType!=Wt.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=Wt.ORDERED_NODE_ITERATOR_TYPE)throw new $t($t.TYPE_ERR);return this.nodes[this.iteratorIndex++]},Wt.prototype.snapshotItem=function(A){if(this.resultType!=Wt.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=Wt.ORDERED_NODE_SNAPSHOT_TYPE)throw new $t($t.TYPE_ERR);return this.nodes[A]},Wt.ANY_TYPE=0,Wt.NUMBER_TYPE=1,Wt.STRING_TYPE=2,Wt.BOOLEAN_TYPE=3,Wt.UNORDERED_NODE_ITERATOR_TYPE=4,Wt.ORDERED_NODE_ITERATOR_TYPE=5,Wt.UNORDERED_NODE_SNAPSHOT_TYPE=6,Wt.ORDERED_NODE_SNAPSHOT_TYPE=7,Wt.ANY_UNORDERED_NODE_TYPE=8,Wt.FIRST_ORDERED_NODE_TYPE=9;function mr(A,K){A.createExpression=function(Se,ae){try{return new ct(Se,ae,K)}catch(Ae){throw new $t($t.INVALID_EXPRESSION_ERR,Ae)}},A.createNSResolver=function(Se){return new zt(Se)},A.evaluate=function(Se,ae,Ae,it,Ut){if(it<0||it>9)throw{code:0,toString:function(){return"Request type not supported"}};return A.createExpression(Se,Ae,K).evaluate(ae,it,Ut)}}try{var or=!0;try{document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)&&(or=!1)}catch{}or&&mr(document,new O)}catch{}mr(g,new O),function(){var A=new O,K=new rt,Se=new st,ae=new vt;function Ae(Xt){return{getNamespace:function(_r,Ir){var Vr=Xt(_r,Ir);return Vr||K.getNamespace(_r,Ir)}}}function it(Xt){return Ae(Xt.getNamespace.bind(Xt))}function Ut(Xt){return Ae(function(_r){return Xt[_r]})}function Gt(Xt){return Xt&&typeof Xt.getNamespace=="function"?it(Xt):typeof Xt=="function"?Ae(Xt):typeof Xt=="object"?Ut(Xt):K}function ar(Xt){if(Xt===null||typeof Xt>"u"||Xt instanceof dt||Xt instanceof V||Xt instanceof xt||Xt instanceof te)return Xt;switch(typeof Xt){case"string":return new dt(Xt);case"boolean":return new V(Xt);case"number":return new xt(Xt)}var _r=new te;return _r.addArray([].concat(Xt)),_r}function jt(Xt){return function(_r){var Ir=Array.prototype.slice.call(arguments,1).map(function(xn){return xn.evaluate(_r)}),Vr=Xt.apply(this,[].concat(_r,Ir));return ar(Vr)}}function Jt(Xt){return{getFunction:function(_r,Ir){var Vr=Xt(_r,Ir);return Vr?jt(Vr):Se.getFunction(_r,Ir)}}}function dr(Xt){return Jt(Xt.getFunction.bind(Xt))}function cr(Xt){return Jt(function(_r){return Xt[_r]})}function Rr(Xt){return Xt&&typeof Xt.getFunction=="function"?dr(Xt):typeof Xt=="function"?Jt(Xt):typeof Xt=="object"?cr(Xt):Se}function Ar(Xt){return{getVariable:function(_r,Ir){var Vr=Xt(_r,Ir);return ar(Vr)}}}function hr(Xt){if(Xt){if(typeof Xt.getVariable=="function")return Ar(Xt.getVariable.bind(Xt));if(typeof Xt=="function")return Ar(Xt);if(typeof Xt=="object")return Ar(function(_r){return Xt[_r]})}return ae}function qr(Xt,_r,Ir){Xt in Ir&&(_r[Xt]=Ir[Xt])}function Wr(Xt){var _r=new at;return Xt?(_r.namespaceResolver=Gt(Xt.namespaces),_r.functionResolver=Rr(Xt.functions),_r.variableResolver=hr(Xt.variables),_r.expressionContextNode=Xt.node,qr("allowAnyNamespaceForNoPrefix",_r,Xt),qr("isHtml",_r,Xt)):_r.namespaceResolver=K,_r}function Lr(Xt,_r){var Ir=Wr(_r);return Xt.evaluate(Ir)}var Zr={evaluate:function(Xt){return Lr(this.expression,Xt)},evaluateNumber:function(Xt){return this.evaluate(Xt).numberValue()},evaluateString:function(Xt){return this.evaluate(Xt).stringValue()},evaluateBoolean:function(Xt){return this.evaluate(Xt).booleanValue()},evaluateNodeSet:function(Xt){return this.evaluate(Xt).nodeset()},select:function(Xt){return this.evaluateNodeSet(Xt).toArray()},select1:function(Xt){return this.select(Xt)[0]}};function Ur(Xt){var _r=A.parse(Xt);return Object.create(Zr,{expression:{value:_r}})}g.parse=Ur}(),W(g,{XPath:Y,XPathParser:O,XPathResult:Wt,Step:Ze,PathExpr:et,NodeTest:Qe,LocationPath:tt,OrOperation:Ee,AndOperation:be,BarOperation:Bt,EqualsOperation:Ce,NotEqualOperation:Oe,LessThanOperation:mt,GreaterThanOperation:Tt,LessThanOrEqualOperation:St,GreaterThanOrEqualOperation:ft,PlusOperation:ut,MinusOperation:wt,MultiplyOperation:Et,DivOperation:Pt,ModOperation:Mt,UnaryMinusOperation:G,FunctionCall:_t,VariableReference:lt,XPathContext:at,XNodeSet:te,XBoolean:V,XString:dt,XNumber:xt,NamespaceResolver:rt,FunctionResolver:st,VariableResolver:vt,Utilities:ot}),g.select=function(A,K,Se){return g.selectWithResolver(A,K,null,Se)},g.useNamespaces=function(A){var K={mappings:A||{},lookupNamespaceURI:function(Se){return this.mappings[Se]}};return function(Se,ae,Ae){return g.selectWithResolver(Se,ae,K,Ae)}},g.selectWithResolver=function(A,K,Se,ae){var Ae=new ct(A,Se,new O),it=Wt.ANY_TYPE,Ut=Ae.evaluate(K,it,null);return Ut.resultType==Wt.STRING_TYPE?Ut=Ut.stringValue:Ut.resultType==Wt.NUMBER_TYPE?Ut=Ut.numberValue:Ut.resultType==Wt.BOOLEAN_TYPE?Ut=Ut.booleanValue:(Ut=Ut.nodes,ae&&(Ut=Ut[0])),Ut},g.select1=function(A,K){return g.select(A,K,!0)}})(d)})(xpath);const styles="",BasicRow=({dataChunk:c,indexKey:d,chunkSize:g})=>{var _,E;if(!c[0].value&&!((_=c[1])!=null&&_.value)&&!((E=c[2])!=null&&E.value))return null;let v=null,b=c;return g===3&&(b=c.slice(0,2),[v]=c.slice(2)),React.createElement(React.Fragment,null,React.createElement("tr",null,b.map((R,U)=>{var B,ee;if(!R.value)return null;let P=1;return(U===0&&(!b[U+1]||!b[U+1].value)||U===1&&(!b[U-1]||!b[U-1].value))&&(P=3),React.createElement(React.Fragment,{key:`${b[0].label}-${String(b[0].value)}-${U}-${d}-${((B=b[1])==null?void 0:B.label)||""}-${((ee=b[1])==null?void 0:ee.value)||""}`},React.createElement("td",{className:"ctw-ccda-common-td1",rowSpan:v&&v.value&&U===0?2:1},R.label.replace(/:/g,"")),React.createElement("td",{className:"ctw-ccda-common-td2",colSpan:P,rowSpan:v&&v.value&&U===0?2:1},R.value))})),v&&v.value&&React.createElement("tr",null,React.createElement("td",{className:"ctw-ccda-common-td1"},v.label.replace(/:/g,"")),React.createElement("td",{className:"ctw-ccda-common-td2"},v.value)))};try{BasicRow.displayName="BasicRow",BasicRow.__docgenInfo={description:"",displayName:"BasicRow",props:{dataChunk:{defaultValue:null,description:"",name:"dataChunk",required:!0,type:{name:"TableInfo[]"}},indexKey:{defaultValue:null,description:"",name:"indexKey",required:!0,type:{name:"number"}},chunkSize:{defaultValue:null,description:"",name:"chunkSize",required:!1,type:{name:"enum",value:[{value:"2"},{value:"3"}]}}}}}catch(c){}const TupleRow=({tuple:c,indexKey:d})=>!c[0].value&&!c[1].value?null:React.createElement("tr",null,c.map((g,v)=>{if(!g.value)return null;let b=1;return(v===0&&!c[1].value||v===1&&!c[0].value)&&(b=3),React.createElement(React.Fragment,{key:`${c[0].label}-${c[0].value}-${v}-${d}-${c[1].label||""}-${c[1].value}`},React.createElement("td",{className:"ctw-ccda-common-td1"},g.label.replace(/:/g,"")),React.createElement("td",{className:"ctw-ccda-common-td2",colSpan:b},g.value))}));try{TupleRow.displayName="TupleRow",TupleRow.__docgenInfo={description:"",displayName:"TupleRow",props:{tuple:{defaultValue:null,description:"",name:"tuple",required:!0,type:{name:"[TableInfo, TableInfo]"}},indexKey:{defaultValue:null,description:"",name:"indexKey",required:!0,type:{name:"number"}}}}}catch(c){}const Table=({data:c,chunkSize:d=2})=>{const[g,v]=lodash.exports.partition(c,_=>!lodash.exports.isArray(_)),b=lodash.exports.chunk(g,d);return React.createElement("table",{className:"ctw-ccda-common-table"},React.createElement("tbody",null,b.map((_,E)=>React.createElement(BasicRow,{key:`${_[0].label}-${E}`,dataChunk:_,chunkSize:d,indexKey:E})),v.map((_,E)=>React.createElement(TupleRow,{key:`${_[0].label}-${_[1].label}-${E}`,tuple:_,indexKey:E}))))};try{Table.displayName="Table",Table.__docgenInfo={description:"",displayName:"Table",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"(TableInfo | [TableInfo, TableInfo])[]"}},chunkSize:{defaultValue:{value:"2"},description:"",name:"chunkSize",required:!1,type:{name:"enum",value:[{value:"2"},{value:"3"}]}}}}}catch(c){}const addressParser=c=>{var g;if(c.text)return c.text;let d="";return d+=c.use?`${lodash.exports.capitalize(c.use)}: `:"",d+=lodash.exports.isEmpty(c.line)?"":`${(g=c.line)==null?void 0:g.join(`
`)}
`,d+=c.city?`${c.city}, `:"",d+=c.state?`${c.state} `:"",d+=c.postalCode||"",d+=c.country?`
${c.country}`:"",d},displayForAddress=c=>lodash.exports.isEmpty(c)?"":lodash.exports.isArray(c)?c.map(addressParser).join(`
`):addressParser(c);function isHumanNameArray(c){return lodash.exports.isArray(c)&&c.every(d=>typeof d=="object")}function isStringArray(c){return lodash.exports.isArray(c)&&c.every(d=>typeof d=="string")}const nameParser=c=>{if(c.text)return c.text;let d="";return c.given&&c.given.length>0&&(d=c.given.join(" "),c.family&&(d=`${d} ${c.family}`)),c.prefix&&c.prefix.length>0&&(d=`${c.prefix.join(" ")} ${d}`),d},displayForName=c=>lodash.exports.isEmpty(c)?"":typeof c=="string"?c:isStringArray(c)?c.reduce((d,g,v)=>`${d}${v===0?"":`
`}${g}`,""):isHumanNameArray(c)?c.map(nameParser).join(", "):nameParser(c),telecomParser=({use:c,system:d,value:g})=>{const v=c?` (${c})`:"";return`${d?`${lodash.exports.capitalize(d)}${v}:`:""} ${g}`.trim()},displayForTelecom=c=>lodash.exports.isEmpty(c)?"":lodash.exports.isArray(c)?c.map(telecomParser).join(`
`):telecomParser(c),addressUseMap={BAD:"bad",DIR:"direct",H:"home",HP:"primary home",HV:"vacation home",PHYS:"physical",PST:"postal",PUB:"public",TMP:"temporary",WP:"work",CONF:"confidential"},getAddress=c=>{if(!c)return"";const d=g=>{const v=String(xpath.select1("string(@use)",g)),b={line:lodash.exports.map(xpath.select("*[name()='streetAddressLine']",g),_=>String(xpath.select("string(text())",_))).filter(Boolean),city:String(xpath.select("string(*[name()='city'])",g)),state:String(xpath.select("string(*[name()='state'])",g)),postalCode:String(xpath.select("string(*[name()='postalCode'])",g)),country:String(xpath.select("string(*[name()='country'])",g)),use:addressUseMap[v]};return displayForAddress(b)};return lodash.exports.isArray(c)?c.map(d).join(`
`):d(c)},contactPointUseMap={BAD:"bad",CONF:"confidential",OLD:"old",H:"home",HP:"primary home",HV:"vacation Home",TMP:"temporary",WP:"work",DIR:"direct",PUB:"public",AS:"answering service",EC:"emergency:",MC:"mobile",PG:"pager"},contactPointTelecomMap={tel:"phone",mailto:"email"},getTelecom=c=>{if(!c)return"";const d=g=>{const b=String(xpath.select1("string(@value)",g)).split(":");let _,E;if(b.length===2&&([_,E]=b),b.length===1&&([E]=b),!E)return"";const R=E.includes("@")?contactPointTelecomMap.mailto:contactPointTelecomMap.tel,P={system:contactPointTelecomMap[_]||R,value:E,use:contactPointUseMap[String(xpath.select1("string(@use)",g))]};return displayForTelecom(P)};return lodash.exports.isArray(c)?c.map(d).join(`
`):d(c)},getContactDetails=(c,d)=>{const g=getAddress(c),v=getTelecom(d);return`${g||""}${g&&v?`
`:""}${v||""}`},humanNameUseMap={A:"Artist/Stage",ABC:"Alphabetic",ASGN:"Assigned",C:"License",I:"Indigenous/Tribal",IDE:"Ideographic",L:"Legal",P:"Pseudonym",PHON:"Phonetic",R:"Religious",SNDX:"Soundex",SRCH:"Search",SYL:"Syllabic"},getHumanName=c=>{if(!c)return"";const d=g=>{const v={use:humanNameUseMap[String(xpath.select("string(@use)",g))],given:lodash.exports.map(xpath.select("(*[name()='given'])",g),b=>String(xpath.select1("string(text())",b))),family:String(xpath.select1("string(*[name()='family']/text())",g)),prefix:lodash.exports.map(xpath.select("(*[name()='prefix'])",g),b=>String(xpath.select1("string(text())",b))),suffix:lodash.exports.map(xpath.select("(*[name()='suffix'])",g),b=>String(xpath.select1("string(text())",b)))};return displayForName(v)};return lodash.exports.isArray(c)?c.map(d).join(`
`):d(c)},getId=c=>{if(!c)return"";const d=String(xpath.select1("string(@root)",c)),g=String(xpath.select1("string(@extension)",c));return`${g}${g?" (":""}${d}${g?")":""}`},getPeriod=c=>{if(!c)return{};const d=String(xpath.select1("string(*[name()='low']/@value)",c)),g=String(xpath.select1("string(*[name()='high']/@value)",c));if(!d&&!g)return{};if(d&&!g)return{start:displayDateTimeasString(ccdaDatetimeToISO(d))};if(!d&&g)return{end:displayDateTimeasString(ccdaDatetimeToISO(g))};let v=displayDateTimeasString(ccdaDatetimeToISO(d)),b=displayDateTimeasString(ccdaDatetimeToISO(g));return(v.includes("T")||b.includes("T"))&&(v=displayDateTimeasString(ccdaDatetimeToISO(v)),b=displayDateTimeasString(ccdaDatetimeToISO(b))),isBefore(new Date(v),new Date(b))||isEqual(new Date(v),new Date(b))?{start:v,end:b}:{start:v}},replaceInXML=(c,d,g,v=!0)=>{if(lodash.exports.isArray(d))return d.reduce((_,E)=>replaceInXML(_,E,g),c);const b=v?lodash.exports.escapeRegExp:lodash.exports.identity;return c.replace(new RegExp(b(d),"g"),g)},replaceTag=(c,d,g)=>{const v=[`</${d}>`,`<${d}>`,`</${d}`,`<${d}`],b=[`</${g}>`,`<${g}>`,`</${g}`,`<${g}`];return v.reduce((_,E,R)=>replaceInXML(_,v[R],b[R]),c)},fixHtml=c=>{let d=c.toString();return d=replaceInXML(d,["<list/>","<item/>","<content/>","<paragraph/>","<section/>","<br/>",'<text xmlns="urn:hl7-org:v3">',"<text />","<text/>"],""),d=replaceInXML(d,' styleCode="(.*?)"',"",!1),d=replaceTag(d,"section","div"),d=replaceTag(d,"list","ul"),d=replaceTag(d,"item","li"),d=replaceTag(d,"content","div"),d=replaceTag(d,"paragraph","p"),d},isGeneralInfoExist=c=>!!c,isExtendedGeneralInfoExist=c=>!!c,getAuthenticatorData=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='authenticator']",c);if(!lodash.exports.isEmpty(d))return d.map(g=>{const v=xpath.select1("*[name()='assignedEntity']",g);if(!v)return;const b=xpath.select1("*[name()='assignedPerson']",v),_=getHumanName(xpath.select("*[name()='name']",b)),E=getContactDetails(xpath.select("*[name()='addr']",v),xpath.select("*[name()='telecom']",v)),R=displayDateTimeasString(ccdaDatetimeToISO(String(xpath.select1("string(*[name()='time']/@value)",g))));return{name:_,contactDetails:E,time:R}}).filter(isExtendedGeneralInfoExist)},Authenticator=({document:c})=>{const d=getAuthenticatorData(c);if(!d||lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Authenticator",value:`${v.name||"Unknown"}${v.time?` signed at ${v.time}`:""}`},{label:"Contact Details",value:v.contactDetails}]);return React.createElement(Table,{data:g})};try{Authenticator.displayName="Authenticator",Authenticator.__docgenInfo={description:"",displayName:"Authenticator",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getAuthor=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='author']",c);return lodash.exports.isEmpty(d)?void 0:d.map(v=>{const b=xpath.select1("*[name()='assignedAuthor']/*[name()='assignedPerson']/*[name()='name']",v),_=xpath.select1("*[name()='assignedAuthor']/*[name()='assignedAuthoringDevice']",v);let E="";if(b)E=getHumanName(b);else if(_){const P=String(xpath.select1("string(*[name()='manufacturerModelName'])",_)),B=String(xpath.select1("string(*[name()='softwareName'])",_));E=[P,B].filter(Boolean).join("; ")}const R=String(xpath.select1("string(*[name()='assignedAuthor']/*[name()='representedOrganization']/*[name()='name'])",v)),U=displayDateTimeasString(ccdaDatetimeToISO(String(xpath.select1("string(*[name()='time'])",v))));return[{label:"Name:",value:E},{label:"Organization:",value:R},{label:"Authored on",value:U}]}).reduce((v,b,_)=>({...v,[`author${_+1}`]:b}),{})},getAuthorData=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='author']",c);if(lodash.exports.isEmpty(d))return;const g=getAuthor(c);return d.map((v,b)=>{const _=xpath.select1("*[name()='assignedAuthor']",v),E=getContactDetails(xpath.select("*[name()='addr']",_),xpath.select("*[name()='telecom']",_)),R=xpath.select1("*[name()='representedOrganization']",_),U={name:g[`author${b+1}`][0].value,contactDetails:E,organization:{name:g[`author${b+1}`][1].value,contactDetails:""}};if(R){const P=getContactDetails(xpath.select("*[name()='addr']",R),xpath.select("*[name()='telecom']",R));return{...U,organization:{...U.organization,contactDetails:P}}}return U})},Author=({document:c})=>{const d=getAuthorData(c);if(!d||lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Author",value:`${v.name||"Unknown"}${v.organization.name?`, Organization: ${v.organization.name}`:""}`},{label:"Contact Details",value:v.contactDetails},{label:"Contact Details (Organization)",value:v.organization.contactDetails}]);return React.createElement(Table,{data:g,chunkSize:3})};try{Author.displayName="Author",Author.__docgenInfo={description:"",displayName:"Author",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getConsent=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='authorization']/*[name()='consent']",c);return lodash.exports.isEmpty(d)?void 0:d.map(v=>{const b=getId(xpath.select1("*[name()='id']",v)),_=String(xpath.select1("string(*[name()='code']/@displayName)",v)),E=String(xpath.select1("string(*[name()='statusCode']/@code)",v));return[{label:"ID:",value:b},{label:"Code:",value:_},{label:"Status:",value:E}]}).reduce((v,b,_)=>({...v,[`consent${_+1}`]:b}),{})},getAuthorizationData=c=>{const d=getConsent(c);return Object.values(d||{})},Authorization=({document:c})=>{const d=getAuthorizationData(c);if(lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Consent",value:`Order: ${v[0].value||"Unknown"}, ${v[1].value||"Unknown"}, ${v[2].value||"Unknown"}`},{label:"",value:""}]);return React.createElement(Table,{data:g})};try{Authorization.displayName="Authorization",Authorization.__docgenInfo={description:"",displayName:"Authorization",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getCustodianData=c=>{const d=xpath.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']",c);if(!d)return;const g=String(xpath.select1("string(*[name()='name'])",d)),v=getContactDetails(xpath.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']/*[name()='addr']",c),xpath.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']/*[name()='telecom']",c));return{name:g,contactDetails:v}},Custodian=({document:c})=>{const d=getCustodianData(c);if(!d)return null;const{name:g,contactDetails:v}=d,b=[{label:"Custodian",value:g},{label:"Contact Details",value:v}];return React.createElement(Table,{data:b})};try{Custodian.displayName="Custodian",Custodian.__docgenInfo={description:"",displayName:"Custodian",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getDataEntererData=c=>{const d=xpath.select1("*[name()='ClinicalDocument']/*[name()='dataEnterer']/*[name()='assignedEntity']",c);if(!d)return;const g=xpath.select1("*[name()='assignedPerson']",d),v=getHumanName(xpath.select("*[name()='name']",g)),b=getContactDetails(xpath.select("*[name()='addr']",d),xpath.select("*[name()='telecom']",d));return{name:v,contactDetails:b}},DataEnterer=({document:c})=>{const d=getDataEntererData(c);if(!d)return null;const{name:g,contactDetails:v}=d,b=[{label:"Data Enterer",value:g},{label:"Contact Details",value:v}];return React.createElement(Table,{data:b})};try{DataEnterer.displayName="DataEnterer",DataEnterer.__docgenInfo={description:"",displayName:"DataEnterer",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const confidentialityCodeMap={N:"normal",R:"restricted",V:"very restricted"},getDocumentData=c=>{const d=getId(xpath.select1("*[name()='ClinicalDocument']/*[name()='id']",c)),v=displayDateTimeasString(ccdaDatetimeToISO(String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='effectiveTime']/@value)",c)))),b=String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='versionNumber']/@value)",c)),_=getId(xpath.select1("*[name()='ClinicalDocument']/*[name()='setId']",c)),E=confidentialityCodeMap[String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='confidentialityCode']/@code)",c))],R=String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='code']/@displayName)",c)),U=String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='languageCode']/@code)",c));return{id:d,createdOn:v,version:b,setId:_,confidentialityCode:E,code:R,languageCode:U}},Document=({document:c})=>{const{id:d,createdOn:g,version:v,setId:b,confidentialityCode:_,code:E,languageCode:R}=getDocumentData(c),U=[{label:"Document",value:React.createElement(React.Fragment,null,React.createElement("b",null,"ID: "),d,b&&React.createElement(React.Fragment,null,React.createElement("br",null),React.createElement("b",null,"Set ID: "),b))},{label:"Created on",value:g},{label:"Version",value:v||"Unknown"},{label:"Confidentiality",value:_},{label:"Code",value:E},{label:"Language",value:R}];return React.createElement(Table,{data:U})};try{Document.displayName="Document",Document.__docgenInfo={description:"",displayName:"Document",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getDocumentationOf=c=>{const d=xpath.select("//*[name()='documentationOf']/*[name()='serviceEvent']",c);return lodash.exports.isEmpty(d)?void 0:d.map(v=>{const b=xpath.select1("*[name()='effectiveTime']",v),_=getPeriod(b),R=xpath.select("*[name()='performer']/*[name()='assignedEntity']/*[name()='assignedPerson']/*[name()='name']",v).map(U=>getHumanName(U));return[{label:"Date/Time:",value:_.start||_.end?`from ${_.start?displayDateTimeasString(ccdaDatetimeToISO(_.start)):"unknown"} to ${_.end?displayDateTimeasString(ccdaDatetimeToISO(_.end)):"unknown"}`:""},...R.map(U=>({label:"Performer:",value:U}))]}).reduce((v,b,_)=>({...v,[`documentationOf${_+1}`]:b}),{})},getDocumentationOfData=c=>{const d=xpath.select("//*[name()='documentationOf']/*[name()='serviceEvent']",c);if(lodash.exports.isEmpty(d))return;const g=getDocumentationOf(c);return d.map((v,b)=>{const E=xpath.select("*[name()='performer']",v).map((R,U)=>{const P=String(xpath.select1("string(*[name()='functionCode']/@displayName)",R)),B=lodash.exports.get(g,`documentationOf${b+1}[${U+1}].value`),ee=getContactDetails(xpath.select("*[name()='assignedEntity']/*[name()='addr']",R),xpath.select("*[name()='assignedEntity']/*[name()='telecom']",R));if(!(!B&&!P&&!ee))return{functionCode:P,name:B,contactDetails:ee}});return{dateTime:lodash.exports.get(g,`documentationOf${b+1}[0].value`),finalPerformers:E.filter(isGeneralInfoExist)}})},DocumentationOf=({document:c})=>{const d=getDocumentationOfData(c);if(!d||lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Documentation of - Date/Time",value:v.dateTime},{label:"",value:""},...v.finalPerformers.flatMap(b=>[{label:"Performer",value:`${b.name||"Unknown"}${b.functionCode?` - ${b.functionCode}`:""}`},{label:"Contact Details",value:b.contactDetails}])]);return React.createElement(Table,{data:g})};try{DocumentationOf.displayName="DocumentationOf",DocumentationOf.__docgenInfo={description:"",displayName:"DocumentationOf",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getEncounter=c=>{const d=xpath.select1("*[name()='ClinicalDocument']/*[name()='componentOf']/*[name()='encompassingEncounter']",c);if(!d)return;const g=getId(xpath.select1("*[name()='id']",d)),v=String(xpath.select1("string(*[name()='code']/@displayName)",d)),b=getPeriod(xpath.select1("*[name()='effectiveTime']",d));return[{label:"ID:",value:b.start||b.end||g?g||"Unknown":""},{label:"Type:",value:v},{label:"Date/Time:",value:b.start||b.end?`from ${b.start?displayDateTimeasString(ccdaDatetimeToISO(b.start)):"unknown"} to ${b.end?displayDateTimeasString(ccdaDatetimeToISO(b.end)):"unknown"}`:""}]},getEncounterData=c=>{const d=xpath.select1("*[name()='ClinicalDocument']/*[name()='componentOf']/*[name()='encompassingEncounter']",c);if(!d)return;const g=getEncounter(c),v=String(xpath.select1("string(*[name()='dischargeDispositionCode']/@displayName)",d)),b=getId(xpath.select1("*[name()='location']/*[name()='healthCareFacility']/*[name()='id']",d));return{id:g[0],type:g[1],dateTime:g[2],dischargeDisposition:v,encounterLocation:b?`ID: ${b}`:null}},Encounter=({document:c})=>{const d=getEncounterData(c);if(!d)return null;const{dischargeDisposition:g,encounterLocation:v,id:b,type:_,dateTime:E}=d,R=[{label:"Encounter",value:E.value||g||v||b.value?React.createElement(React.Fragment,null,React.createElement("b",null,"ID: "),b.value||"Unknown",_.value&&React.createElement(React.Fragment,null,React.createElement("br",null),React.createElement("b",null,"Type: "),_.value)):null},{label:"Date/Time",value:E.value},{label:"Discharge Disposition",value:g},{label:"Encounter Location",value:v}];return React.createElement(Table,{data:R})};try{Encounter.displayName="Encounter",Encounter.__docgenInfo={description:"",displayName:"Encounter",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getInformantData=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='informant']",c);if(!lodash.exports.isEmpty(d))return d.map(g=>{const v=xpath.select1("*[name()='assignedEntity']",g);if(v){const _=xpath.select1("*[name()='assignedPerson']",v),E=getHumanName(xpath.select("*[name()='name']",_)),R=getContactDetails(xpath.select("*[name()='addr']",v),xpath.select("*[name()='telecom']",v));return{name:E,contactDetails:R,relationship:""}}const b=xpath.select1("*[name()='relatedEntity']",g);if(b){const _=xpath.select1("*[name()='relatedPerson']",b),E=getHumanName(xpath.select("*[name()='name']",_)),R=getContactDetails(xpath.select("*[name()='addr']",b),xpath.select("*[name()='telecom']",b)),U=String(xpath.select1("string(*[name()='code']/@displayName)",b)).toLowerCase();return{name:E,contactDetails:R,relationship:U}}}).filter(isExtendedGeneralInfoExist)},Informant=({document:c})=>{const d=getInformantData(c);if(!d||lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Informant",value:`${v.name||"Unknown"}${v.relationship?` - ${v.relationship}`:""}`},{label:"Contact Details",value:v.contactDetails}]);return React.createElement(Table,{data:g})};try{Informant.displayName="Informant",Informant.__docgenInfo={description:"",displayName:"Informant",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getInformationRecipientData=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='informationRecipient']/*[name()='intendedRecipient']",c);if(!lodash.exports.isEmpty(d))return d.map(g=>{const v=xpath.select1("*[name()='informationRecipient']",g),b=xpath.select1("*[name()='receivedOrganization']",g);if(v){const U=getHumanName(xpath.select1("*[name()='name']",v)),P=String(xpath.select1("string(*[name()='name']/node())",b));return{name:U,contactDetails:"",organization:{name:P,contactDetails:""}}}const _=xpath.select("*[name()='id']",g).map(getId).join(", "),E=getContactDetails(xpath.select("*[name()='addr']",g),xpath.select("*[name()='telecom']",g)),R={name:_,contactDetails:E,organization:{name:"",contactDetails:""}};if(b){const U=String(xpath.select1("string(*[name()='name']/node())",b)),P=getContactDetails(xpath.select("*[name()='addr']",b),xpath.select("*[name()='telecom']",b));return{...R,organization:{name:U,contactDetails:P}}}return R})},InformationRecipient=({document:c})=>{const d=getInformationRecipientData(c);if(!d||lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Information Recipient",value:v.name},{label:"Contact Details",value:v.contactDetails},{label:"Organization",value:v.organization.name},{label:"Contact Details (Organization)",value:v.organization.contactDetails}]);return React.createElement(Table,{data:g})};try{InformationRecipient.displayName="InformationRecipient",InformationRecipient.__docgenInfo={description:"",displayName:"InformationRecipient",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getInFulfillmentOf=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='inFulfillmentOf']/*[name()='order']",c);return lodash.exports.isEmpty(d)?void 0:d.map(v=>{const b=getId(xpath.select1("*[name()='id']",v)),_=String(xpath.select1("string(*[name()='code']/@displayName)",v));return[{label:"Order ID:",value:b},{label:"Code:",value:_}]}).reduce((v,b,_)=>({...v,[`inFulfillmentOf${_+1}`]:b}),{})},getInFulfillmentOfData=c=>{const d=getInFulfillmentOf(c);return Object.values(d||{})},InFulfillmentOf=({document:c})=>{const d=getInFulfillmentOfData(c);if(lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"In Fulfillment Of",value:`Order: ${v[0].value||"Unknown"}, ${v[1].value||"Unknown"}`},{label:"",value:""}]);return React.createElement(Table,{data:g})};try{InFulfillmentOf.displayName="InFulfillmentOf",InFulfillmentOf.__docgenInfo={description:"",displayName:"InFulfillmentOf",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getLegalAuthenticatorData=c=>{const d=xpath.select1("*[name()='ClinicalDocument']/*[name()='legalAuthenticator']",c);if(!d)return;const g=xpath.select1("*[name()='assignedEntity']",d),v=xpath.select1("*[name()='assignedPerson']",g),b=getHumanName(xpath.select("*[name()='name']",v)),_=getContactDetails(xpath.select("*[name()='addr']",g),xpath.select("*[name()='telecom']",g)),E=displayDateTimeasString(ccdaDatetimeToISO(String(xpath.select1("string(*[name()='time']/@value)",d))));return{name:b,contactDetails:_,time:E}},LegalAuthenticator=({document:c})=>{const d=getLegalAuthenticatorData(c);if(!d)return null;const{name:g,time:v,contactDetails:b}=d,_=v?` signed at ${v}`:"",E=[{label:"Legal Authenticator",value:`${g}${_}`},{label:"Contact Details",value:b}];return React.createElement(Table,{data:E})};try{LegalAuthenticator.displayName="LegalAuthenticator",LegalAuthenticator.__docgenInfo={description:"",displayName:"LegalAuthenticator",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getParticipantData=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='participant']",c);if(!lodash.exports.isEmpty(d))return d.map(g=>{const v=xpath.select1("*[name()='associatedEntity']",g);if(v){const b=xpath.select1("*[name()='associatedPerson']",v),_=getHumanName(xpath.select("*[name()='name']",b)),E=getContactDetails(xpath.select("*[name()='addr']",v),xpath.select("*[name()='telecom']",v)),R=xpath.select1("*[name()='time']",g),U=getPeriod(R),P=String(xpath.select1("string(*[name()='code']/@displayName)",v)).toLowerCase();return{name:_,contactDetails:E,time:`from ${U.start} to ${U.end}`,relationship:P}}}).filter(isExtendedGeneralInfoExist)},Participant=({document:c})=>{const d=getParticipantData(c);if(!d||lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Participant",value:`${v.name}${v.relationship?` - ${v.relationship}`:""}`},{label:"Contact Details",value:v.contactDetails}]);return React.createElement(Table,{data:g})};try{Participant.displayName="Participant",Participant.__docgenInfo={description:"",displayName:"Participant",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getGuardian$1=c=>{const d=xpath.select("*[name()='patient']/*[name()='guardian']",c);if(!lodash.exports.isEmpty(d))return d.map(g=>{const v=xpath.select1("*[name()='guardianPerson']",g),b=String(xpath.select1("string(*[name()='code']/@displayName)",g)),_=getHumanName(xpath.select("*[name()='name']",v)),E=b?` - ${b}`:"";return{label:"",value:`${_}${E}`}})},getPatient=c=>{const g=xpath.select("*[name()='ClinicalDocument']/*[name()='recordTarget']/*[name()='patientRole']",c).map(v=>{const b=xpath.select1("*[name()='patient']",v),_=getHumanName(xpath.select1("*[name()='name']",b)),E=xpath.select("*[name()='id']",v).map(getId).join(", "),R=String(xpath.select1("string(*[name()='administrativeGenderCode']/@displayName)",b)),U=ccdaDatetimeToISO(String(xpath.select1("string(*[name()='birthTime']/@value)",b)))||new Date,P=ccdaDatetimeToISO(String(xpath.select1("string(*[name()='sdtc:deceasedTime']/@value)",b)))||new Date,B=String(xpath.select1("string(*[name()='sdtc:deceasedInd']/@value)",b))==="true",ee=B?"deceased":differenceInYears(isValid$1(P)?P:new Date,U),re=`${format(U,"MMMM dd, yyyy")} (${ee}${B?"":" yr"}${isValid$1(P)?" - deceased":""})`,ne=getGuardian$1(v);return{patient:[{label:"Name:",value:_},{label:"ID:",value:E},{label:"Date of birth:",value:re},{label:"Gender:",value:R}],guardian:ne}});return lodash.exports.map(g,v=>[v.patient,v.guardian]).reduce((v,b,_)=>({...v,[`patient${_+1}`]:b[0],[`guardian${_+1}`]:b[1]}),{})},getBirthPlace=c=>{const d=xpath.select1("*[name()='birthplace']/*[name()='place']/*[name()='addr']",c);return d?getAddress(d):""},getEthnicity=c=>{const d=xpath.select1("*[name()='ethnicGroupCode']",c);if(d)return String(xpath.select1("string(@displayName)",d));const g=xpath.select("*[name()='sdtc:ethnicGroupCode']",c);return lodash.exports.isEmpty(g)?"":String(xpath.select1("string(@displayName)",g[0]))},getGuardian=c=>{const d=xpath.select("//*[name()='patientRole']/*[name()='patient']/*[name()='guardian']",document);if(!d||lodash.exports.isEmpty(d))return;const g=getGuardian$1(c);return d.map((v,b)=>{const _=getContactDetails(xpath.select("*[name()='addr']",v),xpath.select("*[name()='telecom']",v));return{name:g[b].value,contactDetails:_}})},getLanguage=c=>xpath.select("*[name()='languageCommunication']",c).reduce((g,v,b)=>{const _=String(xpath.select1("string(*[name()='languageCode']/@code)",v));if(!_)return g;const E=String(xpath.select1("string(*[name()='preferenceInd']/@value)",v)),R=b===0?"":`
`,U=E!==""?`, preferred: ${E}`:"";return`${g}${R}${_}${U}`},""),getMaritalStatus=c=>String(xpath.select1("string(*[name()='maritalStatusCode']/@displayName)",c)),getProviderOrganization=c=>{const d=xpath.select1("*[name()='providerOrganization']",c),g=xpath.select1("//*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']",c),v=d||g,b=xpath.select("*[name()='id']",v).map(getId).join(", "),_=displayForName(xpath.select("string(*[name()='name'])",v)),E=getContactDetails(xpath.select("*[name()='addr']",v),xpath.select("*[name()='telecom']",v)),R=_?`
${_}`:"";return{name:`${b}${R}`,contactDetails:E}},getRace=c=>{const d=xpath.select1("*[name()='raceCode']",c);if(d)return String(xpath.select1("string(@displayName)",d));const g=xpath.select("*[name()='sdtc:raceCode']",c);return lodash.exports.isEmpty(g)?"":String(xpath.select1("string(@displayName)",g[0]))},getReligion=c=>String(xpath.select1("string(*[name()='religiousAffiliationCode']/@displayName)",c)),getPatientData=c=>{const d=xpath.select("//*[name()='patientRole']",c);if(!d||lodash.exports.isEmpty(d))return;const g=getPatient(c),v=Object.entries(g).reduce((b,[_,E])=>({...b,[_]:E==null?void 0:E.reduce((R,U)=>({...R,[lodash.exports.camelCase(U.label)]:U.value}),{})}),{});return d.map((b,_)=>{const E=xpath.select1("*[name()='patient']",b),R=getRace(E),U=getEthnicity(E),P=getContactDetails(xpath.select("*[name()='addr']",b),xpath.select("*[name()='telecom']",b)),B=getLanguage(E),ee=getProviderOrganization(b),re=getGuardian(b),ne=getMaritalStatus(E),j=getReligion(E),z=getBirthPlace(E);return{name:v[`patient${_+1}`].name,contactDetails:P,dateOfBirth:v[`patient${_+1}`].dateOfBirth,gender:v[`patient${_+1}`].gender,race:R,ethnicity:U,patientId:v[`patient${_+1}`].id,language:B,maritalStatus:ne,religion:j,birthPlace:z,guardian:re||[],providerOrganization:ee.name,providerOrganizationContactDetails:ee.contactDetails}})},Patient=({document:c})=>{const d=getPatientData(c);return!d||lodash.exports.isEmpty(d)?null:React.createElement(React.Fragment,null,d.map(g=>{const v=[{label:"Patient",value:g.name},{label:"Contact Details",value:g.contactDetails},{label:"Date Of Birth",value:g.dateOfBirth},{label:"Gender",value:g.gender},{label:"Race",value:g.race},{label:"Ethnicity",value:g.ethnicity},{label:"Patient ID",value:g.patientId},{label:"Language",value:g.language},{label:"Marital Status",value:g.maritalStatus},{label:"Religion",value:g.religion},{label:"Birth Place",value:g.birthPlace},...g.guardian.map(b=>[{label:"Guardian",value:b.name},{label:"Contact Details",value:b.contactDetails}]),[{label:"Provider Organization",value:g.providerOrganization},{label:"Contact Details (Organization)",value:g.providerOrganizationContactDetails}]];return React.createElement(Table,{key:`${g.patientId}-${g.name}-${g.dateOfBirth}`,data:v.filter(b=>lodash.exports.isArray(b)||b.value)})}))};try{Patient.displayName="Patient",Patient.__docgenInfo={description:"",displayName:"Patient",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const DocumentDetails=({document:c})=>React.createElement("div",{className:"ctw-ccda-document-details"},React.createElement(Document,{document:c}),React.createElement(Custodian,{document:c}),React.createElement(Patient,{document:c}),React.createElement(Author,{document:c}),React.createElement(DataEnterer,{document:c}),React.createElement(Informant,{document:c}),React.createElement(InformationRecipient,{document:c}),React.createElement(LegalAuthenticator,{document:c}),React.createElement(Authenticator,{document:c}),React.createElement(Participant,{document:c}),React.createElement(DocumentationOf,{document:c}),React.createElement(InFulfillmentOf,{document:c}),React.createElement(Authorization,{document:c}),React.createElement(Encounter,{document:c}));try{DocumentDetails.displayName="DocumentDetails",DocumentDetails.__docgenInfo={description:"",displayName:"DocumentDetails",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getTitle=c=>{const d=String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='title']/text())",c)),g=ccdaDatetimeToISO(String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='effectiveTime']/@value)",c)));return`${d} (${displayDateTimeasString(g)})`},getHeaderData=c=>{const d=getTitle(c),g=getPatient(c),v=getDocumentationOf(c),b=getAuthor(c),_=getEncounter(c),E=getInFulfillmentOf(c),R=getConsent(c);return{title:d,labelTypeData:{...g,...R||{},...v||{},...b||{},encounter:_||[],...E||{}}}},Header=({document:c})=>{const{title:d,labelTypeData:g}=getHeaderData(c);return React.createElement("div",{className:"ctw-ccda-header-container"},React.createElement("h2",{className:"ctw-ccda-header-title"},d),React.createElement("table",{className:"ctw-ccda-common-table"},React.createElement("tbody",null,lodash.exports.map(g,(v,b)=>{if(!v)return null;const _=v.filter(E=>E.value);return lodash.exports.isEmpty(_)?null:React.createElement("tr",{key:b},React.createElement("td",{className:"ctw-ccda-common-td1"},lodash.exports.startCase(b.replace(/\d/g,""))),React.createElement("td",{className:"ctw-ccda-common-td2"},_.map((E,R)=>React.createElement("span",{key:`${b}-${R}`},E.label&&React.createElement("b",null,E.label," "),E.value))))}))))};try{Header.displayName="Header",Header.__docgenInfo={description:"",displayName:"Header",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}/*! @license DOMPurify 2.4.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.1/LICENSE */function _typeof(c){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},_typeof(c)}function _setPrototypeOf(c,d){return _setPrototypeOf=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf(c,d)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(c,d,g){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(b,_,E){var R=[null];R.push.apply(R,_);var U=Function.bind.apply(b,R),P=new U;return E&&_setPrototypeOf(P,E.prototype),P},_construct.apply(null,arguments)}function _toConsumableArray(c){return _arrayWithoutHoles(c)||_iterableToArray(c)||_unsupportedIterableToArray(c)||_nonIterableSpread()}function _arrayWithoutHoles(c){if(Array.isArray(c))return _arrayLikeToArray(c)}function _iterableToArray(c){if(typeof Symbol<"u"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}function _unsupportedIterableToArray(c,d){if(!!c){if(typeof c=="string")return _arrayLikeToArray(c,d);var g=Object.prototype.toString.call(c).slice(8,-1);if(g==="Object"&&c.constructor&&(g=c.constructor.name),g==="Map"||g==="Set")return Array.from(c);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return _arrayLikeToArray(c,d)}}function _arrayLikeToArray(c,d){(d==null||d>c.length)&&(d=c.length);for(var g=0,v=new Array(d);g<d;g++)v[g]=c[g];return v}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hasOwnProperty=Object.hasOwnProperty,setPrototypeOf=Object.setPrototypeOf,isFrozen=Object.isFrozen,getPrototypeOf=Object.getPrototypeOf,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,freeze=Object.freeze,seal=Object.seal,create=Object.create,_ref=typeof Reflect<"u"&&Reflect,apply=_ref.apply,construct=_ref.construct;apply||(apply=function(d,g,v){return d.apply(g,v)});freeze||(freeze=function(d){return d});seal||(seal=function(d){return d});construct||(construct=function(d,g){return _construct(d,_toConsumableArray(g))});var arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(c){return function(d){for(var g=arguments.length,v=new Array(g>1?g-1:0),b=1;b<g;b++)v[b-1]=arguments[b];return apply(c,d,v)}}function unconstruct(c){return function(){for(var d=arguments.length,g=new Array(d),v=0;v<d;v++)g[v]=arguments[v];return construct(c,g)}}function addToSet(c,d,g){g=g||stringToLowerCase,setPrototypeOf&&setPrototypeOf(c,null);for(var v=d.length;v--;){var b=d[v];if(typeof b=="string"){var _=g(b);_!==b&&(isFrozen(d)||(d[v]=_),b=_)}c[b]=!0}return c}function clone(c){var d=create(null),g;for(g in c)apply(hasOwnProperty,c,[g])&&(d[g]=c[g]);return d}function lookupGetter(c,d){for(;c!==null;){var g=getOwnPropertyDescriptor(c,d);if(g){if(g.get)return unapply(g.get);if(typeof g.value=="function")return unapply(g.value)}c=getPrototypeOf(c)}function v(b){return console.warn("fallback value for",b),null}return v}var html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text=freeze(["#text"]),html=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\${[\w\W]*}/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),getGlobal=function c(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function c(d,g){if(_typeof(d)!=="object"||typeof d.createPolicy!="function")return null;var v=null,b="data-tt-policy-suffix";g.currentScript&&g.currentScript.hasAttribute(b)&&(v=g.currentScript.getAttribute(b));var _="dompurify"+(v?"#"+v:"");try{return d.createPolicy(_,{createHTML:function(R){return R},createScriptURL:function(R){return R}})}catch{return console.warn("TrustedTypes policy "+_+" could not be created."),null}};function createDOMPurify(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal(),d=function(At){return createDOMPurify(At)};if(d.version="2.4.1",d.removed=[],!c||!c.document||c.document.nodeType!==9)return d.isSupported=!1,d;var g=c.document,v=c.document,b=c.DocumentFragment,_=c.HTMLTemplateElement,E=c.Node,R=c.Element,U=c.NodeFilter,P=c.NamedNodeMap,B=P===void 0?c.NamedNodeMap||c.MozNamedAttrMap:P,ee=c.HTMLFormElement,re=c.DOMParser,ne=c.trustedTypes,j=R.prototype,z=lookupGetter(j,"cloneNode"),W=lookupGetter(j,"nextSibling"),O=lookupGetter(j,"childNodes"),Y=lookupGetter(j,"parentNode");if(typeof _=="function"){var Q=v.createElement("template");Q.content&&Q.content.ownerDocument&&(v=Q.content.ownerDocument)}var X=_createTrustedTypesPolicy(ne,g),H=X?X.createHTML(""):"",G=v,ie=G.implementation,Ee=G.createNodeIterator,be=G.createDocumentFragment,Ce=G.getElementsByTagName,Oe=g.importNode,mt={};try{mt=clone(v).documentMode?v.documentMode:{}}catch{}var Tt={};d.isSupported=typeof Y=="function"&&ie&&typeof ie.createHTMLDocument<"u"&&mt!==9;var St=MUSTACHE_EXPR,ft=ERB_EXPR,ut=TMPLIT_EXPR,wt=DATA_ATTR,Et=ARIA_ATTR,Pt=IS_SCRIPT_OR_DATA,Mt=ATTR_WHITESPACE,Bt=IS_ALLOWED_URI,et=null,Pe=addToSet({},[].concat(_toConsumableArray(html$1),_toConsumableArray(svg$1),_toConsumableArray(svgFilters),_toConsumableArray(mathMl$1),_toConsumableArray(text))),oe=null,Ye=addToSet({},[].concat(_toConsumableArray(html),_toConsumableArray(svg),_toConsumableArray(mathMl),_toConsumableArray(xml))),tt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ze=null,Qe=null,lt=!0,_t=!0,Nt=!1,dt=!1,xt=!1,Lt=!1,Vt=!1,V=!1,M=!1,Z=!1,te=!0,xe=!1,at="user-content-",vt=!0,st=!1,rt={},ht=null,ot=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),$t=null,ct=addToSet({},["audio","video","img","source","image","track"]),kt=null,zt=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Wt="http://www.w3.org/1998/Math/MathML",mr="http://www.w3.org/2000/svg",or="http://www.w3.org/1999/xhtml",A=or,K=!1,Se=null,ae=addToSet({},[Wt,mr,or],stringToString),Ae,it=["application/xhtml+xml","text/html"],Ut="text/html",Gt,ar=null,jt=v.createElement("form"),Jt=function(At){return At instanceof RegExp||At instanceof Function},dr=function(At){ar&&ar===At||((!At||_typeof(At)!=="object")&&(At={}),At=clone(At),Ae=it.indexOf(At.PARSER_MEDIA_TYPE)===-1?Ae=Ut:Ae=At.PARSER_MEDIA_TYPE,Gt=Ae==="application/xhtml+xml"?stringToString:stringToLowerCase,et="ALLOWED_TAGS"in At?addToSet({},At.ALLOWED_TAGS,Gt):Pe,oe="ALLOWED_ATTR"in At?addToSet({},At.ALLOWED_ATTR,Gt):Ye,Se="ALLOWED_NAMESPACES"in At?addToSet({},At.ALLOWED_NAMESPACES,stringToString):ae,kt="ADD_URI_SAFE_ATTR"in At?addToSet(clone(zt),At.ADD_URI_SAFE_ATTR,Gt):zt,$t="ADD_DATA_URI_TAGS"in At?addToSet(clone(ct),At.ADD_DATA_URI_TAGS,Gt):ct,ht="FORBID_CONTENTS"in At?addToSet({},At.FORBID_CONTENTS,Gt):ot,Ze="FORBID_TAGS"in At?addToSet({},At.FORBID_TAGS,Gt):{},Qe="FORBID_ATTR"in At?addToSet({},At.FORBID_ATTR,Gt):{},rt="USE_PROFILES"in At?At.USE_PROFILES:!1,lt=At.ALLOW_ARIA_ATTR!==!1,_t=At.ALLOW_DATA_ATTR!==!1,Nt=At.ALLOW_UNKNOWN_PROTOCOLS||!1,dt=At.SAFE_FOR_TEMPLATES||!1,xt=At.WHOLE_DOCUMENT||!1,V=At.RETURN_DOM||!1,M=At.RETURN_DOM_FRAGMENT||!1,Z=At.RETURN_TRUSTED_TYPE||!1,Vt=At.FORCE_BODY||!1,te=At.SANITIZE_DOM!==!1,xe=At.SANITIZE_NAMED_PROPS||!1,vt=At.KEEP_CONTENT!==!1,st=At.IN_PLACE||!1,Bt=At.ALLOWED_URI_REGEXP||Bt,A=At.NAMESPACE||or,At.CUSTOM_ELEMENT_HANDLING&&Jt(At.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(tt.tagNameCheck=At.CUSTOM_ELEMENT_HANDLING.tagNameCheck),At.CUSTOM_ELEMENT_HANDLING&&Jt(At.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(tt.attributeNameCheck=At.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),At.CUSTOM_ELEMENT_HANDLING&&typeof At.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(tt.allowCustomizedBuiltInElements=At.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),dt&&(_t=!1),M&&(V=!0),rt&&(et=addToSet({},_toConsumableArray(text)),oe=[],rt.html===!0&&(addToSet(et,html$1),addToSet(oe,html)),rt.svg===!0&&(addToSet(et,svg$1),addToSet(oe,svg),addToSet(oe,xml)),rt.svgFilters===!0&&(addToSet(et,svgFilters),addToSet(oe,svg),addToSet(oe,xml)),rt.mathMl===!0&&(addToSet(et,mathMl$1),addToSet(oe,mathMl),addToSet(oe,xml))),At.ADD_TAGS&&(et===Pe&&(et=clone(et)),addToSet(et,At.ADD_TAGS,Gt)),At.ADD_ATTR&&(oe===Ye&&(oe=clone(oe)),addToSet(oe,At.ADD_ATTR,Gt)),At.ADD_URI_SAFE_ATTR&&addToSet(kt,At.ADD_URI_SAFE_ATTR,Gt),At.FORBID_CONTENTS&&(ht===ot&&(ht=clone(ht)),addToSet(ht,At.FORBID_CONTENTS,Gt)),vt&&(et["#text"]=!0),xt&&addToSet(et,["html","head","body"]),et.table&&(addToSet(et,["tbody"]),delete Ze.tbody),freeze&&freeze(At),ar=At)},cr=addToSet({},["mi","mo","mn","ms","mtext"]),Rr=addToSet({},["foreignobject","desc","title","annotation-xml"]),Ar=addToSet({},["title","style","font","a","script"]),hr=addToSet({},svg$1);addToSet(hr,svgFilters),addToSet(hr,svgDisallowed);var qr=addToSet({},mathMl$1);addToSet(qr,mathMlDisallowed);var Wr=function(At){var er=Y(At);(!er||!er.tagName)&&(er={namespaceURI:A,tagName:"template"});var ir=stringToLowerCase(At.tagName),Pr=stringToLowerCase(er.tagName);return Se[At.namespaceURI]?At.namespaceURI===mr?er.namespaceURI===or?ir==="svg":er.namespaceURI===Wt?ir==="svg"&&(Pr==="annotation-xml"||cr[Pr]):Boolean(hr[ir]):At.namespaceURI===Wt?er.namespaceURI===or?ir==="math":er.namespaceURI===mr?ir==="math"&&Rr[Pr]:Boolean(qr[ir]):At.namespaceURI===or?er.namespaceURI===mr&&!Rr[Pr]||er.namespaceURI===Wt&&!cr[Pr]?!1:!qr[ir]&&(Ar[ir]||!hr[ir]):!!(Ae==="application/xhtml+xml"&&Se[At.namespaceURI]):!1},Lr=function(At){arrayPush(d.removed,{element:At});try{At.parentNode.removeChild(At)}catch{try{At.outerHTML=H}catch{At.remove()}}},Zr=function(At,er){try{arrayPush(d.removed,{attribute:er.getAttributeNode(At),from:er})}catch{arrayPush(d.removed,{attribute:null,from:er})}if(er.removeAttribute(At),At==="is"&&!oe[At])if(V||M)try{Lr(er)}catch{}else try{er.setAttribute(At,"")}catch{}},Ur=function(At){var er,ir;if(Vt)At="<remove></remove>"+At;else{var Pr=stringMatch(At,/^[\r\n\t ]+/);ir=Pr&&Pr[0]}Ae==="application/xhtml+xml"&&A===or&&(At='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+At+"</body></html>");var ln=X?X.createHTML(At):At;if(A===or)try{er=new re().parseFromString(ln,Ae)}catch{}if(!er||!er.documentElement){er=ie.createDocument(A,"template",null);try{er.documentElement.innerHTML=K?"":ln}catch{}}var Jr=er.body||er.documentElement;return At&&ir&&Jr.insertBefore(v.createTextNode(ir),Jr.childNodes[0]||null),A===or?Ce.call(er,xt?"html":"body")[0]:xt?er.documentElement:Jr},Xt=function(At){return Ee.call(At.ownerDocument||At,At,U.SHOW_ELEMENT|U.SHOW_COMMENT|U.SHOW_TEXT,null,!1)},_r=function(At){return At instanceof ee&&(typeof At.nodeName!="string"||typeof At.textContent!="string"||typeof At.removeChild!="function"||!(At.attributes instanceof B)||typeof At.removeAttribute!="function"||typeof At.setAttribute!="function"||typeof At.namespaceURI!="string"||typeof At.insertBefore!="function"||typeof At.hasChildNodes!="function")},Ir=function(At){return _typeof(E)==="object"?At instanceof E:At&&_typeof(At)==="object"&&typeof At.nodeType=="number"&&typeof At.nodeName=="string"},Vr=function(At,er,ir){!Tt[At]||arrayForEach(Tt[At],function(Pr){Pr.call(d,er,ir,ar)})},xn=function(At){var er;if(Vr("beforeSanitizeElements",At,null),_r(At)||regExpTest(/[\u0080-\uFFFF]/,At.nodeName))return Lr(At),!0;var ir=Gt(At.nodeName);if(Vr("uponSanitizeElement",At,{tagName:ir,allowedTags:et}),At.hasChildNodes()&&!Ir(At.firstElementChild)&&(!Ir(At.content)||!Ir(At.content.firstElementChild))&&regExpTest(/<[/\w]/g,At.innerHTML)&&regExpTest(/<[/\w]/g,At.textContent)||ir==="select"&&regExpTest(/<template/i,At.innerHTML))return Lr(At),!0;if(!et[ir]||Ze[ir]){if(!Ze[ir]&&Pn(ir)&&(tt.tagNameCheck instanceof RegExp&&regExpTest(tt.tagNameCheck,ir)||tt.tagNameCheck instanceof Function&&tt.tagNameCheck(ir)))return!1;if(vt&&!ht[ir]){var Pr=Y(At)||At.parentNode,ln=O(At)||At.childNodes;if(ln&&Pr)for(var Jr=ln.length,en=Jr-1;en>=0;--en)Pr.insertBefore(z(ln[en],!0),W(At))}return Lr(At),!0}return At instanceof R&&!Wr(At)||(ir==="noscript"||ir==="noembed")&&regExpTest(/<\/no(script|embed)/i,At.innerHTML)?(Lr(At),!0):(dt&&At.nodeType===3&&(er=At.textContent,er=stringReplace(er,St," "),er=stringReplace(er,ft," "),er=stringReplace(er,ut," "),At.textContent!==er&&(arrayPush(d.removed,{element:At.cloneNode()}),At.textContent=er)),Vr("afterSanitizeElements",At,null),!1)},Sn=function(At,er,ir){if(te&&(er==="id"||er==="name")&&(ir in v||ir in jt))return!1;if(!(_t&&!Qe[er]&&regExpTest(wt,er))){if(!(lt&&regExpTest(Et,er))){if(!oe[er]||Qe[er]){if(!(Pn(At)&&(tt.tagNameCheck instanceof RegExp&&regExpTest(tt.tagNameCheck,At)||tt.tagNameCheck instanceof Function&&tt.tagNameCheck(At))&&(tt.attributeNameCheck instanceof RegExp&&regExpTest(tt.attributeNameCheck,er)||tt.attributeNameCheck instanceof Function&&tt.attributeNameCheck(er))||er==="is"&&tt.allowCustomizedBuiltInElements&&(tt.tagNameCheck instanceof RegExp&&regExpTest(tt.tagNameCheck,ir)||tt.tagNameCheck instanceof Function&&tt.tagNameCheck(ir))))return!1}else if(!kt[er]){if(!regExpTest(Bt,stringReplace(ir,Mt,""))){if(!((er==="src"||er==="xlink:href"||er==="href")&&At!=="script"&&stringIndexOf(ir,"data:")===0&&$t[At])){if(!(Nt&&!regExpTest(Pt,stringReplace(ir,Mt,"")))){if(ir)return!1}}}}}}return!0},Pn=function(At){return At.indexOf("-")>0},zn=function(At){var er,ir,Pr,ln;Vr("beforeSanitizeAttributes",At,null);var Jr=At.attributes;if(!!Jr){var en={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:oe};for(ln=Jr.length;ln--;){er=Jr[ln];var Dn=er,tn=Dn.name,Mn=Dn.namespaceURI;if(ir=tn==="value"?er.value:stringTrim(er.value),Pr=Gt(tn),en.attrName=Pr,en.attrValue=ir,en.keepAttr=!0,en.forceKeepAttr=void 0,Vr("uponSanitizeAttribute",At,en),ir=en.attrValue,!en.forceKeepAttr&&(Zr(tn,At),!!en.keepAttr)){if(regExpTest(/\/>/i,ir)){Zr(tn,At);continue}dt&&(ir=stringReplace(ir,St," "),ir=stringReplace(ir,ft," "),ir=stringReplace(ir,ut," "));var Wn=Gt(At.nodeName);if(!!Sn(Wn,Pr,ir)){if(xe&&(Pr==="id"||Pr==="name")&&(Zr(tn,At),ir=at+ir),X&&_typeof(ne)==="object"&&typeof ne.getAttributeType=="function"&&!Mn)switch(ne.getAttributeType(Wn,Pr)){case"TrustedHTML":ir=X.createHTML(ir);break;case"TrustedScriptURL":ir=X.createScriptURL(ir);break}try{Mn?At.setAttributeNS(Mn,tn,ir):At.setAttribute(tn,ir),arrayPop(d.removed)}catch{}}}}Vr("afterSanitizeAttributes",At,null)}},ta=function fr(At){var er,ir=Xt(At);for(Vr("beforeSanitizeShadowDOM",At,null);er=ir.nextNode();)Vr("uponSanitizeShadowNode",er,null),!xn(er)&&(er.content instanceof b&&fr(er.content),zn(er));Vr("afterSanitizeShadowDOM",At,null)};return d.sanitize=function(fr){var At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},er,ir,Pr,ln,Jr;if(K=!fr,K&&(fr="<!-->"),typeof fr!="string"&&!Ir(fr)){if(typeof fr.toString!="function")throw typeErrorCreate("toString is not a function");if(fr=fr.toString(),typeof fr!="string")throw typeErrorCreate("dirty is not a string, aborting")}if(!d.isSupported){if(_typeof(c.toStaticHTML)==="object"||typeof c.toStaticHTML=="function"){if(typeof fr=="string")return c.toStaticHTML(fr);if(Ir(fr))return c.toStaticHTML(fr.outerHTML)}return fr}if(Lt||dr(At),d.removed=[],typeof fr=="string"&&(st=!1),st){if(fr.nodeName){var en=Gt(fr.nodeName);if(!et[en]||Ze[en])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(fr instanceof E)er=Ur("<!---->"),ir=er.ownerDocument.importNode(fr,!0),ir.nodeType===1&&ir.nodeName==="BODY"||ir.nodeName==="HTML"?er=ir:er.appendChild(ir);else{if(!V&&!dt&&!xt&&fr.indexOf("<")===-1)return X&&Z?X.createHTML(fr):fr;if(er=Ur(fr),!er)return V?null:Z?H:""}er&&Vt&&Lr(er.firstChild);for(var Dn=Xt(st?fr:er);Pr=Dn.nextNode();)Pr.nodeType===3&&Pr===ln||xn(Pr)||(Pr.content instanceof b&&ta(Pr.content),zn(Pr),ln=Pr);if(ln=null,st)return fr;if(V){if(M)for(Jr=be.call(er.ownerDocument);er.firstChild;)Jr.appendChild(er.firstChild);else Jr=er;return oe.shadowroot&&(Jr=Oe.call(g,Jr,!0)),Jr}var tn=xt?er.outerHTML:er.innerHTML;return xt&&et["!doctype"]&&er.ownerDocument&&er.ownerDocument.doctype&&er.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,er.ownerDocument.doctype.name)&&(tn="<!DOCTYPE "+er.ownerDocument.doctype.name+`>
`+tn),dt&&(tn=stringReplace(tn,St," "),tn=stringReplace(tn,ft," "),tn=stringReplace(tn,ut," ")),X&&Z?X.createHTML(tn):tn},d.setConfig=function(fr){dr(fr),Lt=!0},d.clearConfig=function(){ar=null,Lt=!1},d.isValidAttribute=function(fr,At,er){ar||dr({});var ir=Gt(fr),Pr=Gt(At);return Sn(ir,Pr,er)},d.addHook=function(fr,At){typeof At=="function"&&(Tt[fr]=Tt[fr]||[],arrayPush(Tt[fr],At))},d.removeHook=function(fr){if(Tt[fr])return arrayPop(Tt[fr])},d.removeHooks=function(fr){Tt[fr]&&(Tt[fr]=[])},d.removeAllHooks=function(){Tt={}},d}var purify=createDOMPurify();const Section=({title:c,humanReadable:d})=>{const[g,v]=react.exports.useState(!0);if(!d)return null;const b=()=>v(!g);return React.createElement("div",{className:"ctw-ccda-section-container"},React.createElement("div",{className:"ctw-ccda-section-header-wrapper"},React.createElement("button",{type:"button",className:"ctw-ccda-section-arrow",onClick:b},g?"\u25BC":"\u25B6"),React.createElement("h3",null,c)),g&&React.createElement("div",{className:"ctw-ccda-section-wrapper"},React.createElement("div",{dangerouslySetInnerHTML:{__html:purify.sanitize(fixHtml(d))}})))};try{Section.displayName="Section",Section.__docgenInfo={description:"",displayName:"Section",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},humanReadable:{defaultValue:null,description:"",name:"humanReadable",required:!1,type:{name:"Document"}}}}}catch(c){}const CcdaViewer=({document:c})=>{const g=xpath.select("//*[name()='component']/*[name()='section']",c).map(v=>{const b=String(xpath.select1("string(*[name()='title'])",v)),_=xpath.select1("*[name()='text']",v),E=String(xpath.select1("string(*[name()='code']/@code)",v));return{title:b,humanReadable:_,code:E}});return React.createElement("div",{className:cx({width:"calc(100vw - 200px - 24px - 24px - 16px - 16px - 2px)"})},React.createElement(Header,{document:c}),React.createElement(DocumentDetails,{document:c}),g.map(({title:v,humanReadable:b,code:_})=>React.createElement(Section,{key:`el-text-${_}`,title:v,humanReadable:b})))};try{CcdaViewer.displayName="CcdaViewer",CcdaViewer.__docgenInfo={description:"",displayName:"CcdaViewer",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const xmlTypes=["/xml","/xhtml+xml","application/xml"],isSpecificContentType=(c,d)=>c.some(g=>d.includes(g)),Base64BinaryField=({value:c,record:d,contentType:g})=>{const[v,b]=react.exports.useState(!0),[_,E]=react.exports.useState(!0);react.exports.useEffect(()=>{v||E(!1)},[v]);const R=re=>E(re.target.checked),U=react.exports.useMemo(()=>{if(!isSpecificContentType(xmlTypes,g))return;const re=new libExports$1.DOMParser({locator:{},errorHandler:ne=>null}).parseFromString(buffer.Buffer.from(c,"base64").toString("utf8"),g);if(xpath.select1("//*[name()='patientRole']",re))return re},[g,c]),P=[{label:"Parsed",value:_,event:R,disabled:!v,display:Boolean(U)}],B=_?U:void 0,ee=()=>B?React.createElement(CcdaViewer,{document:B}):React.createElement("div",{className:"ctw-ccda-base64-binary-text"},c);return React.createElement("div",{className:"ctw-ccda-container"},React.createElement("div",{className:"ctw-ccda-switch-container"},P.map(re=>re.display&&React.createElement("div",{key:re.label,className:"ctw-cda-switch-wrapper"},React.createElement("span",{className:"ctw-flex"},React.createElement(Toggle,{inputProps:{value:re.label,checked:re.value,disabled:re.disabled},name:re.label,text:re.label,onChange:re.event}))))),ee())};try{Base64BinaryField.displayName="Base64BinaryField",Base64BinaryField.__docgenInfo={description:"",displayName:"Base64BinaryField",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},record:{defaultValue:null,description:"",name:"record",required:!0,type:{name:"Binary"}},contentType:{defaultValue:null,description:"",name:"contentType",required:!0,type:{name:"string"}}}}}catch(c){}const CCDAModal=({rawBinary:c,onClose:d,...g})=>{var _;const[v,b]=react.exports.useState(!1);return react.exports.useEffect(()=>{c.isBinary&&b(!0)},[v,c.isBinary]),React.createElement(Modal,{...g},v&&((_=c.xmlBinary)==null?void 0:_.data)&&React.createElement("div",{className:"ctw-flex ctw-w-full ctw-space-x-4"},React.createElement(Base64BinaryField,{record:c.xmlBinary,value:c.xmlBinary.data,contentType:c.xmlBinary.contentType}),React.createElement("div",{className:"ctw-ml-3 ctw-flex ctw-h-7 ctw-items-center"},React.createElement("button",{type:"button","aria-label":"close",onClick:d,className:"ctw-btn-clear"},React.createElement("span",{className:"ctw-sr-only"},"Close panel"),React.createElement(XIcon,{className:"ctw-h-6 ctw-w-6","aria-hidden":"true"})))))};try{CCDAModal.displayName="CCDAModal",CCDAModal.__docgenInfo={description:"",displayName:"CCDAModal",props:{rawBinary:{defaultValue:null,description:"",name:"rawBinary",required:!0,type:{name:"BinaryDocumentData"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}}}}}catch(c){}const NotesList=({notes:c})=>React.createElement("div",{className:"ctw-flex ctw-flex-col ctw-space-y-4"},c.map(d=>React.createElement("div",{key:d},React.createElement("div",null,d))));try{NotesList.displayName="NotesList",NotesList.__docgenInfo={description:"",displayName:"NotesList",props:{notes:{defaultValue:null,description:"",name:"notes",required:!0,type:{name:"string[]"}}}}}catch(c){}const DocumentButton=({onClick:c})=>React.createElement("button",{type:"button",className:"ctw-btn-default ctw-flex ctw-space-x-2 ctw-align-middle",onClick:c},React.createElement("div",null," Source Document"),React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:12,className:"ctw-mt-1 ctw-fill-content-light"},React.createElement("path",{d:"M352 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h50.7L297.4 169.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V160c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32H352zM214.6 297.4c-12.5-12.5-32.8-12.5-45.3 0L64 402.7V352c0-17.7-14.3-32-32-32s-32 14.3-32 32V480c0 17.7 14.3 32 32 32H160c17.7 0 32-14.3 32-32s-14.3-32-32-32H109.3L214.6 342.6c12.5-12.5 12.5-32.8 0-45.3z"})));try{DocumentButton.displayName="DocumentButton",DocumentButton.__docgenInfo={description:"",displayName:"DocumentButton",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLButtonElement>"}}}}}catch(c){}const RenderDocumentButton=({idMap:c,entry:d,setIsModalOpen:g,setRawBinary:v})=>{var b;return React.createElement(React.Fragment,null,c.get(d.id)&&((b=c.get(d.id))==null?void 0:b.isBinary)&&React.createElement(DocumentButton,{onClick:()=>{g(!0),v(c.get(d.id))}}))};try{RenderDocumentButton.displayName="RenderDocumentButton",RenderDocumentButton.__docgenInfo={description:"",displayName:"RenderDocumentButton",props:{idMap:{defaultValue:null,description:"",name:"idMap",required:!0,type:{name:"SourceDocumentMap"}},entry:{defaultValue:null,description:"",name:"entry",required:!0,type:{name:"CollapsibleDataListProps"}},setIsModalOpen:{defaultValue:null,description:"",name:"setIsModalOpen",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}},setRawBinary:{defaultValue:null,description:"",name:"setRawBinary",required:!0,type:{name:"Dispatch<SetStateAction<BinaryDocumentData | undefined>>"}}}}}catch(c){}const CONDITION_HISTORY_LIMIT=10,conditionData=c=>{var d,g;return[{label:"Recorder",value:c.recorder},{label:"Recorded Date",value:c.recordedDate},{label:"Provider Organization",value:(g=(d=c.patient)==null?void 0:d.organization)==null?void 0:g.name},{label:"Clinical Status",value:lodash.exports.capitalize(c.clinicalStatus)},{label:"Verification Status",value:lodash.exports.capitalize(c.verificationStatus)},{label:"Onset Date",value:c.onset},{label:"Abatement Date",value:c.abatement},{label:"Note",value:c.notes.length!==0&&React.createElement(NotesList,{notes:c.notes})}]};function setupData(c){var g,v;const d=[{label:"Recorder",value:c.recorder},{label:"Clinical Status",value:lodash.exports.capitalize(c.clinicalStatus)},{label:"Verification Status",value:lodash.exports.capitalize(c.verificationStatus)},{label:"Recorded Date",value:c.recordedDate},{label:"Category",value:lodash.exports.startCase(c.categories[0])},{label:"Note",value:c.notes.length!==0&&React.createElement(NotesList,{notes:c.notes})},{label:"Code",value:React.createElement(CodingList,{codings:c.knownCodings})},{label:"Onset Date",value:c.onset},{label:"Abatement Date",value:c.abatement},{label:"Encounter",value:c.encounter}];return{id:c.id,date:c.recordedDate,title:lodash.exports.startCase(c.categories[0]),subtitle:(v=(g=c.patient)==null?void 0:g.organization)==null?void 0:v.name,data:d}}function ConditionHistory({condition:c,onClose:d,onEdit:g}){const[v,b]=react.exports.useState([]),[_,E]=react.exports.useState([]),[R,U]=react.exports.useState(!0),[P,B]=react.exports.useState(!0),[ee,re]=react.exports.useState(),ne=useConditionHistory(ee),{getRequestContext:j}=useCTW(),[z,W]=react.exports.useState(!1),[O,Y]=react.exports.useState(),[Q,X]=react.exports.useState(!1),[H,G]=react.exports.useState(new Map);react.exports.useEffect(()=>{let Ee=[];async function be(){if(re(c),ne.data){const Oe=getIncludedResources(ne.data.bundle),mt=ne.data.conditions.map(ft=>new ConditionModel(ft,Oe)),St=lodash.exports.orderBy(mt,ft=>{var ut;return(ut=ft.resource.recordedDate)!=null?ut:""},"desc").filter(ft=>ft.verificationStatus!=="entered-in-error");Ee=lodash.exports.uniqWith(St.map(ft=>setupData(ft)),(ft,ut)=>lodash.exports.isEqual(ft.data,ut.data)),b(Ee.filter(ft=>ft.date)),E(Ee.filter(ft=>!ft.date)),U(!1)}}async function Ce(){var ft;const Oe=await j(),Tt=[setupData(c),...Ee],St=await getBinary(Oe,Tt);G(St),(ft=St.get(c.id))!=null&&ft.isBinary&&(W(!0),Y(St.get(c.id))),B(!1)}return be(),Ce(),function(){b([]),E([]),U(!0),B(!0)}},[c,j,ne.data,z,g]);function ie(){return v.length===0&&_.length===0&&!R?React.createElement("div",null,"No history found."):R?React.createElement(Loading,{message:"Loading condition history..."}):React.createElement(React.Fragment,null,z&&O&&React.createElement(CCDAModal,{isOpen:Q,rawBinary:O,onClose:()=>X(!1)}),React.createElement("div",{className:"ctw-space-y-6"},React.createElement(ConditionHeader,{condition:c}),g&&React.createElement(Details,{data:conditionData(c),readOnly:!g,onEdit:()=>{d(),setTimeout(g,400)}}),React.createElement(CollapsibleDataListStack,{entries:v.map(Ee=>({...Ee,documentButton:React.createElement(RenderDocumentButton,{idMap:H,entry:Ee,setIsModalOpen:X,setRawBinary:Y})})),limit:CONDITION_HISTORY_LIMIT}),_.length!==0&&React.createElement("div",{className:"ctw-space-y-2"},React.createElement("div",{className:"ctw-font-medium"},"Records with no date:"),React.createElement(CollapsibleDataListStack,{entries:_.map(Ee=>({...Ee,documentButton:React.createElement(RenderDocumentButton,{idMap:H,entry:Ee,setIsModalOpen:X,setRawBinary:Y})})),limit:CONDITION_HISTORY_LIMIT}))))}return ie()}try{ConditionHistory.displayName="ConditionHistory",ConditionHistory.__docgenInfo={description:"",displayName:"ConditionHistory",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"(() => void)"}}}}}catch(c){}function ConditionHistoryDrawer({className:c,condition:d,isOpen:g,onClose:v,onEdit:b}){const _="Condition History";return React.createElement(Drawer,{className:c,title:_,isOpen:g,onClose:v},React.createElement(Drawer.Body,null,d&&React.createElement(ConditionHistory,{condition:d,onClose:v,onEdit:b})),React.createElement(Drawer.Footer,null,React.createElement("div",{className:"ctw-flex ctw-justify-end ctw-space-x-3 ctw-text-black "},React.createElement("button",{type:"button",className:"ctw-btn-default ctw-font-semibold ctw-outline-bg-light",onClick:v},"Close"))))}try{ConditionHistoryDrawer.displayName="ConditionHistoryDrawer",ConditionHistoryDrawer.__docgenInfo={description:"",displayName:"ConditionHistoryDrawer",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},condition:{defaultValue:null,description:"",name:"condition",required:!1,type:{name:"ConditionModel"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"(() => void)"}}}}}catch(c){}function ConditionsNoPatient({className:c}){return React.createElement("div",{className:cx("ctw-conditions",c)},React.createElement("div",{className:"ctw-heading-container"},React.createElement("div",{className:"ctw-title"},"Conditions")),React.createElement("div",{className:"ctw-p-5"},React.createElement(CautionAlert,{header:"Conditions Unavailable"},React.createElement("div",null,"We are unable to access Condition information for this patient."),React.createElement("div",null,"Contact your system administrator or customer service for assistance."))))}try{ConditionsNoPatient.displayName="ConditionsNoPatient",ConditionsNoPatient.__docgenInfo={description:"",displayName:"ConditionsNoPatient",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch(c){}const conditions="",filterOtherConditions=(c,d,g)=>c.filter(v=>{var b;return v.isArchived&&!g||["FAC","XXX"].includes((b=v.ccsChapterCode)!=null?b:"")?!1:!d.some(_=>{const E=v.resource.recordedDate,R=_.resource.recordedDate,U=v.knownCodingsMatch(_),P=_.verificationStatus==="entered-in-error",B=!E||R&&E<=R,ee=v.clinicalStatus===_.clinicalStatus;return U&&!P&&(B||ee)})}),getAutoCompleteConditions=async(c,d)=>{const{authToken:g,contextBuilderId:v}=c;return(await(await ctwFetch(`${getFormsConditionsUrl(c.env)}?display=${d}`,{headers:{Authorization:`Bearer ${g}`,...v&&{"Zus-Account":v}}})).json()).conditionsList},ConditionsAutoComplete=({defaultCoding:c,readonly:d,...g})=>{const{getRequestContext:v}=useCTW(),[b,_]=react.exports.useState(!1),[E,R]=react.exports.useState(),U=async P=>{_(!0);const B=await v(),ee=await getAutoCompleteConditions(B,P);ee&&R(ee.map(re=>({value:re,label:re.display}))),_(!1)};return React.createElement(ComboboxField,{options:E||[],isLoading:b,name:`${g.name}`,defaultSearchTerm:g.defaultValue,readonly:d,onSearchChange:U,defaultValue:c})};try{ConditionsAutoComplete.displayName="ConditionsAutoComplete",ConditionsAutoComplete.__docgenInfo={description:"",displayName:"ConditionsAutoComplete",props:{defaultCoding:{defaultValue:null,description:"",name:"defaultCoding",required:!1,type:{name:"Coding"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch(c){}const getAddConditionData=({condition:c})=>[{label:"Condition",field:"condition",value:c.display,readonly:!1,render:(d,g)=>{var v;return React.createElement(ConditionsAutoComplete,{readonly:d,...g,defaultCoding:(v=c.preferredCoding)!=null?v:{}})}},...sharedFields(c)],getEditingPatientConditionData=({condition:c})=>[{label:"id",value:c.id,field:"id",readonly:!0,hidden:!0},...sharedFields(c)],sharedFields=c=>[{label:"subject",value:c.subjectID,field:"subjectID",readonly:!0,hidden:!0},{label:"Clinical Status",value:levelTwoToOneMapping(c.clinicalStatus),field:"clinicalStatus"},{label:"Verification Status",value:levelTwoToOneMapping(c.verificationStatus),field:"verificationStatus"},{label:"Onset",value:c.onset,field:"onset"},{label:"Abatement",value:c.abatement,field:"abatement"},{label:"Note",value:c.notes,lines:3,field:"note"}],conditionSchema=mod.object({id:mod.string().optional(),subjectID:mod.string({required_error:"Condition subjectID must be specified."}),clinicalStatus:mod.enum(["active","inactive"]),onset:mod.date().max(new Date,{message:"Onset cannot be a future date."}).optional(),abatement:mod.date().max(new Date,{message:"Abatement cannot be a future date."}).optional(),note:mod.string().optional()}),conditionRefinement=(c,d)=>{c.abatement&&c.clinicalStatus==="active"&&d.addIssue({code:mod.ZodIssueCode.custom,message:"Clinical status must be inactive.",path:["abatement"]}),c.abatement&&c.onset&&c.abatement<c.onset&&d.addIssue({code:mod.ZodIssueCode.custom,message:"Abatement date must be after onset date.",path:["abatement"]})},conditionEditSchema=conditionSchema.extend({verificationStatus:mod.enum(["unconfirmed","confirmed","refuted","entered-in-error"])}).superRefine((c,d)=>conditionRefinement(c,d)),conditionAddSchema=conditionSchema.extend({condition:mod.object({code:mod.string({required_error:"Please choose a condition."}),display:mod.string().optional(),system:mod.string().optional()}),verificationStatus:mod.enum(["confirmed","unconfirmed"])}).superRefine((c,d)=>conditionRefinement(c,d));function levelTwoToOneMapping(c){switch(c){case"recurrence":case"relapse":return"active";case"remission":case"resolved":return"inactive";case"provisional":case"differential":return"unconfirmed";default:return c}}try{getAddConditionData.displayName="getAddConditionData",getAddConditionData.__docgenInfo={description:"",displayName:"getAddConditionData",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch(c){}try{getEditingPatientConditionData.displayName="getEditingPatientConditionData",getEditingPatientConditionData.__docgenInfo={description:"",displayName:"getEditingPatientConditionData",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch(c){}const getRequestData=c=>{var d,g,v,b,_;return[{label:"treating-provider",render:()=>React.createElement("div",{className:"ctw-font-medium"},"Who is the treating provider for this patient?")},{label:"Practitioner Name",field:"name",value:"",readonly:!1},[{label:"NPI",field:"npi",value:"",readonly:!1},{label:"Role",field:"role",value:"",readonly:!1}],{label:"patient-information",render:()=>React.createElement("div",null,React.createElement("div",{className:"ctw-font-medium"},"Is the patient information below correct and up-to-date?"),React.createElement("div",null,"Complete as many fields as possible to increase matching results."))},{label:"First Name",field:"firstName",value:c.firstName,readonly:!1},{label:"Last Name",field:"lastName",value:c.lastName,readonly:!1},[{label:"Date of Birth",field:"dateOfBirth",value:c.dob,readonly:!1},{label:"Gender",field:"gender",value:c.gender,readonly:!1}],{label:"Address",field:"address",value:(g=(d=c.homeAddress)==null?void 0:d.line)==null?void 0:g.join(", "),readonly:!1},{label:"City",field:"city",value:(v=c.homeAddress)==null?void 0:v.city,readonly:!1},[{label:"State",field:"state",value:(b=c.homeAddress)==null?void 0:b.state,readonly:!1},{label:"Zip",field:"zipCode",value:(_=c.homeAddress)==null?void 0:_.postalCode,readonly:!1}],{label:"Phone",field:"phone",value:c.phoneNumber,readonly:!1},{label:"Email",field:"email",value:c.email,readonly:!1}]},requestHistorySchema=mod.object({name:mod.string({required_error:"Practitioner name must be specified."}),npi:mod.string({required_error:"NPI must be specified."}).length(10),role:mod.enum(["Doctor","Nurse","Other"]),firstName:mod.string({required_error:"First name must be specified."}),lastName:mod.string({required_error:"Last name must be specified."}),dateOfBirth:mod.date().max(new Date,{message:"Date of birth cannot be a future date."}),gender:mod.enum(["-","male","female","other","unknown"]),address:mod.string({required_error:"Address must be specified."}),city:mod.string({required_error:"City must be specified."}),state:mod.string({required_error:"State must be specified."}),zipCode:mod.string({required_error:"Zip code must be specified."}),phone:mod.string().optional(),email:mod.string().optional()});try{getRequestData.displayName="getRequestData",getRequestData.__docgenInfo={description:"",displayName:"getRequestData",props:{active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean | undefined"}},contact:{defaultValue:null,description:"",name:"contact",required:!0,type:{name:"PatientContact[] | undefined"}},dob:{defaultValue:null,description:"",name:"dob",required:!0,type:{name:"string | undefined"}},age:{defaultValue:null,description:"",name:"age",required:!0,type:{name:"number | undefined"}},gender:{defaultValue:null,description:"",name:"gender",required:!0,type:{name:"string | undefined"}},maritalStatus:{defaultValue:null,description:"",name:"maritalStatus",required:!0,type:{name:"string | undefined"}},organization:{defaultValue:null,description:"",name:"organization",required:!0,type:{name:"OrganizationModel | undefined"}},use:{defaultValue:null,description:"",name:"use",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"usual"'},{value:'"official"'},{value:'"temp"'},{value:'"nickname"'},{value:'"anonymous"'},{value:'"old"'},{value:'"maiden"'}]}},UPID:{defaultValue:null,description:"",name:"UPID",required:!0,type:{name:"string"}},getPhoneNumber:{defaultValue:null,description:"",name:"getPhoneNumber",required:!0,type:{name:'(use?: "temp" | "old" | "home" | "work" | "mobile" | undefined) => string | undefined'}},phoneNumber:{defaultValue:null,description:"",name:"phoneNumber",required:!0,type:{name:"string | undefined"}},email:{defaultValue:null,description:"",name:"email",required:!0,type:{name:"string | undefined"}},bestHomeAddress:{defaultValue:null,description:"",name:"bestHomeAddress",required:!0,type:{name:"Address | undefined"}},homeAddress:{defaultValue:null,description:"",name:"homeAddress",required:!0,type:{name:"Address | undefined"}},bestName:{defaultValue:null,description:"",name:"bestName",required:!0,type:{name:"HumanName"}},additionalNames:{defaultValue:null,description:"",name:"additionalNames",required:!0,type:{name:"string | undefined"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string"}},firstName:{defaultValue:null,description:"",name:"firstName",required:!0,type:{name:"string"}},fullName:{defaultValue:null,description:"",name:"fullName",required:!0,type:{name:"string"}},lastName:{defaultValue:null,description:"",name:"lastName",required:!0,type:{name:"string | undefined"}},nickname:{defaultValue:null,description:"",name:"nickname",required:!0,type:{name:"string | undefined"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!0,type:{name:"string | undefined"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!0,type:{name:"string | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Patient"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch(c){}const schedulePatientHistory=async(c,d,g)=>{const v=`${getZusApiBaseUrl(c.env)}/patient-history/patient/${d}/refresh?consent=1`;try{return await(await ctwFetch(v,{method:"POST",headers:{Authorization:`Bearer ${c.authToken}`,"practitioner-npi":g.npi,"practitioner-role":g.role.toLocaleLowerCase(),"practitioner-name":g.name,...c.contextBuilderId&&{"Zus-Account":c.contextBuilderId}}})).json()}catch{throw Error(`Error scheduling patient history job with id of ${d}`)}},PatientHistoryRequestDrawer=({patient:c,header:d,isOpen:g,onClose:v,setClinicalHistoryExists:b})=>{const _=useHandlePatientSave(c),E=async(R,U)=>{try{await _(R)}catch(ee){const{requestErrors:re,responseIsSuccess:ne}=getFormResponseErrors(ee);return ne?new Error("Failed to save patient data."):new Error(re.join(","))}const P=await U(),B=await schedulePatientHistory(P,c.id,R);if("errors"in B){const ee=[B.errors.map(re=>re.details)];return new Error(ee.join(","))}return b(!0),B};return React.createElement(DrawerFormWithFields,{header:d,title:"Request Records",action:E,data:getRequestData(c),schema:requestHistorySchema,isOpen:g,onClose:v})};try{PatientHistoryRequestDrawer.displayName="PatientHistoryRequestDrawer",PatientHistoryRequestDrawer.__docgenInfo={description:"",displayName:"PatientHistoryRequestDrawer",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},header:{defaultValue:null,description:"",name:"header",required:!1,type:{name:"ReactNode"}},patient:{defaultValue:null,description:"",name:"patient",required:!0,type:{name:"PatientModel"}},setClinicalHistoryExists:{defaultValue:null,description:"",name:"setClinicalHistoryExists",required:!0,type:{name:"Dispatch<SetStateAction<boolean | undefined>>"}}}}}catch(c){}const PatientHistoryMessage=({onClick:c})=>React.createElement("div",{className:"ctw-flex ctw-justify-center ctw-space-x-2 ctw-border ctw-border-solid ctw-border-divider-light ctw-p-5"},React.createElement("div",{className:"ctw-flex ctw-justify-center ctw-text-icon-default"},"Retrieve patient clinical history."),React.createElement("button",{type:"button",className:"ctw-btn-clear ctw-link",onClick:c},"Request Records"));try{PatientHistoryMessage.displayName="PatientHistoryMessage",PatientHistoryMessage.__docgenInfo={description:"",displayName:"PatientHistoryMessage",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLButtonElement>"}}}}}catch(c){}async function recordProfileAction(c,d,g,v){var E;if(!d.id)throw new Error(`Tried to ${v} a resource that hasn't been created yet.`);if(!d.isSummaryResource)throw new Error(`Tried to ${v} a patient record resource.`);if(c){const R=lodash.exports.filter((E=c.meta)==null?void 0:E.tag,{system:SYSTEM_ZUS_PROFILE_ACTION});try{await deleteMetaTags(c,g,R)}catch{throw new Error(`There was an error setting ${v} for a resource.`)}}const b={resourceType:"Basic",id:c==null?void 0:c.id,meta:{tag:[{system:SYSTEM_ZUS_PROFILE_ACTION,code:v}]},code:{coding:[{system:SYSTEM_BASIC_RESOURCE_TYPE,code:"adminact",display:"Administrative Activity"}],text:"Administrative Activity"},subject:{reference:`${d.resourceType}/${d.id}`,type:d.resourceType},author:await getUsersPractitionerReference(g)};if(!(await createOrEditFhirResource(b,g)).id)throw new Error(`Failed to ${v} resource with id of ${d.id}`)}async function getPatientRefreshHistoryMessages(c,d){const g=`${getZusApiBaseUrl(c.env)}/patient-history/messages?patient-id=${d}`;try{const b=await(await ctwFetch(g,{headers:{Authorization:`Bearer ${c.authToken}`,...c.contextBuilderId&&{"Zus-Account":c.contextBuilderId}}})).json();return Object.values(b.data)}catch(v){throw errorResponse("Failed fetching patient refresh history messages",v)}}async function hasFetchedPatientHistory(c,d){return(await getPatientRefreshHistoryMessages(c,d)).length!==0}const EMPTY_MESSAGE_PATIENT_RECORD="There are no conditions in this patient's record.",EMPTY_MESSAGE_PROVIDER="There are no conditions available.",ERROR_MSG="There was an error fetching conditions for this patient. Refresh the page or contact your organization's technical support if this issue persists.";function Conditions({className:c,readOnly:d=!1}){const g=react.exports.useRef(null),v=useBreakpoints(g),[b,_]=react.exports.useState(!1),[E,R]=react.exports.useState(!1),[U,P]=react.exports.useState(!1),[B,ee]=react.exports.useState(!1),[re,ne]=react.exports.useState([]),[j,z]=react.exports.useState([]),[W,O]=react.exports.useState(!1),[Y,Q]=react.exports.useState("Add"),[X,H]=react.exports.useState(conditionAddSchema),[G,ie]=react.exports.useState(),[Ee,be]=react.exports.useState(),Ce=usePatient(),Oe=usePatientConditions(),mt=useOtherProviderConditions(),{getRequestContext:Tt}=useCTW(),[St,ft]=react.exports.useState(),[ut,wt]=react.exports.useState(),Et=Oe.isError?ERROR_MSG:EMPTY_MESSAGE_PATIENT_RECORD,Pt=mt.isError?ERROR_MSG:EMPTY_MESSAGE_PROVIDER,Mt=()=>{if(Ee&&re.some(lt=>lt.id===Ee.id))return()=>Bt(Ee)},Bt=lt=>{Ce.data&&(_(!0),Q("Edit"),H(conditionEditSchema),ie(getEditingPatientConditionData({condition:lt})),be(lt))},et=lt=>{R(!0),be(lt)},Pe=async lt=>{const _t=await Tt(),Nt=lt.getBasicResourceByAction("archive")||lt.getBasicResourceByAction("unarchive"),dt=lt.isArchived?"unarchive":"archive";await recordProfileAction(Nt,lt,_t,dt),await queryClient.invalidateQueries([QUERY_KEY_OTHER_PROVIDER_CONDITIONS])},oe=lt=>{const _t=getAddConditionWithDefaults(lt.resource);Ce.data&&(H(conditionAddSchema),_(!0),Q("Add"),ie(getAddConditionData({condition:new ConditionModel(_t)})))},Ye=()=>{if(!Ce.data)return;const lt=getNewCondition(Ce.data.id);_(!0),H(conditionAddSchema),ie(getAddConditionData({condition:new ConditionModel(lt)}))},tt=React.createElement("button",{className:"ctw-btn-primary",type:"button",onClick:Ye},"Add Condition"),Ze=ut||mt.data&&mt.data.length>0,Qe=async lt=>{const _t=await Tt(),Nt=await hasFetchedPatientHistory(_t,lt);wt(Nt)};return react.exports.useEffect(()=>{var _t;async function lt(){const Nt=Oe.data,dt=mt.data;Nt&&(ne(Nt.filter(xt=>xt.active||W)),z(dt?filterOtherConditions(dt,Nt,W):[])),Oe.error&&(ne([]),z([]))}lt(),((_t=Ce.data)==null?void 0:_t.id)&&ut===void 0&&Qe(Ce.data.id)},[W,Ce.data,Oe.data,mt.data,ut,Oe.error]),Ce.isError?React.createElement(ConditionsNoPatient,{className:c}):React.createElement("div",{ref:g,className:cx("ctw-conditions",c,{"ctw-conditions-stacked":v.sm})},!d&&React.createElement("div",{className:"ctw-conditions-heading-container"},React.createElement("div",{className:"ctw-title"},"Conditions"),React.createElement("button",{type:"button",className:"ctw-btn-clear ctw-link",onClick:Ye},"+ Add Condition")),React.createElement("div",{className:"ctw-conditions-body-container"},React.createElement("div",{className:"ctw-space-y-3"},React.createElement("div",{className:"ctw-conditions-title-container"},React.createElement("div",{className:"ctw-title"},"Patient Record"),React.createElement(ToggleControl,{onFormChange:()=>O(!W),toggleProps:{name:"conditions",text:"Include Inactive"}})),React.createElement(ConditionsTableBase,{stacked:v.sm,conditions:re,isLoading:Oe.isLoading,hideMenu:d,sort:St,onSort:lt=>ft(lt),message:React.createElement(React.Fragment,null,React.createElement("div",null,Et),!Oe.isError&&!d&&React.createElement("div",{className:"ctw-mt-5"},tt)),rowMenuActions:lt=>[{name:"Edit",action:async()=>{Bt(lt)}},{name:"View History",action:async()=>{P(!0),be(lt)}},{name:"Delete",className:"dangerous",action:async()=>{et(lt)}}]})),React.createElement("div",{className:"ctw-space-y-3"},React.createElement("div",{className:"ctw-conditions-title-container"},React.createElement("div",{className:"ctw-title"},"Other Provider Records"),Ze&&React.createElement("button",{type:"button",className:"ctw-btn-clear ctw-link",onClick:()=>ee(!0)},"Request Records")),Ze?React.createElement(ConditionsTableBase,{className:"ctw-conditions-not-reviewed",stacked:v.sm,conditions:j,sort:St,onSort:lt=>ft(lt),isLoading:mt.isLoading||Oe.isLoading,hideMenu:d,message:Pt,rowMenuActions:lt=>[{name:"Add",action:async()=>{oe(lt)}},{name:"View History",action:async()=>{P(!0),be(lt)}},{name:lt.isArchived?"Un-Archive":"Archive",action:async()=>{await Pe(lt)}}]}):React.createElement(PatientHistoryMessage,{onClick:()=>ee(!0)}))),Ce.data&&React.createElement(DrawerFormWithFields,{title:`${Y} Condition`,header:Y==="Edit"&&Ee&&React.createElement(ConditionHeader,{condition:Ee}),action:lodash.exports.curry(createOrEditCondition)(Ee,Ce.data.id),data:G,schema:X,isOpen:b,onClose:()=>_(!1)}),Ce.data&&React.createElement(PatientHistoryRequestDrawer,{header:React.createElement("div",{className:"ctw-pt-0 ctw-text-base"},"Request patient clinical history from 70K+ providers across the nation. No changes will be made to your patient record."),patient:Ce.data,isOpen:B,onClose:()=>ee(!1),setClinicalHistoryExists:wt}),React.createElement(ConditionHistoryDrawer,{isOpen:U,onClose:()=>P(!1),condition:Ee,onEdit:Mt()}),Ee&&Ce.data&&React.createElement(ModalConfirmDelete,{resource:Ee,resourceName:Ee.display||"unnamed condition",onClose:()=>R(!1),isOpen:E,onDelete:async()=>{const lt=await Tt();await onConditionDelete(Ee.resource,lt)}}))}try{Conditions.displayName="Conditions",Conditions.__docgenInfo={description:"",displayName:"Conditions",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch(c){}var libExports=requireLib$1();export{Badge as B,Conditions as C,DrawerFormWithFields as D,ModalConfirmDelete as M,OtherProviderMedsTable as O,PatientProvider as P,SYSTEM_ZUS_UNIVERSAL_ID as S,Toggle as T,CTWProvider as a,SYSTEM_SUMMARY as b,ConditionModel as c,getAddConditionData as d,createOrEditCondition as e,conditionAddSchema as f,getNewCondition as g,conditionEditSchema as h,getEditingPatientConditionData as i,useBreakpoints as j,usePatientConditions as k,libExports as l,useOtherProviderConditions as m,useCTW as n,filterOtherConditions as o,ConditionHistoryDrawer as p,ConditionHeader as q,onConditionDelete as r,MedicationHistory as s,MedicationStatementModel as t,usePatient as u,v4 as v,PatientMedications as w,ProviderMedsTable as x,PatientsTable as y};
//# sourceMappingURL=index.138a1ca6.js.map
