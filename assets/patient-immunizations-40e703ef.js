import{r as d,R as n}from"./index-6f814c40.js";import{c as p}from"./index-74f03c09.js";import{u as l}from"./resource-details-drawer-86a774c0.js";import{C as I}from"./coding-list-1d7c950f.js";import{w as f}from"./error-boundary-139bb980.js";import{F as _,L as h,M as y,a as w,s as z,N as C,u as g}from"./patient-helper-c5d8ffd5.js";import{T as v}from"./table-18dfc5b5.js";import{V as D}from"./view-fhir-c5264c4f.js";import"./_baseToString-ba0098b0.js";import{o as R}from"./sortBy-6991f27f.js";import"./_baseClone-0c3bfcab.js";import"./sortBy-9842b21c.js";import"./_equalByTag-3aa7c076.js";import"./_baseForOwn-56487e0e.js";import{i as E}from"./isEqual-38ff4822.js";import"./_createSet-823d7c6f.js";import{u as N}from"./uniqWith-26eb98cb.js";import{u as P}from"./patient-provider-76317411.js";import{u as T}from"./use-breakpoints-f3785528.js";const x=[{title:"Date",dataIndex:"occurrence"},{title:"Description",dataIndex:"description"},{title:"CVX Code",dataIndex:"cvxCode"}];class b extends _{get description(){return this.resource.vaccineCode.text}get cvxCode(){const t=h(y,this.resource.vaccineCode);return t==null?void 0:t.code}get occurrence(){return this.resource.occurrenceDateTime?w(this.resource.occurrenceDateTime):this.resource.occurrenceString}}const a=e=>{const t=e.map(o=>new b(o));return N(t,(o,i)=>E(s(o),s(i)))},s=e=>[e.description,e.cvxCode,e.occurrence];try{a.displayName="applyImmunizationFilters",a.__docgenInfo={description:"",displayName:"applyImmunizationFilters",props:{}}}catch{}function F(){return P(C,[],async(e,t)=>{try{const{bundle:r,resources:o}=await z("Immunization",e,{patientUPID:t.UPID});return R(a(o),[i=>i.occurrence??""],["desc"])}catch(r){throw new Error(`Failed fetching immunization information for patient: ${r}`)}})}const M=({record:e})=>n.createElement(D,{name:"Immunization Resource",resource:e.resource});function V({className:e}){const t=d.useRef(null),r=T(t),{featureFlags:o}=g(),i=F(),m=l({header:u=>u.description,details:k});return n.createElement("div",{ref:t,"data-zus-telemetry-namespace":"Immunizations",className:p("ctw-patient-immunizations ctw-bg-white",e,{"ctw-stacked":r.sm})},n.createElement("div",{className:"ctw-overflow-hidden"},n.createElement(v,{RowActions:o!=null&&o.enableViewFhirButton?M:void 0,stacked:r.sm,isLoading:i.isLoading,records:i.data??[],columns:x,handleRowClick:m})))}const c=f(V,"PatientImmunizations"),k=e=>[{label:"Date",value:e.occurrence},{label:"Description",value:e.description},{label:"Vaccine Code",value:e.resource.vaccineCode.coding?n.createElement(I,{codings:e.resource.vaccineCode.coding}):void 0}];try{c.displayName="PatientImmunizations",c.__docgenInfo={description:"",displayName:"PatientImmunizations",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{c as P};
