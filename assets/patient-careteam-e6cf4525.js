var _=Object.defineProperty;var q=(r,t,e)=>t in r?_(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var f=(r,t,e)=>(q(r,typeof t!="symbol"?t+"":t,e),e);import{R as n,r as C}from"./index-6f814c40.js";import{c as R}from"./index-74f03c09.js";import{u as b}from"./resource-details-drawer-14ecdf0e.js";import{V as w}from"./view-fhir-06c1face.js";import{F as T,a as V,c as g,G as h,w as E,H as P,s as D,I,u as N}from"./patient-helper-a7599db7.js";import{T as B}from"./table-9c863f8c.js";import{c as v,u as O}from"./patient-provider-b9fb6722.js";import"./_baseToString-4993715b.js";import{f as S,o as M}from"./filter-d57b1580.js";import"./_baseClone-25b1595e.js";import"./sortBy-919d7262.js";import"./_equalByTag-aaf39779.js";import{b as z}from"./_baseForOwn-d8306f34.js";import"./_createSet-12ef9b81.js";import{_ as W}from"./uniq-f5468222.js";import{u as k}from"./use-breakpoints-96c0a4a7.js";var F=z,x=W;function A(r,t){return r&&r.length?x(r,F(t)):[]}var Q=A;const u=(r=!1)=>{const t=[{widthPercent:20,minWidth:150,title:"Practitioner",render:e=>n.createElement(n.Fragment,null,n.createElement("div",null,e.practitionerName),n.createElement("div",null,e.managingOrganization))},{widthPercent:20,minWidth:150,title:"Role",render:e=>n.createElement("div",null,e.role)},{widthPercent:20,minWidth:150,title:"Specialty",render:e=>n.createElement("div",null,e.qualification)},{widthPercent:20,minWidth:150,title:"Noted On",render:e=>n.createElement("div",null,e.effectiveStartDate)}];return r&&t.push({widthPercent:20,minWidth:150,render:e=>n.createElement(w,{name:"CareTeam Resource",resource:e.careTeam})}),t};try{u.displayName="patientCareTeamColumns",u.__docgenInfo={description:"",displayName:"patientCareTeamColumns",props:{}}}catch{}class U extends T{get status(){return this.resource.status}get periodStart(){var t;return V((t=this.resource.period)==null?void 0:t.start)}get periodEnd(){var t;return(t=this.resource.period)==null?void 0:t.end}get particpants(){return this.resource.participant}get careTeamTelecom(){return this.resource.telecom}get managingOrganization(){var e,a;return(a=(e=S(this.resource.participant,"onBehalfOf"))==null?void 0:e.onBehalfOf)==null?void 0:a.display}get role(){var t,e;return g((e=(t=this.resource.participant)==null?void 0:t[0].role)==null?void 0:e[0])}get practitionerQualification(){var a,o,i,s;const t=(i=(o=(a=this.resource.participant)==null?void 0:a[0])==null?void 0:o.member)==null?void 0:i.reference,e=h("Practitioner",this.resource.contained,this.includedResources,t);if(e)return g((s=new v(e).resource.qualification)==null?void 0:s[0].code)}getPractitionerByID(t){return h("Practitioner",this.resource.contained,this.includedResources,t)}}class H extends T{constructor(e,a){super(a);f(this,"careTeam");this.careTeam=e}get practitionerName(){return new v(this.resource).fullName}get effectiveStartDate(){return this.careTeam.periodStart}get managingOrganization(){return this.careTeam.managingOrganization}get role(){return this.careTeam.role}get qualification(){return this.careTeam.practitionerQualification}get telecom(){return this.careTeam.careTeamTelecom}get status(){return this.careTeam.status}}const L=(r,t)=>{const e=r.map(i=>new U(i,t)),a=[];e.forEach(i=>{var s;return(s=i.resource.participant)==null?void 0:s.forEach(d=>{var m,p;const c=i.getPractitionerByID((m=d.member)==null?void 0:m.reference);c!=null&&c.id&&((p=d.member)!=null&&p.reference)&&a.push(new H(i,c))})});const o=M(a,["effectiveStartDate","id"],["desc","desc"]);return Q(o,"id")};function Y(){return O(P,[],E(async(r,t)=>{try{const{bundle:e,resources:a}=await D("CareTeam",r,{patientUPID:t.UPID,_include:"CareTeam:participant"}),o=I(e);return L(a,o)}catch(e){throw new Error(`Failed fetching care team information for patient: ${e}`)}},"req.patient_care_team",[]))}function y({className:r}){const t=C.useRef(null),e=k(t),{featureFlags:a}=N(),o=Y(),i=b({header:s=>s.practitionerName,subHeader:s=>s.qualification,details:l});return n.createElement("div",{ref:t,className:R("ctw-border ctw-border-solid ctw-border-divider-light ctw-bg-white",r,{"ctw-stacked":e.sm})},n.createElement(B,{stacked:e.sm,isLoading:o.isLoading,records:o.data??[],columns:u(a==null?void 0:a.enableViewFhirButton),handleRowClick:i}))}const l=r=>[{label:"Organization",value:r.managingOrganization},{label:"CareTeam Telecom",value:r.telecom&&n.createElement("div",null,r.telecom.map((t,e)=>n.createElement("div",{key:e},t.value)))},{label:"Role",value:r.role},{label:"Status",value:r.status}];try{y.displayName="PatientCareTeam",y.__docgenInfo={description:"",displayName:"PatientCareTeam",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{l.displayName="careTeamData",l.__docgenInfo={description:"",displayName:"careTeamData",props:{careTeam:{defaultValue:null,description:"",name:"careTeam",required:!0,type:{name:"CareTeamModel"}},practitionerName:{defaultValue:null,description:"",name:"practitionerName",required:!0,type:{name:"string"}},effectiveStartDate:{defaultValue:null,description:"",name:"effectiveStartDate",required:!0,type:{name:"string | undefined"}},managingOrganization:{defaultValue:null,description:"",name:"managingOrganization",required:!0,type:{name:"string | undefined"}},role:{defaultValue:null,description:"",name:"role",required:!0,type:{name:"string"}},qualification:{defaultValue:null,description:"",name:"qualification",required:!0,type:{name:"string | undefined"}},telecom:{defaultValue:null,description:"",name:"telecom",required:!0,type:{name:"ContactPoint[] | undefined"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"proposed"'},{value:'"active"'},{value:'"suspended"'},{value:'"inactive"'},{value:'"entered-in-error"'}]}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Practitioner"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}export{y as P};
