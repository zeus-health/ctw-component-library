import{r as c,R as t}from"./index.9f56b196.js";import{c as y}from"./index.d3b8680b.js";import{u as b,T as F,B as S,c as T,d as O,e as I,t as q,f as L,g as V,h as B,i as j,j as D,a as W,P as M,S as U}from"./index.e5a03134.js";import{l,T as $}from"./table.90d85687.js";import"./action-list.8d2557fc.js";import"./drawer.0ebe46ba.js";import"./spinner.51ecf2bb.js";import"./index.7dcc3bb2.js";import{s as Q,o as z,p as Y}from"./requests.596adae2.js";import"./_commonjsHelpers.712cc82f.js";import"./extends.bed14d96.js";import"./index.f2b75861.js";import"./data-list.6d7c3503.js";function Z(e,n){return c.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:n},e),c.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"}))}const G=c.exports.forwardRef(Z),J=G;function u({hideAdd:e,onToggleShowHistoric:n}){const o=b();return t.createElement("div",{className:"ctw-flex ctw-items-center ctw-justify-end ctw-space-x-2 ctw-border-0 ctw-border-t ctw-border-solid ctw-border-divider-light ctw-py-5 ctw-px-4"},t.createElement(F,{name:"historic",text:"Show Historic",onChange:n}),!e&&t.createElement("button",{type:"button",className:"ctw-btn-icon",onClick:()=>o()},t.createElement(J,{className:"ctw-h-4 ctw-w-4"})))}try{u.displayName="PatientConditionsActions",u.__docgenInfo={description:"",displayName:"PatientConditionsActions",props:{hideAdd:{defaultValue:null,description:"",name:"hideAdd",required:!0,type:{name:"boolean"}},onToggleShowHistoric:{defaultValue:null,description:"",name:"onToggleShowHistoric",required:!0,type:{name:"() => void"}}}}}catch{}function K(e){switch(e){case"Active":return"ctw-text-success-main";case"Pending":return"ctw-text-caution-main";default:return"ctw-text-content-lighter"}}const X=[{widthPercent:30,minWidth:320,render:e=>t.createElement("div",null,t.createElement("div",{className:"ctw-pc-title group-hover:ctw-underline"},e.display),t.createElement("div",{className:"ctw-pc-chapter"},e.ccsChapter))},{render:e=>{var n,o;return t.createElement("div",{className:"ctw-pc-status-container"},t.createElement("div",{className:y("ctw-pc-status-dot",K(e.status))},"\u2022"),t.createElement("div",{className:"ctw-pc-status-and-extra"},t.createElement("div",{className:"ctw-pc-status"},e.status),e.isSummaryResource?t.createElement("div",null,l.exports.compact([(o=(n=e.patient)==null?void 0:n.organization)==null?void 0:o.name,e.recordedDate]).join(" ")):t.createElement("div",null,l.exports.compact([e.recorder,e.recordedDate]).join(" "))))},widthPercent:30,minWidth:128},{widthPercent:40,minWidth:132,render:e=>{const n=e.isSummaryResource?"Earliest known onset:":"Onset:";return t.createElement("div",{className:"ctw-pc-onset-notes"},e.onset&&t.createElement("div",null,n," ",e.onset),t.createElement("div",{className:"ctw-pc-notes"},e.notes.join(" ")))}}];function ee(){const[e,n]=c.exports.useState({collection:"patient",showHistoric:!1});function o(r){n(l.exports.merge(l.exports.cloneDeep(e),r))}function i(r,a){return(e.collection==="patient"?r:a).filter(p=>e.showHistoric?!0:["Active","Pending"].includes(p.status))}return{filters:e,updateFilters:o,applyFilters:i}}function w({collection:e,otherConditions:n,onCollectionChange:o}){function i(a){return e===a?"ctw-btn-primary":"ctw-btn-default"}const r=n.filter(a=>a.status==="Active").length;return t.createElement("div",{className:"ctw-flex ctw-items-center ctw-justify-between ctw-py-5 ctw-px-4"},t.createElement("div",{className:"ctw-text-xl ctw-font-medium ctw-text-content-black"},"Conditions"),t.createElement("div",{className:"ctw-space-x-2"},t.createElement("button",{type:"button",className:i("patient"),onClick:()=>o("patient")},"Patient Record"),t.createElement("button",{type:"button",className:y(i("other"),"ctw-space-x-2"),onClick:()=>o("other")},t.createElement("span",null,"Other Provider Records"),t.createElement(S,{text:`${r}`,color:"gray"}))))}try{w.displayName="PatientConditionsHeader",w.__docgenInfo={description:"",displayName:"PatientConditionsHeader",props:{collection:{defaultValue:null,description:"",name:"collection",required:!0,type:{name:"enum",value:[{value:'"patient"'},{value:'"other"'}]}},otherConditions:{defaultValue:null,description:"",name:"otherConditions",required:!0,type:{name:"ConditionModel[]"}},onCollectionChange:{defaultValue:null,description:"",name:"onCollectionChange",required:!0,type:{name:"(collection: FilterCollection) => void"}}}}}catch{}const C=({record:e})=>{const n=T(),o=O();return t.createElement("div",{className:"ctw-flex ctw-space-x-2"},!e.isDeleted&&t.createElement("button",{type:"button",className:"ctw-btn-default",onClick:i=>{i.stopPropagation(),o(e)}},"Remove"),t.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:i=>{i.stopPropagation(),n(e)}},"Edit"))},h=({record:e})=>{const n=b(),{getRequestContext:o}=I();return t.createElement("div",{className:"ctw-flex ctw-space-x-2"},t.createElement("button",{type:"button",className:"ctw-btn-default",onClick:async i=>{i.stopPropagation(),await q(e,await o())}},e.isArchived?"Un-Archive":"Archive"),t.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:i=>{i.stopPropagation(),n(e)}},"Add"))};try{C.displayName="PatientConditionHoverActions",C.__docgenInfo={description:"",displayName:"PatientConditionHoverActions",props:{record:{defaultValue:null,description:"",name:"record",required:!0,type:{name:"ConditionModel"}}}}}catch{}try{h.displayName="OtherProviderConditionHoverActions",h.__docgenInfo={description:"",displayName:"OtherProviderConditionHoverActions",props:{record:{defaultValue:null,description:"",name:"record",required:!0,type:{name:"ConditionModel"}}}}}catch{}function f({className:e,readOnly:n=!1}){var x,N;const{filters:o,updateFilters:i,applyFilters:r}=ee(),a=c.exports.useRef(null),d=L(a),p=V(),v=B(),g=j();function A(){const s=v.isLoading,R=s||g.isLoading;return o.collection==="patient"?s:R}const _=(x=v.data)!=null?x:[],E=D((N=g.data)!=null?N:[],_,!0),k=r(_,E),H=o.collection==="patient"?C:h;return t.createElement("div",{ref:a,className:y("ctw-patient-conditions",e,{"ctw-patient-conditions-stacked":d.sm})},t.createElement(w,{otherConditions:E,collection:o.collection,onCollectionChange:s=>i({collection:s})}),t.createElement(u,{hideAdd:n||o.collection==="other",onToggleShowHistoric:()=>i({showHistoric:!o.showHistoric})}),t.createElement($,{stacked:d.sm,className:"-ctw-mx-px !ctw-rounded-none",showTableHead:!1,isLoading:A(),records:k,RowActions:n?void 0:H,columns:X,handleRowClick:s=>p({condition:s,readOnly:n||s.isSummaryResource})}))}try{f.displayName="PatientConditions",f.__docgenInfo={description:"",displayName:"PatientConditions",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const we={component:f,tags:["docsPage"],argTypes:{className:{options:["Blank","Fixed Width"],control:"select",mapping:{Blank:"","Fixed Width":"ctw-m-auto ctw-max-w-[600px]"}}},args:{className:"Blank",readOnly:!1},decorators:[(e,{args:n})=>t.createElement(W,{env:"dev",authToken:"dummy-token",builderId:"b123"},t.createElement(M,{patientID:"u12345",systemURL:U},t.createElement(e,{args:n})))]},m={...Q({otherConditions:z,patientConditions:Y})};var P;m.parameters={...m.parameters,storySource:{source:`{
  ...setupConditionMocks({
    otherConditions,
    patientConditions
  })
}`,...(P=m.parameters)==null?void 0:P.storySource}};const Ce=["Basic"];export{m as Basic,Ce as __namedExportsOrder,we as default};
//# sourceMappingURL=patient-conditions.stories.4331d60a.js.map
