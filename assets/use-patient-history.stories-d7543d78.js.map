{"version":3,"file":"use-patient-history.stories-d7543d78.js","sources":["../../src/components/content/patient-history/story-helpers/mocks/patient.ts","../../src/components/content/patient-history/story-helpers/mocks/patient-history.ts","../../src/components/content/patient-history/story-helpers/mocks/requests.ts","../../src/components/content/patient-history/use-patient-history.stories.tsx"],"sourcesContent":["export const patient = {\n  resourceType: \"Bundle\",\n  id: \"f4da1f39-7638-45e4-999b-9ff33d7c5201\",\n  meta: {\n    lastUpdated: \"2022-11-15T19:37:55.783+00:00\",\n  },\n  type: \"searchset\",\n  entry: [\n    {\n      resource: {\n        resourceType: \"Patient\",\n        id: \"u12345\",\n        meta: {\n          extension: [\n            {\n              url: \"https://zusapi.com/created-at\",\n              valueInstant: \"2023-01-26T15:49:38.110+00:00\",\n            },\n          ],\n          versionId: \"2\",\n          lastUpdated: \"2023-01-26T15:49:38.553+00:00\",\n          source: \"#cacbf4a51c11b1b0\",\n          security: [\n            {\n              system: \"http://terminology.hl7.org/CodeSystem/v3-ActReason\",\n              code: \"HTEST\",\n            },\n          ],\n          tag: [\n            {\n              system: \"https://zusapi.com/thirdparty/source\",\n              code: \"commonwell\",\n            },\n            {\n              system: \"https://zusapi.com/accesscontrol/owner\",\n              code: \"builder/f09f6b6f-ae4b-45f4-a653-5677b1582115\",\n              display: \"HLTH 2022 - Gunther\",\n            },\n          ],\n        },\n        identifier: [\n          {\n            system: \"https://zusapi.com/fhir/identifier/universal-id\",\n            value: \"b640bda1-aec7-4be6-a890-e3685a55bce3\",\n          },\n        ],\n        name: [\n          {\n            family: \"Zhang\",\n            given: [\"Bruno\"],\n          },\n        ],\n        telecom: [\n          {\n            system: \"email\",\n            value: \"brunozhang@example.com\",\n          },\n          {\n            system: \"phone\",\n            value: \"555-569-2000\",\n            use: \"home\",\n          },\n          {\n            system: \"phone\",\n            value: \"555-536-3933\",\n            use: \"mobile\",\n          },\n          {\n            system: \"phone\",\n            value: \"555-843-3265\",\n            use: \"work\",\n          },\n        ],\n        gender: \"male\",\n        birthDate: \"1970-05-09\",\n        address: [\n          {\n            line: [\"357 SHADOW LN\"],\n            city: \"LAS VEGAS\",\n            state: \"NV\",\n            postalCode: \"89106-4119\",\n          },\n        ],\n        managingOrganization: {\n          reference: \"Organization/79a1c124-a752-4d9a-a44e-2c02499ae402\",\n        },\n      },\n      search: {\n        mode: \"match\",\n      },\n    },\n  ],\n};\n","export const patientHistory = {\n  data: [\n    {\n      uuid: \"9b872994-973c-4b68-a0b0-2cf05829527d\",\n      status: \"error\",\n      initialData: {\n        patientId: \"61266ccb-6493-4044-92c3-bb9ea7604e8c\",\n      },\n      _messages: [\n        {\n          service: \"commonwell\",\n          status: \"error\",\n        },\n        {\n          service: \"surescripts\",\n          status: \"Unknown\",\n        },\n      ],\n      _lastUpdated: \"2023-01-20T19:12:24.632118005Z\",\n      _createdAt: \"2023-01-11T15:49:36.682430633Z\",\n    },\n  ],\n};\n","import { rest } from \"msw\";\nimport { patient } from \"./patient\";\nimport { patientHistory } from \"./patient-history\";\n\nexport const mockPatientGet = rest.get(\n  \"https://api.dev.zusapi.com/fhir/Patient\",\n  (req, res, ctx) => res(ctx.status(200), ctx.json(patient))\n);\n\nexport const mockPatientHistoryGet = rest.get(\n  \"https://api.dev.zusapi.com/patient-history/messages\",\n  (_, res, ctx) => res(ctx.status(200), ctx.json(patientHistory))\n);\n\nexport const mockPatientPut = rest.put(\n  \"https://api.dev.zusapi.com/fhir/Patient/:patientId\",\n  (req, res, ctx) => res(ctx.status(200), ctx.json(patient))\n);\n\nexport const mockProvenancePost = rest.post(\n  \"https://api.dev.zusapi.com/fhir/Provenance\",\n  (_, res, ctx) => res(ctx.status(200))\n);\n\n// https://api.dev.zusapi.com/patient-history/patient/u12345/refresh?consent=1\nexport const mockPatientHistoryPost = rest.post(\n  \"https://api.dev.zusapi.com/patient-history/patient/:patientId/refresh\",\n  (req, res, ctx) => res(ctx.status(200), ctx.json({}))\n);\n","import type { Meta, StoryObj } from \"@storybook/react\";\nimport { mockPatientGet, mockPatientHistoryGet, mockPatientHistoryPost, mockPatientPut, mockProvenancePost } from \"./story-helpers/mocks/requests\";\nimport { usePatientHistory } from \"./use-patient-history\";\nimport { CTWProvider } from \"@/components/core/providers/ctw-provider\";\nimport { PatientProvider } from \"@/components/core/providers/patient-provider\";\nimport { SYSTEM_ZUS_UNIVERSAL_ID } from \"@/fhir/system-urls\";\nconst HookWrapper = () => {\n  const {\n    openHistoryRequestDrawer\n  } = usePatientHistory();\n  return <button type=\"button\" onClick={openHistoryRequestDrawer} className=\"ctw-link ctw-btn-clear\">\n      Request History\n    </button>;\n};\nexport default ({\n  title: \"hooks/usePatientHistory\",\n  component: HookWrapper,\n  decorators: [(Story, {\n    args\n  }) => <CTWProvider env=\"dev\" authToken=\"dummy-token\" builderId=\"b123\">\n        <PatientProvider patientID=\"u12345\" systemURL={SYSTEM_ZUS_UNIVERSAL_ID}>\n          <Story args={args} />\n        </PatientProvider>\n      </CTWProvider>]\n} as Meta);\nexport const Basic: StoryObj = {\n  parameters: {\n    msw: [mockPatientGet, mockPatientHistoryGet, mockPatientPut, mockProvenancePost, mockPatientHistoryPost]\n  }\n};\nBasic.parameters = {\n  ...Basic.parameters,\n  docs: {\n    ...Basic.parameters?.docs,\n    source: {\n      originalSource: \"{\\n  parameters: {\\n    msw: [mockPatientGet, mockPatientHistoryGet, mockPatientPut, mockProvenancePost, mockPatientHistoryPost]\\n  }\\n}\",\n      ...Basic.parameters?.docs?.source\n    }\n  }\n};"],"names":["patient","patientHistory","mockPatientGet","rest","req","res","ctx","mockPatientHistoryGet","_","mockPatientPut","mockProvenancePost","mockPatientHistoryPost","HookWrapper","openHistoryRequestDrawer","usePatientHistory","React","usePatientHistory_stories","Story","args","CTWProvider","PatientProvider","SYSTEM_ZUS_UNIVERSAL_ID","Basic","_a","_c","_b"],"mappings":"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"}