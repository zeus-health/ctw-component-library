var ln=Object.defineProperty;var cn=(e,n,t)=>n in e?ln(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var rt=(e,n,t)=>(cn(e,typeof n!="symbol"?n+"":n,t),t);import{r as f,R as s}from"./index-6f814c40.js";import{C as vt,Z as un}from"./zus-4f959eb6.js";import{c as V}from"./index-74f03c09.js";import{z as _,E as dn,D as Be,u as ce,P as mn}from"./use-patient-history-7c2fe374.js";import{w as j,T as pn}from"./error-boundary-6b0f3ef3.js";import{w as fn,f as yn,_ as ht,h as pe,i as H,j as bt,I as gn,k as Le,l as be,m as wt,n as vn,o as re,p as $e,q as Ue,r as ze,s as hn,b as Q,t as se,x as bn,T as B,F as wn,y as F,c as k,z as A,A as st,B as it,D as Z,E as Cn,G as En,H as Pn,J as Sn,K as $,L as Ct,M as Et,N as Nn,O as _n,R as Dn,U as qn,V as xn,W as On,X as ue,Y as He,Z as Ye,$ as Vn,a0 as Rn,a1 as ot,a2 as An,a3 as Tn,a4 as In,a5 as kn,a6 as we,a7 as Mn,a8 as Fn,a9 as jn,aa as Pt,ab as Bn}from"./patient-provider-19a9ffec.js";import{_ as Ln}from"./_baseForOwn-b2e5e443.js";import{c as St}from"./sortBy-400dab6d.js";import{f as fe,c as Nt,i as $n,o as Un}from"./sortBy-a6efb69f.js";import"./_baseClone-39df8af0.js";import{c as _t}from"./_basePickBy-9cf4e7d3.js";import"./_baseIsEqual-f087c1ca.js";import{p as zn}from"./pickBy-542c46d7.js";import"./_createSet-fb89f2da.js";import{q as G,c as Hn}from"./request-b468d8d1.js";import{M as Yn,u as Zn,a as Gn}from"./view-fhir-e4c486b5.js";import{S as Wn}from"./spinner-66aa4ba7.js";import{e as Ce,t as Kn}from"./values-c66b9b7f.js";import{u as Qn,P as Xn}from"./patient-allergies-21aa48a2.js";import{C as Jn}from"./coding-list-1d7c950f.js";import{a as ea,b as ta,f as na,c as aa,d as ra}from"./details-card-505ef9df.js";import{b as Dt,u as qt,R as xt,a as Ot,L as sa}from"./use-filtered-sorted-data-e7e56d1d.js";import{f as ia,g as Ze,h as Ee}from"./encounters-545f965b.js";import{a as oa,P as la}from"./patient-observations-9a175246.js";import{u as Vt}from"./diagnostic-report-55ac5d5c.js";import{P as ca}from"./patient-careteam-336c84ca.js";import{P as ua}from"./patient-documents-b360031e.js";import{P as da}from"./patient-immunizations-439ba64c.js";import{P as ma}from"./patient-timeline-4b68b9e4.js";import{u as pa}from"./use-breakpoints-6fe8efe9.js";import{h as Rt,s as fa,C as X,y as J,a as ye,b as Ge,$ as ee,I as At,o as ne,M as ae,e as ya,c as T,O as L,T as I,u as Tt,t as ga,S as lt,d as ct}from"./use-watch-ad083092.js";import{s as va}from"./use-controllable-6b791838.js";function ha(e,n){if(e==null)return{};var t={},a=Object.keys(e),r,i;for(i=0;i<a.length;i++)r=a[i],!(n.indexOf(r)>=0)&&(t[r]=e[r]);return t}function We(e,n){if(e==null)return{};var t=ha(e,n),a,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var ba={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},wa=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function ut(e){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=e.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(n.name=t[1],(ba[t[1]]||e.charAt(e.length-2)==="/")&&(n.voidElement=!0),n.name.startsWith("!--"))){var a=e.indexOf("-->");return{type:"comment",comment:a!==-1?e.slice(4,a):""}}for(var r=new RegExp(wa),i=null;(i=r.exec(e))!==null;)if(i[0].trim())if(i[1]){var o=i[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),n.attrs[l[0]]=l[1],r.lastIndex--}else i[2]&&(n.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return n}var Ca=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Ea=/^\s*$/,Pa=Object.create(null);function It(e,n){switch(n.type){case"text":return e+n.content;case"tag":return e+="<"+n.name+(n.attrs?function(t){var a=[];for(var r in t)a.push(r+'="'+t[r]+'"');return a.length?" "+a.join(" "):""}(n.attrs):"")+(n.voidElement?"/>":">"),n.voidElement?e:e+n.children.reduce(It,"")+"</"+n.name+">";case"comment":return e+"<!--"+n.comment+"-->"}}var Sa={parse:function(e,n){n||(n={}),n.components||(n.components=Pa);var t,a=[],r=[],i=-1,o=!1;if(e.indexOf("<")!==0){var l=e.indexOf("<");a.push({type:"text",content:l===-1?e:e.substring(0,l)})}return e.replace(Ca,function(d,v){if(o){if(d!=="</"+t.name+">")return;o=!1}var m,h=d.charAt(1)!=="/",b=d.startsWith("<!--"),g=v+d.length,E=e.charAt(g);if(b){var P=ut(d);return i<0?(a.push(P),a):((m=r[i]).children.push(P),a)}if(h&&(i++,(t=ut(d)).type==="tag"&&n.components[t.name]&&(t.type="component",o=!0),t.voidElement||o||!E||E==="<"||t.children.push({type:"text",content:e.slice(g,e.indexOf("<",g))}),i===0&&a.push(t),(m=r[i-1])&&m.children.push(t),r[i]=t),(!h||t.voidElement)&&(i>-1&&(t.voidElement||t.name===d.slice(2,-1))&&(i--,t=i===-1?a:r[i]),!o&&E!=="<"&&E)){m=i===-1?a:r[i].children;var c=e.indexOf("<",g),w=e.slice(g,c===-1?void 0:c);Ea.test(w)&&(w=" "),(c>-1&&i+m.length>=0||w!==" ")&&m.push({type:"text",content:w})}}),a},stringify:function(e){return e.reduce(function(n,t){return n+It("",t)},"")}},Na=["format"],_a=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function dt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?dt(Object(t),!0).forEach(function(a){ht(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dt(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function ge(e,n){if(!e)return!1;var t=e.props?e.props.children:e.children;return n?t.length>0:!!t}function ve(e){return e?e.props?e.props.children:e.children:[]}function Da(e){return Object.prototype.toString.call(e)!=="[object Array]"?!1:e.every(function(n){return f.isValidElement(n)})}function Y(e){return Array.isArray(e)?e:[e]}function qa(e,n){var t=D({},n);return t.props=Object.assign(e.props,n.props),t}function kt(e,n){if(!e)return"";var t="",a=Y(e),r=n.transSupportBasicHtmlNodes&&n.transKeepBasicHtmlNodesFor?n.transKeepBasicHtmlNodesFor:[];return a.forEach(function(i,o){if(typeof i=="string")t+="".concat(i);else if(f.isValidElement(i)){var l=Object.keys(i.props).length,d=r.indexOf(i.type)>-1,v=i.props.children;if(!v&&d&&l===0)t+="<".concat(i.type,"/>");else if(!v&&(!d||l!==0))t+="<".concat(o,"></").concat(o,">");else if(i.props.i18nIsDynamicList)t+="<".concat(o,"></").concat(o,">");else if(d&&l===1&&typeof v=="string")t+="<".concat(i.type,">").concat(v,"</").concat(i.type,">");else{var m=kt(v,n);t+="<".concat(o,">").concat(m,"</").concat(o,">")}}else if(i===null)pe("Trans: the passed in value is invalid - seems you passed in a null child.");else if(H(i)==="object"){var h=i.format,b=We(i,Na),g=Object.keys(b);if(g.length===1){var E=h?"".concat(g[0],", ").concat(h):g[0];t+="{{".concat(E,"}}")}else pe("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",i)}else pe("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",i)}),t}function xa(e,n,t,a,r,i){if(n==="")return[];var o=a.transKeepBasicHtmlNodesFor||[],l=n&&new RegExp(o.join("|")).test(n);if(!e&&!l)return[n];var d={};function v(c){var w=Y(c);w.forEach(function(p){typeof p!="string"&&(ge(p)?v(ve(p)):H(p)==="object"&&!f.isValidElement(p)&&Object.assign(d,p))})}v(e);var m=Sa.parse("<0>".concat(n,"</0>")),h=D(D({},d),r);function b(c,w,p){var C=ve(c),S=E(C,w.children,p);return Da(C)&&S.length===0?C:S}function g(c,w,p,C,S){c.dummy&&(c.children=w),p.push(f.cloneElement(c,D(D({},c.props),{},{key:C}),S?void 0:w))}function E(c,w,p){var C=Y(c),S=Y(w);return S.reduce(function(N,u,x){var O=u.children&&u.children[0]&&u.children[0].content&&t.services.interpolator.interpolate(u.children[0].content,h,t.language);if(u.type==="tag"){var R=C[parseInt(u.name,10)];!R&&p.length===1&&p[0][u.name]&&(R=p[0][u.name]),R||(R={});var y=Object.keys(u.attrs).length!==0?qa({props:u.attrs},R):R,q=f.isValidElement(y),M=q&&ge(u,!0)&&!u.voidElement,de=l&&H(y)==="object"&&y.dummy&&!q,te=H(e)==="object"&&e!==null&&Object.hasOwnProperty.call(e,u.name);if(typeof y=="string"){var me=t.services.interpolator.interpolate(y,h,t.language);N.push(me)}else if(ge(y)||M){var nn=b(y,u,p);g(y,nn,N,x)}else if(de){var an=E(C,u.children,p);N.push(f.cloneElement(y,D(D({},y.props),{},{key:x}),an))}else if(Number.isNaN(parseFloat(u.name)))if(te){var rn=b(y,u,p);g(y,rn,N,x,u.voidElement)}else if(a.transSupportBasicHtmlNodes&&o.indexOf(u.name)>-1)if(u.voidElement)N.push(f.createElement(u.name,{key:"".concat(u.name,"-").concat(x)}));else{var sn=E(C,u.children,p);N.push(f.createElement(u.name,{key:"".concat(u.name,"-").concat(x)},sn))}else if(u.voidElement)N.push("<".concat(u.name," />"));else{var on=E(C,u.children,p);N.push("<".concat(u.name,">").concat(on,"</").concat(u.name,">"))}else if(H(y)==="object"&&!q){var tt=u.children[0]?O:null;tt&&N.push(tt)}else u.children.length===1&&O?N.push(f.cloneElement(y,D(D({},y.props),{},{key:x}),O)):N.push(f.cloneElement(y,D(D({},y.props),{},{key:x})))}else if(u.type==="text"){var nt=a.transWrapTextNodes,at=i?a.unescape(t.services.interpolator.interpolate(u.content,h,t.language)):t.services.interpolator.interpolate(u.content,h,t.language);nt?N.push(f.createElement(nt,{key:"".concat(u.name,"-").concat(x)},at)):N.push(at)}return N},[])}var P=E([{dummy:!0,children:e||[]}],m,Y(e||[]));return ve(P[0])}function Oa(e){var n=e.children,t=e.count,a=e.parent,r=e.i18nKey,i=e.context,o=e.tOptions,l=o===void 0?{}:o,d=e.values,v=e.defaults,m=e.components,h=e.ns,b=e.i18n,g=e.t,E=e.shouldUnescape,P=We(e,_a),c=b||bt();if(!c)return fn("You will need to pass in an i18next instance by using i18nextReactModule"),n;var w=g||c.t.bind(c)||function(M){return M};i&&(l.context=i);var p=D(D({},yn()),c.options&&c.options.react),C=h||w.ns||c.options&&c.options.defaultNS;C=typeof C=="string"?[C]:C||["translation"];var S=v||kt(n,p)||p.transEmptyNodeValue||r,N=p.hashTransKey,u=r||(N?N(S):S),x=d?l.interpolation:{interpolation:D(D({},l.interpolation),{},{prefix:"#$?",suffix:"?$#"})},O=D(D(D(D({},l),{},{count:t},d),x),{},{defaultValue:S,ns:C}),R=u?w(u,O):S,y=xa(m||n,R,c,p,O,E),q=a!==void 0?a:p.defaultTransParent;return q?f.createElement(q,P,y):y}var Va=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function mt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function Ra(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?mt(Object(t),!0).forEach(function(a){ht(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mt(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Aa(e){var n=e.children,t=e.count,a=e.parent,r=e.i18nKey,i=e.context,o=e.tOptions,l=o===void 0?{}:o,d=e.values,v=e.defaults,m=e.components,h=e.ns,b=e.i18n,g=e.t,E=e.shouldUnescape,P=We(e,Va),c=f.useContext(gn)||{},w=c.i18n,p=c.defaultNS,C=b||w||bt(),S=g||C&&C.t.bind(C);return Oa(Ra({children:n,count:t,parent:a,i18nKey:r,context:i,tOptions:l,values:d,defaults:v,components:m,ns:h||S&&S.ns||p||C&&C.options&&C.options.defaultNS,i18n:C,t:g,shouldUnescape:E},P))}function Ta(e){return e===void 0}var Ia=Ta,ka="Expected a function";function Ma(e){if(typeof e!="function")throw new TypeError(ka);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}var Fa=Ma,ja=Ln,Ba=Fa,La=zn;function $a(e,n){return La(e,Ba(ja(n)))}var Ua=$a;const Pe=({condition:e})=>{var n;return s.createElement("div",null,s.createElement("div",{className:"ctw-text-2xl"},e.display," (",(n=e.preferredCoding)==null?void 0:n.code,")"),s.createElement("div",{className:"ctw-text-sm"},e.ccsChapter))};try{Pe.displayName="ConditionHeader",Pe.__docgenInfo={description:"",displayName:"ConditionHeader",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}function Mt(e){return _t(e)}const Ft=e=>{let n="",t="";switch(e){case"Active":n="confirmed",t="active";break;case"Inactive":n="confirmed",t="inactive";break;case"Pending":n="unconfirmed",t="active";break;case"Refuted":n="refuted",t="inactive";break;case"Entered In Error":n="entered-in-error";break;default:throw Error("status is should be of type ConditionStatus")}return Ua({verificationStatus:{coding:[{system:Le,code:n}]},...t&&{clinicalStatus:{coding:[{system:be,code:t}]}}},Ia)},jt=async(e,n,t,a)=>{const r=await a(),i={resourceType:"Condition",id:t.id,recorder:await wt(r),...Ft(t.status),category:t.id&&e?e.resource.category:[{coding:[{system:vn,code:"problem-list-item",display:"Problem List Item"}]}],code:t.id&&e?e.codings:{coding:[{system:t.condition.system,code:t.condition.code,display:t.condition.display}],text:t.condition.display},...t.abatement&&{abatementDateTime:re(t.abatement)},onsetDateTime:re(t.onset),recordedDate:re(new Date),subject:{type:"Patient",reference:`Patient/${n}`},note:t.note?[{text:t.note}]:void 0},o=await $e(i,r);return await Promise.all([G.invalidateQueries([Ue]),G.invalidateQueries([ze])]),o};function za({onFocus:e}){let[n,t]=f.useState(!0);return n?s.createElement(Rt,{as:"button",type:"button",features:fa.Focusable,onFocus:a=>{a.preventDefault();let r,i=50;function o(){if(i--<=0){r&&cancelAnimationFrame(r);return}if(e()){t(!1),cancelAnimationFrame(r);return}r=requestAnimationFrame(o)}r=requestAnimationFrame(o)}}):null}var Ha=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Ha||{});let Ya={[0](e,n){let t=e.tabs.filter(i=>{var o;return!((o=i.current)!=null&&o.hasAttribute("disabled"))});if(n.index<0)return{...e,selectedIndex:e.tabs.indexOf(t[0])};if(n.index>e.tabs.length)return{...e,selectedIndex:e.tabs.indexOf(t[t.length-1])};let a=e.tabs.slice(0,n.index),r=[...e.tabs.slice(n.index),...a].find(i=>t.includes(i));return r?{...e,selectedIndex:e.tabs.indexOf(r)}:e},[1](e,n){var t;if(e.tabs.includes(n.tab))return e;let a=e.tabs[e.selectedIndex],r=ct([...e.tabs,n.tab],o=>o.current),i=(t=r.indexOf(a))!=null?t:e.selectedIndex;return i===-1&&(i=e.selectedIndex),{...e,tabs:r,selectedIndex:i}},[2](e,n){return{...e,tabs:e.tabs.filter(t=>t!==n.tab)}},[3](e,n){return e.panels.includes(n.panel)?e:{...e,panels:ct([...e.panels,n.panel],t=>t.current)}},[4](e,n){return{...e,panels:e.panels.filter(t=>t!==n.panel)}}},Ke=f.createContext(null);Ke.displayName="TabsSSRContext";function Qe(e){let n=f.useContext(Ke);if(n===null){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Qe),t}return n}let Xe=f.createContext(null);Xe.displayName="TabsDataContext";function U(e){let n=f.useContext(Xe);if(n===null){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,U),t}return n}let Je=f.createContext(null);Je.displayName="TabsActionsContext";function et(e){let n=f.useContext(Je);if(n===null){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,et),t}return n}function Za(e,n){return Tt(n.type,Ya,e,n)}let Ga=f.Fragment,Wa=X(function(e,n){let{defaultIndex:t=0,vertical:a=!1,manual:r=!1,onChange:i,selectedIndex:o=null,...l}=e;const d=a?"vertical":"horizontal",v=r?"manual":"auto";let m=o!==null,h=J(n),[b,g]=f.useReducer(Za,{selectedIndex:o??t,tabs:[],panels:[]}),E=f.useMemo(()=>({selectedIndex:b.selectedIndex}),[b.selectedIndex]),P=ye(i||(()=>{})),c=ye(b.tabs),w=f.useMemo(()=>({orientation:d,activation:v,...b}),[d,v,b]),p=ye(m?e.selectedIndex:b.selectedIndex),C=f.useMemo(()=>({registerTab(u){return g({type:1,tab:u}),()=>g({type:2,tab:u})},registerPanel(u){return g({type:3,panel:u}),()=>g({type:4,panel:u})},change(u){p.current!==u&&P.current(u),m||g({type:0,index:u})}}),[g,m]);Ge(()=>{g({type:0,index:o??t})},[o]);let S=f.useRef({tabs:[],panels:[]}),N={ref:h};return s.createElement(Ke.Provider,{value:S},s.createElement(Je.Provider,{value:C},s.createElement(Xe.Provider,{value:w},w.tabs.length<=0&&s.createElement(za,{onFocus:()=>{var u,x;for(let O of c.current)if(((u=O.current)==null?void 0:u.tabIndex)===0)return(x=O.current)==null||x.focus(),!0;return!1}}),ee({ourProps:N,theirProps:l,slot:E,defaultTag:Ga,name:"Tabs"}))))}),Ka="div",Qa=X(function(e,n){let{orientation:t,selectedIndex:a}=U("Tab.List"),r=J(n);return ee({ourProps:{ref:r,role:"tablist","aria-orientation":t},theirProps:e,slot:{selectedIndex:a},defaultTag:Ka,name:"Tabs.List"})}),Xa="button",Ja=X(function(e,n){var t,a;let r=`headlessui-tabs-tab-${At()}`,{orientation:i,activation:o,selectedIndex:l,tabs:d,panels:v}=U("Tab"),m=et("Tab"),h=U("Tab"),b=Qe("Tab"),g=f.useRef(null),E=J(g,n);Ge(()=>m.registerTab(g),[m,g]);let P=b.current.tabs.indexOf(r);P===-1&&(P=b.current.tabs.push(r)-1);let c=d.indexOf(g);c===-1&&(c=P);let w=c===l,p=ne(y=>{var q;let M=y();if(M===ae.Success&&o==="auto"){let de=(q=ya(g))==null?void 0:q.activeElement,te=h.tabs.findIndex(me=>me.current===de);te!==-1&&m.change(te)}return M}),C=ne(y=>{let q=d.map(M=>M.current).filter(Boolean);if(y.key===T.Space||y.key===T.Enter){y.preventDefault(),y.stopPropagation(),m.change(c);return}switch(y.key){case T.Home:case T.PageUp:return y.preventDefault(),y.stopPropagation(),p(()=>L(q,I.First));case T.End:case T.PageDown:return y.preventDefault(),y.stopPropagation(),p(()=>L(q,I.Last))}if(p(()=>Tt(i,{vertical(){return y.key===T.ArrowUp?L(q,I.Previous|I.WrapAround):y.key===T.ArrowDown?L(q,I.Next|I.WrapAround):ae.Error},horizontal(){return y.key===T.ArrowLeft?L(q,I.Previous|I.WrapAround):y.key===T.ArrowRight?L(q,I.Next|I.WrapAround):ae.Error}}))===ae.Success)return y.preventDefault()}),S=f.useRef(!1),N=ne(()=>{var y;S.current||(S.current=!0,(y=g.current)==null||y.focus(),m.change(c),ga(()=>{S.current=!1}))}),u=ne(y=>{y.preventDefault()}),x=f.useMemo(()=>({selected:w}),[w]),O=e,R={ref:E,onKeyDown:C,onMouseDown:u,onClick:N,id:r,role:"tab",type:va(e,g),"aria-controls":(a=(t=v[c])==null?void 0:t.current)==null?void 0:a.id,"aria-selected":w,tabIndex:w?0:-1};return ee({ourProps:R,theirProps:O,slot:x,defaultTag:Xa,name:"Tabs.Tab"})}),er="div",tr=X(function(e,n){let{selectedIndex:t}=U("Tab.Panels"),a=J(n),r=f.useMemo(()=>({selectedIndex:t}),[t]);return ee({ourProps:{ref:a},theirProps:e,slot:r,defaultTag:er,name:"Tabs.Panels"})}),nr="div",ar=lt.RenderStrategy|lt.Static,rr=X(function(e,n){var t,a,r,i;let{selectedIndex:o,tabs:l,panels:d}=U("Tab.Panel"),v=et("Tab.Panel"),m=Qe("Tab.Panel"),h=`headlessui-tabs-panel-${At()}`,b=f.useRef(null),g=J(b,n);Ge(()=>v.registerPanel(b),[v,b]);let E=m.current.panels.indexOf(h);E===-1&&(E=m.current.panels.push(h)-1);let P=d.indexOf(b);P===-1&&(P=E);let c=P===o,w=f.useMemo(()=>({selected:c}),[c]),p=e,C={ref:g,id:h,role:"tabpanel","aria-labelledby":(a=(t=l[P])==null?void 0:t.current)==null?void 0:a.id,tabIndex:c?0:-1};return!c&&((r=e.unmount)==null||r)&&!((i=e.static)!=null&&i)?s.createElement(Rt,{as:"span",...C}):ee({ourProps:C,theirProps:p,slot:w,defaultTag:nr,features:ar,visible:c,name:"Tabs.Panel"})}),z=Object.assign(Ja,{Group:Wa,List:Qa,Panels:tr,Panel:rr});const sr=async(e,n)=>{const{authToken:t,contextBuilderId:a}=e;return(await(await Hn(`${hn(e.env)}?display=${n}`,{headers:{Authorization:`Bearer ${t}`,...a&&{"Zus-Account":a}}})).json()).conditionsList},Se=({defaultCoding:e,readonly:n,...t})=>{const{getRequestContext:a}=Q(),[r,i]=f.useState(!1),[o,l]=f.useState(),d=async v=>{i(!0);const m=await a(),h=await sr(m,v);h&&l(h.map(b=>({value:b,label:b.display}))),i(!1)};return s.createElement(vt,{options:o||[],isLoading:r,name:`${t.name}`,defaultSearchTerm:t.defaultValue,readonly:n,onSearchChange:d,defaultValue:e})};try{Se.displayName="ConditionsAutoComplete",Se.__docgenInfo={description:"",displayName:"ConditionsAutoComplete",props:{defaultCoding:{defaultValue:null,description:"",name:"defaultCoding",required:!1,type:{name:"Coding"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const Ne=({condition:e})=>[{label:se.t("glossary:condition_one"),field:"condition",value:e.display,readonly:!1,render:(n,t)=>s.createElement(Se,{readonly:n,...t,defaultCoding:e.preferredCoding??{}})},...Bt(e)],_e=({condition:e})=>[{label:"id",value:e.id,field:"id",readonly:!0,hidden:!0},...Bt(e)],Bt=e=>[{label:"subject",value:e.subjectID,field:"subjectID",readonly:!0,hidden:!0},{label:"Status",value:e.displayStatus==="Unknown"?"Select One":e.displayStatus,field:"status"},{label:"Onset",value:e.onset,field:"onset"},{label:"Abatement",value:e.abatement,field:"abatement"},{label:"Note",value:e.notes,lines:3,field:"note"}],Lt=_.object({id:_.string().optional(),subjectID:_.string({required_error:"Condition subjectID must be specified."}),status:_.enum(["Active","Pending","Inactive","Refuted","Entered In Error"]),onset:_.date().max(new Date,{message:"Onset cannot be a future date."}).optional(),abatement:_.date().max(new Date,{message:"Abatement cannot be a future date."}).optional(),note:_.string().optional()}),$t=(e,n)=>{e.abatement&&e.status!=="Inactive"&&n.addIssue({code:_.ZodIssueCode.custom,message:"Status must be inactive.",path:["abatement"]}),e.abatement&&e.onset&&e.abatement<e.onset&&n.addIssue({code:_.ZodIssueCode.custom,message:"Abatement date must be after onset date.",path:["abatement"]})},ir=Lt.superRefine((e,n)=>$t(e,n)),or=Lt.extend({condition:_.object({code:_.string({required_error:"Please choose a condition."}),display:_.string().optional(),system:_.string().optional()})}).superRefine((e,n)=>$t(e,n));try{Ne.displayName="getAddConditionData",Ne.__docgenInfo={description:"",displayName:"getAddConditionData",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}try{_e.displayName="getEditingPatientConditionData",_e.__docgenInfo={description:"",displayName:"getEditingPatientConditionData",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}const De=({resource:e,resourceName:n,onDelete:t,onClose:a,...r})=>{const[i,o]=f.useState(),[l,d]=f.useState(!1),{t:v}=bn(),m=async()=>{try{d(!0),await t(),d(!1),a()}catch(h){throw B.logError(h),d(!1),o("Something went wrong. Please try again."),h}};return s.createElement(Yn,{onAfterClosed:()=>o(void 0),...r},i&&s.createElement(dn,{header:i}),s.createElement("div",{className:"ctw-items-left ctw-flex ctw-h-full ctw-flex-col ctw-space-y-2 ctw-overflow-y-auto","data-zus-telemetry-namespace":"ModalConfirmDelete"},s.createElement("span",{className:"ctw-text-left ctw-text-lg ctw-font-medium ctw-text-content-black"},v("resource.remove.heading",{resource:e})),s.createElement("span",{className:"ctw-subtext ctw-max-w-sm ctw-text-left ctw-text-content-light"},s.createElement(Aa,{i18nKey:"resource.remove.body"},"This will remove"," ",s.createElement("span",{className:"ctw-font-medium"},{resourceName:n})," from this patient's ",{resource:e}," list."))),s.createElement("div",{className:"ctw-flex ctw-w-full ctw-space-x-4"},s.createElement("button",{type:"button",onClick:a,className:"ctw-btn-default ctw-flex-1","data-zus-telemetry-click":"Cancel button"},"Cancel"),s.createElement("button",{type:"button",disabled:l,onClick:m,className:"ctw-btn-primary ctw-save-button ctw-flex-1","data-zus-telemetry-click":"Remove button"},l?"Removing...":"Remove",l&&s.createElement(Wn,{className:"ctw-ml-2 ctw-text-white"}))))};try{De.displayName="ModalConfirmDelete",De.__docgenInfo={description:"",displayName:"ModalConfirmDelete",props:{resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"string"}},resourceName:{defaultValue:null,description:"",name:"resourceName",required:!0,type:{name:"string"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => Promise<void>"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}}}}}catch{}const lr={INF:{fullName:"Certain Infectious and Parasitic Diseases",shortName:"Infectious and Parasitic Diseases"},NEO:{fullName:"Neoplasms",shortName:"Neoplasms"},BLD:{fullName:"Diseases of the Blood and Blood Forming Organs and Certain Disorders Involving the Immune Mechanism",shortName:"Blood Diseases"},END:{fullName:"Endocrine, Nutritional and Metabolic Diseases",shortName:"Endocrine, Nutritional and Metabolic"},MBD:{fullName:"Mental, Behavioral and Neurodevelopmental Disorders",shortName:"Mental and Behavioral"},NVS:{fullName:"Diseases of the Nervous System",shortName:"Nervous System"},EYE:{fullName:"Diseases of the Eye and Adnexa",shortName:"Eye and Adnexa"},EAR:{fullName:"Diseases of the Ear and Mastoid Process",shortName:"Ear and Mastoid Process"},CIR:{fullName:"Diseases of the Circulatory System",shortName:"Circulatory System"},RSP:{fullName:"Diseases of the Respiratory System",shortName:"Respiratory System"},DIG:{fullName:"Diseases of the Digestive System",shortName:"Digestive System"},SKN:{fullName:"Diseases of the Skin and Subcutaneous Tissue",shortName:"Skin and Subcutaneous Tissue"},MUS:{fullName:"Diseases of the Musculoskeletal System and Connective Tissue",shortName:"Musculoskeletal System"},GEN:{fullName:"Diseases of the Genitourinary System",shortName:"Genitourinary System"},PRG:{fullName:"Pregnancy, Childbirth and the Puerperium",shortName:"Pregnancy & Childbirth"},PNL:{fullName:"Certain Conditions Originating in the Perinatal Period",shortName:"Perinatal Conditions"},MAL:{fullName:"Congenital Malformations, Deformations and Chromosomal Abnormalities",shortName:"Malformations and Chromosomal Abnormalities"},SYM:{fullName:"Symptoms, Signs and Abnormal Clinical and Laboratory Findings",shortName:"Clinical Findings"},INJ:{fullName:"Injury, Poisoning and Certain Other Consequences of External Causes",shortName:"External Causes Injury"},EXT:{fullName:"External Causes of Morbidity",shortName:"External Morbidity"},FAC:{fullName:"Factors Influencing Health Status and Contact with Health Services",shortName:"Health Status Influences"},XXX:{fullName:"Unacceptable principal diagnosis (inpatient data) or first-listed diagnosis (outpatient data)",shortName:"Unacceptable principal diagnosis"}};class Ut extends wn{constructor(){super(...arguments);rt(this,"kind","Condition")}get abatement(){var t,a,r;return this.resource.abatementAge?(t=this.resource.abatementAge.value)==null?void 0:t.toString():this.resource.abatementDateTime?F(this.resource.abatementDateTime):this.resource.abatementPeriod?F(this.resource.abatementPeriod.start):this.resource.abatementRange?F((r=(a=this.resource.abatementRange.low)==null?void 0:a.value)==null?void 0:r.toString()):this.resource.abatementString}get active(){var a;const t=fe((a=this.resource.clinicalStatus)==null?void 0:a.coding,{system:be});return t!=null&&t.code?["active","recurrence","relapse"].includes(t.code):!1}get asserter(){var t;return(t=this.resource.asserter)==null?void 0:t.display}get bodySites(){var t;return((t=this.resource.bodySite)==null?void 0:t.map(a=>k(a)))||[]}get categories(){var t;return((t=this.resource.category)==null?void 0:t.map(a=>k(a)))||[]}get ccsChapter(){var a;const t=this.ccsChapterCode;if(t)return(a=lr[t])==null?void 0:a.shortName}get ccsChapterCode(){var t,a;return(a=(t=A(st,this.resource.code))==null?void 0:t.code)==null?void 0:a.slice(0,3)}get ccsGrouping(){var t;return(t=A(st,this.resource.code))==null?void 0:t.display}get clinicalStatus(){return k(this.resource.clinicalStatus)}get clinicalStatusCode(){var t,a;return(a=fe((t=this.resource.clinicalStatus)==null?void 0:t.coding,{system:be}))==null?void 0:a.code}get codings(){return this.resource.code}get display(){var t;return((t=it(he,this.resource.code))==null?void 0:t.display)??k(this.resource.code)}get encounter(){var t;return(t=this.resource.encounter)==null?void 0:t.display}get evidences(){var t;return((t=this.resource.evidence)==null?void 0:t.map(a=>{var r;return k((r=a.code)==null?void 0:r[0])}))||[]}get icd10Code(){var t;return(t=A(Z,this.resource.code))==null?void 0:t.code}get icd10System(){var t;return(t=A(Z,this.resource.code))==null?void 0:t.system}get icd10Display(){var t;return(t=A(Z,this.resource.code))==null?void 0:t.display}get isDeleted(){return this.verificationStatusCode==="entered-in-error"}get knownCodings(){const t=Nt(he.map(r=>r.checkForEnrichment?Cn(r.system,this.resource.code):A(r.system,this.resource.code)));return Zn(t,(r,i)=>r.system===i.system)}knownCodingsMatch(t){return $n(this.knownCodings,t.knownCodings,(a,r)=>a.code===r.code&&a.system===r.system).length>0}get notes(){var t;return((t=this.resource.note)==null?void 0:t.map(a=>a.text))||[]}get onset(){var t,a,r;return this.resource.onsetAge?(t=this.resource.onsetAge.value)==null?void 0:t.toString():this.resource.onsetDateTime?F(this.resource.onsetDateTime):this.resource.onsetPeriod?F(this.resource.onsetPeriod.start):this.resource.onsetRange?F((r=(a=this.resource.onsetRange.low)==null?void 0:a.value)==null?void 0:r.toString()):En(this.resource.onsetString)}get patient(){const t=Pn("Patient",this.resource.contained,this.includedResources,this.resource.subject.reference);if(t)return new Sn(t,this.includedResources)}get preferredCoding(){return it(he,this.resource.code)}get recordedDate(){return F(this.resource.recordedDate)}get recorded(){return F(this.resource.recordedDate)}get recorder(){var t;return(t=this.resource.recorder)==null?void 0:t.display}get severity(){return k(this.resource.severity)}get snomedCoding(){return A($,this.resource.code)}get snomedCode(){var t;return(t=A($,this.resource.code))==null?void 0:t.code}get snomedDisplay(){var t;return(t=A($,this.resource.code))==null?void 0:t.display}get snomedSystem(){var t;return(t=A($,this.resource.code))==null?void 0:t.system}get stages(){var t;return((t=this.resource.stage)==null?void 0:t.map(a=>{const r=k(a.summary),i=k(a.type);return`Summary: ${r}, Type: ${i}`}))||[]}get displayStatus(){function t(i){switch(i){case"active":case"recurrence":case"relapse":return"Active";case"inactive":case"remission":case"resolved":return"Inactive";default:return""}}function a(i){switch(i){case"confirmed":return"confirmed";case"unconfirmed":case"provisional":case"differential":return"unconfirmed";case"refuted":return"refuted";case"entered-in-error":return"entered-in-error";default:return""}}if(this.isSummaryResource)return t(this.clinicalStatusCode)||"Unknown";switch(a(this.verificationStatusCode)+t(this.clinicalStatusCode).toLowerCase()){case"unconfirmedactive":return"Pending";case"unconfirmedinactive":case"refutedactive":return"Unknown";case"confirmedinactive":return"Inactive";case"confirmedactive":return"Active";case"refutedinactive":return"Refuted";case"entered-in-error":return"Entered in Error";default:return"Unknown"}}get subjectID(){var a;const[,t]=((a=this.resource.subject.reference)==null?void 0:a.split("/"))||[];return t||""}get verificationStatus(){return k(this.resource.verificationStatus)}get verificationStatusCode(){var t,a;return(a=fe((t=this.resource.verificationStatus)==null?void 0:t.coding,{system:Le}))==null?void 0:a.code}}const cr=["Active","Inactive","Entered in Error","Pending","Refuted","Unknown"],ur=["Active","Inactive","Unknown"],he=[{system:$,checkForEnrichment:!0},{system:Z,checkForEnrichment:!0},{system:$},{system:Z},{system:Dn},{system:qn},{system:xn}];function dr(e){const n={resourceType:"Condition",subject:{type:"Patient",reference:`Patient/${e}`},...Ft("Active")};return Mt(n)}function zt(){return Ct(Ue,[],Et(async(e,n)=>{try{const{bundle:t,resources:a}=await Nn("Condition",e,{patientUPID:n.UPID});return Zt(Yt(a,t))}catch(t){throw B.logError(t,`Failed fetching conditions for patient: ${n.UPID}`)}},"req.patient_conditions"))}function mr(){return Ct(ze,[],Et(async(e,n)=>{try{const{bundle:t,resources:a}=await On("Condition",e,{_revinclude:"Basic:subject",patientUPID:n.UPID});return Zt(Yt(a,t))}catch(t){throw B.logError(t,`Failed fetching conditions outside for patient: ${n.UPID}`)}},"req.other_provider_conditions"))}function Ht(){const[e,n]=f.useState([]),t=zt(),a=mr();f.useEffect(()=>{const l=t.data??[],d=fr(a.data??[],l,!0);n(d)},[t.data,a.data]);const r=t.isLoading||a.isLoading,i=t.isError||a.isError,o=t.isFetching||a.isFetching;return{isLoading:r,isError:i,isFetching:o,data:e}}function Yt(e,n){const t=_n(n);return e.map(a=>new Ut(a,void 0,t.get(a.id??"")))}function Zt(e){return Un(e.filter(n=>{var t;return((t=n.resource.asserter)==null?void 0:t.type)!=="Patient"}),["resource.recordedDate","display"],["desc"])}const pr=async(e,n)=>{if(!e.id)throw new Error("Tried to edit a resource that hasn't been created yet.");const t=_t(e);if(t.verificationStatus={coding:[{code:"entered-in-error",system:Le}]},delete t.clinicalStatus,(await $e(t,n)).id)B.reportActionSuccess("delete_condition");else throw B.reportActionFailure("delete_condition"),new Error(`Failed to edit resource with id of ${e.id}`);await G.invalidateQueries([Ue])},fr=(e,n,t)=>e.filter(a=>a.isArchived&&!t||["FAC","XXX"].includes(a.ccsChapterCode??"")?!1:!n.some(r=>{const i=a.resource.recordedDate,o=r.resource.recordedDate,l=a.knownCodingsMatch(r),d=r.verificationStatus==="entered-in-error",v=!i||o&&i<=o,m=a.clinicalStatus===r.clinicalStatus;return l&&!d&&(v||m)}));function Gt(){var r;const{t:e}=ue(),{openDrawer:n}=He(),a=((r=Ye().data)==null?void 0:r.id)??"";return i=>{const o=new Ut(i?Mt(i.resource):dr(a));n({component:l=>s.createElement(Be,{title:e("resource.add",{resource:e("glossary:condition_one")}),schema:or,action:St(jt)(o,a),data:Ne({condition:o}),...l})})}}function Wt(){var r;const{t:e}=ue(),{openDrawer:n}=He(),a=((r=Ye().data)==null?void 0:r.id)??"";return i=>{n({component:o=>s.createElement(Be,{title:e("resource.edit",{resource:e("glossary:condition_one")}),header:s.createElement(Pe,{condition:i}),schema:ir,action:St(jt)(i,a),data:_e({condition:i}),...o})})}}function Kt(){const{t:e}=ue(),{openModal:n}=Vn(),{getRequestContext:t}=Q();return(a,r)=>{const i=a.display??e("resource.unamed",{resource:e("glossary:condition_one")});n({component:o=>s.createElement(De,{resource:e("glossary:condition_one"),resourceName:i,onDelete:async()=>{const l=await t();await pr(a.resource,l),r==null||r(a)},...o})})}}const yr=[{title:"Name",widthPercent:30,minWidth:320,render:e=>s.createElement("div",null,s.createElement("div",{className:"group-hover:ctw-underline"},e.display),s.createElement("div",{className:"ctw-pc-chapter"},e.ccsChapter))},{title:"Status",render:e=>s.createElement("div",{className:"ctw-pc-status-container"},s.createElement("div",{className:V("ctw-pc-status-dot",gr(e.displayStatus))},"•"),s.createElement("div",null,e.displayStatus),s.createElement("div",{className:"ctw-pc-status-and-extra"},s.createElement("div",null,"Last Updated:"," ",Nt([e.recordedDate,e.recorder?`(${e.recorder})`:""]).join(" ")))),widthPercent:30,minWidth:128},{title:"Details",widthPercent:40,minWidth:132,render:e=>{const n=e.isSummaryResource?"Earliest known onset:":"Onset:";return s.createElement("div",{className:"ctw-pc-onset-notes"},e.onset&&s.createElement("div",null,n," ",e.onset),s.createElement("div",{className:"ctw-pc-notes"},e.notes.join(" ")))}}];function gr(e){switch(e){case"Active":return"ctw-text-success-main";case"Pending":return"ctw-text-caution-main";default:return"ctw-text-content-lighter"}}const ie=({notes:e})=>s.createElement("div",{className:"ctw-flex ctw-flex-col ctw-space-y-4"},e.map((n,t)=>s.createElement("div",{key:n+t},s.createElement("div",null,n))));try{ie.displayName="NotesList",ie.__docgenInfo={description:"",displayName:"NotesList",props:{notes:{defaultValue:null,description:"",name:"notes",required:!0,type:{name:"string[]"}}}}}catch{}function qe(e){return Qn({resourceType:"Condition",model:e,queryKey:Rn,valuesToDedupeOn:br,getSearchParams:vr,getHistoryEntry:hr})}function vr(e){const n=e.knownCodings.map(a=>`${a.system}|${a.code}`),t={_include:["Condition:patient","Condition:encounter"],"_include:iterate":"Patient:organization"};return n.length>0?t.code=n.join(","):t._id=e.id,t}function hr(e){var t,a;const n=[{label:"Recorder",value:e.recorder},{label:"Clinical Status",value:Ce(e.clinicalStatus)},{label:"Verification Status",value:Ce(e.verificationStatus)},{label:"Recorded Date",value:e.recordedDate},{label:"Category",value:ot(e.categories[0])},{label:"Note",value:e.notes.length!==0&&s.createElement(ie,{notes:e.notes})},{label:"Code",value:s.createElement(Jn,{codings:e.knownCodings})},{label:"Onset Date",value:e.onset},{label:"Abatement Date",value:e.abatement},{label:"Encounter",value:e.encounter}];return{id:e.id,date:e.recordedDate,versionId:e.versionId,title:ot(e.categories[0]),subtitle:(a=(t=e.patient)==null?void 0:t.organization)==null?void 0:a.name,details:n}}const br=e=>[e.recorder,e.clinicalStatus,e.verificationStatus,e.recordedDate,e.notes,e.categories[0],e.onset,e.abatement,e.encounter,e.knownCodings.map(n=>[n.system,n.code])];try{qe.displayName="useConditionHistory",qe.__docgenInfo={description:"",displayName:"useConditionHistory",props:{kind:{defaultValue:null,description:"",name:"kind",required:!0,type:{name:'"Condition"'}},abatement:{defaultValue:null,description:"",name:"abatement",required:!0,type:{name:"string | undefined"}},active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean"}},asserter:{defaultValue:null,description:"",name:"asserter",required:!0,type:{name:"string | undefined"}},bodySites:{defaultValue:null,description:"",name:"bodySites",required:!0,type:{name:"string[]"}},categories:{defaultValue:null,description:"",name:"categories",required:!0,type:{name:"string[]"}},ccsChapter:{defaultValue:null,description:"",name:"ccsChapter",required:!0,type:{name:"string | undefined"}},ccsChapterCode:{defaultValue:null,description:"",name:"ccsChapterCode",required:!0,type:{name:"string | undefined"}},ccsGrouping:{defaultValue:null,description:"",name:"ccsGrouping",required:!0,type:{name:"string | undefined"}},clinicalStatus:{defaultValue:null,description:"",name:"clinicalStatus",required:!0,type:{name:"string"}},clinicalStatusCode:{defaultValue:null,description:"",name:"clinicalStatusCode",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"active"'},{value:'"inactive"'},{value:'"recurrence"'},{value:'"relapse"'},{value:'"remission"'},{value:'"resolved"'}]}},codings:{defaultValue:null,description:"",name:"codings",required:!0,type:{name:"CodeableConcept | undefined"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string | undefined"}},encounter:{defaultValue:null,description:"",name:"encounter",required:!0,type:{name:"string | undefined"}},evidences:{defaultValue:null,description:"",name:"evidences",required:!0,type:{name:"string[]"}},icd10Code:{defaultValue:null,description:"",name:"icd10Code",required:!0,type:{name:"string | undefined"}},icd10System:{defaultValue:null,description:"",name:"icd10System",required:!0,type:{name:"string | undefined"}},icd10Display:{defaultValue:null,description:"",name:"icd10Display",required:!0,type:{name:"string | undefined"}},isDeleted:{defaultValue:null,description:"",name:"isDeleted",required:!0,type:{name:"boolean"}},knownCodings:{defaultValue:null,description:"",name:"knownCodings",required:!0,type:{name:"Coding[]"}},knownCodingsMatch:{defaultValue:null,description:"",name:"knownCodingsMatch",required:!0,type:{name:"(condition: ConditionModel) => boolean"}},notes:{defaultValue:null,description:"",name:"notes",required:!0,type:{name:"string[]"}},onset:{defaultValue:null,description:"",name:"onset",required:!0,type:{name:"string | undefined"}},patient:{defaultValue:null,description:"",name:"patient",required:!0,type:{name:"PatientModel | undefined"}},preferredCoding:{defaultValue:null,description:"",name:"preferredCoding",required:!0,type:{name:"Coding | undefined"}},recordedDate:{defaultValue:null,description:"",name:"recordedDate",required:!0,type:{name:"string | undefined"}},recorded:{defaultValue:null,description:"",name:"recorded",required:!0,type:{name:"string | undefined"}},recorder:{defaultValue:null,description:"",name:"recorder",required:!0,type:{name:"string | undefined"}},severity:{defaultValue:null,description:"",name:"severity",required:!0,type:{name:"string"}},snomedCoding:{defaultValue:null,description:"",name:"snomedCoding",required:!0,type:{name:"Coding | undefined"}},snomedCode:{defaultValue:null,description:"",name:"snomedCode",required:!0,type:{name:"string | undefined"}},snomedDisplay:{defaultValue:null,description:"",name:"snomedDisplay",required:!0,type:{name:"string | undefined"}},snomedSystem:{defaultValue:null,description:"",name:"snomedSystem",required:!0,type:{name:"string | undefined"}},stages:{defaultValue:null,description:"",name:"stages",required:!0,type:{name:"string[]"}},displayStatus:{defaultValue:null,description:"",name:"displayStatus",required:!0,type:{name:"enum",value:[{value:'"Unknown"'},{value:'"Active"'},{value:'"Pending"'},{value:'"Inactive"'},{value:'"Refuted"'},{value:'"Entered in Error"'}]}},subjectID:{defaultValue:null,description:"",name:"subjectID",required:!0,type:{name:"string"}},verificationStatus:{defaultValue:null,description:"",name:"verificationStatus",required:!0,type:{name:"string"}},verificationStatusCode:{defaultValue:null,description:"",name:"verificationStatusCode",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"entered-in-error"'},{value:'"unconfirmed"'},{value:'"provisional"'},{value:'"differential"'},{value:'"confirmed"'},{value:'"refuted"'}]}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Condition"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},key:{defaultValue:null,description:"",name:"key",required:!0,type:{name:"string"}},versionId:{defaultValue:null,description:"",name:"versionId",required:!0,type:{name:"string"}},isArchived:{defaultValue:null,description:"",name:"isArchived",required:!0,type:{name:"boolean"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},isEnriched:{defaultValue:null,description:"",name:"isEnriched",required:!0,type:{name:"() => boolean"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}const xe=({canEdit:e})=>{const n=Wt(),t=Kt();return Gn({header:a=>a.display,subHeader:a=>a.ccsChapter,getSourceDocument:!0,readOnly:!e,onEdit:n,onRemove:t,details:a=>{var r,i;return[{label:"Recorder",value:a.recorder},{label:"Recorded Date",value:a.recordedDate},{label:"Provider Organization",value:(i=(r=a.patient)==null?void 0:r.organization)==null?void 0:i.name},{label:"Status",value:Ce(a.displayStatus)},{label:"Onset Date",value:a.onset},{label:"Abatement Date",value:a.abatement},{label:"Note",value:a.notes.length!==0&&s.createElement(ie,{notes:a.notes})}]},getHistory:qe})};try{xe.displayName="useConditionDetailsDrawer",xe.__docgenInfo={description:"",displayName:"useConditionDetailsDrawer",props:{canEdit:{defaultValue:null,description:"",name:"canEdit",required:!0,type:{name:"boolean"}},canRemove:{defaultValue:null,description:"",name:"canRemove",required:!0,type:{name:"boolean"}}}}}catch{}const Qt={key:"isArchived",type:"tag",belowDivider:!0,display:({listView:e})=>e?"show dismissed records":"dismissed records",icon:ea,toggleDisplay:"hide dismissed records",toggleIcon:ta};function wr(e,n){const t=[];return n&&t.push(Qt),t.push({key:"displayStatus",type:"checkbox",icon:na,display:"Status",values:[...n?ur:cr]},{key:"ccsChapter",type:"checkbox",icon:aa,display:"Category",values:Dt(e,"ccsChapter")}),t}const pt={displayStatus:{key:"displayStatus",selected:["Active","Pending","Unknown"],type:"checkbox"}},Oe={display:"Last Updated (New to Old)",sorts:[{key:"recordedDate",dir:"desc",isDate:!0}]},Cr=[{display:"Name (A-Z)",sorts:[{key:"display",dir:"asc"}]},{display:"Name (Z-A)",sorts:[{key:"display",dir:"desc"}]},{display:"Category (A-Z)",sorts:[{key:"ccsChapter",dir:"asc"}]},{display:"Category (Z-A)",sorts:[{key:"ccsChapter",dir:"desc"}]},{display:"Status (A-Z)",sorts:[{key:"displayStatus",dir:"asc"}]},{display:"Status (Z-A)",sorts:[{key:"displayStatus",dir:"desc"}]},{display:"Last Updated (Old to New)",sorts:[{key:"recordedDate",dir:"asc",isDate:!0}]},Oe];const oe=({action:e,className:n,query:t,outside:a=!1,readOnly:r=!1,rowActions:i,emptyMessage:o="There are no condition records available.",isLoading:l})=>{const d=xe({canRemove:!r&&!a,canEdit:!r&&!a}),{data:v,setFilters:m,setSort:h}=qt({defaultFilters:pt,defaultSort:Oe,records:t.data});return s.createElement("div",{className:V(n,"ctw-scrollable-pass-through-height")},s.createElement(xt,{filterOptions:{onChange:m,defaultState:pt,filters:wr(t.data??[],a)},sortOptions:{defaultSort:Oe,options:Cr,onChange:h},action:e}),s.createElement(Ot,{className:"ctw-patient-conditions",columns:yr,data:v,emptyMessage:o,isLoading:l||t.isLoading,onRowClick:d,rowActions:i}))};try{oe.displayName="PatientConditionsBase",oe.__docgenInfo={description:"",displayName:"PatientConditionsBase",props:{action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"{ data?: ConditionModel[] | undefined; isLoading: boolean; }"}},outside:{defaultValue:{value:"false"},description:"",name:"outside",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"ComponentType<{ record: ConditionModel; }>"}},emptyMessage:{defaultValue:{value:"There are no condition records available."},description:"",name:"emptyMessage",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}}}}}catch{}const Er=({className:e,readOnly:n=!1})=>{const t=zt(),a=Gt(),{t:r}=ue(),i=!n&&s.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>a()},r("resource.add",{resource:r("glossary:condition_one")}));return s.createElement(oe,{action:i,className:V(e),query:t,readOnly:n,rowActions:n?void 0:Pr})},Ve=j(Er,"PatientConditions"),Pr=({record:e})=>{const n=Wt(),t=Kt();return s.createElement("div",{className:"ctw-flex ctw-space-x-2"},!e.isDeleted&&s.createElement("button",{type:"button",className:"ctw-btn-default",onClick:()=>t(e)},"Remove"),s.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>n(e)},"Edit"))};try{Ve.displayName="PatientConditions",Ve.__docgenInfo={description:"",displayName:"PatientConditions",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const Sr=()=>{const e=ce();return s.createElement(s.Fragment,null,e.lastRetrievedAt&&s.createElement("div",{className:"ctw-text-sm ctw-italic ctw-text-black"},"Last Retrieved",An(e.lastRetrievedAt)))},W=j(({className:e,includePatientDemographicsForm:n})=>{const{openHistoryRequestDrawer:t}=ce(n);return s.createElement("button",{type:"button",className:V("ctw-btn-clear ctw-link",e),onClick:t,"data-zus-telemetry-click":"Request records"},"Request Records")},"RequestRecordsButton");try{W.displayName="RequestRecordsButton",W.__docgenInfo={description:"",displayName:"RequestRecordsButton",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}},includePatientDemographicsForm:{defaultValue:null,description:"",name:"includePatientDemographicsForm",required:!1,type:{name:"boolean"}}}}}catch{}const Re=({hideRequestRecords:e=!1})=>s.createElement("div",{className:"ctw-flex ctw-space-x-1"},s.createElement(Sr,null),!e&&s.createElement(W,null));try{Re.displayName="PatientHistoryAction",Re.__docgenInfo={description:"",displayName:"PatientHistoryAction",props:{hideRequestRecords:{defaultValue:{value:"false"},description:"",name:"hideRequestRecords",required:!1,type:{name:"boolean"}}}}}catch{}async function Nr(e,n,t,a){if(!n.id)throw new Error(`Tried to ${a} a resource that hasn't been created yet.`);if(!n.isSummaryResource)throw new Error(`Tried to ${a} a patient record resource.`);const r={resourceType:"Basic",id:e==null?void 0:e.id,code:{coding:[{system:Tn,code:"adminact",display:"Administrative Activity"},{system:In,code:a}]},subject:{reference:`${n.resourceType}/${n.id}`,type:n.resourceType},author:await wt(t)};if((await $e(r,t)).id)B.reportActionFailure(a);else throw B.reportActionFailure(a),new Error(`Failed to ${a} resource with id of ${n.id}`)}async function Xt(e,n,t){const a=e.getBasicResourceByAction("archive")||e.getBasicResourceByAction("unarchive"),r=e.isArchived?"unarchive":"archive";await Nr(a,e,n,r),t&&await G.invalidateQueries(t)}const _r=({className:e,hideRequestRecords:n=!1,readOnly:t=!1})=>{const a=Ht(),r=ce(),i=r.lastRetrievedAt===void 0&&a.data.length===0,o=r.lastRetrievedAt?void 0:s.createElement("div",{className:"ctw-flex ctw-space-x-1"},s.createElement("div",null,"Retrieve patient clinical history."),s.createElement(W,null)),l=s.createElement(Re,{hideRequestRecords:n||i||t});return s.createElement(oe,{outside:!0,action:l,className:e,query:a,readOnly:t,rowActions:t?void 0:Dr,emptyMessage:o,isLoading:r.isLoading})},Ae=j(_r,"PatientConditions"),Dr=({record:e})=>{const n=Gt(),{getRequestContext:t}=Q();return s.createElement("div",{className:"ctw-flex ctw-space-x-2"},s.createElement("button",{type:"button",className:"ctw-btn-default",onClick:async()=>{await Xt(e,await t(),[ze])}},e.isArchived?"Restore":"Dismiss"),s.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>n(e)},"Add"))};try{Ae.displayName="PatientConditionsOutside",Ae.__docgenInfo={description:"",displayName:"PatientConditionsOutside",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},hideRequestRecords:{defaultValue:{value:"false"},description:"",name:"hideRequestRecords",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const K=({className:e,color:n,text:t})=>{const a={primary:"ctw-bg-primary-light ctw-text-primary-main",gray:"ctw-bg-bg-light ctw-text-content-light",info:"ctw-bg-info-light ctw-text-info-main",success:"ctw-bg-success-light ctw-text-success-main",caution:"ctw-bg-caution-light ctw-text-caution-main",error:"ctw-bg-error-light ctw-text-error-main",notification:"ctw-bg-notification-light ctw-text-notification-main"}[n];return s.createElement("span",{className:V(e,a,"ctw-inline-flex ctw-rounded-full ctw-px-2 ctw-text-xs ctw-font-semibold ctw-leading-5")},t)};try{K.displayName="Badge",K.__docgenInfo={description:"",displayName:"Badge",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"enum",value:[{value:'"error"'},{value:'"primary"'},{value:'"gray"'},{value:'"info"'},{value:'"success"'},{value:'"caution"'},{value:'"notification"'}]}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}}}catch{}const qr=()=>{const n=Ht().data.filter(t=>t.displayStatus==="Active");return n.length>0?s.createElement(K,{color:"notification",text:n.length.toString(),className:"ctw-h-5"}):null};function Jt(e,n){const t=Dt(e,"lastPrescriber"),a=[];return n&&a.push(Qt),t.length>1&&a.push({key:"lastPrescriber",type:"checkbox",icon:ra,values:t,display:"prescriber"}),a}const ft={},xr=[{title:"Medication Name",render:e=>s.createElement(s.Fragment,null,s.createElement("div",{className:"ctw-font-medium group-hover:ctw-underline"},e.display),s.createElement("div",{className:"ctw-font-light"},e.dosage)),widthPercent:35,minWidth:270},{title:"Dispensed",render:e=>s.createElement("div",{className:"ctw-stacked-concat"},e.quantity&&s.createElement("div",null,e.quantity),e.refills&&s.createElement("div",null,e.refills," refills")),widthPercent:14},{title:"Last Filled",render:e=>e.lastFillDate&&s.createElement("div",null,s.createElement("span",{className:"ctw-stacked-only"},"Last Filled: "),e.lastFillDate),widthPercent:18},{title:"Last Prescribed",render:e=>{const{lastPrescribedDate:n,lastPrescriber:t}=e;return!n&&!t?null:s.createElement("div",{className:"ctw-stacked-concat"},s.createElement("span",{className:"ctw-stacked-only"},"Last Prescribed: "),n&&s.createElement("div",null,n),t&&s.createElement("div",null,t))},widthPercent:18,minWidth:"90px"}],en=[{display:"Name (A-Z)",sorts:[{key:"display",dir:"asc"}]},{display:"Name (Z-A)",sorts:[{key:"display",dir:"desc"}]},{display:"Last Fill Date (Oldest to Newest)",sorts:[{key:"lastFillDate",dir:"desc",isDate:!0}]},{display:"Last Fill Date (Newest to Oldest)",sorts:[{key:"lastFillDate",dir:"asc",isDate:!0}]},{display:"Last Prescribed (Old to New)",sorts:[{key:"lastPrescribedDate",isDate:!0,dir:"desc"},{key:"lastPrescriber",dir:"asc"}]},{display:"Last Prescribed (New to Old)",sorts:[{key:"lastPrescribedDate",isDate:!0,dir:"asc"},{key:"lastPrescriber",dir:"asc"}]}],yt=en[0];const le=({action:e,className:n,query:t,rowActions:a,filters:r,defaultView:i,views:o,onOpenHistoryDrawer:l})=>{const d=ia(),{data:v,setFilters:m,setSort:h,setViewOption:b}=qt({defaultView:i,defaultFilters:ft,defaultSort:yt,records:t.data});function g(E){l==null||l(),d(E)}return s.createElement("div",{className:V("ctw-scrollable-pass-through-height",n)},s.createElement(xt,{viewOptions:i&&o?{onChange:b,defaultView:i,options:o}:void 0,filterOptions:{onChange:m,defaultState:ft,filters:r},sortOptions:{defaultSort:yt,options:en,onChange:h},action:e}),s.createElement(Ot,{className:"ctw-patient-medications",columns:xr,data:v,emptyMessage:"There are no medication records available.",isLoading:t.isLoading,onRowClick:g,rowActions:a}))};try{le.displayName="PatientMedicationsBase",le.__docgenInfo={description:"",displayName:"PatientMedicationsBase",props:{action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"{ data?: MedicationStatementModel[] | undefined; isLoading: boolean; }"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"ComponentType<{ record: MedicationStatementModel; }>"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterItem[]"}},defaultView:{defaultValue:null,description:"",name:"defaultView",required:!1,type:{name:"ViewOption"}},views:{defaultValue:null,description:"",name:"views",required:!1,type:{name:"ViewOption[]"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}const Or=["active","unknown","on-hold","intended","not-taken"],Vr=["completed","stopped","entered-in-error"],tn=[{display:"Current",filters:[{key:"status",type:"checkbox",selected:Or}]},{display:"Past",filters:[{key:"status",type:"checkbox",selected:Vr}]},{display:"All",filters:[]}],Rr=tn[0],Ar=({className:e,onOpenHistoryDrawer:n})=>{const{builderMedications:t,isLoading:a}=Ze();return s.createElement(le,{className:e,query:{data:t,isLoading:a},filters:Jt(t,!1),views:tn,defaultView:Rr,onOpenHistoryDrawer:n})},Te=j(Ar,"PatientMedications");try{Te.displayName="PatientMedications",Te.__docgenInfo={description:"",displayName:"PatientMedications",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}const Tr=async(e,n)=>{const{authToken:t,contextBuilderId:a}=e;return(await(await fetch(`${kn(e.env)}?display=${n}`,{headers:{Authorization:`Bearer ${t}`,...a&&{"Zus-Account":a}}})).json()).data},Ie=({defaultCoding:e,readonly:n,...t})=>{const{getRequestContext:a}=Q(),[r,i]=f.useState(!1),[o,l]=f.useState(),d=async v=>{i(!0);const m=await a(),h=await Tr(m,v);h&&l(h.map(b=>({value:b,label:b.display}))),i(!1)};return s.createElement(vt,{options:o||[],isLoading:r,name:`${t.name}`,defaultSearchTerm:t.defaultValue,readonly:n,onSearchChange:d,defaultValue:e})};try{Ie.displayName="MedicationsAutoComplete",Ie.__docgenInfo={description:"",displayName:"MedicationsAutoComplete",props:{defaultCoding:{defaultValue:null,description:"",name:"defaultCoding",required:!1,type:{name:"Coding"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const ke=e=>[{label:"Subject",value:e.subjectID,field:"subjectID",hidden:!0},{label:"Date Asserted",value:we(new Date,"P"),field:"dateAsserted",hidden:!0},{label:"Medication",field:"medication",value:e.display,render:(n,t)=>s.createElement(Ie,{readonly:n,...t,defaultCoding:e.rxNormCodeableConcept})},{label:"Latest Status",value:Kn(e.status),field:"status"},{label:"Instructions",value:e.dosage,field:"dosage"}],Ir=_.object({subjectID:_.string({required_error:"Patient must be specified."}),dateAsserted:_.date({required_error:"Date asserted is required."}),medication:_.object({code:_.string({required_error:"Please choose a medication."}),display:_.string().optional(),system:_.string().optional()}),dosage:_.string().optional(),status:_.enum(["active","completed","entered-in-error","intended","not-taken","on-hold","stopped","unknown"])});try{ke.displayName="getMedicationFormData",ke.__docgenInfo={description:"",displayName:"getMedicationFormData",props:{kind:{defaultValue:null,description:"",name:"kind",required:!0,type:{name:'"MedicationStatement"'}},builderPatientRxNormStatus:{defaultValue:null,description:"",name:"builderPatientRxNormStatus",required:!1,type:{name:"Record<string, string>"}},basedOn:{defaultValue:null,description:"",name:"basedOn",required:!0,type:{name:"string | undefined"}},category:{defaultValue:null,description:"",name:"category",required:!0,type:{name:"string"}},context:{defaultValue:null,description:"",name:"context",required:!0,type:{name:"string | undefined"}},dateAsserted:{defaultValue:null,description:"",name:"dateAsserted",required:!0,type:{name:"string | undefined"}},derivedFrom:{defaultValue:null,description:"",name:"derivedFrom",required:!0,type:{name:"string[]"}},aggregatedFrom:{defaultValue:null,description:"",name:"aggregatedFrom",required:!0,type:{name:"Reference[]"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string"}},dosage:{defaultValue:null,description:"",name:"dosage",required:!0,type:{name:"string | undefined"}},effectiveStart:{defaultValue:null,description:"",name:"effectiveStart",required:!0,type:{name:"string | undefined"}},identifier:{defaultValue:null,description:"",name:"identifier",required:!0,type:{name:"string | undefined"}},informationSource:{defaultValue:null,description:"",name:"informationSource",required:!0,type:{name:"Reference | undefined"}},medicationReference:{defaultValue:null,description:"",name:"medicationReference",required:!0,type:{name:"string | undefined"}},notesDisplay:{defaultValue:null,description:"",name:"notesDisplay",required:!0,type:{name:"string[]"}},partOf:{defaultValue:null,description:"",name:"partOf",required:!0,type:{name:"string | undefined"}},patientStatus:{defaultValue:null,description:"",name:"patientStatus",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},rxNorm:{defaultValue:null,description:"",name:"rxNorm",required:!0,type:{name:"string | undefined"}},rxNormCodeableConcept:{defaultValue:null,description:'Get RxNorm coding with "display" defaulting to this Med-Statement label.',name:"rxNormCodeableConcept",required:!0,type:{name:"{ display: string; code?: string | undefined; _code?: Element | undefined; _display?: Element | undefined; system?: string | undefined; _system?: Element | undefined; ... 6 more ...; _id?: Element | undefined; }"}},reason:{defaultValue:null,description:"",name:"reason",required:!0,type:{name:"string | undefined"}},reasonReference:{defaultValue:null,description:"",name:"reasonReference",required:!0,type:{name:"Reference[] | undefined"}},isInactive:{defaultValue:null,description:"",name:"isInactive",required:!0,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"active"'},{value:'"entered-in-error"'},{value:'"unknown"'},{value:'"completed"'},{value:'"intended"'},{value:'"stopped"'},{value:'"on-hold"'},{value:'"not-taken"'}]}},displayStatus:{defaultValue:null,description:"",name:"displayStatus",required:!0,type:{name:"string"}},statusReason:{defaultValue:null,description:"",name:"statusReason",required:!0,type:{name:"string | undefined"}},subject:{defaultValue:null,description:"",name:"subject",required:!0,type:{name:"Reference"}},subjectID:{defaultValue:null,description:"",name:"subjectID",required:!0,type:{name:"string"}},patient:{defaultValue:null,description:"",name:"patient",required:!0,type:{name:"PatientModel | undefined"}},lastFillDate:{defaultValue:null,description:"",name:"lastFillDate",required:!0,type:{name:"string | undefined"}},quantity:{defaultValue:null,description:"",name:"quantity",required:!0,type:{name:"string | undefined"}},daysSupply:{defaultValue:null,description:"",name:"daysSupply",required:!0,type:{name:"string | undefined"}},refills:{defaultValue:null,description:"",name:"refills",required:!0,type:{name:"string | undefined"}},lastPrescriber:{defaultValue:null,description:"",name:"lastPrescriber",required:!0,type:{name:"string | undefined"}},lastPrescribedDate:{defaultValue:null,description:"",name:"lastPrescribedDate",required:!0,type:{name:"string | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"MedicationStatement"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},key:{defaultValue:null,description:"",name:"key",required:!0,type:{name:"string"}},versionId:{defaultValue:null,description:"",name:"versionId",required:!0,type:{name:"string"}},isArchived:{defaultValue:null,description:"",name:"isArchived",required:!0,type:{name:"boolean"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},isEnriched:{defaultValue:null,description:"",name:"isEnriched",required:!0,type:{name:"() => boolean"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}const kr=[jn,Pt,Bn],Mr=async(e,n)=>{const t={resourceType:"MedicationStatement",status:e.status,dateAsserted:re(e.dateAsserted),subject:{type:"Patient",reference:`Patient/${e.subjectID}`},medicationCodeableConcept:{text:e.medication.display,coding:[{system:Mn,code:e.medication.code}]},...e.dosage&&{dosage:[{text:e.dosage}]}},a=new Ee(t),r=await Fn(a.resource,await n());return await Promise.all(kr.map(async i=>G.invalidateQueries([i]))),r};function Fr(){const{openDrawer:e}=He();return n=>{e({component:t=>s.createElement(jr,{medication:n.resource,...t})})}}const jr=({isOpen:e,onClose:n,medication:t})=>{var l,d;const a=Ye(),r={reference:`Patient/${(l=a.data)==null?void 0:l.id}`,display:(d=a.data)==null?void 0:d.display};let i;t?i=new Ee({...t,subject:r,dateAsserted:we(new Date,"yyyy-MM-dd")}):i=new Ee({resourceType:"MedicationStatement",status:"active",subject:r,dateAsserted:we(new Date,"yyyy-MM-dd")});const o=ke(i);return s.createElement(Be,{title:"Add Medication",action:Mr,data:o,schema:Ir,isOpen:e,onClose:n})},Br=({className:e,onAddToRecord:n,readOnly:t=!1,onOpenHistoryDrawer:a})=>{const{otherProviderMedications:r,isLoading:i}=Ze();return s.createElement(le,{className:e,query:{data:r,isLoading:i},filters:Jt(r,!0),rowActions:t?void 0:Lr({onAddToRecord:n}),onOpenHistoryDrawer:a})},Me=j(Br,"PatientMedicationsOutside"),Lr=({onAddToRecord:e})=>n=>s.createElement($r,{...n,onAddToRecord:e}),$r=({record:e,onAddToRecord:n})=>{const t=Fr(),{getRequestContext:a}=Q();return s.createElement("div",{className:"ctw-flex ctw-space-x-2"},s.createElement("button",{type:"button",className:"ctw-btn-default",onClick:async()=>{await Xt(e,await a(),[Pt])}},e.isArchived?"Restore":"Dismiss"),s.createElement("button",{type:"button",className:"ctw-btn-primary ctw-ml-1 ctw-capitalize","data-zus-telemetry-click":"Add to record","data-testid":"add-to-record",onClick:()=>{n?n(e):t(e)}},"Add"))};try{Me.displayName="PatientMedicationsOutside",Me.__docgenInfo={description:"",displayName:"PatientMedicationsOutside",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}},onAddToRecord:{defaultValue:null,description:"",name:"onAddToRecord",required:!1,type:{name:"((record: MedicationStatementModel) => void)"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const Ur=()=>{const{otherProviderMedications:e=[]}=Ze(),n=e.filter(t=>!(t.isArchived||t.isInactive));return n.length>0?s.createElement(K,{color:"notification",text:n.length.toString(),className:"ctw-h-5"}):null},zr=({className:e})=>{const n=Vt();return s.createElement(oa,{query:n,className:V(e,"ctw-scrollable-pass-through-height")})},Fe=j(zr,"PatientObservationsOutside");try{Fe.displayName="PatientObservationsOutside",Fe.__docgenInfo={description:"",displayName:"PatientObservationsOutside",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}}}}}catch{}const Hr=()=>{const{data:e=[]}=Vt();return e.length?s.createElement(K,{color:"notification",text:e.length.toString(),className:"ctw-h-5"}):null},Yr={allergies:(e={})=>({key:"allergies",getPanelClassName:()=>"ctw-pt-5",display:()=>"allergies",render:()=>s.createElement(Xn,{...e})}),"care-team":(e={})=>({key:"care-team",display:()=>"care team",render:()=>s.createElement(ca,{...e})}),conditions:(e={})=>({key:"conditions",display:()=>se.t("zap.tabs.conditions"),render:()=>s.createElement(Ve,{...e})}),"conditions-outside":(e={})=>({key:"conditions-outside",display:()=>s.createElement("div",{className:"ctw-space-x-2"},s.createElement("span",{className:"ctw-capitalize"},se.t("zap.tabs.conditionsOutside")),s.createElement(qr,null)),render:()=>s.createElement(Ae,{...e})}),documents:(e={})=>({key:"documents",getPanelClassName:()=>"ctw-pt-5",display:()=>"documents",render:()=>s.createElement(ua,{...e})}),immunizations:(e={})=>({key:"immunizations",getPanelClassName:()=>"ctw-pt-5",display:()=>"immunizations",render:()=>s.createElement(da,{...e})}),medications:(e={})=>({key:"medications",display:()=>"medication list",render:()=>s.createElement(Te,{...e})}),"medications-outside":(e={})=>({key:"medications-outside",display:()=>s.createElement("div",{className:"ctw-space-x-2"},s.createElement("span",{className:"ctw-capitalize"},se.t("zap.tabs.medicationsOutside")),s.createElement(Ur,null)),render:()=>s.createElement(Me,{...e})}),observations:(e={})=>({key:"observations",display:()=>"observations",render:()=>s.createElement(la,{...e})}),"observations-outside":(e={})=>({key:"observations-outside",display:()=>s.createElement(s.Fragment,null,s.createElement("span",{className:"ctw-pr-2 ctw-capitalize"},"outside observations"),s.createElement(Hr,null)),render:()=>s.createElement(Fe,{...e})}),timelines:(e={})=>({key:"timelines",getPanelClassName:()=>"ctw-pt-5",display:()=>"encounter timeline",render:()=>s.createElement(ma,{...e})})};function Zr({children:e,className:n,forceHorizontalTabs:t=!1,content:a,onChange:r,topRightContent:i}){const[o,l]=f.useState(0),d=f.useRef(null),v=pa(d),m=ce(),h=!t&&v.sm,[b,g]=f.useState({0:!0}),E=c=>{l(c),g({...b,[c]:!0}),r&&r(c)},P=!!i;return s.createElement("div",{ref:d,className:V(n,"ctw-tab-group ctw-scrollable-pass-through-height ctw-w-full")},s.createElement(mn,{messages:m.latestServiceMessages,status:m.lastStatus,date:m.lastRetrievedAt}),s.createElement(z.Group,{selectedIndex:o,onChange:E},h&&s.createElement(s.Fragment,null,s.createElement(sa,{btnClassName:"ctw-tab ctw-capitalize",optionsClassName:"ctw-tab-list ctw-capitalize",onChange:E,items:a}),P&&s.createElement("div",{className:"ctw-ml-auto ctw-flex ctw-items-center ctw-px-1.5"},i)),s.createElement(z.List,{className:V("ctw-border-default ctw-flex ctw-justify-start ctw-border-b ctw-border-divider-light",{"ctw-hidden":h})},a.map(({key:c,display:w})=>s.createElement(z,{key:c,"data-zus-telemetry-click":`Tab[${c}]`,onClick:Gr,className:({selected:p})=>V(["ctw-tab ctw-text-sm ctw-capitalize","hover:after:ctw-bg-content-black","focus-visible:ctw-outline-primary-dark focus-visible:after:ctw-bg-transparent"],{"after:ctw-bg-content-black":p,"ctw-text-content-light":!p})},w())),P&&s.createElement("div",{className:"ctw-ml-auto ctw-flex ctw-items-center ctw-px-1.5"},i)),e,s.createElement(z.Panels,{className:"ctw-scrollable-pass-through-height"},a.map((c,w)=>{var p;return s.createElement(z.Panel,{key:c.key,className:V("ctw-scrollable-pass-through-height",(p=c.getPanelClassName)==null?void 0:p.call(c,v.sm)),unmount:!1},b[w]&&c.render(v.sm))}))))}const je=j(Zr,"TabGroup",!1);function Gr(){typeof document<"u"&&requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})}try{je.displayName="TabGroup",je.__docgenInfo={description:"",displayName:"TabGroup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"TabGroupItem[]"}},forceHorizontalTabs:{defaultValue:null,description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((index: number) => void)"}},topRightContent:{defaultValue:null,description:"",name:"topRightContent",required:!1,type:{name:"ReactNode"}}}}}catch{}const Wr=({forceHorizontalTabs:e=!1,includePatientDemographicsForm:n,allergiesProps:t,careTeamProps:a,conditionsProps:r,conditionsOutsideProps:i,documentsProps:o,immunizationsProps:l,medicationsProps:d,medicationsOutsideProps:v,observationsProps:m,observationsOutsideProps:h,timelineProps:b,resources:g,hideTitle:E=!1,title:P="Outside Records",removeBranding:c=!1,removeRequestRecords:w=!1})=>{const p={allergies:t,"care-team":a,conditions:r,"conditions-outside":i,documents:o,immunizations:l,medications:d,"medications-outside":v,observations:m,"observations-outside":h,timelines:b},C=g.map(S=>{const N=p[S]??{};return Yr[S](N)});return s.createElement("div",{className:"ctw-zus-aggregated-profile ctw-scrollable-pass-through-height"},!E&&s.createElement(pn,{className:"ctw-border-b-2 ctw-border-l-0 ctw-border-r-0 ctw-border-t-0 ctw-border-solid ctw-border-divider-light"},s.createElement("h3",{className:"ctw-m-0 ctw-inline-block ctw-p-0 ctw-pb-3 ctw-text-lg ctw-font-medium"},P," ",!c&&s.createElement("span",{className:"ctw-text-sm ctw-font-light ctw-italic ctw-text-content-light"},"Powered by"," ",s.createElement("img",{src:un,alt:"Zus",className:"-ctw-mb-1.5"})))),s.createElement(je,{content:C,forceHorizontalTabs:e,topRightContent:w?void 0:s.createElement(W,{includePatientDemographicsForm:n})}))},gt=j(Wr,"ZusAggregatedProfile");try{gt.displayName="ZusAggregatedProfile",gt.__docgenInfo={description:`ZusAggregatedProfile allows developers to utilize most of the components
available in this library as a single customizable component with tabbed
navigation. Simply pass an array with the names of the desired resources
to include _(see below)_.

It's possible to set a custom title for the ZusAggregatedProfile component,
making it a single component which can be used to create a handful of
different widgets within an app.

\`\`\`
export const ZusMedsWidget = <ZusAggregatedProfile
  title="Medications"
  resources={["medications", "medications-outside"]}
/>

export const ZusProblemsWidget = <ZusAggregatedProfile
  title="Problems"
  resources={["allergies", "conditions", "conditions-outside"]}
/>
\`\`\`
The complete set of available resources in the ZusAggregatedProfile are
"allergies",
"care-team",
"conditions",
"conditions-outside",
"documents",
"immunizations",
"medications",
"medications-outside",
"observations",
"observations-outside",
"timelines".`,displayName:"ZusAggregatedProfile",props:{resources:{defaultValue:null,description:"",name:"resources",required:!0,type:{name:"ZAPResourceName[]"}},forceHorizontalTabs:{defaultValue:{value:"false"},description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},includePatientDemographicsForm:{defaultValue:null,description:"",name:"includePatientDemographicsForm",required:!1,type:{name:"boolean"}},title:{defaultValue:{value:"Outside Records"},description:"",name:"title",required:!1,type:{name:"string"}},hideTitle:{defaultValue:{value:"false"},description:"",name:"hideTitle",required:!1,type:{name:"boolean"}},removeBranding:{defaultValue:{value:"false"},description:"",name:"removeBranding",required:!1,type:{name:"boolean"}},removeRequestRecords:{defaultValue:{value:"false"},description:"",name:"removeRequestRecords",required:!1,type:{name:"boolean"}},allergiesProps:{defaultValue:null,description:"",name:"allergiesProps",required:!1,type:{name:"PatientAllergiesProps"}},careTeamProps:{defaultValue:null,description:"",name:"careTeamProps",required:!1,type:{name:"PatientCareTeamProps"}},conditionsProps:{defaultValue:null,description:"",name:"conditionsProps",required:!1,type:{name:"PatientConditionsProps"}},conditionsOutsideProps:{defaultValue:null,description:"",name:"conditionsOutsideProps",required:!1,type:{name:"PatientConditionsOutsideProps"}},documentsProps:{defaultValue:null,description:"",name:"documentsProps",required:!1,type:{name:"PatientDocumentProps"}},immunizationsProps:{defaultValue:null,description:"",name:"immunizationsProps",required:!1,type:{name:"PatientImmunizationsProps"}},medicationsProps:{defaultValue:null,description:"",name:"medicationsProps",required:!1,type:{name:"PatientMedicationsProps"}},medicationsOutsideProps:{defaultValue:null,description:"",name:"medicationsOutsideProps",required:!1,type:{name:"PatientMedicationsOutsideProps"}},observationsProps:{defaultValue:null,description:"",name:"observationsProps",required:!1,type:{name:"PatientObservationsProps"}},observationsOutsideProps:{defaultValue:null,description:"",name:"observationsOutsideProps",required:!1,type:{name:"PatientObservationsOutsideProps"}},timelineProps:{defaultValue:null,description:"",name:"timelineProps",required:!1,type:{name:"PatientTimelineProps"}}}}}catch{}export{gt as Z};
