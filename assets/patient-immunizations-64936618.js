var p=Object.defineProperty;var l=(e,i,t)=>i in e?p(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t;var s=(e,i,t)=>(l(e,typeof i!="symbol"?i+"":i,t),t);import{R as a,r as I}from"./index-6f814c40.js";import{c as f}from"./index-74f03c09.js";import{u as h}from"./resource-details-drawer-33652b0b.js";import{C as _}from"./coding-list-1d7c950f.js";import{w}from"./error-boundary-c91d4794.js";import{F as z,a9 as g,aa as y,a as C,w as v,s as D,ab as R,u as E}from"./patient-helper-faf3a61f.js";import{T}from"./table-48423089.js";import{V as N}from"./view-fhir-fe3267db.js";import"./_baseToString-2a4c2757.js";import{o as P}from"./sortBy-1cabbe82.js";import"./_baseClone-184e5c2b.js";import"./sortBy-649a17b3.js";import"./_equalByTag-5ee6784b.js";import"./_baseForOwn-54d22bab.js";import{i as b}from"./isEqual-ee96640d.js";import"./_createSet-014fa0cf.js";import{u as x}from"./details-card-1ac2a254.js";import{u as F}from"./patient-provider-8a86ab30.js";import{u as M}from"./use-breakpoints-37a2de56.js";const V=[{title:"Date",render:e=>a.createElement("div",{className:"group-hover:ctw-underline"},e.occurrence)},{title:"Description",dataIndex:"description"},{title:"CVX Code",dataIndex:"cvxCode"}];class k extends z{constructor(){super(...arguments);s(this,"kind","Immunization")}get description(){return this.resource.vaccineCode.text}get cvxCode(){const t=g(y,this.resource.vaccineCode);return t==null?void 0:t.code}get occurrence(){return this.resource.occurrenceDateTime?C(this.resource.occurrenceDateTime):this.resource.occurrenceString}}const n=e=>{const i=e.map(o=>new k(o));return x(i,(o,r)=>b(c(o),c(r)))},c=e=>[e.description,e.cvxCode,e.occurrence];try{n.displayName="applyImmunizationFilters",n.__docgenInfo={description:"",displayName:"applyImmunizationFilters",props:{}}}catch{}function S(){return F(R,[],v(async(e,i)=>{try{const{bundle:t,resources:o}=await D("Immunization",e,{patientUPID:i.UPID});return P(n(o),[r=>r.occurrence??""],["desc"])}catch(t){throw new Error(`Failed fetching immunization information for patient: ${t}`)}},"req.patient_immunizations"))}const q=({record:e})=>a.createElement(N,{name:"Immunization Resource",resource:e.resource});function B({className:e}){const i=I.useRef(null),t=M(i),{featureFlags:o}=E(),r=S(),u=h({header:d=>d.description,details:L});return a.createElement("div",{ref:i,"data-zus-telemetry-namespace":"Immunizations",className:f("ctw-patient-immunizations ctw-scrollable-pass-through-height ctw-bg-white",e,{"ctw-stacked":t.sm})},a.createElement(T,{RowActions:o!=null&&o.enableViewFhirButton?q:void 0,stacked:t.sm,isLoading:r.isLoading,records:r.data??[],columns:V,handleRowClick:u}))}const m=w(B,"PatientImmunizations"),L=e=>[{label:"Date",value:e.occurrence},{label:"Description",value:e.description},{label:"Vaccine Code",value:e.resource.vaccineCode.coding?a.createElement(_,{codings:e.resource.vaccineCode.coding}):void 0}];try{m.displayName="PatientImmunizations",m.__docgenInfo={description:"",displayName:"PatientImmunizations",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{m as P};
