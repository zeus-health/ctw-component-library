import{R as u,r as h}from"./index-6f814c40.js";import{c as T}from"./index-74f03c09.js";import{u as _}from"./resource-details-drawer-deb14cf2.js";import{V as R}from"./view-fhir-02d4dcb7.js";import{F as w,a as C,G as m,c as p,w as V,H as P,s as q,I as b,u as E}from"./patient-helper-9a33fc30.js";import{T as v}from"./table-0bb423c6.js";import{c as f,u as D}from"./patient-provider-be0cc451.js";import"./_baseToString-ba0098b0.js";import{o as S}from"./sortBy-64fcb484.js";import"./_baseClone-0c3bfcab.js";import"./sortBy-3860efd7.js";import"./_equalByTag-3aa7c076.js";import"./_baseForOwn-56487e0e.js";import{i as I}from"./isEqual-38ff4822.js";import"./_createSet-3c80ad01.js";import{u as N}from"./uniqWith-ade993ae.js";import{u as B}from"./use-breakpoints-582ef4c1.js";const c=(t=!0)=>{const r=[{widthPercent:20,minWidth:150,title:"Start Date",render:e=>u.createElement("div",null,e.periodStart)},{widthPercent:20,minWidth:150,title:"Practitioner",render:e=>u.createElement("div",null,e.includedPerformer)},{widthPercent:20,minWidth:150,title:"Role",render:e=>u.createElement("div",null,e.role)},{widthPercent:20,minWidth:150,title:"Qualification",render:e=>u.createElement("div",null,e.practitionerQualification)}];return t&&r.push({widthPercent:20,minWidth:150,render:e=>u.createElement(R,{name:"CareTeam Resource",resource:e.resource})}),r};try{c.displayName="patientCareTeamColumns",c.__docgenInfo={description:"",displayName:"patientCareTeamColumns",props:{}}}catch{}class Q extends w{get status(){return this.resource.status}get periodStart(){var r;return C((r=this.resource.period)==null?void 0:r.start)}get periodEnd(){var r;return(r=this.resource.period)==null?void 0:r.end}get includedPerformer(){var i,n,a,o,s,d;const r=(a=(n=(i=this.resource.participant)==null?void 0:i[0])==null?void 0:n.member)==null?void 0:a.reference,e=m("Practitioner",this.resource.contained,this.includedResources,r);return e?new f(e).fullName:(d=(s=(o=this.resource.participant)==null?void 0:o[0])==null?void 0:s.member)==null?void 0:d.display}get careTeamTelecom(){var r;return(r=this.resource.telecom)==null?void 0:r[0].value}get managingOrganization(){var r,e;return(e=(r=this.resource.participant)==null?void 0:r[0].onBehalfOf)==null?void 0:e.display}get role(){var r,e;return p((e=(r=this.resource.participant)==null?void 0:r[0].role)==null?void 0:e[0])}get practitionerQualification(){var i,n,a,o;const r=(a=(n=(i=this.resource.participant)==null?void 0:i[0])==null?void 0:n.member)==null?void 0:a.reference,e=m("Practitioner",this.resource.contained,this.includedResources,r);if(e)return p((o=new f(e).resource.qualification)==null?void 0:o[0].code)}}const F=(t,r)=>{const i=t.map(a=>new Q(a,r)).filter(a=>!a.periodEnd);return N(i,(a,o)=>I(g(a),g(o)))},g=t=>[t.status,t.periodStart,t.role,t.practitionerQualification,t.includedPerformer];function M(){return D(P,[],V(async(t,r)=>{try{const{bundle:e,resources:i}=await q("CareTeam",t,{patientUPID:r.UPID,_include:"CareTeam:participant"}),n=b(e);return S(F(i,n),[a=>{var o;return((o=a.resource.period)==null?void 0:o.start)||""}],["desc"])}catch(e){throw new Error(`Failed fetching care team information for patient: ${e}`)}},"req.patient_care_team",[]))}function y({className:t,includeViewFhirResource:r}){const e=h.useRef(null),i=B(e),{featureFlags:n}=E(),a=M(),o=_({header:s=>s.periodStart,details:l});return u.createElement("div",{ref:e,className:T("ctw-border ctw-border-solid ctw-border-divider-light ctw-bg-white",t,{"ctw-stacked":i.sm})},u.createElement(v,{stacked:i.sm,isLoading:a.isLoading,records:a.data??[],columns:c(n==null?void 0:n.enableViewFhirButton),handleRowClick:o}))}const l=t=>[{label:"Organization",value:t.managingOrganization},{label:"Practitioner",value:t.includedPerformer},{label:"CareTeam Telecom",value:t.careTeamTelecom},{label:"Role",value:t.role},{label:"Status",value:t.status}];try{y.displayName="PatientCareTeam",y.__docgenInfo={description:"",displayName:"PatientCareTeam",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},includeViewFhirResource:{defaultValue:null,description:"",name:"includeViewFhirResource",required:!1,type:{name:"boolean"}}}}}catch{}try{l.displayName="careTeamData",l.__docgenInfo={description:"",displayName:"careTeamData",props:{status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"string | undefined"}},periodStart:{defaultValue:null,description:"",name:"periodStart",required:!0,type:{name:"string | undefined"}},periodEnd:{defaultValue:null,description:"",name:"periodEnd",required:!0,type:{name:"string | undefined"}},includedPerformer:{defaultValue:null,description:"",name:"includedPerformer",required:!0,type:{name:"string | undefined"}},careTeamTelecom:{defaultValue:null,description:"",name:"careTeamTelecom",required:!0,type:{name:"string | undefined"}},managingOrganization:{defaultValue:null,description:"",name:"managingOrganization",required:!0,type:{name:"string | undefined"}},role:{defaultValue:null,description:"",name:"role",required:!0,type:{name:"string | undefined"}},practitionerQualification:{defaultValue:null,description:"",name:"practitionerQualification",required:!0,type:{name:"string | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"CareTeam"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}export{y as P};
