var hn=Object.defineProperty;var dn=(n,a,s)=>a in n?hn(n,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[a]=s;var Rr=(n,a,s)=>(dn(n,typeof a!="symbol"?a+"":a,s),s);import{R as w,r as $e}from"./index-6f814c40.js";import{F as zt,D as zr,f as gn}from"./details-card-fe427194.js";import{m as yn,q as En}from"./request-3ce689a7.js";import{c as Ar}from"./index-74f03c09.js";import"./_baseToString-4993715b.js";import{p as xn,d as vn,e as yt,_ as Wr,f as An,o as wn}from"./sortBy-df4456c4.js";import"./_baseClone-25b1595e.js";import{w as Nn,v as Tn}from"./sortBy-d677d734.js";import{A as bn,b as tt}from"./_equalByTag-aaf39779.js";import{t as _n,b as Dn,k as Sn,h as Fr}from"./_baseForOwn-d8306f34.js";import"./_createSet-12ef9b81.js";import{i as ne}from"./isEmpty-bcd6f1a3.js";import{d as wr}from"./values-8fd0e344.js";import{_ as Cn,t as Yr,v as Rt,x as jr,y as Rn,z as Or,A as Fn,w as On,B as In,u as Xr,F as Bn,D as Ln,c as Pn}from"./patient-helper-c33b7ee4.js";import{W as Pt,g as Ir,X as Mn,D as bt}from"./drawer-7774c361.js";import{a as Un,b as kn,s as Vn}from"./patient-provider-d04201ad.js";import{L as Br}from"./loading-c41f709e.js";var Qr={prefix:"far",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16H224v80c0 17.7 14.3 32 32 32h80V448c0 8.8-7.2 16-16 16H64zM64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0H64zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24H264c13.3 0 24-10.7 24-24s-10.7-24-24-24H120zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24H264c13.3 0 24-10.7 24-24s-10.7-24-24-24H120z"]};const At=({onClick:n,text:a})=>w.createElement("button",{type:"button",className:"ctw-btn-clear ctw-link ctw-flex ctw-items-center ctw-space-x-2",onClick:n},w.createElement(zt,{icon:Qr,className:"ctw-h-3"}),w.createElement("div",null,a));try{At.displayName="DocumentButton",At.__docgenInfo={description:"",displayName:"DocumentButton",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLButtonElement>"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}}}catch{}var Hn=yn(),Wt={},It={};It.byteLength=Gn;It.toByteArray=Wn;It.fromByteArray=Xn;var nt=[],We=[],$n=typeof Uint8Array<"u"?Uint8Array:Array,Mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var gt=0,qn=Mt.length;gt<qn;++gt)nt[gt]=Mt[gt],We[Mt.charCodeAt(gt)]=gt;We["-".charCodeAt(0)]=62;We["_".charCodeAt(0)]=63;function Jr(n){var a=n.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=n.indexOf("=");s===-1&&(s=a);var l=s===a?0:4-s%4;return[s,l]}function Gn(n){var a=Jr(n),s=a[0],l=a[1];return(s+l)*3/4-l}function zn(n,a,s){return(a+s)*3/4-s}function Wn(n){var a,s=Jr(n),l=s[0],f=s[1],y=new $n(zn(n,l,f)),E=0,m=f>0?l-4:l,b;for(b=0;b<m;b+=4)a=We[n.charCodeAt(b)]<<18|We[n.charCodeAt(b+1)]<<12|We[n.charCodeAt(b+2)]<<6|We[n.charCodeAt(b+3)],y[E++]=a>>16&255,y[E++]=a>>8&255,y[E++]=a&255;return f===2&&(a=We[n.charCodeAt(b)]<<2|We[n.charCodeAt(b+1)]>>4,y[E++]=a&255),f===1&&(a=We[n.charCodeAt(b)]<<10|We[n.charCodeAt(b+1)]<<4|We[n.charCodeAt(b+2)]>>2,y[E++]=a>>8&255,y[E++]=a&255),y}function Yn(n){return nt[n>>18&63]+nt[n>>12&63]+nt[n>>6&63]+nt[n&63]}function jn(n,a,s){for(var l,f=[],y=a;y<s;y+=3)l=(n[y]<<16&16711680)+(n[y+1]<<8&65280)+(n[y+2]&255),f.push(Yn(l));return f.join("")}function Xn(n){for(var a,s=n.length,l=s%3,f=[],y=16383,E=0,m=s-l;E<m;E+=y)f.push(jn(n,E,E+y>m?m:E+y));return l===1?(a=n[s-1],f.push(nt[a>>2]+nt[a<<4&63]+"==")):l===2&&(a=(n[s-2]<<8)+n[s-1],f.push(nt[a>>10]+nt[a>>4&63]+nt[a<<2&63]+"=")),f.join("")}var Nr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Nr.read=function(n,a,s,l,f){var y,E,m=f*8-l-1,b=(1<<m)-1,U=b>>1,$=-7,W=s?f-1:0,se=s?-1:1,ae=n[a+W];for(W+=se,y=ae&(1<<-$)-1,ae>>=-$,$+=m;$>0;y=y*256+n[a+W],W+=se,$-=8);for(E=y&(1<<-$)-1,y>>=-$,$+=l;$>0;E=E*256+n[a+W],W+=se,$-=8);if(y===0)y=1-U;else{if(y===b)return E?NaN:(ae?-1:1)*(1/0);E=E+Math.pow(2,l),y=y-U}return(ae?-1:1)*E*Math.pow(2,y-l)};Nr.write=function(n,a,s,l,f,y){var E,m,b,U=y*8-f-1,$=(1<<U)-1,W=$>>1,se=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,ae=l?0:y-1,me=l?1:-1,Re=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(m=isNaN(a)?1:0,E=$):(E=Math.floor(Math.log(a)/Math.LN2),a*(b=Math.pow(2,-E))<1&&(E--,b*=2),E+W>=1?a+=se/b:a+=se*Math.pow(2,1-W),a*b>=2&&(E++,b/=2),E+W>=$?(m=0,E=$):E+W>=1?(m=(a*b-1)*Math.pow(2,f),E=E+W):(m=a*Math.pow(2,W-1)*Math.pow(2,f),E=0));f>=8;n[s+ae]=m&255,ae+=me,m/=256,f-=8);for(E=E<<f|m,U+=f;U>0;n[s+ae]=E&255,ae+=me,E/=256,U-=8);n[s+ae-me]|=Re*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){var a=It,s=Nr,l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=m,n.SlowBuffer=oe,n.INSPECT_MAX_BYTES=50;var f=2147483647;n.kMaxLength=f,m.TYPED_ARRAY_SUPPORT=y(),!m.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function y(){try{var o=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(o,r),o.foo()===42}catch{return!1}}Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}});function E(o){if(o>f)throw new RangeError('The value "'+o+'" is invalid for option "size"');var r=new Uint8Array(o);return Object.setPrototypeOf(r,m.prototype),r}function m(o,r,i){if(typeof o=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return W(o)}return b(o,r,i)}m.poolSize=8192;function b(o,r,i){if(typeof o=="string")return se(o,r);if(ArrayBuffer.isView(o))return me(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(O(o,ArrayBuffer)||o&&O(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(O(o,SharedArrayBuffer)||o&&O(o.buffer,SharedArrayBuffer)))return Re(o,r,i);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var u=o.valueOf&&o.valueOf();if(u!=null&&u!==o)return m.from(u,r,i);var x=je(o);if(x)return x;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return m.from(o[Symbol.toPrimitive]("string"),r,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}m.from=function(o,r,i){return b(o,r,i)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array);function U(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function $(o,r,i){return U(o),o<=0?E(o):r!==void 0?typeof i=="string"?E(o).fill(r,i):E(o).fill(r):E(o)}m.alloc=function(o,r,i){return $(o,r,i)};function W(o){return U(o),E(o<0?0:A(o)|0)}m.allocUnsafe=function(o){return W(o)},m.allocUnsafeSlow=function(o){return W(o)};function se(o,r){if((typeof r!="string"||r==="")&&(r="utf8"),!m.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i=qe(o,r)|0,u=E(i),x=u.write(o,r);return x!==i&&(u=u.slice(0,x)),u}function ae(o){for(var r=o.length<0?0:A(o.length)|0,i=E(r),u=0;u<r;u+=1)i[u]=o[u]&255;return i}function me(o){if(O(o,Uint8Array)){var r=new Uint8Array(o);return Re(r.buffer,r.byteOffset,r.byteLength)}return ae(o)}function Re(o,r,i){if(r<0||o.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<r+(i||0))throw new RangeError('"length" is outside of buffer bounds');var u;return r===void 0&&i===void 0?u=new Uint8Array(o):i===void 0?u=new Uint8Array(o,r):u=new Uint8Array(o,r,i),Object.setPrototypeOf(u,m.prototype),u}function je(o){if(m.isBuffer(o)){var r=A(o.length)|0,i=E(r);return i.length===0||o.copy(i,0,0,r),i}if(o.length!==void 0)return typeof o.length!="number"||it(o.length)?E(0):ae(o);if(o.type==="Buffer"&&Array.isArray(o.data))return ae(o.data)}function A(o){if(o>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return o|0}function oe(o){return+o!=o&&(o=0),m.alloc(+o)}m.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==m.prototype},m.compare=function(r,i){if(O(r,Uint8Array)&&(r=m.from(r,r.offset,r.byteLength)),O(i,Uint8Array)&&(i=m.from(i,i.offset,i.byteLength)),!m.isBuffer(r)||!m.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===i)return 0;for(var u=r.length,x=i.length,N=0,T=Math.min(u,x);N<T;++N)if(r[N]!==i[N]){u=r[N],x=i[N];break}return u<x?-1:x<u?1:0},m.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(r,i){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return m.alloc(0);var u;if(i===void 0)for(i=0,u=0;u<r.length;++u)i+=r[u].length;var x=m.allocUnsafe(i),N=0;for(u=0;u<r.length;++u){var T=r[u];if(O(T,Uint8Array))N+T.length>x.length?m.from(T).copy(x,N):Uint8Array.prototype.set.call(x,T,N);else if(m.isBuffer(T))T.copy(x,N);else throw new TypeError('"list" argument must be an Array of Buffers');N+=T.length}return x};function qe(o,r){if(m.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||O(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);var i=o.length,u=arguments.length>2&&arguments[2]===!0;if(!u&&i===0)return 0;for(var x=!1;;)switch(r){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return F(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return ie(o).length;default:if(x)return u?-1:F(o).length;r=(""+r).toLowerCase(),x=!0}}m.byteLength=qe;function Y(o,r,i){var u=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,r>>>=0,i<=r))return"";for(o||(o="utf8");;)switch(o){case"hex":return Me(this,r,i);case"utf8":case"utf-8":return ye(this,r,i);case"ascii":return Le(this,r,i);case"latin1":case"binary":return Pe(this,r,i);case"base64":return ue(this,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,r,i);default:if(u)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),u=!0}}m.prototype._isBuffer=!0;function ce(o,r,i){var u=o[r];o[r]=o[i],o[i]=u}m.prototype.swap16=function(){var r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<r;i+=2)ce(this,i,i+1);return this},m.prototype.swap32=function(){var r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<r;i+=4)ce(this,i,i+3),ce(this,i+1,i+2);return this},m.prototype.swap64=function(){var r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<r;i+=8)ce(this,i,i+7),ce(this,i+1,i+6),ce(this,i+2,i+5),ce(this,i+3,i+4);return this},m.prototype.toString=function(){var r=this.length;return r===0?"":arguments.length===0?ye(this,0,r):Y.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(r){if(!m.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:m.compare(this,r)===0},m.prototype.inspect=function(){var r="",i=n.INSPECT_MAX_BYTES;return r=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(r+=" ... "),"<Buffer "+r+">"},l&&(m.prototype[l]=m.prototype.inspect),m.prototype.compare=function(r,i,u,x,N){if(O(r,Uint8Array)&&(r=m.from(r,r.offset,r.byteLength)),!m.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(i===void 0&&(i=0),u===void 0&&(u=r?r.length:0),x===void 0&&(x=0),N===void 0&&(N=this.length),i<0||u>r.length||x<0||N>this.length)throw new RangeError("out of range index");if(x>=N&&i>=u)return 0;if(x>=N)return-1;if(i>=u)return 1;if(i>>>=0,u>>>=0,x>>>=0,N>>>=0,this===r)return 0;for(var T=N-x,H=u-i,z=Math.min(T,H),S=this.slice(x,N),C=r.slice(i,u),J=0;J<z;++J)if(S[J]!==C[J]){T=S[J],H=C[J];break}return T<H?-1:H<T?1:0};function he(o,r,i,u,x){if(o.length===0)return-1;if(typeof i=="string"?(u=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,it(i)&&(i=x?0:o.length-1),i<0&&(i=o.length+i),i>=o.length){if(x)return-1;i=o.length-1}else if(i<0)if(x)i=0;else return-1;if(typeof r=="string"&&(r=m.from(r,u)),m.isBuffer(r))return r.length===0?-1:j(o,r,i,u,x);if(typeof r=="number")return r=r&255,typeof Uint8Array.prototype.indexOf=="function"?x?Uint8Array.prototype.indexOf.call(o,r,i):Uint8Array.prototype.lastIndexOf.call(o,r,i):j(o,[r],i,u,x);throw new TypeError("val must be string, number or Buffer")}function j(o,r,i,u,x){var N=1,T=o.length,H=r.length;if(u!==void 0&&(u=String(u).toLowerCase(),u==="ucs2"||u==="ucs-2"||u==="utf16le"||u==="utf-16le")){if(o.length<2||r.length<2)return-1;N=2,T/=2,H/=2,i/=2}function z(Ve,Ge){return N===1?Ve[Ge]:Ve.readUInt16BE(Ge*N)}var S;if(x){var C=-1;for(S=i;S<T;S++)if(z(o,S)===z(r,C===-1?0:S-C)){if(C===-1&&(C=S),S-C+1===H)return C*N}else C!==-1&&(S-=S-C),C=-1}else for(i+H>T&&(i=T-H),S=i;S>=0;S--){for(var J=!0,fe=0;fe<H;fe++)if(z(o,S+fe)!==z(r,fe)){J=!1;break}if(J)return S}return-1}m.prototype.includes=function(r,i,u){return this.indexOf(r,i,u)!==-1},m.prototype.indexOf=function(r,i,u){return he(this,r,i,u,!0)},m.prototype.lastIndexOf=function(r,i,u){return he(this,r,i,u,!1)};function Fe(o,r,i,u){i=Number(i)||0;var x=o.length-i;u?(u=Number(u),u>x&&(u=x)):u=x;var N=r.length;u>N/2&&(u=N/2);for(var T=0;T<u;++T){var H=parseInt(r.substr(T*2,2),16);if(it(H))return T;o[i+T]=H}return T}function Oe(o,r,i,u){return M(F(r,o.length-i),o,i,u)}function Ie(o,r,i,u){return M(Ue(r),o,i,u)}function Be(o,r,i,u){return M(ie(r),o,i,u)}function be(o,r,i,u){return M(Ae(r,o.length-i),o,i,u)}m.prototype.write=function(r,i,u,x){if(i===void 0)x="utf8",u=this.length,i=0;else if(u===void 0&&typeof i=="string")x=i,u=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(u)?(u=u>>>0,x===void 0&&(x="utf8")):(x=u,u=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var N=this.length-i;if((u===void 0||u>N)&&(u=N),r.length>0&&(u<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");x||(x="utf8");for(var T=!1;;)switch(x){case"hex":return Fe(this,r,i,u);case"utf8":case"utf-8":return Oe(this,r,i,u);case"ascii":case"latin1":case"binary":return Ie(this,r,i,u);case"base64":return Be(this,r,i,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,r,i,u);default:if(T)throw new TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),T=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ue(o,r,i){return r===0&&i===o.length?a.fromByteArray(o):a.fromByteArray(o.slice(r,i))}function ye(o,r,i){i=Math.min(o.length,i);for(var u=[],x=r;x<i;){var N=o[x],T=null,H=N>239?4:N>223?3:N>191?2:1;if(x+H<=i){var z,S,C,J;switch(H){case 1:N<128&&(T=N);break;case 2:z=o[x+1],(z&192)===128&&(J=(N&31)<<6|z&63,J>127&&(T=J));break;case 3:z=o[x+1],S=o[x+2],(z&192)===128&&(S&192)===128&&(J=(N&15)<<12|(z&63)<<6|S&63,J>2047&&(J<55296||J>57343)&&(T=J));break;case 4:z=o[x+1],S=o[x+2],C=o[x+3],(z&192)===128&&(S&192)===128&&(C&192)===128&&(J=(N&15)<<18|(z&63)<<12|(S&63)<<6|C&63,J>65535&&J<1114112&&(T=J))}}T===null?(T=65533,H=1):T>65535&&(T-=65536,u.push(T>>>10&1023|55296),T=56320|T&1023),u.push(T),x+=H}return ve(u)}var Ee=4096;function ve(o){var r=o.length;if(r<=Ee)return String.fromCharCode.apply(String,o);for(var i="",u=0;u<r;)i+=String.fromCharCode.apply(String,o.slice(u,u+=Ee));return i}function Le(o,r,i){var u="";i=Math.min(o.length,i);for(var x=r;x<i;++x)u+=String.fromCharCode(o[x]&127);return u}function Pe(o,r,i){var u="";i=Math.min(o.length,i);for(var x=r;x<i;++x)u+=String.fromCharCode(o[x]);return u}function Me(o,r,i){var u=o.length;(!r||r<0)&&(r=0),(!i||i<0||i>u)&&(i=u);for(var x="",N=r;N<i;++N)x+=ct[o[N]];return x}function _e(o,r,i){for(var u=o.slice(r,i),x="",N=0;N<u.length-1;N+=2)x+=String.fromCharCode(u[N]+u[N+1]*256);return x}m.prototype.slice=function(r,i){var u=this.length;r=~~r,i=i===void 0?u:~~i,r<0?(r+=u,r<0&&(r=0)):r>u&&(r=u),i<0?(i+=u,i<0&&(i=0)):i>u&&(i=u),i<r&&(i=r);var x=this.subarray(r,i);return Object.setPrototypeOf(x,m.prototype),x};function Z(o,r,i){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+r>i)throw new RangeError("Trying to access beyond buffer length")}m.prototype.readUintLE=m.prototype.readUIntLE=function(r,i,u){r=r>>>0,i=i>>>0,u||Z(r,i,this.length);for(var x=this[r],N=1,T=0;++T<i&&(N*=256);)x+=this[r+T]*N;return x},m.prototype.readUintBE=m.prototype.readUIntBE=function(r,i,u){r=r>>>0,i=i>>>0,u||Z(r,i,this.length);for(var x=this[r+--i],N=1;i>0&&(N*=256);)x+=this[r+--i]*N;return x},m.prototype.readUint8=m.prototype.readUInt8=function(r,i){return r=r>>>0,i||Z(r,1,this.length),this[r]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(r,i){return r=r>>>0,i||Z(r,2,this.length),this[r]|this[r+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(r,i){return r=r>>>0,i||Z(r,2,this.length),this[r]<<8|this[r+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(r,i){return r=r>>>0,i||Z(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(r,i){return r=r>>>0,i||Z(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])},m.prototype.readIntLE=function(r,i,u){r=r>>>0,i=i>>>0,u||Z(r,i,this.length);for(var x=this[r],N=1,T=0;++T<i&&(N*=256);)x+=this[r+T]*N;return N*=128,x>=N&&(x-=Math.pow(2,8*i)),x},m.prototype.readIntBE=function(r,i,u){r=r>>>0,i=i>>>0,u||Z(r,i,this.length);for(var x=i,N=1,T=this[r+--x];x>0&&(N*=256);)T+=this[r+--x]*N;return N*=128,T>=N&&(T-=Math.pow(2,8*i)),T},m.prototype.readInt8=function(r,i){return r=r>>>0,i||Z(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]},m.prototype.readInt16LE=function(r,i){r=r>>>0,i||Z(r,2,this.length);var u=this[r]|this[r+1]<<8;return u&32768?u|4294901760:u},m.prototype.readInt16BE=function(r,i){r=r>>>0,i||Z(r,2,this.length);var u=this[r+1]|this[r]<<8;return u&32768?u|4294901760:u},m.prototype.readInt32LE=function(r,i){return r=r>>>0,i||Z(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},m.prototype.readInt32BE=function(r,i){return r=r>>>0,i||Z(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},m.prototype.readFloatLE=function(r,i){return r=r>>>0,i||Z(r,4,this.length),s.read(this,r,!0,23,4)},m.prototype.readFloatBE=function(r,i){return r=r>>>0,i||Z(r,4,this.length),s.read(this,r,!1,23,4)},m.prototype.readDoubleLE=function(r,i){return r=r>>>0,i||Z(r,8,this.length),s.read(this,r,!0,52,8)},m.prototype.readDoubleBE=function(r,i){return r=r>>>0,i||Z(r,8,this.length),s.read(this,r,!1,52,8)};function P(o,r,i,u,x,N){if(!m.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>x||r<N)throw new RangeError('"value" argument is out of bounds');if(i+u>o.length)throw new RangeError("Index out of range")}m.prototype.writeUintLE=m.prototype.writeUIntLE=function(r,i,u,x){if(r=+r,i=i>>>0,u=u>>>0,!x){var N=Math.pow(2,8*u)-1;P(this,r,i,u,N,0)}var T=1,H=0;for(this[i]=r&255;++H<u&&(T*=256);)this[i+H]=r/T&255;return i+u},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(r,i,u,x){if(r=+r,i=i>>>0,u=u>>>0,!x){var N=Math.pow(2,8*u)-1;P(this,r,i,u,N,0)}var T=u-1,H=1;for(this[i+T]=r&255;--T>=0&&(H*=256);)this[i+T]=r/H&255;return i+u},m.prototype.writeUint8=m.prototype.writeUInt8=function(r,i,u){return r=+r,i=i>>>0,u||P(this,r,i,1,255,0),this[i]=r&255,i+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(r,i,u){return r=+r,i=i>>>0,u||P(this,r,i,2,65535,0),this[i]=r&255,this[i+1]=r>>>8,i+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(r,i,u){return r=+r,i=i>>>0,u||P(this,r,i,2,65535,0),this[i]=r>>>8,this[i+1]=r&255,i+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(r,i,u){return r=+r,i=i>>>0,u||P(this,r,i,4,4294967295,0),this[i+3]=r>>>24,this[i+2]=r>>>16,this[i+1]=r>>>8,this[i]=r&255,i+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(r,i,u){return r=+r,i=i>>>0,u||P(this,r,i,4,4294967295,0),this[i]=r>>>24,this[i+1]=r>>>16,this[i+2]=r>>>8,this[i+3]=r&255,i+4},m.prototype.writeIntLE=function(r,i,u,x){if(r=+r,i=i>>>0,!x){var N=Math.pow(2,8*u-1);P(this,r,i,u,N-1,-N)}var T=0,H=1,z=0;for(this[i]=r&255;++T<u&&(H*=256);)r<0&&z===0&&this[i+T-1]!==0&&(z=1),this[i+T]=(r/H>>0)-z&255;return i+u},m.prototype.writeIntBE=function(r,i,u,x){if(r=+r,i=i>>>0,!x){var N=Math.pow(2,8*u-1);P(this,r,i,u,N-1,-N)}var T=u-1,H=1,z=0;for(this[i+T]=r&255;--T>=0&&(H*=256);)r<0&&z===0&&this[i+T+1]!==0&&(z=1),this[i+T]=(r/H>>0)-z&255;return i+u},m.prototype.writeInt8=function(r,i,u){return r=+r,i=i>>>0,u||P(this,r,i,1,127,-128),r<0&&(r=255+r+1),this[i]=r&255,i+1},m.prototype.writeInt16LE=function(r,i,u){return r=+r,i=i>>>0,u||P(this,r,i,2,32767,-32768),this[i]=r&255,this[i+1]=r>>>8,i+2},m.prototype.writeInt16BE=function(r,i,u){return r=+r,i=i>>>0,u||P(this,r,i,2,32767,-32768),this[i]=r>>>8,this[i+1]=r&255,i+2},m.prototype.writeInt32LE=function(r,i,u){return r=+r,i=i>>>0,u||P(this,r,i,4,2147483647,-2147483648),this[i]=r&255,this[i+1]=r>>>8,this[i+2]=r>>>16,this[i+3]=r>>>24,i+4},m.prototype.writeInt32BE=function(r,i,u){return r=+r,i=i>>>0,u||P(this,r,i,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[i]=r>>>24,this[i+1]=r>>>16,this[i+2]=r>>>8,this[i+3]=r&255,i+4};function ut(o,r,i,u,x,N){if(i+u>o.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function le(o,r,i,u,x){return r=+r,i=i>>>0,x||ut(o,r,i,4),s.write(o,r,i,u,23,4),i+4}m.prototype.writeFloatLE=function(r,i,u){return le(this,r,i,!0,u)},m.prototype.writeFloatBE=function(r,i,u){return le(this,r,i,!1,u)};function lt(o,r,i,u,x){return r=+r,i=i>>>0,x||ut(o,r,i,8),s.write(o,r,i,u,52,8),i+8}m.prototype.writeDoubleLE=function(r,i,u){return lt(this,r,i,!0,u)},m.prototype.writeDoubleBE=function(r,i,u){return lt(this,r,i,!1,u)},m.prototype.copy=function(r,i,u,x){if(!m.isBuffer(r))throw new TypeError("argument should be a Buffer");if(u||(u=0),!x&&x!==0&&(x=this.length),i>=r.length&&(i=r.length),i||(i=0),x>0&&x<u&&(x=u),x===u||r.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),r.length-i<x-u&&(x=r.length-i+u);var N=x-u;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,u,x):Uint8Array.prototype.set.call(r,this.subarray(u,x),i),N},m.prototype.fill=function(r,i,u,x){if(typeof r=="string"){if(typeof i=="string"?(x=i,i=0,u=this.length):typeof u=="string"&&(x=u,u=this.length),x!==void 0&&typeof x!="string")throw new TypeError("encoding must be a string");if(typeof x=="string"&&!m.isEncoding(x))throw new TypeError("Unknown encoding: "+x);if(r.length===1){var N=r.charCodeAt(0);(x==="utf8"&&N<128||x==="latin1")&&(r=N)}}else typeof r=="number"?r=r&255:typeof r=="boolean"&&(r=Number(r));if(i<0||this.length<i||this.length<u)throw new RangeError("Out of range index");if(u<=i)return this;i=i>>>0,u=u===void 0?this.length:u>>>0,r||(r=0);var T;if(typeof r=="number")for(T=i;T<u;++T)this[T]=r;else{var H=m.isBuffer(r)?r:m.from(r,x),z=H.length;if(z===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(T=0;T<u-i;++T)this[T+i]=H[T%z]}return this};var ee=/[^+/0-9A-Za-z-_]/g;function R(o){if(o=o.split("=")[0],o=o.trim().replace(ee,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function F(o,r){r=r||1/0;for(var i,u=o.length,x=null,N=[],T=0;T<u;++T){if(i=o.charCodeAt(T),i>55295&&i<57344){if(!x){if(i>56319){(r-=3)>-1&&N.push(239,191,189);continue}else if(T+1===u){(r-=3)>-1&&N.push(239,191,189);continue}x=i;continue}if(i<56320){(r-=3)>-1&&N.push(239,191,189),x=i;continue}i=(x-55296<<10|i-56320)+65536}else x&&(r-=3)>-1&&N.push(239,191,189);if(x=null,i<128){if((r-=1)<0)break;N.push(i)}else if(i<2048){if((r-=2)<0)break;N.push(i>>6|192,i&63|128)}else if(i<65536){if((r-=3)<0)break;N.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((r-=4)<0)break;N.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return N}function Ue(o){for(var r=[],i=0;i<o.length;++i)r.push(o.charCodeAt(i)&255);return r}function Ae(o,r){for(var i,u,x,N=[],T=0;T<o.length&&!((r-=2)<0);++T)i=o.charCodeAt(T),u=i>>8,x=i%256,N.push(x),N.push(u);return N}function ie(o){return a.toByteArray(R(o))}function M(o,r,i,u){for(var x=0;x<u&&!(x+i>=r.length||x>=o.length);++x)r[x+i]=o[x];return x}function O(o,r){return o instanceof r||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===r.name}function it(o){return o!==o}var ct=function(){for(var o="0123456789abcdef",r=new Array(256),i=0;i<16;++i)for(var u=i*16,x=0;x<16;++x)r[u+x]=o[i]+o[x];return r}()})(Wt);var v={};(function(n){var a=n;(function(s){function l(e){var t=Array.prototype.slice,c=e.length,h=function(d,I){return function(){return I.apply(this,d.concat(t.call(arguments)))}},p=function(){var d=t.call(arguments);return d.length<c?h(d,p):e.apply(this,t.apply(arguments,[0,c]))};return p}var f=function(e,t){for(var c=0;c<t.length;c+=1)e(t[c],c,t)},y=function(e,t,c){var h=t;return f(function(p,d){h=e(h,p,d)},c),h},E=function(e,t){var c=new Array(t.length);return f(function(h,p){c[p]=e(h)},t),c},m=function(e,t){var c=[];return f(function(h,p){e(h,p)&&c.push(h)},t),c},b=function(e,t){for(var c=0;c<e.length;c+=1)if(e[c]===t)return!0;return!1};function U(e){return function(){return e}}function $(e){return e.toString()}var W=function(e,t){return t.join(e)},se=function(e,t,c){return e+c+t},ae=Array.prototype.concat,me=32767;function Re(e){for(var t=[],c=0;c<e.length;c+=me){var h=e.slice(c,c+me);t=ae.apply(t,h)}return t}function je(e,t){for(var c=Object(e),h=1;h<arguments.length;h++){var p=arguments[h];if(p!=null)for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(c[d]=p[d])}return c}A.prototype=new Object,A.prototype.constructor=A,A.superclass=Object.prototype;function A(){this.init()}A.prototype.init=function(){this.reduceActions=[],this.reduceActions[3]=function(e){return new Fe(e[0],e[2])},this.reduceActions[5]=function(e){return new Oe(e[0],e[2])},this.reduceActions[7]=function(e){return new Ie(e[0],e[2])},this.reduceActions[8]=function(e){return new Be(e[0],e[2])},this.reduceActions[10]=function(e){return new be(e[0],e[2])},this.reduceActions[11]=function(e){return new ue(e[0],e[2])},this.reduceActions[12]=function(e){return new ye(e[0],e[2])},this.reduceActions[13]=function(e){return new Ee(e[0],e[2])},this.reduceActions[15]=function(e){return new ve(e[0],e[2])},this.reduceActions[16]=function(e){return new Le(e[0],e[2])},this.reduceActions[18]=function(e){return new Pe(e[0],e[2])},this.reduceActions[19]=function(e){return new Me(e[0],e[2])},this.reduceActions[20]=function(e){return new _e(e[0],e[2])},this.reduceActions[22]=function(e){return new he(e[1])},this.reduceActions[24]=function(e){return new Z(e[0],e[2])},this.reduceActions[25]=function(e){return new P(void 0,void 0,e[0])},this.reduceActions[27]=function(e){return e[0].locationPath=e[2],e[0]},this.reduceActions[28]=function(e){return e[0].locationPath=e[2],e[0].locationPath.steps.unshift(new R(R.DESCENDANTORSELF,F.nodeTest,[])),e[0]},this.reduceActions[29]=function(e){return new P(e[0],[],void 0)},this.reduceActions[30]=function(e){return C.instance_of(e[0],P)?(e[0].filterPredicates==null&&(e[0].filterPredicates=[]),e[0].filterPredicates.push(e[1]),e[0]):new P(e[0],[e[1]],void 0)},this.reduceActions[32]=function(e){return e[1]},this.reduceActions[33]=function(e){return new M(e[0])},this.reduceActions[34]=function(e){return new O(e[0])},this.reduceActions[36]=function(e){return new Ae(e[0],[])},this.reduceActions[37]=function(e){return new Ae(e[0],e[2])},this.reduceActions[38]=function(e){return[e[0]]},this.reduceActions[39]=function(e){return e[2].unshift(e[0]),e[2]},this.reduceActions[43]=function(e){return new ee(!0,[])},this.reduceActions[44]=function(e){return e[1].absolute=!0,e[1]},this.reduceActions[46]=function(e){return new ee(!1,[e[0]])},this.reduceActions[47]=function(e){return e[0].steps.push(e[2]),e[0]},this.reduceActions[49]=function(e){return new R(e[0],e[1],[])},this.reduceActions[50]=function(e){return new R(R.CHILD,e[0],[])},this.reduceActions[51]=function(e){return new R(e[0],e[1],e[2])},this.reduceActions[52]=function(e){return new R(R.CHILD,e[0],e[1])},this.reduceActions[54]=function(e){return[e[0]]},this.reduceActions[55]=function(e){return e[1].unshift(e[0]),e[1]},this.reduceActions[56]=function(e){return e[0]=="ancestor"?R.ANCESTOR:e[0]=="ancestor-or-self"?R.ANCESTORORSELF:e[0]=="attribute"?R.ATTRIBUTE:e[0]=="child"?R.CHILD:e[0]=="descendant"?R.DESCENDANT:e[0]=="descendant-or-self"?R.DESCENDANTORSELF:e[0]=="following"?R.FOLLOWING:e[0]=="following-sibling"?R.FOLLOWINGSIBLING:e[0]=="namespace"?R.NAMESPACE:e[0]=="parent"?R.PARENT:e[0]=="preceding"?R.PRECEDING:e[0]=="preceding-sibling"?R.PRECEDINGSIBLING:e[0]=="self"?R.SELF:-1},this.reduceActions[57]=function(e){return R.ATTRIBUTE},this.reduceActions[59]=function(e){return e[0]=="comment"?F.commentTest:e[0]=="text"?F.textTest:e[0]=="processing-instruction"?F.anyPiTest:e[0]=="node"?F.nodeTest:new F(-1,void 0)},this.reduceActions[60]=function(e){return new F.PITest(e[2])},this.reduceActions[61]=function(e){return e[1]},this.reduceActions[63]=function(e){return e[1].absolute=!0,e[1].steps.unshift(new R(R.DESCENDANTORSELF,F.nodeTest,[])),e[1]},this.reduceActions[64]=function(e){return e[0].steps.push(new R(R.DESCENDANTORSELF,F.nodeTest,[])),e[0].steps.push(e[2]),e[0]},this.reduceActions[65]=function(e){return new R(R.SELF,F.nodeTest,[])},this.reduceActions[66]=function(e){return new R(R.PARENT,F.nodeTest,[])},this.reduceActions[67]=function(e){return new Ue(e[1])},this.reduceActions[68]=function(e){return F.nameTestAny},this.reduceActions[69]=function(e){return new F.NameTestPrefixAny(e[0].split(":")[0])},this.reduceActions[70]=function(e){return new F.NameTestQName(e[0])}},A.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "],A.actionTableNumber=[` 1 0        /.-,+*)('    & %$  #  "!`,"                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               ",` 1 0        /.-,+*)('    & %$  #  "!`,`K1  KKKKKKKK .  +*)('KKKKKK  KK# K" `,` 1 0        /.-,+*)('    & %$  #  "!`,"                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       ",` 1           .  +*)('          #  " `,"b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               ",` 1 0        /.-,+*)('    & %$m #  "!`,"_  f________         ______e __  _  ",` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('      %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1           .  +*)('          #  " `,` 1           .  +*)('          #  " `,">  >>>>>>>>>         >>>>>>> >> >>  ",` 1           .  +*)('          #  " `,` 1           .  +*)('          #  " `,"Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                                   ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                                   ","                             F     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                   ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  ",` 1 0        /.-,+*)('    & %$  #  "!`,"]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "],A.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         =>?@ AB  CDEFGH IJ ","456789:;<=>?@ AB  CDEFGH IJ","                    EFGH IJ ","                    EFGH IJ ","                             ","                      GH IJ ","                      GH IJ ","              i             ","              i             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABqCDEFGH IJ ","                             ","                             "],A.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]],A.DOUBLEDOT=2,A.DOUBLECOLON=3,A.DOUBLESLASH=4,A.NOTEQUAL=5,A.LESSTHANOREQUAL=6,A.GREATERTHANOREQUAL=7,A.AND=8,A.OR=9,A.MOD=10,A.DIV=11,A.MULTIPLYOPERATOR=12,A.FUNCTIONNAME=13,A.AXISNAME=14,A.LITERAL=15,A.NUMBER=16,A.ASTERISKNAMETEST=17,A.QNAME=18,A.NCNAMECOLONASTERISK=19,A.NODETYPE=20,A.PROCESSINGINSTRUCTIONWITHLITERAL=21,A.EQUALS=22,A.LESSTHAN=23,A.GREATERTHAN=24,A.PLUS=25,A.MINUS=26,A.BAR=27,A.SLASH=28,A.LEFTPARENTHESIS=29,A.RIGHTPARENTHESIS=30,A.COMMA=31,A.AT=32,A.LEFTBRACKET=33,A.RIGHTBRACKET=34,A.DOT=35,A.DOLLAR=36,A.prototype.tokenize=function(e){for(var t=[],c=[],h=e+"\0",p=0,d=h.charAt(p++);;){for(;d==" "||d=="	"||d=="\r"||d==`
`;)d=h.charAt(p++);if(d=="\0"||p>=h.length)break;if(d=="("){t.push(A.LEFTPARENTHESIS),c.push(d),d=h.charAt(p++);continue}if(d==")"){t.push(A.RIGHTPARENTHESIS),c.push(d),d=h.charAt(p++);continue}if(d=="["){t.push(A.LEFTBRACKET),c.push(d),d=h.charAt(p++);continue}if(d=="]"){t.push(A.RIGHTBRACKET),c.push(d),d=h.charAt(p++);continue}if(d=="@"){t.push(A.AT),c.push(d),d=h.charAt(p++);continue}if(d==","){t.push(A.COMMA),c.push(d),d=h.charAt(p++);continue}if(d=="|"){t.push(A.BAR),c.push(d),d=h.charAt(p++);continue}if(d=="+"){t.push(A.PLUS),c.push(d),d=h.charAt(p++);continue}if(d=="-"){t.push(A.MINUS),c.push(d),d=h.charAt(p++);continue}if(d=="="){t.push(A.EQUALS),c.push(d),d=h.charAt(p++);continue}if(d=="$"){t.push(A.DOLLAR),c.push(d),d=h.charAt(p++);continue}if(d=="."){if(d=h.charAt(p++),d=="."){t.push(A.DOUBLEDOT),c.push(".."),d=h.charAt(p++);continue}if(d>="0"&&d<="9"){var I="."+d;for(d=h.charAt(p++);d>="0"&&d<="9";)I+=d,d=h.charAt(p++);t.push(A.NUMBER),c.push(I);continue}t.push(A.DOT),c.push(".");continue}if(d=="'"||d=='"'){for(var k=d,Q="";p<h.length&&(d=h.charAt(p))!==k;)Q+=d,p+=1;if(d!==k)throw J.fromMessage("Unterminated string literal: "+k+Q);p+=1,t.push(A.LITERAL),c.push(Q),d=h.charAt(p++);continue}if(d>="0"&&d<="9"){var I=d;for(d=h.charAt(p++);d>="0"&&d<="9";)I+=d,d=h.charAt(p++);if(d=="."&&h.charAt(p)>="0"&&h.charAt(p)<="9")for(I+=d,I+=h.charAt(p++),d=h.charAt(p++);d>="0"&&d<="9";)I+=d,d=h.charAt(p++);t.push(A.NUMBER),c.push(I);continue}if(d=="*"){if(t.length>0){var B=t[t.length-1];if(B!=A.AT&&B!=A.DOUBLECOLON&&B!=A.LEFTPARENTHESIS&&B!=A.LEFTBRACKET&&B!=A.AND&&B!=A.OR&&B!=A.MOD&&B!=A.DIV&&B!=A.MULTIPLYOPERATOR&&B!=A.SLASH&&B!=A.DOUBLESLASH&&B!=A.BAR&&B!=A.PLUS&&B!=A.MINUS&&B!=A.EQUALS&&B!=A.NOTEQUAL&&B!=A.LESSTHAN&&B!=A.LESSTHANOREQUAL&&B!=A.GREATERTHAN&&B!=A.GREATERTHANOREQUAL){t.push(A.MULTIPLYOPERATOR),c.push(d),d=h.charAt(p++);continue}}t.push(A.ASTERISKNAMETEST),c.push(d),d=h.charAt(p++);continue}if(d==":"&&h.charAt(p)==":"){t.push(A.DOUBLECOLON),c.push("::"),p++,d=h.charAt(p++);continue}if(d=="/"){if(d=h.charAt(p++),d=="/"){t.push(A.DOUBLESLASH),c.push("//"),d=h.charAt(p++);continue}t.push(A.SLASH),c.push("/");continue}if(d=="!"&&h.charAt(p)=="="){t.push(A.NOTEQUAL),c.push("!="),p++,d=h.charAt(p++);continue}if(d=="<"){if(h.charAt(p)=="="){t.push(A.LESSTHANOREQUAL),c.push("<="),p++,d=h.charAt(p++);continue}t.push(A.LESSTHAN),c.push("<"),d=h.charAt(p++);continue}if(d==">"){if(h.charAt(p)=="="){t.push(A.GREATERTHANOREQUAL),c.push(">="),p++,d=h.charAt(p++);continue}t.push(A.GREATERTHAN),c.push(">"),d=h.charAt(p++);continue}if(d=="_"||C.isLetter(d.charCodeAt(0))){var q=d;for(d=h.charAt(p++);C.isNCNameChar(d.charCodeAt(0));)q+=d,d=h.charAt(p++);if(t.length>0){var B=t[t.length-1];if(B!=A.AT&&B!=A.DOUBLECOLON&&B!=A.LEFTPARENTHESIS&&B!=A.LEFTBRACKET&&B!=A.AND&&B!=A.OR&&B!=A.MOD&&B!=A.DIV&&B!=A.MULTIPLYOPERATOR&&B!=A.SLASH&&B!=A.DOUBLESLASH&&B!=A.BAR&&B!=A.PLUS&&B!=A.MINUS&&B!=A.EQUALS&&B!=A.NOTEQUAL&&B!=A.LESSTHAN&&B!=A.LESSTHANOREQUAL&&B!=A.GREATERTHAN&&B!=A.GREATERTHANOREQUAL){if(q=="and"){t.push(A.AND),c.push(q);continue}if(q=="or"){t.push(A.OR),c.push(q);continue}if(q=="mod"){t.push(A.MOD),c.push(q);continue}if(q=="div"){t.push(A.DIV),c.push(q);continue}}}if(d==":"){if(h.charAt(p)=="*"){t.push(A.NCNAMECOLONASTERISK),c.push(q+":*"),p++,d=h.charAt(p++);continue}if(h.charAt(p)=="_"||C.isLetter(h.charCodeAt(p))){for(q+=":",d=h.charAt(p++);C.isNCNameChar(d.charCodeAt(0));)q+=d,d=h.charAt(p++);if(d=="("){t.push(A.FUNCTIONNAME),c.push(q);continue}t.push(A.QNAME),c.push(q);continue}if(h.charAt(p)==":"){t.push(A.AXISNAME),c.push(q);continue}}if(d=="("){if(q=="comment"||q=="text"||q=="node"){t.push(A.NODETYPE),c.push(q);continue}if(q=="processing-instruction"){h.charAt(p)==")"?t.push(A.NODETYPE):t.push(A.PROCESSINGINSTRUCTIONWITHLITERAL),c.push(q);continue}t.push(A.FUNCTIONNAME),c.push(q);continue}t.push(A.QNAME),c.push(q);continue}throw new Error("Unexpected character "+d)}return t.push(1),c.push("[EOF]"),[t,c]},A.SHIFT="s",A.REDUCE="r",A.ACCEPT="a",A.prototype.parse=function(Q){var t,c,h=this.tokenize(Q);if(h!=null){t=h[0],c=h[1];var p=0,d=[],I=[],k=[],Q,B,q;for(d.push(0),I.push(1),k.push("_S"),B=t[p],q=c[p++];;)switch(Q=d[d.length-1],A.actionTable[Q].charAt(B-1)){case A.SHIFT:I.push(-B),k.push(q),d.push(A.actionTableNumber[Q].charCodeAt(B-1)-32),B=t[p],q=c[p++];break;case A.REDUCE:for(var we=A.productions[A.actionTableNumber[Q].charCodeAt(B-1)-32][1],te=[],Xe=0;Xe<we;Xe++)I.pop(),te.unshift(k.pop()),d.pop();var rt=d[d.length-1];I.push(A.productions[A.actionTableNumber[Q].charCodeAt(B-1)-32][0]),this.reduceActions[A.actionTableNumber[Q].charCodeAt(B-1)-32]==null?k.push(te[0]):k.push(this.reduceActions[A.actionTableNumber[Q].charCodeAt(B-1)-32](te)),d.push(A.gotoTable[rt].charCodeAt(A.productions[A.actionTableNumber[Q].charCodeAt(B-1)-32][0]-2)-33);break;case A.ACCEPT:return new oe(k.pop());default:throw new Error("XPath parse error")}}},oe.prototype=new Object,oe.prototype.constructor=oe,oe.superclass=Object.prototype;function oe(e){this.expression=e}oe.prototype.toString=function(){return this.expression.toString()};function qe(e,t,c){t in e||(e[t]=c)}oe.prototype.evaluate=function(e){return e.contextNode=e.expressionContextNode,e.contextSize=1,e.contextPosition=1,e.isHtml&&(qe(e,"caseInsensitive",!0),qe(e,"allowAnyNamespaceForNoPrefix",!0)),qe(e,"caseInsensitive",!1),this.expression.evaluate(e)},oe.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace",oe.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/",Y.prototype=new Object,Y.prototype.constructor=Y,Y.superclass=Object.prototype;function Y(){}Y.prototype.init=function(){},Y.prototype.toString=function(){return"<Expression>"},Y.prototype.evaluate=function(e){throw new Error("Could not evaluate expression.")},ce.prototype=new Y,ce.prototype.constructor=ce,ce.superclass=Y.prototype;function ce(e){arguments.length>0&&this.init(e)}ce.prototype.init=function(e){this.rhs=e},he.prototype=new ce,he.prototype.constructor=he,he.superclass=ce.prototype;function he(e){arguments.length>0&&this.init(e)}he.prototype.init=function(e){he.superclass.init.call(this,e)},he.prototype.evaluate=function(e){return this.rhs.evaluate(e).number().negate()},he.prototype.toString=function(){return"-"+this.rhs.toString()},j.prototype=new Y,j.prototype.constructor=j,j.superclass=Y.prototype;function j(e,t){arguments.length>0&&this.init(e,t)}j.prototype.init=function(e,t){this.lhs=e,this.rhs=t},Fe.prototype=new j,Fe.prototype.constructor=Fe,Fe.superclass=j.prototype;function Fe(e,t){arguments.length>0&&this.init(e,t)}Fe.prototype.init=function(e,t){Fe.superclass.init.call(this,e,t)},Fe.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"},Fe.prototype.evaluate=function(e){var t=this.lhs.evaluate(e).bool();return t.booleanValue()?t:this.rhs.evaluate(e).bool()},Oe.prototype=new j,Oe.prototype.constructor=Oe,Oe.superclass=j.prototype;function Oe(e,t){arguments.length>0&&this.init(e,t)}Oe.prototype.init=function(e,t){Oe.superclass.init.call(this,e,t)},Oe.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"},Oe.prototype.evaluate=function(e){var t=this.lhs.evaluate(e).bool();return t.booleanValue()?this.rhs.evaluate(e).bool():t},Ie.prototype=new j,Ie.prototype.constructor=Ie,Ie.superclass=j.prototype;function Ie(e,t){arguments.length>0&&this.init(e,t)}Ie.prototype.init=function(e,t){Ie.superclass.init.call(this,e,t)},Ie.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"},Ie.prototype.evaluate=function(e){return this.lhs.evaluate(e).equals(this.rhs.evaluate(e))},Be.prototype=new j,Be.prototype.constructor=Be,Be.superclass=j.prototype;function Be(e,t){arguments.length>0&&this.init(e,t)}Be.prototype.init=function(e,t){Be.superclass.init.call(this,e,t)},Be.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"},Be.prototype.evaluate=function(e){return this.lhs.evaluate(e).notequal(this.rhs.evaluate(e))},be.prototype=new j,be.prototype.constructor=be,be.superclass=j.prototype;function be(e,t){arguments.length>0&&this.init(e,t)}be.prototype.init=function(e,t){be.superclass.init.call(this,e,t)},be.prototype.evaluate=function(e){return this.lhs.evaluate(e).lessthan(this.rhs.evaluate(e))},be.prototype.toString=function(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"},ue.prototype=new j,ue.prototype.constructor=ue,ue.superclass=j.prototype;function ue(e,t){arguments.length>0&&this.init(e,t)}ue.prototype.init=function(e,t){ue.superclass.init.call(this,e,t)},ue.prototype.evaluate=function(e){return this.lhs.evaluate(e).greaterthan(this.rhs.evaluate(e))},ue.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"},ye.prototype=new j,ye.prototype.constructor=ye,ye.superclass=j.prototype;function ye(e,t){arguments.length>0&&this.init(e,t)}ye.prototype.init=function(e,t){ye.superclass.init.call(this,e,t)},ye.prototype.evaluate=function(e){return this.lhs.evaluate(e).lessthanorequal(this.rhs.evaluate(e))},ye.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"},Ee.prototype=new j,Ee.prototype.constructor=Ee,Ee.superclass=j.prototype;function Ee(e,t){arguments.length>0&&this.init(e,t)}Ee.prototype.init=function(e,t){Ee.superclass.init.call(this,e,t)},Ee.prototype.evaluate=function(e){return this.lhs.evaluate(e).greaterthanorequal(this.rhs.evaluate(e))},Ee.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"},ve.prototype=new j,ve.prototype.constructor=ve,ve.superclass=j.prototype;function ve(e,t){arguments.length>0&&this.init(e,t)}ve.prototype.init=function(e,t){ve.superclass.init.call(this,e,t)},ve.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().plus(this.rhs.evaluate(e).number())},ve.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"},Le.prototype=new j,Le.prototype.constructor=Le,Le.superclass=j.prototype;function Le(e,t){arguments.length>0&&this.init(e,t)}Le.prototype.init=function(e,t){Le.superclass.init.call(this,e,t)},Le.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().minus(this.rhs.evaluate(e).number())},Le.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"},Pe.prototype=new j,Pe.prototype.constructor=Pe,Pe.superclass=j.prototype;function Pe(e,t){arguments.length>0&&this.init(e,t)}Pe.prototype.init=function(e,t){Pe.superclass.init.call(this,e,t)},Pe.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().multiply(this.rhs.evaluate(e).number())},Pe.prototype.toString=function(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"},Me.prototype=new j,Me.prototype.constructor=Me,Me.superclass=j.prototype;function Me(e,t){arguments.length>0&&this.init(e,t)}Me.prototype.init=function(e,t){Me.superclass.init.call(this,e,t)},Me.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().div(this.rhs.evaluate(e).number())},Me.prototype.toString=function(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"},_e.prototype=new j,_e.prototype.constructor=_e,_e.superclass=j.prototype;function _e(e,t){arguments.length>0&&this.init(e,t)}_e.prototype.init=function(e,t){_e.superclass.init.call(this,e,t)},_e.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().mod(this.rhs.evaluate(e).number())},_e.prototype.toString=function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"},Z.prototype=new j,Z.prototype.constructor=Z,Z.superclass=j.prototype;function Z(e,t){arguments.length>0&&this.init(e,t)}Z.prototype.init=function(e,t){Z.superclass.init.call(this,e,t)},Z.prototype.evaluate=function(e){return this.lhs.evaluate(e).nodeset().union(this.rhs.evaluate(e).nodeset())},Z.prototype.toString=function(){return E($,[this.lhs,this.rhs]).join(" | ")},P.prototype=new Y,P.prototype.constructor=P,P.superclass=Y.prototype;function P(e,t,c){arguments.length>0&&this.init(e,t,c)}P.prototype.init=function(e,t,c){P.superclass.init.call(this),this.filter=e,this.filterPredicates=t,this.locationPath=c};function ut(e){for(;e&&e.parentNode;)e=e.parentNode;return e}P.applyPredicates=function(e,t,c){if(e.length===0)return c;var h=t.extend({});return y(function(p,d){return h.contextSize=p.length,m(function(I,k){return h.contextNode=I,h.contextPosition=k+1,P.predicateMatches(d,h)},p)},c,e)},P.getRoot=function(e,t){var c=t[0];if(c.nodeType===9)return c;if(e.virtualRoot)return e.virtualRoot;var h=c.ownerDocument;if(h)return h;for(var p=c;p.parentNode!=null;)p=p.parentNode;return p},P.applyStep=function(e,t,c){var h=[];switch(t.contextNode=c,e.axis){case R.ANCESTOR:if(t.contextNode===t.virtualRoot)break;var p;for(t.contextNode.nodeType==2?p=P.getOwnerElement(t.contextNode):p=t.contextNode.parentNode;p!=null&&(e.nodeTest.matches(p,t)&&h.push(p),p!==t.virtualRoot);)p=p.parentNode;break;case R.ANCESTORORSELF:for(var p=t.contextNode;p!=null&&(e.nodeTest.matches(p,t)&&h.push(p),p!==t.virtualRoot);p=p.nodeType==2?P.getOwnerElement(p):p.parentNode);break;case R.ATTRIBUTE:var d=t.contextNode.attributes;if(d!=null)for(var I=0;I<d.length;I++){var p=d.item(I);e.nodeTest.matches(p,t)&&h.push(p)}break;case R.CHILD:for(var p=t.contextNode.firstChild;p!=null;p=p.nextSibling)e.nodeTest.matches(p,t)&&h.push(p);break;case R.DESCENDANT:for(var te=[t.contextNode.firstChild];te.length>0;)for(var p=te.pop();p!=null;)e.nodeTest.matches(p,t)&&h.push(p),p.firstChild!=null?(te.push(p.nextSibling),p=p.firstChild):p=p.nextSibling;break;case R.DESCENDANTORSELF:e.nodeTest.matches(t.contextNode,t)&&h.push(t.contextNode);for(var te=[t.contextNode.firstChild];te.length>0;)for(var p=te.pop();p!=null;)e.nodeTest.matches(p,t)&&h.push(p),p.firstChild!=null?(te.push(p.nextSibling),p=p.firstChild):p=p.nextSibling;break;case R.FOLLOWING:if(t.contextNode===t.virtualRoot)break;var te=[];t.contextNode.firstChild!=null?te.unshift(t.contextNode.firstChild):te.unshift(t.contextNode.nextSibling);for(var p=t.contextNode.parentNode;p!=null&&p.nodeType!=9&&p!==t.virtualRoot;p=p.parentNode)te.unshift(p.nextSibling);do for(var p=te.pop();p!=null;)e.nodeTest.matches(p,t)&&h.push(p),p.firstChild!=null?(te.push(p.nextSibling),p=p.firstChild):p=p.nextSibling;while(te.length>0);break;case R.FOLLOWINGSIBLING:if(t.contextNode===t.virtualRoot)break;for(var p=t.contextNode.nextSibling;p!=null;p=p.nextSibling)e.nodeTest.matches(p,t)&&h.push(p);break;case R.NAMESPACE:var k={};if(t.contextNode.nodeType==1){k.xml=oe.XML_NAMESPACE_URI,k.xmlns=oe.XMLNS_NAMESPACE_URI;for(var p=t.contextNode;p!=null&&p.nodeType==1;p=p.parentNode)for(var I=0;I<p.attributes.length;I++){var Q=p.attributes.item(I),B=String(Q.name);if(B=="xmlns")k[""]==null&&(k[""]=Q.value);else if(B.length>6&&B.substring(0,6)=="xmlns:"){var q=B.substring(6,B.length);k[q]==null&&(k[q]=Q.value)}}for(var q in k){var we=new x(q,k[q],t.contextNode);e.nodeTest.matches(we,t)&&h.push(we)}}break;case R.PARENT:p=null,t.contextNode!==t.virtualRoot&&(t.contextNode.nodeType==2?p=P.getOwnerElement(t.contextNode):p=t.contextNode.parentNode),p!=null&&e.nodeTest.matches(p,t)&&h.push(p);break;case R.PRECEDING:var te;t.virtualRoot!=null?te=[t.virtualRoot]:te=[ut(t.contextNode)];e:for(;te.length>0;)for(var p=te.pop();p!=null;){if(p==t.contextNode)break e;e.nodeTest.matches(p,t)&&h.unshift(p),p.firstChild!=null?(te.push(p.nextSibling),p=p.firstChild):p=p.nextSibling}break;case R.PRECEDINGSIBLING:if(t.contextNode===t.virtualRoot)break;for(var p=t.contextNode.previousSibling;p!=null;p=p.previousSibling)e.nodeTest.matches(p,t)&&h.push(p);break;case R.SELF:e.nodeTest.matches(t.contextNode,t)&&h.push(t.contextNode);break}return h};function le(e,t,c){return P.applyPredicates(e.predicates,t,P.applyStep(e,t,c))}function lt(e,t,c){return Re(E(le.bind(null,c,e),t))}P.applySteps=function(e,t,c){return y(lt.bind(null,t),c,e)},P.prototype.applyFilter=function(e,t){if(!this.filter)return{nodes:[e.contextNode]};var c=this.filter.evaluate(e);if(!C.instance_of(c,u)){if(this.filterPredicates!=null&&this.filterPredicates.length>0||this.locationPath!=null)throw new Error("Path expression filter must evaluate to a nodeset if predicates or location path are used");return{nonNodes:c}}return{nodes:P.applyPredicates(this.filterPredicates||[],t,c.toUnsortedArray())}},P.applyLocationPath=function(e,t,c){if(!e)return c;var h=e.absolute?[P.getRoot(t,c)]:c;return P.applySteps(e.steps,t,h)},P.prototype.evaluate=function(e){var t=je(new N,e),c=this.applyFilter(e,t);if("nonNodes"in c)return c.nonNodes;var h=new u;return h.addArray(P.applyLocationPath(this.locationPath,t,c.nodes)),h},P.predicateMatches=function(e,t){var c=e.evaluate(t);return C.instance_of(c,O)?t.contextPosition===c.numberValue():c.booleanValue()},P.predicateString=function(e){return se("[","]",e.toString())},P.predicatesString=function(e){return W("",E(P.predicateString,e))},P.prototype.toString=function(){if(this.filter!=null){var e=$(this.filter);return C.instance_of(this.filter,M)?se("'","'",e):this.filterPredicates!=null&&this.filterPredicates.length?se("(",")",e)+P.predicatesString(this.filterPredicates):this.locationPath!=null?e+(this.locationPath.absolute?"":"/")+$(this.locationPath):e}return $(this.locationPath)},P.getOwnerElement=function(e){if(e.ownerElement)return e.ownerElement;try{if(e.selectSingleNode)return e.selectSingleNode("..")}catch{}for(var t=e.nodeType==9?e:e.ownerDocument,c=t.getElementsByTagName("*"),h=0;h<c.length;h++)for(var p=c.item(h),d=p.attributes,I=0;I<d.length;I++){var k=d.item(I);if(k===e)return p}return null},ee.prototype=new Object,ee.prototype.constructor=ee,ee.superclass=Object.prototype;function ee(e,t){arguments.length>0&&this.init(e,t)}ee.prototype.init=function(e,t){this.absolute=e,this.steps=t},ee.prototype.toString=function(){return(this.absolute?"/":"")+E($,this.steps).join("/")},R.prototype=new Object,R.prototype.constructor=R,R.superclass=Object.prototype;function R(e,t,c){arguments.length>0&&this.init(e,t,c)}R.prototype.init=function(e,t,c){this.axis=e,this.nodeTest=t,this.predicates=c},R.prototype.toString=function(){return R.STEPNAMES[this.axis]+"::"+this.nodeTest.toString()+P.predicatesString(this.predicates)},R.ANCESTOR=0,R.ANCESTORORSELF=1,R.ATTRIBUTE=2,R.CHILD=3,R.DESCENDANT=4,R.DESCENDANTORSELF=5,R.FOLLOWING=6,R.FOLLOWINGSIBLING=7,R.NAMESPACE=8,R.PARENT=9,R.PRECEDING=10,R.PRECEDINGSIBLING=11,R.SELF=12,R.STEPNAMES=y(function(e,t){return e[t[0]]=t[1],e},{},[[R.ANCESTOR,"ancestor"],[R.ANCESTORORSELF,"ancestor-or-self"],[R.ATTRIBUTE,"attribute"],[R.CHILD,"child"],[R.DESCENDANT,"descendant"],[R.DESCENDANTORSELF,"descendant-or-self"],[R.FOLLOWING,"following"],[R.FOLLOWINGSIBLING,"following-sibling"],[R.NAMESPACE,"namespace"],[R.PARENT,"parent"],[R.PRECEDING,"preceding"],[R.PRECEDINGSIBLING,"preceding-sibling"],[R.SELF,"self"]]),F.prototype=new Object,F.prototype.constructor=F,F.superclass=Object.prototype;function F(e,t){arguments.length>0&&this.init(e,t)}F.prototype.init=function(e,t){this.type=e,this.value=t},F.prototype.toString=function(){return"<unknown nodetest type>"},F.prototype.matches=function(e,t){console.warn("unknown node test type")},F.NAMETESTANY=0,F.NAMETESTPREFIXANY=1,F.NAMETESTQNAME=2,F.COMMENT=3,F.TEXT=4,F.PI=5,F.NODE=6,F.isNodeType=function(e){return function(t){return b(e,t.nodeType)}},F.makeNodeTestType=function(e,t,c){var h=c||function(){};return h.prototype=new F(e),h.prototype.constructor=h,je(h.prototype,t),h},F.makeNodeTypeTest=function(e,t,c){return new(F.makeNodeTestType(e,{matches:F.isNodeType(t),toString:U(c)}))},F.hasPrefix=function(e){return e.prefix||(e.nodeName||e.tagName).indexOf(":")!==-1},F.isElementOrAttribute=F.isNodeType([1,2]),F.nameSpaceMatches=function(e,t,c){var h=c.namespaceURI||"";if(!e)return!h||t.allowAnyNamespaceForNoPrefix&&!F.hasPrefix(c);var p=t.namespaceResolver.getNamespace(e,t.expressionContextNode);if(p==null)throw new Error("Cannot resolve QName "+e);return p===h},F.localNameMatches=function(e,t,c){var h=c.localName||c.nodeName;return t.caseInsensitive?e.toLowerCase()===h.toLowerCase():e===h},F.NameTestPrefixAny=F.makeNodeTestType(F.NAMETESTPREFIXANY,{matches:function(e,t){return F.isElementOrAttribute(e)&&F.nameSpaceMatches(this.prefix,t,e)},toString:function(){return this.prefix+":*"}},function(t){this.prefix=t}),F.NameTestQName=F.makeNodeTestType(F.NAMETESTQNAME,{matches:function(e,t){return F.isNodeType([1,2,x.XPATH_NAMESPACE_NODE])(e)&&F.nameSpaceMatches(this.prefix,t,e)&&F.localNameMatches(this.localName,t,e)},toString:function(){return this.name}},function(t){var c=t.split(":");this.name=t,this.prefix=c.length>1?c[0]:null,this.localName=c[c.length>1?1:0]}),F.PITest=F.makeNodeTestType(F.PI,{matches:function(e,t){return F.isNodeType([7])(e)&&(e.target||e.nodeName)===this.name},toString:function(){return se('processing-instruction("','")',this.name)}},function(e){this.name=e}),F.nameTestAny=F.makeNodeTypeTest(F.NAMETESTANY,[1,2,x.XPATH_NAMESPACE_NODE],"*"),F.textTest=F.makeNodeTypeTest(F.TEXT,[3,4],"text()"),F.commentTest=F.makeNodeTypeTest(F.COMMENT,[8],"comment()"),F.nodeTest=F.makeNodeTypeTest(F.NODE,[1,2,3,4,7,8,9],"node()"),F.anyPiTest=F.makeNodeTypeTest(F.PI,[7],"processing-instruction()"),Ue.prototype=new Y,Ue.prototype.constructor=Ue,Ue.superclass=Y.prototype;function Ue(e){arguments.length>0&&this.init(e)}Ue.prototype.init=function(e){this.variable=e},Ue.prototype.toString=function(){return"$"+this.variable},Ue.prototype.evaluate=function(e){var t=C.resolveQName(this.variable,e.namespaceResolver,e.contextNode,!1);if(t[0]==null)throw new Error("Cannot resolve QName "+fn);var c=e.variableResolver.getVariable(t[1],t[0]);if(!c)throw J.fromMessage("Undeclared variable: "+this.toString());return c},Ae.prototype=new Y,Ae.prototype.constructor=Ae,Ae.superclass=Y.prototype;function Ae(e,t){arguments.length>0&&this.init(e,t)}Ae.prototype.init=function(e,t){this.functionName=e,this.arguments=t},Ae.prototype.toString=function(){for(var e=this.functionName+"(",t=0;t<this.arguments.length;t++)t>0&&(e+=", "),e+=this.arguments[t].toString();return e+")"},Ae.prototype.evaluate=function(e){var t=H.getFunctionFromContext(this.functionName,e);if(!t)throw new Error("Unknown function "+this.functionName);var c=[e].concat(this.arguments);return t.apply(e.functionResolver.thisArg,c)};var ie=new Object;ie.equals=function(e,t){return e.equals(t)},ie.notequal=function(e,t){return e.notequal(t)},ie.lessthan=function(e,t){return e.lessthan(t)},ie.greaterthan=function(e,t){return e.greaterthan(t)},ie.lessthanorequal=function(e,t){return e.lessthanorequal(t)},ie.greaterthanorequal=function(e,t){return e.greaterthanorequal(t)},M.prototype=new Y,M.prototype.constructor=M,M.superclass=Y.prototype;function M(e){arguments.length>0&&this.init(e)}M.prototype.init=function(e){this.str=String(e)},M.prototype.toString=function(){return this.str},M.prototype.evaluate=function(e){return this},M.prototype.string=function(){return this},M.prototype.number=function(){return new O(this.str)},M.prototype.bool=function(){return new o(this.str)},M.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset")},M.prototype.stringValue=function(){return this.str},M.prototype.numberValue=function(){return this.number().numberValue()},M.prototype.booleanValue=function(){return this.bool().booleanValue()},M.prototype.equals=function(e){return C.instance_of(e,o)?this.bool().equals(e):C.instance_of(e,O)?this.number().equals(e):C.instance_of(e,u)?e.compareWithString(this,ie.equals):new o(this.str==e.str)},M.prototype.notequal=function(e){return C.instance_of(e,o)?this.bool().notequal(e):C.instance_of(e,O)?this.number().notequal(e):C.instance_of(e,u)?e.compareWithString(this,ie.notequal):new o(this.str!=e.str)},M.prototype.lessthan=function(e){return this.number().lessthan(e)},M.prototype.greaterthan=function(e){return this.number().greaterthan(e)},M.prototype.lessthanorequal=function(e){return this.number().lessthanorequal(e)},M.prototype.greaterthanorequal=function(e){return this.number().greaterthanorequal(e)},O.prototype=new Y,O.prototype.constructor=O,O.superclass=Y.prototype;function O(e){arguments.length>0&&this.init(e)}O.prototype.init=function(e){this.num=typeof e=="string"?this.parse(e):Number(e)},O.prototype.numberFormat=/^\s*-?[0-9]*\.?[0-9]+\s*$/,O.prototype.parse=function(e){return this.numberFormat.test(e)?parseFloat(e):Number.NaN};function it(e){for(var t=e.split("e-"),c=t[0].replace(".",""),h=Number(t[1]),p=0;p<h-1;p+=1)c="0"+c;return"0."+c}function ct(e){for(var t=e.split("e"),c=t[0].replace(".",""),h=Number(t[1]),p=h+1-c.length,d=0;d<p;d+=1)c+="0";return c}O.prototype.toString=function(){var e=this.num.toString();return e.indexOf("e-")!==-1?it(e):e.indexOf("e")!==-1?ct(e):e},O.prototype.evaluate=function(e){return this},O.prototype.string=function(){return new M(this.toString())},O.prototype.number=function(){return this},O.prototype.bool=function(){return new o(this.num)},O.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset")},O.prototype.stringValue=function(){return this.string().stringValue()},O.prototype.numberValue=function(){return this.num},O.prototype.booleanValue=function(){return this.bool().booleanValue()},O.prototype.negate=function(){return new O(-this.num)},O.prototype.equals=function(e){return C.instance_of(e,o)?this.bool().equals(e):C.instance_of(e,M)?this.equals(e.number()):C.instance_of(e,u)?e.compareWithNumber(this,ie.equals):new o(this.num==e.num)},O.prototype.notequal=function(e){return C.instance_of(e,o)?this.bool().notequal(e):C.instance_of(e,M)?this.notequal(e.number()):C.instance_of(e,u)?e.compareWithNumber(this,ie.notequal):new o(this.num!=e.num)},O.prototype.lessthan=function(e){return C.instance_of(e,u)?e.compareWithNumber(this,ie.greaterthan):C.instance_of(e,o)||C.instance_of(e,M)?this.lessthan(e.number()):new o(this.num<e.num)},O.prototype.greaterthan=function(e){return C.instance_of(e,u)?e.compareWithNumber(this,ie.lessthan):C.instance_of(e,o)||C.instance_of(e,M)?this.greaterthan(e.number()):new o(this.num>e.num)},O.prototype.lessthanorequal=function(e){return C.instance_of(e,u)?e.compareWithNumber(this,ie.greaterthanorequal):C.instance_of(e,o)||C.instance_of(e,M)?this.lessthanorequal(e.number()):new o(this.num<=e.num)},O.prototype.greaterthanorequal=function(e){return C.instance_of(e,u)?e.compareWithNumber(this,ie.lessthanorequal):C.instance_of(e,o)||C.instance_of(e,M)?this.greaterthanorequal(e.number()):new o(this.num>=e.num)},O.prototype.plus=function(e){return new O(this.num+e.num)},O.prototype.minus=function(e){return new O(this.num-e.num)},O.prototype.multiply=function(e){return new O(this.num*e.num)},O.prototype.div=function(e){return new O(this.num/e.num)},O.prototype.mod=function(e){return new O(this.num%e.num)},o.prototype=new Y,o.prototype.constructor=o,o.superclass=Y.prototype;function o(e){arguments.length>0&&this.init(e)}o.prototype.init=function(e){this.b=Boolean(e)},o.prototype.toString=function(){return this.b.toString()},o.prototype.evaluate=function(e){return this},o.prototype.string=function(){return new M(this.b)},o.prototype.number=function(){return new O(this.b)},o.prototype.bool=function(){return this},o.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset")},o.prototype.stringValue=function(){return this.string().stringValue()},o.prototype.numberValue=function(){return this.number().numberValue()},o.prototype.booleanValue=function(){return this.b},o.prototype.not=function(){return new o(!this.b)},o.prototype.equals=function(e){return C.instance_of(e,M)||C.instance_of(e,O)?this.equals(e.bool()):C.instance_of(e,u)?e.compareWithBoolean(this,ie.equals):new o(this.b==e.b)},o.prototype.notequal=function(e){return C.instance_of(e,M)||C.instance_of(e,O)?this.notequal(e.bool()):C.instance_of(e,u)?e.compareWithBoolean(this,ie.notequal):new o(this.b!=e.b)},o.prototype.lessthan=function(e){return this.number().lessthan(e)},o.prototype.greaterthan=function(e){return this.number().greaterthan(e)},o.prototype.lessthanorequal=function(e){return this.number().lessthanorequal(e)},o.prototype.greaterthanorequal=function(e){return this.number().greaterthanorequal(e)},o.true_=new o(!0),o.false_=new o(!1),r.prototype=new Object,r.prototype.constructor=r,r.superclass=Object.prototype;function r(e){this.init(e)}r.prototype.init=function(e){this.left=null,this.right=null,this.node=e,this.depth=1},r.prototype.balance=function(){var e=this.left==null?0:this.left.depth,t=this.right==null?0:this.right.depth;if(e>t+1){var c=this.left.left==null?0:this.left.left.depth,h=this.left.right==null?0:this.left.right.depth;c<h&&this.left.rotateRR(),this.rotateLL()}else if(e+1<t){var p=this.right.right==null?0:this.right.right.depth,d=this.right.left==null?0:this.right.left.depth;d>p&&this.right.rotateLL(),this.rotateRR()}},r.prototype.rotateLL=function(){var e=this.node,t=this.right;this.node=this.left.node,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=t,this.right.node=e,this.right.updateInNewLocation(),this.updateInNewLocation()},r.prototype.rotateRR=function(){var e=this.node,t=this.left;this.node=this.right.node,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=t,this.left.node=e,this.left.updateInNewLocation(),this.updateInNewLocation()},r.prototype.updateInNewLocation=function(){this.getDepthFromChildren()},r.prototype.getDepthFromChildren=function(){this.depth=this.node==null?0:1,this.left!=null&&(this.depth=this.left.depth+1),this.right!=null&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1)};function i(e,t){if(e===t)return 0;if(e.compareDocumentPosition){var c=e.compareDocumentPosition(t);return c&1||c&10?1:c&20?-1:0}for(var h=0,p=0,d=e;d!=null;d=d.parentNode||d.ownerElement)h++;for(var I=t;I!=null;I=I.parentNode||I.ownerElement)p++;if(h>p){for(;h>p;)e=e.parentNode||e.ownerElement,h--;if(e===t)return 1}else if(p>h){for(;p>h;)t=t.parentNode||t.ownerElement,p--;if(e===t)return-1}for(var k=e.parentNode||e.ownerElement,Q=t.parentNode||t.ownerElement;k!==Q;)e=k,t=Q,k=e.parentNode||e.ownerElement,Q=t.parentNode||t.ownerElement;var B=C.isAttribute(e),q=C.isAttribute(t);if(B&&!q)return-1;if(!B&&q)return 1;if(k)for(var we=B?k.attributes:k.childNodes,te=we.length,Xe=0;Xe<te;Xe+=1){var rt=we[Xe];if(rt===e)return-1;if(rt===t)return 1}throw new Error("Unexpected: could not determine node order")}r.prototype.add=function(e){if(e===this.node)return!1;var t=i(e,this.node),c=!1;return t==-1?this.left==null?(this.left=new r(e),c=!0):(c=this.left.add(e),c&&this.balance()):t==1&&(this.right==null?(this.right=new r(e),c=!0):(c=this.right.add(e),c&&this.balance())),c&&this.getDepthFromChildren(),c},u.prototype=new Y,u.prototype.constructor=u,u.superclass=Y.prototype;function u(){this.init()}u.prototype.init=function(){this.tree=null,this.nodes=[],this.size=0},u.prototype.toString=function(){var e=this.first();return e==null?"":this.stringForNode(e)},u.prototype.evaluate=function(e){return this},u.prototype.string=function(){return new M(this.toString())},u.prototype.stringValue=function(){return this.toString()},u.prototype.number=function(){return new O(this.string())},u.prototype.numberValue=function(){return Number(this.string())},u.prototype.bool=function(){return new o(this.booleanValue())},u.prototype.booleanValue=function(){return!!this.size},u.prototype.nodeset=function(){return this},u.prototype.stringForNode=function(e){return e.nodeType==9||e.nodeType==1||e.nodeType===11?this.stringForContainerNode(e):e.nodeType===2?e.value||e.nodeValue:e.isNamespaceNode?e.namespace:e.nodeValue},u.prototype.stringForContainerNode=function(e){for(var t="",c=e.firstChild;c!=null;c=c.nextSibling){var h=c.nodeType;(h===1||h===3||h===4||h===9||h===11)&&(t+=this.stringForNode(c))}return t},u.prototype.buildTree=function(){if(!this.tree&&this.nodes.length){this.tree=new r(this.nodes[0]);for(var e=1;e<this.nodes.length;e+=1)this.tree.add(this.nodes[e])}return this.tree},u.prototype.first=function(){var e=this.buildTree();if(e==null)return null;for(;e.left!=null;)e=e.left;return e.node},u.prototype.add=function(e){for(var t=0;t<this.nodes.length;t+=1)if(e===this.nodes[t])return;this.tree=null,this.nodes.push(e),this.size+=1},u.prototype.addArray=function(e){var t=this;f(function(c){t.add(c)},e)},u.prototype.toArray=function(){var e=[];return this.toArrayRec(this.buildTree(),e),e},u.prototype.toArrayRec=function(e,t){e!=null&&(this.toArrayRec(e.left,t),t.push(e.node),this.toArrayRec(e.right,t))},u.prototype.toUnsortedArray=function(){return this.nodes.slice()},u.prototype.compareWithString=function(e,t){for(var c=this.toUnsortedArray(),h=0;h<c.length;h++){var p=c[h],d=new M(this.stringForNode(p)),I=t(d,e);if(I.booleanValue())return I}return new o(!1)},u.prototype.compareWithNumber=function(e,t){for(var c=this.toUnsortedArray(),h=0;h<c.length;h++){var p=c[h],d=new O(this.stringForNode(p)),I=t(d,e);if(I.booleanValue())return I}return new o(!1)},u.prototype.compareWithBoolean=function(e,t){return t(this.bool(),e)},u.prototype.compareWithNodeSet=function(e,t){for(var c=this.toUnsortedArray(),h=function(k,Q){return t(Q,k)},p=0;p<c.length;p++){var d=new M(this.stringForNode(c[p])),I=e.compareWithString(d,h);if(I.booleanValue())return I}return new o(!1)},u.compareWith=l(function(e,t){return C.instance_of(t,M)?this.compareWithString(t,e):C.instance_of(t,O)?this.compareWithNumber(t,e):C.instance_of(t,o)?this.compareWithBoolean(t,e):this.compareWithNodeSet(t,e)}),u.prototype.equals=u.compareWith(ie.equals),u.prototype.notequal=u.compareWith(ie.notequal),u.prototype.lessthan=u.compareWith(ie.lessthan),u.prototype.greaterthan=u.compareWith(ie.greaterthan),u.prototype.lessthanorequal=u.compareWith(ie.lessthanorequal),u.prototype.greaterthanorequal=u.compareWith(ie.greaterthanorequal),u.prototype.union=function(e){var t=new u;return t.addArray(this.toUnsortedArray()),t.addArray(e.toUnsortedArray()),t},x.prototype=new Object,x.prototype.constructor=x,x.superclass=Object.prototype;function x(e,t,c){this.isXPathNamespace=!0,this.ownerDocument=c.ownerDocument,this.nodeName="#namespace",this.prefix=e,this.localName=e,this.namespaceURI=t,this.nodeValue=t,this.ownerElement=c,this.nodeType=x.XPATH_NAMESPACE_NODE}x.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'},N.prototype=new Object,N.prototype.constructor=N,N.superclass=Object.prototype;function N(e,t,c){this.variableResolver=e??new T,this.namespaceResolver=t??new z,this.functionResolver=c??new H}N.prototype.extend=function(e){return je(new N,this,e)},T.prototype=new Object,T.prototype.constructor=T,T.superclass=Object.prototype;function T(){}T.prototype.getVariable=function(e,t){return null},H.prototype=new Object,H.prototype.constructor=H,H.superclass=Object.prototype;function H(e){this.thisArg=e??S,this.functions=new Object,this.addStandardFunctions()}H.prototype.addStandardFunctions=function(){this.functions["{}last"]=S.last,this.functions["{}position"]=S.position,this.functions["{}count"]=S.count,this.functions["{}id"]=S.id,this.functions["{}local-name"]=S.localName,this.functions["{}namespace-uri"]=S.namespaceURI,this.functions["{}name"]=S.name,this.functions["{}string"]=S.string,this.functions["{}concat"]=S.concat,this.functions["{}starts-with"]=S.startsWith,this.functions["{}contains"]=S.contains,this.functions["{}substring-before"]=S.substringBefore,this.functions["{}substring-after"]=S.substringAfter,this.functions["{}substring"]=S.substring,this.functions["{}string-length"]=S.stringLength,this.functions["{}normalize-space"]=S.normalizeSpace,this.functions["{}translate"]=S.translate,this.functions["{}boolean"]=S.boolean_,this.functions["{}not"]=S.not,this.functions["{}true"]=S.true_,this.functions["{}false"]=S.false_,this.functions["{}lang"]=S.lang,this.functions["{}number"]=S.number,this.functions["{}sum"]=S.sum,this.functions["{}floor"]=S.floor,this.functions["{}ceiling"]=S.ceiling,this.functions["{}round"]=S.round},H.prototype.addFunction=function(e,t,c){this.functions["{"+e+"}"+t]=c},H.getFunctionFromContext=function(e,t){var c=C.resolveQName(e,t.namespaceResolver,t.contextNode,!1);if(c[0]===null)throw new Error("Cannot resolve QName "+name);return t.functionResolver.getFunction(c[1],c[0])},H.prototype.getFunction=function(e,t){return this.functions["{"+t+"}"+e]},z.prototype=new Object,z.prototype.constructor=z,z.superclass=Object.prototype;function z(){}z.prototype.getNamespace=function(e,t){if(e=="xml")return oe.XML_NAMESPACE_URI;if(e=="xmlns")return oe.XMLNS_NAMESPACE_URI;for(t.nodeType==9?t=t.documentElement:t.nodeType==2?t=P.getOwnerElement(t):t.nodeType!=1&&(t=t.parentNode);t!=null&&t.nodeType==1;){for(var c=t.attributes,h=0;h<c.length;h++){var p=c.item(h),d=p.name||p.nodeName;if(d==="xmlns"&&e===""||d==="xmlns:"+e)return String(p.value||p.nodeValue)}t=t.parentNode}return null};var S=new Object;S.last=function(e){if(arguments.length!=1)throw new Error("Function last expects ()");return new O(e.contextSize)},S.position=function(e){if(arguments.length!=1)throw new Error("Function position expects ()");return new O(e.contextPosition)},S.count=function(){var e=arguments[0],t;if(arguments.length!=2||!C.instance_of(t=arguments[1].evaluate(e),u))throw new Error("Function count expects (node-set)");return new O(t.size)},S.id=function(){var e=arguments[0],t;if(arguments.length!=2)throw new Error("Function id expects (object)");t=arguments[1].evaluate(e),C.instance_of(t,u)?t=t.toArray().join(" "):t=t.stringValue();for(var c=t.split(/[\x0d\x0a\x09\x20]+/),h=new u,p=e.contextNode.nodeType==9?e.contextNode:e.contextNode.ownerDocument,d=0;d<c.length;d++){var I;p.getElementById?I=p.getElementById(c[d]):I=C.getElementById(p,c[d]),I!=null&&h.add(I)}return h},S.localName=function(e,t){var c;if(arguments.length==1)c=e.contextNode;else if(arguments.length==2)c=t.evaluate(e).first();else throw new Error("Function local-name expects (node-set?)");return c==null?new M(""):new M(c.localName||c.baseName||c.target||c.nodeName||"")},S.namespaceURI=function(){var e=arguments[0],t;if(arguments.length==1)t=e.contextNode;else if(arguments.length==2)t=arguments[1].evaluate(e).first();else throw new Error("Function namespace-uri expects (node-set?)");return t==null?new M(""):new M(t.namespaceURI)},S.name=function(){var e=arguments[0],t;if(arguments.length==1)t=e.contextNode;else if(arguments.length==2)t=arguments[1].evaluate(e).first();else throw new Error("Function name expects (node-set?)");return t==null?new M(""):t.nodeType==1?new M(t.nodeName):t.nodeType==2?new M(t.name||t.nodeName):t.nodeType===7?new M(t.target||t.nodeName):t.localName==null?new M(""):new M(t.localName)},S.string=function(){var e=arguments[0];if(arguments.length==1)return new M(u.prototype.stringForNode(e.contextNode));if(arguments.length==2)return arguments[1].evaluate(e).string();throw new Error("Function string expects (object?)")},S.concat=function(e){if(arguments.length<3)throw new Error("Function concat expects (string, string[, string]*)");for(var t="",c=1;c<arguments.length;c++)t+=arguments[c].evaluate(e).stringValue();return new M(t)},S.startsWith=function(){var e=arguments[0];if(arguments.length!=3)throw new Error("Function startsWith expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),c=arguments[2].evaluate(e).stringValue();return new o(t.substring(0,c.length)==c)},S.contains=function(){var e=arguments[0];if(arguments.length!=3)throw new Error("Function contains expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),c=arguments[2].evaluate(e).stringValue();return new o(t.indexOf(c)!==-1)},S.substringBefore=function(){var e=arguments[0];if(arguments.length!=3)throw new Error("Function substring-before expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),c=arguments[2].evaluate(e).stringValue();return new M(t.substring(0,t.indexOf(c)))},S.substringAfter=function(){var e=arguments[0];if(arguments.length!=3)throw new Error("Function substring-after expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),c=arguments[2].evaluate(e).stringValue();if(c.length==0)return new M(t);var h=t.indexOf(c);return h==-1?new M(""):new M(t.substring(h+c.length))},S.substring=function(){var e=arguments[0];if(!(arguments.length==3||arguments.length==4))throw new Error("Function substring expects (string, number, number?)");var t=arguments[1].evaluate(e).stringValue(),c=Math.round(arguments[2].evaluate(e).numberValue())-1,h=arguments.length==4?c+Math.round(arguments[3].evaluate(e).numberValue()):void 0;return new M(t.substring(c,h))},S.stringLength=function(){var e=arguments[0],t;if(arguments.length==1)t=u.prototype.stringForNode(e.contextNode);else if(arguments.length==2)t=arguments[1].evaluate(e).stringValue();else throw new Error("Function string-length expects (string?)");return new O(t.length)},S.normalizeSpace=function(){var e=arguments[0],t;if(arguments.length==1)t=u.prototype.stringForNode(e.contextNode);else if(arguments.length==2)t=arguments[1].evaluate(e).stringValue();else throw new Error("Function normalize-space expects (string?)");for(var c=0,h=t.length-1;C.isSpace(t.charCodeAt(h));)h--;for(var p="";c<=h&&C.isSpace(t.charCodeAt(c));)c++;for(;c<=h;)if(C.isSpace(t.charCodeAt(c)))for(p+=" ";c<=h&&C.isSpace(t.charCodeAt(c));)c++;else p+=t.charAt(c),c++;return new M(p)},S.translate=function(e,t,c,h){if(arguments.length!=4)throw new Error("Function translate expects (string, string, string)");var p=t.evaluate(e).stringValue(),d=c.evaluate(e).stringValue(),I=h.evaluate(e).stringValue(),k=y(function(B,q,we){return q in B||(B[q]=we>I.length?"":I[we]),B},{},d),Q=W("",E(function(B){return B in k?k[B]:B},p));return new M(Q)},S.boolean_=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function boolean expects (object)");return arguments[1].evaluate(e).bool()},S.not=function(e,t){if(arguments.length!=2)throw new Error("Function not expects (object)");return t.evaluate(e).bool().not()},S.true_=function(){if(arguments.length!=1)throw new Error("Function true expects ()");return o.true_},S.false_=function(){if(arguments.length!=1)throw new Error("Function false expects ()");return o.false_},S.lang=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function lang expects (string)");for(var t,c=e.contextNode;c!=null&&c.nodeType!=9;c=c.parentNode){var h=c.getAttributeNS(oe.XML_NAMESPACE_URI,"lang");if(h!=null){t=String(h);break}}if(t==null)return o.false_;var p=arguments[1].evaluate(e).stringValue();return new o(t.substring(0,p.length)==p&&(t.length==p.length||t.charAt(p.length)=="-"))},S.number=function(){var e=arguments[0];if(!(arguments.length==1||arguments.length==2))throw new Error("Function number expects (object?)");return arguments.length==1?new O(u.prototype.stringForNode(e.contextNode)):arguments[1].evaluate(e).number()},S.sum=function(){var e=arguments[0],t;if(arguments.length!=2||!C.instance_of(t=arguments[1].evaluate(e),u))throw new Error("Function sum expects (node-set)");t=t.toUnsortedArray();for(var c=0,h=0;h<t.length;h++)c+=new O(u.prototype.stringForNode(t[h])).numberValue();return new O(c)},S.floor=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function floor expects (number)");return new O(Math.floor(arguments[1].evaluate(e).numberValue()))},S.ceiling=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function ceiling expects (number)");return new O(Math.ceil(arguments[1].evaluate(e).numberValue()))},S.round=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function round expects (number)");return new O(Math.round(arguments[1].evaluate(e).numberValue()))};var C=new Object;C.isAttribute=function(e){return e&&(e.nodeType===2||e.ownerElement)},C.splitQName=function(e){var t=e.indexOf(":");return t==-1?[null,e]:[e.substring(0,t),e.substring(t+1)]},C.resolveQName=function(e,t,c,h){var p=C.splitQName(e);return p[0]!=null?p[0]=t.getNamespace(p[0],c):h?(p[0]=t.getNamespace("",c),p[0]==null&&(p[0]="")):p[0]="",p},C.isSpace=function(e){return e==9||e==13||e==10||e==32},C.isLetter=function(e){return e>=65&&e<=90||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=255||e>=256&&e<=305||e>=308&&e<=318||e>=321&&e<=328||e>=330&&e<=382||e>=384&&e<=451||e>=461&&e<=496||e>=500&&e<=501||e>=506&&e<=535||e>=592&&e<=680||e>=699&&e<=705||e==902||e>=904&&e<=906||e==908||e>=910&&e<=929||e>=931&&e<=974||e>=976&&e<=982||e==986||e==988||e==990||e==992||e>=994&&e<=1011||e>=1025&&e<=1036||e>=1038&&e<=1103||e>=1105&&e<=1116||e>=1118&&e<=1153||e>=1168&&e<=1220||e>=1223&&e<=1224||e>=1227&&e<=1228||e>=1232&&e<=1259||e>=1262&&e<=1269||e>=1272&&e<=1273||e>=1329&&e<=1366||e==1369||e>=1377&&e<=1414||e>=1488&&e<=1514||e>=1520&&e<=1522||e>=1569&&e<=1594||e>=1601&&e<=1610||e>=1649&&e<=1719||e>=1722&&e<=1726||e>=1728&&e<=1742||e>=1744&&e<=1747||e==1749||e>=1765&&e<=1766||e>=2309&&e<=2361||e==2365||e>=2392&&e<=2401||e>=2437&&e<=2444||e>=2447&&e<=2448||e>=2451&&e<=2472||e>=2474&&e<=2480||e==2482||e>=2486&&e<=2489||e>=2524&&e<=2525||e>=2527&&e<=2529||e>=2544&&e<=2545||e>=2565&&e<=2570||e>=2575&&e<=2576||e>=2579&&e<=2600||e>=2602&&e<=2608||e>=2610&&e<=2611||e>=2613&&e<=2614||e>=2616&&e<=2617||e>=2649&&e<=2652||e==2654||e>=2674&&e<=2676||e>=2693&&e<=2699||e==2701||e>=2703&&e<=2705||e>=2707&&e<=2728||e>=2730&&e<=2736||e>=2738&&e<=2739||e>=2741&&e<=2745||e==2749||e==2784||e>=2821&&e<=2828||e>=2831&&e<=2832||e>=2835&&e<=2856||e>=2858&&e<=2864||e>=2866&&e<=2867||e>=2870&&e<=2873||e==2877||e>=2908&&e<=2909||e>=2911&&e<=2913||e>=2949&&e<=2954||e>=2958&&e<=2960||e>=2962&&e<=2965||e>=2969&&e<=2970||e==2972||e>=2974&&e<=2975||e>=2979&&e<=2980||e>=2984&&e<=2986||e>=2990&&e<=2997||e>=2999&&e<=3001||e>=3077&&e<=3084||e>=3086&&e<=3088||e>=3090&&e<=3112||e>=3114&&e<=3123||e>=3125&&e<=3129||e>=3168&&e<=3169||e>=3205&&e<=3212||e>=3214&&e<=3216||e>=3218&&e<=3240||e>=3242&&e<=3251||e>=3253&&e<=3257||e==3294||e>=3296&&e<=3297||e>=3333&&e<=3340||e>=3342&&e<=3344||e>=3346&&e<=3368||e>=3370&&e<=3385||e>=3424&&e<=3425||e>=3585&&e<=3630||e==3632||e>=3634&&e<=3635||e>=3648&&e<=3653||e>=3713&&e<=3714||e==3716||e>=3719&&e<=3720||e==3722||e==3725||e>=3732&&e<=3735||e>=3737&&e<=3743||e>=3745&&e<=3747||e==3749||e==3751||e>=3754&&e<=3755||e>=3757&&e<=3758||e==3760||e>=3762&&e<=3763||e==3773||e>=3776&&e<=3780||e>=3904&&e<=3911||e>=3913&&e<=3945||e>=4256&&e<=4293||e>=4304&&e<=4342||e==4352||e>=4354&&e<=4355||e>=4357&&e<=4359||e==4361||e>=4363&&e<=4364||e>=4366&&e<=4370||e==4412||e==4414||e==4416||e==4428||e==4430||e==4432||e>=4436&&e<=4437||e==4441||e>=4447&&e<=4449||e==4451||e==4453||e==4455||e==4457||e>=4461&&e<=4462||e>=4466&&e<=4467||e==4469||e==4510||e==4520||e==4523||e>=4526&&e<=4527||e>=4535&&e<=4536||e==4538||e>=4540&&e<=4546||e==4587||e==4592||e==4601||e>=7680&&e<=7835||e>=7840&&e<=7929||e>=7936&&e<=7957||e>=7960&&e<=7965||e>=7968&&e<=8005||e>=8008&&e<=8013||e>=8016&&e<=8023||e==8025||e==8027||e==8029||e>=8031&&e<=8061||e>=8064&&e<=8116||e>=8118&&e<=8124||e==8126||e>=8130&&e<=8132||e>=8134&&e<=8140||e>=8144&&e<=8147||e>=8150&&e<=8155||e>=8160&&e<=8172||e>=8178&&e<=8180||e>=8182&&e<=8188||e==8486||e>=8490&&e<=8491||e==8494||e>=8576&&e<=8578||e>=12353&&e<=12436||e>=12449&&e<=12538||e>=12549&&e<=12588||e>=44032&&e<=55203||e>=19968&&e<=40869||e==12295||e>=12321&&e<=12329},C.isNCNameChar=function(e){return e>=48&&e<=57||e>=1632&&e<=1641||e>=1776&&e<=1785||e>=2406&&e<=2415||e>=2534&&e<=2543||e>=2662&&e<=2671||e>=2790&&e<=2799||e>=2918&&e<=2927||e>=3047&&e<=3055||e>=3174&&e<=3183||e>=3302&&e<=3311||e>=3430&&e<=3439||e>=3664&&e<=3673||e>=3792&&e<=3801||e>=3872&&e<=3881||e==46||e==45||e==95||C.isLetter(e)||e>=768&&e<=837||e>=864&&e<=865||e>=1155&&e<=1158||e>=1425&&e<=1441||e>=1443&&e<=1465||e>=1467&&e<=1469||e==1471||e>=1473&&e<=1474||e==1476||e>=1611&&e<=1618||e==1648||e>=1750&&e<=1756||e>=1757&&e<=1759||e>=1760&&e<=1764||e>=1767&&e<=1768||e>=1770&&e<=1773||e>=2305&&e<=2307||e==2364||e>=2366&&e<=2380||e==2381||e>=2385&&e<=2388||e>=2402&&e<=2403||e>=2433&&e<=2435||e==2492||e==2494||e==2495||e>=2496&&e<=2500||e>=2503&&e<=2504||e>=2507&&e<=2509||e==2519||e>=2530&&e<=2531||e==2562||e==2620||e==2622||e==2623||e>=2624&&e<=2626||e>=2631&&e<=2632||e>=2635&&e<=2637||e>=2672&&e<=2673||e>=2689&&e<=2691||e==2748||e>=2750&&e<=2757||e>=2759&&e<=2761||e>=2763&&e<=2765||e>=2817&&e<=2819||e==2876||e>=2878&&e<=2883||e>=2887&&e<=2888||e>=2891&&e<=2893||e>=2902&&e<=2903||e>=2946&&e<=2947||e>=3006&&e<=3010||e>=3014&&e<=3016||e>=3018&&e<=3021||e==3031||e>=3073&&e<=3075||e>=3134&&e<=3140||e>=3142&&e<=3144||e>=3146&&e<=3149||e>=3157&&e<=3158||e>=3202&&e<=3203||e>=3262&&e<=3268||e>=3270&&e<=3272||e>=3274&&e<=3277||e>=3285&&e<=3286||e>=3330&&e<=3331||e>=3390&&e<=3395||e>=3398&&e<=3400||e>=3402&&e<=3405||e==3415||e==3633||e>=3636&&e<=3642||e>=3655&&e<=3662||e==3761||e>=3764&&e<=3769||e>=3771&&e<=3772||e>=3784&&e<=3789||e>=3864&&e<=3865||e==3893||e==3895||e==3897||e==3902||e==3903||e>=3953&&e<=3972||e>=3974&&e<=3979||e>=3984&&e<=3989||e==3991||e>=3993&&e<=4013||e>=4017&&e<=4023||e==4025||e>=8400&&e<=8412||e==8417||e>=12330&&e<=12335||e==12441||e==12442||e==183||e==720||e==721||e==903||e==1600||e==3654||e==3782||e==12293||e>=12337&&e<=12341||e>=12445&&e<=12446||e>=12540&&e<=12542},C.coalesceText=function(e){for(var t=e.firstChild;t!=null;t=t.nextSibling)if(t.nodeType==3||t.nodeType==4){var c=t.nodeValue,h=t;for(t=t.nextSibling;t!=null&&(t.nodeType==3||t.nodeType==4);){c+=t.nodeValue;var p=t;t=t.nextSibling,p.parentNode.removeChild(p)}if(h.nodeType==4){var d=h.parentNode;if(h.nextSibling==null)d.removeChild(h),d.appendChild(d.ownerDocument.createTextNode(c));else{var I=h.nextSibling;d.removeChild(h),d.insertBefore(d.ownerDocument.createTextNode(c),I)}}else h.nodeValue=c;if(t==null)break}else t.nodeType==1&&C.coalesceText(t)},C.instance_of=function(e,t){for(;e!=null;){if(e.constructor===t)return!0;if(e===Object)return!1;e=e.constructor.superclass}return!1},C.getElementById=function(e,t){if(e.nodeType==1&&(e.getAttribute("id")==t||e.getAttributeNS(null,"id")==t))return e;for(var c=e.firstChild;c!=null;c=c.nextSibling){var h=C.getElementById(c,t);if(h!=null)return h}return null};var J=function(){function e(c,h){var p=h?": "+h.toString():"";switch(c){case t.INVALID_EXPRESSION_ERR:return"Invalid expression"+p;case t.TYPE_ERR:return"Type error"+p}return null}function t(c,h,p){var d=Error.call(this,e(c,h)||p);return d.code=c,d.exception=h,d}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.superclass=Error,t.prototype.toString=function(){return this.message},t.fromMessage=function(c,h){return new t(null,h,c)},t.INVALID_EXPRESSION_ERR=51,t.TYPE_ERR=52,t}();fe.prototype={},fe.prototype.constructor=fe,fe.superclass=Object.prototype;function fe(e,t,c){this.xpath=c.parse(e),this.context=new N,this.context.namespaceResolver=new Ve(t)}fe.getOwnerDocument=function(e){return e.nodeType===9?e:e.ownerDocument},fe.detectHtmlDom=function(e){if(!e)return!1;var t=fe.getOwnerDocument(e);try{return t.implementation.hasFeature("HTML","2.0")}catch{return!0}},fe.prototype.evaluate=function(e,t,c){this.context.expressionContextNode=e,this.context.caseInsensitive=fe.detectHtmlDom(e);var h=this.xpath.evaluate(this.context);return new G(h,t)},Ve.prototype={},Ve.prototype.constructor=Ve,Ve.superclass=Object.prototype;function Ve(e){this.xpathNSResolver=e}Ve.prototype.getNamespace=function(e,t){return this.xpathNSResolver==null?null:this.xpathNSResolver.lookupNamespaceURI(e)},Ge.prototype={},Ge.prototype.constructor=Ge,Ge.superclass=Object.prototype;function Ge(e){this.node=e,this.namespaceResolver=new z}Ge.prototype.lookupNamespaceURI=function(e){return this.namespaceResolver.getNamespace(e,this.node)},G.prototype={},G.prototype.constructor=G,G.superclass=Object.prototype;function G(e,t){switch(t==G.ANY_TYPE&&(e.constructor===M?t=G.STRING_TYPE:e.constructor===O?t=G.NUMBER_TYPE:e.constructor===o?t=G.BOOLEAN_TYPE:e.constructor===u&&(t=G.UNORDERED_NODE_ITERATOR_TYPE)),this.resultType=t,t){case G.NUMBER_TYPE:this.numberValue=e.numberValue();return;case G.STRING_TYPE:this.stringValue=e.stringValue();return;case G.BOOLEAN_TYPE:this.booleanValue=e.booleanValue();return;case G.ANY_UNORDERED_NODE_TYPE:case G.FIRST_ORDERED_NODE_TYPE:if(e.constructor===u){this.singleNodeValue=e.first();return}break;case G.UNORDERED_NODE_ITERATOR_TYPE:case G.ORDERED_NODE_ITERATOR_TYPE:if(e.constructor===u){this.invalidIteratorState=!1,this.nodes=e.toArray(),this.iteratorIndex=0;return}break;case G.UNORDERED_NODE_SNAPSHOT_TYPE:case G.ORDERED_NODE_SNAPSHOT_TYPE:if(e.constructor===u){this.nodes=e.toArray(),this.snapshotLength=this.nodes.length;return}break}throw new J(J.TYPE_ERR)}G.prototype.iterateNext=function(){if(this.resultType!=G.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=G.ORDERED_NODE_ITERATOR_TYPE)throw new J(J.TYPE_ERR);return this.nodes[this.iteratorIndex++]},G.prototype.snapshotItem=function(e){if(this.resultType!=G.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=G.ORDERED_NODE_SNAPSHOT_TYPE)throw new J(J.TYPE_ERR);return this.nodes[e]},G.ANY_TYPE=0,G.NUMBER_TYPE=1,G.STRING_TYPE=2,G.BOOLEAN_TYPE=3,G.UNORDERED_NODE_ITERATOR_TYPE=4,G.ORDERED_NODE_ITERATOR_TYPE=5,G.UNORDERED_NODE_SNAPSHOT_TYPE=6,G.ORDERED_NODE_SNAPSHOT_TYPE=7,G.ANY_UNORDERED_NODE_TYPE=8,G.FIRST_ORDERED_NODE_TYPE=9;function pt(e,t){e.createExpression=function(c,h){try{return new fe(c,h,t)}catch(p){throw new J(J.INVALID_EXPRESSION_ERR,p)}},e.createNSResolver=function(c){return new Ge(c)},e.evaluate=function(c,h,p,d,I){if(d<0||d>9)throw{code:0,toString:function(){return"Request type not supported"}};return e.createExpression(c,p,t).evaluate(h,d,I)}}try{var ze=!0;try{document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)&&(ze=!1)}catch{}ze&&pt(document,new A)}catch{}pt(s,new A),function(){var e=new A,t=new z,c=new H,h=new T;function p(D){return{getNamespace:function(K,pe){var de=D(K,pe);return de||t.getNamespace(K,pe)}}}function d(D){return p(D.getNamespace.bind(D))}function I(D){return p(function(K){return D[K]})}function k(D){return D&&typeof D.getNamespace=="function"?d(D):typeof D=="function"?p(D):typeof D=="object"?I(D):t}function Q(D){if(D===null||typeof D>"u"||D instanceof M||D instanceof o||D instanceof O||D instanceof u)return D;switch(typeof D){case"string":return new M(D);case"boolean":return new o(D);case"number":return new O(D)}var K=new u;return K.addArray([].concat(D)),K}function B(D){return function(K){var pe=Array.prototype.slice.call(arguments,1).map(function(Nt){return Nt.evaluate(K)}),de=D.apply(this,[].concat(K,pe));return Q(de)}}function q(D){return{getFunction:function(K,pe){var de=D(K,pe);return de?B(de):c.getFunction(K,pe)}}}function we(D){return q(D.getFunction.bind(D))}function te(D){return q(function(K){return D[K]})}function Xe(D){return D&&typeof D.getFunction=="function"?we(D):typeof D=="function"?q(D):typeof D=="object"?te(D):c}function rt(D){return{getVariable:function(K,pe){var de=D(K,pe);return Q(de)}}}function ht(D){if(D){if(typeof D.getVariable=="function")return rt(D.getVariable.bind(D));if(typeof D=="function")return rt(D);if(typeof D=="object")return rt(function(K){return D[K]})}return h}function dt(D,K,pe){D in pe&&(K[D]=pe[D])}function Bt(D){var K=new N;return D?(K.namespaceResolver=k(D.namespaces),K.functionResolver=Xe(D.functions),K.variableResolver=ht(D.variables),K.expressionContextNode=D.node,dt("allowAnyNamespaceForNoPrefix",K,D),dt("isHtml",K,D)):K.namespaceResolver=t,K}function Qe(D,K){var pe=Bt(K);return D.evaluate(pe)}var Et={evaluate:function(D){return Qe(this.expression,D)},evaluateNumber:function(D){return this.evaluate(D).numberValue()},evaluateString:function(D){return this.evaluate(D).stringValue()},evaluateBoolean:function(D){return this.evaluate(D).booleanValue()},evaluateNodeSet:function(D){return this.evaluate(D).nodeset()},select:function(D){return this.evaluateNodeSet(D).toArray()},select1:function(D){return this.select(D)[0]}};function wt(D){var K=e.parse(D);return Object.create(Et,{expression:{value:K}})}s.parse=wt}(),je(s,{XPath:oe,XPathParser:A,XPathResult:G,Step:R,PathExpr:P,NodeTest:F,LocationPath:ee,OrOperation:Fe,AndOperation:Oe,BarOperation:Z,EqualsOperation:Ie,NotEqualOperation:Be,LessThanOperation:be,GreaterThanOperation:ue,LessThanOrEqualOperation:ye,GreaterThanOrEqualOperation:Ee,PlusOperation:ve,MinusOperation:Le,MultiplyOperation:Pe,DivOperation:Me,ModOperation:_e,UnaryMinusOperation:he,FunctionCall:Ae,VariableReference:Ue,XPathContext:N,XNodeSet:u,XBoolean:o,XString:M,XNumber:O,NamespaceResolver:z,FunctionResolver:H,VariableResolver:T,Utilities:C}),s.select=function(e,t,c){return s.selectWithResolver(e,t,null,c)},s.useNamespaces=function(e){var t={mappings:e||{},lookupNamespaceURI:function(c){return this.mappings[c]}};return function(c,h,p){return s.selectWithResolver(c,h,t,p)}},s.selectWithResolver=function(e,t,c,h){var p=new fe(e,c,new A),d=G.ANY_TYPE,I=p.evaluate(t,d,null);return I.resultType==G.STRING_TYPE?I=I.stringValue:I.resultType==G.NUMBER_TYPE?I=I.numberValue:I.resultType==G.BOOLEAN_TYPE?I=I.booleanValue:(I=I.nodes,h&&(I=I[0])),I},s.select1=function(e,t){return s.select(e,t,!0)}})(a)})(v);const Yt=({dataChunk:n,indexKey:a,chunkSize:s})=>{var y,E;if(!n[0].value&&!((y=n[1])!=null&&y.value)&&!((E=n[2])!=null&&E.value))return null;let l=null,f=n;return s===3&&(f=n.slice(0,2),[l]=n.slice(2)),w.createElement(w.Fragment,null,w.createElement("tr",null,f.map((m,b)=>{var $,W;if(!m.value)return null;let U=1;return(b===0&&(!f[b+1]||!f[b+1].value)||b===1&&(!f[b-1]||!f[b-1].value))&&(U=3),w.createElement(w.Fragment,{key:`${f[0].label}-${String(f[0].value)}-${b}-${a}-${(($=f[1])==null?void 0:$.label)||""}-${((W=f[1])==null?void 0:W.value)||""}`},w.createElement("td",{className:"ctw-ccda-common-td1",rowSpan:l&&l.value&&b===0?2:1},m.label.replace(/:/g,"")),w.createElement("td",{className:"ctw-ccda-common-td2",colSpan:U,rowSpan:l&&l.value&&b===0?2:1},m.value))})),l&&l.value&&w.createElement("tr",null,w.createElement("td",{className:"ctw-ccda-common-td1"},l.label.replace(/:/g,"")),w.createElement("td",{className:"ctw-ccda-common-td2"},l.value)))};try{Yt.displayName="BasicRow",Yt.__docgenInfo={description:"",displayName:"BasicRow",props:{dataChunk:{defaultValue:null,description:"",name:"dataChunk",required:!0,type:{name:"TableInfo[]"}},indexKey:{defaultValue:null,description:"",name:"indexKey",required:!0,type:{name:"number"}},chunkSize:{defaultValue:null,description:"",name:"chunkSize",required:!1,type:{name:"enum",value:[{value:"2"},{value:"3"}]}}}}}catch{}const jt=({tuple:n,indexKey:a})=>!n[0].value&&!n[1].value?null:w.createElement("tr",null,n.map((s,l)=>{if(!s.value)return null;let f=1;return(l===0&&!n[1].value||l===1&&!n[0].value)&&(f=3),w.createElement(w.Fragment,{key:`${n[0].label}-${n[0].value}-${l}-${a}-${n[1].label||""}-${n[1].value}`},w.createElement("td",{className:"ctw-ccda-common-td1"},s.label.replace(/:/g,"")),w.createElement("td",{className:"ctw-ccda-common-td2",colSpan:f},s.value))}));try{jt.displayName="TupleRow",jt.__docgenInfo={description:"",displayName:"TupleRow",props:{tuple:{defaultValue:null,description:"",name:"tuple",required:!0,type:{name:"[TableInfo, TableInfo]"}},indexKey:{defaultValue:null,description:"",name:"indexKey",required:!0,type:{name:"number"}}}}}catch{}var Qn=wr,Jn=Cn,Kn=Jn(function(n,a,s){return a=a.toLowerCase(),n+(s?Qn(a):a)}),Zn=Kn,ei=_n,Kr=/[\\^$.*+?()[\]{}|]/g,ti=RegExp(Kr.source);function ri(n){return n=ei(n),n&&ti.test(n)?n.replace(Kr,"\\$&"):n}var ni=ri,ii=Nn;function ai(n,a){var s;return ii(n,function(l,f,y){return s=a(l,f,y),!s}),!!s}var oi=ai,si=bn,ui=Dn,li=oi,ci=tt,pi=Tn;function fi(n,a,s){var l=ci(n)?si:li;return s&&pi(n,a,s)&&(a=void 0),l(n,ui(a))}var mi=fi;const Te=({data:n,chunkSize:a=2})=>{const[s,l]=xn(n,y=>!tt(y)),f=vn(s,a);return w.createElement("table",{className:"ctw-ccda-common-table"},w.createElement("tbody",null,f.map((y,E)=>w.createElement(Yt,{key:`${y[0].label}-${E}`,dataChunk:y,chunkSize:a,indexKey:E})),l.map((y,E)=>w.createElement(jt,{key:`${y[0].label}-${y[1].label}-${E}`,tuple:y,indexKey:E}))))};try{Te.displayName="Table",Te.__docgenInfo={description:"",displayName:"Table",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"(TableInfo | [TableInfo, TableInfo])[]"}},chunkSize:{defaultValue:{value:"2"},description:"",name:"chunkSize",required:!1,type:{name:"enum",value:[{value:"2"},{value:"3"}]}}}}}catch{}const Lr=n=>{var s;if(n.text)return n.text;let a="";return a+=n.use?`${wr(n.use)}: `:"",a+=ne(n.line)?"":`${(s=n.line)==null?void 0:s.join(`
`)}
`,a+=n.city?`${n.city}, `:"",a+=n.state?`${n.state} `:"",a+=n.postalCode||"",a+=n.country?`
${n.country}`:"",a},hi=n=>ne(n)?"":tt(n)?n.map(Lr).join(`
`):Lr(n);function di(n){return tt(n)&&n.every(a=>typeof a=="object")}function gi(n){return tt(n)&&n.every(a=>typeof a=="string")}const Pr=n=>{if(n.text)return n.text;let a="";return n.given&&n.given.length>0&&(a=n.given.join(" "),n.family&&(a=`${a} ${n.family}`)),n.prefix&&n.prefix.length>0&&(a=`${n.prefix.join(" ")} ${a}`),a},Zr=n=>ne(n)?"":typeof n=="string"?n:gi(n)?n.reduce((a,s,l)=>`${a}${l===0?"":`
`}${s}`,""):di(n)?n.map(Pr).join(", "):Pr(n),Mr=({use:n,system:a,value:s})=>{const l=n?` (${n})`:"";return`${a?`${wr(a)}${l}:`:""} ${s}`.trim()},yi=n=>ne(n)?"":tt(n)?n.map(Mr).join(`
`):Mr(n),Ei={BAD:"bad",DIR:"direct",H:"home",HP:"primary home",HV:"vacation home",PHYS:"physical",PST:"postal",PUB:"public",TMP:"temporary",WP:"work",CONF:"confidential"},en=n=>{if(!n)return"";const a=s=>{const l=String(v.select1("string(@use)",s)),f={line:yt(v.select("*[name()='streetAddressLine']",s),y=>String(v.select("string(text())",y))).filter(Boolean),city:String(v.select("string(*[name()='city'])",s)),state:String(v.select("string(*[name()='state'])",s)),postalCode:String(v.select("string(*[name()='postalCode'])",s)),country:String(v.select("string(*[name()='country'])",s)),use:Ei[l]};return hi(f)};return tt(n)?n.map(a).join(`
`):a(n)},xi={BAD:"bad",CONF:"confidential",OLD:"old",H:"home",HP:"primary home",HV:"vacation Home",TMP:"temporary",WP:"work",DIR:"direct",PUB:"public",AS:"answering service",EC:"emergency:",MC:"mobile",PG:"pager"},Ut={tel:"phone",mailto:"email"},vi=n=>{if(!n)return"";const a=s=>{const f=String(v.select1("string(@value)",s)).split(":");let y,E;if(f.length===2&&([y,E]=f),f.length===1&&([E]=f),!E)return"";const m=E.includes("@")?Ut.mailto:Ut.tel,U={system:Ut[y]||m,value:E,use:xi[String(v.select1("string(@use)",s))]};return yi(U)};return tt(n)?n.map(a).join(`
`):a(n)},Se=(n,a)=>{const s=en(n),l=vi(a);return`${s||""}${s&&l?`
`:""}${l||""}`},Ai={A:"Artist/Stage",ABC:"Alphabetic",ASGN:"Assigned",C:"License",I:"Indigenous/Tribal",IDE:"Ideographic",L:"Legal",P:"Pseudonym",PHON:"Phonetic",R:"Religious",SNDX:"Soundex",SRCH:"Search",SYL:"Syllabic"},Ze=n=>{if(!n)return"";const a=s=>{const l={use:Ai[String(v.select("string(@use)",s))],given:yt(v.select("(*[name()='given'])",s),f=>String(v.select1("string(text())",f))),family:String(v.select1("string(*[name()='family']/text())",s)),prefix:yt(v.select("(*[name()='prefix'])",s),f=>String(v.select1("string(text())",f))),suffix:yt(v.select("(*[name()='suffix'])",s),f=>String(v.select1("string(text())",f)))};return Zr(l)};return tt(n)?n.map(a).join(`
`):a(n)},at=n=>{if(!n)return"";const a=String(v.select1("string(@root)",n)),s=String(v.select1("string(@extension)",n));return`${s}${s?" (":""}${a}${s?")":""}`};function wi(n,a){Yr(2,arguments);var s=Rt(n),l=Rt(a);return s.getTime()<l.getTime()}function Ni(n,a){Yr(2,arguments);var s=Rt(n),l=Rt(a);return s.getTime()===l.getTime()}const Ti=n=>{const a=n.replace(/:/g,""),s=a.lastIndexOf("+"),l=a.lastIndexOf("-");if(s>0)return{index:a.length-s-1,timezoneSign:"+"};if(l>0){const f=a[l-3];return Wr(Number(f))||f==="T"?{index:a.length-l-1,timezoneSign:"-"}:{index:-1}}return{index:-1}},ot=n=>n&&n.length>1&&n.split("").every(a=>Wr(Number(a))),bi=({year:n,month:a,day:s,hour:l,minute:f,second:y,timezoneHour:E,timezoneMinute:m,timezoneSign:b})=>{let U="";return ot(n)&&(U+=n,ot(a)&&(U+=`-${a}`,ot(s)&&(U+=`-${s}`,ot(l)?(U+=`T${l}`,ot(f)?U+=`:${f}`:U+=":00",ot(y)?U+=`:${y}`:U+=":00",b&&ot(E)?(U+=`${b}${E}`,ot(m)?U+=`:${m}`:U+=":00"):U+="-00:00"):U+="T00:00:00-00:00"))),U},He=n=>{if(!n)return"";const{index:a,timezoneSign:s}=Ti(n);let l=n.replace(/T/g,"").replace(/-/g,"").replace("+","").replace(/:/g,""),f="";(a===4||a===2)&&l.length>9&&(f=l.substring(l.length-a),l=l.substring(0,l.length-a));const y=l.slice(0,4),E=l.slice(4,6),m=l.slice(6,8),b=l.slice(8,10),U=l.slice(10,12),$=l.slice(12,14),W=f.slice(0,2),se=f.slice(2);return m?bi({year:y,month:E,day:m,hour:b,minute:U,second:$,timezoneHour:W,timezoneMinute:se,timezoneSign:s}):""},Tr=n=>{if(!n)return{};const a=String(v.select1("string(*[name()='low']/@value)",n)),s=String(v.select1("string(*[name()='high']/@value)",n));if(!a&&!s)return{};if(a&&!s)return{start:He(a)};if(!a&&s)return{end:He(s)};let l=He(a),f=He(s);return(l.includes("T")||f.includes("T"))&&(l=He(l),f=He(f)),wi(new Date(l),new Date(f))||Ni(new Date(l),new Date(f))?{start:l,end:f}:{start:l}},Ft=(n,a,s,l=!0)=>{if(tt(a))return a.reduce((y,E)=>Ft(y,E,s),n);const f=l?ni:Sn;return n.replace(new RegExp(f(a),"g"),s)},xt=(n,a,s)=>{const l=[`</${a}>`,`<${a}>`,`</${a}`,`<${a}`],f=[`</${s}>`,`<${s}>`,`</${s}`,`<${s}`];return l.reduce((y,E,m)=>Ft(y,l[m],f[m]),n)},_i=n=>{let a=n.toString();return a=Ft(a,["<list/>","<item/>","<content/>","<paragraph/>","<section/>","<br/>",'<text xmlns="urn:hl7-org:v3">',"<text />","<text/>"],""),a=Ft(a,' styleCode="(.*?)"',"",!1),a=xt(a,"section","div"),a=xt(a,"list","ul"),a=xt(a,"item","li"),a=xt(a,"content","div"),a=xt(a,"paragraph","p"),a},mt=n=>{if(!n)return"";const[a,s]=n.split("T");return jr(new Date(a),"MMMM dd, yyyy")+(s.split("").some(l=>Number(l)>0)?`, ${s}`:"")},Di=n=>!!n,br=n=>!!n,Si=n=>{const a=v.select("*[name()='ClinicalDocument']/*[name()='authenticator']",n);if(!ne(a))return a.map(s=>{const l=v.select1("*[name()='assignedEntity']",s);if(!l)return;const f=v.select1("*[name()='assignedPerson']",l),y=Ze(v.select("*[name()='name']",f)),E=Se(v.select("*[name()='addr']",l),v.select("*[name()='telecom']",l)),m=He(String(v.select1("string(*[name()='time']/@value)",s)));return{name:y,contactDetails:E,time:m}}).filter(br)},Xt=({document:n})=>{const a=Si(n);if(!a||ne(a))return null;const s=a.flatMap(l=>[{label:"Authenticator",value:`${l.name||"Unknown"}${l.time?` signed at ${l.time}`:""}`},{label:"Contact Details",value:l.contactDetails}]);return w.createElement(Te,{data:s})};try{Xt.displayName="Authenticator",Xt.__docgenInfo={description:"",displayName:"Authenticator",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const tn=n=>{const a=v.select("*[name()='ClinicalDocument']/*[name()='author']",n);return ne(a)?void 0:a.map(l=>{const f=v.select1("*[name()='assignedAuthor']/*[name()='assignedPerson']/*[name()='name']",l),y=v.select1("*[name()='assignedAuthor']/*[name()='assignedAuthoringDevice']",l);let E="";if(f)E=Ze(f);else if(y){const U=String(v.select1("string(*[name()='manufacturerModelName'])",y)),$=String(v.select1("string(*[name()='softwareName'])",y));E=[U,$].filter(Boolean).join("; ")}const m=String(v.select1("string(*[name()='assignedAuthor']/*[name()='representedOrganization']/*[name()='name'])",l)),b=He(String(v.select1("string(*[name()='time'])",l)));return[{label:"Name:",value:E},{label:"Organization:",value:m},{label:"Authored on",value:b}]}).reduce((l,f,y)=>({...l,[`author${y+1}`]:f}),{})},Ci=n=>{const a=v.select("*[name()='ClinicalDocument']/*[name()='author']",n);if(ne(a))return;const s=tn(n);return a.map((l,f)=>{const y=v.select1("*[name()='assignedAuthor']",l),E=Se(v.select("*[name()='addr']",y),v.select("*[name()='telecom']",y)),m=v.select1("*[name()='representedOrganization']",y),b={name:s[`author${f+1}`][0].value,contactDetails:E,organization:{name:s[`author${f+1}`][1].value,contactDetails:""}};if(m){const U=Se(v.select("*[name()='addr']",m),v.select("*[name()='telecom']",m));return{...b,organization:{...b.organization,contactDetails:U}}}return b})},Qt=({document:n})=>{const a=Ci(n);if(!a||ne(a))return null;const s=a.flatMap(l=>[{label:"Author",value:`${l.name||"Unknown"}${l.organization.name?`, Organization: ${l.organization.name}`:""}`},{label:"Contact Details",value:l.contactDetails},{label:"Contact Details (Organization)",value:l.organization.contactDetails}]);return w.createElement(Te,{data:s,chunkSize:3})};try{Qt.displayName="Author",Qt.__docgenInfo={description:"",displayName:"Author",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const rn=n=>{const a=v.select("*[name()='ClinicalDocument']/*[name()='authorization']/*[name()='consent']",n);return ne(a)?void 0:a.map(l=>{const f=at(v.select1("*[name()='id']",l)),y=String(v.select1("string(*[name()='code']/@displayName)",l)),E=String(v.select1("string(*[name()='statusCode']/@code)",l));return[{label:"ID:",value:f},{label:"Code:",value:y},{label:"Status:",value:E}]}).reduce((l,f,y)=>({...l,[`consent${y+1}`]:f}),{})},Ri=n=>{const a=rn(n);return Object.values(a||{})},Jt=({document:n})=>{const a=Ri(n);if(ne(a))return null;const s=a.flatMap(l=>[{label:"Consent",value:`Order: ${l[0].value||"Unknown"}, ${l[1].value||"Unknown"}, ${l[2].value||"Unknown"}`},{label:"",value:""}]);return w.createElement(Te,{data:s})};try{Jt.displayName="Authorization",Jt.__docgenInfo={description:"",displayName:"Authorization",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Fi=n=>{const a=v.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']",n);if(!a)return;const s=String(v.select1("string(*[name()='name'])",a)),l=Se(v.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']/*[name()='addr']",n),v.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']/*[name()='telecom']",n));return{name:s,contactDetails:l}},Kt=({document:n})=>{const a=Fi(n);if(!a)return null;const{name:s,contactDetails:l}=a,f=[{label:"Custodian",value:s},{label:"Contact Details",value:l}];return w.createElement(Te,{data:f})};try{Kt.displayName="Custodian",Kt.__docgenInfo={description:"",displayName:"Custodian",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Oi=n=>{const a=v.select1("*[name()='ClinicalDocument']/*[name()='dataEnterer']/*[name()='assignedEntity']",n);if(!a)return;const s=v.select1("*[name()='assignedPerson']",a),l=Ze(v.select("*[name()='name']",s)),f=Se(v.select("*[name()='addr']",a),v.select("*[name()='telecom']",a));return{name:l,contactDetails:f}},Zt=({document:n})=>{const a=Oi(n);if(!a)return null;const{name:s,contactDetails:l}=a,f=[{label:"Data Enterer",value:s},{label:"Contact Details",value:l}];return w.createElement(Te,{data:f})};try{Zt.displayName="DataEnterer",Zt.__docgenInfo={description:"",displayName:"DataEnterer",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Ii={N:"normal",R:"restricted",V:"very restricted"},Bi=n=>{const a=at(v.select1("*[name()='ClinicalDocument']/*[name()='id']",n)),s=He(String(v.select1("string(*[name()='ClinicalDocument']/*[name()='effectiveTime']/@value)",n))),l=mt(s),f=String(v.select1("string(*[name()='ClinicalDocument']/*[name()='versionNumber']/@value)",n)),y=at(v.select1("*[name()='ClinicalDocument']/*[name()='setId']",n)),E=Ii[String(v.select1("string(*[name()='ClinicalDocument']/*[name()='confidentialityCode']/@code)",n))],m=String(v.select1("string(*[name()='ClinicalDocument']/*[name()='code']/@displayName)",n)),b=String(v.select1("string(*[name()='ClinicalDocument']/*[name()='languageCode']/@code)",n));return{id:a,createdOn:l,version:f,setId:y,confidentialityCode:E,code:m,languageCode:b}},er=({document:n})=>{const{id:a,createdOn:s,version:l,setId:f,confidentialityCode:y,code:E,languageCode:m}=Bi(n),b=[{label:"Document",value:w.createElement(w.Fragment,null,w.createElement("b",null,"ID: "),a,f&&w.createElement(w.Fragment,null,w.createElement("br",null),w.createElement("b",null,"Set ID: "),f))},{label:"Created on",value:s},{label:"Version",value:l||"Unknown"},{label:"Confidentiality",value:y},{label:"Code",value:E},{label:"Language",value:m}];return w.createElement(Te,{data:b})};try{er.displayName="Document",er.__docgenInfo={description:"",displayName:"Document",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const nn=n=>{const a=v.select("//*[name()='documentationOf']/*[name()='serviceEvent']",n);return ne(a)?void 0:a.map(l=>{const f=v.select1("*[name()='effectiveTime']",l),y=Tr(f),m=v.select("*[name()='performer']/*[name()='assignedEntity']/*[name()='assignedPerson']/*[name()='name']",l).map(b=>Ze(b));return[{label:"Date/Time:",value:y.start||y.end?`from ${mt(y.start)||"unknown"} to ${mt(y.end)||"unknown"}`:""},...m.map(b=>({label:"Performer:",value:b}))]}).reduce((l,f,y)=>({...l,[`documentationOf${y+1}`]:f}),{})},Li=n=>{const a=v.select("//*[name()='documentationOf']/*[name()='serviceEvent']",n);if(ne(a))return;const s=nn(n);return a.map((l,f)=>{const E=v.select("*[name()='performer']",l).map((m,b)=>{const U=String(v.select1("string(*[name()='functionCode']/@displayName)",m)),$=Fr(s,`documentationOf${f+1}[${b+1}].value`),W=Se(v.select("*[name()='assignedEntity']/*[name()='addr']",m),v.select("*[name()='assignedEntity']/*[name()='telecom']",m));if(!(!$&&!U&&!W))return{functionCode:U,name:$,contactDetails:W}});return{dateTime:Fr(s,`documentationOf${f+1}[0].value`),finalPerformers:E.filter(Di)}})},tr=({document:n})=>{const a=Li(n);if(!a||ne(a))return null;const s=a.flatMap(l=>[{label:"Documentation of - Date/Time",value:l.dateTime},{label:"",value:""},...l.finalPerformers.flatMap(f=>[{label:"Performer",value:`${f.name||"Unknown"}${f.functionCode?` - ${f.functionCode}`:""}`},{label:"Contact Details",value:f.contactDetails}])]);return w.createElement(Te,{data:s})};try{tr.displayName="DocumentationOf",tr.__docgenInfo={description:"",displayName:"DocumentationOf",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const an=n=>{const a=v.select1("*[name()='ClinicalDocument']/*[name()='componentOf']/*[name()='encompassingEncounter']",n);if(!a)return;const s=at(v.select1("*[name()='id']",a)),l=String(v.select1("string(*[name()='code']/@displayName)",a)),f=Tr(v.select1("*[name()='effectiveTime']",a));return[{label:"ID:",value:f.start||f.end||s?s||"Unknown":""},{label:"Type:",value:l},{label:"Date/Time:",value:f.start||f.end?`from ${mt(f.start)||"unknown"} to ${mt(f.end)||"unknown"}`:""}]},Pi=n=>{const a=v.select1("*[name()='ClinicalDocument']/*[name()='componentOf']/*[name()='encompassingEncounter']",n);if(!a)return;const s=an(n),l=String(v.select1("string(*[name()='dischargeDispositionCode']/@displayName)",a)),f=at(v.select1("*[name()='location']/*[name()='healthCareFacility']/*[name()='id']",a));return{id:s[0],type:s[1],dateTime:s[2],dischargeDisposition:l,encounterLocation:f?`ID: ${f}`:null}},rr=({document:n})=>{const a=Pi(n);if(!a)return null;const{dischargeDisposition:s,encounterLocation:l,id:f,type:y,dateTime:E}=a,m=[{label:"Encounter",value:E.value||s||l||f.value?w.createElement(w.Fragment,null,w.createElement("b",null,"ID: "),f.value||"Unknown",y.value&&w.createElement(w.Fragment,null,w.createElement("br",null),w.createElement("b",null,"Type: "),y.value)):null},{label:"Date/Time",value:E.value},{label:"Discharge Disposition",value:s},{label:"Encounter Location",value:l}];return w.createElement(Te,{data:m})};try{rr.displayName="Encounter",rr.__docgenInfo={description:"",displayName:"Encounter",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Mi=n=>{const a=v.select("*[name()='ClinicalDocument']/*[name()='informant']",n);if(!ne(a))return a.map(s=>{const l=v.select1("*[name()='assignedEntity']",s);if(l){const y=v.select1("*[name()='assignedPerson']",l),E=Ze(v.select("*[name()='name']",y)),m=Se(v.select("*[name()='addr']",l),v.select("*[name()='telecom']",l));return{name:E,contactDetails:m,relationship:""}}const f=v.select1("*[name()='relatedEntity']",s);if(f){const y=v.select1("*[name()='relatedPerson']",f),E=Ze(v.select("*[name()='name']",y)),m=Se(v.select("*[name()='addr']",f),v.select("*[name()='telecom']",f)),b=String(v.select1("string(*[name()='code']/@displayName)",f)).toLowerCase();return{name:E,contactDetails:m,relationship:b}}}).filter(br)},nr=({document:n})=>{const a=Mi(n);if(!a||ne(a))return null;const s=a.flatMap(l=>[{label:"Informant",value:`${l.name||"Unknown"}${l.relationship?` - ${l.relationship}`:""}`},{label:"Contact Details",value:l.contactDetails}]);return w.createElement(Te,{data:s})};try{nr.displayName="Informant",nr.__docgenInfo={description:"",displayName:"Informant",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Ui=n=>{const a=v.select("*[name()='ClinicalDocument']/*[name()='informationRecipient']/*[name()='intendedRecipient']",n);if(!ne(a))return a.map(s=>{const l=v.select1("*[name()='informationRecipient']",s),f=v.select1("*[name()='receivedOrganization']",s);if(l){const b=Ze(v.select1("*[name()='name']",l)),U=String(v.select1("string(*[name()='name']/node())",f));return{name:b,contactDetails:"",organization:{name:U,contactDetails:""}}}const y=v.select("*[name()='id']",s).map(at).join(", "),E=Se(v.select("*[name()='addr']",s),v.select("*[name()='telecom']",s)),m={name:y,contactDetails:E,organization:{name:"",contactDetails:""}};if(f){const b=String(v.select1("string(*[name()='name']/node())",f)),U=Se(v.select("*[name()='addr']",f),v.select("*[name()='telecom']",f));return{...m,organization:{name:b,contactDetails:U}}}return m})},ir=({document:n})=>{const a=Ui(n);if(!a||ne(a))return null;const s=a.flatMap(l=>[{label:"Information Recipient",value:l.name},{label:"Contact Details",value:l.contactDetails},{label:"Organization",value:l.organization.name},{label:"Contact Details (Organization)",value:l.organization.contactDetails}]);return w.createElement(Te,{data:s})};try{ir.displayName="InformationRecipient",ir.__docgenInfo={description:"",displayName:"InformationRecipient",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const on=n=>{const a=v.select("*[name()='ClinicalDocument']/*[name()='inFulfillmentOf']/*[name()='order']",n);return ne(a)?void 0:a.map(l=>{const f=at(v.select1("*[name()='id']",l)),y=String(v.select1("string(*[name()='code']/@displayName)",l));return[{label:"Order ID:",value:f},{label:"Code:",value:y}]}).reduce((l,f,y)=>({...l,[`inFulfillmentOf${y+1}`]:f}),{})},ki=n=>{const a=on(n);return Object.values(a||{})},ar=({document:n})=>{const a=ki(n);if(ne(a))return null;const s=a.flatMap(l=>[{label:"In Fulfillment Of",value:`Order: ${l[0].value||"Unknown"}, ${l[1].value||"Unknown"}`},{label:"",value:""}]);return w.createElement(Te,{data:s})};try{ar.displayName="InFulfillmentOf",ar.__docgenInfo={description:"",displayName:"InFulfillmentOf",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Vi=n=>{const a=v.select1("*[name()='ClinicalDocument']/*[name()='legalAuthenticator']",n);if(!a)return;const s=v.select1("*[name()='assignedEntity']",a),l=v.select1("*[name()='assignedPerson']",s),f=Ze(v.select("*[name()='name']",l)),y=Se(v.select("*[name()='addr']",s),v.select("*[name()='telecom']",s)),E=mt(He(String(v.select1("string(*[name()='time']/@value)",a))));return{name:f,contactDetails:y,time:E}},or=({document:n})=>{const a=Vi(n);if(!a)return null;const{name:s,time:l,contactDetails:f}=a,y=l?` signed at ${l}`:"",E=[{label:"Legal Authenticator",value:`${s}${y}`},{label:"Contact Details",value:f}];return w.createElement(Te,{data:E})};try{or.displayName="LegalAuthenticator",or.__docgenInfo={description:"",displayName:"LegalAuthenticator",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Hi=n=>{const a=v.select("*[name()='ClinicalDocument']/*[name()='participant']",n);if(!ne(a))return a.map(s=>{const l=v.select1("*[name()='associatedEntity']",s);if(l){const f=v.select1("*[name()='associatedPerson']",l),y=Ze(v.select("*[name()='name']",f)),E=Se(v.select("*[name()='addr']",l),v.select("*[name()='telecom']",l)),m=v.select1("*[name()='time']",s),b=Tr(m),U=String(v.select1("string(*[name()='code']/@displayName)",l)).toLowerCase();return{name:y,contactDetails:E,time:`from ${b.start} to ${b.end}`,relationship:U}}}).filter(br)},sr=({document:n})=>{const a=Hi(n);if(!a||ne(a))return null;const s=a.flatMap(l=>[{label:"Participant",value:`${l.name}${l.relationship?` - ${l.relationship}`:""}`},{label:"Contact Details",value:l.contactDetails}]);return w.createElement(Te,{data:s})};try{sr.displayName="Participant",sr.__docgenInfo={description:"",displayName:"Participant",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const sn=n=>{const a=v.select("*[name()='patient']/*[name()='guardian']",n);if(!ne(a))return a.map(s=>{const l=v.select1("*[name()='guardianPerson']",s),f=String(v.select1("string(*[name()='code']/@displayName)",s)),y=Ze(v.select("*[name()='name']",l)),E=f?` - ${f}`:"";return{label:"",value:`${y}${E}`}})},un=n=>{const s=v.select("*[name()='ClinicalDocument']/*[name()='recordTarget']/*[name()='patientRole']",n).map(l=>{const f=v.select1("*[name()='patient']",l),y=Ze(v.select1("*[name()='name']",f)),E=v.select("*[name()='id']",l).map(at).join(", "),m=String(v.select1("string(*[name()='administrativeGenderCode']/@displayName)",f)),b=new Date(He(String(v.select1("string(*[name()='birthTime']/@value)",f)))),U=new Date(He(String(v.select1("string(*[name()='sdtc:deceasedTime']/@value)",f)))),$=String(v.select1("string(*[name()='sdtc:deceasedInd']/@value)",f))==="true",W=$?"deceased":Rn(Or(U)?U:new Date,b),se=`${jr(b,"MMMM dd, yyyy")} (${W}${$?"":" yr"}${Or(U)?" - deceased":""})`,ae=sn(l);return{patient:[{label:"Name:",value:y},{label:"ID:",value:E},{label:"Date of birth:",value:se},{label:"Gender:",value:m}],guardian:ae}});return yt(s,l=>[l.patient,l.guardian]).reduce((l,f,y)=>({...l,[`patient${y+1}`]:f[0],[`guardian${y+1}`]:f[1]}),{})},$i=n=>{const a=v.select1("*[name()='birthplace']/*[name()='place']/*[name()='addr']",n);return a?en(a):""},qi=n=>{const a=v.select1("*[name()='ethnicGroupCode']",n);if(a)return String(v.select1("string(@displayName)",a));const s=v.select("*[name()='sdtc:ethnicGroupCode']",n);return ne(s)?"":String(v.select1("string(@displayName)",s[0]))},Gi=n=>{const a=v.select("//*[name()='patientRole']/*[name()='patient']/*[name()='guardian']",document);if(!a||ne(a))return;const s=sn(n);return a.map((l,f)=>{const y=Se(v.select("*[name()='addr']",l),v.select("*[name()='telecom']",l));return{name:s[f].value,contactDetails:y}})},zi=n=>v.select("*[name()='languageCommunication']",n).reduce((s,l,f)=>{const y=String(v.select1("string(*[name()='languageCode']/@code)",l));if(!y)return s;const E=String(v.select1("string(*[name()='preferenceInd']/@value)",l)),m=f===0?"":`
`,b=E!==""?`, preferred: ${E}`:"";return`${s}${m}${y}${b}`},""),Wi=n=>String(v.select1("string(*[name()='maritalStatusCode']/@displayName)",n)),Yi=n=>{const a=v.select1("*[name()='providerOrganization']",n),s=v.select1("//*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']",n),l=a||s,f=v.select("*[name()='id']",l).map(at).join(", "),y=Zr(v.select("string(*[name()='name'])",l)),E=Se(v.select("*[name()='addr']",l),v.select("*[name()='telecom']",l)),m=y?`
${y}`:"";return{name:`${f}${m}`,contactDetails:E}},ji=n=>{const a=v.select1("*[name()='raceCode']",n);if(a)return String(v.select1("string(@displayName)",a));const s=v.select("*[name()='sdtc:raceCode']",n);return ne(s)?"":String(v.select1("string(@displayName)",s[0]))},Xi=n=>String(v.select1("string(*[name()='religiousAffiliationCode']/@displayName)",n)),Qi=n=>{const a=v.select("//*[name()='patientRole']",n);if(!a||ne(a))return;const s=un(n),l=Object.entries(s).reduce((f,[y,E])=>({...f,[y]:E==null?void 0:E.reduce((m,b)=>({...m,[Zn(b.label)]:b.value}),{})}),{});return a.map((f,y)=>{const E=v.select1("*[name()='patient']",f),m=ji(E),b=qi(E),U=Se(v.select("*[name()='addr']",f),v.select("*[name()='telecom']",f)),$=zi(E),W=Yi(f),se=Gi(f),ae=Wi(E),me=Xi(E),Re=$i(E);return{name:l[`patient${y+1}`].name,contactDetails:U,dateOfBirth:l[`patient${y+1}`].dateOfBirth,gender:l[`patient${y+1}`].gender,race:m,ethnicity:b,patientId:l[`patient${y+1}`].id,language:$,maritalStatus:ae,religion:me,birthPlace:Re,guardian:se||[],providerOrganization:W.name,providerOrganizationContactDetails:W.contactDetails}})},ur=({document:n})=>{const a=Qi(n);return!a||ne(a)?null:w.createElement(w.Fragment,null,a.map(s=>{const l=[{label:"Patient",value:s.name},{label:"Contact Details",value:s.contactDetails},{label:"Date Of Birth",value:s.dateOfBirth},{label:"Gender",value:s.gender},{label:"Race",value:s.race},{label:"Ethnicity",value:s.ethnicity},{label:"Patient ID",value:s.patientId},{label:"Language",value:s.language},{label:"Marital Status",value:s.maritalStatus},{label:"Religion",value:s.religion},{label:"Birth Place",value:s.birthPlace},...s.guardian.map(f=>[{label:"Guardian",value:f.name},{label:"Contact Details",value:f.contactDetails}]),[{label:"Provider Organization",value:s.providerOrganization},{label:"Contact Details (Organization)",value:s.providerOrganizationContactDetails}]];return w.createElement(Te,{key:`${s.patientId}-${s.name}-${s.dateOfBirth}`,data:l.filter(f=>tt(f)||f.value)})}))};try{ur.displayName="Patient",ur.__docgenInfo={description:"",displayName:"Patient",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const lr=({document:n})=>w.createElement("div",{className:"ctw-ccda-document-details"},w.createElement(er,{document:n}),w.createElement(Kt,{document:n}),w.createElement(ur,{document:n}),w.createElement(Qt,{document:n}),w.createElement(Zt,{document:n}),w.createElement(nr,{document:n}),w.createElement(ir,{document:n}),w.createElement(or,{document:n}),w.createElement(Xt,{document:n}),w.createElement(sr,{document:n}),w.createElement(tr,{document:n}),w.createElement(ar,{document:n}),w.createElement(Jt,{document:n}),w.createElement(rr,{document:n}));try{lr.displayName="DocumentDetails",lr.__docgenInfo={description:"",displayName:"DocumentDetails",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Ji=n=>{const a=String(v.select1("string(*[name()='ClinicalDocument']/*[name()='title']/text())",n)),s=He(String(v.select1("string(*[name()='ClinicalDocument']/*[name()='effectiveTime']/@value)",n))),l=mt(s);return`${a} (${l})`},Ki=n=>{const a=Ji(n),s=un(n),l=nn(n),f=tn(n),y=an(n),E=on(n),m=rn(n);return{title:a,labelTypeData:{...s,...m||{},...l||{},...f||{},encounter:y||[],...E||{}}}},cr=({document:n})=>{const{title:a,labelTypeData:s}=Ki(n);return w.createElement("div",{className:"ctw-ccda-header-container"},w.createElement("h2",{className:"ctw-ccda-header-title"},a),w.createElement("table",{className:"ctw-ccda-common-table"},w.createElement("tbody",null,yt(s,(l,f)=>{if(!l)return null;const y=l.filter(E=>E.value);return ne(y)?null:w.createElement("tr",{key:f},w.createElement("td",{className:"ctw-ccda-common-td1"},Fn(f.replace(/\d/g,""))),w.createElement("td",{className:"ctw-ccda-common-td2"},y.map((E,m)=>w.createElement("span",{key:`${f}-${m}`},E.label&&w.createElement("b",null,E.label," "),E.value))))}))))};try{cr.displayName="Header",cr.__docgenInfo={description:"",displayName:"Header",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}/*! @license DOMPurify 2.4.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.1/LICENSE */function st(n){return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},st(n)}function pr(n,a){return pr=Object.setPrototypeOf||function(l,f){return l.__proto__=f,l},pr(n,a)}function Zi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function St(n,a,s){return Zi()?St=Reflect.construct:St=function(f,y,E){var m=[null];m.push.apply(m,y);var b=Function.bind.apply(f,m),U=new b;return E&&pr(U,E.prototype),U},St.apply(null,arguments)}function Ke(n){return ea(n)||ta(n)||ra(n)||na()}function ea(n){if(Array.isArray(n))return fr(n)}function ta(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ra(n,a){if(n){if(typeof n=="string")return fr(n,a);var s=Object.prototype.toString.call(n).slice(8,-1);if(s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set")return Array.from(n);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return fr(n,a)}}function fr(n,a){(a==null||a>n.length)&&(a=n.length);for(var s=0,l=new Array(a);s<a;s++)l[s]=n[s];return l}function na(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ia=Object.hasOwnProperty,Ur=Object.setPrototypeOf,aa=Object.isFrozen,oa=Object.getPrototypeOf,sa=Object.getOwnPropertyDescriptor,Ce=Object.freeze,et=Object.seal,ua=Object.create,ln=typeof Reflect<"u"&&Reflect,Ot=ln.apply,mr=ln.construct;Ot||(Ot=function(a,s,l){return a.apply(s,l)});Ce||(Ce=function(a){return a});et||(et=function(a){return a});mr||(mr=function(a,s){return St(a,Ke(s))});var la=Ye(Array.prototype.forEach),kr=Ye(Array.prototype.pop),vt=Ye(Array.prototype.push),Ct=Ye(String.prototype.toLowerCase),kt=Ye(String.prototype.toString),ca=Ye(String.prototype.match),Je=Ye(String.prototype.replace),pa=Ye(String.prototype.indexOf),fa=Ye(String.prototype.trim),De=Ye(RegExp.prototype.test),Vt=ma(TypeError);function Ye(n){return function(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),f=1;f<s;f++)l[f-1]=arguments[f];return Ot(n,a,l)}}function ma(n){return function(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return mr(n,s)}}function X(n,a,s){s=s||Ct,Ur&&Ur(n,null);for(var l=a.length;l--;){var f=a[l];if(typeof f=="string"){var y=s(f);y!==f&&(aa(a)||(a[l]=y),f=y)}n[f]=!0}return n}function ft(n){var a=ua(null),s;for(s in n)Ot(ia,n,[s])&&(a[s]=n[s]);return a}function _t(n,a){for(;n!==null;){var s=sa(n,a);if(s){if(s.get)return Ye(s.get);if(typeof s.value=="function")return Ye(s.value)}n=oa(n)}function l(f){return console.warn("fallback value for",f),null}return l}var Vr=Ce(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ht=Ce(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$t=Ce(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ha=Ce(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qt=Ce(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),da=Ce(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Hr=Ce(["#text"]),$r=Ce(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Gt=Ce(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qr=Ce(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Dt=Ce(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ga=et(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ya=et(/<%[\w\W]*|[\w\W]*%>/gm),Ea=et(/\${[\w\W]*}/gm),xa=et(/^data-[\-\w.\u00B7-\uFFFF]/),va=et(/^aria-[\-\w]+$/),Aa=et(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),wa=et(/^(?:\w+script|data):/i),Na=et(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ta=et(/^html$/i),ba=function(){return typeof window>"u"?null:window},_a=function(a,s){if(st(a)!=="object"||typeof a.createPolicy!="function")return null;var l=null,f="data-tt-policy-suffix";s.currentScript&&s.currentScript.hasAttribute(f)&&(l=s.currentScript.getAttribute(f));var y="dompurify"+(l?"#"+l:"");try{return a.createPolicy(y,{createHTML:function(m){return m},createScriptURL:function(m){return m}})}catch{return console.warn("TrustedTypes policy "+y+" could not be created."),null}};function cn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ba(),a=function(g){return cn(g)};if(a.version="2.4.1",a.removed=[],!n||!n.document||n.document.nodeType!==9)return a.isSupported=!1,a;var s=n.document,l=n.document,f=n.DocumentFragment,y=n.HTMLTemplateElement,E=n.Node,m=n.Element,b=n.NodeFilter,U=n.NamedNodeMap,$=U===void 0?n.NamedNodeMap||n.MozNamedAttrMap:U,W=n.HTMLFormElement,se=n.DOMParser,ae=n.trustedTypes,me=m.prototype,Re=_t(me,"cloneNode"),je=_t(me,"nextSibling"),A=_t(me,"childNodes"),oe=_t(me,"parentNode");if(typeof y=="function"){var qe=l.createElement("template");qe.content&&qe.content.ownerDocument&&(l=qe.content.ownerDocument)}var Y=_a(ae,s),ce=Y?Y.createHTML(""):"",he=l,j=he.implementation,Fe=he.createNodeIterator,Oe=he.createDocumentFragment,Ie=he.getElementsByTagName,Be=s.importNode,be={};try{be=ft(l).documentMode?l.documentMode:{}}catch{}var ue={};a.isSupported=typeof oe=="function"&&j&&typeof j.createHTMLDocument<"u"&&be!==9;var ye=ga,Ee=ya,ve=Ea,Le=xa,Pe=va,Me=wa,_e=Na,Z=Aa,P=null,ut=X({},[].concat(Ke(Vr),Ke(Ht),Ke($t),Ke(qt),Ke(Hr))),le=null,lt=X({},[].concat(Ke($r),Ke(Gt),Ke(qr),Ke(Dt))),ee=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),R=null,F=null,Ue=!0,Ae=!0,ie=!1,M=!1,O=!1,it=!1,ct=!1,o=!1,r=!1,i=!1,u=!0,x=!1,N="user-content-",T=!0,H=!1,z={},S=null,C=X({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),J=null,fe=X({},["audio","video","img","source","image","track"]),Ve=null,Ge=X({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),G="http://www.w3.org/1998/Math/MathML",pt="http://www.w3.org/2000/svg",ze="http://www.w3.org/1999/xhtml",e=ze,t=!1,c=null,h=X({},[G,pt,ze],kt),p,d=["application/xhtml+xml","text/html"],I="text/html",k,Q=null,B=l.createElement("form"),q=function(g){return g instanceof RegExp||g instanceof Function},we=function(g){Q&&Q===g||((!g||st(g)!=="object")&&(g={}),g=ft(g),p=d.indexOf(g.PARSER_MEDIA_TYPE)===-1?p=I:p=g.PARSER_MEDIA_TYPE,k=p==="application/xhtml+xml"?kt:Ct,P="ALLOWED_TAGS"in g?X({},g.ALLOWED_TAGS,k):ut,le="ALLOWED_ATTR"in g?X({},g.ALLOWED_ATTR,k):lt,c="ALLOWED_NAMESPACES"in g?X({},g.ALLOWED_NAMESPACES,kt):h,Ve="ADD_URI_SAFE_ATTR"in g?X(ft(Ge),g.ADD_URI_SAFE_ATTR,k):Ge,J="ADD_DATA_URI_TAGS"in g?X(ft(fe),g.ADD_DATA_URI_TAGS,k):fe,S="FORBID_CONTENTS"in g?X({},g.FORBID_CONTENTS,k):C,R="FORBID_TAGS"in g?X({},g.FORBID_TAGS,k):{},F="FORBID_ATTR"in g?X({},g.FORBID_ATTR,k):{},z="USE_PROFILES"in g?g.USE_PROFILES:!1,Ue=g.ALLOW_ARIA_ATTR!==!1,Ae=g.ALLOW_DATA_ATTR!==!1,ie=g.ALLOW_UNKNOWN_PROTOCOLS||!1,M=g.SAFE_FOR_TEMPLATES||!1,O=g.WHOLE_DOCUMENT||!1,o=g.RETURN_DOM||!1,r=g.RETURN_DOM_FRAGMENT||!1,i=g.RETURN_TRUSTED_TYPE||!1,ct=g.FORCE_BODY||!1,u=g.SANITIZE_DOM!==!1,x=g.SANITIZE_NAMED_PROPS||!1,T=g.KEEP_CONTENT!==!1,H=g.IN_PLACE||!1,Z=g.ALLOWED_URI_REGEXP||Z,e=g.NAMESPACE||ze,g.CUSTOM_ELEMENT_HANDLING&&q(g.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ee.tagNameCheck=g.CUSTOM_ELEMENT_HANDLING.tagNameCheck),g.CUSTOM_ELEMENT_HANDLING&&q(g.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ee.attributeNameCheck=g.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),g.CUSTOM_ELEMENT_HANDLING&&typeof g.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ee.allowCustomizedBuiltInElements=g.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),M&&(Ae=!1),r&&(o=!0),z&&(P=X({},Ke(Hr)),le=[],z.html===!0&&(X(P,Vr),X(le,$r)),z.svg===!0&&(X(P,Ht),X(le,Gt),X(le,Dt)),z.svgFilters===!0&&(X(P,$t),X(le,Gt),X(le,Dt)),z.mathMl===!0&&(X(P,qt),X(le,qr),X(le,Dt))),g.ADD_TAGS&&(P===ut&&(P=ft(P)),X(P,g.ADD_TAGS,k)),g.ADD_ATTR&&(le===lt&&(le=ft(le)),X(le,g.ADD_ATTR,k)),g.ADD_URI_SAFE_ATTR&&X(Ve,g.ADD_URI_SAFE_ATTR,k),g.FORBID_CONTENTS&&(S===C&&(S=ft(S)),X(S,g.FORBID_CONTENTS,k)),T&&(P["#text"]=!0),O&&X(P,["html","head","body"]),P.table&&(X(P,["tbody"]),delete R.tbody),Ce&&Ce(g),Q=g)},te=X({},["mi","mo","mn","ms","mtext"]),Xe=X({},["foreignobject","desc","title","annotation-xml"]),rt=X({},["title","style","font","a","script"]),ht=X({},Ht);X(ht,$t),X(ht,ha);var dt=X({},qt);X(dt,da);var Bt=function(g){var _=oe(g);(!_||!_.tagName)&&(_={namespaceURI:e,tagName:"template"});var L=Ct(g.tagName),re=Ct(_.tagName);return c[g.namespaceURI]?g.namespaceURI===pt?_.namespaceURI===ze?L==="svg":_.namespaceURI===G?L==="svg"&&(re==="annotation-xml"||te[re]):Boolean(ht[L]):g.namespaceURI===G?_.namespaceURI===ze?L==="math":_.namespaceURI===pt?L==="math"&&Xe[re]:Boolean(dt[L]):g.namespaceURI===ze?_.namespaceURI===pt&&!Xe[re]||_.namespaceURI===G&&!te[re]?!1:!dt[L]&&(rt[L]||!ht[L]):!!(p==="application/xhtml+xml"&&c[g.namespaceURI]):!1},Qe=function(g){vt(a.removed,{element:g});try{g.parentNode.removeChild(g)}catch{try{g.outerHTML=ce}catch{g.remove()}}},Et=function(g,_){try{vt(a.removed,{attribute:_.getAttributeNode(g),from:_})}catch{vt(a.removed,{attribute:null,from:_})}if(_.removeAttribute(g),g==="is"&&!le[g])if(o||r)try{Qe(_)}catch{}else try{_.setAttribute(g,"")}catch{}},wt=function(g){var _,L;if(ct)g="<remove></remove>"+g;else{var re=ca(g,/^[\r\n\t ]+/);L=re&&re[0]}p==="application/xhtml+xml"&&e===ze&&(g='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+g+"</body></html>");var ke=Y?Y.createHTML(g):g;if(e===ze)try{_=new se().parseFromString(ke,p)}catch{}if(!_||!_.documentElement){_=j.createDocument(e,"template",null);try{_.documentElement.innerHTML=t?"":ke}catch{}}var Ne=_.body||_.documentElement;return g&&L&&Ne.insertBefore(l.createTextNode(L),Ne.childNodes[0]||null),e===ze?Ie.call(_,O?"html":"body")[0]:O?_.documentElement:Ne},D=function(g){return Fe.call(g.ownerDocument||g,g,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT,null,!1)},K=function(g){return g instanceof W&&(typeof g.nodeName!="string"||typeof g.textContent!="string"||typeof g.removeChild!="function"||!(g.attributes instanceof $)||typeof g.removeAttribute!="function"||typeof g.setAttribute!="function"||typeof g.namespaceURI!="string"||typeof g.insertBefore!="function"||typeof g.hasChildNodes!="function")},pe=function(g){return st(E)==="object"?g instanceof E:g&&st(g)==="object"&&typeof g.nodeType=="number"&&typeof g.nodeName=="string"},de=function(g,_,L){ue[g]&&la(ue[g],function(re){re.call(a,_,L,Q)})},Nt=function(g){var _;if(de("beforeSanitizeElements",g,null),K(g)||De(/[\u0080-\uFFFF]/,g.nodeName))return Qe(g),!0;var L=k(g.nodeName);if(de("uponSanitizeElement",g,{tagName:L,allowedTags:P}),g.hasChildNodes()&&!pe(g.firstElementChild)&&(!pe(g.content)||!pe(g.content.firstElementChild))&&De(/<[/\w]/g,g.innerHTML)&&De(/<[/\w]/g,g.textContent)||L==="select"&&De(/<template/i,g.innerHTML))return Qe(g),!0;if(!P[L]||R[L]){if(!R[L]&&Dr(L)&&(ee.tagNameCheck instanceof RegExp&&De(ee.tagNameCheck,L)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(L)))return!1;if(T&&!S[L]){var re=oe(g)||g.parentNode,ke=A(g)||g.childNodes;if(ke&&re)for(var Ne=ke.length,xe=Ne-1;xe>=0;--xe)re.insertBefore(Re(ke[xe],!0),je(g))}return Qe(g),!0}return g instanceof m&&!Bt(g)||(L==="noscript"||L==="noembed")&&De(/<\/no(script|embed)/i,g.innerHTML)?(Qe(g),!0):(M&&g.nodeType===3&&(_=g.textContent,_=Je(_,ye," "),_=Je(_,Ee," "),_=Je(_,ve," "),g.textContent!==_&&(vt(a.removed,{element:g.cloneNode()}),g.textContent=_)),de("afterSanitizeElements",g,null),!1)},_r=function(g,_,L){if(u&&(_==="id"||_==="name")&&(L in l||L in B))return!1;if(!(Ae&&!F[_]&&De(Le,_))){if(!(Ue&&De(Pe,_))){if(!le[_]||F[_]){if(!(Dr(g)&&(ee.tagNameCheck instanceof RegExp&&De(ee.tagNameCheck,g)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(g))&&(ee.attributeNameCheck instanceof RegExp&&De(ee.attributeNameCheck,_)||ee.attributeNameCheck instanceof Function&&ee.attributeNameCheck(_))||_==="is"&&ee.allowCustomizedBuiltInElements&&(ee.tagNameCheck instanceof RegExp&&De(ee.tagNameCheck,L)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(L))))return!1}else if(!Ve[_]){if(!De(Z,Je(L,_e,""))){if(!((_==="src"||_==="xlink:href"||_==="href")&&g!=="script"&&pa(L,"data:")===0&&J[g])){if(!(ie&&!De(Me,Je(L,_e,"")))){if(L)return!1}}}}}}return!0},Dr=function(g){return g.indexOf("-")>0},Sr=function(g){var _,L,re,ke;de("beforeSanitizeAttributes",g,null);var Ne=g.attributes;if(Ne){var xe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:le};for(ke=Ne.length;ke--;){_=Ne[ke];var Tt=_,ge=Tt.name,Lt=Tt.namespaceURI;if(L=ge==="value"?_.value:fa(_.value),re=k(ge),xe.attrName=re,xe.attrValue=L,xe.keepAttr=!0,xe.forceKeepAttr=void 0,de("uponSanitizeAttribute",g,xe),L=xe.attrValue,!xe.forceKeepAttr&&(Et(ge,g),!!xe.keepAttr)){if(De(/\/>/i,L)){Et(ge,g);continue}M&&(L=Je(L,ye," "),L=Je(L,Ee," "),L=Je(L,ve," "));var Cr=k(g.nodeName);if(_r(Cr,re,L)){if(x&&(re==="id"||re==="name")&&(Et(ge,g),L=N+L),Y&&st(ae)==="object"&&typeof ae.getAttributeType=="function"&&!Lt)switch(ae.getAttributeType(Cr,re)){case"TrustedHTML":L=Y.createHTML(L);break;case"TrustedScriptURL":L=Y.createScriptURL(L);break}try{Lt?g.setAttributeNS(Lt,ge,L):g.setAttribute(ge,L),kr(a.removed)}catch{}}}}de("afterSanitizeAttributes",g,null)}},mn=function V(g){var _,L=D(g);for(de("beforeSanitizeShadowDOM",g,null);_=L.nextNode();)de("uponSanitizeShadowNode",_,null),!Nt(_)&&(_.content instanceof f&&V(_.content),Sr(_));de("afterSanitizeShadowDOM",g,null)};return a.sanitize=function(V){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_,L,re,ke,Ne;if(t=!V,t&&(V="<!-->"),typeof V!="string"&&!pe(V)){if(typeof V.toString!="function")throw Vt("toString is not a function");if(V=V.toString(),typeof V!="string")throw Vt("dirty is not a string, aborting")}if(!a.isSupported){if(st(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof V=="string")return n.toStaticHTML(V);if(pe(V))return n.toStaticHTML(V.outerHTML)}return V}if(it||we(g),a.removed=[],typeof V=="string"&&(H=!1),H){if(V.nodeName){var xe=k(V.nodeName);if(!P[xe]||R[xe])throw Vt("root node is forbidden and cannot be sanitized in-place")}}else if(V instanceof E)_=wt("<!---->"),L=_.ownerDocument.importNode(V,!0),L.nodeType===1&&L.nodeName==="BODY"||L.nodeName==="HTML"?_=L:_.appendChild(L);else{if(!o&&!M&&!O&&V.indexOf("<")===-1)return Y&&i?Y.createHTML(V):V;if(_=wt(V),!_)return o?null:i?ce:""}_&&ct&&Qe(_.firstChild);for(var Tt=D(H?V:_);re=Tt.nextNode();)re.nodeType===3&&re===ke||Nt(re)||(re.content instanceof f&&mn(re.content),Sr(re),ke=re);if(ke=null,H)return V;if(o){if(r)for(Ne=Oe.call(_.ownerDocument);_.firstChild;)Ne.appendChild(_.firstChild);else Ne=_;return le.shadowroot&&(Ne=Be.call(s,Ne,!0)),Ne}var ge=O?_.outerHTML:_.innerHTML;return O&&P["!doctype"]&&_.ownerDocument&&_.ownerDocument.doctype&&_.ownerDocument.doctype.name&&De(Ta,_.ownerDocument.doctype.name)&&(ge="<!DOCTYPE "+_.ownerDocument.doctype.name+`>
`+ge),M&&(ge=Je(ge,ye," "),ge=Je(ge,Ee," "),ge=Je(ge,ve," ")),Y&&i?Y.createHTML(ge):ge},a.setConfig=function(V){we(V),it=!0},a.clearConfig=function(){Q=null,it=!1},a.isValidAttribute=function(V,g,_){Q||we({});var L=k(V),re=k(g);return _r(L,re,_)},a.addHook=function(V,g){typeof g=="function"&&(ue[V]=ue[V]||[],vt(ue[V],g))},a.removeHook=function(V){if(ue[V])return kr(ue[V])},a.removeHooks=function(V){ue[V]&&(ue[V]=[])},a.removeAllHooks=function(){ue={}},a}var Da=cn();const hr=({title:n,humanReadable:a})=>{const[s,l]=$e.useState(!0);if(!a)return null;const f=()=>l(!s);return w.createElement("div",{className:"ctw-ccda-section-container"},w.createElement("div",{className:"ctw-ccda-section-header-wrapper"},w.createElement("button",{type:"button",className:"ctw-ccda-section-arrow",onClick:f},s?"▼":"▶"),w.createElement("h3",null,n)),s&&w.createElement("div",{className:"ctw-ccda-section-wrapper"},w.createElement("div",{dangerouslySetInnerHTML:{__html:Da.sanitize(_i(a))}})))};try{hr.displayName="Section",hr.__docgenInfo={description:"",displayName:"Section",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},humanReadable:{defaultValue:null,description:"",name:"humanReadable",required:!1,type:{name:"Document"}}}}}catch{}const dr=({document:n})=>{const s=v.select("//*[name()='component']/*[name()='section']",n).map(l=>{const f=String(v.select1("string(*[name()='title'])",l)),y=v.select1("*[name()='text']",l),E=String(v.select1("string(*[name()='code']/@code)",l));return{title:f,humanReadable:y,code:E}});return w.createElement("div",{className:Ar({width:"calc(100vw - 200px - 24px - 24px - 16px - 16px - 2px)"})},w.createElement(cr,{document:n}),w.createElement(lr,{document:n}),s.map(({title:l,humanReadable:f,code:y})=>w.createElement(hr,{key:`el-text-${y}`,title:l,humanReadable:f})))};try{dr.displayName="CcdaViewer",dr.__docgenInfo={description:"",displayName:"CcdaViewer",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Sa=["/xml","/xhtml+xml","application/xml"],Ca=(n,a)=>n.some(s=>a.includes(s)),gr=({data:n,contentType:a,fileName:s})=>{const l=$e.useRef(null),[f,y]=$e.useState(),[E,m]=$e.useState(),b=$e.useMemo(()=>{if(!Ca(Sa,a))return;const $=new Hn.DOMParser({locator:{},errorHandler:W=>null}).parseFromString(Wt.Buffer.from(n,"base64").toString("utf8"),a);if(v.select1("//*[name()='patientRole']",$))return $},[a,n]);function U(){var W;f&&URL.revokeObjectURL(f);const $=URL.createObjectURL(new Blob([Wt.Buffer.from(n,"base64").toString("utf8")],{type:"text/xml"}));y($),m(`CCDA-${s}`),(W=l.current)==null||W.click()}return w.createElement("div",{className:"ctw-ccda-container"},w.createElement("div",{className:"ctw-ccda-switch-container"},w.createElement("a",{href:f,ref:l,download:E,className:"ctw-decoration-none ctw-flex ctw-w-fit"},w.createElement(At,{onClick:U,text:"Download XML"}))),b?w.createElement(dr,{document:b}):w.createElement("div",{className:"ctw-ccda-base64-binary-text"},n))};try{gr.displayName="Base64BinaryField",gr.__docgenInfo={description:"",displayName:"Base64BinaryField",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string"}},contentType:{defaultValue:null,description:"",name:"contentType",required:!0,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}}}}}catch{}const yr=({isOpen:n,onAfterClosed:a,children:s,className:l})=>w.createElement(Pt,{appear:!0,show:n,as:$e.Fragment},w.createElement(Ir,{as:"div",className:"ctw-relative ctw-z-[10100]",onClose:()=>{}},w.createElement(Pt.Child,{as:$e.Fragment,enter:"ctw-ease-out ctw-duration-300",enterFrom:"ctw-opacity-0",enterTo:"ctw-opacity-100",leave:"ctw-ease-in ctw-duration-200",leaveFrom:"ctw-opacity-100",leaveTo:"ctw-opacity-0",afterLeave:a},w.createElement("div",{className:"ctw-fixed ctw-inset-0  ctw-transition-opacity"},w.createElement("div",{className:"ctw-h-full ctw-w-full ctw-bg-content-light ctw-opacity-75"}))),w.createElement("div",{className:"ctw-fixed ctw-inset-0 ctw-overflow-auto"},w.createElement("div",{className:"ctw-flex ctw-min-h-full ctw-items-center ctw-justify-center ctw-p-4 ctw-text-center"},w.createElement(Pt.Child,{as:$e.Fragment,enter:"ctw-ease-out ctw-duration-300",enterFrom:"ctw-opacity-0 ctw-scale-95",enterTo:"ctw-opacity-100 ctw-scale-100",leave:"ctw-ease-in ctw-duration-200",leaveFrom:"ctw-opacity-100 ctw-scale-100",leaveTo:"ctw-opacity-0 ctw-scale-95"},w.createElement(Ir.Panel,{className:Ar("ctw-min-w-fit ctw-max-w-lg ctw-transform ctw-rounded-lg ctw-bg-white ctw-py-10 ctw-px-10 ctw-align-middle ctw-shadow-xl",l)},w.createElement("div",{className:"ctw-flex ctw-h-full ctw-flex-col ctw-space-y-6"},s)))))));try{yr.displayName="Modal",yr.__docgenInfo={description:"",displayName:"Modal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onAfterClosed:{defaultValue:null,description:"",name:"onAfterClosed",required:!1,type:{name:"(() => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}function Ra(n,a){for(let s=0;s<n.length;s+=1){const l=n[s];if(mi(l.target,y=>{var E;return(E=y.reference)==null?void 0:E.includes(a)})){const y=An(l.entity,{role:"source"});if(y!=null&&y.what.reference)return y.what.reference.split("/")[1]}}}async function Fa(n,a){return En.fetchQuery([In,a],async()=>n.fhirClient.read({resourceType:"Binary",id:a}))}const Oa=On(Fa,"req.binary_document");function pn(){const{openModal:n}=Un(),{getRequestContext:a}=Xr();return async(s,l)=>{const f=await a(),y=await Oa(f,s);n({component:E=>w.createElement(Er,{fileName:l,rawBinary:y,...E})})}}const Er=({rawBinary:n,fileName:a,onClose:s,...l})=>w.createElement(yr,{...l},(n==null?void 0:n.data)&&w.createElement("div",{className:"ctw-flex ctw-w-full ctw-space-x-4"},w.createElement(gr,{data:n.data,contentType:n.contentType,fileName:a}),w.createElement("div",{className:"ctw-ml-3 ctw-flex ctw-h-7 ctw-items-center"},w.createElement("button",{type:"button","aria-label":"close",onClick:s,"data-zus-telemetry-click":"Close CCDA modal",className:"ctw-btn-clear"},w.createElement("span",{className:"ctw-sr-only"},"Close panel"),w.createElement(Mn,{className:"ctw-h-6 ctw-w-6","aria-hidden":"true"})))));try{Er.displayName="CCDAModal",Er.__docgenInfo={description:"",displayName:"CCDAModal",props:{rawBinary:{defaultValue:null,description:"",name:"rawBinary",required:!0,type:{name:"Binary | undefined"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onAfterClosed:{defaultValue:null,description:"",name:"onAfterClosed",required:!1,type:{name:"(() => void)"}}}}}catch{}const xr=({binaryId:n,date:a,details:s,hideEmpty:l,subtitle:f,title:y,resourceTypeTitle:E})=>{const[m,b]=$e.useState(!1),U=pn();return w.createElement("div",{className:"ctw-space-y-1","data-zus-telemetry-namespace":"HistoryEntry"},w.createElement(Ia,{date:a,title:y,subtitle:f,isDetailShown:m,setIsDetailShown:b,hasDocument:!!n}),m&&w.createElement(zr,{details:s,hideEmpty:l,documentButton:n&&w.createElement(At,{onClick:()=>U(n,E),text:"Source Document"})}))},Ia=({date:n,title:a,subtitle:s,isDetailShown:l,hasDocument:f=!1,setIsDetailShown:y})=>w.createElement("button",{type:"button","aria-label":"details",onClick:()=>y(!l),"data-zus-telemetry-namespace":"DetailSummary","data-zus-telemetry-click":l?"Collapse":"Expand",className:"ctw-btn-clean"},w.createElement("div",{className:"ctw-flex ctw-items-center ctw-justify-between ctw-rounded-lg ctw-bg-bg-white ctw-p-3 ctw-text-left ctw-outline ctw-outline-1 ctw-outline-bg-dark"},w.createElement("div",{className:"ctw-flex ctw-space-x-3"},n&&w.createElement("div",{className:"ctw-min-w-[5rem]"},n),w.createElement("div",null,w.createElement("div",{className:"ctw-font-semibold ctw-text-content-black"},a),w.createElement("div",{className:"ctw-text-content-light"},s))),w.createElement("div",{className:"ctw-flex ctw-items-center ctw-space-x-3"},f&&w.createElement(zt,{icon:Qr,className:"ctw-h-5 ctw-text-content-light"}),w.createElement("div",{className:"ctw-justify-right ctw-flex"},w.createElement(zt,{icon:gn,className:Ar("ctw-h-3 ctw-w-3 ctw-text-content-lighter",{"ctw-rotate-90":l})})))));try{xr.displayName="HistoryEntry",xr.__docgenInfo={description:"",displayName:"HistoryEntry",props:{binaryId:{defaultValue:null,description:"",name:"binaryId",required:!1,type:{name:"string"}},date:{defaultValue:null,description:"",name:"date",required:!1,type:{name:"string"}},details:{defaultValue:null,description:"",name:"details",required:!0,type:{name:"DetailEntry[]"}},hideEmpty:{defaultValue:null,description:"",name:"hideEmpty",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},subtitle:{defaultValue:null,description:"",name:"subtitle",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},versionId:{defaultValue:null,description:"",name:"versionId",required:!1,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}}}}}catch{}const vr=({entries:n,limit:a,resourceTypeTitle:s})=>{const[l,f]=$e.useState(!a||n.length<=a),y=wn(n,[m=>m.date?new Date(m.date):"","versionId"],["desc","desc"]),E=l||!a?y:y.slice(0,a);return w.createElement("div",{className:"ctw-space-y-4","data-zus-telemetry-namespace":"History"},w.createElement("div",{className:"ctw-text-lg ctw-font-semibold"},"History"),E.map((m,b)=>w.createElement("div",{key:`${m.id}-${b}`},w.createElement(xr,{id:m.id,date:m.date,title:m.title,subtitle:m.subtitle,details:m.details,hideEmpty:m.hideEmpty,binaryId:m.binaryId,resourceTypeTitle:s}))),!l&&w.createElement("div",{className:"ctw-text-center"},w.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>f(!0)},"Load ",y.length-a," More")))};try{vr.displayName="History",vr.__docgenInfo={description:"",displayName:"History",props:{entries:{defaultValue:null,description:"",name:"entries",required:!0,type:{name:"HistoryEntries"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}}}}}catch{}class Ba extends Bn{constructor(){super(...arguments);Rr(this,"kind","Document")}get status(){return this.resource.status}get binaryID(){const s=this.resource.content[0].attachment.url;if(s)return s.split("/").pop()}get docStatus(){return this.resource.docStatus}get resourceTypeTitle(){return"Document"}get title(){return this.resource.content[0].attachment.title}get dateCreated(){return Ln(this.resource.content[0].attachment.creation)}get custodian(){var s;return(s=this.resource.custodian)==null?void 0:s.display}get sectionDisplays(){var s;return((s=this.resource.category)==null?void 0:s.map(l=>Pn(l)))||void 0}}const La=10;function Gr(n){const{openDrawer:a}=kn();return s=>{a({component:l=>w.createElement(Pa,{model:s,...n,...l})})}}function Pa({className:n,details:a,getHistory:s,getSourceDocument:l,header:f,isOpen:y,model:E,onClose:m,onEdit:b,onRemove:U,readOnly:$,subHeader:W}){const se=pn(),[ae,me]=$e.useState(!1),[Re,je]=$e.useState(),{getRequestContext:A}=Xr(),oe=s&&s(E);return $e.useEffect(()=>{async function qe(){me(!0);const Y=await A(),ce=await Vn(Y,[E]);je(Ra(ce,E.id)),me(!1)}E instanceof Ba?je(E.binaryID):l&&qe()},[l,E,A]),w.createElement(bt,{className:n,title:E.resourceTypeTitle,isOpen:y,onClose:m},w.createElement(bt.Body,null,w.createElement("div",{className:"ctw-space-y-4"},w.createElement("div",{className:"ctw-space-y-2"},w.createElement("div",{className:"ctw-text-3xl"},f(E)),W&&w.createElement("div",null,W(E))),ae?w.createElement(Br,{message:"Loading data..."}):w.createElement(zr,{details:a(E),documentButton:Re&&w.createElement(At,{onClick:()=>se(Re,E.resourceTypeTitle),text:"Source Document"})}),oe&&(oe.isLoading?w.createElement(Br,{message:"Loading history..."}):w.createElement(vr,{entries:oe.data??[],limit:La,resourceTypeTitle:E.resourceTypeTitle})))),w.createElement(bt.Footer,null,w.createElement("div",{className:"ctw-flex ctw-justify-between"},w.createElement(bt.CloseButton,{onClose:m,label:"Close"}),w.createElement("div",{className:"ctw-space-x-3"},!$&&U&&w.createElement("button",{type:"button",className:"ctw-btn-default ctw-w-24","data-zus-telemetry-click":"Remove button",onClick:()=>{U(E,m)}},"Remove"),!$&&b&&w.createElement("button",{type:"button",className:"ctw-btn-primary ctw-w-24","data-zus-telemetry-click":"Edit button",onClick:()=>{m(),b(E)}},"Edit")))))}try{Gr.displayName="useResourceDetailsDrawer",Gr.__docgenInfo={description:"",displayName:"useResourceDetailsDrawer",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"(model: M) => ReactNode"}},subHeader:{defaultValue:null,description:"",name:"subHeader",required:!1,type:{name:"((model: M) => ReactNode)"}},getSourceDocument:{defaultValue:null,description:"",name:"getSourceDocument",required:!1,type:{name:"boolean"}},details:{defaultValue:null,description:"",name:"details",required:!0,type:{name:"(model: M) => DetailEntry[]"}},getHistory:{defaultValue:null,description:"",name:"getHistory",required:!1,type:{name:"((model: M) => UseQueryResultBasic<HistoryEntries>)"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((model: M) => void)"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"((model: M, onDelete?: ((model: M) => void)) => void)"}}}}}catch{}export{Ba as D,yr as M,Ra as g,mi as s,Gr as u};
