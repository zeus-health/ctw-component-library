import{R as n,r as d}from"./index-6f814c40.js";import{c as p}from"./index-74f03c09.js";import{u as l}from"./resource-details-drawer-030da2be.js";import{C as I}from"./coding-list-1d7c950f.js";import{w as f}from"./error-boundary-28a876d0.js";import{F as _,Z as h,$ as w,a as y,w as z,s as v,a0 as C,u as g}from"./patient-helper-bee16dce.js";import{T as D}from"./table-0bb423c6.js";import{V as E}from"./view-fhir-98f5901d.js";import"./_baseToString-ba0098b0.js";import{o as R}from"./sortBy-64fcb484.js";import"./_baseClone-0c3bfcab.js";import"./sortBy-3860efd7.js";import"./_equalByTag-3aa7c076.js";import"./_baseForOwn-56487e0e.js";import{i as N}from"./isEqual-38ff4822.js";import"./_createSet-3c80ad01.js";import{u as T}from"./uniqWith-ade993ae.js";import{u as P}from"./patient-provider-1f6ddaa2.js";import{u as x}from"./use-breakpoints-8fcb4b08.js";const b=[{title:"Date",render:e=>n.createElement("div",{className:"group-hover:ctw-underline"},e.occurrence)},{title:"Description",dataIndex:"description"},{title:"CVX Code",dataIndex:"cvxCode"}];class F extends _{get description(){return this.resource.vaccineCode.text}get cvxCode(){const t=h(w,this.resource.vaccineCode);return t==null?void 0:t.code}get occurrence(){return this.resource.occurrenceDateTime?y(this.resource.occurrenceDateTime):this.resource.occurrenceString}}const a=e=>{const t=e.map(r=>new F(r));return T(t,(r,i)=>N(s(r),s(i)))},s=e=>[e.description,e.cvxCode,e.occurrence];try{a.displayName="applyImmunizationFilters",a.__docgenInfo={description:"",displayName:"applyImmunizationFilters",props:{}}}catch{}function M(){return P(C,[],z(async(e,t)=>{try{const{bundle:o,resources:r}=await v("Immunization",e,{patientUPID:t.UPID});return R(a(r),[i=>i.occurrence??""],["desc"])}catch(o){throw new Error(`Failed fetching immunization information for patient: ${o}`)}},"req.patient_immunizations"))}const V=({record:e})=>n.createElement(E,{name:"Immunization Resource",resource:e.resource});function k({className:e}){const t=d.useRef(null),o=x(t),{featureFlags:r}=g(),i=M(),m=l({header:u=>u.description,details:S});return n.createElement("div",{ref:t,"data-zus-telemetry-namespace":"Immunizations",className:p("ctw-patient-immunizations ctw-bg-white",e,{"ctw-stacked":o.sm})},n.createElement("div",{className:"ctw-overflow-hidden"},n.createElement(D,{RowActions:r!=null&&r.enableViewFhirButton?V:void 0,stacked:o.sm,isLoading:i.isLoading,records:i.data??[],columns:b,handleRowClick:m})))}const c=f(k,"PatientImmunizations"),S=e=>[{label:"Date",value:e.occurrence},{label:"Description",value:e.description},{label:"Vaccine Code",value:e.resource.vaccineCode.coding?n.createElement(I,{codings:e.resource.vaccineCode.coding}):void 0}];try{c.displayName="PatientImmunizations",c.__docgenInfo={description:"",displayName:"PatientImmunizations",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{c as P};
