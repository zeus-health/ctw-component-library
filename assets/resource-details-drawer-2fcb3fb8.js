import{R as w,r as Qe}from"./index-6f814c40.js";import{D as on,a as sn}from"./collapsible-data-list-details-4804f43b.js";import{j as un,q as ln}from"./request-5a1df4c1.js";import{c as Vr}from"./index-74f03c09.js";import"./_baseToString-ba0098b0.js";import{p as cn,b as pn,d as yt,_ as Hr,f as hn}from"./sortBy-64fcb484.js";import"./_baseClone-0c3bfcab.js";import{h as mn,u as dn}from"./sortBy-3860efd7.js";import{y as gn,b as Ze}from"./_equalByTag-3aa7c076.js";import{t as yn,b as En,k as xn,h as Dr}from"./_baseForOwn-56487e0e.js";import"./_createSet-3c80ad01.js";import{i as ne}from"./isEmpty-ee15a061.js";import{d as Er}from"./values-4e3b2a32.js";import{_ as vn,t as $r,v as St,x as qr,y as An,z as _r,A as wn,w as Nn,B as Tn,u as Gr,F as bn,D as Dn,c as _n}from"./patient-helper-1a1504df.js";import{W as Lt,g as Sr,X as Sn,D as Cr}from"./drawer-ae5dfefa.js";import{a as Cn,b as Rn,s as Fn}from"./patient-provider-e0122c22.js";import{L as On}from"./loading-c7ff698a.js";const Ct=({onClick:i,text:a})=>w.createElement("button",{type:"button",className:"ctw-btn-clear ctw-link ctw-flex ctw-items-center ctw-space-x-2",onClick:i},w.createElement("div",null,a),w.createElement(on,{height:12}));try{Ct.displayName="DocumentButton",Ct.__docgenInfo={description:"",displayName:"DocumentButton",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLButtonElement>"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}}}catch{}var In=un(),Gt={},Ot={};Ot.byteLength=Pn;Ot.toByteArray=Un;Ot.fromByteArray=Hn;var nt=[],Ge=[],Bn=typeof Uint8Array<"u"?Uint8Array:Array,Pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var gt=0,Ln=Pt.length;gt<Ln;++gt)nt[gt]=Pt[gt],Ge[Pt.charCodeAt(gt)]=gt;Ge["-".charCodeAt(0)]=62;Ge["_".charCodeAt(0)]=63;function zr(i){var a=i.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=i.indexOf("=");u===-1&&(u=a);var l=u===a?0:4-u%4;return[u,l]}function Pn(i){var a=zr(i),u=a[0],l=a[1];return(u+l)*3/4-l}function Mn(i,a,u){return(a+u)*3/4-u}function Un(i){var a,u=zr(i),l=u[0],f=u[1],E=new Bn(Mn(i,l,f)),v=0,h=f>0?l-4:l,D;for(D=0;D<h;D+=4)a=Ge[i.charCodeAt(D)]<<18|Ge[i.charCodeAt(D+1)]<<12|Ge[i.charCodeAt(D+2)]<<6|Ge[i.charCodeAt(D+3)],E[v++]=a>>16&255,E[v++]=a>>8&255,E[v++]=a&255;return f===2&&(a=Ge[i.charCodeAt(D)]<<2|Ge[i.charCodeAt(D+1)]>>4,E[v++]=a&255),f===1&&(a=Ge[i.charCodeAt(D)]<<10|Ge[i.charCodeAt(D+1)]<<4|Ge[i.charCodeAt(D+2)]>>2,E[v++]=a>>8&255,E[v++]=a&255),E}function kn(i){return nt[i>>18&63]+nt[i>>12&63]+nt[i>>6&63]+nt[i&63]}function Vn(i,a,u){for(var l,f=[],E=a;E<u;E+=3)l=(i[E]<<16&16711680)+(i[E+1]<<8&65280)+(i[E+2]&255),f.push(kn(l));return f.join("")}function Hn(i){for(var a,u=i.length,l=u%3,f=[],E=16383,v=0,h=u-l;v<h;v+=E)f.push(Vn(i,v,v+E>h?h:v+E));return l===1?(a=i[u-1],f.push(nt[a>>2]+nt[a<<4&63]+"==")):l===2&&(a=(i[u-2]<<8)+i[u-1],f.push(nt[a>>10]+nt[a>>4&63]+nt[a<<2&63]+"=")),f.join("")}var xr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */xr.read=function(i,a,u,l,f){var E,v,h=f*8-l-1,D=(1<<h)-1,U=D>>1,$=-7,W=u?f-1:0,oe=u?-1:1,ie=i[a+W];for(W+=oe,E=ie&(1<<-$)-1,ie>>=-$,$+=h;$>0;E=E*256+i[a+W],W+=oe,$-=8);for(v=E&(1<<-$)-1,E>>=-$,$+=l;$>0;v=v*256+i[a+W],W+=oe,$-=8);if(E===0)E=1-U;else{if(E===D)return v?NaN:(ie?-1:1)*(1/0);v=v+Math.pow(2,l),E=E-U}return(ie?-1:1)*v*Math.pow(2,E-l)};xr.write=function(i,a,u,l,f,E){var v,h,D,U=E*8-f-1,$=(1<<U)-1,W=$>>1,oe=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,ie=l?0:E-1,ge=l?1:-1,ke=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(h=isNaN(a)?1:0,v=$):(v=Math.floor(Math.log(a)/Math.LN2),a*(D=Math.pow(2,-v))<1&&(v--,D*=2),v+W>=1?a+=oe/D:a+=oe*Math.pow(2,1-W),a*D>=2&&(v++,D/=2),v+W>=$?(h=0,v=$):v+W>=1?(h=(a*D-1)*Math.pow(2,f),v=v+W):(h=a*Math.pow(2,W-1)*Math.pow(2,f),v=0));f>=8;i[u+ie]=h&255,ie+=ge,h/=256,f-=8);for(v=v<<f|h,U+=f;U>0;i[u+ie]=v&255,ie+=ge,v/=256,U-=8);i[u+ie-ge]|=ke*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){var a=Ot,u=xr,l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=h,i.SlowBuffer=le,i.INSPECT_MAX_BYTES=50;var f=2147483647;i.kMaxLength=f,h.TYPED_ARRAY_SUPPORT=E(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{var o=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(o,r),o.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function v(o){if(o>f)throw new RangeError('The value "'+o+'" is invalid for option "size"');var r=new Uint8Array(o);return Object.setPrototypeOf(r,h.prototype),r}function h(o,r,n){if(typeof o=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return W(o)}return D(o,r,n)}h.poolSize=8192;function D(o,r,n){if(typeof o=="string")return oe(o,r);if(ArrayBuffer.isView(o))return ge(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(O(o,ArrayBuffer)||o&&O(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(O(o,SharedArrayBuffer)||o&&O(o.buffer,SharedArrayBuffer)))return ke(o,r,n);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var s=o.valueOf&&o.valueOf();if(s!=null&&s!==o)return h.from(s,r,n);var y=et(o);if(y)return y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return h.from(o[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}h.from=function(o,r,n){return D(o,r,n)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function U(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function $(o,r,n){return U(o),o<=0?v(o):r!==void 0?typeof n=="string"?v(o).fill(r,n):v(o).fill(r):v(o)}h.alloc=function(o,r,n){return $(o,r,n)};function W(o){return U(o),v(o<0?0:A(o)|0)}h.allocUnsafe=function(o){return W(o)},h.allocUnsafeSlow=function(o){return W(o)};function oe(o,r){if((typeof r!="string"||r==="")&&(r="utf8"),!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var n=tt(o,r)|0,s=v(n),y=s.write(o,r);return y!==n&&(s=s.slice(0,y)),s}function ie(o){for(var r=o.length<0?0:A(o.length)|0,n=v(r),s=0;s<r;s+=1)n[s]=o[s]&255;return n}function ge(o){if(O(o,Uint8Array)){var r=new Uint8Array(o);return ke(r.buffer,r.byteOffset,r.byteLength)}return ie(o)}function ke(o,r,n){if(r<0||o.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');var s;return r===void 0&&n===void 0?s=new Uint8Array(o):n===void 0?s=new Uint8Array(o,r):s=new Uint8Array(o,r,n),Object.setPrototypeOf(s,h.prototype),s}function et(o){if(h.isBuffer(o)){var r=A(o.length)|0,n=v(r);return n.length===0||o.copy(n,0,0,r),n}if(o.length!==void 0)return typeof o.length!="number"||it(o.length)?v(0):ie(o);if(o.type==="Buffer"&&Array.isArray(o.data))return ie(o.data)}function A(o){if(o>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return o|0}function le(o){return+o!=o&&(o=0),h.alloc(+o)}h.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==h.prototype},h.compare=function(r,n){if(O(r,Uint8Array)&&(r=h.from(r,r.offset,r.byteLength)),O(n,Uint8Array)&&(n=h.from(n,n.offset,n.byteLength)),!h.isBuffer(r)||!h.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;for(var s=r.length,y=n.length,N=0,T=Math.min(s,y);N<T;++N)if(r[N]!==n[N]){s=r[N],y=n[N];break}return s<y?-1:y<s?1:0},h.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(r,n){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return h.alloc(0);var s;if(n===void 0)for(n=0,s=0;s<r.length;++s)n+=r[s].length;var y=h.allocUnsafe(n),N=0;for(s=0;s<r.length;++s){var T=r[s];if(O(T,Uint8Array))N+T.length>y.length?h.from(T).copy(y,N):Uint8Array.prototype.set.call(y,T,N);else if(h.isBuffer(T))T.copy(y,N);else throw new TypeError('"list" argument must be an Array of Buffers');N+=T.length}return y};function tt(o,r){if(h.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||O(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);var n=o.length,s=arguments.length>2&&arguments[2]===!0;if(!s&&n===0)return 0;for(var y=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return F(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return ae(o).length;default:if(y)return s?-1:F(o).length;r=(""+r).toLowerCase(),y=!0}}h.byteLength=tt;function X(o,r,n){var s=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,r>>>=0,n<=r))return"";for(o||(o="utf8");;)switch(o){case"hex":return Pe(this,r,n);case"utf8":case"utf-8":return ye(this,r,n);case"ascii":return Be(this,r,n);case"latin1":case"binary":return Le(this,r,n);case"base64":return se(this,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,r,n);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),s=!0}}h.prototype._isBuffer=!0;function fe(o,r,n){var s=o[r];o[r]=o[n],o[n]=s}h.prototype.swap16=function(){var r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<r;n+=2)fe(this,n,n+1);return this},h.prototype.swap32=function(){var r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<r;n+=4)fe(this,n,n+3),fe(this,n+1,n+2);return this},h.prototype.swap64=function(){var r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<r;n+=8)fe(this,n,n+7),fe(this,n+1,n+6),fe(this,n+2,n+5),fe(this,n+3,n+4);return this},h.prototype.toString=function(){var r=this.length;return r===0?"":arguments.length===0?ye(this,0,r):X.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(r){if(!h.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:h.compare(this,r)===0},h.prototype.inspect=function(){var r="",n=i.INSPECT_MAX_BYTES;return r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(r+=" ... "),"<Buffer "+r+">"},l&&(h.prototype[l]=h.prototype.inspect),h.prototype.compare=function(r,n,s,y,N){if(O(r,Uint8Array)&&(r=h.from(r,r.offset,r.byteLength)),!h.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(n===void 0&&(n=0),s===void 0&&(s=r?r.length:0),y===void 0&&(y=0),N===void 0&&(N=this.length),n<0||s>r.length||y<0||N>this.length)throw new RangeError("out of range index");if(y>=N&&n>=s)return 0;if(y>=N)return-1;if(n>=s)return 1;if(n>>>=0,s>>>=0,y>>>=0,N>>>=0,this===r)return 0;for(var T=N-y,H=s-n,z=Math.min(T,H),S=this.slice(y,N),C=r.slice(n,s),J=0;J<z;++J)if(S[J]!==C[J]){T=S[J],H=C[J];break}return T<H?-1:H<T?1:0};function he(o,r,n,s,y){if(o.length===0)return-1;if(typeof n=="string"?(s=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,it(n)&&(n=y?0:o.length-1),n<0&&(n=o.length+n),n>=o.length){if(y)return-1;n=o.length-1}else if(n<0)if(y)n=0;else return-1;if(typeof r=="string"&&(r=h.from(r,s)),h.isBuffer(r))return r.length===0?-1:Y(o,r,n,s,y);if(typeof r=="number")return r=r&255,typeof Uint8Array.prototype.indexOf=="function"?y?Uint8Array.prototype.indexOf.call(o,r,n):Uint8Array.prototype.lastIndexOf.call(o,r,n):Y(o,[r],n,s,y);throw new TypeError("val must be string, number or Buffer")}function Y(o,r,n,s,y){var N=1,T=o.length,H=r.length;if(s!==void 0&&(s=String(s).toLowerCase(),s==="ucs2"||s==="ucs-2"||s==="utf16le"||s==="utf-16le")){if(o.length<2||r.length<2)return-1;N=2,T/=2,H/=2,n/=2}function z(Ve,$e){return N===1?Ve[$e]:Ve.readUInt16BE($e*N)}var S;if(y){var C=-1;for(S=n;S<T;S++)if(z(o,S)===z(r,C===-1?0:S-C)){if(C===-1&&(C=S),S-C+1===H)return C*N}else C!==-1&&(S-=S-C),C=-1}else for(n+H>T&&(n=T-H),S=n;S>=0;S--){for(var J=!0,pe=0;pe<H;pe++)if(z(o,S+pe)!==z(r,pe)){J=!1;break}if(J)return S}return-1}h.prototype.includes=function(r,n,s){return this.indexOf(r,n,s)!==-1},h.prototype.indexOf=function(r,n,s){return he(this,r,n,s,!0)},h.prototype.lastIndexOf=function(r,n,s){return he(this,r,n,s,!1)};function Re(o,r,n,s){n=Number(n)||0;var y=o.length-n;s?(s=Number(s),s>y&&(s=y)):s=y;var N=r.length;s>N/2&&(s=N/2);for(var T=0;T<s;++T){var H=parseInt(r.substr(T*2,2),16);if(it(H))return T;o[n+T]=H}return T}function Fe(o,r,n,s){return M(F(r,o.length-n),o,n,s)}function Oe(o,r,n,s){return M(Me(r),o,n,s)}function Ie(o,r,n,s){return M(ae(r),o,n,s)}function be(o,r,n,s){return M(Ae(r,o.length-n),o,n,s)}h.prototype.write=function(r,n,s,y){if(n===void 0)y="utf8",s=this.length,n=0;else if(s===void 0&&typeof n=="string")y=n,s=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(s)?(s=s>>>0,y===void 0&&(y="utf8")):(y=s,s=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var N=this.length-n;if((s===void 0||s>N)&&(s=N),r.length>0&&(s<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");y||(y="utf8");for(var T=!1;;)switch(y){case"hex":return Re(this,r,n,s);case"utf8":case"utf-8":return Fe(this,r,n,s);case"ascii":case"latin1":case"binary":return Oe(this,r,n,s);case"base64":return Ie(this,r,n,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,r,n,s);default:if(T)throw new TypeError("Unknown encoding: "+y);y=(""+y).toLowerCase(),T=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function se(o,r,n){return r===0&&n===o.length?a.fromByteArray(o):a.fromByteArray(o.slice(r,n))}function ye(o,r,n){n=Math.min(o.length,n);for(var s=[],y=r;y<n;){var N=o[y],T=null,H=N>239?4:N>223?3:N>191?2:1;if(y+H<=n){var z,S,C,J;switch(H){case 1:N<128&&(T=N);break;case 2:z=o[y+1],(z&192)===128&&(J=(N&31)<<6|z&63,J>127&&(T=J));break;case 3:z=o[y+1],S=o[y+2],(z&192)===128&&(S&192)===128&&(J=(N&15)<<12|(z&63)<<6|S&63,J>2047&&(J<55296||J>57343)&&(T=J));break;case 4:z=o[y+1],S=o[y+2],C=o[y+3],(z&192)===128&&(S&192)===128&&(C&192)===128&&(J=(N&15)<<18|(z&63)<<12|(S&63)<<6|C&63,J>65535&&J<1114112&&(T=J))}}T===null?(T=65533,H=1):T>65535&&(T-=65536,s.push(T>>>10&1023|55296),T=56320|T&1023),s.push(T),y+=H}return ve(s)}var Ee=4096;function ve(o){var r=o.length;if(r<=Ee)return String.fromCharCode.apply(String,o);for(var n="",s=0;s<r;)n+=String.fromCharCode.apply(String,o.slice(s,s+=Ee));return n}function Be(o,r,n){var s="";n=Math.min(o.length,n);for(var y=r;y<n;++y)s+=String.fromCharCode(o[y]&127);return s}function Le(o,r,n){var s="";n=Math.min(o.length,n);for(var y=r;y<n;++y)s+=String.fromCharCode(o[y]);return s}function Pe(o,r,n){var s=o.length;(!r||r<0)&&(r=0),(!n||n<0||n>s)&&(n=s);for(var y="",N=r;N<n;++N)y+=ct[o[N]];return y}function De(o,r,n){for(var s=o.slice(r,n),y="",N=0;N<s.length-1;N+=2)y+=String.fromCharCode(s[N]+s[N+1]*256);return y}h.prototype.slice=function(r,n){var s=this.length;r=~~r,n=n===void 0?s:~~n,r<0?(r+=s,r<0&&(r=0)):r>s&&(r=s),n<0?(n+=s,n<0&&(n=0)):n>s&&(n=s),n<r&&(n=r);var y=this.subarray(r,n);return Object.setPrototypeOf(y,h.prototype),y};function Z(o,r,n){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+r>n)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(r,n,s){r=r>>>0,n=n>>>0,s||Z(r,n,this.length);for(var y=this[r],N=1,T=0;++T<n&&(N*=256);)y+=this[r+T]*N;return y},h.prototype.readUintBE=h.prototype.readUIntBE=function(r,n,s){r=r>>>0,n=n>>>0,s||Z(r,n,this.length);for(var y=this[r+--n],N=1;n>0&&(N*=256);)y+=this[r+--n]*N;return y},h.prototype.readUint8=h.prototype.readUInt8=function(r,n){return r=r>>>0,n||Z(r,1,this.length),this[r]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(r,n){return r=r>>>0,n||Z(r,2,this.length),this[r]|this[r+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(r,n){return r=r>>>0,n||Z(r,2,this.length),this[r]<<8|this[r+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(r,n){return r=r>>>0,n||Z(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(r,n){return r=r>>>0,n||Z(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])},h.prototype.readIntLE=function(r,n,s){r=r>>>0,n=n>>>0,s||Z(r,n,this.length);for(var y=this[r],N=1,T=0;++T<n&&(N*=256);)y+=this[r+T]*N;return N*=128,y>=N&&(y-=Math.pow(2,8*n)),y},h.prototype.readIntBE=function(r,n,s){r=r>>>0,n=n>>>0,s||Z(r,n,this.length);for(var y=n,N=1,T=this[r+--y];y>0&&(N*=256);)T+=this[r+--y]*N;return N*=128,T>=N&&(T-=Math.pow(2,8*n)),T},h.prototype.readInt8=function(r,n){return r=r>>>0,n||Z(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]},h.prototype.readInt16LE=function(r,n){r=r>>>0,n||Z(r,2,this.length);var s=this[r]|this[r+1]<<8;return s&32768?s|4294901760:s},h.prototype.readInt16BE=function(r,n){r=r>>>0,n||Z(r,2,this.length);var s=this[r+1]|this[r]<<8;return s&32768?s|4294901760:s},h.prototype.readInt32LE=function(r,n){return r=r>>>0,n||Z(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},h.prototype.readInt32BE=function(r,n){return r=r>>>0,n||Z(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},h.prototype.readFloatLE=function(r,n){return r=r>>>0,n||Z(r,4,this.length),u.read(this,r,!0,23,4)},h.prototype.readFloatBE=function(r,n){return r=r>>>0,n||Z(r,4,this.length),u.read(this,r,!1,23,4)},h.prototype.readDoubleLE=function(r,n){return r=r>>>0,n||Z(r,8,this.length),u.read(this,r,!0,52,8)},h.prototype.readDoubleBE=function(r,n){return r=r>>>0,n||Z(r,8,this.length),u.read(this,r,!1,52,8)};function P(o,r,n,s,y,N){if(!h.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>y||r<N)throw new RangeError('"value" argument is out of bounds');if(n+s>o.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(r,n,s,y){if(r=+r,n=n>>>0,s=s>>>0,!y){var N=Math.pow(2,8*s)-1;P(this,r,n,s,N,0)}var T=1,H=0;for(this[n]=r&255;++H<s&&(T*=256);)this[n+H]=r/T&255;return n+s},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(r,n,s,y){if(r=+r,n=n>>>0,s=s>>>0,!y){var N=Math.pow(2,8*s)-1;P(this,r,n,s,N,0)}var T=s-1,H=1;for(this[n+T]=r&255;--T>=0&&(H*=256);)this[n+T]=r/H&255;return n+s},h.prototype.writeUint8=h.prototype.writeUInt8=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,1,255,0),this[n]=r&255,n+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,2,65535,0),this[n]=r&255,this[n+1]=r>>>8,n+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,2,65535,0),this[n]=r>>>8,this[n+1]=r&255,n+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,4,4294967295,0),this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=r&255,n+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,4,4294967295,0),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255,n+4},h.prototype.writeIntLE=function(r,n,s,y){if(r=+r,n=n>>>0,!y){var N=Math.pow(2,8*s-1);P(this,r,n,s,N-1,-N)}var T=0,H=1,z=0;for(this[n]=r&255;++T<s&&(H*=256);)r<0&&z===0&&this[n+T-1]!==0&&(z=1),this[n+T]=(r/H>>0)-z&255;return n+s},h.prototype.writeIntBE=function(r,n,s,y){if(r=+r,n=n>>>0,!y){var N=Math.pow(2,8*s-1);P(this,r,n,s,N-1,-N)}var T=s-1,H=1,z=0;for(this[n+T]=r&255;--T>=0&&(H*=256);)r<0&&z===0&&this[n+T+1]!==0&&(z=1),this[n+T]=(r/H>>0)-z&255;return n+s},h.prototype.writeInt8=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,1,127,-128),r<0&&(r=255+r+1),this[n]=r&255,n+1},h.prototype.writeInt16LE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,2,32767,-32768),this[n]=r&255,this[n+1]=r>>>8,n+2},h.prototype.writeInt16BE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,2,32767,-32768),this[n]=r>>>8,this[n+1]=r&255,n+2},h.prototype.writeInt32LE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,4,2147483647,-2147483648),this[n]=r&255,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24,n+4},h.prototype.writeInt32BE=function(r,n,s){return r=+r,n=n>>>0,s||P(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255,n+4};function ut(o,r,n,s,y,N){if(n+s>o.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function ue(o,r,n,s,y){return r=+r,n=n>>>0,y||ut(o,r,n,4),u.write(o,r,n,s,23,4),n+4}h.prototype.writeFloatLE=function(r,n,s){return ue(this,r,n,!0,s)},h.prototype.writeFloatBE=function(r,n,s){return ue(this,r,n,!1,s)};function lt(o,r,n,s,y){return r=+r,n=n>>>0,y||ut(o,r,n,8),u.write(o,r,n,s,52,8),n+8}h.prototype.writeDoubleLE=function(r,n,s){return lt(this,r,n,!0,s)},h.prototype.writeDoubleBE=function(r,n,s){return lt(this,r,n,!1,s)},h.prototype.copy=function(r,n,s,y){if(!h.isBuffer(r))throw new TypeError("argument should be a Buffer");if(s||(s=0),!y&&y!==0&&(y=this.length),n>=r.length&&(n=r.length),n||(n=0),y>0&&y<s&&(y=s),y===s||r.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("sourceEnd out of bounds");y>this.length&&(y=this.length),r.length-n<y-s&&(y=r.length-n+s);var N=y-s;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,s,y):Uint8Array.prototype.set.call(r,this.subarray(s,y),n),N},h.prototype.fill=function(r,n,s,y){if(typeof r=="string"){if(typeof n=="string"?(y=n,n=0,s=this.length):typeof s=="string"&&(y=s,s=this.length),y!==void 0&&typeof y!="string")throw new TypeError("encoding must be a string");if(typeof y=="string"&&!h.isEncoding(y))throw new TypeError("Unknown encoding: "+y);if(r.length===1){var N=r.charCodeAt(0);(y==="utf8"&&N<128||y==="latin1")&&(r=N)}}else typeof r=="number"?r=r&255:typeof r=="boolean"&&(r=Number(r));if(n<0||this.length<n||this.length<s)throw new RangeError("Out of range index");if(s<=n)return this;n=n>>>0,s=s===void 0?this.length:s>>>0,r||(r=0);var T;if(typeof r=="number")for(T=n;T<s;++T)this[T]=r;else{var H=h.isBuffer(r)?r:h.from(r,y),z=H.length;if(z===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(T=0;T<s-n;++T)this[T+n]=H[T%z]}return this};var ee=/[^+/0-9A-Za-z-_]/g;function R(o){if(o=o.split("=")[0],o=o.trim().replace(ee,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function F(o,r){r=r||1/0;for(var n,s=o.length,y=null,N=[],T=0;T<s;++T){if(n=o.charCodeAt(T),n>55295&&n<57344){if(!y){if(n>56319){(r-=3)>-1&&N.push(239,191,189);continue}else if(T+1===s){(r-=3)>-1&&N.push(239,191,189);continue}y=n;continue}if(n<56320){(r-=3)>-1&&N.push(239,191,189),y=n;continue}n=(y-55296<<10|n-56320)+65536}else y&&(r-=3)>-1&&N.push(239,191,189);if(y=null,n<128){if((r-=1)<0)break;N.push(n)}else if(n<2048){if((r-=2)<0)break;N.push(n>>6|192,n&63|128)}else if(n<65536){if((r-=3)<0)break;N.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((r-=4)<0)break;N.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return N}function Me(o){for(var r=[],n=0;n<o.length;++n)r.push(o.charCodeAt(n)&255);return r}function Ae(o,r){for(var n,s,y,N=[],T=0;T<o.length&&!((r-=2)<0);++T)n=o.charCodeAt(T),s=n>>8,y=n%256,N.push(y),N.push(s);return N}function ae(o){return a.toByteArray(R(o))}function M(o,r,n,s){for(var y=0;y<s&&!(y+n>=r.length||y>=o.length);++y)r[y+n]=o[y];return y}function O(o,r){return o instanceof r||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===r.name}function it(o){return o!==o}var ct=function(){for(var o="0123456789abcdef",r=new Array(256),n=0;n<16;++n)for(var s=n*16,y=0;y<16;++y)r[s+y]=o[n]+o[y];return r}()})(Gt);var x={};(function(i){var a=i;(function(u){function l(e){var t=Array.prototype.slice,c=e.length,m=function(d,I){return function(){return I.apply(this,d.concat(t.call(arguments)))}},p=function(){var d=t.call(arguments);return d.length<c?m(d,p):e.apply(this,t.apply(arguments,[0,c]))};return p}var f=function(e,t){for(var c=0;c<t.length;c+=1)e(t[c],c,t)},E=function(e,t,c){var m=t;return f(function(p,d){m=e(m,p,d)},c),m},v=function(e,t){var c=new Array(t.length);return f(function(m,p){c[p]=e(m)},t),c},h=function(e,t){var c=[];return f(function(m,p){e(m,p)&&c.push(m)},t),c},D=function(e,t){for(var c=0;c<e.length;c+=1)if(e[c]===t)return!0;return!1};function U(e){return function(){return e}}function $(e){return e.toString()}var W=function(e,t){return t.join(e)},oe=function(e,t,c){return e+c+t},ie=Array.prototype.concat,ge=32767;function ke(e){for(var t=[],c=0;c<e.length;c+=ge){var m=e.slice(c,c+ge);t=ie.apply(t,m)}return t}function et(e,t){for(var c=Object(e),m=1;m<arguments.length;m++){var p=arguments[m];if(p!=null)for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(c[d]=p[d])}return c}A.prototype=new Object,A.prototype.constructor=A,A.superclass=Object.prototype;function A(){this.init()}A.prototype.init=function(){this.reduceActions=[],this.reduceActions[3]=function(e){return new Re(e[0],e[2])},this.reduceActions[5]=function(e){return new Fe(e[0],e[2])},this.reduceActions[7]=function(e){return new Oe(e[0],e[2])},this.reduceActions[8]=function(e){return new Ie(e[0],e[2])},this.reduceActions[10]=function(e){return new be(e[0],e[2])},this.reduceActions[11]=function(e){return new se(e[0],e[2])},this.reduceActions[12]=function(e){return new ye(e[0],e[2])},this.reduceActions[13]=function(e){return new Ee(e[0],e[2])},this.reduceActions[15]=function(e){return new ve(e[0],e[2])},this.reduceActions[16]=function(e){return new Be(e[0],e[2])},this.reduceActions[18]=function(e){return new Le(e[0],e[2])},this.reduceActions[19]=function(e){return new Pe(e[0],e[2])},this.reduceActions[20]=function(e){return new De(e[0],e[2])},this.reduceActions[22]=function(e){return new he(e[1])},this.reduceActions[24]=function(e){return new Z(e[0],e[2])},this.reduceActions[25]=function(e){return new P(void 0,void 0,e[0])},this.reduceActions[27]=function(e){return e[0].locationPath=e[2],e[0]},this.reduceActions[28]=function(e){return e[0].locationPath=e[2],e[0].locationPath.steps.unshift(new R(R.DESCENDANTORSELF,F.nodeTest,[])),e[0]},this.reduceActions[29]=function(e){return new P(e[0],[],void 0)},this.reduceActions[30]=function(e){return C.instance_of(e[0],P)?(e[0].filterPredicates==null&&(e[0].filterPredicates=[]),e[0].filterPredicates.push(e[1]),e[0]):new P(e[0],[e[1]],void 0)},this.reduceActions[32]=function(e){return e[1]},this.reduceActions[33]=function(e){return new M(e[0])},this.reduceActions[34]=function(e){return new O(e[0])},this.reduceActions[36]=function(e){return new Ae(e[0],[])},this.reduceActions[37]=function(e){return new Ae(e[0],e[2])},this.reduceActions[38]=function(e){return[e[0]]},this.reduceActions[39]=function(e){return e[2].unshift(e[0]),e[2]},this.reduceActions[43]=function(e){return new ee(!0,[])},this.reduceActions[44]=function(e){return e[1].absolute=!0,e[1]},this.reduceActions[46]=function(e){return new ee(!1,[e[0]])},this.reduceActions[47]=function(e){return e[0].steps.push(e[2]),e[0]},this.reduceActions[49]=function(e){return new R(e[0],e[1],[])},this.reduceActions[50]=function(e){return new R(R.CHILD,e[0],[])},this.reduceActions[51]=function(e){return new R(e[0],e[1],e[2])},this.reduceActions[52]=function(e){return new R(R.CHILD,e[0],e[1])},this.reduceActions[54]=function(e){return[e[0]]},this.reduceActions[55]=function(e){return e[1].unshift(e[0]),e[1]},this.reduceActions[56]=function(e){return e[0]=="ancestor"?R.ANCESTOR:e[0]=="ancestor-or-self"?R.ANCESTORORSELF:e[0]=="attribute"?R.ATTRIBUTE:e[0]=="child"?R.CHILD:e[0]=="descendant"?R.DESCENDANT:e[0]=="descendant-or-self"?R.DESCENDANTORSELF:e[0]=="following"?R.FOLLOWING:e[0]=="following-sibling"?R.FOLLOWINGSIBLING:e[0]=="namespace"?R.NAMESPACE:e[0]=="parent"?R.PARENT:e[0]=="preceding"?R.PRECEDING:e[0]=="preceding-sibling"?R.PRECEDINGSIBLING:e[0]=="self"?R.SELF:-1},this.reduceActions[57]=function(e){return R.ATTRIBUTE},this.reduceActions[59]=function(e){return e[0]=="comment"?F.commentTest:e[0]=="text"?F.textTest:e[0]=="processing-instruction"?F.anyPiTest:e[0]=="node"?F.nodeTest:new F(-1,void 0)},this.reduceActions[60]=function(e){return new F.PITest(e[2])},this.reduceActions[61]=function(e){return e[1]},this.reduceActions[63]=function(e){return e[1].absolute=!0,e[1].steps.unshift(new R(R.DESCENDANTORSELF,F.nodeTest,[])),e[1]},this.reduceActions[64]=function(e){return e[0].steps.push(new R(R.DESCENDANTORSELF,F.nodeTest,[])),e[0].steps.push(e[2]),e[0]},this.reduceActions[65]=function(e){return new R(R.SELF,F.nodeTest,[])},this.reduceActions[66]=function(e){return new R(R.PARENT,F.nodeTest,[])},this.reduceActions[67]=function(e){return new Me(e[1])},this.reduceActions[68]=function(e){return F.nameTestAny},this.reduceActions[69]=function(e){return new F.NameTestPrefixAny(e[0].split(":")[0])},this.reduceActions[70]=function(e){return new F.NameTestQName(e[0])}},A.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "],A.actionTableNumber=[` 1 0        /.-,+*)('    & %$  #  "!`,"                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               ",` 1 0        /.-,+*)('    & %$  #  "!`,`K1  KKKKKKKK .  +*)('KKKKKK  KK# K" `,` 1 0        /.-,+*)('    & %$  #  "!`,"                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       ",` 1           .  +*)('          #  " `,"b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               ",` 1 0        /.-,+*)('    & %$m #  "!`,"_  f________         ______e __  _  ",` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('      %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1           .  +*)('          #  " `,` 1           .  +*)('          #  " `,">  >>>>>>>>>         >>>>>>> >> >>  ",` 1           .  +*)('          #  " `,` 1           .  +*)('          #  " `,"Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                                   ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                                   ","                             F     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                   ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  ",` 1 0        /.-,+*)('    & %$  #  "!`,"]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "],A.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         =>?@ AB  CDEFGH IJ ","456789:;<=>?@ AB  CDEFGH IJ","                    EFGH IJ ","                    EFGH IJ ","                             ","                      GH IJ ","                      GH IJ ","              i             ","              i             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABqCDEFGH IJ ","                             ","                             "],A.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]],A.DOUBLEDOT=2,A.DOUBLECOLON=3,A.DOUBLESLASH=4,A.NOTEQUAL=5,A.LESSTHANOREQUAL=6,A.GREATERTHANOREQUAL=7,A.AND=8,A.OR=9,A.MOD=10,A.DIV=11,A.MULTIPLYOPERATOR=12,A.FUNCTIONNAME=13,A.AXISNAME=14,A.LITERAL=15,A.NUMBER=16,A.ASTERISKNAMETEST=17,A.QNAME=18,A.NCNAMECOLONASTERISK=19,A.NODETYPE=20,A.PROCESSINGINSTRUCTIONWITHLITERAL=21,A.EQUALS=22,A.LESSTHAN=23,A.GREATERTHAN=24,A.PLUS=25,A.MINUS=26,A.BAR=27,A.SLASH=28,A.LEFTPARENTHESIS=29,A.RIGHTPARENTHESIS=30,A.COMMA=31,A.AT=32,A.LEFTBRACKET=33,A.RIGHTBRACKET=34,A.DOT=35,A.DOLLAR=36,A.prototype.tokenize=function(e){for(var t=[],c=[],m=e+"\0",p=0,d=m.charAt(p++);;){for(;d==" "||d=="	"||d=="\r"||d==`
`;)d=m.charAt(p++);if(d=="\0"||p>=m.length)break;if(d=="("){t.push(A.LEFTPARENTHESIS),c.push(d),d=m.charAt(p++);continue}if(d==")"){t.push(A.RIGHTPARENTHESIS),c.push(d),d=m.charAt(p++);continue}if(d=="["){t.push(A.LEFTBRACKET),c.push(d),d=m.charAt(p++);continue}if(d=="]"){t.push(A.RIGHTBRACKET),c.push(d),d=m.charAt(p++);continue}if(d=="@"){t.push(A.AT),c.push(d),d=m.charAt(p++);continue}if(d==","){t.push(A.COMMA),c.push(d),d=m.charAt(p++);continue}if(d=="|"){t.push(A.BAR),c.push(d),d=m.charAt(p++);continue}if(d=="+"){t.push(A.PLUS),c.push(d),d=m.charAt(p++);continue}if(d=="-"){t.push(A.MINUS),c.push(d),d=m.charAt(p++);continue}if(d=="="){t.push(A.EQUALS),c.push(d),d=m.charAt(p++);continue}if(d=="$"){t.push(A.DOLLAR),c.push(d),d=m.charAt(p++);continue}if(d=="."){if(d=m.charAt(p++),d=="."){t.push(A.DOUBLEDOT),c.push(".."),d=m.charAt(p++);continue}if(d>="0"&&d<="9"){var I="."+d;for(d=m.charAt(p++);d>="0"&&d<="9";)I+=d,d=m.charAt(p++);t.push(A.NUMBER),c.push(I);continue}t.push(A.DOT),c.push(".");continue}if(d=="'"||d=='"'){for(var k=d,Q="";p<m.length&&(d=m.charAt(p))!==k;)Q+=d,p+=1;if(d!==k)throw J.fromMessage("Unterminated string literal: "+k+Q);p+=1,t.push(A.LITERAL),c.push(Q),d=m.charAt(p++);continue}if(d>="0"&&d<="9"){var I=d;for(d=m.charAt(p++);d>="0"&&d<="9";)I+=d,d=m.charAt(p++);if(d=="."&&m.charAt(p)>="0"&&m.charAt(p)<="9")for(I+=d,I+=m.charAt(p++),d=m.charAt(p++);d>="0"&&d<="9";)I+=d,d=m.charAt(p++);t.push(A.NUMBER),c.push(I);continue}if(d=="*"){if(t.length>0){var B=t[t.length-1];if(B!=A.AT&&B!=A.DOUBLECOLON&&B!=A.LEFTPARENTHESIS&&B!=A.LEFTBRACKET&&B!=A.AND&&B!=A.OR&&B!=A.MOD&&B!=A.DIV&&B!=A.MULTIPLYOPERATOR&&B!=A.SLASH&&B!=A.DOUBLESLASH&&B!=A.BAR&&B!=A.PLUS&&B!=A.MINUS&&B!=A.EQUALS&&B!=A.NOTEQUAL&&B!=A.LESSTHAN&&B!=A.LESSTHANOREQUAL&&B!=A.GREATERTHAN&&B!=A.GREATERTHANOREQUAL){t.push(A.MULTIPLYOPERATOR),c.push(d),d=m.charAt(p++);continue}}t.push(A.ASTERISKNAMETEST),c.push(d),d=m.charAt(p++);continue}if(d==":"&&m.charAt(p)==":"){t.push(A.DOUBLECOLON),c.push("::"),p++,d=m.charAt(p++);continue}if(d=="/"){if(d=m.charAt(p++),d=="/"){t.push(A.DOUBLESLASH),c.push("//"),d=m.charAt(p++);continue}t.push(A.SLASH),c.push("/");continue}if(d=="!"&&m.charAt(p)=="="){t.push(A.NOTEQUAL),c.push("!="),p++,d=m.charAt(p++);continue}if(d=="<"){if(m.charAt(p)=="="){t.push(A.LESSTHANOREQUAL),c.push("<="),p++,d=m.charAt(p++);continue}t.push(A.LESSTHAN),c.push("<"),d=m.charAt(p++);continue}if(d==">"){if(m.charAt(p)=="="){t.push(A.GREATERTHANOREQUAL),c.push(">="),p++,d=m.charAt(p++);continue}t.push(A.GREATERTHAN),c.push(">"),d=m.charAt(p++);continue}if(d=="_"||C.isLetter(d.charCodeAt(0))){var q=d;for(d=m.charAt(p++);C.isNCNameChar(d.charCodeAt(0));)q+=d,d=m.charAt(p++);if(t.length>0){var B=t[t.length-1];if(B!=A.AT&&B!=A.DOUBLECOLON&&B!=A.LEFTPARENTHESIS&&B!=A.LEFTBRACKET&&B!=A.AND&&B!=A.OR&&B!=A.MOD&&B!=A.DIV&&B!=A.MULTIPLYOPERATOR&&B!=A.SLASH&&B!=A.DOUBLESLASH&&B!=A.BAR&&B!=A.PLUS&&B!=A.MINUS&&B!=A.EQUALS&&B!=A.NOTEQUAL&&B!=A.LESSTHAN&&B!=A.LESSTHANOREQUAL&&B!=A.GREATERTHAN&&B!=A.GREATERTHANOREQUAL){if(q=="and"){t.push(A.AND),c.push(q);continue}if(q=="or"){t.push(A.OR),c.push(q);continue}if(q=="mod"){t.push(A.MOD),c.push(q);continue}if(q=="div"){t.push(A.DIV),c.push(q);continue}}}if(d==":"){if(m.charAt(p)=="*"){t.push(A.NCNAMECOLONASTERISK),c.push(q+":*"),p++,d=m.charAt(p++);continue}if(m.charAt(p)=="_"||C.isLetter(m.charCodeAt(p))){for(q+=":",d=m.charAt(p++);C.isNCNameChar(d.charCodeAt(0));)q+=d,d=m.charAt(p++);if(d=="("){t.push(A.FUNCTIONNAME),c.push(q);continue}t.push(A.QNAME),c.push(q);continue}if(m.charAt(p)==":"){t.push(A.AXISNAME),c.push(q);continue}}if(d=="("){if(q=="comment"||q=="text"||q=="node"){t.push(A.NODETYPE),c.push(q);continue}if(q=="processing-instruction"){m.charAt(p)==")"?t.push(A.NODETYPE):t.push(A.PROCESSINGINSTRUCTIONWITHLITERAL),c.push(q);continue}t.push(A.FUNCTIONNAME),c.push(q);continue}t.push(A.QNAME),c.push(q);continue}throw new Error("Unexpected character "+d)}return t.push(1),c.push("[EOF]"),[t,c]},A.SHIFT="s",A.REDUCE="r",A.ACCEPT="a",A.prototype.parse=function(Q){var t,c,m=this.tokenize(Q);if(m!=null){t=m[0],c=m[1];var p=0,d=[],I=[],k=[],Q,B,q;for(d.push(0),I.push(1),k.push("_S"),B=t[p],q=c[p++];;)switch(Q=d[d.length-1],A.actionTable[Q].charAt(B-1)){case A.SHIFT:I.push(-B),k.push(q),d.push(A.actionTableNumber[Q].charCodeAt(B-1)-32),B=t[p],q=c[p++];break;case A.REDUCE:for(var we=A.productions[A.actionTableNumber[Q].charCodeAt(B-1)-32][1],te=[],We=0;We<we;We++)I.pop(),te.unshift(k.pop()),d.pop();var rt=d[d.length-1];I.push(A.productions[A.actionTableNumber[Q].charCodeAt(B-1)-32][0]),this.reduceActions[A.actionTableNumber[Q].charCodeAt(B-1)-32]==null?k.push(te[0]):k.push(this.reduceActions[A.actionTableNumber[Q].charCodeAt(B-1)-32](te)),d.push(A.gotoTable[rt].charCodeAt(A.productions[A.actionTableNumber[Q].charCodeAt(B-1)-32][0]-2)-33);break;case A.ACCEPT:return new le(k.pop());default:throw new Error("XPath parse error")}}},le.prototype=new Object,le.prototype.constructor=le,le.superclass=Object.prototype;function le(e){this.expression=e}le.prototype.toString=function(){return this.expression.toString()};function tt(e,t,c){t in e||(e[t]=c)}le.prototype.evaluate=function(e){return e.contextNode=e.expressionContextNode,e.contextSize=1,e.contextPosition=1,e.isHtml&&(tt(e,"caseInsensitive",!0),tt(e,"allowAnyNamespaceForNoPrefix",!0)),tt(e,"caseInsensitive",!1),this.expression.evaluate(e)},le.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace",le.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/",X.prototype=new Object,X.prototype.constructor=X,X.superclass=Object.prototype;function X(){}X.prototype.init=function(){},X.prototype.toString=function(){return"<Expression>"},X.prototype.evaluate=function(e){throw new Error("Could not evaluate expression.")},fe.prototype=new X,fe.prototype.constructor=fe,fe.superclass=X.prototype;function fe(e){arguments.length>0&&this.init(e)}fe.prototype.init=function(e){this.rhs=e},he.prototype=new fe,he.prototype.constructor=he,he.superclass=fe.prototype;function he(e){arguments.length>0&&this.init(e)}he.prototype.init=function(e){he.superclass.init.call(this,e)},he.prototype.evaluate=function(e){return this.rhs.evaluate(e).number().negate()},he.prototype.toString=function(){return"-"+this.rhs.toString()},Y.prototype=new X,Y.prototype.constructor=Y,Y.superclass=X.prototype;function Y(e,t){arguments.length>0&&this.init(e,t)}Y.prototype.init=function(e,t){this.lhs=e,this.rhs=t},Re.prototype=new Y,Re.prototype.constructor=Re,Re.superclass=Y.prototype;function Re(e,t){arguments.length>0&&this.init(e,t)}Re.prototype.init=function(e,t){Re.superclass.init.call(this,e,t)},Re.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"},Re.prototype.evaluate=function(e){var t=this.lhs.evaluate(e).bool();return t.booleanValue()?t:this.rhs.evaluate(e).bool()},Fe.prototype=new Y,Fe.prototype.constructor=Fe,Fe.superclass=Y.prototype;function Fe(e,t){arguments.length>0&&this.init(e,t)}Fe.prototype.init=function(e,t){Fe.superclass.init.call(this,e,t)},Fe.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"},Fe.prototype.evaluate=function(e){var t=this.lhs.evaluate(e).bool();return t.booleanValue()?this.rhs.evaluate(e).bool():t},Oe.prototype=new Y,Oe.prototype.constructor=Oe,Oe.superclass=Y.prototype;function Oe(e,t){arguments.length>0&&this.init(e,t)}Oe.prototype.init=function(e,t){Oe.superclass.init.call(this,e,t)},Oe.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"},Oe.prototype.evaluate=function(e){return this.lhs.evaluate(e).equals(this.rhs.evaluate(e))},Ie.prototype=new Y,Ie.prototype.constructor=Ie,Ie.superclass=Y.prototype;function Ie(e,t){arguments.length>0&&this.init(e,t)}Ie.prototype.init=function(e,t){Ie.superclass.init.call(this,e,t)},Ie.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"},Ie.prototype.evaluate=function(e){return this.lhs.evaluate(e).notequal(this.rhs.evaluate(e))},be.prototype=new Y,be.prototype.constructor=be,be.superclass=Y.prototype;function be(e,t){arguments.length>0&&this.init(e,t)}be.prototype.init=function(e,t){be.superclass.init.call(this,e,t)},be.prototype.evaluate=function(e){return this.lhs.evaluate(e).lessthan(this.rhs.evaluate(e))},be.prototype.toString=function(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"},se.prototype=new Y,se.prototype.constructor=se,se.superclass=Y.prototype;function se(e,t){arguments.length>0&&this.init(e,t)}se.prototype.init=function(e,t){se.superclass.init.call(this,e,t)},se.prototype.evaluate=function(e){return this.lhs.evaluate(e).greaterthan(this.rhs.evaluate(e))},se.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"},ye.prototype=new Y,ye.prototype.constructor=ye,ye.superclass=Y.prototype;function ye(e,t){arguments.length>0&&this.init(e,t)}ye.prototype.init=function(e,t){ye.superclass.init.call(this,e,t)},ye.prototype.evaluate=function(e){return this.lhs.evaluate(e).lessthanorequal(this.rhs.evaluate(e))},ye.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"},Ee.prototype=new Y,Ee.prototype.constructor=Ee,Ee.superclass=Y.prototype;function Ee(e,t){arguments.length>0&&this.init(e,t)}Ee.prototype.init=function(e,t){Ee.superclass.init.call(this,e,t)},Ee.prototype.evaluate=function(e){return this.lhs.evaluate(e).greaterthanorequal(this.rhs.evaluate(e))},Ee.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"},ve.prototype=new Y,ve.prototype.constructor=ve,ve.superclass=Y.prototype;function ve(e,t){arguments.length>0&&this.init(e,t)}ve.prototype.init=function(e,t){ve.superclass.init.call(this,e,t)},ve.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().plus(this.rhs.evaluate(e).number())},ve.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"},Be.prototype=new Y,Be.prototype.constructor=Be,Be.superclass=Y.prototype;function Be(e,t){arguments.length>0&&this.init(e,t)}Be.prototype.init=function(e,t){Be.superclass.init.call(this,e,t)},Be.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().minus(this.rhs.evaluate(e).number())},Be.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"},Le.prototype=new Y,Le.prototype.constructor=Le,Le.superclass=Y.prototype;function Le(e,t){arguments.length>0&&this.init(e,t)}Le.prototype.init=function(e,t){Le.superclass.init.call(this,e,t)},Le.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().multiply(this.rhs.evaluate(e).number())},Le.prototype.toString=function(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"},Pe.prototype=new Y,Pe.prototype.constructor=Pe,Pe.superclass=Y.prototype;function Pe(e,t){arguments.length>0&&this.init(e,t)}Pe.prototype.init=function(e,t){Pe.superclass.init.call(this,e,t)},Pe.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().div(this.rhs.evaluate(e).number())},Pe.prototype.toString=function(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"},De.prototype=new Y,De.prototype.constructor=De,De.superclass=Y.prototype;function De(e,t){arguments.length>0&&this.init(e,t)}De.prototype.init=function(e,t){De.superclass.init.call(this,e,t)},De.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().mod(this.rhs.evaluate(e).number())},De.prototype.toString=function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"},Z.prototype=new Y,Z.prototype.constructor=Z,Z.superclass=Y.prototype;function Z(e,t){arguments.length>0&&this.init(e,t)}Z.prototype.init=function(e,t){Z.superclass.init.call(this,e,t)},Z.prototype.evaluate=function(e){return this.lhs.evaluate(e).nodeset().union(this.rhs.evaluate(e).nodeset())},Z.prototype.toString=function(){return v($,[this.lhs,this.rhs]).join(" | ")},P.prototype=new X,P.prototype.constructor=P,P.superclass=X.prototype;function P(e,t,c){arguments.length>0&&this.init(e,t,c)}P.prototype.init=function(e,t,c){P.superclass.init.call(this),this.filter=e,this.filterPredicates=t,this.locationPath=c};function ut(e){for(;e&&e.parentNode;)e=e.parentNode;return e}P.applyPredicates=function(e,t,c){if(e.length===0)return c;var m=t.extend({});return E(function(p,d){return m.contextSize=p.length,h(function(I,k){return m.contextNode=I,m.contextPosition=k+1,P.predicateMatches(d,m)},p)},c,e)},P.getRoot=function(e,t){var c=t[0];if(c.nodeType===9)return c;if(e.virtualRoot)return e.virtualRoot;var m=c.ownerDocument;if(m)return m;for(var p=c;p.parentNode!=null;)p=p.parentNode;return p},P.applyStep=function(e,t,c){var m=[];switch(t.contextNode=c,e.axis){case R.ANCESTOR:if(t.contextNode===t.virtualRoot)break;var p;for(t.contextNode.nodeType==2?p=P.getOwnerElement(t.contextNode):p=t.contextNode.parentNode;p!=null&&(e.nodeTest.matches(p,t)&&m.push(p),p!==t.virtualRoot);)p=p.parentNode;break;case R.ANCESTORORSELF:for(var p=t.contextNode;p!=null&&(e.nodeTest.matches(p,t)&&m.push(p),p!==t.virtualRoot);p=p.nodeType==2?P.getOwnerElement(p):p.parentNode);break;case R.ATTRIBUTE:var d=t.contextNode.attributes;if(d!=null)for(var I=0;I<d.length;I++){var p=d.item(I);e.nodeTest.matches(p,t)&&m.push(p)}break;case R.CHILD:for(var p=t.contextNode.firstChild;p!=null;p=p.nextSibling)e.nodeTest.matches(p,t)&&m.push(p);break;case R.DESCENDANT:for(var te=[t.contextNode.firstChild];te.length>0;)for(var p=te.pop();p!=null;)e.nodeTest.matches(p,t)&&m.push(p),p.firstChild!=null?(te.push(p.nextSibling),p=p.firstChild):p=p.nextSibling;break;case R.DESCENDANTORSELF:e.nodeTest.matches(t.contextNode,t)&&m.push(t.contextNode);for(var te=[t.contextNode.firstChild];te.length>0;)for(var p=te.pop();p!=null;)e.nodeTest.matches(p,t)&&m.push(p),p.firstChild!=null?(te.push(p.nextSibling),p=p.firstChild):p=p.nextSibling;break;case R.FOLLOWING:if(t.contextNode===t.virtualRoot)break;var te=[];t.contextNode.firstChild!=null?te.unshift(t.contextNode.firstChild):te.unshift(t.contextNode.nextSibling);for(var p=t.contextNode.parentNode;p!=null&&p.nodeType!=9&&p!==t.virtualRoot;p=p.parentNode)te.unshift(p.nextSibling);do for(var p=te.pop();p!=null;)e.nodeTest.matches(p,t)&&m.push(p),p.firstChild!=null?(te.push(p.nextSibling),p=p.firstChild):p=p.nextSibling;while(te.length>0);break;case R.FOLLOWINGSIBLING:if(t.contextNode===t.virtualRoot)break;for(var p=t.contextNode.nextSibling;p!=null;p=p.nextSibling)e.nodeTest.matches(p,t)&&m.push(p);break;case R.NAMESPACE:var k={};if(t.contextNode.nodeType==1){k.xml=le.XML_NAMESPACE_URI,k.xmlns=le.XMLNS_NAMESPACE_URI;for(var p=t.contextNode;p!=null&&p.nodeType==1;p=p.parentNode)for(var I=0;I<p.attributes.length;I++){var Q=p.attributes.item(I),B=String(Q.name);if(B=="xmlns")k[""]==null&&(k[""]=Q.value);else if(B.length>6&&B.substring(0,6)=="xmlns:"){var q=B.substring(6,B.length);k[q]==null&&(k[q]=Q.value)}}for(var q in k){var we=new y(q,k[q],t.contextNode);e.nodeTest.matches(we,t)&&m.push(we)}}break;case R.PARENT:p=null,t.contextNode!==t.virtualRoot&&(t.contextNode.nodeType==2?p=P.getOwnerElement(t.contextNode):p=t.contextNode.parentNode),p!=null&&e.nodeTest.matches(p,t)&&m.push(p);break;case R.PRECEDING:var te;t.virtualRoot!=null?te=[t.virtualRoot]:te=[ut(t.contextNode)];e:for(;te.length>0;)for(var p=te.pop();p!=null;){if(p==t.contextNode)break e;e.nodeTest.matches(p,t)&&m.unshift(p),p.firstChild!=null?(te.push(p.nextSibling),p=p.firstChild):p=p.nextSibling}break;case R.PRECEDINGSIBLING:if(t.contextNode===t.virtualRoot)break;for(var p=t.contextNode.previousSibling;p!=null;p=p.previousSibling)e.nodeTest.matches(p,t)&&m.push(p);break;case R.SELF:e.nodeTest.matches(t.contextNode,t)&&m.push(t.contextNode);break}return m};function ue(e,t,c){return P.applyPredicates(e.predicates,t,P.applyStep(e,t,c))}function lt(e,t,c){return ke(v(ue.bind(null,c,e),t))}P.applySteps=function(e,t,c){return E(lt.bind(null,t),c,e)},P.prototype.applyFilter=function(e,t){if(!this.filter)return{nodes:[e.contextNode]};var c=this.filter.evaluate(e);if(!C.instance_of(c,s)){if(this.filterPredicates!=null&&this.filterPredicates.length>0||this.locationPath!=null)throw new Error("Path expression filter must evaluate to a nodeset if predicates or location path are used");return{nonNodes:c}}return{nodes:P.applyPredicates(this.filterPredicates||[],t,c.toUnsortedArray())}},P.applyLocationPath=function(e,t,c){if(!e)return c;var m=e.absolute?[P.getRoot(t,c)]:c;return P.applySteps(e.steps,t,m)},P.prototype.evaluate=function(e){var t=et(new N,e),c=this.applyFilter(e,t);if("nonNodes"in c)return c.nonNodes;var m=new s;return m.addArray(P.applyLocationPath(this.locationPath,t,c.nodes)),m},P.predicateMatches=function(e,t){var c=e.evaluate(t);return C.instance_of(c,O)?t.contextPosition===c.numberValue():c.booleanValue()},P.predicateString=function(e){return oe("[","]",e.toString())},P.predicatesString=function(e){return W("",v(P.predicateString,e))},P.prototype.toString=function(){if(this.filter!=null){var e=$(this.filter);return C.instance_of(this.filter,M)?oe("'","'",e):this.filterPredicates!=null&&this.filterPredicates.length?oe("(",")",e)+P.predicatesString(this.filterPredicates):this.locationPath!=null?e+(this.locationPath.absolute?"":"/")+$(this.locationPath):e}return $(this.locationPath)},P.getOwnerElement=function(e){if(e.ownerElement)return e.ownerElement;try{if(e.selectSingleNode)return e.selectSingleNode("..")}catch{}for(var t=e.nodeType==9?e:e.ownerDocument,c=t.getElementsByTagName("*"),m=0;m<c.length;m++)for(var p=c.item(m),d=p.attributes,I=0;I<d.length;I++){var k=d.item(I);if(k===e)return p}return null},ee.prototype=new Object,ee.prototype.constructor=ee,ee.superclass=Object.prototype;function ee(e,t){arguments.length>0&&this.init(e,t)}ee.prototype.init=function(e,t){this.absolute=e,this.steps=t},ee.prototype.toString=function(){return(this.absolute?"/":"")+v($,this.steps).join("/")},R.prototype=new Object,R.prototype.constructor=R,R.superclass=Object.prototype;function R(e,t,c){arguments.length>0&&this.init(e,t,c)}R.prototype.init=function(e,t,c){this.axis=e,this.nodeTest=t,this.predicates=c},R.prototype.toString=function(){return R.STEPNAMES[this.axis]+"::"+this.nodeTest.toString()+P.predicatesString(this.predicates)},R.ANCESTOR=0,R.ANCESTORORSELF=1,R.ATTRIBUTE=2,R.CHILD=3,R.DESCENDANT=4,R.DESCENDANTORSELF=5,R.FOLLOWING=6,R.FOLLOWINGSIBLING=7,R.NAMESPACE=8,R.PARENT=9,R.PRECEDING=10,R.PRECEDINGSIBLING=11,R.SELF=12,R.STEPNAMES=E(function(e,t){return e[t[0]]=t[1],e},{},[[R.ANCESTOR,"ancestor"],[R.ANCESTORORSELF,"ancestor-or-self"],[R.ATTRIBUTE,"attribute"],[R.CHILD,"child"],[R.DESCENDANT,"descendant"],[R.DESCENDANTORSELF,"descendant-or-self"],[R.FOLLOWING,"following"],[R.FOLLOWINGSIBLING,"following-sibling"],[R.NAMESPACE,"namespace"],[R.PARENT,"parent"],[R.PRECEDING,"preceding"],[R.PRECEDINGSIBLING,"preceding-sibling"],[R.SELF,"self"]]),F.prototype=new Object,F.prototype.constructor=F,F.superclass=Object.prototype;function F(e,t){arguments.length>0&&this.init(e,t)}F.prototype.init=function(e,t){this.type=e,this.value=t},F.prototype.toString=function(){return"<unknown nodetest type>"},F.prototype.matches=function(e,t){console.warn("unknown node test type")},F.NAMETESTANY=0,F.NAMETESTPREFIXANY=1,F.NAMETESTQNAME=2,F.COMMENT=3,F.TEXT=4,F.PI=5,F.NODE=6,F.isNodeType=function(e){return function(t){return D(e,t.nodeType)}},F.makeNodeTestType=function(e,t,c){var m=c||function(){};return m.prototype=new F(e),m.prototype.constructor=m,et(m.prototype,t),m},F.makeNodeTypeTest=function(e,t,c){return new(F.makeNodeTestType(e,{matches:F.isNodeType(t),toString:U(c)}))},F.hasPrefix=function(e){return e.prefix||(e.nodeName||e.tagName).indexOf(":")!==-1},F.isElementOrAttribute=F.isNodeType([1,2]),F.nameSpaceMatches=function(e,t,c){var m=c.namespaceURI||"";if(!e)return!m||t.allowAnyNamespaceForNoPrefix&&!F.hasPrefix(c);var p=t.namespaceResolver.getNamespace(e,t.expressionContextNode);if(p==null)throw new Error("Cannot resolve QName "+e);return p===m},F.localNameMatches=function(e,t,c){var m=c.localName||c.nodeName;return t.caseInsensitive?e.toLowerCase()===m.toLowerCase():e===m},F.NameTestPrefixAny=F.makeNodeTestType(F.NAMETESTPREFIXANY,{matches:function(e,t){return F.isElementOrAttribute(e)&&F.nameSpaceMatches(this.prefix,t,e)},toString:function(){return this.prefix+":*"}},function(t){this.prefix=t}),F.NameTestQName=F.makeNodeTestType(F.NAMETESTQNAME,{matches:function(e,t){return F.isNodeType([1,2,y.XPATH_NAMESPACE_NODE])(e)&&F.nameSpaceMatches(this.prefix,t,e)&&F.localNameMatches(this.localName,t,e)},toString:function(){return this.name}},function(t){var c=t.split(":");this.name=t,this.prefix=c.length>1?c[0]:null,this.localName=c[c.length>1?1:0]}),F.PITest=F.makeNodeTestType(F.PI,{matches:function(e,t){return F.isNodeType([7])(e)&&(e.target||e.nodeName)===this.name},toString:function(){return oe('processing-instruction("','")',this.name)}},function(e){this.name=e}),F.nameTestAny=F.makeNodeTypeTest(F.NAMETESTANY,[1,2,y.XPATH_NAMESPACE_NODE],"*"),F.textTest=F.makeNodeTypeTest(F.TEXT,[3,4],"text()"),F.commentTest=F.makeNodeTypeTest(F.COMMENT,[8],"comment()"),F.nodeTest=F.makeNodeTypeTest(F.NODE,[1,2,3,4,7,8,9],"node()"),F.anyPiTest=F.makeNodeTypeTest(F.PI,[7],"processing-instruction()"),Me.prototype=new X,Me.prototype.constructor=Me,Me.superclass=X.prototype;function Me(e){arguments.length>0&&this.init(e)}Me.prototype.init=function(e){this.variable=e},Me.prototype.toString=function(){return"$"+this.variable},Me.prototype.evaluate=function(e){var t=C.resolveQName(this.variable,e.namespaceResolver,e.contextNode,!1);if(t[0]==null)throw new Error("Cannot resolve QName "+fn);var c=e.variableResolver.getVariable(t[1],t[0]);if(!c)throw J.fromMessage("Undeclared variable: "+this.toString());return c},Ae.prototype=new X,Ae.prototype.constructor=Ae,Ae.superclass=X.prototype;function Ae(e,t){arguments.length>0&&this.init(e,t)}Ae.prototype.init=function(e,t){this.functionName=e,this.arguments=t},Ae.prototype.toString=function(){for(var e=this.functionName+"(",t=0;t<this.arguments.length;t++)t>0&&(e+=", "),e+=this.arguments[t].toString();return e+")"},Ae.prototype.evaluate=function(e){var t=H.getFunctionFromContext(this.functionName,e);if(!t)throw new Error("Unknown function "+this.functionName);var c=[e].concat(this.arguments);return t.apply(e.functionResolver.thisArg,c)};var ae=new Object;ae.equals=function(e,t){return e.equals(t)},ae.notequal=function(e,t){return e.notequal(t)},ae.lessthan=function(e,t){return e.lessthan(t)},ae.greaterthan=function(e,t){return e.greaterthan(t)},ae.lessthanorequal=function(e,t){return e.lessthanorequal(t)},ae.greaterthanorequal=function(e,t){return e.greaterthanorequal(t)},M.prototype=new X,M.prototype.constructor=M,M.superclass=X.prototype;function M(e){arguments.length>0&&this.init(e)}M.prototype.init=function(e){this.str=String(e)},M.prototype.toString=function(){return this.str},M.prototype.evaluate=function(e){return this},M.prototype.string=function(){return this},M.prototype.number=function(){return new O(this.str)},M.prototype.bool=function(){return new o(this.str)},M.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset")},M.prototype.stringValue=function(){return this.str},M.prototype.numberValue=function(){return this.number().numberValue()},M.prototype.booleanValue=function(){return this.bool().booleanValue()},M.prototype.equals=function(e){return C.instance_of(e,o)?this.bool().equals(e):C.instance_of(e,O)?this.number().equals(e):C.instance_of(e,s)?e.compareWithString(this,ae.equals):new o(this.str==e.str)},M.prototype.notequal=function(e){return C.instance_of(e,o)?this.bool().notequal(e):C.instance_of(e,O)?this.number().notequal(e):C.instance_of(e,s)?e.compareWithString(this,ae.notequal):new o(this.str!=e.str)},M.prototype.lessthan=function(e){return this.number().lessthan(e)},M.prototype.greaterthan=function(e){return this.number().greaterthan(e)},M.prototype.lessthanorequal=function(e){return this.number().lessthanorequal(e)},M.prototype.greaterthanorequal=function(e){return this.number().greaterthanorequal(e)},O.prototype=new X,O.prototype.constructor=O,O.superclass=X.prototype;function O(e){arguments.length>0&&this.init(e)}O.prototype.init=function(e){this.num=typeof e=="string"?this.parse(e):Number(e)},O.prototype.numberFormat=/^\s*-?[0-9]*\.?[0-9]+\s*$/,O.prototype.parse=function(e){return this.numberFormat.test(e)?parseFloat(e):Number.NaN};function it(e){for(var t=e.split("e-"),c=t[0].replace(".",""),m=Number(t[1]),p=0;p<m-1;p+=1)c="0"+c;return"0."+c}function ct(e){for(var t=e.split("e"),c=t[0].replace(".",""),m=Number(t[1]),p=m+1-c.length,d=0;d<p;d+=1)c+="0";return c}O.prototype.toString=function(){var e=this.num.toString();return e.indexOf("e-")!==-1?it(e):e.indexOf("e")!==-1?ct(e):e},O.prototype.evaluate=function(e){return this},O.prototype.string=function(){return new M(this.toString())},O.prototype.number=function(){return this},O.prototype.bool=function(){return new o(this.num)},O.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset")},O.prototype.stringValue=function(){return this.string().stringValue()},O.prototype.numberValue=function(){return this.num},O.prototype.booleanValue=function(){return this.bool().booleanValue()},O.prototype.negate=function(){return new O(-this.num)},O.prototype.equals=function(e){return C.instance_of(e,o)?this.bool().equals(e):C.instance_of(e,M)?this.equals(e.number()):C.instance_of(e,s)?e.compareWithNumber(this,ae.equals):new o(this.num==e.num)},O.prototype.notequal=function(e){return C.instance_of(e,o)?this.bool().notequal(e):C.instance_of(e,M)?this.notequal(e.number()):C.instance_of(e,s)?e.compareWithNumber(this,ae.notequal):new o(this.num!=e.num)},O.prototype.lessthan=function(e){return C.instance_of(e,s)?e.compareWithNumber(this,ae.greaterthan):C.instance_of(e,o)||C.instance_of(e,M)?this.lessthan(e.number()):new o(this.num<e.num)},O.prototype.greaterthan=function(e){return C.instance_of(e,s)?e.compareWithNumber(this,ae.lessthan):C.instance_of(e,o)||C.instance_of(e,M)?this.greaterthan(e.number()):new o(this.num>e.num)},O.prototype.lessthanorequal=function(e){return C.instance_of(e,s)?e.compareWithNumber(this,ae.greaterthanorequal):C.instance_of(e,o)||C.instance_of(e,M)?this.lessthanorequal(e.number()):new o(this.num<=e.num)},O.prototype.greaterthanorequal=function(e){return C.instance_of(e,s)?e.compareWithNumber(this,ae.lessthanorequal):C.instance_of(e,o)||C.instance_of(e,M)?this.greaterthanorequal(e.number()):new o(this.num>=e.num)},O.prototype.plus=function(e){return new O(this.num+e.num)},O.prototype.minus=function(e){return new O(this.num-e.num)},O.prototype.multiply=function(e){return new O(this.num*e.num)},O.prototype.div=function(e){return new O(this.num/e.num)},O.prototype.mod=function(e){return new O(this.num%e.num)},o.prototype=new X,o.prototype.constructor=o,o.superclass=X.prototype;function o(e){arguments.length>0&&this.init(e)}o.prototype.init=function(e){this.b=Boolean(e)},o.prototype.toString=function(){return this.b.toString()},o.prototype.evaluate=function(e){return this},o.prototype.string=function(){return new M(this.b)},o.prototype.number=function(){return new O(this.b)},o.prototype.bool=function(){return this},o.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset")},o.prototype.stringValue=function(){return this.string().stringValue()},o.prototype.numberValue=function(){return this.number().numberValue()},o.prototype.booleanValue=function(){return this.b},o.prototype.not=function(){return new o(!this.b)},o.prototype.equals=function(e){return C.instance_of(e,M)||C.instance_of(e,O)?this.equals(e.bool()):C.instance_of(e,s)?e.compareWithBoolean(this,ae.equals):new o(this.b==e.b)},o.prototype.notequal=function(e){return C.instance_of(e,M)||C.instance_of(e,O)?this.notequal(e.bool()):C.instance_of(e,s)?e.compareWithBoolean(this,ae.notequal):new o(this.b!=e.b)},o.prototype.lessthan=function(e){return this.number().lessthan(e)},o.prototype.greaterthan=function(e){return this.number().greaterthan(e)},o.prototype.lessthanorequal=function(e){return this.number().lessthanorequal(e)},o.prototype.greaterthanorequal=function(e){return this.number().greaterthanorequal(e)},o.true_=new o(!0),o.false_=new o(!1),r.prototype=new Object,r.prototype.constructor=r,r.superclass=Object.prototype;function r(e){this.init(e)}r.prototype.init=function(e){this.left=null,this.right=null,this.node=e,this.depth=1},r.prototype.balance=function(){var e=this.left==null?0:this.left.depth,t=this.right==null?0:this.right.depth;if(e>t+1){var c=this.left.left==null?0:this.left.left.depth,m=this.left.right==null?0:this.left.right.depth;c<m&&this.left.rotateRR(),this.rotateLL()}else if(e+1<t){var p=this.right.right==null?0:this.right.right.depth,d=this.right.left==null?0:this.right.left.depth;d>p&&this.right.rotateLL(),this.rotateRR()}},r.prototype.rotateLL=function(){var e=this.node,t=this.right;this.node=this.left.node,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=t,this.right.node=e,this.right.updateInNewLocation(),this.updateInNewLocation()},r.prototype.rotateRR=function(){var e=this.node,t=this.left;this.node=this.right.node,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=t,this.left.node=e,this.left.updateInNewLocation(),this.updateInNewLocation()},r.prototype.updateInNewLocation=function(){this.getDepthFromChildren()},r.prototype.getDepthFromChildren=function(){this.depth=this.node==null?0:1,this.left!=null&&(this.depth=this.left.depth+1),this.right!=null&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1)};function n(e,t){if(e===t)return 0;if(e.compareDocumentPosition){var c=e.compareDocumentPosition(t);return c&1||c&10?1:c&20?-1:0}for(var m=0,p=0,d=e;d!=null;d=d.parentNode||d.ownerElement)m++;for(var I=t;I!=null;I=I.parentNode||I.ownerElement)p++;if(m>p){for(;m>p;)e=e.parentNode||e.ownerElement,m--;if(e===t)return 1}else if(p>m){for(;p>m;)t=t.parentNode||t.ownerElement,p--;if(e===t)return-1}for(var k=e.parentNode||e.ownerElement,Q=t.parentNode||t.ownerElement;k!==Q;)e=k,t=Q,k=e.parentNode||e.ownerElement,Q=t.parentNode||t.ownerElement;var B=C.isAttribute(e),q=C.isAttribute(t);if(B&&!q)return-1;if(!B&&q)return 1;if(k)for(var we=B?k.attributes:k.childNodes,te=we.length,We=0;We<te;We+=1){var rt=we[We];if(rt===e)return-1;if(rt===t)return 1}throw new Error("Unexpected: could not determine node order")}r.prototype.add=function(e){if(e===this.node)return!1;var t=n(e,this.node),c=!1;return t==-1?this.left==null?(this.left=new r(e),c=!0):(c=this.left.add(e),c&&this.balance()):t==1&&(this.right==null?(this.right=new r(e),c=!0):(c=this.right.add(e),c&&this.balance())),c&&this.getDepthFromChildren(),c},s.prototype=new X,s.prototype.constructor=s,s.superclass=X.prototype;function s(){this.init()}s.prototype.init=function(){this.tree=null,this.nodes=[],this.size=0},s.prototype.toString=function(){var e=this.first();return e==null?"":this.stringForNode(e)},s.prototype.evaluate=function(e){return this},s.prototype.string=function(){return new M(this.toString())},s.prototype.stringValue=function(){return this.toString()},s.prototype.number=function(){return new O(this.string())},s.prototype.numberValue=function(){return Number(this.string())},s.prototype.bool=function(){return new o(this.booleanValue())},s.prototype.booleanValue=function(){return!!this.size},s.prototype.nodeset=function(){return this},s.prototype.stringForNode=function(e){return e.nodeType==9||e.nodeType==1||e.nodeType===11?this.stringForContainerNode(e):e.nodeType===2?e.value||e.nodeValue:e.isNamespaceNode?e.namespace:e.nodeValue},s.prototype.stringForContainerNode=function(e){for(var t="",c=e.firstChild;c!=null;c=c.nextSibling){var m=c.nodeType;(m===1||m===3||m===4||m===9||m===11)&&(t+=this.stringForNode(c))}return t},s.prototype.buildTree=function(){if(!this.tree&&this.nodes.length){this.tree=new r(this.nodes[0]);for(var e=1;e<this.nodes.length;e+=1)this.tree.add(this.nodes[e])}return this.tree},s.prototype.first=function(){var e=this.buildTree();if(e==null)return null;for(;e.left!=null;)e=e.left;return e.node},s.prototype.add=function(e){for(var t=0;t<this.nodes.length;t+=1)if(e===this.nodes[t])return;this.tree=null,this.nodes.push(e),this.size+=1},s.prototype.addArray=function(e){var t=this;f(function(c){t.add(c)},e)},s.prototype.toArray=function(){var e=[];return this.toArrayRec(this.buildTree(),e),e},s.prototype.toArrayRec=function(e,t){e!=null&&(this.toArrayRec(e.left,t),t.push(e.node),this.toArrayRec(e.right,t))},s.prototype.toUnsortedArray=function(){return this.nodes.slice()},s.prototype.compareWithString=function(e,t){for(var c=this.toUnsortedArray(),m=0;m<c.length;m++){var p=c[m],d=new M(this.stringForNode(p)),I=t(d,e);if(I.booleanValue())return I}return new o(!1)},s.prototype.compareWithNumber=function(e,t){for(var c=this.toUnsortedArray(),m=0;m<c.length;m++){var p=c[m],d=new O(this.stringForNode(p)),I=t(d,e);if(I.booleanValue())return I}return new o(!1)},s.prototype.compareWithBoolean=function(e,t){return t(this.bool(),e)},s.prototype.compareWithNodeSet=function(e,t){for(var c=this.toUnsortedArray(),m=function(k,Q){return t(Q,k)},p=0;p<c.length;p++){var d=new M(this.stringForNode(c[p])),I=e.compareWithString(d,m);if(I.booleanValue())return I}return new o(!1)},s.compareWith=l(function(e,t){return C.instance_of(t,M)?this.compareWithString(t,e):C.instance_of(t,O)?this.compareWithNumber(t,e):C.instance_of(t,o)?this.compareWithBoolean(t,e):this.compareWithNodeSet(t,e)}),s.prototype.equals=s.compareWith(ae.equals),s.prototype.notequal=s.compareWith(ae.notequal),s.prototype.lessthan=s.compareWith(ae.lessthan),s.prototype.greaterthan=s.compareWith(ae.greaterthan),s.prototype.lessthanorequal=s.compareWith(ae.lessthanorequal),s.prototype.greaterthanorequal=s.compareWith(ae.greaterthanorequal),s.prototype.union=function(e){var t=new s;return t.addArray(this.toUnsortedArray()),t.addArray(e.toUnsortedArray()),t},y.prototype=new Object,y.prototype.constructor=y,y.superclass=Object.prototype;function y(e,t,c){this.isXPathNamespace=!0,this.ownerDocument=c.ownerDocument,this.nodeName="#namespace",this.prefix=e,this.localName=e,this.namespaceURI=t,this.nodeValue=t,this.ownerElement=c,this.nodeType=y.XPATH_NAMESPACE_NODE}y.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'},N.prototype=new Object,N.prototype.constructor=N,N.superclass=Object.prototype;function N(e,t,c){this.variableResolver=e??new T,this.namespaceResolver=t??new z,this.functionResolver=c??new H}N.prototype.extend=function(e){return et(new N,this,e)},T.prototype=new Object,T.prototype.constructor=T,T.superclass=Object.prototype;function T(){}T.prototype.getVariable=function(e,t){return null},H.prototype=new Object,H.prototype.constructor=H,H.superclass=Object.prototype;function H(e){this.thisArg=e??S,this.functions=new Object,this.addStandardFunctions()}H.prototype.addStandardFunctions=function(){this.functions["{}last"]=S.last,this.functions["{}position"]=S.position,this.functions["{}count"]=S.count,this.functions["{}id"]=S.id,this.functions["{}local-name"]=S.localName,this.functions["{}namespace-uri"]=S.namespaceURI,this.functions["{}name"]=S.name,this.functions["{}string"]=S.string,this.functions["{}concat"]=S.concat,this.functions["{}starts-with"]=S.startsWith,this.functions["{}contains"]=S.contains,this.functions["{}substring-before"]=S.substringBefore,this.functions["{}substring-after"]=S.substringAfter,this.functions["{}substring"]=S.substring,this.functions["{}string-length"]=S.stringLength,this.functions["{}normalize-space"]=S.normalizeSpace,this.functions["{}translate"]=S.translate,this.functions["{}boolean"]=S.boolean_,this.functions["{}not"]=S.not,this.functions["{}true"]=S.true_,this.functions["{}false"]=S.false_,this.functions["{}lang"]=S.lang,this.functions["{}number"]=S.number,this.functions["{}sum"]=S.sum,this.functions["{}floor"]=S.floor,this.functions["{}ceiling"]=S.ceiling,this.functions["{}round"]=S.round},H.prototype.addFunction=function(e,t,c){this.functions["{"+e+"}"+t]=c},H.getFunctionFromContext=function(e,t){var c=C.resolveQName(e,t.namespaceResolver,t.contextNode,!1);if(c[0]===null)throw new Error("Cannot resolve QName "+name);return t.functionResolver.getFunction(c[1],c[0])},H.prototype.getFunction=function(e,t){return this.functions["{"+t+"}"+e]},z.prototype=new Object,z.prototype.constructor=z,z.superclass=Object.prototype;function z(){}z.prototype.getNamespace=function(e,t){if(e=="xml")return le.XML_NAMESPACE_URI;if(e=="xmlns")return le.XMLNS_NAMESPACE_URI;for(t.nodeType==9?t=t.documentElement:t.nodeType==2?t=P.getOwnerElement(t):t.nodeType!=1&&(t=t.parentNode);t!=null&&t.nodeType==1;){for(var c=t.attributes,m=0;m<c.length;m++){var p=c.item(m),d=p.name||p.nodeName;if(d==="xmlns"&&e===""||d==="xmlns:"+e)return String(p.value||p.nodeValue)}t=t.parentNode}return null};var S=new Object;S.last=function(e){if(arguments.length!=1)throw new Error("Function last expects ()");return new O(e.contextSize)},S.position=function(e){if(arguments.length!=1)throw new Error("Function position expects ()");return new O(e.contextPosition)},S.count=function(){var e=arguments[0],t;if(arguments.length!=2||!C.instance_of(t=arguments[1].evaluate(e),s))throw new Error("Function count expects (node-set)");return new O(t.size)},S.id=function(){var e=arguments[0],t;if(arguments.length!=2)throw new Error("Function id expects (object)");t=arguments[1].evaluate(e),C.instance_of(t,s)?t=t.toArray().join(" "):t=t.stringValue();for(var c=t.split(/[\x0d\x0a\x09\x20]+/),m=new s,p=e.contextNode.nodeType==9?e.contextNode:e.contextNode.ownerDocument,d=0;d<c.length;d++){var I;p.getElementById?I=p.getElementById(c[d]):I=C.getElementById(p,c[d]),I!=null&&m.add(I)}return m},S.localName=function(e,t){var c;if(arguments.length==1)c=e.contextNode;else if(arguments.length==2)c=t.evaluate(e).first();else throw new Error("Function local-name expects (node-set?)");return c==null?new M(""):new M(c.localName||c.baseName||c.target||c.nodeName||"")},S.namespaceURI=function(){var e=arguments[0],t;if(arguments.length==1)t=e.contextNode;else if(arguments.length==2)t=arguments[1].evaluate(e).first();else throw new Error("Function namespace-uri expects (node-set?)");return t==null?new M(""):new M(t.namespaceURI)},S.name=function(){var e=arguments[0],t;if(arguments.length==1)t=e.contextNode;else if(arguments.length==2)t=arguments[1].evaluate(e).first();else throw new Error("Function name expects (node-set?)");return t==null?new M(""):t.nodeType==1?new M(t.nodeName):t.nodeType==2?new M(t.name||t.nodeName):t.nodeType===7?new M(t.target||t.nodeName):t.localName==null?new M(""):new M(t.localName)},S.string=function(){var e=arguments[0];if(arguments.length==1)return new M(s.prototype.stringForNode(e.contextNode));if(arguments.length==2)return arguments[1].evaluate(e).string();throw new Error("Function string expects (object?)")},S.concat=function(e){if(arguments.length<3)throw new Error("Function concat expects (string, string[, string]*)");for(var t="",c=1;c<arguments.length;c++)t+=arguments[c].evaluate(e).stringValue();return new M(t)},S.startsWith=function(){var e=arguments[0];if(arguments.length!=3)throw new Error("Function startsWith expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),c=arguments[2].evaluate(e).stringValue();return new o(t.substring(0,c.length)==c)},S.contains=function(){var e=arguments[0];if(arguments.length!=3)throw new Error("Function contains expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),c=arguments[2].evaluate(e).stringValue();return new o(t.indexOf(c)!==-1)},S.substringBefore=function(){var e=arguments[0];if(arguments.length!=3)throw new Error("Function substring-before expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),c=arguments[2].evaluate(e).stringValue();return new M(t.substring(0,t.indexOf(c)))},S.substringAfter=function(){var e=arguments[0];if(arguments.length!=3)throw new Error("Function substring-after expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),c=arguments[2].evaluate(e).stringValue();if(c.length==0)return new M(t);var m=t.indexOf(c);return m==-1?new M(""):new M(t.substring(m+c.length))},S.substring=function(){var e=arguments[0];if(!(arguments.length==3||arguments.length==4))throw new Error("Function substring expects (string, number, number?)");var t=arguments[1].evaluate(e).stringValue(),c=Math.round(arguments[2].evaluate(e).numberValue())-1,m=arguments.length==4?c+Math.round(arguments[3].evaluate(e).numberValue()):void 0;return new M(t.substring(c,m))},S.stringLength=function(){var e=arguments[0],t;if(arguments.length==1)t=s.prototype.stringForNode(e.contextNode);else if(arguments.length==2)t=arguments[1].evaluate(e).stringValue();else throw new Error("Function string-length expects (string?)");return new O(t.length)},S.normalizeSpace=function(){var e=arguments[0],t;if(arguments.length==1)t=s.prototype.stringForNode(e.contextNode);else if(arguments.length==2)t=arguments[1].evaluate(e).stringValue();else throw new Error("Function normalize-space expects (string?)");for(var c=0,m=t.length-1;C.isSpace(t.charCodeAt(m));)m--;for(var p="";c<=m&&C.isSpace(t.charCodeAt(c));)c++;for(;c<=m;)if(C.isSpace(t.charCodeAt(c)))for(p+=" ";c<=m&&C.isSpace(t.charCodeAt(c));)c++;else p+=t.charAt(c),c++;return new M(p)},S.translate=function(e,t,c,m){if(arguments.length!=4)throw new Error("Function translate expects (string, string, string)");var p=t.evaluate(e).stringValue(),d=c.evaluate(e).stringValue(),I=m.evaluate(e).stringValue(),k=E(function(B,q,we){return q in B||(B[q]=we>I.length?"":I[we]),B},{},d),Q=W("",v(function(B){return B in k?k[B]:B},p));return new M(Q)},S.boolean_=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function boolean expects (object)");return arguments[1].evaluate(e).bool()},S.not=function(e,t){if(arguments.length!=2)throw new Error("Function not expects (object)");return t.evaluate(e).bool().not()},S.true_=function(){if(arguments.length!=1)throw new Error("Function true expects ()");return o.true_},S.false_=function(){if(arguments.length!=1)throw new Error("Function false expects ()");return o.false_},S.lang=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function lang expects (string)");for(var t,c=e.contextNode;c!=null&&c.nodeType!=9;c=c.parentNode){var m=c.getAttributeNS(le.XML_NAMESPACE_URI,"lang");if(m!=null){t=String(m);break}}if(t==null)return o.false_;var p=arguments[1].evaluate(e).stringValue();return new o(t.substring(0,p.length)==p&&(t.length==p.length||t.charAt(p.length)=="-"))},S.number=function(){var e=arguments[0];if(!(arguments.length==1||arguments.length==2))throw new Error("Function number expects (object?)");return arguments.length==1?new O(s.prototype.stringForNode(e.contextNode)):arguments[1].evaluate(e).number()},S.sum=function(){var e=arguments[0],t;if(arguments.length!=2||!C.instance_of(t=arguments[1].evaluate(e),s))throw new Error("Function sum expects (node-set)");t=t.toUnsortedArray();for(var c=0,m=0;m<t.length;m++)c+=new O(s.prototype.stringForNode(t[m])).numberValue();return new O(c)},S.floor=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function floor expects (number)");return new O(Math.floor(arguments[1].evaluate(e).numberValue()))},S.ceiling=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function ceiling expects (number)");return new O(Math.ceil(arguments[1].evaluate(e).numberValue()))},S.round=function(){var e=arguments[0];if(arguments.length!=2)throw new Error("Function round expects (number)");return new O(Math.round(arguments[1].evaluate(e).numberValue()))};var C=new Object;C.isAttribute=function(e){return e&&(e.nodeType===2||e.ownerElement)},C.splitQName=function(e){var t=e.indexOf(":");return t==-1?[null,e]:[e.substring(0,t),e.substring(t+1)]},C.resolveQName=function(e,t,c,m){var p=C.splitQName(e);return p[0]!=null?p[0]=t.getNamespace(p[0],c):m?(p[0]=t.getNamespace("",c),p[0]==null&&(p[0]="")):p[0]="",p},C.isSpace=function(e){return e==9||e==13||e==10||e==32},C.isLetter=function(e){return e>=65&&e<=90||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=255||e>=256&&e<=305||e>=308&&e<=318||e>=321&&e<=328||e>=330&&e<=382||e>=384&&e<=451||e>=461&&e<=496||e>=500&&e<=501||e>=506&&e<=535||e>=592&&e<=680||e>=699&&e<=705||e==902||e>=904&&e<=906||e==908||e>=910&&e<=929||e>=931&&e<=974||e>=976&&e<=982||e==986||e==988||e==990||e==992||e>=994&&e<=1011||e>=1025&&e<=1036||e>=1038&&e<=1103||e>=1105&&e<=1116||e>=1118&&e<=1153||e>=1168&&e<=1220||e>=1223&&e<=1224||e>=1227&&e<=1228||e>=1232&&e<=1259||e>=1262&&e<=1269||e>=1272&&e<=1273||e>=1329&&e<=1366||e==1369||e>=1377&&e<=1414||e>=1488&&e<=1514||e>=1520&&e<=1522||e>=1569&&e<=1594||e>=1601&&e<=1610||e>=1649&&e<=1719||e>=1722&&e<=1726||e>=1728&&e<=1742||e>=1744&&e<=1747||e==1749||e>=1765&&e<=1766||e>=2309&&e<=2361||e==2365||e>=2392&&e<=2401||e>=2437&&e<=2444||e>=2447&&e<=2448||e>=2451&&e<=2472||e>=2474&&e<=2480||e==2482||e>=2486&&e<=2489||e>=2524&&e<=2525||e>=2527&&e<=2529||e>=2544&&e<=2545||e>=2565&&e<=2570||e>=2575&&e<=2576||e>=2579&&e<=2600||e>=2602&&e<=2608||e>=2610&&e<=2611||e>=2613&&e<=2614||e>=2616&&e<=2617||e>=2649&&e<=2652||e==2654||e>=2674&&e<=2676||e>=2693&&e<=2699||e==2701||e>=2703&&e<=2705||e>=2707&&e<=2728||e>=2730&&e<=2736||e>=2738&&e<=2739||e>=2741&&e<=2745||e==2749||e==2784||e>=2821&&e<=2828||e>=2831&&e<=2832||e>=2835&&e<=2856||e>=2858&&e<=2864||e>=2866&&e<=2867||e>=2870&&e<=2873||e==2877||e>=2908&&e<=2909||e>=2911&&e<=2913||e>=2949&&e<=2954||e>=2958&&e<=2960||e>=2962&&e<=2965||e>=2969&&e<=2970||e==2972||e>=2974&&e<=2975||e>=2979&&e<=2980||e>=2984&&e<=2986||e>=2990&&e<=2997||e>=2999&&e<=3001||e>=3077&&e<=3084||e>=3086&&e<=3088||e>=3090&&e<=3112||e>=3114&&e<=3123||e>=3125&&e<=3129||e>=3168&&e<=3169||e>=3205&&e<=3212||e>=3214&&e<=3216||e>=3218&&e<=3240||e>=3242&&e<=3251||e>=3253&&e<=3257||e==3294||e>=3296&&e<=3297||e>=3333&&e<=3340||e>=3342&&e<=3344||e>=3346&&e<=3368||e>=3370&&e<=3385||e>=3424&&e<=3425||e>=3585&&e<=3630||e==3632||e>=3634&&e<=3635||e>=3648&&e<=3653||e>=3713&&e<=3714||e==3716||e>=3719&&e<=3720||e==3722||e==3725||e>=3732&&e<=3735||e>=3737&&e<=3743||e>=3745&&e<=3747||e==3749||e==3751||e>=3754&&e<=3755||e>=3757&&e<=3758||e==3760||e>=3762&&e<=3763||e==3773||e>=3776&&e<=3780||e>=3904&&e<=3911||e>=3913&&e<=3945||e>=4256&&e<=4293||e>=4304&&e<=4342||e==4352||e>=4354&&e<=4355||e>=4357&&e<=4359||e==4361||e>=4363&&e<=4364||e>=4366&&e<=4370||e==4412||e==4414||e==4416||e==4428||e==4430||e==4432||e>=4436&&e<=4437||e==4441||e>=4447&&e<=4449||e==4451||e==4453||e==4455||e==4457||e>=4461&&e<=4462||e>=4466&&e<=4467||e==4469||e==4510||e==4520||e==4523||e>=4526&&e<=4527||e>=4535&&e<=4536||e==4538||e>=4540&&e<=4546||e==4587||e==4592||e==4601||e>=7680&&e<=7835||e>=7840&&e<=7929||e>=7936&&e<=7957||e>=7960&&e<=7965||e>=7968&&e<=8005||e>=8008&&e<=8013||e>=8016&&e<=8023||e==8025||e==8027||e==8029||e>=8031&&e<=8061||e>=8064&&e<=8116||e>=8118&&e<=8124||e==8126||e>=8130&&e<=8132||e>=8134&&e<=8140||e>=8144&&e<=8147||e>=8150&&e<=8155||e>=8160&&e<=8172||e>=8178&&e<=8180||e>=8182&&e<=8188||e==8486||e>=8490&&e<=8491||e==8494||e>=8576&&e<=8578||e>=12353&&e<=12436||e>=12449&&e<=12538||e>=12549&&e<=12588||e>=44032&&e<=55203||e>=19968&&e<=40869||e==12295||e>=12321&&e<=12329},C.isNCNameChar=function(e){return e>=48&&e<=57||e>=1632&&e<=1641||e>=1776&&e<=1785||e>=2406&&e<=2415||e>=2534&&e<=2543||e>=2662&&e<=2671||e>=2790&&e<=2799||e>=2918&&e<=2927||e>=3047&&e<=3055||e>=3174&&e<=3183||e>=3302&&e<=3311||e>=3430&&e<=3439||e>=3664&&e<=3673||e>=3792&&e<=3801||e>=3872&&e<=3881||e==46||e==45||e==95||C.isLetter(e)||e>=768&&e<=837||e>=864&&e<=865||e>=1155&&e<=1158||e>=1425&&e<=1441||e>=1443&&e<=1465||e>=1467&&e<=1469||e==1471||e>=1473&&e<=1474||e==1476||e>=1611&&e<=1618||e==1648||e>=1750&&e<=1756||e>=1757&&e<=1759||e>=1760&&e<=1764||e>=1767&&e<=1768||e>=1770&&e<=1773||e>=2305&&e<=2307||e==2364||e>=2366&&e<=2380||e==2381||e>=2385&&e<=2388||e>=2402&&e<=2403||e>=2433&&e<=2435||e==2492||e==2494||e==2495||e>=2496&&e<=2500||e>=2503&&e<=2504||e>=2507&&e<=2509||e==2519||e>=2530&&e<=2531||e==2562||e==2620||e==2622||e==2623||e>=2624&&e<=2626||e>=2631&&e<=2632||e>=2635&&e<=2637||e>=2672&&e<=2673||e>=2689&&e<=2691||e==2748||e>=2750&&e<=2757||e>=2759&&e<=2761||e>=2763&&e<=2765||e>=2817&&e<=2819||e==2876||e>=2878&&e<=2883||e>=2887&&e<=2888||e>=2891&&e<=2893||e>=2902&&e<=2903||e>=2946&&e<=2947||e>=3006&&e<=3010||e>=3014&&e<=3016||e>=3018&&e<=3021||e==3031||e>=3073&&e<=3075||e>=3134&&e<=3140||e>=3142&&e<=3144||e>=3146&&e<=3149||e>=3157&&e<=3158||e>=3202&&e<=3203||e>=3262&&e<=3268||e>=3270&&e<=3272||e>=3274&&e<=3277||e>=3285&&e<=3286||e>=3330&&e<=3331||e>=3390&&e<=3395||e>=3398&&e<=3400||e>=3402&&e<=3405||e==3415||e==3633||e>=3636&&e<=3642||e>=3655&&e<=3662||e==3761||e>=3764&&e<=3769||e>=3771&&e<=3772||e>=3784&&e<=3789||e>=3864&&e<=3865||e==3893||e==3895||e==3897||e==3902||e==3903||e>=3953&&e<=3972||e>=3974&&e<=3979||e>=3984&&e<=3989||e==3991||e>=3993&&e<=4013||e>=4017&&e<=4023||e==4025||e>=8400&&e<=8412||e==8417||e>=12330&&e<=12335||e==12441||e==12442||e==183||e==720||e==721||e==903||e==1600||e==3654||e==3782||e==12293||e>=12337&&e<=12341||e>=12445&&e<=12446||e>=12540&&e<=12542},C.coalesceText=function(e){for(var t=e.firstChild;t!=null;t=t.nextSibling)if(t.nodeType==3||t.nodeType==4){var c=t.nodeValue,m=t;for(t=t.nextSibling;t!=null&&(t.nodeType==3||t.nodeType==4);){c+=t.nodeValue;var p=t;t=t.nextSibling,p.parentNode.removeChild(p)}if(m.nodeType==4){var d=m.parentNode;if(m.nextSibling==null)d.removeChild(m),d.appendChild(d.ownerDocument.createTextNode(c));else{var I=m.nextSibling;d.removeChild(m),d.insertBefore(d.ownerDocument.createTextNode(c),I)}}else m.nodeValue=c;if(t==null)break}else t.nodeType==1&&C.coalesceText(t)},C.instance_of=function(e,t){for(;e!=null;){if(e.constructor===t)return!0;if(e===Object)return!1;e=e.constructor.superclass}return!1},C.getElementById=function(e,t){if(e.nodeType==1&&(e.getAttribute("id")==t||e.getAttributeNS(null,"id")==t))return e;for(var c=e.firstChild;c!=null;c=c.nextSibling){var m=C.getElementById(c,t);if(m!=null)return m}return null};var J=function(){function e(c,m){var p=m?": "+m.toString():"";switch(c){case t.INVALID_EXPRESSION_ERR:return"Invalid expression"+p;case t.TYPE_ERR:return"Type error"+p}return null}function t(c,m,p){var d=Error.call(this,e(c,m)||p);return d.code=c,d.exception=m,d}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.superclass=Error,t.prototype.toString=function(){return this.message},t.fromMessage=function(c,m){return new t(null,m,c)},t.INVALID_EXPRESSION_ERR=51,t.TYPE_ERR=52,t}();pe.prototype={},pe.prototype.constructor=pe,pe.superclass=Object.prototype;function pe(e,t,c){this.xpath=c.parse(e),this.context=new N,this.context.namespaceResolver=new Ve(t)}pe.getOwnerDocument=function(e){return e.nodeType===9?e:e.ownerDocument},pe.detectHtmlDom=function(e){if(!e)return!1;var t=pe.getOwnerDocument(e);try{return t.implementation.hasFeature("HTML","2.0")}catch{return!0}},pe.prototype.evaluate=function(e,t,c){this.context.expressionContextNode=e,this.context.caseInsensitive=pe.detectHtmlDom(e);var m=this.xpath.evaluate(this.context);return new G(m,t)},Ve.prototype={},Ve.prototype.constructor=Ve,Ve.superclass=Object.prototype;function Ve(e){this.xpathNSResolver=e}Ve.prototype.getNamespace=function(e,t){return this.xpathNSResolver==null?null:this.xpathNSResolver.lookupNamespaceURI(e)},$e.prototype={},$e.prototype.constructor=$e,$e.superclass=Object.prototype;function $e(e){this.node=e,this.namespaceResolver=new z}$e.prototype.lookupNamespaceURI=function(e){return this.namespaceResolver.getNamespace(e,this.node)},G.prototype={},G.prototype.constructor=G,G.superclass=Object.prototype;function G(e,t){switch(t==G.ANY_TYPE&&(e.constructor===M?t=G.STRING_TYPE:e.constructor===O?t=G.NUMBER_TYPE:e.constructor===o?t=G.BOOLEAN_TYPE:e.constructor===s&&(t=G.UNORDERED_NODE_ITERATOR_TYPE)),this.resultType=t,t){case G.NUMBER_TYPE:this.numberValue=e.numberValue();return;case G.STRING_TYPE:this.stringValue=e.stringValue();return;case G.BOOLEAN_TYPE:this.booleanValue=e.booleanValue();return;case G.ANY_UNORDERED_NODE_TYPE:case G.FIRST_ORDERED_NODE_TYPE:if(e.constructor===s){this.singleNodeValue=e.first();return}break;case G.UNORDERED_NODE_ITERATOR_TYPE:case G.ORDERED_NODE_ITERATOR_TYPE:if(e.constructor===s){this.invalidIteratorState=!1,this.nodes=e.toArray(),this.iteratorIndex=0;return}break;case G.UNORDERED_NODE_SNAPSHOT_TYPE:case G.ORDERED_NODE_SNAPSHOT_TYPE:if(e.constructor===s){this.nodes=e.toArray(),this.snapshotLength=this.nodes.length;return}break}throw new J(J.TYPE_ERR)}G.prototype.iterateNext=function(){if(this.resultType!=G.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=G.ORDERED_NODE_ITERATOR_TYPE)throw new J(J.TYPE_ERR);return this.nodes[this.iteratorIndex++]},G.prototype.snapshotItem=function(e){if(this.resultType!=G.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=G.ORDERED_NODE_SNAPSHOT_TYPE)throw new J(J.TYPE_ERR);return this.nodes[e]},G.ANY_TYPE=0,G.NUMBER_TYPE=1,G.STRING_TYPE=2,G.BOOLEAN_TYPE=3,G.UNORDERED_NODE_ITERATOR_TYPE=4,G.ORDERED_NODE_ITERATOR_TYPE=5,G.UNORDERED_NODE_SNAPSHOT_TYPE=6,G.ORDERED_NODE_SNAPSHOT_TYPE=7,G.ANY_UNORDERED_NODE_TYPE=8,G.FIRST_ORDERED_NODE_TYPE=9;function pt(e,t){e.createExpression=function(c,m){try{return new pe(c,m,t)}catch(p){throw new J(J.INVALID_EXPRESSION_ERR,p)}},e.createNSResolver=function(c){return new $e(c)},e.evaluate=function(c,m,p,d,I){if(d<0||d>9)throw{code:0,toString:function(){return"Request type not supported"}};return e.createExpression(c,p,t).evaluate(m,d,I)}}try{var qe=!0;try{document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)&&(qe=!1)}catch{}qe&&pt(document,new A)}catch{}pt(u,new A),function(){var e=new A,t=new z,c=new H,m=new T;function p(_){return{getNamespace:function(K,ce){var me=_(K,ce);return me||t.getNamespace(K,ce)}}}function d(_){return p(_.getNamespace.bind(_))}function I(_){return p(function(K){return _[K]})}function k(_){return _&&typeof _.getNamespace=="function"?d(_):typeof _=="function"?p(_):typeof _=="object"?I(_):t}function Q(_){if(_===null||typeof _>"u"||_ instanceof M||_ instanceof o||_ instanceof O||_ instanceof s)return _;switch(typeof _){case"string":return new M(_);case"boolean":return new o(_);case"number":return new O(_)}var K=new s;return K.addArray([].concat(_)),K}function B(_){return function(K){var ce=Array.prototype.slice.call(arguments,1).map(function(wt){return wt.evaluate(K)}),me=_.apply(this,[].concat(K,ce));return Q(me)}}function q(_){return{getFunction:function(K,ce){var me=_(K,ce);return me?B(me):c.getFunction(K,ce)}}}function we(_){return q(_.getFunction.bind(_))}function te(_){return q(function(K){return _[K]})}function We(_){return _&&typeof _.getFunction=="function"?we(_):typeof _=="function"?q(_):typeof _=="object"?te(_):c}function rt(_){return{getVariable:function(K,ce){var me=_(K,ce);return Q(me)}}}function mt(_){if(_){if(typeof _.getVariable=="function")return rt(_.getVariable.bind(_));if(typeof _=="function")return rt(_);if(typeof _=="object")return rt(function(K){return _[K]})}return m}function dt(_,K,ce){_ in ce&&(K[_]=ce[_])}function It(_){var K=new N;return _?(K.namespaceResolver=k(_.namespaces),K.functionResolver=We(_.functions),K.variableResolver=mt(_.variables),K.expressionContextNode=_.node,dt("allowAnyNamespaceForNoPrefix",K,_),dt("isHtml",K,_)):K.namespaceResolver=t,K}function Ye(_,K){var ce=It(K);return _.evaluate(ce)}var Et={evaluate:function(_){return Ye(this.expression,_)},evaluateNumber:function(_){return this.evaluate(_).numberValue()},evaluateString:function(_){return this.evaluate(_).stringValue()},evaluateBoolean:function(_){return this.evaluate(_).booleanValue()},evaluateNodeSet:function(_){return this.evaluate(_).nodeset()},select:function(_){return this.evaluateNodeSet(_).toArray()},select1:function(_){return this.select(_)[0]}};function At(_){var K=e.parse(_);return Object.create(Et,{expression:{value:K}})}u.parse=At}(),et(u,{XPath:le,XPathParser:A,XPathResult:G,Step:R,PathExpr:P,NodeTest:F,LocationPath:ee,OrOperation:Re,AndOperation:Fe,BarOperation:Z,EqualsOperation:Oe,NotEqualOperation:Ie,LessThanOperation:be,GreaterThanOperation:se,LessThanOrEqualOperation:ye,GreaterThanOrEqualOperation:Ee,PlusOperation:ve,MinusOperation:Be,MultiplyOperation:Le,DivOperation:Pe,ModOperation:De,UnaryMinusOperation:he,FunctionCall:Ae,VariableReference:Me,XPathContext:N,XNodeSet:s,XBoolean:o,XString:M,XNumber:O,NamespaceResolver:z,FunctionResolver:H,VariableResolver:T,Utilities:C}),u.select=function(e,t,c){return u.selectWithResolver(e,t,null,c)},u.useNamespaces=function(e){var t={mappings:e||{},lookupNamespaceURI:function(c){return this.mappings[c]}};return function(c,m,p){return u.selectWithResolver(c,m,t,p)}},u.selectWithResolver=function(e,t,c,m){var p=new pe(e,c,new A),d=G.ANY_TYPE,I=p.evaluate(t,d,null);return I.resultType==G.STRING_TYPE?I=I.stringValue:I.resultType==G.NUMBER_TYPE?I=I.numberValue:I.resultType==G.BOOLEAN_TYPE?I=I.booleanValue:(I=I.nodes,m&&(I=I[0])),I},u.select1=function(e,t){return u.select(e,t,!0)}})(a)})(x);const zt=({dataChunk:i,indexKey:a,chunkSize:u})=>{var E,v;if(!i[0].value&&!((E=i[1])!=null&&E.value)&&!((v=i[2])!=null&&v.value))return null;let l=null,f=i;return u===3&&(f=i.slice(0,2),[l]=i.slice(2)),w.createElement(w.Fragment,null,w.createElement("tr",null,f.map((h,D)=>{var $,W;if(!h.value)return null;let U=1;return(D===0&&(!f[D+1]||!f[D+1].value)||D===1&&(!f[D-1]||!f[D-1].value))&&(U=3),w.createElement(w.Fragment,{key:`${f[0].label}-${String(f[0].value)}-${D}-${a}-${(($=f[1])==null?void 0:$.label)||""}-${((W=f[1])==null?void 0:W.value)||""}`},w.createElement("td",{className:"ctw-ccda-common-td1",rowSpan:l&&l.value&&D===0?2:1},h.label.replace(/:/g,"")),w.createElement("td",{className:"ctw-ccda-common-td2",colSpan:U,rowSpan:l&&l.value&&D===0?2:1},h.value))})),l&&l.value&&w.createElement("tr",null,w.createElement("td",{className:"ctw-ccda-common-td1"},l.label.replace(/:/g,"")),w.createElement("td",{className:"ctw-ccda-common-td2"},l.value)))};try{zt.displayName="BasicRow",zt.__docgenInfo={description:"",displayName:"BasicRow",props:{dataChunk:{defaultValue:null,description:"",name:"dataChunk",required:!0,type:{name:"TableInfo[]"}},indexKey:{defaultValue:null,description:"",name:"indexKey",required:!0,type:{name:"number"}},chunkSize:{defaultValue:null,description:"",name:"chunkSize",required:!1,type:{name:"enum",value:[{value:"2"},{value:"3"}]}}}}}catch{}const Wt=({tuple:i,indexKey:a})=>!i[0].value&&!i[1].value?null:w.createElement("tr",null,i.map((u,l)=>{if(!u.value)return null;let f=1;return(l===0&&!i[1].value||l===1&&!i[0].value)&&(f=3),w.createElement(w.Fragment,{key:`${i[0].label}-${i[0].value}-${l}-${a}-${i[1].label||""}-${i[1].value}`},w.createElement("td",{className:"ctw-ccda-common-td1"},u.label.replace(/:/g,"")),w.createElement("td",{className:"ctw-ccda-common-td2",colSpan:f},u.value))}));try{Wt.displayName="TupleRow",Wt.__docgenInfo={description:"",displayName:"TupleRow",props:{tuple:{defaultValue:null,description:"",name:"tuple",required:!0,type:{name:"[TableInfo, TableInfo]"}},indexKey:{defaultValue:null,description:"",name:"indexKey",required:!0,type:{name:"number"}}}}}catch{}var $n=Er,qn=vn,Gn=qn(function(i,a,u){return a=a.toLowerCase(),i+(u?$n(a):a)}),zn=Gn,Wn=yn,Wr=/[\\^$.*+?()[\]{}|]/g,Yn=RegExp(Wr.source);function jn(i){return i=Wn(i),i&&Yn.test(i)?i.replace(Wr,"\\$&"):i}var Xn=jn,Qn=mn;function Jn(i,a){var u;return Qn(i,function(l,f,E){return u=a(l,f,E),!u}),!!u}var Kn=Jn,Zn=gn,ei=En,ti=Kn,ri=Ze,ni=dn;function ii(i,a,u){var l=ri(i)?Zn:ti;return u&&ni(i,a,u)&&(a=void 0),l(i,ei(a))}var ai=ii;const Te=({data:i,chunkSize:a=2})=>{const[u,l]=cn(i,E=>!Ze(E)),f=pn(u,a);return w.createElement("table",{className:"ctw-ccda-common-table"},w.createElement("tbody",null,f.map((E,v)=>w.createElement(zt,{key:`${E[0].label}-${v}`,dataChunk:E,chunkSize:a,indexKey:v})),l.map((E,v)=>w.createElement(Wt,{key:`${E[0].label}-${E[1].label}-${v}`,tuple:E,indexKey:v}))))};try{Te.displayName="Table",Te.__docgenInfo={description:"",displayName:"Table",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"(TableInfo | [TableInfo, TableInfo])[]"}},chunkSize:{defaultValue:{value:"2"},description:"",name:"chunkSize",required:!1,type:{name:"enum",value:[{value:"2"},{value:"3"}]}}}}}catch{}const Rr=i=>{var u;if(i.text)return i.text;let a="";return a+=i.use?`${Er(i.use)}: `:"",a+=ne(i.line)?"":`${(u=i.line)==null?void 0:u.join(`
`)}
`,a+=i.city?`${i.city}, `:"",a+=i.state?`${i.state} `:"",a+=i.postalCode||"",a+=i.country?`
${i.country}`:"",a},oi=i=>ne(i)?"":Ze(i)?i.map(Rr).join(`
`):Rr(i);function si(i){return Ze(i)&&i.every(a=>typeof a=="object")}function ui(i){return Ze(i)&&i.every(a=>typeof a=="string")}const Fr=i=>{if(i.text)return i.text;let a="";return i.given&&i.given.length>0&&(a=i.given.join(" "),i.family&&(a=`${a} ${i.family}`)),i.prefix&&i.prefix.length>0&&(a=`${i.prefix.join(" ")} ${a}`),a},Yr=i=>ne(i)?"":typeof i=="string"?i:ui(i)?i.reduce((a,u,l)=>`${a}${l===0?"":`
`}${u}`,""):si(i)?i.map(Fr).join(", "):Fr(i),Or=({use:i,system:a,value:u})=>{const l=i?` (${i})`:"";return`${a?`${Er(a)}${l}:`:""} ${u}`.trim()},li=i=>ne(i)?"":Ze(i)?i.map(Or).join(`
`):Or(i),ci={BAD:"bad",DIR:"direct",H:"home",HP:"primary home",HV:"vacation home",PHYS:"physical",PST:"postal",PUB:"public",TMP:"temporary",WP:"work",CONF:"confidential"},jr=i=>{if(!i)return"";const a=u=>{const l=String(x.select1("string(@use)",u)),f={line:yt(x.select("*[name()='streetAddressLine']",u),E=>String(x.select("string(text())",E))).filter(Boolean),city:String(x.select("string(*[name()='city'])",u)),state:String(x.select("string(*[name()='state'])",u)),postalCode:String(x.select("string(*[name()='postalCode'])",u)),country:String(x.select("string(*[name()='country'])",u)),use:ci[l]};return oi(f)};return Ze(i)?i.map(a).join(`
`):a(i)},pi={BAD:"bad",CONF:"confidential",OLD:"old",H:"home",HP:"primary home",HV:"vacation Home",TMP:"temporary",WP:"work",DIR:"direct",PUB:"public",AS:"answering service",EC:"emergency:",MC:"mobile",PG:"pager"},Mt={tel:"phone",mailto:"email"},fi=i=>{if(!i)return"";const a=u=>{const f=String(x.select1("string(@value)",u)).split(":");let E,v;if(f.length===2&&([E,v]=f),f.length===1&&([v]=f),!v)return"";const h=v.includes("@")?Mt.mailto:Mt.tel,U={system:Mt[E]||h,value:v,use:pi[String(x.select1("string(@use)",u))]};return li(U)};return Ze(i)?i.map(a).join(`
`):a(i)},Se=(i,a)=>{const u=jr(i),l=fi(a);return`${u||""}${u&&l?`
`:""}${l||""}`},hi={A:"Artist/Stage",ABC:"Alphabetic",ASGN:"Assigned",C:"License",I:"Indigenous/Tribal",IDE:"Ideographic",L:"Legal",P:"Pseudonym",PHON:"Phonetic",R:"Religious",SNDX:"Soundex",SRCH:"Search",SYL:"Syllabic"},Je=i=>{if(!i)return"";const a=u=>{const l={use:hi[String(x.select("string(@use)",u))],given:yt(x.select("(*[name()='given'])",u),f=>String(x.select1("string(text())",f))),family:String(x.select1("string(*[name()='family']/text())",u)),prefix:yt(x.select("(*[name()='prefix'])",u),f=>String(x.select1("string(text())",f))),suffix:yt(x.select("(*[name()='suffix'])",u),f=>String(x.select1("string(text())",f)))};return Yr(l)};return Ze(i)?i.map(a).join(`
`):a(i)},at=i=>{if(!i)return"";const a=String(x.select1("string(@root)",i)),u=String(x.select1("string(@extension)",i));return`${u}${u?" (":""}${a}${u?")":""}`};function mi(i,a){$r(2,arguments);var u=St(i),l=St(a);return u.getTime()<l.getTime()}function di(i,a){$r(2,arguments);var u=St(i),l=St(a);return u.getTime()===l.getTime()}const gi=i=>{const a=i.replace(/:/g,""),u=a.lastIndexOf("+"),l=a.lastIndexOf("-");if(u>0)return{index:a.length-u-1,timezoneSign:"+"};if(l>0){const f=a[l-3];return Hr(Number(f))||f==="T"?{index:a.length-l-1,timezoneSign:"-"}:{index:-1}}return{index:-1}},ot=i=>i&&i.length>1&&i.split("").every(a=>Hr(Number(a))),yi=({year:i,month:a,day:u,hour:l,minute:f,second:E,timezoneHour:v,timezoneMinute:h,timezoneSign:D})=>{let U="";return ot(i)&&(U+=i,ot(a)&&(U+=`-${a}`,ot(u)&&(U+=`-${u}`,ot(l)?(U+=`T${l}`,ot(f)?U+=`:${f}`:U+=":00",ot(E)?U+=`:${E}`:U+=":00",D&&ot(v)?(U+=`${D}${v}`,ot(h)?U+=`:${h}`:U+=":00"):U+="-00:00"):U+="T00:00:00-00:00"))),U},He=i=>{if(!i)return"";const{index:a,timezoneSign:u}=gi(i);let l=i.replace(/T/g,"").replace(/-/g,"").replace("+","").replace(/:/g,""),f="";(a===4||a===2)&&l.length>9&&(f=l.substring(l.length-a),l=l.substring(0,l.length-a));const E=l.slice(0,4),v=l.slice(4,6),h=l.slice(6,8),D=l.slice(8,10),U=l.slice(10,12),$=l.slice(12,14),W=f.slice(0,2),oe=f.slice(2);return h?yi({year:E,month:v,day:h,hour:D,minute:U,second:$,timezoneHour:W,timezoneMinute:oe,timezoneSign:u}):""},vr=i=>{if(!i)return{};const a=String(x.select1("string(*[name()='low']/@value)",i)),u=String(x.select1("string(*[name()='high']/@value)",i));if(!a&&!u)return{};if(a&&!u)return{start:He(a)};if(!a&&u)return{end:He(u)};let l=He(a),f=He(u);return(l.includes("T")||f.includes("T"))&&(l=He(l),f=He(f)),mi(new Date(l),new Date(f))||di(new Date(l),new Date(f))?{start:l,end:f}:{start:l}},Rt=(i,a,u,l=!0)=>{if(Ze(a))return a.reduce((E,v)=>Rt(E,v,u),i);const f=l?Xn:xn;return i.replace(new RegExp(f(a),"g"),u)},xt=(i,a,u)=>{const l=[`</${a}>`,`<${a}>`,`</${a}`,`<${a}`],f=[`</${u}>`,`<${u}>`,`</${u}`,`<${u}`];return l.reduce((E,v,h)=>Rt(E,l[h],f[h]),i)},Ei=i=>{let a=i.toString();return a=Rt(a,["<list/>","<item/>","<content/>","<paragraph/>","<section/>","<br/>",'<text xmlns="urn:hl7-org:v3">',"<text />","<text/>"],""),a=Rt(a,' styleCode="(.*?)"',"",!1),a=xt(a,"section","div"),a=xt(a,"list","ul"),a=xt(a,"item","li"),a=xt(a,"content","div"),a=xt(a,"paragraph","p"),a},ht=i=>{if(!i)return"";const[a,u]=i.split("T");return qr(new Date(a),"MMMM dd, yyyy")+(u.split("").some(l=>Number(l)>0)?`, ${u}`:"")},xi=i=>!!i,Ar=i=>!!i,vi=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='authenticator']",i);if(!ne(a))return a.map(u=>{const l=x.select1("*[name()='assignedEntity']",u);if(!l)return;const f=x.select1("*[name()='assignedPerson']",l),E=Je(x.select("*[name()='name']",f)),v=Se(x.select("*[name()='addr']",l),x.select("*[name()='telecom']",l)),h=He(String(x.select1("string(*[name()='time']/@value)",u)));return{name:E,contactDetails:v,time:h}}).filter(Ar)},Yt=({document:i})=>{const a=vi(i);if(!a||ne(a))return null;const u=a.flatMap(l=>[{label:"Authenticator",value:`${l.name||"Unknown"}${l.time?` signed at ${l.time}`:""}`},{label:"Contact Details",value:l.contactDetails}]);return w.createElement(Te,{data:u})};try{Yt.displayName="Authenticator",Yt.__docgenInfo={description:"",displayName:"Authenticator",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Xr=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='author']",i);return ne(a)?void 0:a.map(l=>{const f=x.select1("*[name()='assignedAuthor']/*[name()='assignedPerson']/*[name()='name']",l),E=x.select1("*[name()='assignedAuthor']/*[name()='assignedAuthoringDevice']",l);let v="";if(f)v=Je(f);else if(E){const U=String(x.select1("string(*[name()='manufacturerModelName'])",E)),$=String(x.select1("string(*[name()='softwareName'])",E));v=[U,$].filter(Boolean).join("; ")}const h=String(x.select1("string(*[name()='assignedAuthor']/*[name()='representedOrganization']/*[name()='name'])",l)),D=He(String(x.select1("string(*[name()='time'])",l)));return[{label:"Name:",value:v},{label:"Organization:",value:h},{label:"Authored on",value:D}]}).reduce((l,f,E)=>({...l,[`author${E+1}`]:f}),{})},Ai=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='author']",i);if(ne(a))return;const u=Xr(i);return a.map((l,f)=>{const E=x.select1("*[name()='assignedAuthor']",l),v=Se(x.select("*[name()='addr']",E),x.select("*[name()='telecom']",E)),h=x.select1("*[name()='representedOrganization']",E),D={name:u[`author${f+1}`][0].value,contactDetails:v,organization:{name:u[`author${f+1}`][1].value,contactDetails:""}};if(h){const U=Se(x.select("*[name()='addr']",h),x.select("*[name()='telecom']",h));return{...D,organization:{...D.organization,contactDetails:U}}}return D})},jt=({document:i})=>{const a=Ai(i);if(!a||ne(a))return null;const u=a.flatMap(l=>[{label:"Author",value:`${l.name||"Unknown"}${l.organization.name?`, Organization: ${l.organization.name}`:""}`},{label:"Contact Details",value:l.contactDetails},{label:"Contact Details (Organization)",value:l.organization.contactDetails}]);return w.createElement(Te,{data:u,chunkSize:3})};try{jt.displayName="Author",jt.__docgenInfo={description:"",displayName:"Author",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Qr=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='authorization']/*[name()='consent']",i);return ne(a)?void 0:a.map(l=>{const f=at(x.select1("*[name()='id']",l)),E=String(x.select1("string(*[name()='code']/@displayName)",l)),v=String(x.select1("string(*[name()='statusCode']/@code)",l));return[{label:"ID:",value:f},{label:"Code:",value:E},{label:"Status:",value:v}]}).reduce((l,f,E)=>({...l,[`consent${E+1}`]:f}),{})},wi=i=>{const a=Qr(i);return Object.values(a||{})},Xt=({document:i})=>{const a=wi(i);if(ne(a))return null;const u=a.flatMap(l=>[{label:"Consent",value:`Order: ${l[0].value||"Unknown"}, ${l[1].value||"Unknown"}, ${l[2].value||"Unknown"}`},{label:"",value:""}]);return w.createElement(Te,{data:u})};try{Xt.displayName="Authorization",Xt.__docgenInfo={description:"",displayName:"Authorization",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Ni=i=>{const a=x.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']",i);if(!a)return;const u=String(x.select1("string(*[name()='name'])",a)),l=Se(x.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']/*[name()='addr']",i),x.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']/*[name()='telecom']",i));return{name:u,contactDetails:l}},Qt=({document:i})=>{const a=Ni(i);if(!a)return null;const{name:u,contactDetails:l}=a,f=[{label:"Custodian",value:u},{label:"Contact Details",value:l}];return w.createElement(Te,{data:f})};try{Qt.displayName="Custodian",Qt.__docgenInfo={description:"",displayName:"Custodian",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Ti=i=>{const a=x.select1("*[name()='ClinicalDocument']/*[name()='dataEnterer']/*[name()='assignedEntity']",i);if(!a)return;const u=x.select1("*[name()='assignedPerson']",a),l=Je(x.select("*[name()='name']",u)),f=Se(x.select("*[name()='addr']",a),x.select("*[name()='telecom']",a));return{name:l,contactDetails:f}},Jt=({document:i})=>{const a=Ti(i);if(!a)return null;const{name:u,contactDetails:l}=a,f=[{label:"Data Enterer",value:u},{label:"Contact Details",value:l}];return w.createElement(Te,{data:f})};try{Jt.displayName="DataEnterer",Jt.__docgenInfo={description:"",displayName:"DataEnterer",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const bi={N:"normal",R:"restricted",V:"very restricted"},Di=i=>{const a=at(x.select1("*[name()='ClinicalDocument']/*[name()='id']",i)),u=He(String(x.select1("string(*[name()='ClinicalDocument']/*[name()='effectiveTime']/@value)",i))),l=ht(u),f=String(x.select1("string(*[name()='ClinicalDocument']/*[name()='versionNumber']/@value)",i)),E=at(x.select1("*[name()='ClinicalDocument']/*[name()='setId']",i)),v=bi[String(x.select1("string(*[name()='ClinicalDocument']/*[name()='confidentialityCode']/@code)",i))],h=String(x.select1("string(*[name()='ClinicalDocument']/*[name()='code']/@displayName)",i)),D=String(x.select1("string(*[name()='ClinicalDocument']/*[name()='languageCode']/@code)",i));return{id:a,createdOn:l,version:f,setId:E,confidentialityCode:v,code:h,languageCode:D}},Kt=({document:i})=>{const{id:a,createdOn:u,version:l,setId:f,confidentialityCode:E,code:v,languageCode:h}=Di(i),D=[{label:"Document",value:w.createElement(w.Fragment,null,w.createElement("b",null,"ID: "),a,f&&w.createElement(w.Fragment,null,w.createElement("br",null),w.createElement("b",null,"Set ID: "),f))},{label:"Created on",value:u},{label:"Version",value:l||"Unknown"},{label:"Confidentiality",value:E},{label:"Code",value:v},{label:"Language",value:h}];return w.createElement(Te,{data:D})};try{Kt.displayName="Document",Kt.__docgenInfo={description:"",displayName:"Document",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Jr=i=>{const a=x.select("//*[name()='documentationOf']/*[name()='serviceEvent']",i);return ne(a)?void 0:a.map(l=>{const f=x.select1("*[name()='effectiveTime']",l),E=vr(f),h=x.select("*[name()='performer']/*[name()='assignedEntity']/*[name()='assignedPerson']/*[name()='name']",l).map(D=>Je(D));return[{label:"Date/Time:",value:E.start||E.end?`from ${ht(E.start)||"unknown"} to ${ht(E.end)||"unknown"}`:""},...h.map(D=>({label:"Performer:",value:D}))]}).reduce((l,f,E)=>({...l,[`documentationOf${E+1}`]:f}),{})},_i=i=>{const a=x.select("//*[name()='documentationOf']/*[name()='serviceEvent']",i);if(ne(a))return;const u=Jr(i);return a.map((l,f)=>{const v=x.select("*[name()='performer']",l).map((h,D)=>{const U=String(x.select1("string(*[name()='functionCode']/@displayName)",h)),$=Dr(u,`documentationOf${f+1}[${D+1}].value`),W=Se(x.select("*[name()='assignedEntity']/*[name()='addr']",h),x.select("*[name()='assignedEntity']/*[name()='telecom']",h));if(!(!$&&!U&&!W))return{functionCode:U,name:$,contactDetails:W}});return{dateTime:Dr(u,`documentationOf${f+1}[0].value`),finalPerformers:v.filter(xi)}})},Zt=({document:i})=>{const a=_i(i);if(!a||ne(a))return null;const u=a.flatMap(l=>[{label:"Documentation of - Date/Time",value:l.dateTime},{label:"",value:""},...l.finalPerformers.flatMap(f=>[{label:"Performer",value:`${f.name||"Unknown"}${f.functionCode?` - ${f.functionCode}`:""}`},{label:"Contact Details",value:f.contactDetails}])]);return w.createElement(Te,{data:u})};try{Zt.displayName="DocumentationOf",Zt.__docgenInfo={description:"",displayName:"DocumentationOf",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Kr=i=>{const a=x.select1("*[name()='ClinicalDocument']/*[name()='componentOf']/*[name()='encompassingEncounter']",i);if(!a)return;const u=at(x.select1("*[name()='id']",a)),l=String(x.select1("string(*[name()='code']/@displayName)",a)),f=vr(x.select1("*[name()='effectiveTime']",a));return[{label:"ID:",value:f.start||f.end||u?u||"Unknown":""},{label:"Type:",value:l},{label:"Date/Time:",value:f.start||f.end?`from ${ht(f.start)||"unknown"} to ${ht(f.end)||"unknown"}`:""}]},Si=i=>{const a=x.select1("*[name()='ClinicalDocument']/*[name()='componentOf']/*[name()='encompassingEncounter']",i);if(!a)return;const u=Kr(i),l=String(x.select1("string(*[name()='dischargeDispositionCode']/@displayName)",a)),f=at(x.select1("*[name()='location']/*[name()='healthCareFacility']/*[name()='id']",a));return{id:u[0],type:u[1],dateTime:u[2],dischargeDisposition:l,encounterLocation:f?`ID: ${f}`:null}},er=({document:i})=>{const a=Si(i);if(!a)return null;const{dischargeDisposition:u,encounterLocation:l,id:f,type:E,dateTime:v}=a,h=[{label:"Encounter",value:v.value||u||l||f.value?w.createElement(w.Fragment,null,w.createElement("b",null,"ID: "),f.value||"Unknown",E.value&&w.createElement(w.Fragment,null,w.createElement("br",null),w.createElement("b",null,"Type: "),E.value)):null},{label:"Date/Time",value:v.value},{label:"Discharge Disposition",value:u},{label:"Encounter Location",value:l}];return w.createElement(Te,{data:h})};try{er.displayName="Encounter",er.__docgenInfo={description:"",displayName:"Encounter",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Ci=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='informant']",i);if(!ne(a))return a.map(u=>{const l=x.select1("*[name()='assignedEntity']",u);if(l){const E=x.select1("*[name()='assignedPerson']",l),v=Je(x.select("*[name()='name']",E)),h=Se(x.select("*[name()='addr']",l),x.select("*[name()='telecom']",l));return{name:v,contactDetails:h,relationship:""}}const f=x.select1("*[name()='relatedEntity']",u);if(f){const E=x.select1("*[name()='relatedPerson']",f),v=Je(x.select("*[name()='name']",E)),h=Se(x.select("*[name()='addr']",f),x.select("*[name()='telecom']",f)),D=String(x.select1("string(*[name()='code']/@displayName)",f)).toLowerCase();return{name:v,contactDetails:h,relationship:D}}}).filter(Ar)},tr=({document:i})=>{const a=Ci(i);if(!a||ne(a))return null;const u=a.flatMap(l=>[{label:"Informant",value:`${l.name||"Unknown"}${l.relationship?` - ${l.relationship}`:""}`},{label:"Contact Details",value:l.contactDetails}]);return w.createElement(Te,{data:u})};try{tr.displayName="Informant",tr.__docgenInfo={description:"",displayName:"Informant",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Ri=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='informationRecipient']/*[name()='intendedRecipient']",i);if(!ne(a))return a.map(u=>{const l=x.select1("*[name()='informationRecipient']",u),f=x.select1("*[name()='receivedOrganization']",u);if(l){const D=Je(x.select1("*[name()='name']",l)),U=String(x.select1("string(*[name()='name']/node())",f));return{name:D,contactDetails:"",organization:{name:U,contactDetails:""}}}const E=x.select("*[name()='id']",u).map(at).join(", "),v=Se(x.select("*[name()='addr']",u),x.select("*[name()='telecom']",u)),h={name:E,contactDetails:v,organization:{name:"",contactDetails:""}};if(f){const D=String(x.select1("string(*[name()='name']/node())",f)),U=Se(x.select("*[name()='addr']",f),x.select("*[name()='telecom']",f));return{...h,organization:{name:D,contactDetails:U}}}return h})},rr=({document:i})=>{const a=Ri(i);if(!a||ne(a))return null;const u=a.flatMap(l=>[{label:"Information Recipient",value:l.name},{label:"Contact Details",value:l.contactDetails},{label:"Organization",value:l.organization.name},{label:"Contact Details (Organization)",value:l.organization.contactDetails}]);return w.createElement(Te,{data:u})};try{rr.displayName="InformationRecipient",rr.__docgenInfo={description:"",displayName:"InformationRecipient",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Zr=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='inFulfillmentOf']/*[name()='order']",i);return ne(a)?void 0:a.map(l=>{const f=at(x.select1("*[name()='id']",l)),E=String(x.select1("string(*[name()='code']/@displayName)",l));return[{label:"Order ID:",value:f},{label:"Code:",value:E}]}).reduce((l,f,E)=>({...l,[`inFulfillmentOf${E+1}`]:f}),{})},Fi=i=>{const a=Zr(i);return Object.values(a||{})},nr=({document:i})=>{const a=Fi(i);if(ne(a))return null;const u=a.flatMap(l=>[{label:"In Fulfillment Of",value:`Order: ${l[0].value||"Unknown"}, ${l[1].value||"Unknown"}`},{label:"",value:""}]);return w.createElement(Te,{data:u})};try{nr.displayName="InFulfillmentOf",nr.__docgenInfo={description:"",displayName:"InFulfillmentOf",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Oi=i=>{const a=x.select1("*[name()='ClinicalDocument']/*[name()='legalAuthenticator']",i);if(!a)return;const u=x.select1("*[name()='assignedEntity']",a),l=x.select1("*[name()='assignedPerson']",u),f=Je(x.select("*[name()='name']",l)),E=Se(x.select("*[name()='addr']",u),x.select("*[name()='telecom']",u)),v=ht(He(String(x.select1("string(*[name()='time']/@value)",a))));return{name:f,contactDetails:E,time:v}},ir=({document:i})=>{const a=Oi(i);if(!a)return null;const{name:u,time:l,contactDetails:f}=a,E=l?` signed at ${l}`:"",v=[{label:"Legal Authenticator",value:`${u}${E}`},{label:"Contact Details",value:f}];return w.createElement(Te,{data:v})};try{ir.displayName="LegalAuthenticator",ir.__docgenInfo={description:"",displayName:"LegalAuthenticator",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const Ii=i=>{const a=x.select("*[name()='ClinicalDocument']/*[name()='participant']",i);if(!ne(a))return a.map(u=>{const l=x.select1("*[name()='associatedEntity']",u);if(l){const f=x.select1("*[name()='associatedPerson']",l),E=Je(x.select("*[name()='name']",f)),v=Se(x.select("*[name()='addr']",l),x.select("*[name()='telecom']",l)),h=x.select1("*[name()='time']",u),D=vr(h),U=String(x.select1("string(*[name()='code']/@displayName)",l)).toLowerCase();return{name:E,contactDetails:v,time:`from ${D.start} to ${D.end}`,relationship:U}}}).filter(Ar)},ar=({document:i})=>{const a=Ii(i);if(!a||ne(a))return null;const u=a.flatMap(l=>[{label:"Participant",value:`${l.name}${l.relationship?` - ${l.relationship}`:""}`},{label:"Contact Details",value:l.contactDetails}]);return w.createElement(Te,{data:u})};try{ar.displayName="Participant",ar.__docgenInfo={description:"",displayName:"Participant",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const en=i=>{const a=x.select("*[name()='patient']/*[name()='guardian']",i);if(!ne(a))return a.map(u=>{const l=x.select1("*[name()='guardianPerson']",u),f=String(x.select1("string(*[name()='code']/@displayName)",u)),E=Je(x.select("*[name()='name']",l)),v=f?` - ${f}`:"";return{label:"",value:`${E}${v}`}})},tn=i=>{const u=x.select("*[name()='ClinicalDocument']/*[name()='recordTarget']/*[name()='patientRole']",i).map(l=>{const f=x.select1("*[name()='patient']",l),E=Je(x.select1("*[name()='name']",f)),v=x.select("*[name()='id']",l).map(at).join(", "),h=String(x.select1("string(*[name()='administrativeGenderCode']/@displayName)",f)),D=new Date(He(String(x.select1("string(*[name()='birthTime']/@value)",f)))),U=new Date(He(String(x.select1("string(*[name()='sdtc:deceasedTime']/@value)",f)))),$=String(x.select1("string(*[name()='sdtc:deceasedInd']/@value)",f))==="true",W=$?"deceased":An(_r(U)?U:new Date,D),oe=`${qr(D,"MMMM dd, yyyy")} (${W}${$?"":" yr"}${_r(U)?" - deceased":""})`,ie=en(l);return{patient:[{label:"Name:",value:E},{label:"ID:",value:v},{label:"Date of birth:",value:oe},{label:"Gender:",value:h}],guardian:ie}});return yt(u,l=>[l.patient,l.guardian]).reduce((l,f,E)=>({...l,[`patient${E+1}`]:f[0],[`guardian${E+1}`]:f[1]}),{})},Bi=i=>{const a=x.select1("*[name()='birthplace']/*[name()='place']/*[name()='addr']",i);return a?jr(a):""},Li=i=>{const a=x.select1("*[name()='ethnicGroupCode']",i);if(a)return String(x.select1("string(@displayName)",a));const u=x.select("*[name()='sdtc:ethnicGroupCode']",i);return ne(u)?"":String(x.select1("string(@displayName)",u[0]))},Pi=i=>{const a=x.select("//*[name()='patientRole']/*[name()='patient']/*[name()='guardian']",document);if(!a||ne(a))return;const u=en(i);return a.map((l,f)=>{const E=Se(x.select("*[name()='addr']",l),x.select("*[name()='telecom']",l));return{name:u[f].value,contactDetails:E}})},Mi=i=>x.select("*[name()='languageCommunication']",i).reduce((u,l,f)=>{const E=String(x.select1("string(*[name()='languageCode']/@code)",l));if(!E)return u;const v=String(x.select1("string(*[name()='preferenceInd']/@value)",l)),h=f===0?"":`
`,D=v!==""?`, preferred: ${v}`:"";return`${u}${h}${E}${D}`},""),Ui=i=>String(x.select1("string(*[name()='maritalStatusCode']/@displayName)",i)),ki=i=>{const a=x.select1("*[name()='providerOrganization']",i),u=x.select1("//*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']",i),l=a||u,f=x.select("*[name()='id']",l).map(at).join(", "),E=Yr(x.select("string(*[name()='name'])",l)),v=Se(x.select("*[name()='addr']",l),x.select("*[name()='telecom']",l)),h=E?`
${E}`:"";return{name:`${f}${h}`,contactDetails:v}},Vi=i=>{const a=x.select1("*[name()='raceCode']",i);if(a)return String(x.select1("string(@displayName)",a));const u=x.select("*[name()='sdtc:raceCode']",i);return ne(u)?"":String(x.select1("string(@displayName)",u[0]))},Hi=i=>String(x.select1("string(*[name()='religiousAffiliationCode']/@displayName)",i)),$i=i=>{const a=x.select("//*[name()='patientRole']",i);if(!a||ne(a))return;const u=tn(i),l=Object.entries(u).reduce((f,[E,v])=>({...f,[E]:v==null?void 0:v.reduce((h,D)=>({...h,[zn(D.label)]:D.value}),{})}),{});return a.map((f,E)=>{const v=x.select1("*[name()='patient']",f),h=Vi(v),D=Li(v),U=Se(x.select("*[name()='addr']",f),x.select("*[name()='telecom']",f)),$=Mi(v),W=ki(f),oe=Pi(f),ie=Ui(v),ge=Hi(v),ke=Bi(v);return{name:l[`patient${E+1}`].name,contactDetails:U,dateOfBirth:l[`patient${E+1}`].dateOfBirth,gender:l[`patient${E+1}`].gender,race:h,ethnicity:D,patientId:l[`patient${E+1}`].id,language:$,maritalStatus:ie,religion:ge,birthPlace:ke,guardian:oe||[],providerOrganization:W.name,providerOrganizationContactDetails:W.contactDetails}})},or=({document:i})=>{const a=$i(i);return!a||ne(a)?null:w.createElement(w.Fragment,null,a.map(u=>{const l=[{label:"Patient",value:u.name},{label:"Contact Details",value:u.contactDetails},{label:"Date Of Birth",value:u.dateOfBirth},{label:"Gender",value:u.gender},{label:"Race",value:u.race},{label:"Ethnicity",value:u.ethnicity},{label:"Patient ID",value:u.patientId},{label:"Language",value:u.language},{label:"Marital Status",value:u.maritalStatus},{label:"Religion",value:u.religion},{label:"Birth Place",value:u.birthPlace},...u.guardian.map(f=>[{label:"Guardian",value:f.name},{label:"Contact Details",value:f.contactDetails}]),[{label:"Provider Organization",value:u.providerOrganization},{label:"Contact Details (Organization)",value:u.providerOrganizationContactDetails}]];return w.createElement(Te,{key:`${u.patientId}-${u.name}-${u.dateOfBirth}`,data:l.filter(f=>Ze(f)||f.value)})}))};try{or.displayName="Patient",or.__docgenInfo={description:"",displayName:"Patient",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const sr=({document:i})=>w.createElement("div",{className:"ctw-ccda-document-details"},w.createElement(Kt,{document:i}),w.createElement(Qt,{document:i}),w.createElement(or,{document:i}),w.createElement(jt,{document:i}),w.createElement(Jt,{document:i}),w.createElement(tr,{document:i}),w.createElement(rr,{document:i}),w.createElement(ir,{document:i}),w.createElement(Yt,{document:i}),w.createElement(ar,{document:i}),w.createElement(Zt,{document:i}),w.createElement(nr,{document:i}),w.createElement(Xt,{document:i}),w.createElement(er,{document:i}));try{sr.displayName="DocumentDetails",sr.__docgenInfo={description:"",displayName:"DocumentDetails",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const qi=i=>{const a=String(x.select1("string(*[name()='ClinicalDocument']/*[name()='title']/text())",i)),u=He(String(x.select1("string(*[name()='ClinicalDocument']/*[name()='effectiveTime']/@value)",i))),l=ht(u);return`${a} (${l})`},Gi=i=>{const a=qi(i),u=tn(i),l=Jr(i),f=Xr(i),E=Kr(i),v=Zr(i),h=Qr(i);return{title:a,labelTypeData:{...u,...h||{},...l||{},...f||{},encounter:E||[],...v||{}}}},ur=({document:i})=>{const{title:a,labelTypeData:u}=Gi(i);return w.createElement("div",{className:"ctw-ccda-header-container"},w.createElement("h2",{className:"ctw-ccda-header-title"},a),w.createElement("table",{className:"ctw-ccda-common-table"},w.createElement("tbody",null,yt(u,(l,f)=>{if(!l)return null;const E=l.filter(v=>v.value);return ne(E)?null:w.createElement("tr",{key:f},w.createElement("td",{className:"ctw-ccda-common-td1"},wn(f.replace(/\d/g,""))),w.createElement("td",{className:"ctw-ccda-common-td2"},E.map((v,h)=>w.createElement("span",{key:`${f}-${h}`},v.label&&w.createElement("b",null,v.label," "),v.value))))}))))};try{ur.displayName="Header",ur.__docgenInfo={description:"",displayName:"Header",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}/*! @license DOMPurify 2.4.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.1/LICENSE */function st(i){return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},st(i)}function lr(i,a){return lr=Object.setPrototypeOf||function(l,f){return l.__proto__=f,l},lr(i,a)}function zi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Dt(i,a,u){return zi()?Dt=Reflect.construct:Dt=function(f,E,v){var h=[null];h.push.apply(h,E);var D=Function.bind.apply(f,h),U=new D;return v&&lr(U,v.prototype),U},Dt.apply(null,arguments)}function Xe(i){return Wi(i)||Yi(i)||ji(i)||Xi()}function Wi(i){if(Array.isArray(i))return cr(i)}function Yi(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function ji(i,a){if(i){if(typeof i=="string")return cr(i,a);var u=Object.prototype.toString.call(i).slice(8,-1);if(u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set")return Array.from(i);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return cr(i,a)}}function cr(i,a){(a==null||a>i.length)&&(a=i.length);for(var u=0,l=new Array(a);u<a;u++)l[u]=i[u];return l}function Xi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Qi=Object.hasOwnProperty,Ir=Object.setPrototypeOf,Ji=Object.isFrozen,Ki=Object.getPrototypeOf,Zi=Object.getOwnPropertyDescriptor,Ce=Object.freeze,Ke=Object.seal,ea=Object.create,rn=typeof Reflect<"u"&&Reflect,Ft=rn.apply,pr=rn.construct;Ft||(Ft=function(a,u,l){return a.apply(u,l)});Ce||(Ce=function(a){return a});Ke||(Ke=function(a){return a});pr||(pr=function(a,u){return Dt(a,Xe(u))});var ta=ze(Array.prototype.forEach),Br=ze(Array.prototype.pop),vt=ze(Array.prototype.push),_t=ze(String.prototype.toLowerCase),Ut=ze(String.prototype.toString),ra=ze(String.prototype.match),je=ze(String.prototype.replace),na=ze(String.prototype.indexOf),ia=ze(String.prototype.trim),_e=ze(RegExp.prototype.test),kt=aa(TypeError);function ze(i){return function(a){for(var u=arguments.length,l=new Array(u>1?u-1:0),f=1;f<u;f++)l[f-1]=arguments[f];return Ft(i,a,l)}}function aa(i){return function(){for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return pr(i,u)}}function j(i,a,u){u=u||_t,Ir&&Ir(i,null);for(var l=a.length;l--;){var f=a[l];if(typeof f=="string"){var E=u(f);E!==f&&(Ji(a)||(a[l]=E),f=E)}i[f]=!0}return i}function ft(i){var a=ea(null),u;for(u in i)Ft(Qi,i,[u])&&(a[u]=i[u]);return a}function Tt(i,a){for(;i!==null;){var u=Zi(i,a);if(u){if(u.get)return ze(u.get);if(typeof u.value=="function")return ze(u.value)}i=Ki(i)}function l(f){return console.warn("fallback value for",f),null}return l}var Lr=Ce(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Vt=Ce(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ht=Ce(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),oa=Ce(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$t=Ce(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),sa=Ce(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Pr=Ce(["#text"]),Mr=Ce(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),qt=Ce(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ur=Ce(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bt=Ce(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ua=Ke(/\{\{[\w\W]*|[\w\W]*\}\}/gm),la=Ke(/<%[\w\W]*|[\w\W]*%>/gm),ca=Ke(/\${[\w\W]*}/gm),pa=Ke(/^data-[\-\w.\u00B7-\uFFFF]/),fa=Ke(/^aria-[\-\w]+$/),ha=Ke(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ma=Ke(/^(?:\w+script|data):/i),da=Ke(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ga=Ke(/^html$/i),ya=function(){return typeof window>"u"?null:window},Ea=function(a,u){if(st(a)!=="object"||typeof a.createPolicy!="function")return null;var l=null,f="data-tt-policy-suffix";u.currentScript&&u.currentScript.hasAttribute(f)&&(l=u.currentScript.getAttribute(f));var E="dompurify"+(l?"#"+l:"");try{return a.createPolicy(E,{createHTML:function(h){return h},createScriptURL:function(h){return h}})}catch{return console.warn("TrustedTypes policy "+E+" could not be created."),null}};function nn(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ya(),a=function(g){return nn(g)};if(a.version="2.4.1",a.removed=[],!i||!i.document||i.document.nodeType!==9)return a.isSupported=!1,a;var u=i.document,l=i.document,f=i.DocumentFragment,E=i.HTMLTemplateElement,v=i.Node,h=i.Element,D=i.NodeFilter,U=i.NamedNodeMap,$=U===void 0?i.NamedNodeMap||i.MozNamedAttrMap:U,W=i.HTMLFormElement,oe=i.DOMParser,ie=i.trustedTypes,ge=h.prototype,ke=Tt(ge,"cloneNode"),et=Tt(ge,"nextSibling"),A=Tt(ge,"childNodes"),le=Tt(ge,"parentNode");if(typeof E=="function"){var tt=l.createElement("template");tt.content&&tt.content.ownerDocument&&(l=tt.content.ownerDocument)}var X=Ea(ie,u),fe=X?X.createHTML(""):"",he=l,Y=he.implementation,Re=he.createNodeIterator,Fe=he.createDocumentFragment,Oe=he.getElementsByTagName,Ie=u.importNode,be={};try{be=ft(l).documentMode?l.documentMode:{}}catch{}var se={};a.isSupported=typeof le=="function"&&Y&&typeof Y.createHTMLDocument<"u"&&be!==9;var ye=ua,Ee=la,ve=ca,Be=pa,Le=fa,Pe=ma,De=da,Z=ha,P=null,ut=j({},[].concat(Xe(Lr),Xe(Vt),Xe(Ht),Xe($t),Xe(Pr))),ue=null,lt=j({},[].concat(Xe(Mr),Xe(qt),Xe(Ur),Xe(bt))),ee=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),R=null,F=null,Me=!0,Ae=!0,ae=!1,M=!1,O=!1,it=!1,ct=!1,o=!1,r=!1,n=!1,s=!0,y=!1,N="user-content-",T=!0,H=!1,z={},S=null,C=j({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),J=null,pe=j({},["audio","video","img","source","image","track"]),Ve=null,$e=j({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),G="http://www.w3.org/1998/Math/MathML",pt="http://www.w3.org/2000/svg",qe="http://www.w3.org/1999/xhtml",e=qe,t=!1,c=null,m=j({},[G,pt,qe],Ut),p,d=["application/xhtml+xml","text/html"],I="text/html",k,Q=null,B=l.createElement("form"),q=function(g){return g instanceof RegExp||g instanceof Function},we=function(g){Q&&Q===g||((!g||st(g)!=="object")&&(g={}),g=ft(g),p=d.indexOf(g.PARSER_MEDIA_TYPE)===-1?p=I:p=g.PARSER_MEDIA_TYPE,k=p==="application/xhtml+xml"?Ut:_t,P="ALLOWED_TAGS"in g?j({},g.ALLOWED_TAGS,k):ut,ue="ALLOWED_ATTR"in g?j({},g.ALLOWED_ATTR,k):lt,c="ALLOWED_NAMESPACES"in g?j({},g.ALLOWED_NAMESPACES,Ut):m,Ve="ADD_URI_SAFE_ATTR"in g?j(ft($e),g.ADD_URI_SAFE_ATTR,k):$e,J="ADD_DATA_URI_TAGS"in g?j(ft(pe),g.ADD_DATA_URI_TAGS,k):pe,S="FORBID_CONTENTS"in g?j({},g.FORBID_CONTENTS,k):C,R="FORBID_TAGS"in g?j({},g.FORBID_TAGS,k):{},F="FORBID_ATTR"in g?j({},g.FORBID_ATTR,k):{},z="USE_PROFILES"in g?g.USE_PROFILES:!1,Me=g.ALLOW_ARIA_ATTR!==!1,Ae=g.ALLOW_DATA_ATTR!==!1,ae=g.ALLOW_UNKNOWN_PROTOCOLS||!1,M=g.SAFE_FOR_TEMPLATES||!1,O=g.WHOLE_DOCUMENT||!1,o=g.RETURN_DOM||!1,r=g.RETURN_DOM_FRAGMENT||!1,n=g.RETURN_TRUSTED_TYPE||!1,ct=g.FORCE_BODY||!1,s=g.SANITIZE_DOM!==!1,y=g.SANITIZE_NAMED_PROPS||!1,T=g.KEEP_CONTENT!==!1,H=g.IN_PLACE||!1,Z=g.ALLOWED_URI_REGEXP||Z,e=g.NAMESPACE||qe,g.CUSTOM_ELEMENT_HANDLING&&q(g.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ee.tagNameCheck=g.CUSTOM_ELEMENT_HANDLING.tagNameCheck),g.CUSTOM_ELEMENT_HANDLING&&q(g.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ee.attributeNameCheck=g.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),g.CUSTOM_ELEMENT_HANDLING&&typeof g.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ee.allowCustomizedBuiltInElements=g.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),M&&(Ae=!1),r&&(o=!0),z&&(P=j({},Xe(Pr)),ue=[],z.html===!0&&(j(P,Lr),j(ue,Mr)),z.svg===!0&&(j(P,Vt),j(ue,qt),j(ue,bt)),z.svgFilters===!0&&(j(P,Ht),j(ue,qt),j(ue,bt)),z.mathMl===!0&&(j(P,$t),j(ue,Ur),j(ue,bt))),g.ADD_TAGS&&(P===ut&&(P=ft(P)),j(P,g.ADD_TAGS,k)),g.ADD_ATTR&&(ue===lt&&(ue=ft(ue)),j(ue,g.ADD_ATTR,k)),g.ADD_URI_SAFE_ATTR&&j(Ve,g.ADD_URI_SAFE_ATTR,k),g.FORBID_CONTENTS&&(S===C&&(S=ft(S)),j(S,g.FORBID_CONTENTS,k)),T&&(P["#text"]=!0),O&&j(P,["html","head","body"]),P.table&&(j(P,["tbody"]),delete R.tbody),Ce&&Ce(g),Q=g)},te=j({},["mi","mo","mn","ms","mtext"]),We=j({},["foreignobject","desc","title","annotation-xml"]),rt=j({},["title","style","font","a","script"]),mt=j({},Vt);j(mt,Ht),j(mt,oa);var dt=j({},$t);j(dt,sa);var It=function(g){var b=le(g);(!b||!b.tagName)&&(b={namespaceURI:e,tagName:"template"});var L=_t(g.tagName),re=_t(b.tagName);return c[g.namespaceURI]?g.namespaceURI===pt?b.namespaceURI===qe?L==="svg":b.namespaceURI===G?L==="svg"&&(re==="annotation-xml"||te[re]):Boolean(mt[L]):g.namespaceURI===G?b.namespaceURI===qe?L==="math":b.namespaceURI===pt?L==="math"&&We[re]:Boolean(dt[L]):g.namespaceURI===qe?b.namespaceURI===pt&&!We[re]||b.namespaceURI===G&&!te[re]?!1:!dt[L]&&(rt[L]||!mt[L]):!!(p==="application/xhtml+xml"&&c[g.namespaceURI]):!1},Ye=function(g){vt(a.removed,{element:g});try{g.parentNode.removeChild(g)}catch{try{g.outerHTML=fe}catch{g.remove()}}},Et=function(g,b){try{vt(a.removed,{attribute:b.getAttributeNode(g),from:b})}catch{vt(a.removed,{attribute:null,from:b})}if(b.removeAttribute(g),g==="is"&&!ue[g])if(o||r)try{Ye(b)}catch{}else try{b.setAttribute(g,"")}catch{}},At=function(g){var b,L;if(ct)g="<remove></remove>"+g;else{var re=ra(g,/^[\r\n\t ]+/);L=re&&re[0]}p==="application/xhtml+xml"&&e===qe&&(g='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+g+"</body></html>");var Ue=X?X.createHTML(g):g;if(e===qe)try{b=new oe().parseFromString(Ue,p)}catch{}if(!b||!b.documentElement){b=Y.createDocument(e,"template",null);try{b.documentElement.innerHTML=t?"":Ue}catch{}}var Ne=b.body||b.documentElement;return g&&L&&Ne.insertBefore(l.createTextNode(L),Ne.childNodes[0]||null),e===qe?Oe.call(b,O?"html":"body")[0]:O?b.documentElement:Ne},_=function(g){return Re.call(g.ownerDocument||g,g,D.SHOW_ELEMENT|D.SHOW_COMMENT|D.SHOW_TEXT,null,!1)},K=function(g){return g instanceof W&&(typeof g.nodeName!="string"||typeof g.textContent!="string"||typeof g.removeChild!="function"||!(g.attributes instanceof $)||typeof g.removeAttribute!="function"||typeof g.setAttribute!="function"||typeof g.namespaceURI!="string"||typeof g.insertBefore!="function"||typeof g.hasChildNodes!="function")},ce=function(g){return st(v)==="object"?g instanceof v:g&&st(g)==="object"&&typeof g.nodeType=="number"&&typeof g.nodeName=="string"},me=function(g,b,L){se[g]&&ta(se[g],function(re){re.call(a,b,L,Q)})},wt=function(g){var b;if(me("beforeSanitizeElements",g,null),K(g)||_e(/[\u0080-\uFFFF]/,g.nodeName))return Ye(g),!0;var L=k(g.nodeName);if(me("uponSanitizeElement",g,{tagName:L,allowedTags:P}),g.hasChildNodes()&&!ce(g.firstElementChild)&&(!ce(g.content)||!ce(g.content.firstElementChild))&&_e(/<[/\w]/g,g.innerHTML)&&_e(/<[/\w]/g,g.textContent)||L==="select"&&_e(/<template/i,g.innerHTML))return Ye(g),!0;if(!P[L]||R[L]){if(!R[L]&&Nr(L)&&(ee.tagNameCheck instanceof RegExp&&_e(ee.tagNameCheck,L)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(L)))return!1;if(T&&!S[L]){var re=le(g)||g.parentNode,Ue=A(g)||g.childNodes;if(Ue&&re)for(var Ne=Ue.length,xe=Ne-1;xe>=0;--xe)re.insertBefore(ke(Ue[xe],!0),et(g))}return Ye(g),!0}return g instanceof h&&!It(g)||(L==="noscript"||L==="noembed")&&_e(/<\/no(script|embed)/i,g.innerHTML)?(Ye(g),!0):(M&&g.nodeType===3&&(b=g.textContent,b=je(b,ye," "),b=je(b,Ee," "),b=je(b,ve," "),g.textContent!==b&&(vt(a.removed,{element:g.cloneNode()}),g.textContent=b)),me("afterSanitizeElements",g,null),!1)},wr=function(g,b,L){if(s&&(b==="id"||b==="name")&&(L in l||L in B))return!1;if(!(Ae&&!F[b]&&_e(Be,b))){if(!(Me&&_e(Le,b))){if(!ue[b]||F[b]){if(!(Nr(g)&&(ee.tagNameCheck instanceof RegExp&&_e(ee.tagNameCheck,g)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(g))&&(ee.attributeNameCheck instanceof RegExp&&_e(ee.attributeNameCheck,b)||ee.attributeNameCheck instanceof Function&&ee.attributeNameCheck(b))||b==="is"&&ee.allowCustomizedBuiltInElements&&(ee.tagNameCheck instanceof RegExp&&_e(ee.tagNameCheck,L)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(L))))return!1}else if(!Ve[b]){if(!_e(Z,je(L,De,""))){if(!((b==="src"||b==="xlink:href"||b==="href")&&g!=="script"&&na(L,"data:")===0&&J[g])){if(!(ae&&!_e(Pe,je(L,De,"")))){if(L)return!1}}}}}}return!0},Nr=function(g){return g.indexOf("-")>0},Tr=function(g){var b,L,re,Ue;me("beforeSanitizeAttributes",g,null);var Ne=g.attributes;if(Ne){var xe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ue};for(Ue=Ne.length;Ue--;){b=Ne[Ue];var Nt=b,de=Nt.name,Bt=Nt.namespaceURI;if(L=de==="value"?b.value:ia(b.value),re=k(de),xe.attrName=re,xe.attrValue=L,xe.keepAttr=!0,xe.forceKeepAttr=void 0,me("uponSanitizeAttribute",g,xe),L=xe.attrValue,!xe.forceKeepAttr&&(Et(de,g),!!xe.keepAttr)){if(_e(/\/>/i,L)){Et(de,g);continue}M&&(L=je(L,ye," "),L=je(L,Ee," "),L=je(L,ve," "));var br=k(g.nodeName);if(wr(br,re,L)){if(y&&(re==="id"||re==="name")&&(Et(de,g),L=N+L),X&&st(ie)==="object"&&typeof ie.getAttributeType=="function"&&!Bt)switch(ie.getAttributeType(br,re)){case"TrustedHTML":L=X.createHTML(L);break;case"TrustedScriptURL":L=X.createScriptURL(L);break}try{Bt?g.setAttributeNS(Bt,de,L):g.setAttribute(de,L),Br(a.removed)}catch{}}}}me("afterSanitizeAttributes",g,null)}},an=function V(g){var b,L=_(g);for(me("beforeSanitizeShadowDOM",g,null);b=L.nextNode();)me("uponSanitizeShadowNode",b,null),!wt(b)&&(b.content instanceof f&&V(b.content),Tr(b));me("afterSanitizeShadowDOM",g,null)};return a.sanitize=function(V){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b,L,re,Ue,Ne;if(t=!V,t&&(V="<!-->"),typeof V!="string"&&!ce(V)){if(typeof V.toString!="function")throw kt("toString is not a function");if(V=V.toString(),typeof V!="string")throw kt("dirty is not a string, aborting")}if(!a.isSupported){if(st(i.toStaticHTML)==="object"||typeof i.toStaticHTML=="function"){if(typeof V=="string")return i.toStaticHTML(V);if(ce(V))return i.toStaticHTML(V.outerHTML)}return V}if(it||we(g),a.removed=[],typeof V=="string"&&(H=!1),H){if(V.nodeName){var xe=k(V.nodeName);if(!P[xe]||R[xe])throw kt("root node is forbidden and cannot be sanitized in-place")}}else if(V instanceof v)b=At("<!---->"),L=b.ownerDocument.importNode(V,!0),L.nodeType===1&&L.nodeName==="BODY"||L.nodeName==="HTML"?b=L:b.appendChild(L);else{if(!o&&!M&&!O&&V.indexOf("<")===-1)return X&&n?X.createHTML(V):V;if(b=At(V),!b)return o?null:n?fe:""}b&&ct&&Ye(b.firstChild);for(var Nt=_(H?V:b);re=Nt.nextNode();)re.nodeType===3&&re===Ue||wt(re)||(re.content instanceof f&&an(re.content),Tr(re),Ue=re);if(Ue=null,H)return V;if(o){if(r)for(Ne=Fe.call(b.ownerDocument);b.firstChild;)Ne.appendChild(b.firstChild);else Ne=b;return ue.shadowroot&&(Ne=Ie.call(u,Ne,!0)),Ne}var de=O?b.outerHTML:b.innerHTML;return O&&P["!doctype"]&&b.ownerDocument&&b.ownerDocument.doctype&&b.ownerDocument.doctype.name&&_e(ga,b.ownerDocument.doctype.name)&&(de="<!DOCTYPE "+b.ownerDocument.doctype.name+`>
`+de),M&&(de=je(de,ye," "),de=je(de,Ee," "),de=je(de,ve," ")),X&&n?X.createHTML(de):de},a.setConfig=function(V){we(V),it=!0},a.clearConfig=function(){Q=null,it=!1},a.isValidAttribute=function(V,g,b){Q||we({});var L=k(V),re=k(g);return wr(L,re,b)},a.addHook=function(V,g){typeof g=="function"&&(se[V]=se[V]||[],vt(se[V],g))},a.removeHook=function(V){if(se[V])return Br(se[V])},a.removeHooks=function(V){se[V]&&(se[V]=[])},a.removeAllHooks=function(){se={}},a}var xa=nn();const fr=({title:i,humanReadable:a})=>{const[u,l]=Qe.useState(!0);if(!a)return null;const f=()=>l(!u);return w.createElement("div",{className:"ctw-ccda-section-container"},w.createElement("div",{className:"ctw-ccda-section-header-wrapper"},w.createElement("button",{type:"button",className:"ctw-ccda-section-arrow",onClick:f},u?"▼":"▶"),w.createElement("h3",null,i)),u&&w.createElement("div",{className:"ctw-ccda-section-wrapper"},w.createElement("div",{dangerouslySetInnerHTML:{__html:xa.sanitize(Ei(a))}})))};try{fr.displayName="Section",fr.__docgenInfo={description:"",displayName:"Section",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},humanReadable:{defaultValue:null,description:"",name:"humanReadable",required:!1,type:{name:"Document"}}}}}catch{}const hr=({document:i})=>{const u=x.select("//*[name()='component']/*[name()='section']",i).map(l=>{const f=String(x.select1("string(*[name()='title'])",l)),E=x.select1("*[name()='text']",l),v=String(x.select1("string(*[name()='code']/@code)",l));return{title:f,humanReadable:E,code:v}});return w.createElement("div",{className:Vr({width:"calc(100vw - 200px - 24px - 24px - 16px - 16px - 2px)"})},w.createElement(ur,{document:i}),w.createElement(sr,{document:i}),u.map(({title:l,humanReadable:f,code:E})=>w.createElement(fr,{key:`el-text-${E}`,title:l,humanReadable:f})))};try{hr.displayName="CcdaViewer",hr.__docgenInfo={description:"",displayName:"CcdaViewer",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch{}const va=["/xml","/xhtml+xml","application/xml"],Aa=(i,a)=>i.some(u=>a.includes(u)),mr=({data:i,contentType:a,fileName:u})=>{const l=Qe.useRef(null),[f,E]=Qe.useState(),[v,h]=Qe.useState(),D=Qe.useMemo(()=>{if(!Aa(va,a))return;const $=new In.DOMParser({locator:{},errorHandler:W=>null}).parseFromString(Gt.Buffer.from(i,"base64").toString("utf8"),a);if(x.select1("//*[name()='patientRole']",$))return $},[a,i]);function U(){var W;f&&URL.revokeObjectURL(f);const $=URL.createObjectURL(new Blob([Gt.Buffer.from(i,"base64").toString("utf8")],{type:"text/xml"}));E($),h(`CCDA-${u}`),(W=l.current)==null||W.click()}return w.createElement("div",{className:"ctw-ccda-container"},w.createElement("div",{className:"ctw-ccda-switch-container"},w.createElement("a",{href:f,ref:l,download:v,className:"ctw-decoration-none ctw-flex ctw-w-fit"},w.createElement(Ct,{onClick:U,text:"Download XML"}))),D?w.createElement(hr,{document:D}):w.createElement("div",{className:"ctw-ccda-base64-binary-text"},i))};try{mr.displayName="Base64BinaryField",mr.__docgenInfo={description:"",displayName:"Base64BinaryField",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string"}},contentType:{defaultValue:null,description:"",name:"contentType",required:!0,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}}}}}catch{}const dr=({isOpen:i,onAfterClosed:a,children:u,className:l})=>w.createElement(Lt,{appear:!0,show:i,as:Qe.Fragment},w.createElement(Sr,{as:"div",className:"ctw-relative ctw-z-[10100]",onClose:()=>{}},w.createElement(Lt.Child,{as:Qe.Fragment,enter:"ctw-ease-out ctw-duration-300",enterFrom:"ctw-opacity-0",enterTo:"ctw-opacity-100",leave:"ctw-ease-in ctw-duration-200",leaveFrom:"ctw-opacity-100",leaveTo:"ctw-opacity-0",afterLeave:a},w.createElement("div",{className:"ctw-fixed ctw-inset-0  ctw-transition-opacity"},w.createElement("div",{className:"ctw-h-full ctw-w-full ctw-bg-content-light ctw-opacity-75"}))),w.createElement("div",{className:"ctw-fixed ctw-inset-0 ctw-overflow-auto"},w.createElement("div",{className:"ctw-flex ctw-min-h-full ctw-items-center ctw-justify-center ctw-p-4 ctw-text-center"},w.createElement(Lt.Child,{as:Qe.Fragment,enter:"ctw-ease-out ctw-duration-300",enterFrom:"ctw-opacity-0 ctw-scale-95",enterTo:"ctw-opacity-100 ctw-scale-100",leave:"ctw-ease-in ctw-duration-200",leaveFrom:"ctw-opacity-100 ctw-scale-100",leaveTo:"ctw-opacity-0 ctw-scale-95"},w.createElement(Sr.Panel,{className:Vr("ctw-min-w-fit ctw-max-w-lg ctw-transform ctw-rounded-lg ctw-bg-white ctw-py-10 ctw-px-10 ctw-align-middle ctw-shadow-xl",l)},w.createElement("div",{className:"ctw-flex ctw-h-full ctw-flex-col ctw-space-y-6"},u)))))));try{dr.displayName="Modal",dr.__docgenInfo={description:"",displayName:"Modal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onAfterClosed:{defaultValue:null,description:"",name:"onAfterClosed",required:!1,type:{name:"(() => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}function wa(i,a){for(let u=0;u<i.length;u+=1){const l=i[u];if(ai(l.target,E=>{var v;return(v=E.reference)==null?void 0:v.includes(a)})){const E=hn(l.entity,{role:"source"});if(E!=null&&E.what.reference)return E.what.reference.split("/")[1]}}}async function Na(i,a){return ln.fetchQuery([Tn,a],async()=>i.fhirClient.read({resourceType:"Binary",id:a}))}const Ta=Nn(Na,"req.binary_document");function ba(){const{openModal:i}=Cn(),{getRequestContext:a}=Gr();return async(u,l)=>{const f=await a(),E=await Ta(f,u);i({component:v=>w.createElement(gr,{fileName:l,rawBinary:E,...v})})}}const gr=({rawBinary:i,fileName:a,onClose:u,...l})=>w.createElement(dr,{...l},(i==null?void 0:i.data)&&w.createElement("div",{className:"ctw-flex ctw-w-full ctw-space-x-4"},w.createElement(mr,{data:i.data,contentType:i.contentType,fileName:a}),w.createElement("div",{className:"ctw-ml-3 ctw-flex ctw-h-7 ctw-items-center"},w.createElement("button",{type:"button","aria-label":"close",onClick:u,"data-zus-telemetry-click":"Close CCDA modal",className:"ctw-btn-clear"},w.createElement("span",{className:"ctw-sr-only"},"Close panel"),w.createElement(Sn,{className:"ctw-h-6 ctw-w-6","aria-hidden":"true"})))));try{gr.displayName="CCDAModal",gr.__docgenInfo={description:"",displayName:"CCDAModal",props:{rawBinary:{defaultValue:null,description:"",name:"rawBinary",required:!0,type:{name:"Binary | undefined"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onAfterClosed:{defaultValue:null,description:"",name:"onAfterClosed",required:!1,type:{name:"(() => void)"}}}}}catch{}class Da extends bn{get status(){return this.resource.status}get binaryID(){const a=this.resource.content[0].attachment.url;if(a)return a.split("/").pop()}get docStatus(){return this.resource.docStatus}get resourceTypeTitle(){return"Document"}get title(){return this.resource.content[0].attachment.title}get dateCreated(){return Dn(this.resource.content[0].attachment.creation)}get custodian(){var a;return(a=this.resource.custodian)==null?void 0:a.display}get sectionDisplays(){var a;return((a=this.resource.category)==null?void 0:a.map(u=>_n(u)))||void 0}}function kr(i){const{openDrawer:a}=Rn();return u=>{a({component:l=>w.createElement(yr,{model:u,...i,...l})})}}function yr({className:i,model:a,details:u,header:l,subHeader:f,getSourceDocument:E,isOpen:v,onClose:h}){const D=ba(),[U,$]=Qe.useState(!1),[W,oe]=Qe.useState(),{getRequestContext:ie}=Gr();return Qe.useEffect(()=>{async function ge(){$(!0);const ke=await ie(),et=await Fn(ke,[a]);oe(wa(et,a.id)),$(!1)}a instanceof Da?oe(a.binaryID):E&&ge()},[E,a,ie]),w.createElement(Cr,{className:i,title:`${a.resourceTypeTitle} Details`,isOpen:v,onClose:h,showCloseFooter:!0},w.createElement(Cr.Body,null,w.createElement("div",{className:"ctw-py-2"},w.createElement("div",{className:"ctw-text-2xl"},l(a)),f&&w.createElement("div",{className:"ctw-text-sm"},f(a))),U?w.createElement(On,{message:"Loading data..."}):w.createElement(sn,{data:u(a),documentButton:W&&w.createElement(Ct,{onClick:()=>D(W,a.resourceTypeTitle),text:"Source Document"})})))}try{kr.displayName="useResourceDetailsDrawer",kr.__docgenInfo={description:"",displayName:"useResourceDetailsDrawer",props:{header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"(model: M) => string | undefined"}},subHeader:{defaultValue:null,description:"",name:"subHeader",required:!1,type:{name:"((model: M) => string)"}},getSourceDocument:{defaultValue:null,description:"",name:"getSourceDocument",required:!1,type:{name:"boolean"}},details:{defaultValue:null,description:"",name:"details",required:!0,type:{name:"(model: M) => CollapsibleDataListEntry[]"}}}}}catch{}try{yr.displayName="ResourceDetailsDrawer",yr.__docgenInfo={description:"",displayName:"ResourceDetailsDrawer",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},model:{defaultValue:null,description:"",name:"model",required:!0,type:{name:"FHIRModel<T>"}},header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"(model: M) => string | undefined"}},subHeader:{defaultValue:null,description:"",name:"subHeader",required:!1,type:{name:"((model: M) => string)"}},getSourceDocument:{defaultValue:null,description:"",name:"getSourceDocument",required:!1,type:{name:"boolean"}},details:{defaultValue:null,description:"",name:"details",required:!0,type:{name:"(model: M) => CollapsibleDataListEntry[]"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}export{Ct as D,dr as M,ba as a,Da as b,wa as g,kr as u};
