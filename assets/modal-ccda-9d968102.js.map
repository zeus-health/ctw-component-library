{"version":3,"file":"modal-ccda-9d968102.js","sources":["../../node_modules/lodash/camelCase.js","../../node_modules/lodash/escapeRegExp.js","../../node_modules/lodash/partition.js","../../node_modules/lodash/_baseSome.js","../../node_modules/lodash/some.js","../../node_modules/date-fns/esm/isBefore/index.js","../../node_modules/date-fns/esm/isEqual/index.js","../../src/components/core/modal.tsx","../../src/components/content/CCDA/document-button.tsx","../../node_modules/base64-js/index.js","../../node_modules/ieee754/index.js","../../node_modules/buffer/index.js","../../node_modules/xpath/xpath.js","../../src/components/content/CCDA/ccda_viewer/components/Table/BasicRow.tsx","../../src/components/content/CCDA/ccda_viewer/components/Table/TupleRow.tsx","../../src/components/content/CCDA/ccda_viewer/components/Table/Table.tsx","../../src/components/content/CCDA/ccda_viewer/helpers/displayForAddress.ts","../../src/components/content/CCDA/ccda_viewer/helpers/displayForName.ts","../../src/components/content/CCDA/ccda_viewer/helpers/displayForTelecom.ts","../../src/components/content/CCDA/ccda_viewer/helpers/getAddress.ts","../../src/components/content/CCDA/ccda_viewer/helpers/getTelecom.ts","../../src/components/content/CCDA/ccda_viewer/helpers/getContactDetails.ts","../../src/components/content/CCDA/ccda_viewer/helpers/getHumanName.ts","../../src/components/content/CCDA/ccda_viewer/helpers/getId.ts","../../src/components/content/CCDA/ccda_viewer/helpers/parseToISOString.ts","../../src/components/content/CCDA/ccda_viewer/helpers/getPeriod.ts","../../src/components/content/CCDA/ccda_viewer/helpers/fixHtml.ts","../../src/components/content/CCDA/ccda_viewer/helpers/formatDate.ts","../../src/components/content/CCDA/ccda_viewer/types/GeneralInfo.ts","../../src/components/content/CCDA/ccda_viewer/components/Authenticator/data.ts","../../src/components/content/CCDA/ccda_viewer/components/Authenticator/Authenticator.tsx","../../src/components/content/CCDA/ccda_viewer/components/Header/data/getAuthor.ts","../../src/components/content/CCDA/ccda_viewer/components/Author/data.ts","../../src/components/content/CCDA/ccda_viewer/components/Author/Author.tsx","../../src/components/content/CCDA/ccda_viewer/components/Header/data/getConsent.ts","../../src/components/content/CCDA/ccda_viewer/components/Authorization/data.ts","../../src/components/content/CCDA/ccda_viewer/components/Authorization/Authorization.tsx","../../src/components/content/CCDA/ccda_viewer/components/Custodian/data.ts","../../src/components/content/CCDA/ccda_viewer/components/Custodian/Custodian.tsx","../../src/components/content/CCDA/ccda_viewer/components/DataEnterer/data.ts","../../src/components/content/CCDA/ccda_viewer/components/DataEnterer/DataEnterer.tsx","../../src/components/content/CCDA/ccda_viewer/components/Document/data.ts","../../src/components/content/CCDA/ccda_viewer/components/Document/Document.tsx","../../src/components/content/CCDA/ccda_viewer/components/Header/data/getDocumentationOf.ts","../../src/components/content/CCDA/ccda_viewer/components/DocumentationOf/data.ts","../../src/components/content/CCDA/ccda_viewer/components/DocumentationOf/DocumentationOf.tsx","../../src/components/content/CCDA/ccda_viewer/components/Header/data/getEncounter.ts","../../src/components/content/CCDA/ccda_viewer/components/Encounter/data.ts","../../src/components/content/CCDA/ccda_viewer/components/Encounter/Encounter.tsx","../../src/components/content/CCDA/ccda_viewer/components/Informant/data.ts","../../src/components/content/CCDA/ccda_viewer/components/Informant/Informant.tsx","../../src/components/content/CCDA/ccda_viewer/components/InformationRecipient/data.ts","../../src/components/content/CCDA/ccda_viewer/components/InformationRecipient/InformationRecipient.tsx","../../src/components/content/CCDA/ccda_viewer/components/Header/data/getInFulfillmentOf.ts","../../src/components/content/CCDA/ccda_viewer/components/InFulfillmentOf/data.ts","../../src/components/content/CCDA/ccda_viewer/components/InFulfillmentOf/InFulfillmentOf.tsx","../../src/components/content/CCDA/ccda_viewer/components/LegalAuthenticator/data.ts","../../src/components/content/CCDA/ccda_viewer/components/LegalAuthenticator/LegalAuthenticator.tsx","../../src/components/content/CCDA/ccda_viewer/components/Participant/data.ts","../../src/components/content/CCDA/ccda_viewer/components/Participant/Participant.tsx","../../src/components/content/CCDA/ccda_viewer/components/Header/data/getGuardian.ts","../../src/components/content/CCDA/ccda_viewer/components/Header/data/getPatient.ts","../../src/components/content/CCDA/ccda_viewer/components/Patient/data/getBirthPlace.ts","../../src/components/content/CCDA/ccda_viewer/components/Patient/data/getEthnicity.ts","../../src/components/content/CCDA/ccda_viewer/components/Patient/data/getGuardian.ts","../../src/components/content/CCDA/ccda_viewer/components/Patient/data/getLanguage.ts","../../src/components/content/CCDA/ccda_viewer/components/Patient/data/getMaritalStatus.ts","../../src/components/content/CCDA/ccda_viewer/components/Patient/data/getProviderOrganization.ts","../../src/components/content/CCDA/ccda_viewer/components/Patient/data/getRace.ts","../../src/components/content/CCDA/ccda_viewer/components/Patient/data/getReligion.ts","../../src/components/content/CCDA/ccda_viewer/components/Patient/data/index.ts","../../src/components/content/CCDA/ccda_viewer/components/Patient/Patient.tsx","../../src/components/content/CCDA/ccda_viewer/components/DocumentDetails.tsx","../../src/components/content/CCDA/ccda_viewer/components/Header/data/getTitle.ts","../../src/components/content/CCDA/ccda_viewer/components/Header/data/index.ts","../../src/components/content/CCDA/ccda_viewer/components/Header/Header.tsx","../../node_modules/dompurify/dist/purify.es.js","../../src/components/content/CCDA/ccda_viewer/components/Section/Section.tsx","../../src/components/content/CCDA/ccda_viewer/index.tsx","../../src/components/content/CCDA/base64toBinaryField.tsx","../../src/fhir/binaries.ts","../../src/components/content/CCDA/modal-ccda.tsx"],"sourcesContent":["var capitalize = require('./capitalize'),\n    createCompounder = require('./_createCompounder');\n\n/**\n * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the camel cased string.\n * @example\n *\n * _.camelCase('Foo Bar');\n * // => 'fooBar'\n *\n * _.camelCase('--foo-bar--');\n * // => 'fooBar'\n *\n * _.camelCase('__FOO_BAR__');\n * // => 'fooBar'\n */\nvar camelCase = createCompounder(function(result, word, index) {\n  word = word.toLowerCase();\n  return result + (index ? capitalize(word) : word);\n});\n\nmodule.exports = camelCase;\n","var toString = require('./toString');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n    reHasRegExpChar = RegExp(reRegExpChar.source);\n\n/**\n * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escapeRegExp('[lodash](https://lodash.com/)');\n * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n */\nfunction escapeRegExp(string) {\n  string = toString(string);\n  return (string && reHasRegExpChar.test(string))\n    ? string.replace(reRegExpChar, '\\\\$&')\n    : string;\n}\n\nmodule.exports = escapeRegExp;\n","var createAggregator = require('./_createAggregator');\n\n/**\n * Creates an array of elements split into two groups, the first of which\n * contains elements `predicate` returns truthy for, the second of which\n * contains elements `predicate` returns falsey for. The predicate is\n * invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of grouped elements.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': false },\n *   { 'user': 'fred',    'age': 40, 'active': true },\n *   { 'user': 'pebbles', 'age': 1,  'active': false }\n * ];\n *\n * _.partition(users, function(o) { return o.active; });\n * // => objects for [['fred'], ['barney', 'pebbles']]\n *\n * // The `_.matches` iteratee shorthand.\n * _.partition(users, { 'age': 1, 'active': false });\n * // => objects for [['pebbles'], ['barney', 'fred']]\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.partition(users, ['active', false]);\n * // => objects for [['barney', 'pebbles'], ['fred']]\n *\n * // The `_.property` iteratee shorthand.\n * _.partition(users, 'active');\n * // => objects for [['fred'], ['barney', 'pebbles']]\n */\nvar partition = createAggregator(function(result, value, key) {\n  result[key ? 0 : 1].push(value);\n}, function() { return [[], []]; });\n\nmodule.exports = partition;\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.some` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction baseSome(collection, predicate) {\n  var result;\n\n  baseEach(collection, function(value, index, collection) {\n    result = predicate(value, index, collection);\n    return !result;\n  });\n  return !!result;\n}\n\nmodule.exports = baseSome;\n","var arraySome = require('./_arraySome'),\n    baseIteratee = require('./_baseIteratee'),\n    baseSome = require('./_baseSome'),\n    isArray = require('./isArray'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Checks if `predicate` returns truthy for **any** element of `collection`.\n * Iteration is stopped once `predicate` returns truthy. The predicate is\n * invoked with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n * @example\n *\n * _.some([null, 0, 'yes', false], Boolean);\n * // => true\n *\n * var users = [\n *   { 'user': 'barney', 'active': true },\n *   { 'user': 'fred',   'active': false }\n * ];\n *\n * // The `_.matches` iteratee shorthand.\n * _.some(users, { 'user': 'barney', 'active': false });\n * // => false\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.some(users, ['active', false]);\n * // => true\n *\n * // The `_.property` iteratee shorthand.\n * _.some(users, 'active');\n * // => true\n */\nfunction some(collection, predicate, guard) {\n  var func = isArray(collection) ? arraySome : baseSome;\n  if (guard && isIterateeCall(collection, predicate, guard)) {\n    predicate = undefined;\n  }\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = some;\n","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isBefore\n * @category Common Helpers\n * @summary Is the first date before the second one?\n *\n * @description\n * Is the first date before the second one?\n *\n * @param {Date|Number} date - the date that should be before the other one to return true\n * @param {Date|Number} dateToCompare - the date to compare with\n * @returns {Boolean} the first date is before the second date\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Is 10 July 1989 before 11 February 1987?\n * const result = isBefore(new Date(1989, 6, 10), new Date(1987, 1, 11))\n * //=> false\n */\n\nexport default function isBefore(dirtyDate, dirtyDateToCompare) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var dateToCompare = toDate(dirtyDateToCompare);\n  return date.getTime() < dateToCompare.getTime();\n}","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isEqual\n * @category Common Helpers\n * @summary Are the given dates equal?\n *\n * @description\n * Are the given dates equal?\n *\n * @param {Date|Number} dateLeft - the first date to compare\n * @param {Date|Number} dateRight - the second date to compare\n * @returns {Boolean} the dates are equal\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Are 2 July 2014 06:30:45.000 and 2 July 2014 06:30:45.500 equal?\n * const result = isEqual(\n *   new Date(2014, 6, 2, 6, 30, 45, 0),\n *   new Date(2014, 6, 2, 6, 30, 45, 500)\n * )\n * //=> false\n */\n\nexport default function isEqual(dirtyLeftDate, dirtyRightDate) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyLeftDate);\n  var dateRight = toDate(dirtyRightDate);\n  return dateLeft.getTime() === dateRight.getTime();\n}","import { Dialog, Transition } from \"@headlessui/react\";\nimport cx from \"classnames\";\nimport type { ReactNode } from \"react\";\nimport { Fragment } from \"react\";\n\nexport type ModalProps = {\n  isOpen: boolean;\n  onAfterClosed?: () => void; // sometimes we want to wait for the Transition to end\n  children: ReactNode;\n  className?: string;\n};\n\nexport const Modal = ({\n  isOpen,\n  onAfterClosed,\n  children,\n  className,\n}: ModalProps) => (\n  <Transition appear show={isOpen} as={Fragment}>\n    <Dialog\n      as=\"div\"\n      // change to ctw-z-modal and ctw-z-drawer in main.scss (and make sure the value of z is modal > drawer)\n      className=\"ctw-relative ctw-z-[10100]\"\n      onClose={\n        () => {} /* Do not close on esc or backdrop click. A method for the user to close the modal should be passed as a child.  */\n      }\n    >\n      <Transition.Child\n        as={Fragment}\n        enter=\"ctw-ease-out ctw-duration-300\"\n        enterFrom=\"ctw-opacity-0\"\n        enterTo=\"ctw-opacity-100\"\n        leave=\"ctw-ease-in ctw-duration-200\"\n        leaveFrom=\"ctw-opacity-100\"\n        leaveTo=\"ctw-opacity-0\"\n        afterLeave={onAfterClosed}\n      >\n        <div className=\"ctw-fixed ctw-inset-0  ctw-transition-opacity\">\n          <div className=\"ctw-h-full ctw-w-full ctw-bg-content-light ctw-opacity-75\" />\n        </div>\n      </Transition.Child>\n\n      <div className=\"ctw-fixed ctw-inset-0 ctw-overflow-auto\">\n        <div className=\"ctw-flex ctw-min-h-full ctw-items-center ctw-justify-center ctw-p-4 ctw-text-center\">\n          <Transition.Child\n            as={Fragment}\n            enter=\"ctw-ease-out ctw-duration-300\"\n            enterFrom=\"ctw-opacity-0 ctw-scale-95\"\n            enterTo=\"ctw-opacity-100 ctw-scale-100\"\n            leave=\"ctw-ease-in ctw-duration-200\"\n            leaveFrom=\"ctw-opacity-100 ctw-scale-100\"\n            leaveTo=\"ctw-opacity-0 ctw-scale-95\"\n          >\n            <Dialog.Panel\n              className={cx(\n                \"ctw-min-w-fit ctw-max-w-lg ctw-transform ctw-rounded-lg ctw-bg-white ctw-py-10 ctw-px-10 ctw-align-middle ctw-shadow-xl\",\n                className\n              )}\n            >\n              <div className=\"ctw-flex ctw-h-full ctw-flex-col ctw-space-y-6\">\n                {children}\n              </div>\n            </Dialog.Panel>\n          </Transition.Child>\n        </div>\n      </div>\n    </Dialog>\n  </Transition>\n);\n","import { MouseEventHandler } from \"react\";\nimport { DocumentIcon } from \"@/components/core/document-icon\";\n\nexport type DocumentButtonProps = {\n  onClick?: MouseEventHandler<HTMLButtonElement> | undefined;\n  text: string;\n};\n\nexport const DocumentButton = ({ onClick, text }: DocumentButtonProps) => (\n  <button\n    type=\"button\"\n    className=\"ctw-btn-clear ctw-link ctw-flex ctw-items-center ctw-space-x-2\"\n    onClick={onClick}\n  >\n    <div>{text}</div>\n    <DocumentIcon height={12} />\n  </button>\n);\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    var proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    var copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        Buffer.from(buf).copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (var i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nvar hexSliceLookupTable = (function () {\n  var alphabet = '0123456789abcdef'\n  var table = new Array(256)\n  for (var i = 0; i < 16; ++i) {\n    var i16 = i * 16\n    for (var j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n","/*\r\n * xpath.js\r\n *\r\n * An XPath 1.0 library for JavaScript.\r\n *\r\n * Cameron McCormack <cam (at) mcc.id.au>\r\n *\r\n * This work is licensed under the MIT License.\r\n *\r\n * Revision 20: April 26, 2011\r\n *   Fixed a typo resulting in FIRST_ORDERED_NODE_TYPE results being wrong,\r\n *   thanks to <shi_a009 (at) hotmail.com>.\r\n *\r\n * Revision 19: November 29, 2005\r\n *   Nodesets now store their nodes in a height balanced tree, increasing\r\n *   performance for the common case of selecting nodes in document order,\r\n *   thanks to Sébastien Cramatte <contact (at) zeninteractif.com>.\r\n *   AVL tree code adapted from Raimund Neumann <rnova (at) gmx.net>.\r\n *\r\n * Revision 18: October 27, 2005\r\n *   DOM 3 XPath support.  Caveats:\r\n *     - namespace prefixes aren't resolved in XPathEvaluator.createExpression,\r\n *       but in XPathExpression.evaluate.\r\n *     - XPathResult.invalidIteratorState is not implemented.\r\n *\r\n * Revision 17: October 25, 2005\r\n *   Some core XPath function fixes and a patch to avoid crashing certain\r\n *   versions of MSXML in PathExpr.prototype.getOwnerElement, thanks to\r\n *   Sébastien Cramatte <contact (at) zeninteractif.com>.\r\n *\r\n * Revision 16: September 22, 2005\r\n *   Workarounds for some IE 5.5 deficiencies.\r\n *   Fixed problem with prefix node tests on attribute nodes.\r\n *\r\n * Revision 15: May 21, 2005\r\n *   Fixed problem with QName node tests on elements with an xmlns=\"...\".\r\n *\r\n * Revision 14: May 19, 2005\r\n *   Fixed QName node tests on attribute node regression.\r\n *\r\n * Revision 13: May 3, 2005\r\n *   Node tests are case insensitive now if working in an HTML DOM.\r\n *\r\n * Revision 12: April 26, 2005\r\n *   Updated licence.  Slight code changes to enable use of Dean\r\n *   Edwards' script compression, http://dean.edwards.name/packer/ .\r\n *\r\n * Revision 11: April 23, 2005\r\n *   Fixed bug with 'and' and 'or' operators, fix thanks to\r\n *   Sandy McArthur <sandy (at) mcarthur.org>.\r\n *\r\n * Revision 10: April 15, 2005\r\n *   Added support for a virtual root node, supposedly helpful for\r\n *   implementing XForms.  Fixed problem with QName node tests and\r\n *   the parent axis.\r\n *\r\n * Revision 9: March 17, 2005\r\n *   Namespace resolver tweaked so using the document node as the context\r\n *   for namespace lookups is equivalent to using the document element.\r\n *\r\n * Revision 8: February 13, 2005\r\n *   Handle implicit declaration of 'xmlns' namespace prefix.\r\n *   Fixed bug when comparing nodesets.\r\n *   Instance data can now be associated with a FunctionResolver, and\r\n *     workaround for MSXML not supporting 'localName' and 'getElementById',\r\n *     thanks to Grant Gongaware.\r\n *   Fix a few problems when the context node is the root node.\r\n *\r\n * Revision 7: February 11, 2005\r\n *   Default namespace resolver fix from Grant Gongaware\r\n *   <grant (at) gongaware.com>.\r\n *\r\n * Revision 6: February 10, 2005\r\n *   Fixed bug in 'number' function.\r\n *\r\n * Revision 5: February 9, 2005\r\n *   Fixed bug where text nodes not getting converted to string values.\r\n *\r\n * Revision 4: January 21, 2005\r\n *   Bug in 'name' function, fix thanks to Bill Edney.\r\n *   Fixed incorrect processing of namespace nodes.\r\n *   Fixed NamespaceResolver to resolve 'xml' namespace.\r\n *   Implemented union '|' operator.\r\n *\r\n * Revision 3: January 14, 2005\r\n *   Fixed bug with nodeset comparisons, bug lexing < and >.\r\n *\r\n * Revision 2: October 26, 2004\r\n *   QName node test namespace handling fixed.  Few other bug fixes.\r\n *\r\n * Revision 1: August 13, 2004\r\n *   Bug fixes from William J. Edney <bedney (at) technicalpursuit.com>.\r\n *   Added minimal licence.\r\n *\r\n * Initial version: June 14, 2004\r\n */\r\n\r\n// non-node wrapper\r\nvar xpath = (typeof exports === 'undefined') ? {} : exports;\r\n\r\n(function (exports) {\r\n    \"use strict\";\r\n\r\n    // functional helpers\r\n    function curry(func) {\r\n        var slice = Array.prototype.slice,\r\n            totalargs = func.length,\r\n            partial = function (args, fn) {\r\n                return function () {\r\n                    return fn.apply(this, args.concat(slice.call(arguments)));\r\n                }\r\n            },\r\n            fn = function () {\r\n                var args = slice.call(arguments);\r\n                return (args.length < totalargs) ?\r\n                    partial(args, fn) :\r\n                    func.apply(this, slice.apply(arguments, [0, totalargs]));\r\n            };\r\n        return fn;\r\n    }\r\n\r\n    var forEach = function (f, xs) {\r\n        for (var i = 0; i < xs.length; i += 1) {\r\n            f(xs[i], i, xs);\r\n        }\r\n    };\r\n\r\n    var reduce = function (f, seed, xs) {\r\n        var acc = seed;\r\n\r\n        forEach(function (x, i) { acc = f(acc, x, i); }, xs);\r\n\r\n        return acc;\r\n    };\r\n\r\n    var map = function (f, xs) {\r\n        var mapped = new Array(xs.length);\r\n\r\n        forEach(function (x, i) { mapped[i] = f(x); }, xs);\r\n\r\n        return mapped;\r\n    };\r\n\r\n    var filter = function (f, xs) {\r\n        var filtered = [];\r\n\r\n        forEach(function (x, i) { if (f(x, i)) { filtered.push(x); } }, xs);\r\n\r\n        return filtered;\r\n    };\r\n\r\n    var includes = function (values, value) {\r\n        for (var i = 0; i < values.length; i += 1) {\r\n            if (values[i] === value) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    function always(value) { return function () { return value; } }\r\n\r\n    function toString(x) { return x.toString(); }\r\n    var join = function (s, xs) { return xs.join(s); };\r\n    var wrap = function (pref, suf, str) { return pref + str + suf; };\r\n\r\n    var prototypeConcat = Array.prototype.concat;\r\n\r\n    // .apply() fails above a certain number of arguments - https://github.com/goto100/xpath/pull/98\r\n    var MAX_ARGUMENT_LENGTH = 32767;\r\n\r\n    function flatten(arr) {\r\n        var result = [];\r\n\r\n        for (var start = 0; start < arr.length; start += MAX_ARGUMENT_LENGTH) {\r\n            var chunk = arr.slice(start, start + MAX_ARGUMENT_LENGTH);\r\n            \r\n            result = prototypeConcat.apply(result, chunk);\r\n        }\r\n        \r\n        return result;\r\n    }\r\n\r\n    function assign(target, varArgs) { // .length of function is 2\r\n        var to = Object(target);\r\n\r\n        for (var index = 1; index < arguments.length; index++) {\r\n            var nextSource = arguments[index];\r\n\r\n            if (nextSource != null) { // Skip over if undefined or null\r\n                for (var nextKey in nextSource) {\r\n                    // Avoid bugs when hasOwnProperty is shadowed\r\n                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n                        to[nextKey] = nextSource[nextKey];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return to;\r\n    }\r\n\r\n    // XPathParser ///////////////////////////////////////////////////////////////\r\n\r\n    XPathParser.prototype = new Object();\r\n    XPathParser.prototype.constructor = XPathParser;\r\n    XPathParser.superclass = Object.prototype;\r\n\r\n    function XPathParser() {\r\n        this.init();\r\n    }\r\n\r\n    XPathParser.prototype.init = function () {\r\n        this.reduceActions = [];\r\n\r\n        this.reduceActions[3] = function (rhs) {\r\n            return new OrOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[5] = function (rhs) {\r\n            return new AndOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[7] = function (rhs) {\r\n            return new EqualsOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[8] = function (rhs) {\r\n            return new NotEqualOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[10] = function (rhs) {\r\n            return new LessThanOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[11] = function (rhs) {\r\n            return new GreaterThanOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[12] = function (rhs) {\r\n            return new LessThanOrEqualOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[13] = function (rhs) {\r\n            return new GreaterThanOrEqualOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[15] = function (rhs) {\r\n            return new PlusOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[16] = function (rhs) {\r\n            return new MinusOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[18] = function (rhs) {\r\n            return new MultiplyOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[19] = function (rhs) {\r\n            return new DivOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[20] = function (rhs) {\r\n            return new ModOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[22] = function (rhs) {\r\n            return new UnaryMinusOperation(rhs[1]);\r\n        };\r\n        this.reduceActions[24] = function (rhs) {\r\n            return new BarOperation(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[25] = function (rhs) {\r\n            return new PathExpr(undefined, undefined, rhs[0]);\r\n        };\r\n        this.reduceActions[27] = function (rhs) {\r\n            rhs[0].locationPath = rhs[2];\r\n            return rhs[0];\r\n        };\r\n        this.reduceActions[28] = function (rhs) {\r\n            rhs[0].locationPath = rhs[2];\r\n            rhs[0].locationPath.steps.unshift(new Step(Step.DESCENDANTORSELF, NodeTest.nodeTest, []));\r\n            return rhs[0];\r\n        };\r\n        this.reduceActions[29] = function (rhs) {\r\n            return new PathExpr(rhs[0], [], undefined);\r\n        };\r\n        this.reduceActions[30] = function (rhs) {\r\n            if (Utilities.instance_of(rhs[0], PathExpr)) {\r\n                if (rhs[0].filterPredicates == undefined) {\r\n                    rhs[0].filterPredicates = [];\r\n                }\r\n                rhs[0].filterPredicates.push(rhs[1]);\r\n                return rhs[0];\r\n            } else {\r\n                return new PathExpr(rhs[0], [rhs[1]], undefined);\r\n            }\r\n        };\r\n        this.reduceActions[32] = function (rhs) {\r\n            return rhs[1];\r\n        };\r\n        this.reduceActions[33] = function (rhs) {\r\n            return new XString(rhs[0]);\r\n        };\r\n        this.reduceActions[34] = function (rhs) {\r\n            return new XNumber(rhs[0]);\r\n        };\r\n        this.reduceActions[36] = function (rhs) {\r\n            return new FunctionCall(rhs[0], []);\r\n        };\r\n        this.reduceActions[37] = function (rhs) {\r\n            return new FunctionCall(rhs[0], rhs[2]);\r\n        };\r\n        this.reduceActions[38] = function (rhs) {\r\n            return [rhs[0]];\r\n        };\r\n        this.reduceActions[39] = function (rhs) {\r\n            rhs[2].unshift(rhs[0]);\r\n            return rhs[2];\r\n        };\r\n        this.reduceActions[43] = function (rhs) {\r\n            return new LocationPath(true, []);\r\n        };\r\n        this.reduceActions[44] = function (rhs) {\r\n            rhs[1].absolute = true;\r\n            return rhs[1];\r\n        };\r\n        this.reduceActions[46] = function (rhs) {\r\n            return new LocationPath(false, [rhs[0]]);\r\n        };\r\n        this.reduceActions[47] = function (rhs) {\r\n            rhs[0].steps.push(rhs[2]);\r\n            return rhs[0];\r\n        };\r\n        this.reduceActions[49] = function (rhs) {\r\n            return new Step(rhs[0], rhs[1], []);\r\n        };\r\n        this.reduceActions[50] = function (rhs) {\r\n            return new Step(Step.CHILD, rhs[0], []);\r\n        };\r\n        this.reduceActions[51] = function (rhs) {\r\n            return new Step(rhs[0], rhs[1], rhs[2]);\r\n        };\r\n        this.reduceActions[52] = function (rhs) {\r\n            return new Step(Step.CHILD, rhs[0], rhs[1]);\r\n        };\r\n        this.reduceActions[54] = function (rhs) {\r\n            return [rhs[0]];\r\n        };\r\n        this.reduceActions[55] = function (rhs) {\r\n            rhs[1].unshift(rhs[0]);\r\n            return rhs[1];\r\n        };\r\n        this.reduceActions[56] = function (rhs) {\r\n            if (rhs[0] == \"ancestor\") {\r\n                return Step.ANCESTOR;\r\n            } else if (rhs[0] == \"ancestor-or-self\") {\r\n                return Step.ANCESTORORSELF;\r\n            } else if (rhs[0] == \"attribute\") {\r\n                return Step.ATTRIBUTE;\r\n            } else if (rhs[0] == \"child\") {\r\n                return Step.CHILD;\r\n            } else if (rhs[0] == \"descendant\") {\r\n                return Step.DESCENDANT;\r\n            } else if (rhs[0] == \"descendant-or-self\") {\r\n                return Step.DESCENDANTORSELF;\r\n            } else if (rhs[0] == \"following\") {\r\n                return Step.FOLLOWING;\r\n            } else if (rhs[0] == \"following-sibling\") {\r\n                return Step.FOLLOWINGSIBLING;\r\n            } else if (rhs[0] == \"namespace\") {\r\n                return Step.NAMESPACE;\r\n            } else if (rhs[0] == \"parent\") {\r\n                return Step.PARENT;\r\n            } else if (rhs[0] == \"preceding\") {\r\n                return Step.PRECEDING;\r\n            } else if (rhs[0] == \"preceding-sibling\") {\r\n                return Step.PRECEDINGSIBLING;\r\n            } else if (rhs[0] == \"self\") {\r\n                return Step.SELF;\r\n            }\r\n            return -1;\r\n        };\r\n        this.reduceActions[57] = function (rhs) {\r\n            return Step.ATTRIBUTE;\r\n        };\r\n        this.reduceActions[59] = function (rhs) {\r\n            if (rhs[0] == \"comment\") {\r\n                return NodeTest.commentTest;\r\n            } else if (rhs[0] == \"text\") {\r\n                return NodeTest.textTest;\r\n            } else if (rhs[0] == \"processing-instruction\") {\r\n                return NodeTest.anyPiTest;\r\n            } else if (rhs[0] == \"node\") {\r\n                return NodeTest.nodeTest;\r\n            }\r\n            return new NodeTest(-1, undefined);\r\n        };\r\n        this.reduceActions[60] = function (rhs) {\r\n            return new NodeTest.PITest(rhs[2]);\r\n        };\r\n        this.reduceActions[61] = function (rhs) {\r\n            return rhs[1];\r\n        };\r\n        this.reduceActions[63] = function (rhs) {\r\n            rhs[1].absolute = true;\r\n            rhs[1].steps.unshift(new Step(Step.DESCENDANTORSELF, NodeTest.nodeTest, []));\r\n            return rhs[1];\r\n        };\r\n        this.reduceActions[64] = function (rhs) {\r\n            rhs[0].steps.push(new Step(Step.DESCENDANTORSELF, NodeTest.nodeTest, []));\r\n            rhs[0].steps.push(rhs[2]);\r\n            return rhs[0];\r\n        };\r\n        this.reduceActions[65] = function (rhs) {\r\n            return new Step(Step.SELF, NodeTest.nodeTest, []);\r\n        };\r\n        this.reduceActions[66] = function (rhs) {\r\n            return new Step(Step.PARENT, NodeTest.nodeTest, []);\r\n        };\r\n        this.reduceActions[67] = function (rhs) {\r\n            return new VariableReference(rhs[1]);\r\n        };\r\n        this.reduceActions[68] = function (rhs) {\r\n            return NodeTest.nameTestAny;\r\n        };\r\n        this.reduceActions[69] = function (rhs) {\r\n            return new NodeTest.NameTestPrefixAny(rhs[0].split(':')[0]);\r\n        };\r\n        this.reduceActions[70] = function (rhs) {\r\n            return new NodeTest.NameTestQName(rhs[0]);\r\n        };\r\n    };\r\n\r\n    XPathParser.actionTable = [\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \"                 s                  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr  r  \",\r\n        \"                rrrrr               \",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \"rs  rrrrrrrr s  sssssrrrrrr  rrs rs \",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \"                            s       \",\r\n        \"                            s       \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"  s                                 \",\r\n        \"                            s       \",\r\n        \" s           s  sssss          s  s \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr  r  \",\r\n        \"a                                   \",\r\n        \"r       s                    rr  r  \",\r\n        \"r      sr                    rr  r  \",\r\n        \"r   s  rr            s       rr  r  \",\r\n        \"r   rssrr            rss     rr  r  \",\r\n        \"r   rrrrr            rrrss   rr  r  \",\r\n        \"r   rrrrrsss         rrrrr   rr  r  \",\r\n        \"r   rrrrrrrr         rrrrr   rr  r  \",\r\n        \"r   rrrrrrrr         rrrrrs  rr  r  \",\r\n        \"r   rrrrrrrr         rrrrrr  rr  r  \",\r\n        \"r   rrrrrrrr         rrrrrr  rr  r  \",\r\n        \"r  srrrrrrrr         rrrrrrs rr sr  \",\r\n        \"r  srrrrrrrr         rrrrrrs rr  r  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"r   rrrrrrrr         rrrrrr  rr  r  \",\r\n        \"r   rrrrrrrr         rrrrrr  rr  r  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr  r  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr  r  \",\r\n        \"                sssss               \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr sr  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr  r  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"                             s      \",\r\n        \"r  srrrrrrrr         rrrrrrs rr  r  \",\r\n        \"r   rrrrrrrr         rrrrr   rr  r  \",\r\n        \"              s                     \",\r\n        \"                             s      \",\r\n        \"                rrrrr               \",\r\n        \" s s        sssssssss    s sss s  ss\",\r\n        \"r  srrrrrrrr         rrrrrrs rr  r  \",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s s        sssssssss      ss  s  ss\",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \" s           s  sssss          s  s \",\r\n        \" s           s  sssss          s  s \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \" s           s  sssss          s  s \",\r\n        \" s           s  sssss          s  s \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr sr  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr sr  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr  r  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"                             s      \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"                             rr     \",\r\n        \"                             s      \",\r\n        \"                             rs     \",\r\n        \"r      sr                    rr  r  \",\r\n        \"r   s  rr            s       rr  r  \",\r\n        \"r   rssrr            rss     rr  r  \",\r\n        \"r   rssrr            rss     rr  r  \",\r\n        \"r   rrrrr            rrrss   rr  r  \",\r\n        \"r   rrrrr            rrrss   rr  r  \",\r\n        \"r   rrrrr            rrrss   rr  r  \",\r\n        \"r   rrrrr            rrrss   rr  r  \",\r\n        \"r   rrrrrsss         rrrrr   rr  r  \",\r\n        \"r   rrrrrsss         rrrrr   rr  r  \",\r\n        \"r   rrrrrrrr         rrrrr   rr  r  \",\r\n        \"r   rrrrrrrr         rrrrr   rr  r  \",\r\n        \"r   rrrrrrrr         rrrrr   rr  r  \",\r\n        \"r   rrrrrrrr         rrrrrr  rr  r  \",\r\n        \"                                 r  \",\r\n        \"                                 s  \",\r\n        \"r  srrrrrrrr         rrrrrrs rr  r  \",\r\n        \"r  srrrrrrrr         rrrrrrs rr  r  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr  r  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr  r  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr  r  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr  r  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \" s s        sssssssss    s ss  s  ss\",\r\n        \"r  rrrrrrrrr         rrrrrrr rr rr  \",\r\n        \"                             r      \"\r\n    ];\r\n\r\n    XPathParser.actionTableNumber = [\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \"                 J                  \",\r\n        \"a  aaaaaaaaa         aaaaaaa aa  a  \",\r\n        \"                YYYYY               \",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \"K1  KKKKKKKK .  +*)('KKKKKK  KK# K\\\" \",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \"                            N       \",\r\n        \"                            O       \",\r\n        \"e  eeeeeeeee         eeeeeee ee ee  \",\r\n        \"f  fffffffff         fffffff ff ff  \",\r\n        \"d  ddddddddd         ddddddd dd dd  \",\r\n        \"B  BBBBBBBBB         BBBBBBB BB BB  \",\r\n        \"A  AAAAAAAAA         AAAAAAA AA AA  \",\r\n        \"  P                                 \",\r\n        \"                            Q       \",\r\n        \" 1           .  +*)('          #  \\\" \",\r\n        \"b  bbbbbbbbb         bbbbbbb bb  b  \",\r\n        \"                                    \",\r\n        \"!       S                    !!  !  \",\r\n        \"\\\"      T\\\"                    \\\"\\\"  \\\"  \",\r\n        \"$   V  $$            U       $$  $  \",\r\n        \"&   &ZY&&            &XW     &&  &  \",\r\n        \")   )))))            )))\\\\[   ))  )  \",\r\n        \".   ....._^]         .....   ..  .  \",\r\n        \"1   11111111         11111   11  1  \",\r\n        \"5   55555555         55555`  55  5  \",\r\n        \"7   77777777         777777  77  7  \",\r\n        \"9   99999999         999999  99  9  \",\r\n        \":  c::::::::         ::::::b :: a:  \",\r\n        \"I  fIIIIIIII         IIIIIIe II  I  \",\r\n        \"=  =========         ======= == ==  \",\r\n        \"?  ?????????         ??????? ?? ??  \",\r\n        \"C  CCCCCCCCC         CCCCCCC CC CC  \",\r\n        \"J   JJJJJJJJ         JJJJJJ  JJ  J  \",\r\n        \"M   MMMMMMMM         MMMMMM  MM  M  \",\r\n        \"N  NNNNNNNNN         NNNNNNN NN  N  \",\r\n        \"P  PPPPPPPPP         PPPPPPP PP  P  \",\r\n        \"                +*)('               \",\r\n        \"R  RRRRRRRRR         RRRRRRR RR aR  \",\r\n        \"U  UUUUUUUUU         UUUUUUU UU  U  \",\r\n        \"Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  \",\r\n        \"c  ccccccccc         ccccccc cc cc  \",\r\n        \"                             j      \",\r\n        \"L  fLLLLLLLL         LLLLLLe LL  L  \",\r\n        \"6   66666666         66666   66  6  \",\r\n        \"              k                     \",\r\n        \"                             l      \",\r\n        \"                XXXXX               \",\r\n        \" 1 0        /.-,+*)('    & %$m #  \\\"!\",\r\n        \"_  f________         ______e __  _  \",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('      %$  #  \\\"!\",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \" 1           .  +*)('          #  \\\" \",\r\n        \" 1           .  +*)('          #  \\\" \",\r\n        \">  >>>>>>>>>         >>>>>>> >> >>  \",\r\n        \" 1           .  +*)('          #  \\\" \",\r\n        \" 1           .  +*)('          #  \\\" \",\r\n        \"Q  QQQQQQQQQ         QQQQQQQ QQ aQ  \",\r\n        \"V  VVVVVVVVV         VVVVVVV VV aV  \",\r\n        \"T  TTTTTTTTT         TTTTTTT TT  T  \",\r\n        \"@  @@@@@@@@@         @@@@@@@ @@ @@  \",\r\n        \"                             \\x87      \",\r\n        \"[  [[[[[[[[[         [[[[[[[ [[ [[  \",\r\n        \"D  DDDDDDDDD         DDDDDDD DD DD  \",\r\n        \"                             HH     \",\r\n        \"                             \\x88      \",\r\n        \"                             F\\x89     \",\r\n        \"#      T#                    ##  #  \",\r\n        \"%   V  %%            U       %%  %  \",\r\n        \"'   'ZY''            'XW     ''  '  \",\r\n        \"(   (ZY((            (XW     ((  (  \",\r\n        \"+   +++++            +++\\\\[   ++  +  \",\r\n        \"*   *****            ***\\\\[   **  *  \",\r\n        \"-   -----            ---\\\\[   --  -  \",\r\n        \",   ,,,,,            ,,,\\\\[   ,,  ,  \",\r\n        \"0   00000_^]         00000   00  0  \",\r\n        \"/   /////_^]         /////   //  /  \",\r\n        \"2   22222222         22222   22  2  \",\r\n        \"3   33333333         33333   33  3  \",\r\n        \"4   44444444         44444   44  4  \",\r\n        \"8   88888888         888888  88  8  \",\r\n        \"                                 ^  \",\r\n        \"                                 \\x8a  \",\r\n        \";  f;;;;;;;;         ;;;;;;e ;;  ;  \",\r\n        \"<  f<<<<<<<<         <<<<<<e <<  <  \",\r\n        \"O  OOOOOOOOO         OOOOOOO OO  O  \",\r\n        \"`  `````````         ``````` ``  `  \",\r\n        \"S  SSSSSSSSS         SSSSSSS SS  S  \",\r\n        \"W  WWWWWWWWW         WWWWWWW WW  W  \",\r\n        \"\\\\  \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\\\\\\\\\\\\\\\ \\\\\\\\ \\\\\\\\  \",\r\n        \"E  EEEEEEEEE         EEEEEEE EE EE  \",\r\n        \" 1 0        /.-,+*)('    & %$  #  \\\"!\",\r\n        \"]  ]]]]]]]]]         ]]]]]]] ]] ]]  \",\r\n        \"                             G      \"\r\n    ];\r\n\r\n    XPathParser.gotoTable = [\r\n        \"3456789:;<=>?@ AB  CDEFGH IJ \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"L456789:;<=>?@ AB  CDEFGH IJ \",\r\n        \"            M        EFGH IJ \",\r\n        \"       N;<=>?@ AB  CDEFGH IJ \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"            S        EFGH IJ \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"              e              \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                        h  J \",\r\n        \"              i          j   \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"o456789:;<=>?@ ABpqCDEFGH IJ \",\r\n        \"                             \",\r\n        \"  r6789:;<=>?@ AB  CDEFGH IJ \",\r\n        \"   s789:;<=>?@ AB  CDEFGH IJ \",\r\n        \"    t89:;<=>?@ AB  CDEFGH IJ \",\r\n        \"    u89:;<=>?@ AB  CDEFGH IJ \",\r\n        \"     v9:;<=>?@ AB  CDEFGH IJ \",\r\n        \"     w9:;<=>?@ AB  CDEFGH IJ \",\r\n        \"     x9:;<=>?@ AB  CDEFGH IJ \",\r\n        \"     y9:;<=>?@ AB  CDEFGH IJ \",\r\n        \"      z:;<=>?@ AB  CDEFGH IJ \",\r\n        \"      {:;<=>?@ AB  CDEFGH IJ \",\r\n        \"       |;<=>?@ AB  CDEFGH IJ \",\r\n        \"       };<=>?@ AB  CDEFGH IJ \",\r\n        \"       ~;<=>?@ AB  CDEFGH IJ \",\r\n        \"         \\x7f=>?@ AB  CDEFGH IJ \",\r\n        \"\\x80456789:;<=>?@ AB  CDEFGH IJ\\x81\",\r\n        \"            \\x82        EFGH IJ \",\r\n        \"            \\x83        EFGH IJ \",\r\n        \"                             \",\r\n        \"                     \\x84 GH IJ \",\r\n        \"                     \\x85 GH IJ \",\r\n        \"              i          \\x86   \",\r\n        \"              i          \\x87   \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"                             \",\r\n        \"o456789:;<=>?@ AB\\x8cqCDEFGH IJ \",\r\n        \"                             \",\r\n        \"                             \"\r\n    ];\r\n\r\n    XPathParser.productions = [\r\n        [1, 1, 2],\r\n        [2, 1, 3],\r\n        [3, 1, 4],\r\n        [3, 3, 3, -9, 4],\r\n        [4, 1, 5],\r\n        [4, 3, 4, -8, 5],\r\n        [5, 1, 6],\r\n        [5, 3, 5, -22, 6],\r\n        [5, 3, 5, -5, 6],\r\n        [6, 1, 7],\r\n        [6, 3, 6, -23, 7],\r\n        [6, 3, 6, -24, 7],\r\n        [6, 3, 6, -6, 7],\r\n        [6, 3, 6, -7, 7],\r\n        [7, 1, 8],\r\n        [7, 3, 7, -25, 8],\r\n        [7, 3, 7, -26, 8],\r\n        [8, 1, 9],\r\n        [8, 3, 8, -12, 9],\r\n        [8, 3, 8, -11, 9],\r\n        [8, 3, 8, -10, 9],\r\n        [9, 1, 10],\r\n        [9, 2, -26, 9],\r\n        [10, 1, 11],\r\n        [10, 3, 10, -27, 11],\r\n        [11, 1, 12],\r\n        [11, 1, 13],\r\n        [11, 3, 13, -28, 14],\r\n        [11, 3, 13, -4, 14],\r\n        [13, 1, 15],\r\n        [13, 2, 13, 16],\r\n        [15, 1, 17],\r\n        [15, 3, -29, 2, -30],\r\n        [15, 1, -15],\r\n        [15, 1, -16],\r\n        [15, 1, 18],\r\n        [18, 3, -13, -29, -30],\r\n        [18, 4, -13, -29, 19, -30],\r\n        [19, 1, 20],\r\n        [19, 3, 20, -31, 19],\r\n        [20, 1, 2],\r\n        [12, 1, 14],\r\n        [12, 1, 21],\r\n        [21, 1, -28],\r\n        [21, 2, -28, 14],\r\n        [21, 1, 22],\r\n        [14, 1, 23],\r\n        [14, 3, 14, -28, 23],\r\n        [14, 1, 24],\r\n        [23, 2, 25, 26],\r\n        [23, 1, 26],\r\n        [23, 3, 25, 26, 27],\r\n        [23, 2, 26, 27],\r\n        [23, 1, 28],\r\n        [27, 1, 16],\r\n        [27, 2, 16, 27],\r\n        [25, 2, -14, -3],\r\n        [25, 1, -32],\r\n        [26, 1, 29],\r\n        [26, 3, -20, -29, -30],\r\n        [26, 4, -21, -29, -15, -30],\r\n        [16, 3, -33, 30, -34],\r\n        [30, 1, 2],\r\n        [22, 2, -4, 14],\r\n        [24, 3, 14, -4, 23],\r\n        [28, 1, -35],\r\n        [28, 1, -2],\r\n        [17, 2, -36, -18],\r\n        [29, 1, -17],\r\n        [29, 1, -19],\r\n        [29, 1, -18]\r\n    ];\r\n\r\n    XPathParser.DOUBLEDOT = 2;\r\n    XPathParser.DOUBLECOLON = 3;\r\n    XPathParser.DOUBLESLASH = 4;\r\n    XPathParser.NOTEQUAL = 5;\r\n    XPathParser.LESSTHANOREQUAL = 6;\r\n    XPathParser.GREATERTHANOREQUAL = 7;\r\n    XPathParser.AND = 8;\r\n    XPathParser.OR = 9;\r\n    XPathParser.MOD = 10;\r\n    XPathParser.DIV = 11;\r\n    XPathParser.MULTIPLYOPERATOR = 12;\r\n    XPathParser.FUNCTIONNAME = 13;\r\n    XPathParser.AXISNAME = 14;\r\n    XPathParser.LITERAL = 15;\r\n    XPathParser.NUMBER = 16;\r\n    XPathParser.ASTERISKNAMETEST = 17;\r\n    XPathParser.QNAME = 18;\r\n    XPathParser.NCNAMECOLONASTERISK = 19;\r\n    XPathParser.NODETYPE = 20;\r\n    XPathParser.PROCESSINGINSTRUCTIONWITHLITERAL = 21;\r\n    XPathParser.EQUALS = 22;\r\n    XPathParser.LESSTHAN = 23;\r\n    XPathParser.GREATERTHAN = 24;\r\n    XPathParser.PLUS = 25;\r\n    XPathParser.MINUS = 26;\r\n    XPathParser.BAR = 27;\r\n    XPathParser.SLASH = 28;\r\n    XPathParser.LEFTPARENTHESIS = 29;\r\n    XPathParser.RIGHTPARENTHESIS = 30;\r\n    XPathParser.COMMA = 31;\r\n    XPathParser.AT = 32;\r\n    XPathParser.LEFTBRACKET = 33;\r\n    XPathParser.RIGHTBRACKET = 34;\r\n    XPathParser.DOT = 35;\r\n    XPathParser.DOLLAR = 36;\r\n\r\n    XPathParser.prototype.tokenize = function (s1) {\r\n        var types = [];\r\n        var values = [];\r\n        var s = s1 + '\\0';\r\n\r\n        var pos = 0;\r\n        var c = s.charAt(pos++);\r\n        while (1) {\r\n            while (c == ' ' || c == '\\t' || c == '\\r' || c == '\\n') {\r\n                c = s.charAt(pos++);\r\n            }\r\n            if (c == '\\0' || pos >= s.length) {\r\n                break;\r\n            }\r\n\r\n            if (c == '(') {\r\n                types.push(XPathParser.LEFTPARENTHESIS);\r\n                values.push(c);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n            if (c == ')') {\r\n                types.push(XPathParser.RIGHTPARENTHESIS);\r\n                values.push(c);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n            if (c == '[') {\r\n                types.push(XPathParser.LEFTBRACKET);\r\n                values.push(c);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n            if (c == ']') {\r\n                types.push(XPathParser.RIGHTBRACKET);\r\n                values.push(c);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n            if (c == '@') {\r\n                types.push(XPathParser.AT);\r\n                values.push(c);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n            if (c == ',') {\r\n                types.push(XPathParser.COMMA);\r\n                values.push(c);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n            if (c == '|') {\r\n                types.push(XPathParser.BAR);\r\n                values.push(c);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n            if (c == '+') {\r\n                types.push(XPathParser.PLUS);\r\n                values.push(c);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n            if (c == '-') {\r\n                types.push(XPathParser.MINUS);\r\n                values.push(c);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n            if (c == '=') {\r\n                types.push(XPathParser.EQUALS);\r\n                values.push(c);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n            if (c == '$') {\r\n                types.push(XPathParser.DOLLAR);\r\n                values.push(c);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n\r\n            if (c == '.') {\r\n                c = s.charAt(pos++);\r\n                if (c == '.') {\r\n                    types.push(XPathParser.DOUBLEDOT);\r\n                    values.push(\"..\");\r\n                    c = s.charAt(pos++);\r\n                    continue;\r\n                }\r\n                if (c >= '0' && c <= '9') {\r\n                    var number = \".\" + c;\r\n                    c = s.charAt(pos++);\r\n                    while (c >= '0' && c <= '9') {\r\n                        number += c;\r\n                        c = s.charAt(pos++);\r\n                    }\r\n                    types.push(XPathParser.NUMBER);\r\n                    values.push(number);\r\n                    continue;\r\n                }\r\n                types.push(XPathParser.DOT);\r\n                values.push('.');\r\n                continue;\r\n            }\r\n\r\n            if (c == '\\'' || c == '\"') {\r\n                var delimiter = c;\r\n                var literal = \"\";\r\n                while (pos < s.length && (c = s.charAt(pos)) !== delimiter) {\r\n                    literal += c;\r\n                    pos += 1;\r\n                }\r\n                if (c !== delimiter) {\r\n                    throw XPathException.fromMessage(\"Unterminated string literal: \" + delimiter + literal);\r\n                }\r\n                pos += 1;\r\n                types.push(XPathParser.LITERAL);\r\n                values.push(literal);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n\r\n            if (c >= '0' && c <= '9') {\r\n                var number = c;\r\n                c = s.charAt(pos++);\r\n                while (c >= '0' && c <= '9') {\r\n                    number += c;\r\n                    c = s.charAt(pos++);\r\n                }\r\n                if (c == '.') {\r\n                    if (s.charAt(pos) >= '0' && s.charAt(pos) <= '9') {\r\n                        number += c;\r\n                        number += s.charAt(pos++);\r\n                        c = s.charAt(pos++);\r\n                        while (c >= '0' && c <= '9') {\r\n                            number += c;\r\n                            c = s.charAt(pos++);\r\n                        }\r\n                    }\r\n                }\r\n                types.push(XPathParser.NUMBER);\r\n                values.push(number);\r\n                continue;\r\n            }\r\n\r\n            if (c == '*') {\r\n                if (types.length > 0) {\r\n                    var last = types[types.length - 1];\r\n                    if (last != XPathParser.AT\r\n                        && last != XPathParser.DOUBLECOLON\r\n                        && last != XPathParser.LEFTPARENTHESIS\r\n                        && last != XPathParser.LEFTBRACKET\r\n                        && last != XPathParser.AND\r\n                        && last != XPathParser.OR\r\n                        && last != XPathParser.MOD\r\n                        && last != XPathParser.DIV\r\n                        && last != XPathParser.MULTIPLYOPERATOR\r\n                        && last != XPathParser.SLASH\r\n                        && last != XPathParser.DOUBLESLASH\r\n                        && last != XPathParser.BAR\r\n                        && last != XPathParser.PLUS\r\n                        && last != XPathParser.MINUS\r\n                        && last != XPathParser.EQUALS\r\n                        && last != XPathParser.NOTEQUAL\r\n                        && last != XPathParser.LESSTHAN\r\n                        && last != XPathParser.LESSTHANOREQUAL\r\n                        && last != XPathParser.GREATERTHAN\r\n                        && last != XPathParser.GREATERTHANOREQUAL) {\r\n                        types.push(XPathParser.MULTIPLYOPERATOR);\r\n                        values.push(c);\r\n                        c = s.charAt(pos++);\r\n                        continue;\r\n                    }\r\n                }\r\n                types.push(XPathParser.ASTERISKNAMETEST);\r\n                values.push(c);\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n\r\n            if (c == ':') {\r\n                if (s.charAt(pos) == ':') {\r\n                    types.push(XPathParser.DOUBLECOLON);\r\n                    values.push(\"::\");\r\n                    pos++;\r\n                    c = s.charAt(pos++);\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            if (c == '/') {\r\n                c = s.charAt(pos++);\r\n                if (c == '/') {\r\n                    types.push(XPathParser.DOUBLESLASH);\r\n                    values.push(\"//\");\r\n                    c = s.charAt(pos++);\r\n                    continue;\r\n                }\r\n                types.push(XPathParser.SLASH);\r\n                values.push('/');\r\n                continue;\r\n            }\r\n\r\n            if (c == '!') {\r\n                if (s.charAt(pos) == '=') {\r\n                    types.push(XPathParser.NOTEQUAL);\r\n                    values.push(\"!=\");\r\n                    pos++;\r\n                    c = s.charAt(pos++);\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            if (c == '<') {\r\n                if (s.charAt(pos) == '=') {\r\n                    types.push(XPathParser.LESSTHANOREQUAL);\r\n                    values.push(\"<=\");\r\n                    pos++;\r\n                    c = s.charAt(pos++);\r\n                    continue;\r\n                }\r\n                types.push(XPathParser.LESSTHAN);\r\n                values.push('<');\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n\r\n            if (c == '>') {\r\n                if (s.charAt(pos) == '=') {\r\n                    types.push(XPathParser.GREATERTHANOREQUAL);\r\n                    values.push(\">=\");\r\n                    pos++;\r\n                    c = s.charAt(pos++);\r\n                    continue;\r\n                }\r\n                types.push(XPathParser.GREATERTHAN);\r\n                values.push('>');\r\n                c = s.charAt(pos++);\r\n                continue;\r\n            }\r\n\r\n            if (c == '_' || Utilities.isLetter(c.charCodeAt(0))) {\r\n                var name = c;\r\n                c = s.charAt(pos++);\r\n                while (Utilities.isNCNameChar(c.charCodeAt(0))) {\r\n                    name += c;\r\n                    c = s.charAt(pos++);\r\n                }\r\n                if (types.length > 0) {\r\n                    var last = types[types.length - 1];\r\n                    if (last != XPathParser.AT\r\n                        && last != XPathParser.DOUBLECOLON\r\n                        && last != XPathParser.LEFTPARENTHESIS\r\n                        && last != XPathParser.LEFTBRACKET\r\n                        && last != XPathParser.AND\r\n                        && last != XPathParser.OR\r\n                        && last != XPathParser.MOD\r\n                        && last != XPathParser.DIV\r\n                        && last != XPathParser.MULTIPLYOPERATOR\r\n                        && last != XPathParser.SLASH\r\n                        && last != XPathParser.DOUBLESLASH\r\n                        && last != XPathParser.BAR\r\n                        && last != XPathParser.PLUS\r\n                        && last != XPathParser.MINUS\r\n                        && last != XPathParser.EQUALS\r\n                        && last != XPathParser.NOTEQUAL\r\n                        && last != XPathParser.LESSTHAN\r\n                        && last != XPathParser.LESSTHANOREQUAL\r\n                        && last != XPathParser.GREATERTHAN\r\n                        && last != XPathParser.GREATERTHANOREQUAL) {\r\n                        if (name == \"and\") {\r\n                            types.push(XPathParser.AND);\r\n                            values.push(name);\r\n                            continue;\r\n                        }\r\n                        if (name == \"or\") {\r\n                            types.push(XPathParser.OR);\r\n                            values.push(name);\r\n                            continue;\r\n                        }\r\n                        if (name == \"mod\") {\r\n                            types.push(XPathParser.MOD);\r\n                            values.push(name);\r\n                            continue;\r\n                        }\r\n                        if (name == \"div\") {\r\n                            types.push(XPathParser.DIV);\r\n                            values.push(name);\r\n                            continue;\r\n                        }\r\n                    }\r\n                }\r\n                if (c == ':') {\r\n                    if (s.charAt(pos) == '*') {\r\n                        types.push(XPathParser.NCNAMECOLONASTERISK);\r\n                        values.push(name + \":*\");\r\n                        pos++;\r\n                        c = s.charAt(pos++);\r\n                        continue;\r\n                    }\r\n                    if (s.charAt(pos) == '_' || Utilities.isLetter(s.charCodeAt(pos))) {\r\n                        name += ':';\r\n                        c = s.charAt(pos++);\r\n                        while (Utilities.isNCNameChar(c.charCodeAt(0))) {\r\n                            name += c;\r\n                            c = s.charAt(pos++);\r\n                        }\r\n                        if (c == '(') {\r\n                            types.push(XPathParser.FUNCTIONNAME);\r\n                            values.push(name);\r\n                            continue;\r\n                        }\r\n                        types.push(XPathParser.QNAME);\r\n                        values.push(name);\r\n                        continue;\r\n                    }\r\n                    if (s.charAt(pos) == ':') {\r\n                        types.push(XPathParser.AXISNAME);\r\n                        values.push(name);\r\n                        continue;\r\n                    }\r\n                }\r\n                if (c == '(') {\r\n                    if (name == \"comment\" || name == \"text\" || name == \"node\") {\r\n                        types.push(XPathParser.NODETYPE);\r\n                        values.push(name);\r\n                        continue;\r\n                    }\r\n                    if (name == \"processing-instruction\") {\r\n                        if (s.charAt(pos) == ')') {\r\n                            types.push(XPathParser.NODETYPE);\r\n                        } else {\r\n                            types.push(XPathParser.PROCESSINGINSTRUCTIONWITHLITERAL);\r\n                        }\r\n                        values.push(name);\r\n                        continue;\r\n                    }\r\n                    types.push(XPathParser.FUNCTIONNAME);\r\n                    values.push(name);\r\n                    continue;\r\n                }\r\n                types.push(XPathParser.QNAME);\r\n                values.push(name);\r\n                continue;\r\n            }\r\n\r\n            throw new Error(\"Unexpected character \" + c);\r\n        }\r\n        types.push(1);\r\n        values.push(\"[EOF]\");\r\n        return [types, values];\r\n    };\r\n\r\n    XPathParser.SHIFT = 's';\r\n    XPathParser.REDUCE = 'r';\r\n    XPathParser.ACCEPT = 'a';\r\n\r\n    XPathParser.prototype.parse = function (s) {\r\n        var types;\r\n        var values;\r\n        var res = this.tokenize(s);\r\n        if (res == undefined) {\r\n            return undefined;\r\n        }\r\n        types = res[0];\r\n        values = res[1];\r\n        var tokenPos = 0;\r\n        var state = [];\r\n        var tokenType = [];\r\n        var tokenValue = [];\r\n        var s;\r\n        var a;\r\n        var t;\r\n\r\n        state.push(0);\r\n        tokenType.push(1);\r\n        tokenValue.push(\"_S\");\r\n\r\n        a = types[tokenPos];\r\n        t = values[tokenPos++];\r\n        while (1) {\r\n            s = state[state.length - 1];\r\n            switch (XPathParser.actionTable[s].charAt(a - 1)) {\r\n                case XPathParser.SHIFT:\r\n                    tokenType.push(-a);\r\n                    tokenValue.push(t);\r\n                    state.push(XPathParser.actionTableNumber[s].charCodeAt(a - 1) - 32);\r\n                    a = types[tokenPos];\r\n                    t = values[tokenPos++];\r\n                    break;\r\n                case XPathParser.REDUCE:\r\n                    var num = XPathParser.productions[XPathParser.actionTableNumber[s].charCodeAt(a - 1) - 32][1];\r\n                    var rhs = [];\r\n                    for (var i = 0; i < num; i++) {\r\n                        tokenType.pop();\r\n                        rhs.unshift(tokenValue.pop());\r\n                        state.pop();\r\n                    }\r\n                    var s_ = state[state.length - 1];\r\n                    tokenType.push(XPathParser.productions[XPathParser.actionTableNumber[s].charCodeAt(a - 1) - 32][0]);\r\n                    if (this.reduceActions[XPathParser.actionTableNumber[s].charCodeAt(a - 1) - 32] == undefined) {\r\n                        tokenValue.push(rhs[0]);\r\n                    } else {\r\n                        tokenValue.push(this.reduceActions[XPathParser.actionTableNumber[s].charCodeAt(a - 1) - 32](rhs));\r\n                    }\r\n                    state.push(XPathParser.gotoTable[s_].charCodeAt(XPathParser.productions[XPathParser.actionTableNumber[s].charCodeAt(a - 1) - 32][0] - 2) - 33);\r\n                    break;\r\n                case XPathParser.ACCEPT:\r\n                    return new XPath(tokenValue.pop());\r\n                default:\r\n                    throw new Error(\"XPath parse error\");\r\n            }\r\n        }\r\n    };\r\n\r\n    // XPath /////////////////////////////////////////////////////////////////////\r\n\r\n    XPath.prototype = new Object();\r\n    XPath.prototype.constructor = XPath;\r\n    XPath.superclass = Object.prototype;\r\n\r\n    function XPath(e) {\r\n        this.expression = e;\r\n    }\r\n\r\n    XPath.prototype.toString = function () {\r\n        return this.expression.toString();\r\n    };\r\n\r\n    function setIfUnset(obj, prop, value) {\r\n        if (!(prop in obj)) {\r\n            obj[prop] = value;\r\n        }\r\n    }\r\n\r\n    XPath.prototype.evaluate = function (c) {\r\n        c.contextNode = c.expressionContextNode;\r\n        c.contextSize = 1;\r\n        c.contextPosition = 1;\r\n\r\n        // [2017-11-25] Removed usage of .implementation.hasFeature() since it does\r\n        //              not reliably detect HTML DOMs (always returns false in xmldom and true in browsers)\r\n        if (c.isHtml) {\r\n            setIfUnset(c, 'caseInsensitive', true);\r\n            setIfUnset(c, 'allowAnyNamespaceForNoPrefix', true);\r\n        }\r\n\r\n        setIfUnset(c, 'caseInsensitive', false);\r\n\r\n        return this.expression.evaluate(c);\r\n    };\r\n\r\n    XPath.XML_NAMESPACE_URI = \"http://www.w3.org/XML/1998/namespace\";\r\n    XPath.XMLNS_NAMESPACE_URI = \"http://www.w3.org/2000/xmlns/\";\r\n\r\n    // Expression ////////////////////////////////////////////////////////////////\r\n\r\n    Expression.prototype = new Object();\r\n    Expression.prototype.constructor = Expression;\r\n    Expression.superclass = Object.prototype;\r\n\r\n    function Expression() {\r\n    }\r\n\r\n    Expression.prototype.init = function () {\r\n    };\r\n\r\n    Expression.prototype.toString = function () {\r\n        return \"<Expression>\";\r\n    };\r\n\r\n    Expression.prototype.evaluate = function (c) {\r\n        throw new Error(\"Could not evaluate expression.\");\r\n    };\r\n\r\n    // UnaryOperation ////////////////////////////////////////////////////////////\r\n\r\n    UnaryOperation.prototype = new Expression();\r\n    UnaryOperation.prototype.constructor = UnaryOperation;\r\n    UnaryOperation.superclass = Expression.prototype;\r\n\r\n    function UnaryOperation(rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(rhs);\r\n        }\r\n    }\r\n\r\n    UnaryOperation.prototype.init = function (rhs) {\r\n        this.rhs = rhs;\r\n    };\r\n\r\n    // UnaryMinusOperation ///////////////////////////////////////////////////////\r\n\r\n    UnaryMinusOperation.prototype = new UnaryOperation();\r\n    UnaryMinusOperation.prototype.constructor = UnaryMinusOperation;\r\n    UnaryMinusOperation.superclass = UnaryOperation.prototype;\r\n\r\n    function UnaryMinusOperation(rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(rhs);\r\n        }\r\n    }\r\n\r\n    UnaryMinusOperation.prototype.init = function (rhs) {\r\n        UnaryMinusOperation.superclass.init.call(this, rhs);\r\n    };\r\n\r\n    UnaryMinusOperation.prototype.evaluate = function (c) {\r\n        return this.rhs.evaluate(c).number().negate();\r\n    };\r\n\r\n    UnaryMinusOperation.prototype.toString = function () {\r\n        return \"-\" + this.rhs.toString();\r\n    };\r\n\r\n    // BinaryOperation ///////////////////////////////////////////////////////////\r\n\r\n    BinaryOperation.prototype = new Expression();\r\n    BinaryOperation.prototype.constructor = BinaryOperation;\r\n    BinaryOperation.superclass = Expression.prototype;\r\n\r\n    function BinaryOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    BinaryOperation.prototype.init = function (lhs, rhs) {\r\n        this.lhs = lhs;\r\n        this.rhs = rhs;\r\n    };\r\n\r\n    // OrOperation ///////////////////////////////////////////////////////////////\r\n\r\n    OrOperation.prototype = new BinaryOperation();\r\n    OrOperation.prototype.constructor = OrOperation;\r\n    OrOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function OrOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    OrOperation.prototype.init = function (lhs, rhs) {\r\n        OrOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    OrOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" or \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    OrOperation.prototype.evaluate = function (c) {\r\n        var b = this.lhs.evaluate(c).bool();\r\n        if (b.booleanValue()) {\r\n            return b;\r\n        }\r\n        return this.rhs.evaluate(c).bool();\r\n    };\r\n\r\n    // AndOperation //////////////////////////////////////////////////////////////\r\n\r\n    AndOperation.prototype = new BinaryOperation();\r\n    AndOperation.prototype.constructor = AndOperation;\r\n    AndOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function AndOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    AndOperation.prototype.init = function (lhs, rhs) {\r\n        AndOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    AndOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" and \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    AndOperation.prototype.evaluate = function (c) {\r\n        var b = this.lhs.evaluate(c).bool();\r\n        if (!b.booleanValue()) {\r\n            return b;\r\n        }\r\n        return this.rhs.evaluate(c).bool();\r\n    };\r\n\r\n    // EqualsOperation ///////////////////////////////////////////////////////////\r\n\r\n    EqualsOperation.prototype = new BinaryOperation();\r\n    EqualsOperation.prototype.constructor = EqualsOperation;\r\n    EqualsOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function EqualsOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    EqualsOperation.prototype.init = function (lhs, rhs) {\r\n        EqualsOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    EqualsOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" = \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    EqualsOperation.prototype.evaluate = function (c) {\r\n        return this.lhs.evaluate(c).equals(this.rhs.evaluate(c));\r\n    };\r\n\r\n    // NotEqualOperation /////////////////////////////////////////////////////////\r\n\r\n    NotEqualOperation.prototype = new BinaryOperation();\r\n    NotEqualOperation.prototype.constructor = NotEqualOperation;\r\n    NotEqualOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function NotEqualOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    NotEqualOperation.prototype.init = function (lhs, rhs) {\r\n        NotEqualOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    NotEqualOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" != \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    NotEqualOperation.prototype.evaluate = function (c) {\r\n        return this.lhs.evaluate(c).notequal(this.rhs.evaluate(c));\r\n    };\r\n\r\n    // LessThanOperation /////////////////////////////////////////////////////////\r\n\r\n    LessThanOperation.prototype = new BinaryOperation();\r\n    LessThanOperation.prototype.constructor = LessThanOperation;\r\n    LessThanOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function LessThanOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    LessThanOperation.prototype.init = function (lhs, rhs) {\r\n        LessThanOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    LessThanOperation.prototype.evaluate = function (c) {\r\n        return this.lhs.evaluate(c).lessthan(this.rhs.evaluate(c));\r\n    };\r\n\r\n    LessThanOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" < \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    // GreaterThanOperation //////////////////////////////////////////////////////\r\n\r\n    GreaterThanOperation.prototype = new BinaryOperation();\r\n    GreaterThanOperation.prototype.constructor = GreaterThanOperation;\r\n    GreaterThanOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function GreaterThanOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    GreaterThanOperation.prototype.init = function (lhs, rhs) {\r\n        GreaterThanOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    GreaterThanOperation.prototype.evaluate = function (c) {\r\n        return this.lhs.evaluate(c).greaterthan(this.rhs.evaluate(c));\r\n    };\r\n\r\n    GreaterThanOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" > \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    // LessThanOrEqualOperation //////////////////////////////////////////////////\r\n\r\n    LessThanOrEqualOperation.prototype = new BinaryOperation();\r\n    LessThanOrEqualOperation.prototype.constructor = LessThanOrEqualOperation;\r\n    LessThanOrEqualOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function LessThanOrEqualOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    LessThanOrEqualOperation.prototype.init = function (lhs, rhs) {\r\n        LessThanOrEqualOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    LessThanOrEqualOperation.prototype.evaluate = function (c) {\r\n        return this.lhs.evaluate(c).lessthanorequal(this.rhs.evaluate(c));\r\n    };\r\n\r\n    LessThanOrEqualOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" <= \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    // GreaterThanOrEqualOperation ///////////////////////////////////////////////\r\n\r\n    GreaterThanOrEqualOperation.prototype = new BinaryOperation();\r\n    GreaterThanOrEqualOperation.prototype.constructor = GreaterThanOrEqualOperation;\r\n    GreaterThanOrEqualOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function GreaterThanOrEqualOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    GreaterThanOrEqualOperation.prototype.init = function (lhs, rhs) {\r\n        GreaterThanOrEqualOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    GreaterThanOrEqualOperation.prototype.evaluate = function (c) {\r\n        return this.lhs.evaluate(c).greaterthanorequal(this.rhs.evaluate(c));\r\n    };\r\n\r\n    GreaterThanOrEqualOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" >= \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    // PlusOperation /////////////////////////////////////////////////////////////\r\n\r\n    PlusOperation.prototype = new BinaryOperation();\r\n    PlusOperation.prototype.constructor = PlusOperation;\r\n    PlusOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function PlusOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    PlusOperation.prototype.init = function (lhs, rhs) {\r\n        PlusOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    PlusOperation.prototype.evaluate = function (c) {\r\n        return this.lhs.evaluate(c).number().plus(this.rhs.evaluate(c).number());\r\n    };\r\n\r\n    PlusOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" + \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    // MinusOperation ////////////////////////////////////////////////////////////\r\n\r\n    MinusOperation.prototype = new BinaryOperation();\r\n    MinusOperation.prototype.constructor = MinusOperation;\r\n    MinusOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function MinusOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    MinusOperation.prototype.init = function (lhs, rhs) {\r\n        MinusOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    MinusOperation.prototype.evaluate = function (c) {\r\n        return this.lhs.evaluate(c).number().minus(this.rhs.evaluate(c).number());\r\n    };\r\n\r\n    MinusOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" - \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    // MultiplyOperation /////////////////////////////////////////////////////////\r\n\r\n    MultiplyOperation.prototype = new BinaryOperation();\r\n    MultiplyOperation.prototype.constructor = MultiplyOperation;\r\n    MultiplyOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function MultiplyOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    MultiplyOperation.prototype.init = function (lhs, rhs) {\r\n        MultiplyOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    MultiplyOperation.prototype.evaluate = function (c) {\r\n        return this.lhs.evaluate(c).number().multiply(this.rhs.evaluate(c).number());\r\n    };\r\n\r\n    MultiplyOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" * \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    // DivOperation //////////////////////////////////////////////////////////////\r\n\r\n    DivOperation.prototype = new BinaryOperation();\r\n    DivOperation.prototype.constructor = DivOperation;\r\n    DivOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function DivOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    DivOperation.prototype.init = function (lhs, rhs) {\r\n        DivOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    DivOperation.prototype.evaluate = function (c) {\r\n        return this.lhs.evaluate(c).number().div(this.rhs.evaluate(c).number());\r\n    };\r\n\r\n    DivOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" div \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    // ModOperation //////////////////////////////////////////////////////////////\r\n\r\n    ModOperation.prototype = new BinaryOperation();\r\n    ModOperation.prototype.constructor = ModOperation;\r\n    ModOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function ModOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    ModOperation.prototype.init = function (lhs, rhs) {\r\n        ModOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    ModOperation.prototype.evaluate = function (c) {\r\n        return this.lhs.evaluate(c).number().mod(this.rhs.evaluate(c).number());\r\n    };\r\n\r\n    ModOperation.prototype.toString = function () {\r\n        return \"(\" + this.lhs.toString() + \" mod \" + this.rhs.toString() + \")\";\r\n    };\r\n\r\n    // BarOperation //////////////////////////////////////////////////////////////\r\n\r\n    BarOperation.prototype = new BinaryOperation();\r\n    BarOperation.prototype.constructor = BarOperation;\r\n    BarOperation.superclass = BinaryOperation.prototype;\r\n\r\n    function BarOperation(lhs, rhs) {\r\n        if (arguments.length > 0) {\r\n            this.init(lhs, rhs);\r\n        }\r\n    }\r\n\r\n    BarOperation.prototype.init = function (lhs, rhs) {\r\n        BarOperation.superclass.init.call(this, lhs, rhs);\r\n    };\r\n\r\n    BarOperation.prototype.evaluate = function (c) {\r\n        return this.lhs.evaluate(c).nodeset().union(this.rhs.evaluate(c).nodeset());\r\n    };\r\n\r\n    BarOperation.prototype.toString = function () {\r\n        return map(toString, [this.lhs, this.rhs]).join(' | ');\r\n    };\r\n\r\n    // PathExpr //////////////////////////////////////////////////////////////////\r\n\r\n    PathExpr.prototype = new Expression();\r\n    PathExpr.prototype.constructor = PathExpr;\r\n    PathExpr.superclass = Expression.prototype;\r\n\r\n    function PathExpr(filter, filterPreds, locpath) {\r\n        if (arguments.length > 0) {\r\n            this.init(filter, filterPreds, locpath);\r\n        }\r\n    }\r\n\r\n    PathExpr.prototype.init = function (filter, filterPreds, locpath) {\r\n        PathExpr.superclass.init.call(this);\r\n        this.filter = filter;\r\n        this.filterPredicates = filterPreds;\r\n        this.locationPath = locpath;\r\n    };\r\n\r\n    /**\r\n     * Returns the topmost node of the tree containing node\r\n     */\r\n    function findRoot(node) {\r\n        while (node && node.parentNode) {\r\n            node = node.parentNode;\r\n        }\r\n\r\n        return node;\r\n    }\r\n\r\n    PathExpr.applyPredicates = function (predicates, c, nodes) {\r\n        if (predicates.length === 0) {\r\n            return nodes;\r\n        }\r\n\r\n        var ctx = c.extend({});\r\n\r\n        return reduce(\r\n            function (inNodes, pred) {\r\n                ctx.contextSize = inNodes.length;\r\n\r\n                return filter(\r\n                    function (node, i) {\r\n                        ctx.contextNode = node;\r\n                        ctx.contextPosition = i + 1;\r\n\r\n                        return PathExpr.predicateMatches(pred, ctx);\r\n                    },\r\n                    inNodes\r\n                );\r\n            },\r\n            nodes,\r\n            predicates\r\n        );\r\n    };\r\n\r\n    PathExpr.getRoot = function (xpc, nodes) {\r\n        var firstNode = nodes[0];\r\n\r\n        if (firstNode.nodeType === 9 /*Node.DOCUMENT_NODE*/) {\r\n            return firstNode;\r\n        }\r\n\r\n        if (xpc.virtualRoot) {\r\n            return xpc.virtualRoot;\r\n        }\r\n\r\n        var ownerDoc = firstNode.ownerDocument;\r\n\r\n        if (ownerDoc) {\r\n            return ownerDoc;\r\n        }\r\n\r\n        // IE 5.5 doesn't have ownerDocument?\r\n        var n = firstNode;\r\n        while (n.parentNode != null) {\r\n            n = n.parentNode;\r\n        }\r\n        return n;\r\n    }\r\n\r\n    PathExpr.applyStep = function (step, xpc, node) {\r\n        var self = this;\r\n        var newNodes = [];\r\n        xpc.contextNode = node;\r\n\r\n        switch (step.axis) {\r\n            case Step.ANCESTOR:\r\n                // look at all the ancestor nodes\r\n                if (xpc.contextNode === xpc.virtualRoot) {\r\n                    break;\r\n                }\r\n                var m;\r\n                if (xpc.contextNode.nodeType == 2 /*Node.ATTRIBUTE_NODE*/) {\r\n                    m = PathExpr.getOwnerElement(xpc.contextNode);\r\n                } else {\r\n                    m = xpc.contextNode.parentNode;\r\n                }\r\n                while (m != null) {\r\n                    if (step.nodeTest.matches(m, xpc)) {\r\n                        newNodes.push(m);\r\n                    }\r\n                    if (m === xpc.virtualRoot) {\r\n                        break;\r\n                    }\r\n                    m = m.parentNode;\r\n                }\r\n                break;\r\n\r\n            case Step.ANCESTORORSELF:\r\n                // look at all the ancestor nodes and the current node\r\n                for (var m = xpc.contextNode; m != null; m = m.nodeType == 2 /*Node.ATTRIBUTE_NODE*/ ? PathExpr.getOwnerElement(m) : m.parentNode) {\r\n                    if (step.nodeTest.matches(m, xpc)) {\r\n                        newNodes.push(m);\r\n                    }\r\n                    if (m === xpc.virtualRoot) {\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case Step.ATTRIBUTE:\r\n                // look at the attributes\r\n                var nnm = xpc.contextNode.attributes;\r\n                if (nnm != null) {\r\n                    for (var k = 0; k < nnm.length; k++) {\r\n                        var m = nnm.item(k);\r\n                        if (step.nodeTest.matches(m, xpc)) {\r\n                            newNodes.push(m);\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case Step.CHILD:\r\n                // look at all child elements\r\n                for (var m = xpc.contextNode.firstChild; m != null; m = m.nextSibling) {\r\n                    if (step.nodeTest.matches(m, xpc)) {\r\n                        newNodes.push(m);\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case Step.DESCENDANT:\r\n                // look at all descendant nodes\r\n                var st = [xpc.contextNode.firstChild];\r\n                while (st.length > 0) {\r\n                    for (var m = st.pop(); m != null;) {\r\n                        if (step.nodeTest.matches(m, xpc)) {\r\n                            newNodes.push(m);\r\n                        }\r\n                        if (m.firstChild != null) {\r\n                            st.push(m.nextSibling);\r\n                            m = m.firstChild;\r\n                        } else {\r\n                            m = m.nextSibling;\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case Step.DESCENDANTORSELF:\r\n                // look at self\r\n                if (step.nodeTest.matches(xpc.contextNode, xpc)) {\r\n                    newNodes.push(xpc.contextNode);\r\n                }\r\n                // look at all descendant nodes\r\n                var st = [xpc.contextNode.firstChild];\r\n                while (st.length > 0) {\r\n                    for (var m = st.pop(); m != null;) {\r\n                        if (step.nodeTest.matches(m, xpc)) {\r\n                            newNodes.push(m);\r\n                        }\r\n                        if (m.firstChild != null) {\r\n                            st.push(m.nextSibling);\r\n                            m = m.firstChild;\r\n                        } else {\r\n                            m = m.nextSibling;\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case Step.FOLLOWING:\r\n                if (xpc.contextNode === xpc.virtualRoot) {\r\n                    break;\r\n                }\r\n                var st = [];\r\n                if (xpc.contextNode.firstChild != null) {\r\n                    st.unshift(xpc.contextNode.firstChild);\r\n                } else {\r\n                    st.unshift(xpc.contextNode.nextSibling);\r\n                }\r\n                for (var m = xpc.contextNode.parentNode; m != null && m.nodeType != 9 /*Node.DOCUMENT_NODE*/ && m !== xpc.virtualRoot; m = m.parentNode) {\r\n                    st.unshift(m.nextSibling);\r\n                }\r\n                do {\r\n                    for (var m = st.pop(); m != null;) {\r\n                        if (step.nodeTest.matches(m, xpc)) {\r\n                            newNodes.push(m);\r\n                        }\r\n                        if (m.firstChild != null) {\r\n                            st.push(m.nextSibling);\r\n                            m = m.firstChild;\r\n                        } else {\r\n                            m = m.nextSibling;\r\n                        }\r\n                    }\r\n                } while (st.length > 0);\r\n                break;\r\n\r\n            case Step.FOLLOWINGSIBLING:\r\n                if (xpc.contextNode === xpc.virtualRoot) {\r\n                    break;\r\n                }\r\n                for (var m = xpc.contextNode.nextSibling; m != null; m = m.nextSibling) {\r\n                    if (step.nodeTest.matches(m, xpc)) {\r\n                        newNodes.push(m);\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case Step.NAMESPACE:\r\n                var n = {};\r\n                if (xpc.contextNode.nodeType == 1 /*Node.ELEMENT_NODE*/) {\r\n                    n[\"xml\"] = XPath.XML_NAMESPACE_URI;\r\n                    n[\"xmlns\"] = XPath.XMLNS_NAMESPACE_URI;\r\n                    for (var m = xpc.contextNode; m != null && m.nodeType == 1 /*Node.ELEMENT_NODE*/; m = m.parentNode) {\r\n                        for (var k = 0; k < m.attributes.length; k++) {\r\n                            var attr = m.attributes.item(k);\r\n                            var nm = String(attr.name);\r\n                            if (nm == \"xmlns\") {\r\n                                if (n[\"\"] == undefined) {\r\n                                    n[\"\"] = attr.value;\r\n                                }\r\n                            } else if (nm.length > 6 && nm.substring(0, 6) == \"xmlns:\") {\r\n                                var pre = nm.substring(6, nm.length);\r\n                                if (n[pre] == undefined) {\r\n                                    n[pre] = attr.value;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    for (var pre in n) {\r\n                        var nsn = new XPathNamespace(pre, n[pre], xpc.contextNode);\r\n                        if (step.nodeTest.matches(nsn, xpc)) {\r\n                            newNodes.push(nsn);\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case Step.PARENT:\r\n                m = null;\r\n                if (xpc.contextNode !== xpc.virtualRoot) {\r\n                    if (xpc.contextNode.nodeType == 2 /*Node.ATTRIBUTE_NODE*/) {\r\n                        m = PathExpr.getOwnerElement(xpc.contextNode);\r\n                    } else {\r\n                        m = xpc.contextNode.parentNode;\r\n                    }\r\n                }\r\n                if (m != null && step.nodeTest.matches(m, xpc)) {\r\n                    newNodes.push(m);\r\n                }\r\n                break;\r\n\r\n            case Step.PRECEDING:\r\n                var st;\r\n                if (xpc.virtualRoot != null) {\r\n                    st = [xpc.virtualRoot];\r\n                } else {\r\n                    // cannot rely on .ownerDocument because the node may be in a document fragment\r\n                    st = [findRoot(xpc.contextNode)];\r\n                }\r\n                outer: while (st.length > 0) {\r\n                    for (var m = st.pop(); m != null;) {\r\n                        if (m == xpc.contextNode) {\r\n                            break outer;\r\n                        }\r\n                        if (step.nodeTest.matches(m, xpc)) {\r\n                            newNodes.unshift(m);\r\n                        }\r\n                        if (m.firstChild != null) {\r\n                            st.push(m.nextSibling);\r\n                            m = m.firstChild;\r\n                        } else {\r\n                            m = m.nextSibling;\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case Step.PRECEDINGSIBLING:\r\n                if (xpc.contextNode === xpc.virtualRoot) {\r\n                    break;\r\n                }\r\n                for (var m = xpc.contextNode.previousSibling; m != null; m = m.previousSibling) {\r\n                    if (step.nodeTest.matches(m, xpc)) {\r\n                        newNodes.push(m);\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case Step.SELF:\r\n                if (step.nodeTest.matches(xpc.contextNode, xpc)) {\r\n                    newNodes.push(xpc.contextNode);\r\n                }\r\n                break;\r\n\r\n            default:\r\n        }\r\n\r\n        return newNodes;\r\n    };\r\n\r\n    function applyStepWithPredicates(step, xpc, node) {\r\n        return PathExpr.applyPredicates(\r\n            step.predicates,\r\n            xpc,\r\n            PathExpr.applyStep(step, xpc, node)\r\n        );\r\n    }\r\n\r\n    function applyStepToNodes(context, nodes, step) {\r\n        return flatten(\r\n            map(\r\n                applyStepWithPredicates.bind(null, step, context),\r\n                nodes\r\n            )\r\n        );\r\n    }\r\n\r\n    PathExpr.applySteps = function (steps, xpc, nodes) {\r\n        return reduce(\r\n            applyStepToNodes.bind(null, xpc),\r\n            nodes,\r\n            steps\r\n        );\r\n    }\r\n\r\n    PathExpr.prototype.applyFilter = function (c, xpc) {\r\n        if (!this.filter) {\r\n            return { nodes: [c.contextNode] };\r\n        }\r\n\r\n        var ns = this.filter.evaluate(c);\r\n\r\n        if (!Utilities.instance_of(ns, XNodeSet)) {\r\n            if (this.filterPredicates != null && this.filterPredicates.length > 0 || this.locationPath != null) {\r\n                throw new Error(\"Path expression filter must evaluate to a nodeset if predicates or location path are used\");\r\n            }\r\n\r\n            return { nonNodes: ns };\r\n        }\r\n\r\n        return {\r\n            nodes: PathExpr.applyPredicates(this.filterPredicates || [], xpc, ns.toUnsortedArray())\r\n        };\r\n    };\r\n\r\n    PathExpr.applyLocationPath = function (locationPath, xpc, nodes) {\r\n        if (!locationPath) {\r\n            return nodes;\r\n        }\r\n\r\n        var startNodes = locationPath.absolute ? [PathExpr.getRoot(xpc, nodes)] : nodes;\r\n\r\n        return PathExpr.applySteps(locationPath.steps, xpc, startNodes);\r\n    };\r\n\r\n    PathExpr.prototype.evaluate = function (c) {\r\n        var xpc = assign(new XPathContext(), c);\r\n\r\n        var filterResult = this.applyFilter(c, xpc);\r\n\r\n        if ('nonNodes' in filterResult) {\r\n            return filterResult.nonNodes;\r\n        }\r\n\r\n        var ns = new XNodeSet();\r\n        ns.addArray(PathExpr.applyLocationPath(this.locationPath, xpc, filterResult.nodes));\r\n        return ns;\r\n    };\r\n\r\n    PathExpr.predicateMatches = function (pred, c) {\r\n        var res = pred.evaluate(c);\r\n\r\n        return Utilities.instance_of(res, XNumber)\r\n            ? c.contextPosition === res.numberValue()\r\n            : res.booleanValue();\r\n    };\r\n\r\n    PathExpr.predicateString = function (predicate) {\r\n        return wrap('[', ']', predicate.toString());\r\n    }\r\n\r\n    PathExpr.predicatesString = function (predicates) {\r\n        return join(\r\n            '',\r\n            map(PathExpr.predicateString, predicates)\r\n        );\r\n    }\r\n\r\n    PathExpr.prototype.toString = function () {\r\n        if (this.filter != undefined) {\r\n            var filterStr = toString(this.filter);\r\n\r\n            if (Utilities.instance_of(this.filter, XString)) {\r\n                return wrap(\"'\", \"'\", filterStr);\r\n            }\r\n            if (this.filterPredicates != undefined && this.filterPredicates.length) {\r\n                return wrap('(', ')', filterStr) +\r\n                    PathExpr.predicatesString(this.filterPredicates);\r\n            }\r\n            if (this.locationPath != undefined) {\r\n                return filterStr +\r\n                    (this.locationPath.absolute ? '' : '/') +\r\n                    toString(this.locationPath);\r\n            }\r\n\r\n            return filterStr;\r\n        }\r\n\r\n        return toString(this.locationPath);\r\n    };\r\n\r\n    PathExpr.getOwnerElement = function (n) {\r\n        // DOM 2 has ownerElement\r\n        if (n.ownerElement) {\r\n            return n.ownerElement;\r\n        }\r\n        // DOM 1 Internet Explorer can use selectSingleNode (ironically)\r\n        try {\r\n            if (n.selectSingleNode) {\r\n                return n.selectSingleNode(\"..\");\r\n            }\r\n        } catch (e) {\r\n        }\r\n        // Other DOM 1 implementations must use this egregious search\r\n        var doc = n.nodeType == 9 /*Node.DOCUMENT_NODE*/\r\n            ? n\r\n            : n.ownerDocument;\r\n        var elts = doc.getElementsByTagName(\"*\");\r\n        for (var i = 0; i < elts.length; i++) {\r\n            var elt = elts.item(i);\r\n            var nnm = elt.attributes;\r\n            for (var j = 0; j < nnm.length; j++) {\r\n                var an = nnm.item(j);\r\n                if (an === n) {\r\n                    return elt;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    // LocationPath //////////////////////////////////////////////////////////////\r\n\r\n    LocationPath.prototype = new Object();\r\n    LocationPath.prototype.constructor = LocationPath;\r\n    LocationPath.superclass = Object.prototype;\r\n\r\n    function LocationPath(abs, steps) {\r\n        if (arguments.length > 0) {\r\n            this.init(abs, steps);\r\n        }\r\n    }\r\n\r\n    LocationPath.prototype.init = function (abs, steps) {\r\n        this.absolute = abs;\r\n        this.steps = steps;\r\n    };\r\n\r\n    LocationPath.prototype.toString = function () {\r\n        return (\r\n            (this.absolute ? '/' : '') +\r\n            map(toString, this.steps).join('/')\r\n        );\r\n    };\r\n\r\n    // Step //////////////////////////////////////////////////////////////////////\r\n\r\n    Step.prototype = new Object();\r\n    Step.prototype.constructor = Step;\r\n    Step.superclass = Object.prototype;\r\n\r\n    function Step(axis, nodetest, preds) {\r\n        if (arguments.length > 0) {\r\n            this.init(axis, nodetest, preds);\r\n        }\r\n    }\r\n\r\n    Step.prototype.init = function (axis, nodetest, preds) {\r\n        this.axis = axis;\r\n        this.nodeTest = nodetest;\r\n        this.predicates = preds;\r\n    };\r\n\r\n    Step.prototype.toString = function () {\r\n        return Step.STEPNAMES[this.axis] +\r\n            \"::\" +\r\n            this.nodeTest.toString() +\r\n            PathExpr.predicatesString(this.predicates);\r\n    };\r\n\r\n\r\n    Step.ANCESTOR = 0;\r\n    Step.ANCESTORORSELF = 1;\r\n    Step.ATTRIBUTE = 2;\r\n    Step.CHILD = 3;\r\n    Step.DESCENDANT = 4;\r\n    Step.DESCENDANTORSELF = 5;\r\n    Step.FOLLOWING = 6;\r\n    Step.FOLLOWINGSIBLING = 7;\r\n    Step.NAMESPACE = 8;\r\n    Step.PARENT = 9;\r\n    Step.PRECEDING = 10;\r\n    Step.PRECEDINGSIBLING = 11;\r\n    Step.SELF = 12;\r\n\r\n    Step.STEPNAMES = reduce(function (acc, x) { return acc[x[0]] = x[1], acc; }, {}, [\r\n        [Step.ANCESTOR, 'ancestor'],\r\n        [Step.ANCESTORORSELF, 'ancestor-or-self'],\r\n        [Step.ATTRIBUTE, 'attribute'],\r\n        [Step.CHILD, 'child'],\r\n        [Step.DESCENDANT, 'descendant'],\r\n        [Step.DESCENDANTORSELF, 'descendant-or-self'],\r\n        [Step.FOLLOWING, 'following'],\r\n        [Step.FOLLOWINGSIBLING, 'following-sibling'],\r\n        [Step.NAMESPACE, 'namespace'],\r\n        [Step.PARENT, 'parent'],\r\n        [Step.PRECEDING, 'preceding'],\r\n        [Step.PRECEDINGSIBLING, 'preceding-sibling'],\r\n        [Step.SELF, 'self']\r\n    ]);\r\n\r\n    // NodeTest //////////////////////////////////////////////////////////////////\r\n\r\n    NodeTest.prototype = new Object();\r\n    NodeTest.prototype.constructor = NodeTest;\r\n    NodeTest.superclass = Object.prototype;\r\n\r\n    function NodeTest(type, value) {\r\n        if (arguments.length > 0) {\r\n            this.init(type, value);\r\n        }\r\n    }\r\n\r\n    NodeTest.prototype.init = function (type, value) {\r\n        this.type = type;\r\n        this.value = value;\r\n    };\r\n\r\n    NodeTest.prototype.toString = function () {\r\n        return \"<unknown nodetest type>\";\r\n    };\r\n\r\n    NodeTest.prototype.matches = function (n, xpc) {\r\n        console.warn('unknown node test type');\r\n    };\r\n\r\n    NodeTest.NAMETESTANY = 0;\r\n    NodeTest.NAMETESTPREFIXANY = 1;\r\n    NodeTest.NAMETESTQNAME = 2;\r\n    NodeTest.COMMENT = 3;\r\n    NodeTest.TEXT = 4;\r\n    NodeTest.PI = 5;\r\n    NodeTest.NODE = 6;\r\n\r\n    NodeTest.isNodeType = function (types) {\r\n        return function (node) {\r\n            return includes(types, node.nodeType);\r\n        };\r\n    };\r\n\r\n    NodeTest.makeNodeTestType = function (type, members, ctor) {\r\n        var newType = ctor || function () { };\r\n\r\n        newType.prototype = new NodeTest(type);\r\n        newType.prototype.constructor = newType;\r\n\r\n        assign(newType.prototype, members);\r\n\r\n        return newType;\r\n    };\r\n    // create invariant node test for certain node types\r\n    NodeTest.makeNodeTypeTest = function (type, nodeTypes, stringVal) {\r\n        return new (NodeTest.makeNodeTestType(type, {\r\n            matches: NodeTest.isNodeType(nodeTypes),\r\n            toString: always(stringVal)\r\n        }))();\r\n    };\r\n\r\n    NodeTest.hasPrefix = function (node) {\r\n        return node.prefix || (node.nodeName || node.tagName).indexOf(':') !== -1;\r\n    };\r\n\r\n    NodeTest.isElementOrAttribute = NodeTest.isNodeType([1, 2]);\r\n    NodeTest.nameSpaceMatches = function (prefix, xpc, n) {\r\n        var nNamespace = (n.namespaceURI || '');\r\n\r\n        if (!prefix) {\r\n            return !nNamespace || (xpc.allowAnyNamespaceForNoPrefix && !NodeTest.hasPrefix(n));\r\n        }\r\n\r\n        var ns = xpc.namespaceResolver.getNamespace(prefix, xpc.expressionContextNode);\r\n\r\n        if (ns == null) {\r\n            throw new Error(\"Cannot resolve QName \" + prefix);\r\n        }\r\n\r\n        return ns === nNamespace;\r\n    };\r\n    NodeTest.localNameMatches = function (localName, xpc, n) {\r\n        var nLocalName = (n.localName || n.nodeName);\r\n\r\n        return xpc.caseInsensitive\r\n            ? localName.toLowerCase() === nLocalName.toLowerCase()\r\n            : localName === nLocalName;\r\n    };\r\n\r\n    NodeTest.NameTestPrefixAny = NodeTest.makeNodeTestType(\r\n        NodeTest.NAMETESTPREFIXANY,\r\n        {\r\n            matches: function (n, xpc) {\r\n                return NodeTest.isElementOrAttribute(n) &&\r\n                    NodeTest.nameSpaceMatches(this.prefix, xpc, n);\r\n            },\r\n            toString: function () {\r\n                return this.prefix + \":*\";\r\n            }\r\n        },\r\n        function NameTestPrefixAny(prefix) { this.prefix = prefix; }\r\n    );\r\n\r\n    NodeTest.NameTestQName = NodeTest.makeNodeTestType(\r\n        NodeTest.NAMETESTQNAME,\r\n        {\r\n            matches: function (n, xpc) {\r\n                return NodeTest.isNodeType([1, 2, XPathNamespace.XPATH_NAMESPACE_NODE])(n) &&\r\n                    NodeTest.nameSpaceMatches(this.prefix, xpc, n) &&\r\n                    NodeTest.localNameMatches(this.localName, xpc, n);\r\n            },\r\n            toString: function () {\r\n                return this.name;\r\n            }\r\n        },\r\n        function NameTestQName(name) {\r\n            var nameParts = name.split(':');\r\n\r\n            this.name = name;\r\n            this.prefix = nameParts.length > 1 ? nameParts[0] : null;\r\n            this.localName = nameParts[nameParts.length > 1 ? 1 : 0];\r\n        }\r\n    );\r\n\r\n    NodeTest.PITest = NodeTest.makeNodeTestType(NodeTest.PI, {\r\n        matches: function (n, xpc) {\r\n            return NodeTest.isNodeType([7])(n) && (n.target || n.nodeName) === this.name;\r\n        },\r\n        toString: function () {\r\n            return wrap('processing-instruction(\"', '\")', this.name);\r\n        }\r\n    }, function (name) { this.name = name; })\r\n\r\n    // singletons\r\n\r\n    // elements, attributes, namespaces\r\n    NodeTest.nameTestAny = NodeTest.makeNodeTypeTest(NodeTest.NAMETESTANY, [1, 2, XPathNamespace.XPATH_NAMESPACE_NODE], '*');\r\n    // text, cdata\r\n    NodeTest.textTest = NodeTest.makeNodeTypeTest(NodeTest.TEXT, [3, 4], 'text()');\r\n    NodeTest.commentTest = NodeTest.makeNodeTypeTest(NodeTest.COMMENT, [8], 'comment()');\r\n    // elements, attributes, text, cdata, PIs, comments, document nodes\r\n    NodeTest.nodeTest = NodeTest.makeNodeTypeTest(NodeTest.NODE, [1, 2, 3, 4, 7, 8, 9], 'node()');\r\n    NodeTest.anyPiTest = NodeTest.makeNodeTypeTest(NodeTest.PI, [7], 'processing-instruction()');\r\n\r\n    // VariableReference /////////////////////////////////////////////////////////\r\n\r\n    VariableReference.prototype = new Expression();\r\n    VariableReference.prototype.constructor = VariableReference;\r\n    VariableReference.superclass = Expression.prototype;\r\n\r\n    function VariableReference(v) {\r\n        if (arguments.length > 0) {\r\n            this.init(v);\r\n        }\r\n    }\r\n\r\n    VariableReference.prototype.init = function (v) {\r\n        this.variable = v;\r\n    };\r\n\r\n    VariableReference.prototype.toString = function () {\r\n        return \"$\" + this.variable;\r\n    };\r\n\r\n    VariableReference.prototype.evaluate = function (c) {\r\n        var parts = Utilities.resolveQName(this.variable, c.namespaceResolver, c.contextNode, false);\r\n\r\n        if (parts[0] == null) {\r\n            throw new Error(\"Cannot resolve QName \" + fn);\r\n        }\r\n        var result = c.variableResolver.getVariable(parts[1], parts[0]);\r\n        if (!result) {\r\n            throw XPathException.fromMessage(\"Undeclared variable: \" + this.toString());\r\n        }\r\n        return result;\r\n    };\r\n\r\n    // FunctionCall //////////////////////////////////////////////////////////////\r\n\r\n    FunctionCall.prototype = new Expression();\r\n    FunctionCall.prototype.constructor = FunctionCall;\r\n    FunctionCall.superclass = Expression.prototype;\r\n\r\n    function FunctionCall(fn, args) {\r\n        if (arguments.length > 0) {\r\n            this.init(fn, args);\r\n        }\r\n    }\r\n\r\n    FunctionCall.prototype.init = function (fn, args) {\r\n        this.functionName = fn;\r\n        this.arguments = args;\r\n    };\r\n\r\n    FunctionCall.prototype.toString = function () {\r\n        var s = this.functionName + \"(\";\r\n        for (var i = 0; i < this.arguments.length; i++) {\r\n            if (i > 0) {\r\n                s += \", \";\r\n            }\r\n            s += this.arguments[i].toString();\r\n        }\r\n        return s + \")\";\r\n    };\r\n\r\n    FunctionCall.prototype.evaluate = function (c) {\r\n        var f = FunctionResolver.getFunctionFromContext(this.functionName, c);\r\n\r\n        if (!f) {\r\n            throw new Error(\"Unknown function \" + this.functionName);\r\n        }\r\n\r\n        var a = [c].concat(this.arguments);\r\n        return f.apply(c.functionResolver.thisArg, a);\r\n    };\r\n\r\n    // Operators /////////////////////////////////////////////////////////////////\r\n\r\n    var Operators = new Object();\r\n\r\n    Operators.equals = function (l, r) {\r\n        return l.equals(r);\r\n    };\r\n\r\n    Operators.notequal = function (l, r) {\r\n        return l.notequal(r);\r\n    };\r\n\r\n    Operators.lessthan = function (l, r) {\r\n        return l.lessthan(r);\r\n    };\r\n\r\n    Operators.greaterthan = function (l, r) {\r\n        return l.greaterthan(r);\r\n    };\r\n\r\n    Operators.lessthanorequal = function (l, r) {\r\n        return l.lessthanorequal(r);\r\n    };\r\n\r\n    Operators.greaterthanorequal = function (l, r) {\r\n        return l.greaterthanorequal(r);\r\n    };\r\n\r\n    // XString ///////////////////////////////////////////////////////////////////\r\n\r\n    XString.prototype = new Expression();\r\n    XString.prototype.constructor = XString;\r\n    XString.superclass = Expression.prototype;\r\n\r\n    function XString(s) {\r\n        if (arguments.length > 0) {\r\n            this.init(s);\r\n        }\r\n    }\r\n\r\n    XString.prototype.init = function (s) {\r\n        this.str = String(s);\r\n    };\r\n\r\n    XString.prototype.toString = function () {\r\n        return this.str;\r\n    };\r\n\r\n    XString.prototype.evaluate = function (c) {\r\n        return this;\r\n    };\r\n\r\n    XString.prototype.string = function () {\r\n        return this;\r\n    };\r\n\r\n    XString.prototype.number = function () {\r\n        return new XNumber(this.str);\r\n    };\r\n\r\n    XString.prototype.bool = function () {\r\n        return new XBoolean(this.str);\r\n    };\r\n\r\n    XString.prototype.nodeset = function () {\r\n        throw new Error(\"Cannot convert string to nodeset\");\r\n    };\r\n\r\n    XString.prototype.stringValue = function () {\r\n        return this.str;\r\n    };\r\n\r\n    XString.prototype.numberValue = function () {\r\n        return this.number().numberValue();\r\n    };\r\n\r\n    XString.prototype.booleanValue = function () {\r\n        return this.bool().booleanValue();\r\n    };\r\n\r\n    XString.prototype.equals = function (r) {\r\n        if (Utilities.instance_of(r, XBoolean)) {\r\n            return this.bool().equals(r);\r\n        }\r\n        if (Utilities.instance_of(r, XNumber)) {\r\n            return this.number().equals(r);\r\n        }\r\n        if (Utilities.instance_of(r, XNodeSet)) {\r\n            return r.compareWithString(this, Operators.equals);\r\n        }\r\n        return new XBoolean(this.str == r.str);\r\n    };\r\n\r\n    XString.prototype.notequal = function (r) {\r\n        if (Utilities.instance_of(r, XBoolean)) {\r\n            return this.bool().notequal(r);\r\n        }\r\n        if (Utilities.instance_of(r, XNumber)) {\r\n            return this.number().notequal(r);\r\n        }\r\n        if (Utilities.instance_of(r, XNodeSet)) {\r\n            return r.compareWithString(this, Operators.notequal);\r\n        }\r\n        return new XBoolean(this.str != r.str);\r\n    };\r\n\r\n    XString.prototype.lessthan = function (r) {\r\n        return this.number().lessthan(r);\r\n    };\r\n\r\n    XString.prototype.greaterthan = function (r) {\r\n        return this.number().greaterthan(r);\r\n    };\r\n\r\n    XString.prototype.lessthanorequal = function (r) {\r\n        return this.number().lessthanorequal(r);\r\n    };\r\n\r\n    XString.prototype.greaterthanorequal = function (r) {\r\n        return this.number().greaterthanorequal(r);\r\n    };\r\n\r\n    // XNumber ///////////////////////////////////////////////////////////////////\r\n\r\n    XNumber.prototype = new Expression();\r\n    XNumber.prototype.constructor = XNumber;\r\n    XNumber.superclass = Expression.prototype;\r\n\r\n    function XNumber(n) {\r\n        if (arguments.length > 0) {\r\n            this.init(n);\r\n        }\r\n    }\r\n\r\n    XNumber.prototype.init = function (n) {\r\n        this.num = typeof n === \"string\" ? this.parse(n) : Number(n);\r\n    };\r\n\r\n    XNumber.prototype.numberFormat = /^\\s*-?[0-9]*\\.?[0-9]+\\s*$/;\r\n\r\n    XNumber.prototype.parse = function (s) {\r\n        // XPath representation of numbers is more restrictive than what Number() or parseFloat() allow\r\n        return this.numberFormat.test(s) ? parseFloat(s) : Number.NaN;\r\n    };\r\n\r\n    function padSmallNumber(numberStr) {\r\n        var parts = numberStr.split('e-');\r\n        var base = parts[0].replace('.', '');\r\n        var exponent = Number(parts[1]);\r\n\r\n        for (var i = 0; i < exponent - 1; i += 1) {\r\n            base = '0' + base;\r\n        }\r\n\r\n        return '0.' + base;\r\n    }\r\n\r\n    function padLargeNumber(numberStr) {\r\n        var parts = numberStr.split('e');\r\n        var base = parts[0].replace('.', '');\r\n        var exponent = Number(parts[1]);\r\n        var zerosToAppend = exponent + 1 - base.length;\r\n\r\n        for (var i = 0; i < zerosToAppend; i += 1) {\r\n            base += '0';\r\n        }\r\n\r\n        return base;\r\n    }\r\n\r\n    XNumber.prototype.toString = function () {\r\n        var strValue = this.num.toString();\r\n\r\n        if (strValue.indexOf('e-') !== -1) {\r\n            return padSmallNumber(strValue);\r\n        }\r\n\r\n        if (strValue.indexOf('e') !== -1) {\r\n            return padLargeNumber(strValue);\r\n        }\r\n\r\n        return strValue;\r\n    };\r\n\r\n    XNumber.prototype.evaluate = function (c) {\r\n        return this;\r\n    };\r\n\r\n    XNumber.prototype.string = function () {\r\n\r\n\r\n        return new XString(this.toString());\r\n    };\r\n\r\n    XNumber.prototype.number = function () {\r\n        return this;\r\n    };\r\n\r\n    XNumber.prototype.bool = function () {\r\n        return new XBoolean(this.num);\r\n    };\r\n\r\n    XNumber.prototype.nodeset = function () {\r\n        throw new Error(\"Cannot convert number to nodeset\");\r\n    };\r\n\r\n    XNumber.prototype.stringValue = function () {\r\n        return this.string().stringValue();\r\n    };\r\n\r\n    XNumber.prototype.numberValue = function () {\r\n        return this.num;\r\n    };\r\n\r\n    XNumber.prototype.booleanValue = function () {\r\n        return this.bool().booleanValue();\r\n    };\r\n\r\n    XNumber.prototype.negate = function () {\r\n        return new XNumber(-this.num);\r\n    };\r\n\r\n    XNumber.prototype.equals = function (r) {\r\n        if (Utilities.instance_of(r, XBoolean)) {\r\n            return this.bool().equals(r);\r\n        }\r\n        if (Utilities.instance_of(r, XString)) {\r\n            return this.equals(r.number());\r\n        }\r\n        if (Utilities.instance_of(r, XNodeSet)) {\r\n            return r.compareWithNumber(this, Operators.equals);\r\n        }\r\n        return new XBoolean(this.num == r.num);\r\n    };\r\n\r\n    XNumber.prototype.notequal = function (r) {\r\n        if (Utilities.instance_of(r, XBoolean)) {\r\n            return this.bool().notequal(r);\r\n        }\r\n        if (Utilities.instance_of(r, XString)) {\r\n            return this.notequal(r.number());\r\n        }\r\n        if (Utilities.instance_of(r, XNodeSet)) {\r\n            return r.compareWithNumber(this, Operators.notequal);\r\n        }\r\n        return new XBoolean(this.num != r.num);\r\n    };\r\n\r\n    XNumber.prototype.lessthan = function (r) {\r\n        if (Utilities.instance_of(r, XNodeSet)) {\r\n            return r.compareWithNumber(this, Operators.greaterthan);\r\n        }\r\n        if (Utilities.instance_of(r, XBoolean) || Utilities.instance_of(r, XString)) {\r\n            return this.lessthan(r.number());\r\n        }\r\n        return new XBoolean(this.num < r.num);\r\n    };\r\n\r\n    XNumber.prototype.greaterthan = function (r) {\r\n        if (Utilities.instance_of(r, XNodeSet)) {\r\n            return r.compareWithNumber(this, Operators.lessthan);\r\n        }\r\n        if (Utilities.instance_of(r, XBoolean) || Utilities.instance_of(r, XString)) {\r\n            return this.greaterthan(r.number());\r\n        }\r\n        return new XBoolean(this.num > r.num);\r\n    };\r\n\r\n    XNumber.prototype.lessthanorequal = function (r) {\r\n        if (Utilities.instance_of(r, XNodeSet)) {\r\n            return r.compareWithNumber(this, Operators.greaterthanorequal);\r\n        }\r\n        if (Utilities.instance_of(r, XBoolean) || Utilities.instance_of(r, XString)) {\r\n            return this.lessthanorequal(r.number());\r\n        }\r\n        return new XBoolean(this.num <= r.num);\r\n    };\r\n\r\n    XNumber.prototype.greaterthanorequal = function (r) {\r\n        if (Utilities.instance_of(r, XNodeSet)) {\r\n            return r.compareWithNumber(this, Operators.lessthanorequal);\r\n        }\r\n        if (Utilities.instance_of(r, XBoolean) || Utilities.instance_of(r, XString)) {\r\n            return this.greaterthanorequal(r.number());\r\n        }\r\n        return new XBoolean(this.num >= r.num);\r\n    };\r\n\r\n    XNumber.prototype.plus = function (r) {\r\n        return new XNumber(this.num + r.num);\r\n    };\r\n\r\n    XNumber.prototype.minus = function (r) {\r\n        return new XNumber(this.num - r.num);\r\n    };\r\n\r\n    XNumber.prototype.multiply = function (r) {\r\n        return new XNumber(this.num * r.num);\r\n    };\r\n\r\n    XNumber.prototype.div = function (r) {\r\n        return new XNumber(this.num / r.num);\r\n    };\r\n\r\n    XNumber.prototype.mod = function (r) {\r\n        return new XNumber(this.num % r.num);\r\n    };\r\n\r\n    // XBoolean //////////////////////////////////////////////////////////////////\r\n\r\n    XBoolean.prototype = new Expression();\r\n    XBoolean.prototype.constructor = XBoolean;\r\n    XBoolean.superclass = Expression.prototype;\r\n\r\n    function XBoolean(b) {\r\n        if (arguments.length > 0) {\r\n            this.init(b);\r\n        }\r\n    }\r\n\r\n    XBoolean.prototype.init = function (b) {\r\n        this.b = Boolean(b);\r\n    };\r\n\r\n    XBoolean.prototype.toString = function () {\r\n        return this.b.toString();\r\n    };\r\n\r\n    XBoolean.prototype.evaluate = function (c) {\r\n        return this;\r\n    };\r\n\r\n    XBoolean.prototype.string = function () {\r\n        return new XString(this.b);\r\n    };\r\n\r\n    XBoolean.prototype.number = function () {\r\n        return new XNumber(this.b);\r\n    };\r\n\r\n    XBoolean.prototype.bool = function () {\r\n        return this;\r\n    };\r\n\r\n    XBoolean.prototype.nodeset = function () {\r\n        throw new Error(\"Cannot convert boolean to nodeset\");\r\n    };\r\n\r\n    XBoolean.prototype.stringValue = function () {\r\n        return this.string().stringValue();\r\n    };\r\n\r\n    XBoolean.prototype.numberValue = function () {\r\n        return this.number().numberValue();\r\n    };\r\n\r\n    XBoolean.prototype.booleanValue = function () {\r\n        return this.b;\r\n    };\r\n\r\n    XBoolean.prototype.not = function () {\r\n        return new XBoolean(!this.b);\r\n    };\r\n\r\n    XBoolean.prototype.equals = function (r) {\r\n        if (Utilities.instance_of(r, XString) || Utilities.instance_of(r, XNumber)) {\r\n            return this.equals(r.bool());\r\n        }\r\n        if (Utilities.instance_of(r, XNodeSet)) {\r\n            return r.compareWithBoolean(this, Operators.equals);\r\n        }\r\n        return new XBoolean(this.b == r.b);\r\n    };\r\n\r\n    XBoolean.prototype.notequal = function (r) {\r\n        if (Utilities.instance_of(r, XString) || Utilities.instance_of(r, XNumber)) {\r\n            return this.notequal(r.bool());\r\n        }\r\n        if (Utilities.instance_of(r, XNodeSet)) {\r\n            return r.compareWithBoolean(this, Operators.notequal);\r\n        }\r\n        return new XBoolean(this.b != r.b);\r\n    };\r\n\r\n    XBoolean.prototype.lessthan = function (r) {\r\n        return this.number().lessthan(r);\r\n    };\r\n\r\n    XBoolean.prototype.greaterthan = function (r) {\r\n        return this.number().greaterthan(r);\r\n    };\r\n\r\n    XBoolean.prototype.lessthanorequal = function (r) {\r\n        return this.number().lessthanorequal(r);\r\n    };\r\n\r\n    XBoolean.prototype.greaterthanorequal = function (r) {\r\n        return this.number().greaterthanorequal(r);\r\n    };\r\n\r\n    XBoolean.true_ = new XBoolean(true);\r\n    XBoolean.false_ = new XBoolean(false);\r\n\r\n    // AVLTree ///////////////////////////////////////////////////////////////////\r\n\r\n    AVLTree.prototype = new Object();\r\n    AVLTree.prototype.constructor = AVLTree;\r\n    AVLTree.superclass = Object.prototype;\r\n\r\n    function AVLTree(n) {\r\n        this.init(n);\r\n    }\r\n\r\n    AVLTree.prototype.init = function (n) {\r\n        this.left = null;\r\n        this.right = null;\r\n        this.node = n;\r\n        this.depth = 1;\r\n    };\r\n\r\n    AVLTree.prototype.balance = function () {\r\n        var ldepth = this.left == null ? 0 : this.left.depth;\r\n        var rdepth = this.right == null ? 0 : this.right.depth;\r\n\r\n        if (ldepth > rdepth + 1) {\r\n            // LR or LL rotation\r\n            var lldepth = this.left.left == null ? 0 : this.left.left.depth;\r\n            var lrdepth = this.left.right == null ? 0 : this.left.right.depth;\r\n\r\n            if (lldepth < lrdepth) {\r\n                // LR rotation consists of a RR rotation of the left child\r\n                this.left.rotateRR();\r\n                // plus a LL rotation of this node, which happens anyway\r\n            }\r\n            this.rotateLL();\r\n        } else if (ldepth + 1 < rdepth) {\r\n            // RR or RL rorarion\r\n            var rrdepth = this.right.right == null ? 0 : this.right.right.depth;\r\n            var rldepth = this.right.left == null ? 0 : this.right.left.depth;\r\n\r\n            if (rldepth > rrdepth) {\r\n                // RR rotation consists of a LL rotation of the right child\r\n                this.right.rotateLL();\r\n                // plus a RR rotation of this node, which happens anyway\r\n            }\r\n            this.rotateRR();\r\n        }\r\n    };\r\n\r\n    AVLTree.prototype.rotateLL = function () {\r\n        // the left side is too long => rotate from the left (_not_ leftwards)\r\n        var nodeBefore = this.node;\r\n        var rightBefore = this.right;\r\n        this.node = this.left.node;\r\n        this.right = this.left;\r\n        this.left = this.left.left;\r\n        this.right.left = this.right.right;\r\n        this.right.right = rightBefore;\r\n        this.right.node = nodeBefore;\r\n        this.right.updateInNewLocation();\r\n        this.updateInNewLocation();\r\n    };\r\n\r\n    AVLTree.prototype.rotateRR = function () {\r\n        // the right side is too long => rotate from the right (_not_ rightwards)\r\n        var nodeBefore = this.node;\r\n        var leftBefore = this.left;\r\n        this.node = this.right.node;\r\n        this.left = this.right;\r\n        this.right = this.right.right;\r\n        this.left.right = this.left.left;\r\n        this.left.left = leftBefore;\r\n        this.left.node = nodeBefore;\r\n        this.left.updateInNewLocation();\r\n        this.updateInNewLocation();\r\n    };\r\n\r\n    AVLTree.prototype.updateInNewLocation = function () {\r\n        this.getDepthFromChildren();\r\n    };\r\n\r\n    AVLTree.prototype.getDepthFromChildren = function () {\r\n        this.depth = this.node == null ? 0 : 1;\r\n        if (this.left != null) {\r\n            this.depth = this.left.depth + 1;\r\n        }\r\n        if (this.right != null && this.depth <= this.right.depth) {\r\n            this.depth = this.right.depth + 1;\r\n        }\r\n    };\r\n\r\n    function nodeOrder(n1, n2) {\r\n        if (n1 === n2) {\r\n            return 0;\r\n        }\r\n\r\n        if (n1.compareDocumentPosition) {\r\n            var cpos = n1.compareDocumentPosition(n2);\r\n\r\n            if (cpos & 0x01) {\r\n                // not in the same document; return an arbitrary result (is there a better way to do this)\r\n                return 1;\r\n            }\r\n            if (cpos & 0x0A) {\r\n                // n2 precedes or contains n1\r\n                return 1;\r\n            }\r\n            if (cpos & 0x14) {\r\n                // n2 follows or is contained by n1\r\n                return -1;\r\n            }\r\n\r\n            return 0;\r\n        }\r\n\r\n        var d1 = 0,\r\n            d2 = 0;\r\n        for (var m1 = n1; m1 != null; m1 = m1.parentNode || m1.ownerElement) {\r\n            d1++;\r\n        }\r\n        for (var m2 = n2; m2 != null; m2 = m2.parentNode || m2.ownerElement) {\r\n            d2++;\r\n        }\r\n\r\n        // step up to same depth\r\n        if (d1 > d2) {\r\n            while (d1 > d2) {\r\n                n1 = n1.parentNode || n1.ownerElement;\r\n                d1--;\r\n            }\r\n            if (n1 === n2) {\r\n                return 1;\r\n            }\r\n        } else if (d2 > d1) {\r\n            while (d2 > d1) {\r\n                n2 = n2.parentNode || n2.ownerElement;\r\n                d2--;\r\n            }\r\n            if (n1 === n2) {\r\n                return -1;\r\n            }\r\n        }\r\n\r\n        var n1Par = n1.parentNode || n1.ownerElement,\r\n            n2Par = n2.parentNode || n2.ownerElement;\r\n\r\n        // find common parent\r\n        while (n1Par !== n2Par) {\r\n            n1 = n1Par;\r\n            n2 = n2Par;\r\n            n1Par = n1.parentNode || n1.ownerElement;\r\n            n2Par = n2.parentNode || n2.ownerElement;\r\n        }\r\n\r\n        var n1isAttr = Utilities.isAttribute(n1);\r\n        var n2isAttr = Utilities.isAttribute(n2);\r\n\r\n        if (n1isAttr && !n2isAttr) {\r\n            return -1;\r\n        }\r\n        if (!n1isAttr && n2isAttr) {\r\n            return 1;\r\n        }\r\n\r\n        if (n1Par) {\r\n            var cn = n1isAttr ? n1Par.attributes : n1Par.childNodes,\r\n                len = cn.length;\r\n            for (var i = 0; i < len; i += 1) {\r\n                var n = cn[i];\r\n                if (n === n1) {\r\n                    return -1;\r\n                }\r\n                if (n === n2) {\r\n                    return 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        throw new Error('Unexpected: could not determine node order');\r\n    }\r\n\r\n    AVLTree.prototype.add = function (n) {\r\n        if (n === this.node) {\r\n            return false;\r\n        }\r\n\r\n        var o = nodeOrder(n, this.node);\r\n\r\n        var ret = false;\r\n        if (o == -1) {\r\n            if (this.left == null) {\r\n                this.left = new AVLTree(n);\r\n                ret = true;\r\n            } else {\r\n                ret = this.left.add(n);\r\n                if (ret) {\r\n                    this.balance();\r\n                }\r\n            }\r\n        } else if (o == 1) {\r\n            if (this.right == null) {\r\n                this.right = new AVLTree(n);\r\n                ret = true;\r\n            } else {\r\n                ret = this.right.add(n);\r\n                if (ret) {\r\n                    this.balance();\r\n                }\r\n            }\r\n        }\r\n\r\n        if (ret) {\r\n            this.getDepthFromChildren();\r\n        }\r\n        return ret;\r\n    };\r\n\r\n    // XNodeSet //////////////////////////////////////////////////////////////////\r\n\r\n    XNodeSet.prototype = new Expression();\r\n    XNodeSet.prototype.constructor = XNodeSet;\r\n    XNodeSet.superclass = Expression.prototype;\r\n\r\n    function XNodeSet() {\r\n        this.init();\r\n    }\r\n\r\n    XNodeSet.prototype.init = function () {\r\n        this.tree = null;\r\n        this.nodes = [];\r\n        this.size = 0;\r\n    };\r\n\r\n    XNodeSet.prototype.toString = function () {\r\n        var p = this.first();\r\n        if (p == null) {\r\n            return \"\";\r\n        }\r\n        return this.stringForNode(p);\r\n    };\r\n\r\n    XNodeSet.prototype.evaluate = function (c) {\r\n        return this;\r\n    };\r\n\r\n    XNodeSet.prototype.string = function () {\r\n        return new XString(this.toString());\r\n    };\r\n\r\n    XNodeSet.prototype.stringValue = function () {\r\n        return this.toString();\r\n    };\r\n\r\n    XNodeSet.prototype.number = function () {\r\n        return new XNumber(this.string());\r\n    };\r\n\r\n    XNodeSet.prototype.numberValue = function () {\r\n        return Number(this.string());\r\n    };\r\n\r\n    XNodeSet.prototype.bool = function () {\r\n        return new XBoolean(this.booleanValue());\r\n    };\r\n\r\n    XNodeSet.prototype.booleanValue = function () {\r\n        return !!this.size;\r\n    };\r\n\r\n    XNodeSet.prototype.nodeset = function () {\r\n        return this;\r\n    };\r\n\r\n    XNodeSet.prototype.stringForNode = function (n) {\r\n        if (n.nodeType == 9   /*Node.DOCUMENT_NODE*/ ||\r\n            n.nodeType == 1   /*Node.ELEMENT_NODE */ ||\r\n            n.nodeType === 11 /*Node.DOCUMENT_FRAGMENT*/) {\r\n            return this.stringForContainerNode(n);\r\n        }\r\n        if (n.nodeType === 2 /* Node.ATTRIBUTE_NODE */) {\r\n            return n.value || n.nodeValue;\r\n        }\r\n        if (n.isNamespaceNode) {\r\n            return n.namespace;\r\n        }\r\n        return n.nodeValue;\r\n    };\r\n\r\n    XNodeSet.prototype.stringForContainerNode = function (n) {\r\n        var s = \"\";\r\n        for (var n2 = n.firstChild; n2 != null; n2 = n2.nextSibling) {\r\n            var nt = n2.nodeType;\r\n            //  Element,    Text,       CDATA,      Document,   Document Fragment\r\n            if (nt === 1 || nt === 3 || nt === 4 || nt === 9 || nt === 11) {\r\n                s += this.stringForNode(n2);\r\n            }\r\n        }\r\n        return s;\r\n    };\r\n\r\n    XNodeSet.prototype.buildTree = function () {\r\n        if (!this.tree && this.nodes.length) {\r\n            this.tree = new AVLTree(this.nodes[0]);\r\n            for (var i = 1; i < this.nodes.length; i += 1) {\r\n                this.tree.add(this.nodes[i]);\r\n            }\r\n        }\r\n\r\n        return this.tree;\r\n    };\r\n\r\n    XNodeSet.prototype.first = function () {\r\n        var p = this.buildTree();\r\n        if (p == null) {\r\n            return null;\r\n        }\r\n        while (p.left != null) {\r\n            p = p.left;\r\n        }\r\n        return p.node;\r\n    };\r\n\r\n    XNodeSet.prototype.add = function (n) {\r\n        for (var i = 0; i < this.nodes.length; i += 1) {\r\n            if (n === this.nodes[i]) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.tree = null;\r\n        this.nodes.push(n);\r\n        this.size += 1;\r\n    };\r\n\r\n    XNodeSet.prototype.addArray = function (ns) {\r\n        var self = this;\r\n\r\n        forEach(function (x) { self.add(x); }, ns);\r\n    };\r\n\r\n    /**\r\n     * Returns an array of the node set's contents in document order\r\n     */\r\n    XNodeSet.prototype.toArray = function () {\r\n        var a = [];\r\n        this.toArrayRec(this.buildTree(), a);\r\n        return a;\r\n    };\r\n\r\n    XNodeSet.prototype.toArrayRec = function (t, a) {\r\n        if (t != null) {\r\n            this.toArrayRec(t.left, a);\r\n            a.push(t.node);\r\n            this.toArrayRec(t.right, a);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Returns an array of the node set's contents in arbitrary order\r\n     */\r\n    XNodeSet.prototype.toUnsortedArray = function () {\r\n        return this.nodes.slice();\r\n    };\r\n\r\n    XNodeSet.prototype.compareWithString = function (r, o) {\r\n        var a = this.toUnsortedArray();\r\n        for (var i = 0; i < a.length; i++) {\r\n            var n = a[i];\r\n            var l = new XString(this.stringForNode(n));\r\n            var res = o(l, r);\r\n            if (res.booleanValue()) {\r\n                return res;\r\n            }\r\n        }\r\n        return new XBoolean(false);\r\n    };\r\n\r\n    XNodeSet.prototype.compareWithNumber = function (r, o) {\r\n        var a = this.toUnsortedArray();\r\n        for (var i = 0; i < a.length; i++) {\r\n            var n = a[i];\r\n            var l = new XNumber(this.stringForNode(n));\r\n            var res = o(l, r);\r\n            if (res.booleanValue()) {\r\n                return res;\r\n            }\r\n        }\r\n        return new XBoolean(false);\r\n    };\r\n\r\n    XNodeSet.prototype.compareWithBoolean = function (r, o) {\r\n        return o(this.bool(), r);\r\n    };\r\n\r\n    XNodeSet.prototype.compareWithNodeSet = function (r, o) {\r\n        var arr = this.toUnsortedArray();\r\n        var oInvert = function (lop, rop) { return o(rop, lop); };\r\n\r\n        for (var i = 0; i < arr.length; i++) {\r\n            var l = new XString(this.stringForNode(arr[i]));\r\n\r\n            var res = r.compareWithString(l, oInvert);\r\n            if (res.booleanValue()) {\r\n                return res;\r\n            }\r\n        }\r\n\r\n        return new XBoolean(false);\r\n    };\r\n\r\n    XNodeSet.compareWith = curry(function (o, r) {\r\n        if (Utilities.instance_of(r, XString)) {\r\n            return this.compareWithString(r, o);\r\n        }\r\n        if (Utilities.instance_of(r, XNumber)) {\r\n            return this.compareWithNumber(r, o);\r\n        }\r\n        if (Utilities.instance_of(r, XBoolean)) {\r\n            return this.compareWithBoolean(r, o);\r\n        }\r\n        return this.compareWithNodeSet(r, o);\r\n    });\r\n\r\n    XNodeSet.prototype.equals = XNodeSet.compareWith(Operators.equals);\r\n    XNodeSet.prototype.notequal = XNodeSet.compareWith(Operators.notequal);\r\n    XNodeSet.prototype.lessthan = XNodeSet.compareWith(Operators.lessthan);\r\n    XNodeSet.prototype.greaterthan = XNodeSet.compareWith(Operators.greaterthan);\r\n    XNodeSet.prototype.lessthanorequal = XNodeSet.compareWith(Operators.lessthanorequal);\r\n    XNodeSet.prototype.greaterthanorequal = XNodeSet.compareWith(Operators.greaterthanorequal);\r\n\r\n    XNodeSet.prototype.union = function (r) {\r\n        var ns = new XNodeSet();\r\n        ns.addArray(this.toUnsortedArray());\r\n        ns.addArray(r.toUnsortedArray());\r\n        return ns;\r\n    };\r\n\r\n    // XPathNamespace ////////////////////////////////////////////////////////////\r\n\r\n    XPathNamespace.prototype = new Object();\r\n    XPathNamespace.prototype.constructor = XPathNamespace;\r\n    XPathNamespace.superclass = Object.prototype;\r\n\r\n    function XPathNamespace(pre, ns, p) {\r\n        this.isXPathNamespace = true;\r\n        this.ownerDocument = p.ownerDocument;\r\n        this.nodeName = \"#namespace\";\r\n        this.prefix = pre;\r\n        this.localName = pre;\r\n        this.namespaceURI = ns;\r\n        this.nodeValue = ns;\r\n        this.ownerElement = p;\r\n        this.nodeType = XPathNamespace.XPATH_NAMESPACE_NODE;\r\n    }\r\n\r\n    XPathNamespace.prototype.toString = function () {\r\n        return \"{ \\\"\" + this.prefix + \"\\\", \\\"\" + this.namespaceURI + \"\\\" }\";\r\n    };\r\n\r\n    // XPathContext //////////////////////////////////////////////////////////////\r\n\r\n    XPathContext.prototype = new Object();\r\n    XPathContext.prototype.constructor = XPathContext;\r\n    XPathContext.superclass = Object.prototype;\r\n\r\n    function XPathContext(vr, nr, fr) {\r\n        this.variableResolver = vr != null ? vr : new VariableResolver();\r\n        this.namespaceResolver = nr != null ? nr : new NamespaceResolver();\r\n        this.functionResolver = fr != null ? fr : new FunctionResolver();\r\n    }\r\n\r\n    XPathContext.prototype.extend = function (newProps) {\r\n        return assign(new XPathContext(), this, newProps);\r\n    };\r\n\r\n    // VariableResolver //////////////////////////////////////////////////////////\r\n\r\n    VariableResolver.prototype = new Object();\r\n    VariableResolver.prototype.constructor = VariableResolver;\r\n    VariableResolver.superclass = Object.prototype;\r\n\r\n    function VariableResolver() {\r\n    }\r\n\r\n    VariableResolver.prototype.getVariable = function (ln, ns) {\r\n        return null;\r\n    };\r\n\r\n    // FunctionResolver //////////////////////////////////////////////////////////\r\n\r\n    FunctionResolver.prototype = new Object();\r\n    FunctionResolver.prototype.constructor = FunctionResolver;\r\n    FunctionResolver.superclass = Object.prototype;\r\n\r\n    function FunctionResolver(thisArg) {\r\n        this.thisArg = thisArg != null ? thisArg : Functions;\r\n        this.functions = new Object();\r\n        this.addStandardFunctions();\r\n    }\r\n\r\n    FunctionResolver.prototype.addStandardFunctions = function () {\r\n        this.functions[\"{}last\"] = Functions.last;\r\n        this.functions[\"{}position\"] = Functions.position;\r\n        this.functions[\"{}count\"] = Functions.count;\r\n        this.functions[\"{}id\"] = Functions.id;\r\n        this.functions[\"{}local-name\"] = Functions.localName;\r\n        this.functions[\"{}namespace-uri\"] = Functions.namespaceURI;\r\n        this.functions[\"{}name\"] = Functions.name;\r\n        this.functions[\"{}string\"] = Functions.string;\r\n        this.functions[\"{}concat\"] = Functions.concat;\r\n        this.functions[\"{}starts-with\"] = Functions.startsWith;\r\n        this.functions[\"{}contains\"] = Functions.contains;\r\n        this.functions[\"{}substring-before\"] = Functions.substringBefore;\r\n        this.functions[\"{}substring-after\"] = Functions.substringAfter;\r\n        this.functions[\"{}substring\"] = Functions.substring;\r\n        this.functions[\"{}string-length\"] = Functions.stringLength;\r\n        this.functions[\"{}normalize-space\"] = Functions.normalizeSpace;\r\n        this.functions[\"{}translate\"] = Functions.translate;\r\n        this.functions[\"{}boolean\"] = Functions.boolean_;\r\n        this.functions[\"{}not\"] = Functions.not;\r\n        this.functions[\"{}true\"] = Functions.true_;\r\n        this.functions[\"{}false\"] = Functions.false_;\r\n        this.functions[\"{}lang\"] = Functions.lang;\r\n        this.functions[\"{}number\"] = Functions.number;\r\n        this.functions[\"{}sum\"] = Functions.sum;\r\n        this.functions[\"{}floor\"] = Functions.floor;\r\n        this.functions[\"{}ceiling\"] = Functions.ceiling;\r\n        this.functions[\"{}round\"] = Functions.round;\r\n    };\r\n\r\n    FunctionResolver.prototype.addFunction = function (ns, ln, f) {\r\n        this.functions[\"{\" + ns + \"}\" + ln] = f;\r\n    };\r\n\r\n    FunctionResolver.getFunctionFromContext = function (qName, context) {\r\n        var parts = Utilities.resolveQName(qName, context.namespaceResolver, context.contextNode, false);\r\n\r\n        if (parts[0] === null) {\r\n            throw new Error(\"Cannot resolve QName \" + name);\r\n        }\r\n\r\n        return context.functionResolver.getFunction(parts[1], parts[0]);\r\n    };\r\n\r\n    FunctionResolver.prototype.getFunction = function (localName, namespace) {\r\n        return this.functions[\"{\" + namespace + \"}\" + localName];\r\n    };\r\n\r\n    // NamespaceResolver /////////////////////////////////////////////////////////\r\n\r\n    NamespaceResolver.prototype = new Object();\r\n    NamespaceResolver.prototype.constructor = NamespaceResolver;\r\n    NamespaceResolver.superclass = Object.prototype;\r\n\r\n    function NamespaceResolver() {\r\n    }\r\n\r\n    NamespaceResolver.prototype.getNamespace = function (prefix, n) {\r\n        if (prefix == \"xml\") {\r\n            return XPath.XML_NAMESPACE_URI;\r\n        } else if (prefix == \"xmlns\") {\r\n            return XPath.XMLNS_NAMESPACE_URI;\r\n        }\r\n        if (n.nodeType == 9 /*Node.DOCUMENT_NODE*/) {\r\n            n = n.documentElement;\r\n        } else if (n.nodeType == 2 /*Node.ATTRIBUTE_NODE*/) {\r\n            n = PathExpr.getOwnerElement(n);\r\n        } else if (n.nodeType != 1 /*Node.ELEMENT_NODE*/) {\r\n            n = n.parentNode;\r\n        }\r\n        while (n != null && n.nodeType == 1 /*Node.ELEMENT_NODE*/) {\r\n            var nnm = n.attributes;\r\n            for (var i = 0; i < nnm.length; i++) {\r\n                var a = nnm.item(i);\r\n                var aname = a.name || a.nodeName;\r\n                if ((aname === \"xmlns\" && prefix === \"\")\r\n                    || aname === \"xmlns:\" + prefix) {\r\n                    return String(a.value || a.nodeValue);\r\n                }\r\n            }\r\n            n = n.parentNode;\r\n        }\r\n        return null;\r\n    };\r\n\r\n    // Functions /////////////////////////////////////////////////////////////////\r\n\r\n    var Functions = new Object();\r\n\r\n    Functions.last = function (c) {\r\n        if (arguments.length != 1) {\r\n            throw new Error(\"Function last expects ()\");\r\n        }\r\n\r\n        return new XNumber(c.contextSize);\r\n    };\r\n\r\n    Functions.position = function (c) {\r\n        if (arguments.length != 1) {\r\n            throw new Error(\"Function position expects ()\");\r\n        }\r\n\r\n        return new XNumber(c.contextPosition);\r\n    };\r\n\r\n    Functions.count = function () {\r\n        var c = arguments[0];\r\n        var ns;\r\n        if (arguments.length != 2 || !Utilities.instance_of(ns = arguments[1].evaluate(c), XNodeSet)) {\r\n            throw new Error(\"Function count expects (node-set)\");\r\n        }\r\n        return new XNumber(ns.size);\r\n    };\r\n\r\n    Functions.id = function () {\r\n        var c = arguments[0];\r\n        var id;\r\n        if (arguments.length != 2) {\r\n            throw new Error(\"Function id expects (object)\");\r\n        }\r\n        id = arguments[1].evaluate(c);\r\n        if (Utilities.instance_of(id, XNodeSet)) {\r\n            id = id.toArray().join(\" \");\r\n        } else {\r\n            id = id.stringValue();\r\n        }\r\n        var ids = id.split(/[\\x0d\\x0a\\x09\\x20]+/);\r\n        var count = 0;\r\n        var ns = new XNodeSet();\r\n        var doc = c.contextNode.nodeType == 9 /*Node.DOCUMENT_NODE*/\r\n            ? c.contextNode\r\n            : c.contextNode.ownerDocument;\r\n        for (var i = 0; i < ids.length; i++) {\r\n            var n;\r\n            if (doc.getElementById) {\r\n                n = doc.getElementById(ids[i]);\r\n            } else {\r\n                n = Utilities.getElementById(doc, ids[i]);\r\n            }\r\n            if (n != null) {\r\n                ns.add(n);\r\n                count++;\r\n            }\r\n        }\r\n        return ns;\r\n    };\r\n\r\n    Functions.localName = function (c, eNode) {\r\n        var n;\r\n\r\n        if (arguments.length == 1) {\r\n            n = c.contextNode;\r\n        } else if (arguments.length == 2) {\r\n            n = eNode.evaluate(c).first();\r\n        } else {\r\n            throw new Error(\"Function local-name expects (node-set?)\");\r\n        }\r\n\r\n        if (n == null) {\r\n            return new XString(\"\");\r\n        }\r\n\r\n        return new XString(\r\n            n.localName ||     //  standard elements and attributes\r\n            n.baseName ||     //  IE\r\n            n.target ||     //  processing instructions\r\n            n.nodeName ||     //  DOM1 elements\r\n            \"\"                 //  fallback\r\n        );\r\n    };\r\n\r\n    Functions.namespaceURI = function () {\r\n        var c = arguments[0];\r\n        var n;\r\n        if (arguments.length == 1) {\r\n            n = c.contextNode;\r\n        } else if (arguments.length == 2) {\r\n            n = arguments[1].evaluate(c).first();\r\n        } else {\r\n            throw new Error(\"Function namespace-uri expects (node-set?)\");\r\n        }\r\n        if (n == null) {\r\n            return new XString(\"\");\r\n        }\r\n        return new XString(n.namespaceURI);\r\n    };\r\n\r\n    Functions.name = function () {\r\n        var c = arguments[0];\r\n        var n;\r\n        if (arguments.length == 1) {\r\n            n = c.contextNode;\r\n        } else if (arguments.length == 2) {\r\n            n = arguments[1].evaluate(c).first();\r\n        } else {\r\n            throw new Error(\"Function name expects (node-set?)\");\r\n        }\r\n        if (n == null) {\r\n            return new XString(\"\");\r\n        }\r\n        if (n.nodeType == 1 /*Node.ELEMENT_NODE*/) {\r\n            return new XString(n.nodeName);\r\n        } else if (n.nodeType == 2 /*Node.ATTRIBUTE_NODE*/) {\r\n            return new XString(n.name || n.nodeName);\r\n        } else if (n.nodeType === 7 /*Node.PROCESSING_INSTRUCTION_NODE*/) {\r\n            return new XString(n.target || n.nodeName);\r\n        } else if (n.localName == null) {\r\n            return new XString(\"\");\r\n        } else {\r\n            return new XString(n.localName);\r\n        }\r\n    };\r\n\r\n    Functions.string = function () {\r\n        var c = arguments[0];\r\n        if (arguments.length == 1) {\r\n            return new XString(XNodeSet.prototype.stringForNode(c.contextNode));\r\n        } else if (arguments.length == 2) {\r\n            return arguments[1].evaluate(c).string();\r\n        }\r\n        throw new Error(\"Function string expects (object?)\");\r\n    };\r\n\r\n    Functions.concat = function (c) {\r\n        if (arguments.length < 3) {\r\n            throw new Error(\"Function concat expects (string, string[, string]*)\");\r\n        }\r\n        var s = \"\";\r\n        for (var i = 1; i < arguments.length; i++) {\r\n            s += arguments[i].evaluate(c).stringValue();\r\n        }\r\n        return new XString(s);\r\n    };\r\n\r\n    Functions.startsWith = function () {\r\n        var c = arguments[0];\r\n        if (arguments.length != 3) {\r\n            throw new Error(\"Function startsWith expects (string, string)\");\r\n        }\r\n        var s1 = arguments[1].evaluate(c).stringValue();\r\n        var s2 = arguments[2].evaluate(c).stringValue();\r\n        return new XBoolean(s1.substring(0, s2.length) == s2);\r\n    };\r\n\r\n    Functions.contains = function () {\r\n        var c = arguments[0];\r\n        if (arguments.length != 3) {\r\n            throw new Error(\"Function contains expects (string, string)\");\r\n        }\r\n        var s1 = arguments[1].evaluate(c).stringValue();\r\n        var s2 = arguments[2].evaluate(c).stringValue();\r\n        return new XBoolean(s1.indexOf(s2) !== -1);\r\n    };\r\n\r\n    Functions.substringBefore = function () {\r\n        var c = arguments[0];\r\n        if (arguments.length != 3) {\r\n            throw new Error(\"Function substring-before expects (string, string)\");\r\n        }\r\n        var s1 = arguments[1].evaluate(c).stringValue();\r\n        var s2 = arguments[2].evaluate(c).stringValue();\r\n        return new XString(s1.substring(0, s1.indexOf(s2)));\r\n    };\r\n\r\n    Functions.substringAfter = function () {\r\n        var c = arguments[0];\r\n        if (arguments.length != 3) {\r\n            throw new Error(\"Function substring-after expects (string, string)\");\r\n        }\r\n        var s1 = arguments[1].evaluate(c).stringValue();\r\n        var s2 = arguments[2].evaluate(c).stringValue();\r\n        if (s2.length == 0) {\r\n            return new XString(s1);\r\n        }\r\n        var i = s1.indexOf(s2);\r\n        if (i == -1) {\r\n            return new XString(\"\");\r\n        }\r\n        return new XString(s1.substring(i + s2.length));\r\n    };\r\n\r\n    Functions.substring = function () {\r\n        var c = arguments[0];\r\n        if (!(arguments.length == 3 || arguments.length == 4)) {\r\n            throw new Error(\"Function substring expects (string, number, number?)\");\r\n        }\r\n        var s = arguments[1].evaluate(c).stringValue();\r\n        var n1 = Math.round(arguments[2].evaluate(c).numberValue()) - 1;\r\n        var n2 = arguments.length == 4 ? n1 + Math.round(arguments[3].evaluate(c).numberValue()) : undefined;\r\n        return new XString(s.substring(n1, n2));\r\n    };\r\n\r\n    Functions.stringLength = function () {\r\n        var c = arguments[0];\r\n        var s;\r\n        if (arguments.length == 1) {\r\n            s = XNodeSet.prototype.stringForNode(c.contextNode);\r\n        } else if (arguments.length == 2) {\r\n            s = arguments[1].evaluate(c).stringValue();\r\n        } else {\r\n            throw new Error(\"Function string-length expects (string?)\");\r\n        }\r\n        return new XNumber(s.length);\r\n    };\r\n\r\n    Functions.normalizeSpace = function () {\r\n        var c = arguments[0];\r\n        var s;\r\n        if (arguments.length == 1) {\r\n            s = XNodeSet.prototype.stringForNode(c.contextNode);\r\n        } else if (arguments.length == 2) {\r\n            s = arguments[1].evaluate(c).stringValue();\r\n        } else {\r\n            throw new Error(\"Function normalize-space expects (string?)\");\r\n        }\r\n        var i = 0;\r\n        var j = s.length - 1;\r\n        while (Utilities.isSpace(s.charCodeAt(j))) {\r\n            j--;\r\n        }\r\n        var t = \"\";\r\n        while (i <= j && Utilities.isSpace(s.charCodeAt(i))) {\r\n            i++;\r\n        }\r\n        while (i <= j) {\r\n            if (Utilities.isSpace(s.charCodeAt(i))) {\r\n                t += \" \";\r\n                while (i <= j && Utilities.isSpace(s.charCodeAt(i))) {\r\n                    i++;\r\n                }\r\n            } else {\r\n                t += s.charAt(i);\r\n                i++;\r\n            }\r\n        }\r\n        return new XString(t);\r\n    };\r\n\r\n    Functions.translate = function (c, eValue, eFrom, eTo) {\r\n        if (arguments.length != 4) {\r\n            throw new Error(\"Function translate expects (string, string, string)\");\r\n        }\r\n\r\n        var value = eValue.evaluate(c).stringValue();\r\n        var from = eFrom.evaluate(c).stringValue();\r\n        var to = eTo.evaluate(c).stringValue();\r\n\r\n        var cMap = reduce(function (acc, ch, i) {\r\n            if (!(ch in acc)) {\r\n                acc[ch] = i > to.length ? '' : to[i];\r\n            }\r\n            return acc;\r\n        }, {}, from);\r\n\r\n        var t = join(\r\n            '',\r\n            map(function (ch) {\r\n                return ch in cMap ? cMap[ch] : ch;\r\n            }, value)\r\n        );\r\n\r\n        return new XString(t);\r\n    };\r\n\r\n    Functions.boolean_ = function () {\r\n        var c = arguments[0];\r\n        if (arguments.length != 2) {\r\n            throw new Error(\"Function boolean expects (object)\");\r\n        }\r\n        return arguments[1].evaluate(c).bool();\r\n    };\r\n\r\n    Functions.not = function (c, eValue) {\r\n        if (arguments.length != 2) {\r\n            throw new Error(\"Function not expects (object)\");\r\n        }\r\n        return eValue.evaluate(c).bool().not();\r\n    };\r\n\r\n    Functions.true_ = function () {\r\n        if (arguments.length != 1) {\r\n            throw new Error(\"Function true expects ()\");\r\n        }\r\n        return XBoolean.true_;\r\n    };\r\n\r\n    Functions.false_ = function () {\r\n        if (arguments.length != 1) {\r\n            throw new Error(\"Function false expects ()\");\r\n        }\r\n        return XBoolean.false_;\r\n    };\r\n\r\n    Functions.lang = function () {\r\n        var c = arguments[0];\r\n        if (arguments.length != 2) {\r\n            throw new Error(\"Function lang expects (string)\");\r\n        }\r\n        var lang;\r\n        for (var n = c.contextNode; n != null && n.nodeType != 9 /*Node.DOCUMENT_NODE*/; n = n.parentNode) {\r\n            var a = n.getAttributeNS(XPath.XML_NAMESPACE_URI, \"lang\");\r\n            if (a != null) {\r\n                lang = String(a);\r\n                break;\r\n            }\r\n        }\r\n        if (lang == null) {\r\n            return XBoolean.false_;\r\n        }\r\n        var s = arguments[1].evaluate(c).stringValue();\r\n        return new XBoolean(lang.substring(0, s.length) == s\r\n            && (lang.length == s.length || lang.charAt(s.length) == '-'));\r\n    };\r\n\r\n    Functions.number = function () {\r\n        var c = arguments[0];\r\n        if (!(arguments.length == 1 || arguments.length == 2)) {\r\n            throw new Error(\"Function number expects (object?)\");\r\n        }\r\n        if (arguments.length == 1) {\r\n            return new XNumber(XNodeSet.prototype.stringForNode(c.contextNode));\r\n        }\r\n        return arguments[1].evaluate(c).number();\r\n    };\r\n\r\n    Functions.sum = function () {\r\n        var c = arguments[0];\r\n        var ns;\r\n        if (arguments.length != 2 || !Utilities.instance_of((ns = arguments[1].evaluate(c)), XNodeSet)) {\r\n            throw new Error(\"Function sum expects (node-set)\");\r\n        }\r\n        ns = ns.toUnsortedArray();\r\n        var n = 0;\r\n        for (var i = 0; i < ns.length; i++) {\r\n            n += new XNumber(XNodeSet.prototype.stringForNode(ns[i])).numberValue();\r\n        }\r\n        return new XNumber(n);\r\n    };\r\n\r\n    Functions.floor = function () {\r\n        var c = arguments[0];\r\n        if (arguments.length != 2) {\r\n            throw new Error(\"Function floor expects (number)\");\r\n        }\r\n        return new XNumber(Math.floor(arguments[1].evaluate(c).numberValue()));\r\n    };\r\n\r\n    Functions.ceiling = function () {\r\n        var c = arguments[0];\r\n        if (arguments.length != 2) {\r\n            throw new Error(\"Function ceiling expects (number)\");\r\n        }\r\n        return new XNumber(Math.ceil(arguments[1].evaluate(c).numberValue()));\r\n    };\r\n\r\n    Functions.round = function () {\r\n        var c = arguments[0];\r\n        if (arguments.length != 2) {\r\n            throw new Error(\"Function round expects (number)\");\r\n        }\r\n        return new XNumber(Math.round(arguments[1].evaluate(c).numberValue()));\r\n    };\r\n\r\n    // Utilities /////////////////////////////////////////////////////////////////\r\n\r\n    var Utilities = new Object();\r\n\r\n    Utilities.isAttribute = function (val) {\r\n        return val && (val.nodeType === 2 || val.ownerElement);\r\n    }\r\n\r\n    Utilities.splitQName = function (qn) {\r\n        var i = qn.indexOf(\":\");\r\n        if (i == -1) {\r\n            return [null, qn];\r\n        }\r\n        return [qn.substring(0, i), qn.substring(i + 1)];\r\n    };\r\n\r\n    Utilities.resolveQName = function (qn, nr, n, useDefault) {\r\n        var parts = Utilities.splitQName(qn);\r\n        if (parts[0] != null) {\r\n            parts[0] = nr.getNamespace(parts[0], n);\r\n        } else {\r\n            if (useDefault) {\r\n                parts[0] = nr.getNamespace(\"\", n);\r\n                if (parts[0] == null) {\r\n                    parts[0] = \"\";\r\n                }\r\n            } else {\r\n                parts[0] = \"\";\r\n            }\r\n        }\r\n        return parts;\r\n    };\r\n\r\n    Utilities.isSpace = function (c) {\r\n        return c == 0x9 || c == 0xd || c == 0xa || c == 0x20;\r\n    };\r\n\r\n    Utilities.isLetter = function (c) {\r\n        return c >= 0x0041 && c <= 0x005A ||\r\n            c >= 0x0061 && c <= 0x007A ||\r\n            c >= 0x00C0 && c <= 0x00D6 ||\r\n            c >= 0x00D8 && c <= 0x00F6 ||\r\n            c >= 0x00F8 && c <= 0x00FF ||\r\n            c >= 0x0100 && c <= 0x0131 ||\r\n            c >= 0x0134 && c <= 0x013E ||\r\n            c >= 0x0141 && c <= 0x0148 ||\r\n            c >= 0x014A && c <= 0x017E ||\r\n            c >= 0x0180 && c <= 0x01C3 ||\r\n            c >= 0x01CD && c <= 0x01F0 ||\r\n            c >= 0x01F4 && c <= 0x01F5 ||\r\n            c >= 0x01FA && c <= 0x0217 ||\r\n            c >= 0x0250 && c <= 0x02A8 ||\r\n            c >= 0x02BB && c <= 0x02C1 ||\r\n            c == 0x0386 ||\r\n            c >= 0x0388 && c <= 0x038A ||\r\n            c == 0x038C ||\r\n            c >= 0x038E && c <= 0x03A1 ||\r\n            c >= 0x03A3 && c <= 0x03CE ||\r\n            c >= 0x03D0 && c <= 0x03D6 ||\r\n            c == 0x03DA ||\r\n            c == 0x03DC ||\r\n            c == 0x03DE ||\r\n            c == 0x03E0 ||\r\n            c >= 0x03E2 && c <= 0x03F3 ||\r\n            c >= 0x0401 && c <= 0x040C ||\r\n            c >= 0x040E && c <= 0x044F ||\r\n            c >= 0x0451 && c <= 0x045C ||\r\n            c >= 0x045E && c <= 0x0481 ||\r\n            c >= 0x0490 && c <= 0x04C4 ||\r\n            c >= 0x04C7 && c <= 0x04C8 ||\r\n            c >= 0x04CB && c <= 0x04CC ||\r\n            c >= 0x04D0 && c <= 0x04EB ||\r\n            c >= 0x04EE && c <= 0x04F5 ||\r\n            c >= 0x04F8 && c <= 0x04F9 ||\r\n            c >= 0x0531 && c <= 0x0556 ||\r\n            c == 0x0559 ||\r\n            c >= 0x0561 && c <= 0x0586 ||\r\n            c >= 0x05D0 && c <= 0x05EA ||\r\n            c >= 0x05F0 && c <= 0x05F2 ||\r\n            c >= 0x0621 && c <= 0x063A ||\r\n            c >= 0x0641 && c <= 0x064A ||\r\n            c >= 0x0671 && c <= 0x06B7 ||\r\n            c >= 0x06BA && c <= 0x06BE ||\r\n            c >= 0x06C0 && c <= 0x06CE ||\r\n            c >= 0x06D0 && c <= 0x06D3 ||\r\n            c == 0x06D5 ||\r\n            c >= 0x06E5 && c <= 0x06E6 ||\r\n            c >= 0x0905 && c <= 0x0939 ||\r\n            c == 0x093D ||\r\n            c >= 0x0958 && c <= 0x0961 ||\r\n            c >= 0x0985 && c <= 0x098C ||\r\n            c >= 0x098F && c <= 0x0990 ||\r\n            c >= 0x0993 && c <= 0x09A8 ||\r\n            c >= 0x09AA && c <= 0x09B0 ||\r\n            c == 0x09B2 ||\r\n            c >= 0x09B6 && c <= 0x09B9 ||\r\n            c >= 0x09DC && c <= 0x09DD ||\r\n            c >= 0x09DF && c <= 0x09E1 ||\r\n            c >= 0x09F0 && c <= 0x09F1 ||\r\n            c >= 0x0A05 && c <= 0x0A0A ||\r\n            c >= 0x0A0F && c <= 0x0A10 ||\r\n            c >= 0x0A13 && c <= 0x0A28 ||\r\n            c >= 0x0A2A && c <= 0x0A30 ||\r\n            c >= 0x0A32 && c <= 0x0A33 ||\r\n            c >= 0x0A35 && c <= 0x0A36 ||\r\n            c >= 0x0A38 && c <= 0x0A39 ||\r\n            c >= 0x0A59 && c <= 0x0A5C ||\r\n            c == 0x0A5E ||\r\n            c >= 0x0A72 && c <= 0x0A74 ||\r\n            c >= 0x0A85 && c <= 0x0A8B ||\r\n            c == 0x0A8D ||\r\n            c >= 0x0A8F && c <= 0x0A91 ||\r\n            c >= 0x0A93 && c <= 0x0AA8 ||\r\n            c >= 0x0AAA && c <= 0x0AB0 ||\r\n            c >= 0x0AB2 && c <= 0x0AB3 ||\r\n            c >= 0x0AB5 && c <= 0x0AB9 ||\r\n            c == 0x0ABD ||\r\n            c == 0x0AE0 ||\r\n            c >= 0x0B05 && c <= 0x0B0C ||\r\n            c >= 0x0B0F && c <= 0x0B10 ||\r\n            c >= 0x0B13 && c <= 0x0B28 ||\r\n            c >= 0x0B2A && c <= 0x0B30 ||\r\n            c >= 0x0B32 && c <= 0x0B33 ||\r\n            c >= 0x0B36 && c <= 0x0B39 ||\r\n            c == 0x0B3D ||\r\n            c >= 0x0B5C && c <= 0x0B5D ||\r\n            c >= 0x0B5F && c <= 0x0B61 ||\r\n            c >= 0x0B85 && c <= 0x0B8A ||\r\n            c >= 0x0B8E && c <= 0x0B90 ||\r\n            c >= 0x0B92 && c <= 0x0B95 ||\r\n            c >= 0x0B99 && c <= 0x0B9A ||\r\n            c == 0x0B9C ||\r\n            c >= 0x0B9E && c <= 0x0B9F ||\r\n            c >= 0x0BA3 && c <= 0x0BA4 ||\r\n            c >= 0x0BA8 && c <= 0x0BAA ||\r\n            c >= 0x0BAE && c <= 0x0BB5 ||\r\n            c >= 0x0BB7 && c <= 0x0BB9 ||\r\n            c >= 0x0C05 && c <= 0x0C0C ||\r\n            c >= 0x0C0E && c <= 0x0C10 ||\r\n            c >= 0x0C12 && c <= 0x0C28 ||\r\n            c >= 0x0C2A && c <= 0x0C33 ||\r\n            c >= 0x0C35 && c <= 0x0C39 ||\r\n            c >= 0x0C60 && c <= 0x0C61 ||\r\n            c >= 0x0C85 && c <= 0x0C8C ||\r\n            c >= 0x0C8E && c <= 0x0C90 ||\r\n            c >= 0x0C92 && c <= 0x0CA8 ||\r\n            c >= 0x0CAA && c <= 0x0CB3 ||\r\n            c >= 0x0CB5 && c <= 0x0CB9 ||\r\n            c == 0x0CDE ||\r\n            c >= 0x0CE0 && c <= 0x0CE1 ||\r\n            c >= 0x0D05 && c <= 0x0D0C ||\r\n            c >= 0x0D0E && c <= 0x0D10 ||\r\n            c >= 0x0D12 && c <= 0x0D28 ||\r\n            c >= 0x0D2A && c <= 0x0D39 ||\r\n            c >= 0x0D60 && c <= 0x0D61 ||\r\n            c >= 0x0E01 && c <= 0x0E2E ||\r\n            c == 0x0E30 ||\r\n            c >= 0x0E32 && c <= 0x0E33 ||\r\n            c >= 0x0E40 && c <= 0x0E45 ||\r\n            c >= 0x0E81 && c <= 0x0E82 ||\r\n            c == 0x0E84 ||\r\n            c >= 0x0E87 && c <= 0x0E88 ||\r\n            c == 0x0E8A ||\r\n            c == 0x0E8D ||\r\n            c >= 0x0E94 && c <= 0x0E97 ||\r\n            c >= 0x0E99 && c <= 0x0E9F ||\r\n            c >= 0x0EA1 && c <= 0x0EA3 ||\r\n            c == 0x0EA5 ||\r\n            c == 0x0EA7 ||\r\n            c >= 0x0EAA && c <= 0x0EAB ||\r\n            c >= 0x0EAD && c <= 0x0EAE ||\r\n            c == 0x0EB0 ||\r\n            c >= 0x0EB2 && c <= 0x0EB3 ||\r\n            c == 0x0EBD ||\r\n            c >= 0x0EC0 && c <= 0x0EC4 ||\r\n            c >= 0x0F40 && c <= 0x0F47 ||\r\n            c >= 0x0F49 && c <= 0x0F69 ||\r\n            c >= 0x10A0 && c <= 0x10C5 ||\r\n            c >= 0x10D0 && c <= 0x10F6 ||\r\n            c == 0x1100 ||\r\n            c >= 0x1102 && c <= 0x1103 ||\r\n            c >= 0x1105 && c <= 0x1107 ||\r\n            c == 0x1109 ||\r\n            c >= 0x110B && c <= 0x110C ||\r\n            c >= 0x110E && c <= 0x1112 ||\r\n            c == 0x113C ||\r\n            c == 0x113E ||\r\n            c == 0x1140 ||\r\n            c == 0x114C ||\r\n            c == 0x114E ||\r\n            c == 0x1150 ||\r\n            c >= 0x1154 && c <= 0x1155 ||\r\n            c == 0x1159 ||\r\n            c >= 0x115F && c <= 0x1161 ||\r\n            c == 0x1163 ||\r\n            c == 0x1165 ||\r\n            c == 0x1167 ||\r\n            c == 0x1169 ||\r\n            c >= 0x116D && c <= 0x116E ||\r\n            c >= 0x1172 && c <= 0x1173 ||\r\n            c == 0x1175 ||\r\n            c == 0x119E ||\r\n            c == 0x11A8 ||\r\n            c == 0x11AB ||\r\n            c >= 0x11AE && c <= 0x11AF ||\r\n            c >= 0x11B7 && c <= 0x11B8 ||\r\n            c == 0x11BA ||\r\n            c >= 0x11BC && c <= 0x11C2 ||\r\n            c == 0x11EB ||\r\n            c == 0x11F0 ||\r\n            c == 0x11F9 ||\r\n            c >= 0x1E00 && c <= 0x1E9B ||\r\n            c >= 0x1EA0 && c <= 0x1EF9 ||\r\n            c >= 0x1F00 && c <= 0x1F15 ||\r\n            c >= 0x1F18 && c <= 0x1F1D ||\r\n            c >= 0x1F20 && c <= 0x1F45 ||\r\n            c >= 0x1F48 && c <= 0x1F4D ||\r\n            c >= 0x1F50 && c <= 0x1F57 ||\r\n            c == 0x1F59 ||\r\n            c == 0x1F5B ||\r\n            c == 0x1F5D ||\r\n            c >= 0x1F5F && c <= 0x1F7D ||\r\n            c >= 0x1F80 && c <= 0x1FB4 ||\r\n            c >= 0x1FB6 && c <= 0x1FBC ||\r\n            c == 0x1FBE ||\r\n            c >= 0x1FC2 && c <= 0x1FC4 ||\r\n            c >= 0x1FC6 && c <= 0x1FCC ||\r\n            c >= 0x1FD0 && c <= 0x1FD3 ||\r\n            c >= 0x1FD6 && c <= 0x1FDB ||\r\n            c >= 0x1FE0 && c <= 0x1FEC ||\r\n            c >= 0x1FF2 && c <= 0x1FF4 ||\r\n            c >= 0x1FF6 && c <= 0x1FFC ||\r\n            c == 0x2126 ||\r\n            c >= 0x212A && c <= 0x212B ||\r\n            c == 0x212E ||\r\n            c >= 0x2180 && c <= 0x2182 ||\r\n            c >= 0x3041 && c <= 0x3094 ||\r\n            c >= 0x30A1 && c <= 0x30FA ||\r\n            c >= 0x3105 && c <= 0x312C ||\r\n            c >= 0xAC00 && c <= 0xD7A3 ||\r\n            c >= 0x4E00 && c <= 0x9FA5 ||\r\n            c == 0x3007 ||\r\n            c >= 0x3021 && c <= 0x3029;\r\n    };\r\n\r\n    Utilities.isNCNameChar = function (c) {\r\n        return c >= 0x0030 && c <= 0x0039\r\n            || c >= 0x0660 && c <= 0x0669\r\n            || c >= 0x06F0 && c <= 0x06F9\r\n            || c >= 0x0966 && c <= 0x096F\r\n            || c >= 0x09E6 && c <= 0x09EF\r\n            || c >= 0x0A66 && c <= 0x0A6F\r\n            || c >= 0x0AE6 && c <= 0x0AEF\r\n            || c >= 0x0B66 && c <= 0x0B6F\r\n            || c >= 0x0BE7 && c <= 0x0BEF\r\n            || c >= 0x0C66 && c <= 0x0C6F\r\n            || c >= 0x0CE6 && c <= 0x0CEF\r\n            || c >= 0x0D66 && c <= 0x0D6F\r\n            || c >= 0x0E50 && c <= 0x0E59\r\n            || c >= 0x0ED0 && c <= 0x0ED9\r\n            || c >= 0x0F20 && c <= 0x0F29\r\n            || c == 0x002E\r\n            || c == 0x002D\r\n            || c == 0x005F\r\n            || Utilities.isLetter(c)\r\n            || c >= 0x0300 && c <= 0x0345\r\n            || c >= 0x0360 && c <= 0x0361\r\n            || c >= 0x0483 && c <= 0x0486\r\n            || c >= 0x0591 && c <= 0x05A1\r\n            || c >= 0x05A3 && c <= 0x05B9\r\n            || c >= 0x05BB && c <= 0x05BD\r\n            || c == 0x05BF\r\n            || c >= 0x05C1 && c <= 0x05C2\r\n            || c == 0x05C4\r\n            || c >= 0x064B && c <= 0x0652\r\n            || c == 0x0670\r\n            || c >= 0x06D6 && c <= 0x06DC\r\n            || c >= 0x06DD && c <= 0x06DF\r\n            || c >= 0x06E0 && c <= 0x06E4\r\n            || c >= 0x06E7 && c <= 0x06E8\r\n            || c >= 0x06EA && c <= 0x06ED\r\n            || c >= 0x0901 && c <= 0x0903\r\n            || c == 0x093C\r\n            || c >= 0x093E && c <= 0x094C\r\n            || c == 0x094D\r\n            || c >= 0x0951 && c <= 0x0954\r\n            || c >= 0x0962 && c <= 0x0963\r\n            || c >= 0x0981 && c <= 0x0983\r\n            || c == 0x09BC\r\n            || c == 0x09BE\r\n            || c == 0x09BF\r\n            || c >= 0x09C0 && c <= 0x09C4\r\n            || c >= 0x09C7 && c <= 0x09C8\r\n            || c >= 0x09CB && c <= 0x09CD\r\n            || c == 0x09D7\r\n            || c >= 0x09E2 && c <= 0x09E3\r\n            || c == 0x0A02\r\n            || c == 0x0A3C\r\n            || c == 0x0A3E\r\n            || c == 0x0A3F\r\n            || c >= 0x0A40 && c <= 0x0A42\r\n            || c >= 0x0A47 && c <= 0x0A48\r\n            || c >= 0x0A4B && c <= 0x0A4D\r\n            || c >= 0x0A70 && c <= 0x0A71\r\n            || c >= 0x0A81 && c <= 0x0A83\r\n            || c == 0x0ABC\r\n            || c >= 0x0ABE && c <= 0x0AC5\r\n            || c >= 0x0AC7 && c <= 0x0AC9\r\n            || c >= 0x0ACB && c <= 0x0ACD\r\n            || c >= 0x0B01 && c <= 0x0B03\r\n            || c == 0x0B3C\r\n            || c >= 0x0B3E && c <= 0x0B43\r\n            || c >= 0x0B47 && c <= 0x0B48\r\n            || c >= 0x0B4B && c <= 0x0B4D\r\n            || c >= 0x0B56 && c <= 0x0B57\r\n            || c >= 0x0B82 && c <= 0x0B83\r\n            || c >= 0x0BBE && c <= 0x0BC2\r\n            || c >= 0x0BC6 && c <= 0x0BC8\r\n            || c >= 0x0BCA && c <= 0x0BCD\r\n            || c == 0x0BD7\r\n            || c >= 0x0C01 && c <= 0x0C03\r\n            || c >= 0x0C3E && c <= 0x0C44\r\n            || c >= 0x0C46 && c <= 0x0C48\r\n            || c >= 0x0C4A && c <= 0x0C4D\r\n            || c >= 0x0C55 && c <= 0x0C56\r\n            || c >= 0x0C82 && c <= 0x0C83\r\n            || c >= 0x0CBE && c <= 0x0CC4\r\n            || c >= 0x0CC6 && c <= 0x0CC8\r\n            || c >= 0x0CCA && c <= 0x0CCD\r\n            || c >= 0x0CD5 && c <= 0x0CD6\r\n            || c >= 0x0D02 && c <= 0x0D03\r\n            || c >= 0x0D3E && c <= 0x0D43\r\n            || c >= 0x0D46 && c <= 0x0D48\r\n            || c >= 0x0D4A && c <= 0x0D4D\r\n            || c == 0x0D57\r\n            || c == 0x0E31\r\n            || c >= 0x0E34 && c <= 0x0E3A\r\n            || c >= 0x0E47 && c <= 0x0E4E\r\n            || c == 0x0EB1\r\n            || c >= 0x0EB4 && c <= 0x0EB9\r\n            || c >= 0x0EBB && c <= 0x0EBC\r\n            || c >= 0x0EC8 && c <= 0x0ECD\r\n            || c >= 0x0F18 && c <= 0x0F19\r\n            || c == 0x0F35\r\n            || c == 0x0F37\r\n            || c == 0x0F39\r\n            || c == 0x0F3E\r\n            || c == 0x0F3F\r\n            || c >= 0x0F71 && c <= 0x0F84\r\n            || c >= 0x0F86 && c <= 0x0F8B\r\n            || c >= 0x0F90 && c <= 0x0F95\r\n            || c == 0x0F97\r\n            || c >= 0x0F99 && c <= 0x0FAD\r\n            || c >= 0x0FB1 && c <= 0x0FB7\r\n            || c == 0x0FB9\r\n            || c >= 0x20D0 && c <= 0x20DC\r\n            || c == 0x20E1\r\n            || c >= 0x302A && c <= 0x302F\r\n            || c == 0x3099\r\n            || c == 0x309A\r\n            || c == 0x00B7\r\n            || c == 0x02D0\r\n            || c == 0x02D1\r\n            || c == 0x0387\r\n            || c == 0x0640\r\n            || c == 0x0E46\r\n            || c == 0x0EC6\r\n            || c == 0x3005\r\n            || c >= 0x3031 && c <= 0x3035\r\n            || c >= 0x309D && c <= 0x309E\r\n            || c >= 0x30FC && c <= 0x30FE;\r\n    };\r\n\r\n    Utilities.coalesceText = function (n) {\r\n        for (var m = n.firstChild; m != null; m = m.nextSibling) {\r\n            if (m.nodeType == 3 /*Node.TEXT_NODE*/ || m.nodeType == 4 /*Node.CDATA_SECTION_NODE*/) {\r\n                var s = m.nodeValue;\r\n                var first = m;\r\n                m = m.nextSibling;\r\n                while (m != null && (m.nodeType == 3 /*Node.TEXT_NODE*/ || m.nodeType == 4 /*Node.CDATA_SECTION_NODE*/)) {\r\n                    s += m.nodeValue;\r\n                    var del = m;\r\n                    m = m.nextSibling;\r\n                    del.parentNode.removeChild(del);\r\n                }\r\n                if (first.nodeType == 4 /*Node.CDATA_SECTION_NODE*/) {\r\n                    var p = first.parentNode;\r\n                    if (first.nextSibling == null) {\r\n                        p.removeChild(first);\r\n                        p.appendChild(p.ownerDocument.createTextNode(s));\r\n                    } else {\r\n                        var next = first.nextSibling;\r\n                        p.removeChild(first);\r\n                        p.insertBefore(p.ownerDocument.createTextNode(s), next);\r\n                    }\r\n                } else {\r\n                    first.nodeValue = s;\r\n                }\r\n                if (m == null) {\r\n                    break;\r\n                }\r\n            } else if (m.nodeType == 1 /*Node.ELEMENT_NODE*/) {\r\n                Utilities.coalesceText(m);\r\n            }\r\n        }\r\n    };\r\n\r\n    Utilities.instance_of = function (o, c) {\r\n        while (o != null) {\r\n            if (o.constructor === c) {\r\n                return true;\r\n            }\r\n            if (o === Object) {\r\n                return false;\r\n            }\r\n            o = o.constructor.superclass;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    Utilities.getElementById = function (n, id) {\r\n        // Note that this does not check the DTD to check for actual\r\n        // attributes of type ID, so this may be a bit wrong.\r\n        if (n.nodeType == 1 /*Node.ELEMENT_NODE*/) {\r\n            if (n.getAttribute(\"id\") == id\r\n                || n.getAttributeNS(null, \"id\") == id) {\r\n                return n;\r\n            }\r\n        }\r\n        for (var m = n.firstChild; m != null; m = m.nextSibling) {\r\n            var res = Utilities.getElementById(m, id);\r\n            if (res != null) {\r\n                return res;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    // XPathException ////////////////////////////////////////////////////////////\r\n\r\n    var XPathException = (function () {\r\n        function getMessage(code, exception) {\r\n            var msg = exception ? \": \" + exception.toString() : \"\";\r\n            switch (code) {\r\n                case XPathException.INVALID_EXPRESSION_ERR:\r\n                    return \"Invalid expression\" + msg;\r\n                case XPathException.TYPE_ERR:\r\n                    return \"Type error\" + msg;\r\n            }\r\n            return null;\r\n        }\r\n\r\n        function XPathException(code, error, message) {\r\n            var err = Error.call(this, getMessage(code, error) || message);\r\n\r\n            err.code = code;\r\n            err.exception = error;\r\n\r\n            return err;\r\n        }\r\n\r\n        XPathException.prototype = Object.create(Error.prototype);\r\n        XPathException.prototype.constructor = XPathException;\r\n        XPathException.superclass = Error;\r\n\r\n        XPathException.prototype.toString = function () {\r\n            return this.message;\r\n        };\r\n\r\n        XPathException.fromMessage = function (message, error) {\r\n            return new XPathException(null, error, message);\r\n        };\r\n\r\n        XPathException.INVALID_EXPRESSION_ERR = 51;\r\n        XPathException.TYPE_ERR = 52;\r\n\r\n        return XPathException;\r\n    })();\r\n\r\n    // XPathExpression ///////////////////////////////////////////////////////////\r\n\r\n    XPathExpression.prototype = {};\r\n    XPathExpression.prototype.constructor = XPathExpression;\r\n    XPathExpression.superclass = Object.prototype;\r\n\r\n    function XPathExpression(e, r, p) {\r\n        this.xpath = p.parse(e);\r\n        this.context = new XPathContext();\r\n        this.context.namespaceResolver = new XPathNSResolverWrapper(r);\r\n    }\r\n\r\n    XPathExpression.getOwnerDocument = function (n) {\r\n        return n.nodeType === 9 /*Node.DOCUMENT_NODE*/ ? n : n.ownerDocument;\r\n    }\r\n\r\n    XPathExpression.detectHtmlDom = function (n) {\r\n        if (!n) { return false; }\r\n\r\n        var doc = XPathExpression.getOwnerDocument(n);\r\n\r\n        try {\r\n            return doc.implementation.hasFeature(\"HTML\", \"2.0\");\r\n        } catch (e) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    XPathExpression.prototype.evaluate = function (n, t, res) {\r\n        this.context.expressionContextNode = n;\r\n        // backward compatibility - no reliable way to detect whether the DOM is HTML, but\r\n        // this library has been using this method up until now, so we will continue to use it\r\n        // ONLY when using an XPathExpression\r\n        this.context.caseInsensitive = XPathExpression.detectHtmlDom(n);\r\n\r\n        var result = this.xpath.evaluate(this.context);\r\n        return new XPathResult(result, t);\r\n    }\r\n\r\n    // XPathNSResolverWrapper ////////////////////////////////////////////////////\r\n\r\n    XPathNSResolverWrapper.prototype = {};\r\n    XPathNSResolverWrapper.prototype.constructor = XPathNSResolverWrapper;\r\n    XPathNSResolverWrapper.superclass = Object.prototype;\r\n\r\n    function XPathNSResolverWrapper(r) {\r\n        this.xpathNSResolver = r;\r\n    }\r\n\r\n    XPathNSResolverWrapper.prototype.getNamespace = function (prefix, n) {\r\n        if (this.xpathNSResolver == null) {\r\n            return null;\r\n        }\r\n        return this.xpathNSResolver.lookupNamespaceURI(prefix);\r\n    };\r\n\r\n    // NodeXPathNSResolver ///////////////////////////////////////////////////////\r\n\r\n    NodeXPathNSResolver.prototype = {};\r\n    NodeXPathNSResolver.prototype.constructor = NodeXPathNSResolver;\r\n    NodeXPathNSResolver.superclass = Object.prototype;\r\n\r\n    function NodeXPathNSResolver(n) {\r\n        this.node = n;\r\n        this.namespaceResolver = new NamespaceResolver();\r\n    }\r\n\r\n    NodeXPathNSResolver.prototype.lookupNamespaceURI = function (prefix) {\r\n        return this.namespaceResolver.getNamespace(prefix, this.node);\r\n    };\r\n\r\n    // XPathResult ///////////////////////////////////////////////////////////////\r\n\r\n    XPathResult.prototype = {};\r\n    XPathResult.prototype.constructor = XPathResult;\r\n    XPathResult.superclass = Object.prototype;\r\n\r\n    function XPathResult(v, t) {\r\n        if (t == XPathResult.ANY_TYPE) {\r\n            if (v.constructor === XString) {\r\n                t = XPathResult.STRING_TYPE;\r\n            } else if (v.constructor === XNumber) {\r\n                t = XPathResult.NUMBER_TYPE;\r\n            } else if (v.constructor === XBoolean) {\r\n                t = XPathResult.BOOLEAN_TYPE;\r\n            } else if (v.constructor === XNodeSet) {\r\n                t = XPathResult.UNORDERED_NODE_ITERATOR_TYPE;\r\n            }\r\n        }\r\n        this.resultType = t;\r\n        switch (t) {\r\n            case XPathResult.NUMBER_TYPE:\r\n                this.numberValue = v.numberValue();\r\n                return;\r\n            case XPathResult.STRING_TYPE:\r\n                this.stringValue = v.stringValue();\r\n                return;\r\n            case XPathResult.BOOLEAN_TYPE:\r\n                this.booleanValue = v.booleanValue();\r\n                return;\r\n            case XPathResult.ANY_UNORDERED_NODE_TYPE:\r\n            case XPathResult.FIRST_ORDERED_NODE_TYPE:\r\n                if (v.constructor === XNodeSet) {\r\n                    this.singleNodeValue = v.first();\r\n                    return;\r\n                }\r\n                break;\r\n            case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:\r\n            case XPathResult.ORDERED_NODE_ITERATOR_TYPE:\r\n                if (v.constructor === XNodeSet) {\r\n                    this.invalidIteratorState = false;\r\n                    this.nodes = v.toArray();\r\n                    this.iteratorIndex = 0;\r\n                    return;\r\n                }\r\n                break;\r\n            case XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE:\r\n            case XPathResult.ORDERED_NODE_SNAPSHOT_TYPE:\r\n                if (v.constructor === XNodeSet) {\r\n                    this.nodes = v.toArray();\r\n                    this.snapshotLength = this.nodes.length;\r\n                    return;\r\n                }\r\n                break;\r\n        }\r\n        throw new XPathException(XPathException.TYPE_ERR);\r\n    };\r\n\r\n    XPathResult.prototype.iterateNext = function () {\r\n        if (this.resultType != XPathResult.UNORDERED_NODE_ITERATOR_TYPE\r\n            && this.resultType != XPathResult.ORDERED_NODE_ITERATOR_TYPE) {\r\n            throw new XPathException(XPathException.TYPE_ERR);\r\n        }\r\n        return this.nodes[this.iteratorIndex++];\r\n    };\r\n\r\n    XPathResult.prototype.snapshotItem = function (i) {\r\n        if (this.resultType != XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE\r\n            && this.resultType != XPathResult.ORDERED_NODE_SNAPSHOT_TYPE) {\r\n            throw new XPathException(XPathException.TYPE_ERR);\r\n        }\r\n        return this.nodes[i];\r\n    };\r\n\r\n    XPathResult.ANY_TYPE = 0;\r\n    XPathResult.NUMBER_TYPE = 1;\r\n    XPathResult.STRING_TYPE = 2;\r\n    XPathResult.BOOLEAN_TYPE = 3;\r\n    XPathResult.UNORDERED_NODE_ITERATOR_TYPE = 4;\r\n    XPathResult.ORDERED_NODE_ITERATOR_TYPE = 5;\r\n    XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE = 6;\r\n    XPathResult.ORDERED_NODE_SNAPSHOT_TYPE = 7;\r\n    XPathResult.ANY_UNORDERED_NODE_TYPE = 8;\r\n    XPathResult.FIRST_ORDERED_NODE_TYPE = 9;\r\n\r\n    // DOM 3 XPath support ///////////////////////////////////////////////////////\r\n\r\n    function installDOM3XPathSupport(doc, p) {\r\n        doc.createExpression = function (e, r) {\r\n            try {\r\n                return new XPathExpression(e, r, p);\r\n            } catch (e) {\r\n                throw new XPathException(XPathException.INVALID_EXPRESSION_ERR, e);\r\n            }\r\n        };\r\n        doc.createNSResolver = function (n) {\r\n            return new NodeXPathNSResolver(n);\r\n        };\r\n        doc.evaluate = function (e, cn, r, t, res) {\r\n            if (t < 0 || t > 9) {\r\n                throw { code: 0, toString: function () { return \"Request type not supported\"; } };\r\n            }\r\n            return doc.createExpression(e, r, p).evaluate(cn, t, res);\r\n        };\r\n    };\r\n\r\n    // ---------------------------------------------------------------------------\r\n\r\n    // Install DOM 3 XPath support for the current document.\r\n    try {\r\n        var shouldInstall = true;\r\n        try {\r\n            if (document.implementation\r\n                && document.implementation.hasFeature\r\n                && document.implementation.hasFeature(\"XPath\", null)) {\r\n                shouldInstall = false;\r\n            }\r\n        } catch (e) {\r\n        }\r\n        if (shouldInstall) {\r\n            installDOM3XPathSupport(document, new XPathParser());\r\n        }\r\n    } catch (e) {\r\n    }\r\n\r\n    // ---------------------------------------------------------------------------\r\n    // exports for node.js\r\n\r\n    installDOM3XPathSupport(exports, new XPathParser());\r\n\r\n    (function () {\r\n        var parser = new XPathParser();\r\n\r\n        var defaultNSResolver = new NamespaceResolver();\r\n        var defaultFunctionResolver = new FunctionResolver();\r\n        var defaultVariableResolver = new VariableResolver();\r\n\r\n        function makeNSResolverFromFunction(func) {\r\n            return {\r\n                getNamespace: function (prefix, node) {\r\n                    var ns = func(prefix, node);\r\n\r\n                    return ns || defaultNSResolver.getNamespace(prefix, node);\r\n                }\r\n            };\r\n        }\r\n\r\n        function makeNSResolverFromObject(obj) {\r\n            return makeNSResolverFromFunction(obj.getNamespace.bind(obj));\r\n        }\r\n\r\n        function makeNSResolverFromMap(map) {\r\n            return makeNSResolverFromFunction(function (prefix) {\r\n                return map[prefix];\r\n            });\r\n        }\r\n\r\n        function makeNSResolver(resolver) {\r\n            if (resolver && typeof resolver.getNamespace === \"function\") {\r\n                return makeNSResolverFromObject(resolver);\r\n            }\r\n\r\n            if (typeof resolver === \"function\") {\r\n                return makeNSResolverFromFunction(resolver);\r\n            }\r\n\r\n            // assume prefix -> uri mapping\r\n            if (typeof resolver === \"object\") {\r\n                return makeNSResolverFromMap(resolver);\r\n            }\r\n\r\n            return defaultNSResolver;\r\n        }\r\n\r\n        /** Converts native JavaScript types to their XPath library equivalent */\r\n        function convertValue(value) {\r\n            if (value === null ||\r\n                typeof value === \"undefined\" ||\r\n                value instanceof XString ||\r\n                value instanceof XBoolean ||\r\n                value instanceof XNumber ||\r\n                value instanceof XNodeSet) {\r\n                return value;\r\n            }\r\n\r\n            switch (typeof value) {\r\n                case \"string\": return new XString(value);\r\n                case \"boolean\": return new XBoolean(value);\r\n                case \"number\": return new XNumber(value);\r\n            }\r\n\r\n            // assume node(s)\r\n            var ns = new XNodeSet();\r\n            ns.addArray([].concat(value));\r\n            return ns;\r\n        }\r\n\r\n        function makeEvaluator(func) {\r\n            return function (context) {\r\n                var args = Array.prototype.slice.call(arguments, 1).map(function (arg) {\r\n                    return arg.evaluate(context);\r\n                });\r\n                var result = func.apply(this, [].concat(context, args));\r\n                return convertValue(result);\r\n            };\r\n        }\r\n\r\n        function makeFunctionResolverFromFunction(func) {\r\n            return {\r\n                getFunction: function (name, namespace) {\r\n                    var found = func(name, namespace);\r\n                    if (found) {\r\n                        return makeEvaluator(found);\r\n                    }\r\n                    return defaultFunctionResolver.getFunction(name, namespace);\r\n                }\r\n            };\r\n        }\r\n\r\n        function makeFunctionResolverFromObject(obj) {\r\n            return makeFunctionResolverFromFunction(obj.getFunction.bind(obj));\r\n        }\r\n\r\n        function makeFunctionResolverFromMap(map) {\r\n            return makeFunctionResolverFromFunction(function (name) {\r\n                return map[name];\r\n            });\r\n        }\r\n\r\n        function makeFunctionResolver(resolver) {\r\n            if (resolver && typeof resolver.getFunction === \"function\") {\r\n                return makeFunctionResolverFromObject(resolver);\r\n            }\r\n\r\n            if (typeof resolver === \"function\") {\r\n                return makeFunctionResolverFromFunction(resolver);\r\n            }\r\n\r\n            // assume map\r\n            if (typeof resolver === \"object\") {\r\n                return makeFunctionResolverFromMap(resolver);\r\n            }\r\n\r\n            return defaultFunctionResolver;\r\n        }\r\n\r\n        function makeVariableResolverFromFunction(func) {\r\n            return {\r\n                getVariable: function (name, namespace) {\r\n                    var value = func(name, namespace);\r\n                    return convertValue(value);\r\n                }\r\n            };\r\n        }\r\n\r\n        function makeVariableResolver(resolver) {\r\n            if (resolver) {\r\n                if (typeof resolver.getVariable === \"function\") {\r\n                    return makeVariableResolverFromFunction(resolver.getVariable.bind(resolver));\r\n                }\r\n\r\n                if (typeof resolver === \"function\") {\r\n                    return makeVariableResolverFromFunction(resolver);\r\n                }\r\n\r\n                // assume map\r\n                if (typeof resolver === \"object\") {\r\n                    return makeVariableResolverFromFunction(function (name) {\r\n                        return resolver[name];\r\n                    });\r\n                }\r\n            }\r\n\r\n            return defaultVariableResolver;\r\n        }\r\n\r\n        function copyIfPresent(prop, dest, source) {\r\n            if (prop in source) { dest[prop] = source[prop]; }\r\n        }\r\n\r\n        function makeContext(options) {\r\n            var context = new XPathContext();\r\n\r\n            if (options) {\r\n                context.namespaceResolver = makeNSResolver(options.namespaces);\r\n                context.functionResolver = makeFunctionResolver(options.functions);\r\n                context.variableResolver = makeVariableResolver(options.variables);\r\n                context.expressionContextNode = options.node;\r\n                copyIfPresent('allowAnyNamespaceForNoPrefix', context, options);\r\n                copyIfPresent('isHtml', context, options);\r\n            } else {\r\n                context.namespaceResolver = defaultNSResolver;\r\n            }\r\n\r\n            return context;\r\n        }\r\n\r\n        function evaluate(parsedExpression, options) {\r\n            var context = makeContext(options);\r\n\r\n            return parsedExpression.evaluate(context);\r\n        }\r\n\r\n        var evaluatorPrototype = {\r\n            evaluate: function (options) {\r\n                return evaluate(this.expression, options);\r\n            }\r\n\r\n            , evaluateNumber: function (options) {\r\n                return this.evaluate(options).numberValue();\r\n            }\r\n\r\n            , evaluateString: function (options) {\r\n                return this.evaluate(options).stringValue();\r\n            }\r\n\r\n            , evaluateBoolean: function (options) {\r\n                return this.evaluate(options).booleanValue();\r\n            }\r\n\r\n            , evaluateNodeSet: function (options) {\r\n                return this.evaluate(options).nodeset();\r\n            }\r\n\r\n            , select: function (options) {\r\n                return this.evaluateNodeSet(options).toArray()\r\n            }\r\n\r\n            , select1: function (options) {\r\n                return this.select(options)[0];\r\n            }\r\n        };\r\n\r\n        function parse(xpath) {\r\n            var parsed = parser.parse(xpath);\r\n\r\n            return Object.create(evaluatorPrototype, {\r\n                expression: {\r\n                    value: parsed\r\n                }\r\n            });\r\n        }\r\n\r\n        exports.parse = parse;\r\n    })();\r\n\r\n    assign(\r\n        exports,\r\n        {\r\n            XPath,\r\n            XPathParser,\r\n            XPathResult,\r\n\r\n            Step,\r\n            PathExpr,\r\n            NodeTest,\r\n            LocationPath,\r\n\r\n            OrOperation,\r\n            AndOperation,\r\n\r\n            BarOperation,\r\n\r\n            EqualsOperation,\r\n            NotEqualOperation,\r\n            LessThanOperation,\r\n            GreaterThanOperation,\r\n            LessThanOrEqualOperation,\r\n            GreaterThanOrEqualOperation,\r\n\r\n            PlusOperation,\r\n            MinusOperation,\r\n            MultiplyOperation,\r\n            DivOperation,\r\n            ModOperation,\r\n            UnaryMinusOperation,\r\n\r\n            FunctionCall,\r\n            VariableReference,\r\n\r\n            XPathContext,\r\n\r\n            XNodeSet,\r\n            XBoolean,\r\n            XString,\r\n            XNumber,\r\n\r\n            NamespaceResolver,\r\n            FunctionResolver,\r\n            VariableResolver,\r\n\r\n            Utilities,\r\n        }\r\n    );\r\n\r\n    // helper\r\n    exports.select = function (e, doc, single) {\r\n        return exports.selectWithResolver(e, doc, null, single);\r\n    };\r\n\r\n    exports.useNamespaces = function (mappings) {\r\n        var resolver = {\r\n            mappings: mappings || {},\r\n            lookupNamespaceURI: function (prefix) {\r\n                return this.mappings[prefix];\r\n            }\r\n        };\r\n\r\n        return function (e, doc, single) {\r\n            return exports.selectWithResolver(e, doc, resolver, single);\r\n        };\r\n    };\r\n\r\n    exports.selectWithResolver = function (e, doc, resolver, single) {\r\n        var expression = new XPathExpression(e, resolver, new XPathParser());\r\n        var type = XPathResult.ANY_TYPE;\r\n\r\n        var result = expression.evaluate(doc, type, null);\r\n\r\n        if (result.resultType == XPathResult.STRING_TYPE) {\r\n            result = result.stringValue;\r\n        }\r\n        else if (result.resultType == XPathResult.NUMBER_TYPE) {\r\n            result = result.numberValue;\r\n        }\r\n        else if (result.resultType == XPathResult.BOOLEAN_TYPE) {\r\n            result = result.booleanValue;\r\n        }\r\n        else {\r\n            result = result.nodes;\r\n            if (single) {\r\n                result = result[0];\r\n            }\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n    exports.select1 = function (e, doc) {\r\n        return exports.select(e, doc, true);\r\n    };\r\n\r\n    // end non-node wrapper\r\n})(xpath);\r\n","/* eslint-disable react/no-array-index-key */\nimport React from \"react\";\nimport { TableInfo } from \"../../types\";\nimport \"../../../styles.scss\";\n\ntype TdProps = {\n  dataChunk: TableInfo[];\n  indexKey: number;\n  chunkSize?: 2 | 3;\n};\nexport const BasicRow = ({\n  dataChunk,\n  indexKey,\n  chunkSize,\n}: TdProps): JSX.Element | null => {\n  if (!dataChunk[0].value && !dataChunk[1]?.value && !dataChunk[2]?.value) {\n    return null;\n  }\n\n  let last: TableInfo | null = null;\n  let newDataChunk = dataChunk;\n  if (chunkSize === 3) {\n    newDataChunk = dataChunk.slice(0, 2);\n    [last] = dataChunk.slice(2);\n  }\n\n  return (\n    <>\n      <tr>\n        {newDataChunk.map((singleData, index) => {\n          if (!singleData.value) return null;\n          let colSpan = 1;\n          if (\n            (index === 0 &&\n              (!newDataChunk[index + 1] || !newDataChunk[index + 1].value)) ||\n            (index === 1 &&\n              (!newDataChunk[index - 1] || !newDataChunk[index - 1].value))\n          ) {\n            colSpan = 3;\n          }\n\n          return (\n            <React.Fragment\n              key={`${newDataChunk[0].label}-${String(\n                newDataChunk[0].value\n              )}-${index}-${indexKey}-${newDataChunk[1]?.label || \"\"}-${\n                newDataChunk[1]?.value || \"\"\n              }`}\n            >\n              <td\n                className=\"ctw-ccda-common-td1\"\n                rowSpan={last && last.value && index === 0 ? 2 : 1}\n              >\n                {singleData.label.replace(/:/g, \"\")}\n              </td>\n              <td\n                className=\"ctw-ccda-common-td2\"\n                colSpan={colSpan}\n                rowSpan={last && last.value && index === 0 ? 2 : 1}\n              >\n                {singleData.value}\n              </td>\n            </React.Fragment>\n          );\n        })}\n      </tr>\n      {last && last.value && (\n        <tr>\n          <td className=\"ctw-ccda-common-td1\">\n            {last.label.replace(/:/g, \"\")}\n          </td>\n          <td className=\"ctw-ccda-common-td2\">{last.value}</td>\n        </tr>\n      )}\n    </>\n  );\n};\n","/* eslint-disable react/no-array-index-key */\nimport React from \"react\";\nimport { TableInfo } from \"../../types\";\nimport \"../../../styles.scss\";\n\ntype TdProps = {\n  tuple: [TableInfo, TableInfo];\n  indexKey: number;\n};\nexport const TupleRow = ({ tuple, indexKey }: TdProps): JSX.Element | null => {\n  if (!tuple[0].value && !tuple[1].value) return null;\n\n  return (\n    <tr>\n      {tuple.map((singleData, index) => {\n        if (!singleData.value) return null;\n        let colSpan = 1;\n        if (\n          (index === 0 && !tuple[1].value) ||\n          (index === 1 && !tuple[0].value)\n        ) {\n          colSpan = 3;\n        }\n\n        return (\n          <React.Fragment\n            key={`${tuple[0].label}-${tuple[0].value}-${index}-${indexKey}-${\n              tuple[1].label || \"\"\n            }-${tuple[1].value}`}\n          >\n            <td className=\"ctw-ccda-common-td1\">\n              {singleData.label.replace(/:/g, \"\")}\n            </td>\n            <td className=\"ctw-ccda-common-td2\" colSpan={colSpan}>\n              {singleData.value}\n            </td>\n          </React.Fragment>\n        );\n      })}\n    </tr>\n  );\n};\n","/* eslint-disable react/no-array-index-key */\nimport { TableInfo } from \"../../types\";\nimport { BasicRow } from \"./BasicRow\";\nimport { TupleRow } from \"./TupleRow\";\nimport { chunk, isArray, partition } from \"@/utils/nodash\";\nimport \"../../../styles.scss\";\n\ntype TableProps = {\n  data: (TableInfo | [TableInfo, TableInfo])[];\n  chunkSize?: 2 | 3;\n};\n\nexport const Table = ({ data, chunkSize = 2 }: TableProps): JSX.Element => {\n  const [normalEntries, tupleEntries] = partition(data, (d) => !isArray(d)) as [\n    TableInfo[],\n    [TableInfo, TableInfo][]\n  ];\n\n  const entries = chunk(normalEntries, chunkSize);\n\n  return (\n    <table className=\"ctw-ccda-common-table\">\n      <tbody>\n        {entries.map((dataChunk: TableInfo[], index) => (\n          <BasicRow\n            key={`${dataChunk[0].label}-${index}`}\n            dataChunk={dataChunk}\n            chunkSize={chunkSize}\n            indexKey={index}\n          />\n        ))}\n        {tupleEntries.map((tuple: [TableInfo, TableInfo], index) => (\n          <TupleRow\n            key={`${tuple[0].label}-${tuple[1].label}-${index}`}\n            tuple={tuple}\n            indexKey={index}\n          />\n        ))}\n      </tbody>\n    </table>\n  );\n};\n","import { ModifiedAddress } from \"../types\";\nimport { capitalize, isArray, isEmpty } from \"@/utils/nodash\";\n\nconst addressParser = (addr: ModifiedAddress) => {\n  if (addr.text) return addr.text;\n  let result = \"\";\n\n  result += addr.use ? `${capitalize(addr.use)}: ` : \"\";\n  result += !isEmpty(addr.line) ? `${addr.line?.join(\"\\n\")}\\n` : \"\";\n  result += addr.city ? `${addr.city}, ` : \"\";\n  result += addr.state ? `${addr.state} ` : \"\";\n  result += addr.postalCode || \"\";\n  result += addr.country ? `\\n${addr.country}` : \"\";\n\n  return result;\n};\n\nexport const displayForAddress = (\n  address: ModifiedAddress | ModifiedAddress[]\n): string => {\n  if (isEmpty(address)) return \"\";\n\n  if (isArray(address)) return address.map(addressParser).join(\"\\n\");\n\n  return addressParser(address);\n};\n","import { ModifiedHumanName } from \"../types\";\nimport { isArray, isEmpty } from \"@/utils/nodash\";\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isHumanNameArray(data: any): data is ModifiedHumanName[] {\n  return isArray(data) && data.every((name) => typeof name === \"object\");\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isStringArray(data: any): data is string[] {\n  return isArray(data) && data.every((name) => typeof name === \"string\");\n}\n\nconst nameParser = (name: ModifiedHumanName) => {\n  if (name.text) return name.text;\n  let displayName = \"\";\n  if (name.given && name.given.length > 0) {\n    displayName = name.given.join(\" \");\n    if (name.family) displayName = `${displayName} ${name.family}`;\n  }\n  if (name.prefix && name.prefix.length > 0) {\n    displayName = `${name.prefix.join(\" \")} ${displayName}`;\n  }\n  return displayName;\n};\n\nexport const displayForName = (\n  humanName: ModifiedHumanName[] | ModifiedHumanName | string | string[]\n): string => {\n  if (isEmpty(humanName)) return \"\";\n\n  if (typeof humanName === \"string\") return humanName;\n\n  if (isStringArray(humanName)) {\n    return humanName.reduce((acc, val, index) => {\n      const withNewLine = index === 0 ? \"\" : \"\\n\";\n      return `${acc}${withNewLine}${val}`;\n    }, \"\");\n  }\n\n  if (isHumanNameArray(humanName)) return humanName.map(nameParser).join(\", \");\n\n  return nameParser(humanName);\n};\n","import { ModifiedContactPoint } from \"../types\";\nimport { capitalize, isArray, isEmpty } from \"@/utils/nodash\";\n\nconst telecomParser = ({ use, system, value }: ModifiedContactPoint) => {\n  const withUse = use ? ` (${use})` : \"\";\n  const withSystem = system ? `${capitalize(system)}${withUse}:` : \"\";\n  return `${withSystem} ${value}`.trim();\n};\n\nexport const displayForTelecom = (\n  telecom: ModifiedContactPoint | ModifiedContactPoint[]\n): string => {\n  if (isEmpty(telecom)) return \"\";\n\n  if (isArray(telecom)) return telecom.map(telecomParser).join(\"\\n\");\n\n  return telecomParser(telecom);\n};\n","import xpath from \"xpath\";\nimport { ModifiedAddress } from \"../types\";\nimport { displayForAddress } from \"./displayForAddress\";\nimport { isArray, map } from \"@/utils/nodash\";\n\nexport const addressUseMap: Record<string, string> = {\n  BAD: \"bad\",\n  DIR: \"direct\",\n  H: \"home\",\n  HP: \"primary home\",\n  HV: \"vacation home\",\n  PHYS: \"physical\",\n  PST: \"postal\",\n  PUB: \"public\",\n  TMP: \"temporary\",\n  WP: \"work\",\n  CONF: \"confidential\",\n};\n\nexport const getAddress = (\n  address: Document | Document[] | undefined\n): string => {\n  if (!address) return \"\";\n\n  const parser = (addressXml: Document) => {\n    const use = String(xpath.select1(\"string(@use)\", addressXml));\n\n    const addr: ModifiedAddress = {\n      line: map(\n        xpath.select(\"*[name()='streetAddressLine']\", addressXml) as Document[],\n        (l) => String(xpath.select(\"string(text())\", l))\n      ).filter(Boolean),\n      city: String(xpath.select(\"string(*[name()='city'])\", addressXml)),\n      state: String(xpath.select(\"string(*[name()='state'])\", addressXml)),\n      postalCode: String(\n        xpath.select(\"string(*[name()='postalCode'])\", addressXml)\n      ),\n      country: String(xpath.select(\"string(*[name()='country'])\", addressXml)),\n      use: addressUseMap[use],\n    };\n\n    return displayForAddress(addr);\n  };\n\n  if (isArray(address)) return address.map(parser).join(\"\\n\");\n\n  return parser(address);\n};\n","import xpath from \"xpath\";\nimport { ModifiedContactPoint } from \"../types\";\nimport { displayForTelecom } from \"./displayForTelecom\";\nimport { isArray } from \"@/utils/nodash\";\n\nexport const contactPointUseMap: Record<string, string> = {\n  BAD: \"bad\",\n  CONF: \"confidential\",\n  OLD: \"old\",\n  H: \"home\",\n  HP: \"primary home\",\n  HV: \"vacation Home\",\n  TMP: \"temporary\",\n  WP: \"work\",\n  DIR: \"direct\",\n  PUB: \"public\",\n  AS: \"answering service\",\n  EC: \"emergency:\",\n  MC: \"mobile\",\n  PG: \"pager\",\n};\n\nexport const contactPointTelecomMap: Record<string, string> = {\n  tel: \"phone\",\n  mailto: \"email\",\n};\n\nexport const getTelecom = (telecom?: Document | Document[]): string => {\n  if (!telecom) return \"\";\n\n  const parser = (telecomXml: Document) => {\n    const valueFromTag = String(xpath.select1(\"string(@value)\", telecomXml));\n\n    const splitValue = valueFromTag.split(\":\");\n\n    let system;\n    let value;\n    if (splitValue.length === 2) [system, value] = splitValue;\n\n    if (splitValue.length === 1) [value] = splitValue;\n\n    if (!value) return \"\";\n\n    const backupSystem = value.includes(\"@\")\n      ? contactPointTelecomMap.mailto\n      : contactPointTelecomMap.tel;\n\n    const finalSystem =\n      contactPointTelecomMap[system as string] || backupSystem;\n\n    const contactPoint: ModifiedContactPoint = {\n      system: finalSystem,\n      value,\n      use: contactPointUseMap[\n        String(xpath.select1(\"string(@use)\", telecomXml))\n      ],\n    };\n    return displayForTelecom(contactPoint);\n  };\n\n  if (isArray(telecom)) return telecom.map(parser).join(\"\\n\");\n\n  return parser(telecom);\n};\n","import { getAddress } from \"./getAddress\";\nimport { getTelecom } from \"./getTelecom\";\n\nexport const getContactDetails = (\n  addressXml: Document | Document[],\n  telecomXml: Document | Document[]\n): string => {\n  const address = getAddress(addressXml);\n  const telecom = getTelecom(telecomXml);\n\n  return `${address || \"\"}${address && telecom ? \"\\n\" : \"\"}${telecom || \"\"}`;\n};\n","import xpath from \"xpath\";\nimport { ModifiedHumanName } from \"../types\";\nimport { displayForName } from \"./displayForName\";\nimport { isArray, map } from \"@/utils/nodash\";\n\nconst humanNameUseMap: Record<string, string> = {\n  A: \"Artist/Stage\",\n  ABC: \"Alphabetic\",\n  ASGN: \"Assigned\",\n  C: \"License\",\n  I: \"Indigenous/Tribal\",\n  IDE: \"Ideographic\",\n  L: \"Legal\",\n  P: \"Pseudonym\",\n  PHON: \"Phonetic\",\n  R: \"Religious\",\n  SNDX: \"Soundex\",\n  SRCH: \"Search\",\n  SYL: \"Syllabic\",\n};\n\nexport const getHumanName = (name?: Document | Document[]): string => {\n  if (!name) return \"\";\n\n  const parser = (nameXml: Document) => {\n    const patientParsedName: ModifiedHumanName = {\n      use: humanNameUseMap[String(xpath.select(\"string(@use)\", nameXml))],\n      given: map(\n        xpath.select(\"(*[name()='given'])\", nameXml) as Document[],\n        (n) => String(xpath.select1(\"string(text())\", n))\n      ),\n      family: String(\n        xpath.select1(\"string(*[name()='family']/text())\", nameXml)\n      ),\n      prefix: map(\n        xpath.select(\"(*[name()='prefix'])\", nameXml) as Document[],\n        (n) => String(xpath.select1(\"string(text())\", n))\n      ),\n      suffix: map(\n        xpath.select(\"(*[name()='suffix'])\", nameXml) as Document[],\n        (n) => String(xpath.select1(\"string(text())\", n))\n      ),\n    };\n    return displayForName(patientParsedName);\n  };\n\n  if (isArray(name)) return name.map(parser).join(\"\\n\");\n\n  return parser(name);\n};\n","import xpath from \"xpath\";\n\nexport const getId = (id: Document | undefined): string => {\n  if (!id) return \"\";\n\n  const rootValue = String(xpath.select1(\"string(@root)\", id));\n\n  const extensionValue = String(xpath.select1(\"string(@extension)\", id));\n\n  return `${extensionValue}${extensionValue ? \" (\" : \"\"}${rootValue}${\n    extensionValue ? \")\" : \"\"\n  }`;\n};\n","import { isFinite } from \"@/utils/nodash\";\n\n/**\n * Estimates the index of the timezone sign counting from the end of the string and the type of the sign itself (\"-\" or \"+\")\n *\n *\n * @param date Raw date from C-CDA\n * @returns Index of the timezone signs from the end and sign timezone itself\n *\n */\nconst getIndexFromEnd = (\n  date: string\n): { index: number; timezoneSign?: \"+\" | \"-\" } => {\n  const rawDate = date.replace(/:/g, \"\");\n  const plusSign = rawDate.lastIndexOf(\"+\");\n  const minusSign = rawDate.lastIndexOf(\"-\");\n\n  if (plusSign > 0) {\n    // need to subtract 1 to count the array from the end from 0 index\n    return { index: rawDate.length - plusSign - 1, timezoneSign: \"+\" };\n  }\n\n  if (minusSign > 0) {\n    // check if \"-\" sign is for timezone, it is needed to correctly parse such date 2013-02-2209\n    const signOnThreePlacesLeft = rawDate[minusSign - 3];\n    if (\n      isFinite(Number(signOnThreePlacesLeft)) ||\n      signOnThreePlacesLeft === \"T\" // needed to correctly parse such date 2013-02-22T09-05:00\n    ) {\n      // need to subtract 1 to count the array from the end from 0 index\n      return { index: rawDate.length - minusSign - 1, timezoneSign: \"-\" };\n    }\n\n    return { index: -1 };\n  }\n  return { index: -1 };\n};\n\n/**\n * Checks if fragment of the date is valid.\n *\n *\n * @param fragment Fragment of the date (year, month, day, hour, minute, second)\n * @returns True if valid, otherwise false\n *\n */\nconst isCorrectValue = (fragment: string) =>\n  fragment &&\n  fragment.length > 1 &&\n  fragment.split(\"\").every((char) => isFinite(Number(char)));\n\nconst constructISOString = ({\n  year,\n  month,\n  day,\n  hour,\n  minute,\n  second,\n  timezoneHour,\n  timezoneMinute,\n  timezoneSign,\n}: {\n  year: string;\n  month: string;\n  day: string;\n  hour: string;\n  minute: string;\n  second: string;\n  timezoneHour: string;\n  timezoneMinute: string;\n  timezoneSign: string | undefined;\n}): string => {\n  let result = \"\";\n\n  if (isCorrectValue(year)) {\n    result += year;\n    if (isCorrectValue(month)) {\n      result += `-${month}`;\n      if (isCorrectValue(day)) {\n        result += `-${day}`;\n        if (isCorrectValue(hour)) {\n          result += `T${hour}`;\n\n          if (isCorrectValue(minute)) result += `:${minute}`;\n          else result += \":00\";\n\n          if (isCorrectValue(second)) result += `:${second}`;\n          else result += \":00\";\n\n          if (timezoneSign && isCorrectValue(timezoneHour)) {\n            result += `${timezoneSign}${timezoneHour}`;\n            if (isCorrectValue(timezoneMinute)) result += `:${timezoneMinute}`;\n            else result += \":00\";\n          } else result += \"-00:00\";\n        } else result += \"T00:00:00-00:00\";\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * Convert a raw date from C-CDA to ISOString.\n *\n *\n * @param rawDate Raw date from C-CDA\n * @returns Date in ISOString format\n *\n */\nexport const parseToISOString = (rawDate: string): string => {\n  if (!rawDate) return \"\";\n\n  const { index, timezoneSign } = getIndexFromEnd(rawDate);\n  // delete all junk that can be in date in C-CDA document\n  let date = rawDate\n    .replace(/T/g, \"\")\n    .replace(/-/g, \"\")\n    // plus sign can be only once, no need for regexp\n    .replace(\"+\", \"\")\n    .replace(/:/g, \"\");\n\n  let timezone = \"\";\n\n  // if sign index from the end is equal to 4 (-0500) or 2 (-05) and date has at least hour it means that there is a timezone\n  if ((index === 4 || index === 2) && date.length > 9) {\n    timezone = date.substring(date.length - index);\n    date = date.substring(0, date.length - index);\n  }\n\n  const year = date.slice(0, 4);\n  const month = date.slice(4, 6);\n  const day = date.slice(6, 8);\n  const hour = date.slice(8, 10);\n  const minute = date.slice(10, 12);\n  const second = date.slice(12, 14);\n\n  const timezoneHour = timezone.slice(0, 2);\n  const timezoneMinute = timezone.slice(2);\n\n  if (!day) return \"\";\n\n  return constructISOString({\n    year,\n    month,\n    day,\n    hour,\n    minute,\n    second,\n    timezoneHour,\n    timezoneMinute,\n    timezoneSign,\n  });\n};\n","import { isBefore, isEqual } from \"date-fns\";\nimport { Period } from \"fhir/r4\";\nimport xpath from \"xpath\";\nimport { parseToISOString } from \"./parseToISOString\";\n\nexport const getPeriod = (xmlData?: Document): Period => {\n  if (!xmlData) return {};\n\n  const low = String(xpath.select1(\"string(*[name()='low']/@value)\", xmlData));\n  const high = String(\n    xpath.select1(\"string(*[name()='high']/@value)\", xmlData)\n  );\n\n  if (!low && !high) return {};\n\n  if (low && !high) {\n    return {\n      start: parseToISOString(low),\n    };\n  }\n\n  if (!low && high) {\n    return {\n      end: parseToISOString(high),\n    };\n  }\n\n  let start = parseToISOString(low);\n  let end = parseToISOString(high);\n\n  // it indicates that at least on of the dates has minutes so both have to be parsed to iso string\n  if (start.includes(\"T\") || end.includes(\"T\")) {\n    start = parseToISOString(start);\n    end = parseToISOString(end);\n  }\n\n  if (\n    isBefore(new Date(start), new Date(end)) ||\n    isEqual(new Date(start), new Date(end))\n  ) {\n    return { start, end };\n  }\n\n  return { start };\n};\n","import { escapeRegExp, identity, isArray } from \"@/utils/nodash\";\n\nconst replaceInXML = (\n  xmlString: string,\n  toReplace: string | string[],\n  toReplaceWith: string,\n  escape = true\n): string => {\n  if (isArray(toReplace)) {\n    return toReplace.reduce(\n      (acc, val) => replaceInXML(acc, val, toReplaceWith),\n      xmlString\n    );\n  }\n\n  const modify: (_: string) => string = escape ? escapeRegExp : identity;\n  return xmlString.replace(new RegExp(modify(toReplace), \"g\"), toReplaceWith);\n};\n\nconst replaceTag = (xmlString: string, oldTag: string, newTag: string) => {\n  const oldTags = [`</${oldTag}>`, `<${oldTag}>`, `</${oldTag}`, `<${oldTag}`];\n  const newTags = [`</${newTag}>`, `<${newTag}>`, `</${newTag}`, `<${newTag}`];\n\n  return oldTags.reduce(\n    (acc, _, index) => replaceInXML(acc, oldTags[index], newTags[index]),\n    xmlString\n  );\n};\n\nexport const fixHtml = (xmlData: Document): string => {\n  let fixedHtml = xmlData.toString();\n\n  // these are not needed at all\n  fixedHtml = replaceInXML(\n    fixedHtml,\n    [\n      \"<list/>\",\n      \"<item/>\",\n      \"<content/>\",\n      \"<paragraph/>\",\n      \"<section/>\",\n      \"<br/>\",\n      '<text xmlns=\"urn:hl7-org:v3\">',\n      \"<text />\",\n      \"<text/>\",\n    ],\n    \"\"\n  );\n\n  // there can be more strange attributes in C-CDA that need to be changed\n  fixedHtml = replaceInXML(fixedHtml, ' styleCode=\"(.*?)\"', \"\", false);\n\n  fixedHtml = replaceTag(fixedHtml, \"section\", \"div\");\n  fixedHtml = replaceTag(fixedHtml, \"list\", \"ul\");\n  fixedHtml = replaceTag(fixedHtml, \"item\", \"li\");\n  fixedHtml = replaceTag(fixedHtml, \"content\", \"div\");\n  fixedHtml = replaceTag(fixedHtml, \"paragraph\", \"p\");\n\n  return fixedHtml;\n};\n","import { format } from \"date-fns\";\n\nexport const formatDate = (isoDate: string | undefined): string => {\n  if (!isoDate) return \"\";\n  const [date, time] = isoDate.split(\"T\");\n\n  return (\n    format(new Date(date), \"MMMM dd, yyyy\") +\n    (time.split(\"\").some((char) => Number(char) > 0) ? `, ${time}` : \"\")\n  );\n};\n","type GeneralInfo = {\n  name: string;\n  contactDetails: string;\n};\n\ntype ExtendedGeneralInfo = GeneralInfo & {\n  relationship?: string;\n  time?: string;\n  functionCode?: string;\n};\n\ntype GeneralInfoWithOrg = GeneralInfo & {\n  organization: GeneralInfo;\n};\n\nexport const isGeneralInfoExist = (\n  item: GeneralInfo | undefined\n): item is GeneralInfo => !!item;\n\nexport const isExtendedGeneralInfoExist = (\n  item: ExtendedGeneralInfo | undefined\n): item is ExtendedGeneralInfo => !!item;\n\nexport type { GeneralInfo, ExtendedGeneralInfo, GeneralInfoWithOrg };\n","import xpath from \"xpath\";\nimport {\n  getContactDetails,\n  getHumanName,\n  parseToISOString,\n} from \"../../helpers\";\nimport { ExtendedGeneralInfo, isExtendedGeneralInfoExist } from \"../../types\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getAuthenticatorData = (\n  document: Document\n): ExtendedGeneralInfo[] | undefined => {\n  const authenticators = xpath.select(\n    \"*[name()='ClinicalDocument']/*[name()='authenticator']\",\n    document\n  ) as Document[];\n  if (isEmpty(authenticators)) return undefined;\n  return authenticators\n    .map((authenticator): ExtendedGeneralInfo | undefined => {\n      const assignedEntity = xpath.select1(\n        \"*[name()='assignedEntity']\",\n        authenticator\n      ) as Document | undefined;\n      if (!assignedEntity) return undefined;\n      const assignedPerson = xpath.select1(\n        \"*[name()='assignedPerson']\",\n        assignedEntity\n      ) as Document;\n      const name = getHumanName(\n        xpath.select(\"*[name()='name']\", assignedPerson) as Document[]\n      );\n      const contactDetails = getContactDetails(\n        xpath.select(\"*[name()='addr']\", assignedEntity) as Document[],\n        xpath.select(\"*[name()='telecom']\", assignedEntity) as Document[]\n      );\n\n      const time = parseToISOString(\n        String(xpath.select1(\"string(*[name()='time']/@value)\", authenticator))\n      );\n      return { name, contactDetails, time };\n    })\n    .filter(isExtendedGeneralInfoExist);\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getAuthenticatorData } from \"./data\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const Authenticator = ({\n  document,\n}: DocumentOnlyProps): JSX.Element | null => {\n  const authenticators = getAuthenticatorData(document);\n\n  if (!authenticators || isEmpty(authenticators)) return null;\n\n  const finalData = authenticators.flatMap((authenticator) => [\n    {\n      label: \"Authenticator\",\n      value: `${authenticator.name || \"Unknown\"}${\n        authenticator.time ? ` signed at ${authenticator.time}` : \"\"\n      }`,\n    },\n    {\n      label: \"Contact Details\",\n      value: authenticator.contactDetails,\n    },\n  ]);\n\n  return <Table data={finalData} />;\n};\n","import xpath from \"xpath\";\nimport { getHumanName, parseToISOString } from \"../../../helpers\";\nimport { LabelValueType } from \"../../../types\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getAuthor = (\n  document: Document\n): Record<string, LabelValueType[]> | undefined => {\n  const authors = xpath.select(\n    \"*[name()='ClinicalDocument']/*[name()='author']\",\n    document\n  ) as Document[];\n\n  if (isEmpty(authors)) return undefined;\n\n  const result = authors.map((author): LabelValueType[] => {\n    const personName = xpath.select1(\n      \"*[name()='assignedAuthor']/*[name()='assignedPerson']/*[name()='name']\",\n      author\n    ) as Document | undefined;\n    const deviceName = xpath.select1(\n      \"*[name()='assignedAuthor']/*[name()='assignedAuthoringDevice']\",\n      author\n    ) as Document | undefined;\n\n    let name = \"\";\n\n    if (personName) name = getHumanName(personName);\n    else if (deviceName) {\n      const manufacturerModelName = String(\n        xpath.select1(\"string(*[name()='manufacturerModelName'])\", deviceName)\n      );\n      const softwareName = String(\n        xpath.select1(\"string(*[name()='softwareName'])\", deviceName)\n      );\n\n      name = [manufacturerModelName, softwareName].filter(Boolean).join(\"; \");\n    }\n    const representedOrganizationName = String(\n      xpath.select1(\n        \"string(*[name()='assignedAuthor']/*[name()='representedOrganization']/*[name()='name'])\",\n        author\n      )\n    );\n\n    const authoredOn = parseToISOString(\n      String(xpath.select1(\"string(*[name()='time'])\", author))\n    );\n\n    return [\n      { label: \"Name:\", value: name },\n      { label: \"Organization:\", value: representedOrganizationName },\n      { label: \"Authored on\", value: authoredOn },\n    ];\n  });\n\n  return result.reduce(\n    (acc, val, index) => ({ ...acc, [`author${index + 1}`]: val }),\n    {}\n  );\n};\n","import xpath from \"xpath\";\nimport { getContactDetails } from \"../../helpers\";\nimport { GeneralInfoWithOrg, LabelValueType } from \"../../types\";\nimport { getAuthor as getAuthorDataFromHeader } from \"../Header/data/getAuthor\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getAuthorData = (\n  document: Document\n): GeneralInfoWithOrg[] | undefined => {\n  const authorXmls = xpath.select(\n    \"*[name()='ClinicalDocument']/*[name()='author']\",\n    document\n  ) as Document[];\n\n  if (isEmpty(authorXmls)) return undefined;\n\n  const authors = getAuthorDataFromHeader(document) as Record<\n    string,\n    LabelValueType[]\n  >; // we can cast because we are sure that authors exist\n\n  return authorXmls.map((authorXml, index) => {\n    const assignedAuthor = xpath.select1(\n      \"*[name()='assignedAuthor']\",\n      authorXml\n    ) as Document;\n\n    const authorContactDetails = getContactDetails(\n      xpath.select(\"*[name()='addr']\", assignedAuthor) as Document[],\n      xpath.select(\"*[name()='telecom']\", assignedAuthor) as Document[]\n    );\n\n    const representedOrganization = xpath.select1(\n      \"*[name()='representedOrganization']\",\n      assignedAuthor\n    ) as Document | undefined;\n\n    const result: GeneralInfoWithOrg = {\n      name: authors[`author${index + 1}`][0].value,\n      contactDetails: authorContactDetails,\n      organization: {\n        name: authors[`author${index + 1}`][1].value,\n        contactDetails: \"\",\n      },\n    };\n\n    if (representedOrganization) {\n      const organizationContactDetails = getContactDetails(\n        xpath.select(\"*[name()='addr']\", representedOrganization) as Document[],\n        xpath.select(\n          \"*[name()='telecom']\",\n          representedOrganization\n        ) as Document[]\n      );\n\n      return {\n        ...result,\n        organization: {\n          ...result.organization,\n          contactDetails: organizationContactDetails,\n        },\n      };\n    }\n\n    return result;\n  });\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getAuthorData } from \"./data\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const Author = ({ document }: DocumentOnlyProps) => {\n  const authors = getAuthorData(document);\n\n  if (!authors || isEmpty(authors)) return null;\n\n  const finalData = authors.flatMap((author) => [\n    {\n      label: \"Author\",\n      value: `${author.name || \"Unknown\"}${\n        author.organization.name\n          ? `, Organization: ${author.organization.name}`\n          : \"\"\n      }`,\n    },\n    {\n      label: \"Contact Details\",\n      value: author.contactDetails,\n    },\n    {\n      label: \"Contact Details (Organization)\",\n      value: author.organization.contactDetails,\n    },\n  ]);\n\n  return <Table data={finalData} chunkSize={3} />;\n};\n","import xpath from \"xpath\";\nimport { getId } from \"../../../helpers\";\nimport { LabelValueType } from \"../../../types\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getConsent = (\n  document: Document\n): Record<string, LabelValueType[]> | undefined => {\n  const consents = xpath.select(\n    \"*[name()='ClinicalDocument']/*[name()='authorization']/*[name()='consent']\",\n    document\n  ) as Document[];\n\n  if (isEmpty(consents)) return undefined;\n\n  const result = consents.map((consent) => {\n    const id = getId(xpath.select1(\"*[name()='id']\", consent) as Document);\n    const code = String(\n      xpath.select1(\"string(*[name()='code']/@displayName)\", consent)\n    );\n    const status = String(\n      xpath.select1(\"string(*[name()='statusCode']/@code)\", consent)\n    );\n    return [\n      { label: \"ID:\", value: id },\n      { label: \"Code:\", value: code },\n      { label: \"Status:\", value: status },\n    ];\n  });\n\n  return result.reduce(\n    (acc, order, index) => ({ ...acc, [`consent${index + 1}`]: order }),\n    {}\n  );\n};\n","import { getConsent as getConsentDataFromHeader } from \"../Header/data/getConsent\";\n\nexport const getAuthorizationData = (document: Document) => {\n  const inFulfillmentOf = getConsentDataFromHeader(document);\n\n  return Object.values(inFulfillmentOf || {});\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getAuthorizationData } from \"./data\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const Authorization = ({ document }: DocumentOnlyProps) => {\n  const authorizations = getAuthorizationData(document);\n\n  if (isEmpty(authorizations)) return null;\n\n  const finalData = authorizations.flatMap((authorization) => [\n    {\n      label: \"Consent\",\n      value: `Order: ${authorization[0].value || \"Unknown\"}, ${\n        authorization[1].value || \"Unknown\"\n      }, ${authorization[2].value || \"Unknown\"}`,\n    },\n    { label: \"\", value: \"\" },\n  ]);\n\n  return <Table data={finalData} />;\n};\n","import xpath from \"xpath\";\nimport { getContactDetails } from \"../../helpers\";\nimport { GeneralInfo } from \"../../types\";\n\nexport const getCustodianData = (\n  document: Document\n): GeneralInfo | undefined => {\n  const representedCustodianOrganization = xpath.select1(\n    \"*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']\",\n    document\n  ) as Document | undefined;\n\n  if (!representedCustodianOrganization) return undefined;\n\n  const name = String(\n    xpath.select1(\"string(*[name()='name'])\", representedCustodianOrganization)\n  );\n\n  const contactDetails = getContactDetails(\n    xpath.select1(\n      \"*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']/*[name()='addr']\",\n      document\n    ) as Document,\n    xpath.select1(\n      \"*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']/*[name()='telecom']\",\n      document\n    ) as Document\n  );\n\n  return { name, contactDetails };\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getCustodianData } from \"./data\";\n\nexport const Custodian = ({ document }: DocumentOnlyProps) => {\n  const custodian = getCustodianData(document);\n\n  if (!custodian) return null;\n\n  const { name, contactDetails } = custodian;\n  const finalData = [\n    {\n      label: \"Custodian\",\n      value: name,\n    },\n    {\n      label: \"Contact Details\",\n      value: contactDetails,\n    },\n  ];\n\n  return <Table data={finalData} />;\n};\n","import xpath from \"xpath\";\nimport { getContactDetails, getHumanName } from \"../../helpers\";\nimport { GeneralInfo } from \"../../types\";\n\nexport const getDataEntererData = (\n  document: Document\n): GeneralInfo | undefined => {\n  const dataEnterer = xpath.select1(\n    \"*[name()='ClinicalDocument']/*[name()='dataEnterer']/*[name()='assignedEntity']\",\n    document\n  ) as Document | undefined;\n\n  if (!dataEnterer) return undefined;\n\n  const assignedPerson = xpath.select1(\n    \"*[name()='assignedPerson']\",\n    dataEnterer\n  ) as Document;\n\n  const name = getHumanName(\n    xpath.select(\"*[name()='name']\", assignedPerson) as Document[]\n  );\n\n  const contactDetails = getContactDetails(\n    xpath.select(\"*[name()='addr']\", dataEnterer) as Document[],\n    xpath.select(\"*[name()='telecom']\", dataEnterer) as Document[]\n  );\n\n  return { name, contactDetails };\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getDataEntererData } from \"./data\";\n\nexport const DataEnterer = ({ document }: DocumentOnlyProps) => {\n  const dataEnterer = getDataEntererData(document);\n\n  if (!dataEnterer) return null;\n\n  const { name, contactDetails } = dataEnterer;\n  const finalData = [\n    {\n      label: \"Data Enterer\",\n      value: name,\n    },\n    {\n      label: \"Contact Details\",\n      value: contactDetails,\n    },\n  ];\n\n  return <Table data={finalData} />;\n};\n","import xpath from \"xpath\";\nimport { formatDate, getId, parseToISOString } from \"../../helpers\";\n\nconst confidentialityCodeMap: Record<string, string> = {\n  N: \"normal\",\n  R: \"restricted\",\n  V: \"very restricted\",\n};\nexport const getDocumentData = (document: Document) => {\n  const id = getId(\n    xpath.select1(\n      \"*[name()='ClinicalDocument']/*[name()='id']\",\n      document\n    ) as Document\n  );\n\n  const effectiveTimeValue = parseToISOString(\n    String(\n      xpath.select1(\n        \"string(*[name()='ClinicalDocument']/*[name()='effectiveTime']/@value)\",\n        document\n      )\n    )\n  );\n\n  const createdOn = formatDate(effectiveTimeValue);\n\n  const version = String(\n    xpath.select1(\n      \"string(*[name()='ClinicalDocument']/*[name()='versionNumber']/@value)\",\n      document\n    )\n  );\n  const setId = getId(\n    xpath.select1(\n      \"*[name()='ClinicalDocument']/*[name()='setId']\",\n      document\n    ) as Document\n  );\n  const confidentialityCode =\n    confidentialityCodeMap[\n      String(\n        xpath.select1(\n          \"string(*[name()='ClinicalDocument']/*[name()='confidentialityCode']/@code)\",\n          document\n        )\n      )\n    ];\n  const code = String(\n    xpath.select1(\n      \"string(*[name()='ClinicalDocument']/*[name()='code']/@displayName)\",\n      document\n    )\n  );\n  const languageCode = String(\n    xpath.select1(\n      \"string(*[name()='ClinicalDocument']/*[name()='languageCode']/@code)\",\n      document\n    )\n  );\n  return {\n    id,\n    createdOn,\n    version,\n    setId,\n    confidentialityCode,\n    code,\n    languageCode,\n  };\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getDocumentData } from \"./data\";\n\nexport const Document = ({ document }: DocumentOnlyProps) => {\n  const {\n    id,\n    createdOn,\n    version,\n    setId,\n    confidentialityCode,\n    code,\n    languageCode,\n  } = getDocumentData(document);\n\n  const finalData = [\n    {\n      label: \"Document\",\n      value: (\n        <>\n          <b>ID: </b>\n          {id}\n          {setId && (\n            <>\n              <br />\n              <b>Set ID: </b>\n              {setId}\n            </>\n          )}\n        </>\n      ),\n    },\n    {\n      label: \"Created on\",\n      value: createdOn,\n    },\n    {\n      label: \"Version\",\n      value: version || \"Unknown\",\n    },\n    {\n      label: \"Confidentiality\",\n      value: confidentialityCode,\n    },\n    {\n      label: \"Code\",\n      value: code,\n    },\n    {\n      label: \"Language\",\n      value: languageCode,\n    },\n  ];\n\n  return <Table data={finalData} />;\n};\n","import xpath from \"xpath\";\nimport { formatDate, getHumanName, getPeriod } from \"../../../helpers\";\nimport { LabelValueType } from \"../../../types\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getDocumentationOf = (\n  document: Document\n): Record<string, LabelValueType[]> | undefined => {\n  const serviceEvents = xpath.select(\n    \"//*[name()='documentationOf']/*[name()='serviceEvent']\",\n    document\n  ) as Document[];\n\n  if (isEmpty(serviceEvents)) return undefined;\n\n  const result = serviceEvents.map((serviceEvent) => {\n    const effectiveTime = xpath.select1(\n      \"*[name()='effectiveTime']\",\n      serviceEvent\n    ) as Document;\n\n    const period = getPeriod(effectiveTime);\n\n    const performerNames = xpath.select(\n      \"*[name()='performer']/*[name()='assignedEntity']/*[name()='assignedPerson']/*[name()='name']\",\n      serviceEvent\n    ) as Document[];\n\n    const performers = performerNames.map((performer) =>\n      getHumanName(performer)\n    );\n\n    return [\n      {\n        label: \"Date/Time:\",\n        value:\n          period.start || period.end\n            ? `from ${formatDate(period.start) || \"unknown\"} to ${\n                formatDate(period.end) || \"unknown\"\n              }`\n            : \"\",\n      },\n      ...performers.map((performer) => ({\n        label: \"Performer:\",\n        value: performer,\n      })),\n    ];\n  });\n\n  return result.reduce(\n    (acc, val, index) => ({ ...acc, [`documentationOf${index + 1}`]: val }),\n    {}\n  );\n};\n","import xpath from \"xpath\";\nimport { getContactDetails } from \"../../helpers\";\nimport {\n  ExtendedGeneralInfo,\n  isGeneralInfoExist,\n  LabelValueType,\n} from \"../../types\";\nimport { getDocumentationOf as getDocumentationOfDataFromHeader } from \"../Header/data/getDocumentationOf\";\nimport { get, isEmpty } from \"@/utils/nodash\";\n\nexport const getDocumentationOfData = (\n  document: Document\n):\n  | { dateTime: string; finalPerformers: ExtendedGeneralInfo[] }[]\n  | undefined => {\n  const serviceEventXmls = xpath.select(\n    \"//*[name()='documentationOf']/*[name()='serviceEvent']\",\n    document\n  ) as Document[];\n\n  if (isEmpty(serviceEventXmls)) return undefined;\n\n  const documentationOfs = getDocumentationOfDataFromHeader(document) as Record<\n    string,\n    LabelValueType[]\n  >; // we can cast, it won't be undefined\n\n  return serviceEventXmls.map(\n    (\n      serviceEventXml,\n      index\n    ): { dateTime: string; finalPerformers: ExtendedGeneralInfo[] } => {\n      const performerXmls = xpath.select(\n        \"*[name()='performer']\",\n        serviceEventXml\n      ) as Document[];\n\n      const finalPerformers = performerXmls.map(\n        (performerXml, index2): ExtendedGeneralInfo | undefined => {\n          const functionCode = String(\n            xpath.select1(\n              \"string(*[name()='functionCode']/@displayName)\",\n              performerXml\n            )\n          );\n          const name = get(\n            documentationOfs,\n            `documentationOf${index + 1}[${index2 + 1}].value`\n          ) as unknown as string; // rest elements are performers\n\n          const contactDetails = getContactDetails(\n            xpath.select(\n              \"*[name()='assignedEntity']/*[name()='addr']\",\n              performerXml\n            ) as Document[],\n            xpath.select(\n              \"*[name()='assignedEntity']/*[name()='telecom']\",\n              performerXml\n            ) as Document[]\n          );\n\n          if (!name && !functionCode && !contactDetails) return undefined;\n\n          return {\n            functionCode,\n            name,\n            contactDetails,\n          };\n        }\n      );\n\n      return {\n        dateTime: get(\n          documentationOfs,\n          `documentationOf${index + 1}[0].value`\n        ) as unknown as string, // first element is date time\n        finalPerformers: finalPerformers.filter(isGeneralInfoExist),\n      };\n    }\n  );\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getDocumentationOfData } from \"./data\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const DocumentationOf = ({ document }: DocumentOnlyProps) => {\n  const documentationOfs = getDocumentationOfData(document);\n\n  if (!documentationOfs || isEmpty(documentationOfs)) return null;\n\n  const finalData = documentationOfs.flatMap((documentationOf) => [\n    { label: \"Documentation of - Date/Time\", value: documentationOf.dateTime },\n    { label: \"\", value: \"\" },\n    ...documentationOf.finalPerformers.flatMap((performer) => [\n      {\n        label: \"Performer\",\n        value: `${performer.name || \"Unknown\"}${\n          performer.functionCode ? ` - ${performer.functionCode}` : \"\"\n        }`,\n      },\n      { label: \"Contact Details\", value: performer.contactDetails },\n    ]),\n  ]);\n\n  return <Table data={finalData} />;\n};\n","import xpath from \"xpath\";\nimport { formatDate, getId, getPeriod } from \"../../../helpers\";\nimport { LabelValueType } from \"../../../types\";\n\nexport const getEncounter = (\n  document: Document\n): LabelValueType[] | undefined => {\n  const encompassingEncounter = xpath.select1(\n    \"*[name()='ClinicalDocument']/*[name()='componentOf']/*[name()='encompassingEncounter']\",\n    document\n  ) as Document | undefined;\n\n  if (!encompassingEncounter) return undefined;\n\n  const id = getId(\n    xpath.select1(\"*[name()='id']\", encompassingEncounter) as Document\n  );\n\n  const type = String(\n    xpath.select1(\n      \"string(*[name()='code']/@displayName)\",\n      encompassingEncounter\n    ) as Document\n  );\n\n  const period = getPeriod(\n    xpath.select1(\n      \"*[name()='effectiveTime']\",\n      encompassingEncounter\n    ) as Document\n  );\n\n  return [\n    {\n      label: \"ID:\",\n      value: period.start || period.end || id ? id || \"Unknown\" : \"\",\n    },\n    { label: \"Type:\", value: type },\n    {\n      label: \"Date/Time:\",\n      value:\n        period.start || period.end\n          ? `from ${formatDate(period.start) || \"unknown\"} to ${\n              formatDate(period.end) || \"unknown\"\n            }`\n          : \"\",\n    },\n  ];\n};\n","import xpath from \"xpath\";\nimport { getId } from \"../../helpers\";\nimport { LabelValueType } from \"../../types\";\nimport { getEncounter } from \"../Header/data/getEncounter\";\n\nexport const getEncounterData = (document: Document) => {\n  const encompassingEncounter = xpath.select1(\n    \"*[name()='ClinicalDocument']/*[name()='componentOf']/*[name()='encompassingEncounter']\",\n    document\n  ) as Document | undefined;\n\n  if (!encompassingEncounter) return undefined;\n\n  const encounter = getEncounter(document) as LabelValueType[];\n\n  const dischargeDisposition = String(\n    xpath.select1(\n      \"string(*[name()='dischargeDispositionCode']/@displayName)\",\n      encompassingEncounter\n    )\n  );\n\n  const encounterLocation = getId(\n    xpath.select1(\n      \"*[name()='location']/*[name()='healthCareFacility']/*[name()='id']\",\n      encompassingEncounter\n    ) as Document\n  );\n\n  return {\n    id: encounter[0], // we now that they are returned in that order\n    type: encounter[1],\n    dateTime: encounter[2],\n    dischargeDisposition,\n    encounterLocation: encounterLocation ? `ID: ${encounterLocation}` : null,\n  };\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getEncounterData } from \"./data\";\n\nexport const Encounter = ({ document }: DocumentOnlyProps) => {\n  const encounter = getEncounterData(document);\n\n  if (!encounter) return null;\n\n  const { dischargeDisposition, encounterLocation, id, type, dateTime } =\n    encounter;\n\n  const finalData = [\n    {\n      label: \"Encounter\",\n      value:\n        dateTime.value ||\n        dischargeDisposition ||\n        encounterLocation ||\n        id.value ? (\n          <>\n            <b>ID: </b>\n            {id.value || \"Unknown\"}\n            {type.value && (\n              <>\n                <br />\n                <b>Type: </b>\n                {type.value}\n              </>\n            )}\n          </>\n        ) : null,\n    },\n    {\n      label: \"Date/Time\",\n      value: dateTime.value,\n    },\n    {\n      label: \"Discharge Disposition\",\n      value: dischargeDisposition,\n    },\n    {\n      label: \"Encounter Location\",\n      value: encounterLocation,\n    },\n  ];\n\n  return <Table data={finalData} />;\n};\n","import xpath from \"xpath\";\nimport { getContactDetails, getHumanName } from \"../../helpers\";\nimport { ExtendedGeneralInfo, isExtendedGeneralInfoExist } from \"../../types\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getInformantData = (\n  document: Document\n): ExtendedGeneralInfo[] | undefined => {\n  const informants = xpath.select(\n    \"*[name()='ClinicalDocument']/*[name()='informant']\",\n    document\n  ) as Document[];\n\n  if (isEmpty(informants)) return undefined;\n\n  return informants\n    .map((informant): ExtendedGeneralInfo | undefined => {\n      const assignedEntity = xpath.select1(\n        \"*[name()='assignedEntity']\",\n        informant\n      ) as Document | undefined;\n\n      if (assignedEntity) {\n        const assignedPerson = xpath.select1(\n          \"*[name()='assignedPerson']\",\n          assignedEntity\n        ) as Document;\n\n        const name = getHumanName(\n          xpath.select(\"*[name()='name']\", assignedPerson) as Document[]\n        );\n\n        const contactDetails = getContactDetails(\n          xpath.select(\"*[name()='addr']\", assignedEntity) as Document[],\n          xpath.select(\"*[name()='telecom']\", assignedEntity) as Document[]\n        );\n\n        return { name, contactDetails, relationship: \"\" };\n      }\n\n      const relatedEntity = xpath.select1(\n        \"*[name()='relatedEntity']\",\n        informant\n      ) as Document | undefined;\n\n      if (relatedEntity) {\n        const relatedPerson = xpath.select1(\n          \"*[name()='relatedPerson']\",\n          relatedEntity\n        ) as Document;\n\n        const name = getHumanName(\n          xpath.select(\"*[name()='name']\", relatedPerson) as Document[]\n        );\n\n        const contactDetails = getContactDetails(\n          xpath.select(\"*[name()='addr']\", relatedEntity) as Document[],\n          xpath.select(\"*[name()='telecom']\", relatedEntity) as Document[]\n        );\n\n        const relationship = String(\n          xpath.select1(\"string(*[name()='code']/@displayName)\", relatedEntity)\n        ).toLowerCase();\n\n        return { name, contactDetails, relationship };\n      }\n\n      return undefined;\n    })\n    .filter(isExtendedGeneralInfoExist);\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getInformantData } from \"./data\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const Informant = ({ document }: DocumentOnlyProps) => {\n  const informants = getInformantData(document);\n\n  if (!informants || isEmpty(informants)) return null;\n\n  const finalData = informants.flatMap((informant) => [\n    {\n      label: \"Informant\",\n      value: `${informant.name || \"Unknown\"}${\n        informant.relationship ? ` - ${informant.relationship}` : \"\"\n      }`,\n    },\n    {\n      label: \"Contact Details\",\n      value: informant.contactDetails,\n    },\n  ]);\n\n  return <Table data={finalData} />;\n};\n","import xpath from \"xpath\";\nimport { getContactDetails, getHumanName, getId } from \"../../helpers\";\nimport { GeneralInfoWithOrg } from \"../../types\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getInformationRecipientData = (\n  document: Document\n): GeneralInfoWithOrg[] | undefined => {\n  const intendedRecipients = xpath.select(\n    \"*[name()='ClinicalDocument']/*[name()='informationRecipient']/*[name()='intendedRecipient']\",\n    document\n  ) as Document[];\n\n  if (isEmpty(intendedRecipients)) return undefined;\n\n  return intendedRecipients.map((intendedRecipient) => {\n    const informationRecipient = xpath.select1(\n      \"*[name()='informationRecipient']\",\n      intendedRecipient\n    ) as Document | undefined;\n\n    const receivedOrganization = xpath.select1(\n      \"*[name()='receivedOrganization']\",\n      intendedRecipient\n    ) as Document | undefined;\n\n    if (informationRecipient) {\n      const informationRecipientName = getHumanName(\n        xpath.select1(\"*[name()='name']\", informationRecipient) as Document\n      );\n      const informationRecipientOrganizationName = String(\n        xpath.select1(\"string(*[name()='name']/node())\", receivedOrganization)\n      );\n\n      return {\n        name: informationRecipientName,\n        contactDetails: \"\",\n        organization: {\n          name: informationRecipientOrganizationName,\n          contactDetails: \"\",\n        },\n      };\n    }\n\n    const ids = (\n      xpath.select(\"*[name()='id']\", intendedRecipient) as Document[]\n    )\n      .map(getId)\n      .join(\", \");\n\n    const informationRecipientContactDetails = getContactDetails(\n      xpath.select(\"*[name()='addr']\", intendedRecipient) as Document[],\n      xpath.select(\"*[name()='telecom']\", intendedRecipient) as Document[]\n    );\n\n    const result = {\n      name: ids,\n      contactDetails: informationRecipientContactDetails,\n      organization: {\n        name: \"\",\n        contactDetails: \"\",\n      },\n    };\n\n    if (receivedOrganization) {\n      const receivedOrganizationName = String(\n        xpath.select1(\"string(*[name()='name']/node())\", receivedOrganization)\n      );\n\n      const informationRecipientReceivedOrganizationContactDetails =\n        getContactDetails(\n          xpath.select(\"*[name()='addr']\", receivedOrganization) as Document[],\n          xpath.select(\n            \"*[name()='telecom']\",\n            receivedOrganization\n          ) as Document[]\n        );\n\n      return {\n        ...result,\n        organization: {\n          name: receivedOrganizationName,\n          contactDetails:\n            informationRecipientReceivedOrganizationContactDetails,\n        },\n      };\n    }\n\n    return result;\n  });\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getInformationRecipientData } from \"./data\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const InformationRecipient = ({ document }: DocumentOnlyProps) => {\n  const informationRecipients = getInformationRecipientData(document);\n\n  if (!informationRecipients || isEmpty(informationRecipients)) return null;\n\n  const finalData = informationRecipients.flatMap((informationRecipient) => [\n    {\n      label: \"Information Recipient\",\n      value: informationRecipient.name,\n    },\n    {\n      label: \"Contact Details\",\n      value: informationRecipient.contactDetails,\n    },\n    {\n      label: \"Organization\",\n      value: informationRecipient.organization.name,\n    },\n    {\n      label: \"Contact Details (Organization)\",\n      value: informationRecipient.organization.contactDetails,\n    },\n  ]);\n\n  return <Table data={finalData} />;\n};\n","import xpath from \"xpath\";\nimport { getId } from \"../../../helpers\";\nimport { LabelValueType } from \"../../../types\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getInFulfillmentOf = (\n  document: Document\n): Record<string, LabelValueType[]> | undefined => {\n  const orderXmls = xpath.select(\n    \"*[name()='ClinicalDocument']/*[name()='inFulfillmentOf']/*[name()='order']\",\n    document\n  ) as Document[];\n\n  if (isEmpty(orderXmls)) return undefined;\n\n  const orders = orderXmls.map((orderXml) => {\n    const id = getId(xpath.select1(\"*[name()='id']\", orderXml) as Document);\n    const code = String(\n      xpath.select1(\"string(*[name()='code']/@displayName)\", orderXml)\n    );\n\n    return [\n      { label: \"Order ID:\", value: id },\n      { label: \"Code:\", value: code },\n    ];\n  });\n\n  return orders.reduce(\n    (acc, order, index) => ({ ...acc, [`inFulfillmentOf${index + 1}`]: order }),\n    {}\n  );\n};\n","import { getInFulfillmentOf as getInFulfillmentOfDataFromHeader } from \"../Header/data/getInFulfillmentOf\";\n\nexport const getInFulfillmentOfData = (document: Document) => {\n  const inFulfillmentOf = getInFulfillmentOfDataFromHeader(document);\n\n  return Object.values(inFulfillmentOf || {});\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getInFulfillmentOfData } from \"./data\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const InFulfillmentOf = ({ document }: DocumentOnlyProps) => {\n  const inFulfillmentOfs = getInFulfillmentOfData(document);\n\n  if (isEmpty(inFulfillmentOfs)) return null;\n\n  const finalData = inFulfillmentOfs.flatMap((inFulfillmentOf) => [\n    {\n      label: \"In Fulfillment Of\",\n      value: `Order: ${inFulfillmentOf[0].value || \"Unknown\"}, ${\n        // [0] is id\n        inFulfillmentOf[1].value || \"Unknown\" // [1] is code\n      }`,\n    },\n    { label: \"\", value: \"\" },\n  ]);\n\n  return <Table data={finalData} />;\n};\n","import xpath from \"xpath\";\nimport {\n  formatDate,\n  getContactDetails,\n  getHumanName,\n  parseToISOString,\n} from \"../../helpers\";\nimport { ExtendedGeneralInfo } from \"../../types\";\n\nexport const getLegalAuthenticatorData = (\n  document: Document\n): ExtendedGeneralInfo | undefined => {\n  const legalAuthenticator = xpath.select1(\n    \"*[name()='ClinicalDocument']/*[name()='legalAuthenticator']\",\n    document\n  ) as Document | undefined;\n\n  if (!legalAuthenticator) return undefined;\n\n  const assignedEntity = xpath.select1(\n    \"*[name()='assignedEntity']\",\n    legalAuthenticator\n  ) as Document;\n\n  const assignedPerson = xpath.select1(\n    \"*[name()='assignedPerson']\",\n    assignedEntity\n  ) as Document;\n\n  const name = getHumanName(\n    xpath.select(\"*[name()='name']\", assignedPerson) as Document[]\n  );\n\n  const contactDetails = getContactDetails(\n    xpath.select(\"*[name()='addr']\", assignedEntity) as Document[],\n    xpath.select(\"*[name()='telecom']\", assignedEntity) as Document[]\n  );\n\n  const time = formatDate(\n    parseToISOString(\n      String(\n        xpath.select1(\"string(*[name()='time']/@value)\", legalAuthenticator)\n      )\n    )\n  );\n\n  return { name, contactDetails, time };\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getLegalAuthenticatorData } from \"./data\";\n\nexport const LegalAuthenticator = ({ document }: DocumentOnlyProps) => {\n  const legalAuthenticator = getLegalAuthenticatorData(document);\n\n  if (!legalAuthenticator) return null;\n\n  const { name, time, contactDetails } = legalAuthenticator;\n\n  const withSignedAt = time ? ` signed at ${time}` : \"\";\n  const finalData = [\n    {\n      label: \"Legal Authenticator\",\n      value: `${name}${withSignedAt}`,\n    },\n    { label: \"Contact Details\", value: contactDetails },\n  ];\n\n  return <Table data={finalData} />;\n};\n","import xpath from \"xpath\";\nimport { getContactDetails, getHumanName, getPeriod } from \"../../helpers\";\nimport { ExtendedGeneralInfo, isExtendedGeneralInfoExist } from \"../../types\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getParticipantData = (\n  document: Document\n): ExtendedGeneralInfo[] | undefined => {\n  const participants = xpath.select(\n    \"*[name()='ClinicalDocument']/*[name()='participant']\",\n    document\n  ) as Document[];\n\n  if (isEmpty(participants)) return undefined;\n\n  return participants\n    .map((participant): ExtendedGeneralInfo | undefined => {\n      const associatedEntity = xpath.select1(\n        \"*[name()='associatedEntity']\",\n        participant\n      ) as Document | undefined;\n\n      if (associatedEntity) {\n        const associatedPerson = xpath.select1(\n          \"*[name()='associatedPerson']\",\n          associatedEntity\n        ) as Document;\n\n        const name = getHumanName(\n          xpath.select(\"*[name()='name']\", associatedPerson) as Document[]\n        );\n\n        const contactDetails = getContactDetails(\n          xpath.select(\"*[name()='addr']\", associatedEntity) as Document[],\n          xpath.select(\"*[name()='telecom']\", associatedEntity) as Document[]\n        );\n\n        const time = xpath.select1(\"*[name()='time']\", participant) as Document;\n\n        const period = getPeriod(time);\n\n        const relationship = String(\n          xpath.select1(\n            \"string(*[name()='code']/@displayName)\",\n            associatedEntity\n          )\n        ).toLowerCase();\n\n        return {\n          name,\n          contactDetails,\n          time: `from ${period.start} to ${period.end}`,\n          relationship,\n        };\n      }\n\n      return undefined;\n    })\n    .filter(isExtendedGeneralInfoExist);\n};\n","import { DocumentOnlyProps } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getParticipantData } from \"./data\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const Participant = ({ document }: DocumentOnlyProps) => {\n  const participants = getParticipantData(document);\n\n  if (!participants || isEmpty(participants)) return null;\n\n  const finalData = participants.flatMap((participant) => [\n    {\n      label: \"Participant\",\n      value: `${participant.name}${\n        participant.relationship ? ` - ${participant.relationship}` : \"\"\n      }`,\n    },\n    {\n      label: \"Contact Details\",\n      value: participant.contactDetails,\n    },\n  ]);\n\n  return <Table data={finalData} />;\n};\n","import xpath from \"xpath\";\nimport { getHumanName } from \"../../../helpers\";\nimport { LabelValueType } from \"../../../types\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getGuardian = (\n  patientRole: Document\n): LabelValueType[] | undefined => {\n  const guardians = xpath.select(\n    \"*[name()='patient']/*[name()='guardian']\",\n    patientRole\n  ) as Document[];\n\n  if (isEmpty(guardians)) return undefined;\n\n  return guardians.map((guardian) => {\n    const guardianPerson = xpath.select1(\n      \"*[name()='guardianPerson']\",\n      guardian\n    ) as Document;\n\n    const relationship = String(\n      xpath.select1(\"string(*[name()='code']/@displayName)\", guardian)\n    );\n    const name = getHumanName(\n      xpath.select(\"*[name()='name']\", guardianPerson) as Document[]\n    );\n\n    const withRelationship = relationship ? ` - ${relationship}` : \"\";\n    return {\n      label: \"\",\n      value: `${name}${withRelationship}`,\n    };\n  });\n};\n","import { differenceInYears, format, isValid } from \"date-fns\";\nimport xpath from \"xpath\";\nimport { getHumanName, getId, parseToISOString } from \"../../../helpers\";\nimport { LabelValueType } from \"../../../types\";\nimport { getGuardian } from \"./getGuardian\";\nimport { map } from \"@/utils/nodash\";\n\nexport const getPatient = (\n  document: Document\n): Record<string, LabelValueType[] | undefined> => {\n  const patientRoles = xpath.select(\n    \"*[name()='ClinicalDocument']/*[name()='recordTarget']/*[name()='patientRole']\",\n    document\n  ) as Document[];\n\n  const result = patientRoles.map(\n    (\n      patientRole\n    ): {\n      patient: LabelValueType[];\n      guardian: LabelValueType[] | undefined;\n    } => {\n      const patient = xpath.select1(\n        \"*[name()='patient']\",\n        patientRole\n      ) as Document;\n\n      const patientName = getHumanName(\n        xpath.select1(\"*[name()='name']\", patient) as Document\n      );\n\n      const patientIds = (\n        xpath.select(\"*[name()='id']\", patientRole) as Document[]\n      )\n        .map(getId)\n        .join(\", \");\n\n      const administrativeGenderCode = String(\n        xpath.select1(\n          \"string(*[name()='administrativeGenderCode']/@displayName)\",\n          patient\n        )\n      );\n\n      const birthTime = new Date(\n        parseToISOString(\n          String(xpath.select1(\"string(*[name()='birthTime']/@value)\", patient))\n        )\n      );\n\n      const deceasedTime = new Date(\n        parseToISOString(\n          String(\n            xpath.select1(\n              \"string(*[name()='sdtc:deceasedTime']/@value)\",\n              patient\n            )\n          )\n        )\n      );\n\n      const deceasedInd =\n        String(\n          xpath.select1(\"string(*[name()='sdtc:deceasedInd']/@value)\", patient)\n        ) === \"true\";\n\n      const withDeceased = deceasedInd\n        ? \"deceased\"\n        : differenceInYears(\n            isValid(deceasedTime) ? deceasedTime : new Date(),\n            birthTime\n          );\n      const dateOfBirth = `${format(\n        birthTime,\n        \"MMMM dd, yyyy\"\n      )} (${withDeceased}${deceasedInd ? \"\" : \" yr\"}${\n        isValid(deceasedTime) ? \" - deceased\" : \"\"\n      })`;\n\n      const guardian = getGuardian(patientRole);\n\n      return {\n        patient: [\n          { label: \"Name:\", value: patientName },\n          {\n            label: \"ID:\",\n            value: patientIds,\n          },\n          {\n            label: \"Date of birth:\",\n            value: dateOfBirth,\n          },\n          { label: \"Gender:\", value: administrativeGenderCode },\n        ],\n        guardian,\n      };\n    }\n  );\n\n  return map(result, (res) => [res.patient, res.guardian]).reduce(\n    (acc, val, index) => ({\n      ...acc,\n      [`patient${index + 1}`]: val[0],\n      [`guardian${index + 1}`]: val[1],\n    }),\n    {}\n  );\n};\n","import xpath from \"xpath\";\nimport { getAddress } from \"../../../helpers\";\n\nexport const getBirthPlace = (patient: Document): string => {\n  const birthPlace = xpath.select1(\n    \"*[name()='birthplace']/*[name()='place']/*[name()='addr']\",\n    patient\n  ) as Document | undefined;\n\n  if (!birthPlace) return \"\";\n\n  return getAddress(birthPlace);\n};\n","import xpath from \"xpath\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getEthnicity = (patient: Document): string => {\n  const ethnicGroup = xpath.select1(\"*[name()='ethnicGroupCode']\", patient) as\n    | Document\n    | undefined;\n\n  if (ethnicGroup) {\n    return String(xpath.select1(\"string(@displayName)\", ethnicGroup));\n  }\n\n  const detailedEthnicGroup = xpath.select(\n    \"*[name()='sdtc:ethnicGroupCode']\",\n    patient\n  ) as Document[];\n\n  if (isEmpty(detailedEthnicGroup)) return \"\";\n\n  return String(xpath.select1(\"string(@displayName)\", detailedEthnicGroup[0]));\n};\n","import xpath from \"xpath\";\nimport { getContactDetails } from \"../../../helpers\";\nimport { GeneralInfo, LabelValueType } from \"../../../types\";\nimport { getGuardian as getGuardianFromHeader } from \"../../Header/data/getGuardian\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getGuardian = (\n  patientRole: Document\n): GeneralInfo[] | undefined => {\n  const guardians = xpath.select(\n    \"//*[name()='patientRole']/*[name()='patient']/*[name()='guardian']\",\n    document\n  ) as Document[] | undefined;\n\n  if (!guardians || isEmpty(guardians)) return undefined;\n\n  const guardianNames = getGuardianFromHeader(patientRole) as LabelValueType[];\n\n  return guardians.map((guardian, index) => {\n    const contactDetails = getContactDetails(\n      xpath.select(\"*[name()='addr']\", guardian) as Document[],\n      xpath.select(\"*[name()='telecom']\", guardian) as Document[]\n    );\n\n    return { name: guardianNames[index].value, contactDetails };\n  });\n};\n","import xpath from \"xpath\";\n\nexport const getLanguage = (patient: Document): string => {\n  const languages = xpath.select(\n    \"*[name()='languageCommunication']\",\n    patient\n  ) as Document[];\n\n  return languages.reduce((acc, language, index) => {\n    const languageCode = String(\n      xpath.select1(\"string(*[name()='languageCode']/@code)\", language)\n    );\n    if (!languageCode) return acc;\n\n    const preferred = String(\n      xpath.select1(\"string(*[name()='preferenceInd']/@value)\", language)\n    );\n\n    const withNewLine = index === 0 ? \"\" : \"\\n\";\n    const withPreferred = preferred !== \"\" ? `, preferred: ${preferred}` : \"\";\n    return `${acc}${withNewLine}${languageCode}${withPreferred}`;\n  }, \"\");\n};\n","import xpath from \"xpath\";\n\nexport const getMaritalStatus = (patient: Document): string =>\n  String(\n    xpath.select1(\"string(*[name()='maritalStatusCode']/@displayName)\", patient)\n  );\n","import xpath from \"xpath\";\nimport { displayForName, getContactDetails, getId } from \"../../../helpers\";\nimport { GeneralInfo } from \"../../../types\";\n\nexport const getProviderOrganization = (patientRole: Document): GeneralInfo => {\n  const providerOrganization = xpath.select1(\n    \"*[name()='providerOrganization']\",\n    patientRole\n  ) as Document | undefined;\n\n  const custodian = xpath.select1(\n    \"//*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']\",\n    patientRole\n  ) as Document | undefined;\n\n  const finalProvider = providerOrganization || custodian;\n\n  const ids = (xpath.select(\"*[name()='id']\", finalProvider) as Document[])\n    .map(getId)\n    .join(\", \");\n\n  const names = displayForName(\n    xpath.select(\"string(*[name()='name'])\", finalProvider) as string[]\n  );\n\n  const contactDetails = getContactDetails(\n    xpath.select(\"*[name()='addr']\", finalProvider) as Document[],\n    xpath.select(\"*[name()='telecom']\", finalProvider) as Document[]\n  );\n\n  const withNames = names ? `\\n${names}` : \"\";\n  return {\n    name: `${ids}${withNames}`,\n    contactDetails,\n  };\n};\n","import xpath from \"xpath\";\nimport { isEmpty } from \"@/utils/nodash\";\n\nexport const getRace = (patient: Document): string => {\n  const race = xpath.select1(\"*[name()='raceCode']\", patient) as\n    | Document\n    | undefined;\n\n  if (race) return String(xpath.select1(\"string(@displayName)\", race));\n\n  const detailedRace = xpath.select(\n    \"*[name()='sdtc:raceCode']\",\n    patient\n  ) as Document[];\n\n  if (isEmpty(detailedRace)) return \"\";\n\n  return String(xpath.select1(\"string(@displayName)\", detailedRace[0]));\n};\n","import xpath from \"xpath\";\n\nexport const getReligion = (patient: Document): string =>\n  String(\n    xpath.select1(\n      \"string(*[name()='religiousAffiliationCode']/@displayName)\",\n      patient\n    )\n  );\n","import xpath from \"xpath\";\nimport { getContactDetails } from \"../../../helpers\";\nimport { getPatient as getPatientDataFromHeader } from \"../../Header/data/getPatient\";\nimport { getBirthPlace } from \"./getBirthPlace\";\nimport { getEthnicity } from \"./getEthnicity\";\nimport { getGuardian } from \"./getGuardian\";\nimport { getLanguage } from \"./getLanguage\";\nimport { getMaritalStatus } from \"./getMaritalStatus\";\nimport { getProviderOrganization } from \"./getProviderOrganization\";\nimport { getRace } from \"./getRace\";\nimport { getReligion } from \"./getReligion\";\nimport { camelCase, isEmpty } from \"@/utils/nodash\";\n\nexport const getPatientData = (document: Document) => {\n  const patientRoles = xpath.select(\"//*[name()='patientRole']\", document) as\n    | Document[]\n    | undefined;\n\n  if (!patientRoles || isEmpty(patientRoles)) return undefined;\n\n  const dataFromHeader = getPatientDataFromHeader(document);\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const patients: any = Object.entries(dataFromHeader).reduce(\n    (result, [key, value]) => ({\n      ...result,\n      [key]: value?.reduce(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (valueAsObject: any, data: { label: string; value: string }) => ({\n          ...valueAsObject,\n          [camelCase(data.label)]: data.value,\n        }),\n        {}\n      ),\n    }),\n    {}\n  );\n\n  return patientRoles.map((patientRole, index) => {\n    const patient = xpath.select1(\n      \"*[name()='patient']\",\n      patientRole\n    ) as Document;\n\n    const race = getRace(patient);\n    const ethnicity = getEthnicity(patient);\n\n    const contactDetails = getContactDetails(\n      xpath.select(\"*[name()='addr']\", patientRole) as Document[],\n      xpath.select(\"*[name()='telecom']\", patientRole) as Document[]\n    );\n\n    const language = getLanguage(patient);\n\n    const providerOrganization = getProviderOrganization(patientRole);\n\n    const guardian = getGuardian(patientRole);\n\n    const maritalStatus = getMaritalStatus(patient);\n    const religion = getReligion(patient);\n    const birthPlace = getBirthPlace(patient);\n\n    return {\n      name: patients[`patient${index + 1}`].name,\n      contactDetails,\n      dateOfBirth: patients[`patient${index + 1}`].dateOfBirth,\n      gender: patients[`patient${index + 1}`].gender,\n      race,\n      ethnicity,\n      patientId: patients[`patient${index + 1}`].id,\n      language,\n      maritalStatus,\n      religion,\n      birthPlace,\n      guardian: guardian || [],\n      providerOrganization: providerOrganization.name,\n      providerOrganizationContactDetails: providerOrganization.contactDetails,\n    };\n  });\n};\n","import { DocumentOnlyProps, TableInfo } from \"../../types\";\nimport { Table } from \"../Table/Table\";\nimport { getPatientData } from \"./data\";\nimport { isArray, isEmpty } from \"@/utils/nodash\";\n\nexport const Patient = ({\n  document,\n}: DocumentOnlyProps): JSX.Element | null => {\n  const patients = getPatientData(document);\n\n  if (!patients || isEmpty(patients)) return null;\n\n  return (\n    <>\n      {patients.map((patient) => {\n        const finalData: ([TableInfo, TableInfo] | TableInfo)[] = [\n          { label: \"Patient\", value: patient.name },\n          { label: \"Contact Details\", value: patient.contactDetails },\n\n          { label: \"Date Of Birth\", value: patient.dateOfBirth },\n          { label: \"Gender\", value: patient.gender },\n\n          { label: \"Race\", value: patient.race },\n          { label: \"Ethnicity\", value: patient.ethnicity },\n\n          { label: \"Patient ID\", value: patient.patientId },\n          { label: \"Language\", value: patient.language },\n\n          { label: \"Marital Status\", value: patient.maritalStatus },\n          { label: \"Religion\", value: patient.religion },\n\n          { label: \"Birth Place\", value: patient.birthPlace },\n\n          ...(patient.guardian.map((guardian) => [\n            { label: \"Guardian\", value: guardian.name },\n            { label: \"Contact Details\", value: guardian.contactDetails },\n          ]) as [TableInfo, TableInfo][]), // ts does not understand, we must explicitly state it is ok\n\n          [\n            {\n              label: \"Provider Organization\",\n              value: patient.providerOrganization,\n            },\n            {\n              label: \"Contact Details (Organization)\",\n              value: patient.providerOrganizationContactDetails,\n            },\n          ],\n        ];\n\n        return (\n          <Table\n            key={`${patient.patientId}-${patient.name}-${patient.dateOfBirth}`}\n            data={finalData.filter((d) => isArray(d) || d.value)}\n          />\n        );\n      })}\n    </>\n  );\n};\n","import { DocumentOnlyProps } from \"../types\";\nimport { Authenticator } from \"./Authenticator/Authenticator\";\nimport { Author } from \"./Author/Author\";\nimport { Authorization } from \"./Authorization/Authorization\";\nimport { Custodian } from \"./Custodian/Custodian\";\nimport { DataEnterer } from \"./DataEnterer/DataEnterer\";\nimport { Document } from \"./Document/Document\";\nimport { DocumentationOf } from \"./DocumentationOf/DocumentationOf\";\nimport { Encounter } from \"./Encounter/Encounter\";\nimport { Informant } from \"./Informant/Informant\";\nimport { InformationRecipient } from \"./InformationRecipient/InformationRecipient\";\nimport { InFulfillmentOf } from \"./InFulfillmentOf/InFulfillmentOf\";\nimport { LegalAuthenticator } from \"./LegalAuthenticator/LegalAuthenticator\";\nimport { Participant } from \"./Participant/Participant\";\nimport { Patient } from \"./Patient/Patient\";\nimport \"../../styles.scss\";\n\nexport const DocumentDetails = ({ document }: DocumentOnlyProps) => (\n  <div className=\"ctw-ccda-document-details\">\n    <Document document={document} />\n    <Custodian document={document} />\n    <Patient document={document} />\n    <Author document={document} />\n    <DataEnterer document={document} />\n    <Informant document={document} />\n    <InformationRecipient document={document} />\n    <LegalAuthenticator document={document} />\n    <Authenticator document={document} />\n    <Participant document={document} />\n    <DocumentationOf document={document} />\n    <InFulfillmentOf document={document} />\n    <Authorization document={document} />\n    <Encounter document={document} />\n  </div>\n);\n","import xpath from \"xpath\";\nimport { formatDate, parseToISOString } from \"../../../helpers\";\n\nexport const getTitle = (document: Document): string => {\n  const title = String(\n    xpath.select1(\n      \"string(*[name()='ClinicalDocument']/*[name()='title']/text())\",\n      document\n    )\n  );\n\n  const effectiveTime = parseToISOString(\n    String(\n      xpath.select1(\n        \"string(*[name()='ClinicalDocument']/*[name()='effectiveTime']/@value)\",\n        document\n      )\n    )\n  );\n\n  const date = formatDate(effectiveTime);\n\n  return `${title} (${date})`;\n};\n","import { LabelValueType } from \"../../../types\";\nimport { getAuthor } from \"./getAuthor\";\nimport { getConsent } from \"./getConsent\";\nimport { getDocumentationOf } from \"./getDocumentationOf\";\nimport { getEncounter } from \"./getEncounter\";\nimport { getInFulfillmentOf } from \"./getInFulfillmentOf\";\nimport { getPatient } from \"./getPatient\";\nimport { getTitle } from \"./getTitle\";\n\nexport const getHeaderData = (\n  document: Document\n): { title: string; labelTypeData: Record<string, LabelValueType[]> } => {\n  const title = getTitle(document);\n  const patient = getPatient(document);\n  const documentationOf = getDocumentationOf(document);\n  const author = getAuthor(document);\n  const encounter = getEncounter(document);\n  const inFulfillmentOf = getInFulfillmentOf(document);\n  const consents = getConsent(document);\n\n  return {\n    title,\n    labelTypeData: {\n      ...patient,\n      ...(consents || {}),\n      ...(documentationOf || {}),\n      ...(author || {}),\n      encounter: encounter || [],\n      ...(inFulfillmentOf || {}),\n    },\n  };\n};\n","/* eslint-disable react/no-array-index-key */\nimport { DocumentOnlyProps, LabelValueType } from \"../../types\";\nimport { getHeaderData } from \"./data\";\nimport { isEmpty, map, startCase } from \"@/utils/nodash\";\nimport \"../../../styles.scss\";\n\nexport const Header = ({ document }: DocumentOnlyProps): JSX.Element => {\n  const { title, labelTypeData } = getHeaderData(document);\n\n  return (\n    <div className=\"ctw-ccda-header-container\">\n      <h2 className=\"ctw-ccda-header-title\">{title}</h2>\n      <table className=\"ctw-ccda-common-table\">\n        <tbody>\n          {map(\n            labelTypeData,\n            (arrayOfData: LabelValueType[] | undefined, key: string) => {\n              if (!arrayOfData) return null;\n\n              const filteredData = arrayOfData.filter((data) => data.value);\n              if (isEmpty(filteredData)) return null;\n              return (\n                <tr key={key}>\n                  <td className=\"ctw-ccda-common-td1\">\n                    {startCase(key.replace(/\\d/g, \"\"))}\n                  </td>\n                  <td className=\"ctw-ccda-common-td2\">\n                    {filteredData.map((data: LabelValueType, index) => (\n                      <span key={`${key}-${index}`}>\n                        {data.label && <b>{data.label} </b>}\n                        {data.value}\n                      </span>\n                    ))}\n                  </td>\n                </tr>\n              );\n            }\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","/*! @license DOMPurify 2.4.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.1/LICENSE */\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar hasOwnProperty = Object.hasOwnProperty,\n    setPrototypeOf = Object.setPrototypeOf,\n    isFrozen = Object.isFrozen,\n    getPrototypeOf = Object.getPrototypeOf,\n    getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar freeze = Object.freeze,\n    seal = Object.seal,\n    create = Object.create; // eslint-disable-line import/no-mutable-exports\n\nvar _ref = typeof Reflect !== 'undefined' && Reflect,\n    apply = _ref.apply,\n    construct = _ref.construct;\n\nif (!apply) {\n  apply = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\n\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\n\nif (!construct) {\n  construct = function construct(Func, args) {\n    return _construct(Func, _toConsumableArray(args));\n  };\n}\n\nvar arrayForEach = unapply(Array.prototype.forEach);\nvar arrayPop = unapply(Array.prototype.pop);\nvar arrayPush = unapply(Array.prototype.push);\nvar stringToLowerCase = unapply(String.prototype.toLowerCase);\nvar stringToString = unapply(String.prototype.toString);\nvar stringMatch = unapply(String.prototype.match);\nvar stringReplace = unapply(String.prototype.replace);\nvar stringIndexOf = unapply(String.prototype.indexOf);\nvar stringTrim = unapply(String.prototype.trim);\nvar regExpTest = unapply(RegExp.prototype.test);\nvar typeErrorCreate = unconstruct(TypeError);\nfunction unapply(func) {\n  return function (thisArg) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return apply(func, thisArg, args);\n  };\n}\nfunction unconstruct(func) {\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return construct(func, args);\n  };\n}\n/* Add properties to a lookup table */\n\nfunction addToSet(set, array, transformCaseFunc) {\n  transformCaseFunc = transformCaseFunc ? transformCaseFunc : stringToLowerCase;\n\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n\n  var l = array.length;\n\n  while (l--) {\n    var element = array[l];\n\n    if (typeof element === 'string') {\n      var lcElement = transformCaseFunc(element);\n\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n\n        element = lcElement;\n      }\n    }\n\n    set[element] = true;\n  }\n\n  return set;\n}\n/* Shallow clone an object */\n\nfunction clone(object) {\n  var newObject = create(null);\n  var property;\n\n  for (property in object) {\n    if (apply(hasOwnProperty, object, [property])) {\n      newObject[property] = object[property];\n    }\n  }\n\n  return newObject;\n}\n/* IE10 doesn't support __lookupGetter__ so lets'\n * simulate it. It also automatically checks\n * if the prop is function or getter and behaves\n * accordingly. */\n\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    var desc = getOwnPropertyDescriptor(object, prop);\n\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n\n    object = getPrototypeOf(object);\n  }\n\n  function fallbackValue(element) {\n    console.warn('fallback value for', element);\n    return null;\n  }\n\n  return fallbackValue;\n}\n\nvar html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']); // SVG\n\nvar svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\nvar svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']); // List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\n\nvar svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'fedropshadow', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\nvar mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover']); // Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\n\nvar mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\nvar text = freeze(['#text']);\n\nvar html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'xmlns', 'slot']);\nvar svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\nvar mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\nvar xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\nvar MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\n\nvar ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nvar TMPLIT_EXPR = seal(/\\${[\\w\\W]*}/gm);\nvar DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\n\nvar ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\n\nvar IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nvar IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nvar ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nvar DOCTYPE_NAME = seal(/^html$/i);\n\nvar getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.\n * @param {Document} document The document object (to determine policy name suffix)\n * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types\n * are not supported).\n */\n\n\nvar _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, document) {\n  if (_typeof(trustedTypes) !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  } // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n\n\n  var suffix = null;\n  var ATTR_NAME = 'data-tt-policy-suffix';\n\n  if (document.currentScript && document.currentScript.hasAttribute(ATTR_NAME)) {\n    suffix = document.currentScript.getAttribute(ATTR_NAME);\n  }\n\n  var policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML: function createHTML(html) {\n        return html;\n      },\n      createScriptURL: function createScriptURL(scriptUrl) {\n        return scriptUrl;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\n\nfunction createDOMPurify() {\n  var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n\n  var DOMPurify = function DOMPurify(root) {\n    return createDOMPurify(root);\n  };\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n\n\n  DOMPurify.version = '2.4.1';\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n\n  DOMPurify.removed = [];\n\n  if (!window || !window.document || window.document.nodeType !== 9) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n    return DOMPurify;\n  }\n\n  var originalDocument = window.document;\n  var document = window.document;\n  var DocumentFragment = window.DocumentFragment,\n      HTMLTemplateElement = window.HTMLTemplateElement,\n      Node = window.Node,\n      Element = window.Element,\n      NodeFilter = window.NodeFilter,\n      _window$NamedNodeMap = window.NamedNodeMap,\n      NamedNodeMap = _window$NamedNodeMap === void 0 ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap,\n      HTMLFormElement = window.HTMLFormElement,\n      DOMParser = window.DOMParser,\n      trustedTypes = window.trustedTypes;\n  var ElementPrototype = Element.prototype;\n  var cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  var getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  var getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  var getParentNode = lookupGetter(ElementPrototype, 'parentNode'); // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n\n  if (typeof HTMLTemplateElement === 'function') {\n    var template = document.createElement('template');\n\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  var trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, originalDocument);\n\n  var emptyHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML('') : '';\n  var _document = document,\n      implementation = _document.implementation,\n      createNodeIterator = _document.createNodeIterator,\n      createDocumentFragment = _document.createDocumentFragment,\n      getElementsByTagName = _document.getElementsByTagName;\n  var importNode = originalDocument.importNode;\n  var documentMode = {};\n\n  try {\n    documentMode = clone(document).documentMode ? document.documentMode : {};\n  } catch (_) {}\n\n  var hooks = {};\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n\n  DOMPurify.isSupported = typeof getParentNode === 'function' && implementation && typeof implementation.createHTMLDocument !== 'undefined' && documentMode !== 9;\n  var MUSTACHE_EXPR$1 = MUSTACHE_EXPR,\n      ERB_EXPR$1 = ERB_EXPR,\n      TMPLIT_EXPR$1 = TMPLIT_EXPR,\n      DATA_ATTR$1 = DATA_ATTR,\n      ARIA_ATTR$1 = ARIA_ATTR,\n      IS_SCRIPT_OR_DATA$1 = IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE$1 = ATTR_WHITESPACE;\n  var IS_ALLOWED_URI$1 = IS_ALLOWED_URI;\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n\n  var ALLOWED_TAGS = null;\n  var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray(html$1), _toConsumableArray(svg$1), _toConsumableArray(svgFilters), _toConsumableArray(mathMl$1), _toConsumableArray(text)));\n  /* Allowed attribute names */\n\n  var ALLOWED_ATTR = null;\n  var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray(html), _toConsumableArray(svg), _toConsumableArray(mathMl), _toConsumableArray(xml)));\n  /*\n   * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n\n  var CUSTOM_ELEMENT_HANDLING = Object.seal(Object.create(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n\n  var FORBID_TAGS = null;\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n\n  var FORBID_ATTR = null;\n  /* Decide if ARIA attributes are okay */\n\n  var ALLOW_ARIA_ATTR = true;\n  /* Decide if custom data attributes are okay */\n\n  var ALLOW_DATA_ATTR = true;\n  /* Decide if unknown protocols are okay */\n\n  var ALLOW_UNKNOWN_PROTOCOLS = false;\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n\n  var SAFE_FOR_TEMPLATES = false;\n  /* Decide if document with <html>... should be returned */\n\n  var WHOLE_DOCUMENT = false;\n  /* Track whether config is already set on this instance of DOMPurify. */\n\n  var SET_CONFIG = false;\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n\n  var FORCE_BODY = false;\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n\n  var RETURN_DOM = false;\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n\n  var RETURN_DOM_FRAGMENT = false;\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n\n  var RETURN_TRUSTED_TYPE = false;\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n\n  var SANITIZE_DOM = true;\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (§7.3.3)\n   *   - DOM Tree Accessors (§3.1.5)\n   *   - Form Element Parent-Child Relations (§4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (§4.8.5)\n   *   - HTMLCollection (§4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n\n  var SANITIZE_NAMED_PROPS = false;\n  var SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n  /* Keep element content when removing element? */\n\n  var KEEP_CONTENT = true;\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n\n  var IN_PLACE = false;\n  /* Allow usage of profiles like html, svg and mathMl */\n\n  var USE_PROFILES = {};\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n\n  var FORBID_CONTENTS = null;\n  var DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n  /* Tags that are safe for data: URIs */\n\n  var DATA_URI_TAGS = null;\n  var DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n  /* Attributes safe for values like \"javascript:\" */\n\n  var URI_SAFE_ATTRIBUTES = null;\n  var DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n  var MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  var SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  var HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n\n  var NAMESPACE = HTML_NAMESPACE;\n  var IS_EMPTY_INPUT = false;\n  /* Allowed XHTML+XML namespaces */\n\n  var ALLOWED_NAMESPACES = null;\n  var DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n  /* Parsing of strict XHTML documents */\n\n  var PARSER_MEDIA_TYPE;\n  var SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  var DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  var transformCaseFunc;\n  /* Keep a reference to config to pass to hooks */\n\n  var CONFIG = null;\n  /* Ideally, do not touch anything below this line */\n\n  /* ______________________________________________ */\n\n  var formElement = document.createElement('form');\n\n  var isRegexOrFunction = function isRegexOrFunction(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n  /**\n   * _parseConfig\n   *\n   * @param  {Object} cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n\n\n  var _parseConfig = function _parseConfig(cfg) {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n    /* Shield configuration object from tampering */\n\n\n    if (!cfg || _typeof(cfg) !== 'object') {\n      cfg = {};\n    }\n    /* Shield configuration object from prototype pollution */\n\n\n    cfg = clone(cfg);\n    PARSER_MEDIA_TYPE = // eslint-disable-next-line unicorn/prefer-includes\n    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE : PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE; // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n\n    transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n    /* Set configuration parameters */\n\n    ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = 'ALLOWED_NAMESPACES' in cfg ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), // eslint-disable-line indent\n    cfg.ADD_URI_SAFE_ATTR, // eslint-disable-line indent\n    transformCaseFunc // eslint-disable-line indent\n    ) // eslint-disable-line indent\n    : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone(DEFAULT_DATA_URI_TAGS), // eslint-disable-line indent\n    cfg.ADD_DATA_URI_TAGS, // eslint-disable-line indent\n    transformCaseFunc // eslint-disable-line indent\n    ) // eslint-disable-line indent\n    : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n    FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n    USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n\n    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$1;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n    /* Parse profile info */\n\n\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, _toConsumableArray(text));\n      ALLOWED_ATTR = [];\n\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html$1);\n        addToSet(ALLOWED_ATTR, html);\n      }\n\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg$1);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl$1);\n        addToSet(ALLOWED_ATTR, mathMl);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n    /* Merge configuration parameters */\n\n\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n    }\n\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n    }\n\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n    /* Add #text in case KEEP_CONTENT is set to true */\n\n\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n\n\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n\n\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    } // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n\n\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  var MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n  var HTML_INTEGRATION_POINTS = addToSet({}, ['foreignobject', 'desc', 'title', 'annotation-xml']); // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n\n  var COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n\n  var ALL_SVG_TAGS = addToSet({}, svg$1);\n  addToSet(ALL_SVG_TAGS, svgFilters);\n  addToSet(ALL_SVG_TAGS, svgDisallowed);\n  var ALL_MATHML_TAGS = addToSet({}, mathMl$1);\n  addToSet(ALL_MATHML_TAGS, mathMlDisallowed);\n  /**\n   *\n   *\n   * @param  {Element} element a DOM element whose namespace is being checked\n   * @returns {boolean} Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n\n  var _checkValidNamespace = function _checkValidNamespace(element) {\n    var parent = getParentNode(element); // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template'\n      };\n    }\n\n    var tagName = stringToLowerCase(element.tagName);\n    var parentTagName = stringToLowerCase(parent.tagName);\n\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      } // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n\n\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      } // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n\n\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      } // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n\n\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      } // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n\n\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      } // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n\n\n      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n    } // For XHTML and XML documents that support custom namespaces\n\n\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return true;\n    } // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n\n\n    return false;\n  };\n  /**\n   * _forceRemove\n   *\n   * @param  {Node} node a DOM node\n   */\n\n\n  var _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, {\n      element: node\n    });\n\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      node.parentNode.removeChild(node);\n    } catch (_) {\n      try {\n        node.outerHTML = emptyHTML;\n      } catch (_) {\n        node.remove();\n      }\n    }\n  };\n  /**\n   * _removeAttribute\n   *\n   * @param  {String} name an Attribute name\n   * @param  {Node} node a DOM node\n   */\n\n\n  var _removeAttribute = function _removeAttribute(name, node) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: node.getAttributeNode(name),\n        from: node\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: node\n      });\n    }\n\n    node.removeAttribute(name); // We void attribute values for unremovable \"is\"\" attributes\n\n    if (name === 'is' && !ALLOWED_ATTR[name]) {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(node);\n        } catch (_) {}\n      } else {\n        try {\n          node.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n  /**\n   * _initDocument\n   *\n   * @param  {String} dirty a string of dirty markup\n   * @return {Document} a DOM, filled with the dirty markup\n   */\n\n\n  var _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    var doc;\n    var leadingWhitespace;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      var matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n    }\n\n    var dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n    /* Use createHTMLDocument in case DOMParser is not available */\n\n\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? '' : dirtyPayload;\n      } catch (_) {// Syntax error if dirtyPayload is invalid xml\n      }\n    }\n\n    var body = doc.body || doc.documentElement;\n\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n    /* Work on whole document or just its body */\n\n\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n  /**\n   * _createIterator\n   *\n   * @param  {Document} root document/fragment to create iterator for\n   * @return {Iterator} iterator instance\n   */\n\n\n  var _createIterator = function _createIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root, // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);\n  };\n  /**\n   * _isClobbered\n   *\n   * @param  {Node} elm element to check for clobbering attacks\n   * @return {Boolean} true if clobbered, false if safe\n   */\n\n\n  var _isClobbered = function _isClobbered(elm) {\n    return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function' || typeof elm.hasChildNodes !== 'function');\n  };\n  /**\n   * _isNode\n   *\n   * @param  {Node} obj object to check whether it's a DOM node\n   * @return {Boolean} true is object is a DOM node\n   */\n\n\n  var _isNode = function _isNode(object) {\n    return _typeof(Node) === 'object' ? object instanceof Node : object && _typeof(object) === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';\n  };\n  /**\n   * _executeHook\n   * Execute user configurable hooks\n   *\n   * @param  {String} entryPoint  Name of the hook's entry point\n   * @param  {Node} currentNode node to work on with the hook\n   * @param  {Object} data additional hook parameters\n   */\n\n\n  var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n    if (!hooks[entryPoint]) {\n      return;\n    }\n\n    arrayForEach(hooks[entryPoint], function (hook) {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  };\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   *\n   * @param   {Node} currentNode to check for permission to exist\n   * @return  {Boolean} true if node was killed, false if left alive\n   */\n\n\n  var _sanitizeElements = function _sanitizeElements(currentNode) {\n    var content;\n    /* Execute a hook if present */\n\n    _executeHook('beforeSanitizeElements', currentNode, null);\n    /* Check if element is clobbered or can clobber */\n\n\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n\n      return true;\n    }\n    /* Check if tagname contains Unicode */\n\n\n    if (regExpTest(/[\\u0080-\\uFFFF]/, currentNode.nodeName)) {\n      _forceRemove(currentNode);\n\n      return true;\n    }\n    /* Now let's check the element's type and name */\n\n\n    var tagName = transformCaseFunc(currentNode.nodeName);\n    /* Execute a hook if present */\n\n    _executeHook('uponSanitizeElement', currentNode, {\n      tagName: tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n    /* Detect mXSS attempts abusing namespace confusion */\n\n\n    if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n\n      return true;\n    }\n    /* Mitigate a problem with templates inside select */\n\n\n    if (tagName === 'select' && regExpTest(/<template/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n\n      return true;\n    }\n    /* Remove element if anything forbids its presence */\n\n\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) return false;\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) return false;\n      }\n      /* Keep content except for bad-listed elements */\n\n\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        var parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        var childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n\n        if (childNodes && parentNode) {\n          var childCount = childNodes.length;\n\n          for (var i = childCount - 1; i >= 0; --i) {\n            parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));\n          }\n        }\n      }\n\n      _forceRemove(currentNode);\n\n      return true;\n    }\n    /* Check whether element has a valid namespace */\n\n\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n\n      return true;\n    }\n\n    if ((tagName === 'noscript' || tagName === 'noembed') && regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n\n      return true;\n    }\n    /* Sanitize element content to be template-safe */\n\n\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      content = stringReplace(content, MUSTACHE_EXPR$1, ' ');\n      content = stringReplace(content, ERB_EXPR$1, ' ');\n      content = stringReplace(content, TMPLIT_EXPR$1, ' ');\n\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, {\n          element: currentNode.cloneNode()\n        });\n        currentNode.textContent = content;\n      }\n    }\n    /* Execute a hook if present */\n\n\n    _executeHook('afterSanitizeElements', currentNode, null);\n\n    return false;\n  };\n  /**\n   * _isValidAttribute\n   *\n   * @param  {string} lcTag Lowercase tag name of containing element.\n   * @param  {string} lcName Lowercase attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n\n\n  var _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n\n\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR$1, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR$1, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if ( // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n      // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n      _basicCustomElementTest(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) || // Alternative, second condition checks if it's an `is`-attribute, AND\n      // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE$1, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA$1, stringReplace(value, ATTR_WHITESPACE$1, ''))) ; else if (!value) ; else {\n      return false;\n    }\n\n    return true;\n  };\n  /**\n   * _basicCustomElementCheck\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   * @param {string} tagName name of the tag of the node to sanitize\n   */\n\n\n  var _basicCustomElementTest = function _basicCustomElementTest(tagName) {\n    return tagName.indexOf('-') > 0;\n  };\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param  {Node} currentNode to sanitize\n   */\n\n\n  var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    var attr;\n    var value;\n    var lcName;\n    var l;\n    /* Execute a hook if present */\n\n    _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n    var attributes = currentNode.attributes;\n    /* Check if we have attributes; if not we might have a text node */\n\n    if (!attributes) {\n      return;\n    }\n\n    var hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR\n    };\n    l = attributes.length;\n    /* Go backwards over all attributes; safely remove bad ones */\n\n    while (l--) {\n      attr = attributes[l];\n      var _attr = attr,\n          name = _attr.name,\n          namespaceURI = _attr.namespaceURI;\n      value = name === 'value' ? attr.value : stringTrim(attr.value);\n      lcName = transformCaseFunc(name);\n      /* Execute a hook if present */\n\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n\n      _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n\n      value = hookEvent.attrValue;\n      /* Did the hooks approve of the attribute? */\n\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n      /* Remove attribute */\n\n\n      _removeAttribute(name, currentNode);\n      /* Did the hooks approve of the attribute? */\n\n\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n      /* Work around a security issue in jQuery 3.0 */\n\n\n      if (regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n\n        continue;\n      }\n      /* Sanitize attribute content to be template-safe */\n\n\n      if (SAFE_FOR_TEMPLATES) {\n        value = stringReplace(value, MUSTACHE_EXPR$1, ' ');\n        value = stringReplace(value, ERB_EXPR$1, ' ');\n        value = stringReplace(value, TMPLIT_EXPR$1, ' ');\n      }\n      /* Is `value` valid for this attribute? */\n\n\n      var lcTag = transformCaseFunc(currentNode.nodeName);\n\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n\n\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode); // Prefix the value and later re-create the attribute with the sanitized value\n\n\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n      /* Handle attributes that require Trusted Types */\n\n\n      if (trustedTypesPolicy && _typeof(trustedTypes) === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n        if (namespaceURI) ; else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML':\n              value = trustedTypesPolicy.createHTML(value);\n              break;\n\n            case 'TrustedScriptURL':\n              value = trustedTypesPolicy.createScriptURL(value);\n              break;\n          }\n        }\n      }\n      /* Handle invalid data-* attribute set by try-catching it */\n\n\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n\n        arrayPop(DOMPurify.removed);\n      } catch (_) {}\n    }\n    /* Execute a hook if present */\n\n\n    _executeHook('afterSanitizeAttributes', currentNode, null);\n  };\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param  {DocumentFragment} fragment to iterate over recursively\n   */\n\n\n  var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    var shadowNode;\n\n    var shadowIterator = _createIterator(fragment);\n    /* Execute a hook if present */\n\n\n    _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeShadowNode', shadowNode, null);\n      /* Sanitize tags and elements */\n\n\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n      /* Deep shadow DOM detected */\n\n\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n      /* Check attributes, sanitize if necessary */\n\n\n      _sanitizeAttributes(shadowNode);\n    }\n    /* Execute a hook if present */\n\n\n    _executeHook('afterSanitizeShadowDOM', fragment, null);\n  };\n  /**\n   * Sanitize\n   * Public method providing core sanitation functionality\n   *\n   * @param {String|Node} dirty string or DOM node\n   * @param {Object} configuration object\n   */\n  // eslint-disable-next-line complexity\n\n\n  DOMPurify.sanitize = function (dirty) {\n    var cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var body;\n    var importedNode;\n    var currentNode;\n    var oldNode;\n    var returnNode;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n\n    IS_EMPTY_INPUT = !dirty;\n\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n    /* Stringify, in case dirty is an object */\n\n\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      // eslint-disable-next-line no-negated-condition\n      if (typeof dirty.toString !== 'function') {\n        throw typeErrorCreate('toString is not a function');\n      } else {\n        dirty = dirty.toString();\n\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      }\n    }\n    /* Check we can run. Otherwise fall back or ignore */\n\n\n    if (!DOMPurify.isSupported) {\n      if (_typeof(window.toStaticHTML) === 'object' || typeof window.toStaticHTML === 'function') {\n        if (typeof dirty === 'string') {\n          return window.toStaticHTML(dirty);\n        }\n\n        if (_isNode(dirty)) {\n          return window.toStaticHTML(dirty.outerHTML);\n        }\n      }\n\n      return dirty;\n    }\n    /* Assign config vars */\n\n\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n    /* Clean up removed elements */\n\n\n    DOMPurify.removed = [];\n    /* Check if dirty is correctly typed for IN_PLACE */\n\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        var tagName = transformCaseFunc(dirty.nodeName);\n\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n\n      if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n      /* Initialize the document to work on */\n\n\n      body = _initDocument(dirty);\n      /* Check we have a DOM node from the data */\n\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n    /* Remove first element node (ours) if FORCE_BODY is set */\n\n\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n    /* Get node iterator */\n\n\n    var nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n    /* Now start iterating over the created document */\n\n\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Fix IE's strange behavior with manipulated textNodes #89 */\n      if (currentNode.nodeType === 3 && currentNode === oldNode) {\n        continue;\n      }\n      /* Sanitize tags and elements */\n\n\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n      /* Shadow DOM detected, sanitize it */\n\n\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n      /* Check attributes, sanitize if necessary */\n\n\n      _sanitizeAttributes(currentNode);\n\n      oldNode = currentNode;\n    }\n\n    oldNode = null;\n    /* If we sanitized `dirty` in-place, return it. */\n\n    if (IN_PLACE) {\n      return dirty;\n    }\n    /* Return sanitized string or DOM */\n\n\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (ALLOWED_ATTR.shadowroot) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    var serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    /* Serialize doctype if allowed */\n\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n    /* Sanitize final string template-safe */\n\n\n    if (SAFE_FOR_TEMPLATES) {\n      serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR$1, ' ');\n      serializedHTML = stringReplace(serializedHTML, ERB_EXPR$1, ' ');\n      serializedHTML = stringReplace(serializedHTML, TMPLIT_EXPR$1, ' ');\n    }\n\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n  /**\n   * Public method to set the configuration once\n   * setConfig\n   *\n   * @param {Object} cfg configuration object\n   */\n\n\n  DOMPurify.setConfig = function (cfg) {\n    _parseConfig(cfg);\n\n    SET_CONFIG = true;\n  };\n  /**\n   * Public method to remove the configuration\n   * clearConfig\n   *\n   */\n\n\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n  /**\n   * Public method to check if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   * isValidAttribute\n   *\n   * @param  {string} tag Tag name of containing element.\n   * @param  {string} attr Attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n   */\n\n\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n\n    var lcTag = transformCaseFunc(tag);\n    var lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n  /**\n   * AddHook\n   * Public method to add DOMPurify hooks\n   *\n   * @param {String} entryPoint entry point for the hook to add\n   * @param {Function} hookFunction function to execute\n   */\n\n\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n\n    hooks[entryPoint] = hooks[entryPoint] || [];\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n  /**\n   * RemoveHook\n   * Public method to remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if more are present)\n   *\n   * @param {String} entryPoint entry point for the hook to remove\n   * @return {Function} removed(popped) hook\n   */\n\n\n  DOMPurify.removeHook = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      return arrayPop(hooks[entryPoint]);\n    }\n  };\n  /**\n   * RemoveHooks\n   * Public method to remove all DOMPurify hooks at a given entryPoint\n   *\n   * @param  {String} entryPoint entry point for the hooks to remove\n   */\n\n\n  DOMPurify.removeHooks = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint] = [];\n    }\n  };\n  /**\n   * RemoveAllHooks\n   * Public method to remove all DOMPurify hooks\n   *\n   */\n\n\n  DOMPurify.removeAllHooks = function () {\n    hooks = {};\n  };\n\n  return DOMPurify;\n}\n\nvar purify = createDOMPurify();\n\nexport { purify as default };\n//# sourceMappingURL=purify.es.js.map\n","/* eslint-disable react/no-danger */ // silent linter for dangerouslySetInnerHTML because it is taken care of using dompurify\nimport DOMPurify from \"dompurify\";\nimport { useState } from \"react\";\nimport { fixHtml } from \"../../helpers\";\nimport { SectionType } from \"../../types\";\nimport \"../../../styles.scss\";\n\nexport const Section = ({\n  title,\n  humanReadable,\n}: Omit<SectionType, \"code\">): JSX.Element | null => {\n  const [isOpen, setIsOpen] = useState(true);\n\n  if (!humanReadable) return null;\n\n  const handleClick = () => setIsOpen(!isOpen);\n  return (\n    <div className=\"ctw-ccda-section-container\">\n      <div className=\"ctw-ccda-section-header-wrapper\">\n        <button\n          type=\"button\"\n          className=\"ctw-ccda-section-arrow\"\n          onClick={handleClick}\n        >\n          {isOpen ? \"▼\" : \"▶\"}\n        </button>\n        <h3>{title}</h3>\n      </div>\n      {isOpen && (\n        <div className=\"ctw-ccda-section-wrapper\">\n          <div\n            dangerouslySetInnerHTML={{\n              __html: DOMPurify.sanitize(fixHtml(humanReadable)),\n            }}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n","import cx from \"classnames\";\nimport xpath from \"xpath\";\nimport { DocumentDetails } from \"./components/DocumentDetails\";\nimport { Header } from \"./components/Header/Header\";\nimport { Section } from \"./components/Section/Section\";\nimport { DocumentOnlyProps, SectionType } from \"./types\";\n\nexport const CcdaViewer = ({ document }: DocumentOnlyProps): JSX.Element => {\n  const sections = xpath.select(\n    \"//*[name()='component']/*[name()='section']\",\n    document\n  ) as Document[];\n\n  const texts: SectionType[] = sections.map((section) => {\n    const title = String(xpath.select1(\"string(*[name()='title'])\", section));\n    const humanReadable = xpath.select1(\n      \"*[name()='text']\",\n      section\n    ) as Document;\n\n    const code = String(\n      xpath.select1(\"string(*[name()='code']/@code)\", section)\n    );\n\n    return { title, humanReadable, code };\n  });\n\n  return (\n    <div\n      className={cx({\n        width: \"calc(100vw - 200px - 24px - 24px - 16px - 16px - 2px)\",\n      })}\n    >\n      <Header document={document} />\n      <DocumentDetails document={document} />\n      {texts.map(({ title, humanReadable, code }) => (\n        <Section\n          key={`el-text-${code}`}\n          title={title}\n          humanReadable={humanReadable}\n        />\n      ))}\n    </div>\n  );\n};\n","import { DOMParser } from \"@xmldom/xmldom\";\nimport { Buffer } from \"buffer\";\nimport { useMemo, useRef, useState } from \"react\";\nimport xpath from \"xpath\";\nimport { CcdaViewer } from \"./ccda_viewer\";\nimport \"./styles.scss\";\nimport { DocumentButton } from \"./document-button\";\n\nconst xmlTypes = [\"/xml\", \"/xhtml+xml\", \"application/xml\"];\n\nconst isSpecificContentType = (extensions: string[], contentType: string) =>\n  extensions.some((extension) => contentType.includes(extension));\n\ninterface Base64BinaryFieldProps {\n  data: string;\n  contentType: string;\n  fileName: string | undefined;\n}\n\nexport const Base64BinaryField = ({\n  data,\n  contentType,\n  fileName,\n}: Base64BinaryFieldProps) => {\n  const ref = useRef<HTMLAnchorElement>(null);\n  const [fileUrl, setFileUrl] = useState<string>();\n  const [fileTitle, setFileTitle] = useState<string>();\n\n  const ccdaDoc = useMemo(() => {\n    if (!isSpecificContentType(xmlTypes, contentType)) return undefined;\n\n    const xmlDocument = new DOMParser({\n      locator: {},\n      errorHandler: (_) => null,\n    }).parseFromString(\n      Buffer.from(data, \"base64\").toString(\"utf8\"),\n      contentType\n    );\n\n    if (xpath.select1(\"//*[name()='patientRole']\", xmlDocument)) {\n      return xmlDocument;\n    }\n\n    return undefined;\n  }, [contentType, data]);\n\n  function downloadDocument() {\n    // Clean up any previously created file.\n    if (fileUrl) {\n      URL.revokeObjectURL(fileUrl);\n    }\n\n    const objectURL = URL.createObjectURL(\n      new Blob([Buffer.from(data, \"base64\").toString(\"utf8\")], {\n        type: \"text/xml\",\n      })\n    );\n    setFileUrl(objectURL);\n    setFileTitle(`CCDA-${fileName}`);\n    ref.current?.click();\n  }\n\n  return (\n    <div className=\"ctw-ccda-container\">\n      <div className=\"ctw-ccda-switch-container\">\n        <a\n          href={fileUrl}\n          ref={ref}\n          download={fileTitle}\n          className=\"ctw-decoration-none ctw-flex ctw-w-fit\"\n        >\n          <DocumentButton onClick={downloadDocument} text=\"Download XML\" />\n        </a>\n      </div>\n      {ccdaDoc ? (\n        <CcdaViewer document={ccdaDoc} />\n      ) : (\n        <div className=\"ctw-ccda-base64-binary-text\">{data}</div>\n      )}\n    </div>\n  );\n};\n","import { Provenance } from \"fhir/r4\";\nimport { CTWRequestContext } from \"@/components/core/providers/ctw-context\";\nimport { find, some } from \"@/utils/nodash\";\nimport { QUERY_KEY_BINARY } from \"@/utils/query-keys\";\nimport { queryClient } from \"@/utils/request\";\n\nexport function getBinaryId(\n  provenances: Provenance[],\n  targetId: string\n): string | undefined {\n  for (let i = 0; i < provenances.length; i += 1) {\n    const provenance = provenances[i];\n\n    const hasTarget = some(provenance.target, (t) =>\n      t.reference?.includes(targetId)\n    );\n\n    if (hasTarget) {\n      const source = find(provenance.entity, { role: \"source\" });\n      if (source?.what.reference) {\n        // Return the ID portion of the reference.\n        return source.what.reference.split(\"/\")[1];\n      }\n    }\n  }\n\n  return undefined;\n}\n\nexport async function getBinaryDocument(\n  requestContext: CTWRequestContext,\n  binaryId: string\n): Promise<fhir4.Binary> {\n  return queryClient.fetchQuery([QUERY_KEY_BINARY, binaryId], async () =>\n    requestContext.fhirClient.read({\n      resourceType: \"Binary\",\n      id: binaryId,\n    })\n  );\n}\n","import { XIcon } from \"@heroicons/react/outline\";\nimport { Base64BinaryField } from \"./base64toBinaryField\";\nimport { Modal, ModalProps } from \"@/components/core/modal\";\nimport { useCTW } from \"@/components/core/providers/ctw-provider\";\nimport { useModal } from \"@/components/core/providers/modal-provider\";\nimport { getBinaryDocument } from \"@/fhir/binaries\";\n\nexport function useCCDAModal() {\n  const { openModal } = useModal();\n  const { getRequestContext } = useCTW();\n\n  return async (binaryId: string, title: string) => {\n    const requestContext = await getRequestContext();\n    const rawBinary = await getBinaryDocument(requestContext, binaryId);\n    openModal({\n      component: (props) => (\n        <CCDAModal fileName={title} rawBinary={rawBinary} {...props} />\n      ),\n    });\n  };\n}\n\nexport type CCDAModalProps = {\n  rawBinary: fhir4.Binary | undefined;\n  fileName: string | undefined;\n  onClose: () => void;\n} & Omit<ModalProps, \"title\" | \"children\">;\n\nexport const CCDAModal = ({\n  rawBinary,\n  fileName,\n  onClose,\n  ...modalProps\n}: CCDAModalProps) => (\n  <Modal {...modalProps}>\n    {rawBinary?.data && (\n      <div className=\"ctw-flex ctw-w-full ctw-space-x-4\">\n        <Base64BinaryField\n          data={rawBinary.data}\n          contentType={rawBinary.contentType}\n          fileName={fileName}\n        />\n        <div className=\"ctw-ml-3 ctw-flex ctw-h-7 ctw-items-center\">\n          <button\n            type=\"button\"\n            aria-label=\"close\"\n            onClick={onClose}\n            data-zus-telemetry-click=\"Close CCDA modal\"\n            className=\"ctw-btn-clear\"\n          >\n            <span className=\"ctw-sr-only\">Close panel</span>\n            <XIcon className=\"ctw-h-6 ctw-w-6\" aria-hidden=\"true\" />\n          </button>\n        </div>\n      </div>\n    )}\n  </Modal>\n);\n"],"names":["capitalize","require$$0","createCompounder","require$$1","camelCase","result","word","index","camelCase_1","toString","reRegExpChar","reHasRegExpChar","escapeRegExp","string","escapeRegExp_1","createAggregator","partition","value","key","partition_1","baseEach","baseSome","collection","predicate","_baseSome","arraySome","baseIteratee","require$$2","isArray","require$$3","isIterateeCall","require$$4","some","guard","func","some_1","isBefore","dirtyDate","dirtyDateToCompare","requiredArgs","date","toDate","dateToCompare","isEqual","dirtyLeftDate","dirtyRightDate","dateLeft","dateRight","Modal","isOpen","onAfterClosed","children","className","React","Transition","Fragment","Dialog","cx","DocumentButton","onClick","text","DocumentIcon","base64Js","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","code","i","len","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","start","end","output","extraBytes","parts","maxChunkLength","len2","ieee754","buffer","offset","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","d","s","c","rt","base64","customInspectSymbol","exports","Buffer","SlowBuffer","K_MAX_LENGTH","typedArraySupport","proto","createBuffer","length","buf","arg","encodingOrOffset","allocUnsafe","from","fromString","fromArrayView","isInstance","fromArrayBuffer","valueOf","b","fromObject","assertSize","size","alloc","fill","encoding","checked","actual","fromArrayLike","array","arrayView","copy","byteOffset","obj","numberIsNaN","a","x","list","pos","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","str","max","target","thisStart","thisEnd","y","thisCopy","targetCopy","bidirectionalIndexOf","val","dir","arrayIndexOf","indexSize","arrLength","valLength","read","foundIndex","found","j","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","base64Write","ucs2Write","utf16leToBytes","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","ret","out","hexSliceLookupTable","bytes","newBuf","checkOffset","ext","noAssert","mul","checkInt","min","maxBytes","limit","sub","checkIEEE754","writeFloat","littleEndian","writeDouble","targetStart","INVALID_BASE64_RE","base64clean","units","leadSurrogate","byteArray","hi","lo","src","dst","type","alphabet","table","i16","xpath","curry","slice","totalargs","partial","args","fn","forEach","f","xs","reduce","seed","acc","map","mapped","filter","filtered","includes","values","always","join","wrap","pref","suf","prototypeConcat","MAX_ARGUMENT_LENGTH","flatten","chunk","assign","varArgs","to","nextSource","nextKey","XPathParser","rhs","OrOperation","AndOperation","EqualsOperation","NotEqualOperation","LessThanOperation","GreaterThanOperation","LessThanOrEqualOperation","GreaterThanOrEqualOperation","PlusOperation","MinusOperation","MultiplyOperation","DivOperation","ModOperation","UnaryMinusOperation","BarOperation","PathExpr","Step","NodeTest","Utilities","XString","XNumber","FunctionCall","LocationPath","VariableReference","s1","types","number","delimiter","literal","XPathException","last","name","tokenPos","state","tokenType","tokenValue","t","s_","XPath","setIfUnset","prop","Expression","UnaryOperation","BinaryOperation","lhs","filterPreds","locpath","findRoot","node","predicates","nodes","ctx","inNodes","pred","xpc","firstNode","ownerDoc","step","newNodes","nnm","k","st","attr","nm","pre","nsn","XPathNamespace","outer","applyStepWithPredicates","applyStepToNodes","context","steps","ns","XNodeSet","locationPath","startNodes","XPathContext","filterResult","filterStr","doc","elts","elt","an","abs","axis","nodetest","preds","members","ctor","newType","nodeTypes","stringVal","prefix","nNamespace","localName","nLocalName","nameParts","v","FunctionResolver","Operators","l","r","XBoolean","padSmallNumber","numberStr","base","exponent","padLargeNumber","zerosToAppend","strValue","AVLTree","ldepth","rdepth","lldepth","lrdepth","rrdepth","rldepth","nodeBefore","rightBefore","leftBefore","nodeOrder","n1","n2","cpos","d1","d2","m1","m2","n1Par","n2Par","n1isAttr","n2isAttr","cn","o","p","nt","self","oInvert","lop","rop","vr","nr","fr","VariableResolver","NamespaceResolver","newProps","ln","thisArg","Functions","qName","namespace","aname","id","ids","eNode","s2","eValue","eFrom","eTo","cMap","ch","lang","qn","useDefault","first","del","next","getMessage","exception","msg","error","message","err","XPathExpression","XPathNSResolverWrapper","XPathResult","NodeXPathNSResolver","installDOM3XPathSupport","shouldInstall","parser","defaultNSResolver","defaultFunctionResolver","defaultVariableResolver","makeNSResolverFromFunction","makeNSResolverFromObject","makeNSResolverFromMap","makeNSResolver","resolver","convertValue","makeEvaluator","makeFunctionResolverFromFunction","makeFunctionResolverFromObject","makeFunctionResolverFromMap","makeFunctionResolver","makeVariableResolverFromFunction","makeVariableResolver","copyIfPresent","dest","source","makeContext","options","evaluate","parsedExpression","evaluatorPrototype","parse","single","mappings","expression","BasicRow","dataChunk","indexKey","chunkSize","_a","_b","newDataChunk","singleData","colSpan","TupleRow","tuple","Table","data","normalEntries","tupleEntries","entries","addressParser","addr","isEmpty","displayForAddress","address","isHumanNameArray","isStringArray","nameParser","displayName","displayForName","humanName","telecomParser","use","system","withUse","displayForTelecom","telecom","addressUseMap","getAddress","addressXml","contactPointUseMap","contactPointTelecomMap","getTelecom","telecomXml","splitValue","backupSystem","contactPoint","getContactDetails","humanNameUseMap","getHumanName","nameXml","patientParsedName","getId","rootValue","extensionValue","getIndexFromEnd","rawDate","plusSign","minusSign","signOnThreePlacesLeft","isFinite","isCorrectValue","fragment","char","constructISOString","year","month","day","hour","minute","second","timezoneHour","timezoneMinute","timezoneSign","parseToISOString","timezone","getPeriod","xmlData","low","high","replaceInXML","xmlString","toReplace","toReplaceWith","escape","modify","identity","replaceTag","oldTag","newTag","oldTags","newTags","_","fixHtml","fixedHtml","formatDate","isoDate","time","format","isGeneralInfoExist","item","isExtendedGeneralInfoExist","getAuthenticatorData","document","authenticators","authenticator","assignedEntity","assignedPerson","contactDetails","Authenticator","finalData","getAuthor","authors","author","personName","deviceName","manufacturerModelName","softwareName","representedOrganizationName","authoredOn","getAuthorData","authorXmls","getAuthorDataFromHeader","authorXml","assignedAuthor","authorContactDetails","representedOrganization","organizationContactDetails","Author","getConsent","consents","consent","status","order","getAuthorizationData","inFulfillmentOf","getConsentDataFromHeader","Authorization","authorizations","authorization","getCustodianData","representedCustodianOrganization","Custodian","custodian","getDataEntererData","dataEnterer","DataEnterer","confidentialityCodeMap","getDocumentData","effectiveTimeValue","createdOn","version","setId","confidentialityCode","languageCode","Document","getDocumentationOf","serviceEvents","serviceEvent","effectiveTime","period","performers","performer","getDocumentationOfData","serviceEventXmls","documentationOfs","getDocumentationOfDataFromHeader","serviceEventXml","finalPerformers","performerXml","index2","functionCode","get","DocumentationOf","documentationOf","getEncounter","encompassingEncounter","getEncounterData","encounter","dischargeDisposition","encounterLocation","Encounter","dateTime","getInformantData","informants","informant","relatedEntity","relatedPerson","relationship","Informant","getInformationRecipientData","intendedRecipients","intendedRecipient","informationRecipient","receivedOrganization","informationRecipientName","informationRecipientOrganizationName","informationRecipientContactDetails","receivedOrganizationName","informationRecipientReceivedOrganizationContactDetails","InformationRecipient","informationRecipients","getInFulfillmentOf","orderXmls","orderXml","getInFulfillmentOfData","getInFulfillmentOfDataFromHeader","InFulfillmentOf","inFulfillmentOfs","getLegalAuthenticatorData","legalAuthenticator","LegalAuthenticator","withSignedAt","getParticipantData","participants","participant","associatedEntity","associatedPerson","Participant","getGuardian","patientRole","guardians","guardian","guardianPerson","withRelationship","getPatient","patient","patientName","patientIds","administrativeGenderCode","birthTime","deceasedTime","deceasedInd","withDeceased","differenceInYears","isValid","dateOfBirth","getBirthPlace","birthPlace","getEthnicity","ethnicGroup","detailedEthnicGroup","guardianNames","getGuardianFromHeader","getLanguage","language","preferred","withNewLine","withPreferred","getMaritalStatus","getProviderOrganization","providerOrganization","finalProvider","names","withNames","getRace","race","detailedRace","getReligion","getPatientData","patientRoles","dataFromHeader","getPatientDataFromHeader","patients","valueAsObject","ethnicity","maritalStatus","religion","Patient","DocumentDetails","getTitle","title","getHeaderData","Header","labelTypeData","arrayOfData","filteredData","startCase","_typeof","_setPrototypeOf","_isNativeReflectConstruct","_construct","Parent","Class","Constructor","instance","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_arrayLikeToArray","iter","minLen","arr2","hasOwnProperty","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","freeze","seal","create","_ref","apply","construct","fun","thisValue","Func","arrayForEach","unapply","arrayPop","arrayPush","stringToLowerCase","stringToString","stringMatch","stringReplace","stringIndexOf","stringTrim","regExpTest","typeErrorCreate","unconstruct","_len","_key","_len2","_key2","addToSet","set","transformCaseFunc","element","lcElement","clone","object","newObject","property","lookupGetter","desc","fallbackValue","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","html","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","getGlobal","_createTrustedTypesPolicy","trustedTypes","suffix","ATTR_NAME","policyName","scriptUrl","createDOMPurify","window","DOMPurify","root","originalDocument","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","_window$NamedNodeMap","NamedNodeMap","HTMLFormElement","DOMParser","ElementPrototype","cloneNode","getNextSibling","getChildNodes","getParentNode","template","trustedTypesPolicy","emptyHTML","_document","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","documentMode","hooks","MUSTACHE_EXPR$1","ERB_EXPR$1","TMPLIT_EXPR$1","DATA_ATTR$1","ARIA_ATTR$1","IS_SCRIPT_OR_DATA$1","ATTR_WHITESPACE$1","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","SANITIZE_NAMED_PROPS_PREFIX","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","parent","tagName","parentTagName","_forceRemove","_removeAttribute","_initDocument","dirty","leadingWhitespace","matches","dirtyPayload","body","_createIterator","_isClobbered","elm","_isNode","_executeHook","entryPoint","currentNode","hook","_sanitizeElements","content","_basicCustomElementTest","parentNode","childNodes","childCount","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","attributes","hookEvent","_attr","namespaceURI","_sanitizeShadowDOM","shadowNode","shadowIterator","importedNode","oldNode","returnNode","nodeIterator","serializedHTML","tag","hookFunction","purify","Section","humanReadable","setIsOpen","useState","handleClick","CcdaViewer","texts","section","xmlTypes","isSpecificContentType","extensions","contentType","extension","Base64BinaryField","fileName","ref","useRef","fileUrl","setFileUrl","fileTitle","setFileTitle","ccdaDoc","useMemo","xmlDocument","downloadDocument","objectURL","getBinaryId","provenances","targetId","provenance","find","getBinaryDocument","requestContext","binaryId","queryClient","QUERY_KEY_BINARY","useCCDAModal","openModal","useModal","getRequestContext","useCTW","rawBinary","props","CCDAModal","onClose","modalProps","XIcon"],"mappings":"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,KAAK,cAAc,IAAM,SAAUlB,EAAK,CACpC,OAAO,IAAIwB,GAAkBxB,EAAI,EAAE,CAC/C,EACQ,KAAK,cAAc,IAAM,SAAUA,EAAK,CACpC,OAAOkB,EAAS,WAC5B,EACQ,KAAK,cAAc,IAAM,SAAUlB,EAAK,CACpC,OAAO,IAAIkB,EAAS,kBAAkBlB,EAAI,GAAG,MAAM,GAAG,EAAE,EAAE,CACtE,EACQ,KAAK,cAAc,IAAM,SAAUA,EAAK,CACpC,OAAO,IAAIkB,EAAS,cAAclB,EAAI,EAAE,CACpD,CACA,EAEID,EAAY,YAAc,CACtB,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,sCACR,EAEIA,EAAY,kBAAoB,CAC5B,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,wCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,wCACA,wCACA,wCACA,wCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,uCACA,4DACA,uCACA,uCACA,uCACA,sCACR,EAEIA,EAAY,UAAY,CACpB,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,gCACA,+BACR,EAEIA,EAAY,YAAc,CACtB,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG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K,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MAAUA,GAAK,MACpBA,GAAK,MACLA,GAAK,MAAU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"}