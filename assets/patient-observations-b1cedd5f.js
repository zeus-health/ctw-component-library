import{r as d,R as t}from"./index-6f814c40.js";import{c as l}from"./index-74f03c09.js";import{T}from"./table-fb9c18d0.js";import{u as x}from"./use-breakpoints-2354eef2.js";import{F as S}from"./filter-bar-a7fef3e9.js";import{S as C,c as I,u as P,b as A}from"./use-filtered-sorted-data-e6171571.js";import{d as b}from"./values-0b6ffb91.js";import"./_baseToString-4993715b.js";import{c as B}from"./sortBy-be5f7eb4.js";import"./_baseClone-25b1595e.js";import"./sortBy-919d7262.js";import"./_equalByTag-aaf39779.js";import"./_baseForOwn-d8306f34.js";import{A as k,G as M,a5 as F,a6 as L,I as z,T as U,e as Y,s as G}from"./patient-helper-2ab30682.js";import"./_createSet-12ef9b81.js";import{D as Q}from"./collapsible-data-list-details-f7571cef.js";import{w as V}from"./error-boundary-21d5c843.js";import{O as H,D as K}from"./observation-70981ad9.js";import"./sort-879bd9bb.js";import{b as W,u as h}from"./patient-provider-370da583.js";import{D as R}from"./drawer-ed34104d.js";const u=({className:e,columns:a,data:r,emptyMessage:n,isLoading:s,onRowClick:i,rowActions:o})=>{const c=d.useRef(null),N=x(c);return t.createElement("div",{ref:c,className:l(e,"ctw-scrollable-pass-through-height")},t.createElement(T,{showTableHead:!N.sm,stacked:N.sm,emptyMessage:n,isLoading:s,records:r,RowActions:o,columns:a,handleRowClick:i}))};try{u.displayName="ResourceTable",u.__docgenInfo={description:"",displayName:"ResourceTable",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"TableColumn<T>[]"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"T[]"}},emptyMessage:{defaultValue:null,description:"",name:"emptyMessage",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},onRowClick:{defaultValue:null,description:"",name:"onRowClick",required:!1,type:{name:"((record: T) => void)"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"ComponentType<{ record: T; }>"}}}}}catch{}const p=({className:e,sortOptions:a,filterOptions:r,action:n})=>!a&&!r&&!n?null:t.createElement("div",{className:l(e,"ctw-flex ctw-flex-wrap ctw-items-center ctw-justify-between ctw-py-2 sm:ctw-pt-1.5")},t.createElement("div",{className:"ctw-flex ctw-flex-wrap ctw-gap-x-2"},a&&t.createElement(C,{...a}),r&&t.createElement(S,{...r})),n);try{p.displayName="ResourceTableActions",p.__docgenInfo={description:"",displayName:"ResourceTableActions",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},sortOptions:{defaultValue:null,description:"",name:"sortOptions",required:!1,type:{name:"SortButtonProps<T>"}},filterOptions:{defaultValue:null,description:"",name:"filterOptions",required:!1,type:{name:"FilterBarProps"}},action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"ReactNode"}}}}}catch{}const Z=[{title:"Report",widthPercent:30,minWidth:320,dataIndex:"displayName"},{title:"Category",dataIndex:"category"},{title:"Started On",dataIndex:"effectiveStart"},{title:"Status",render:e=>t.createElement("div",{className:"ctw-flex"},t.createElement("div",{className:l("ctw-text-md",D(e.resource.status))},"•"),t.createElement("div",{className:"ctw-ml-1"},t.createElement("div",null,b(e.resource.status))))},{title:"Observations",render:e=>t.createElement("div",{className:"ctw-text-center"},e.results.length)}],$=[{title:"Observation Info",render:e=>t.createElement("div",{className:"ctw-flex"},e.effectiveStart&&t.createElement("div",null,t.createElement("span",{className:"ctw-inline-flex ctw-h-5 ctw-rounded-full ctw-bg-notification-light ctw-px-2 ctw-text-xs ctw-leading-5 ctw-text-notification-main"},e.effectiveStart)," "),t.createElement("div",{className:l("ctw-text-md",D(e.resource.status))},"•"),t.createElement("div",{className:"ctw-ml-1"},t.createElement("div",null,b(e.resource.status)," ")))},{title:"Date and Id",render:e=>{var a;return t.createElement("div",{className:"ctw-ml-1"},k(e.category)||e.display," ",(a=e.resource.identifier)==null?void 0:a[0].value)}},{title:"Reading",render:e=>t.createElement("div",{className:"ctw-ml-1"},e.value," ",e.interpretation)},{title:"Notes",render:e=>e.notes&&t.createElement("blockquote",{className:"ctw-mx-3 ctw-my-1 ctw-rounded ctw-bg-bg-lighter ctw-p-1.5 ctw-text-xs ctw-font-light ctw-italic"},e.notes)}];function D(e){switch(e){case"final":case"amended":case"appended":case"corrected":return"ctw-text-success-main";case"cancelled":case"entered-in-error":return"ctw-text-caution-main";case"registered":case"partial":case"preliminary":case"unknown":default:return"ctw-text-content-lighter"}}const m={display:"Effective Date (New to Old)",sorts:[{key:"effectiveStart",dir:"desc",isDate:!0}]},j=[{display:"Name (A-Z)",sorts:[{key:"displayName",dir:"asc"}]},{display:"Name (Z-A)",sorts:[{key:"displayName",dir:"desc"}]},{display:"Effective Date (Old to New)",sorts:[{key:"effectiveStart",dir:"asc",isDate:!0}]},m],f=({className:e,data:a})=>t.createElement("div",{className:e},t.createElement("div",{className:"ctw-text-base ctw-font-medium ctw-uppercase ctw-text-content-light"},"observations"),t.createElement(u,{className:"ctw-patient-observation-details",columns:$,data:a,isLoading:!1,emptyMessage:"There are no observations available."}));try{f.displayName="ObservationsTable",f.__docgenInfo={description:"",displayName:"ObservationsTable",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ObservationModel[]"}}}}}catch{}const y=e=>[{label:"Organization",value:e.performer},{label:"Identifier",value:e.identifier},{label:"Service category",value:e.category},{label:"Status",value:b(e.resource.status)}],g=({diagnosticReport:e})=>{const[a,r]=d.useState([]);return d.useEffect(()=>{r(B(e.results.map(n=>{const s=M("Observation",void 0,e.includedResources,n.reference);if(s)return new H(s,{[e.id]:e.resource})})))},[e]),t.createElement("div",{className:"ctw-space-y-6","data-zus-telemetry-namespace":"Observations"},t.createElement("div",{className:"ctw-text-2xl"},e.displayName),t.createElement(Q,{data:y(e)}),t.createElement(f,{data:a}))},_=V(g,"Observations");try{y.displayName="diagnosticReportData",y.__docgenInfo={description:"",displayName:"diagnosticReportData",props:{category:{defaultValue:null,description:"",name:"category",required:!0,type:{name:"string | CodeableConcept[]"}},displayName:{defaultValue:null,description:"",name:"displayName",required:!0,type:{name:"any"}},effectiveEnd:{defaultValue:null,description:"",name:"effectiveEnd",required:!0,type:{name:"string | undefined"}},identifier:{defaultValue:null,description:"",name:"identifier",required:!0,type:{name:"string"}},effectiveStart:{defaultValue:null,description:"",name:"effectiveStart",required:!0,type:{name:"string | undefined"}},performer:{defaultValue:null,description:"",name:"performer",required:!0,type:{name:"string | undefined"}},organization:{defaultValue:null,description:"",name:"organization",required:!0,type:{name:"Reference | undefined"}},reportCategory:{defaultValue:null,description:"",name:"reportCategory",required:!0,type:{name:"string"}},results:{defaultValue:null,description:"",name:"results",required:!0,type:{name:"Reference[]"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"DiagnosticReport"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}try{g.displayName="Component",g.__docgenInfo={description:"",displayName:"Component",props:{diagnosticReport:{defaultValue:null,description:"",name:"diagnosticReport",required:!0,type:{name:"DiagnosticReportModel"}}}}}catch{}try{_.displayName="ObservationDetails",_.__docgenInfo={description:"",displayName:"ObservationDetails",props:{diagnosticReport:{defaultValue:null,description:"",name:"diagnosticReport",required:!0,type:{name:"DiagnosticReportModel"}}}}}catch{}function J(){const{openDrawer:e}=W();return a=>{e({component:r=>t.createElement(v,{diagnosticReport:a,...r})})}}function v({className:e,diagnosticReport:a,isOpen:r,onClose:n}){return t.createElement(R,{className:e,title:"Diagnostic Report",isOpen:r,onClose:n,showCloseFooter:!0},t.createElement(R.Body,null,t.createElement(_,{diagnosticReport:a})))}try{v.displayName="ObservationsDrawer",v.__docgenInfo={description:"",displayName:"ObservationsDrawer",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},diagnosticReport:{defaultValue:null,description:"",name:"diagnosticReport",required:!0,type:{name:"DiagnosticReportModel"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}function X(e){return[{key:"category",type:"checkbox",icon:I,display:"Category",values:P(e,"category")}]}const E={},w=({action:e,className:a,query:r,rowActions:n})=>{const s=J(),{data:i,setFilters:o,setSort:c}=A({defaultSort:m,records:r.data,defaultFilters:E});return t.createElement("div",{className:l(a,"ctw-scrollable-pass-through-height")},t.createElement(p,{filterOptions:{onChange:o,defaultState:E,filters:X(r.data??[])},sortOptions:{defaultSort:m,options:j,onChange:c},action:e}),t.createElement(u,{className:"ctw-patient-observations",columns:Z,data:i,emptyMessage:"There are no observation records available.",isLoading:r.isLoading,rowActions:n,onRowClick:s}))};try{w.displayName="PatientObservationsBase",w.__docgenInfo={description:"",displayName:"PatientObservationsBase",props:{action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"{ data?: DiagnosticReportModel[] | undefined; isLoading: boolean; }"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"ComponentType<{ record: DiagnosticReportModel; }>"}}}}}catch{}function ee(){return h(F,[],O("builder"))}function Ee(){return h(L,[],O("outside"))}function O(e){const a=e==="builder"?Y:G;return async(r,n)=>{try{const{resources:s,bundle:i}=await a("DiagnosticReport",r,{patientUPID:n.UPID,_include:["DiagnosticReport:result"]});return s.map(o=>new K(o,z(i)))}catch(s){throw U.logError(s,`Failed fetching ${e} DiagnosticReport resources`)}}}const te=({className:e})=>{const a=ee();return t.createElement(w,{className:e,query:a})},q=V(te,"PatientObservations");try{q.displayName="PatientObservations",q.__docgenInfo={description:"",displayName:"PatientObservations",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}}}}}catch{}export{w as P,p as R,u as a,q as b,Ee as u};
