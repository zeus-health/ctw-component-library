import{R as n,r as d}from"./index-6f814c40.js";import{c as p}from"./index-74f03c09.js";import{u as l}from"./resource-details-drawer-0824ed1a.js";import{C as I}from"./coding-list-1d7c950f.js";import{w as f}from"./error-boundary-a8316818.js";import{F as h,Z as _,$ as w,a as g,w as y,s as z,a0 as C,u as v}from"./patient-helper-9ca0101c.js";import{T as D}from"./table-6b14d129.js";import{V as R}from"./view-fhir-81c226a4.js";import"./_baseToString-ba0098b0.js";import"./_equalByTag-3aa7c076.js";import"./_baseClone-7982cf45.js";import"./sortBy-8d97dd92.js";import"./_baseForOwn-2ea4fe61.js";import"./mergeWith-9910f455.js";import{i as E}from"./isEqual-38ff4822.js";import"./_createSet-3c80ad01.js";import{u as T}from"./uniqWith-ade993ae.js";import{u as N}from"./patient-provider-bbc62e03.js";import{o as P}from"./values-e0b170db.js";import{u as b}from"./use-breakpoints-8921c18b.js";const x=[{title:"Date",render:e=>n.createElement("div",{className:"group-hover:ctw-underline"},e.occurrence)},{title:"Description",dataIndex:"description"},{title:"CVX Code",dataIndex:"cvxCode"}];class F extends h{get description(){return this.resource.vaccineCode.text}get cvxCode(){const t=_(w,this.resource.vaccineCode);return t==null?void 0:t.code}get occurrence(){return this.resource.occurrenceDateTime?g(this.resource.occurrenceDateTime):this.resource.occurrenceString}}const a=e=>{const t=e.map(r=>new F(r));return T(t,(r,i)=>E(s(r),s(i)))},s=e=>[e.description,e.cvxCode,e.occurrence];try{a.displayName="applyImmunizationFilters",a.__docgenInfo={description:"",displayName:"applyImmunizationFilters",props:{}}}catch{}function M(){return N(C,[],y(async(e,t)=>{try{const{bundle:o,resources:r}=await z("Immunization",e,{patientUPID:t.UPID});return P(a(r),[i=>i.occurrence??""],["desc"])}catch(o){throw new Error(`Failed fetching immunization information for patient: ${o}`)}},"req.patient_immunizations"))}const V=({record:e})=>n.createElement(R,{name:"Immunization Resource",resource:e.resource});function k({className:e}){const t=d.useRef(null),o=b(t),{featureFlags:r}=v(),i=M(),m=l({header:u=>u.description,details:S});return n.createElement("div",{ref:t,"data-zus-telemetry-namespace":"Immunizations",className:p("ctw-patient-immunizations ctw-scrollable-pass-through-height ctw-bg-white",e,{"ctw-stacked":o.sm})},n.createElement(D,{RowActions:r!=null&&r.enableViewFhirButton?V:void 0,stacked:o.sm,isLoading:i.isLoading,records:i.data??[],columns:x,handleRowClick:m}))}const c=f(k,"PatientImmunizations"),S=e=>[{label:"Date",value:e.occurrence},{label:"Description",value:e.description},{label:"Vaccine Code",value:e.resource.vaccineCode.coding?n.createElement(I,{codings:e.resource.vaccineCode.coding}):void 0}];try{c.displayName="PatientImmunizations",c.__docgenInfo={description:"",displayName:"PatientImmunizations",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{c as P};
