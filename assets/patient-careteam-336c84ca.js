var _=Object.defineProperty;var C=(t,r,e)=>r in t?_(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var l=(t,r,e)=>(C(t,typeof r!="symbol"?r+"":r,e),e);import{R as o,r as R}from"./index-6f814c40.js";import{c as V}from"./index-74f03c09.js";import{V as b,u as w,a as E}from"./view-fhir-e4c486b5.js";import{F as v,y as P,c as g,H as h,al as q,L as D,M as N,am as S,ac as I,ad as O,b as k}from"./patient-provider-19a9ffec.js";import{T as B}from"./table-c0cb6876.js";import"./_baseForOwn-b2e5e443.js";import"./sortBy-400dab6d.js";import{f as M,o as z}from"./sortBy-a6efb69f.js";import"./_baseClone-39df8af0.js";import"./_baseIsEqual-f087c1ca.js";import"./_createSet-fb89f2da.js";import{i as W}from"./isEqual-8b7b0b49.js";import{u as A}from"./use-breakpoints-6fe8efe9.js";const d=(t=!1)=>{const r=[{widthPercent:20,minWidth:150,title:"Practitioner",render:e=>o.createElement(o.Fragment,null,o.createElement("div",null,e.practitionerName),o.createElement("div",null,e.managingOrganization))},{widthPercent:20,minWidth:150,title:"Role",render:e=>o.createElement("div",null,e.role)},{widthPercent:20,minWidth:150,title:"Specialty",render:e=>o.createElement("div",null,e.qualification)},{widthPercent:20,minWidth:150,title:"Noted On",render:e=>o.createElement("div",null,e.effectiveStartDate)}];return t&&r.push({widthPercent:20,minWidth:150,render:e=>o.createElement(b,{name:"CareTeam Resource",resource:e.careTeam})}),r};try{d.displayName="patientCareTeamColumns",d.__docgenInfo={description:"",displayName:"patientCareTeamColumns",props:{}}}catch{}class F extends v{constructor(){super(...arguments);l(this,"kind","CareTeam")}get status(){return this.resource.status}get periodStart(){var e;return P((e=this.resource.period)==null?void 0:e.start)}get periodEnd(){var e;return(e=this.resource.period)==null?void 0:e.end}get particpants(){return this.resource.participant}get careTeamTelecom(){return this.resource.telecom}get managingOrganization(){var a,i;return(i=(a=M(this.resource.participant,"onBehalfOf"))==null?void 0:a.onBehalfOf)==null?void 0:i.display}get role(){var e,a;return g((a=(e=this.resource.participant)==null?void 0:e[0].role)==null?void 0:a[0])}get practitionerQualification(){var i,n,u,s;const e=(u=(n=(i=this.resource.participant)==null?void 0:i[0])==null?void 0:n.member)==null?void 0:u.reference,a=h("Practitioner",this.resource.contained,this.includedResources,e);if(a)return g((s=new q(a).resource.qualification)==null?void 0:s[0].code)}getPractitionerByID(e){return h("Practitioner",this.resource.contained,this.includedResources,e)}}class x extends v{constructor(e,a){super(a);l(this,"kind","CareTeamPractitioner");l(this,"careTeam");this.careTeam=e}get key(){return`${this.careTeam.id}_${this.id}`}get practitionerName(){return new q(this.resource).fullName}get effectiveStartDate(){return this.careTeam.periodStart}get managingOrganization(){return this.careTeam.managingOrganization}get role(){return this.careTeam.role}get qualification(){return this.careTeam.practitionerQualification}get telecom(){return this.careTeam.careTeamTelecom}get status(){return this.careTeam.status}}const L=(t,r)=>{const e=t.map(n=>new F(n,r)),a=[];e.forEach(n=>{var u;return(u=n.resource.participant)==null?void 0:u.forEach(s=>{var p,f;const c=n.getPractitionerByID((p=s.member)==null?void 0:p.reference);c!=null&&c.id&&((f=s.member)!=null&&f.reference)&&a.push(new x(n,c))})});const i=z(a,["effectiveStartDate","id"],["desc","desc"]);return w(i,(n,u)=>W(y(n),y(u)))},y=t=>[t.effectiveStartDate,t.role,t.qualification,t.practitionerName];function Q(){return D(S,[],N(async(t,r)=>{try{const{bundle:e,resources:a}=await I("CareTeam",t,{patientUPID:r.UPID,_include:"CareTeam:participant"}),i=O(e);return L(a,i)}catch(e){throw new Error(`Failed fetching care team information for patient: ${e}`)}},"req.patient_care_team",[]))}function T({className:t}){const r=R.useRef(null),e=A(r),{featureFlags:a}=k(),i=Q(),n=E({header:u=>u.practitionerName,subHeader:u=>u.qualification,details:m,getSourceDocument:!0});return o.createElement("div",{ref:r,className:V("ctw-scrollable-pass-through-height ctw-border ctw-border-solid ctw-border-divider-light ctw-bg-white",t,{"ctw-stacked":e.sm})},o.createElement(B,{stacked:e.sm,isLoading:i.isLoading,records:i.data??[],columns:d(a==null?void 0:a.enableViewFhirButton),handleRowClick:n}))}const m=t=>[{label:"Organization",value:t.managingOrganization},{label:"CareTeam Telecom",value:t.telecom&&o.createElement("div",null,t.telecom.map((r,e)=>o.createElement("div",{key:e},r.value)))},{label:"Role",value:t.role},{label:"Status",value:t.status}];try{T.displayName="PatientCareTeam",T.__docgenInfo={description:"",displayName:"PatientCareTeam",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{m.displayName="careTeamData",m.__docgenInfo={description:"",displayName:"careTeamData",props:{kind:{defaultValue:null,description:"",name:"kind",required:!0,type:{name:'"CareTeamPractitioner"'}},careTeam:{defaultValue:null,description:"",name:"careTeam",required:!0,type:{name:"CareTeamModel"}},key:{defaultValue:null,description:"",name:"key",required:!0,type:{name:"string"}},practitionerName:{defaultValue:null,description:"",name:"practitionerName",required:!0,type:{name:"string"}},effectiveStartDate:{defaultValue:null,description:"",name:"effectiveStartDate",required:!0,type:{name:"string | undefined"}},managingOrganization:{defaultValue:null,description:"",name:"managingOrganization",required:!0,type:{name:"string | undefined"}},role:{defaultValue:null,description:"",name:"role",required:!0,type:{name:"string"}},qualification:{defaultValue:null,description:"",name:"qualification",required:!0,type:{name:"string | undefined"}},telecom:{defaultValue:null,description:"",name:"telecom",required:!0,type:{name:"ContactPoint[] | undefined"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"active"'},{value:'"proposed"'},{value:'"suspended"'},{value:'"inactive"'},{value:'"entered-in-error"'}]}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Practitioner"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},versionId:{defaultValue:null,description:"",name:"versionId",required:!0,type:{name:"string"}},isArchived:{defaultValue:null,description:"",name:"isArchived",required:!0,type:{name:"boolean"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},isEnriched:{defaultValue:null,description:"",name:"isEnriched",required:!0,type:{name:"() => boolean"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}export{T as P};
