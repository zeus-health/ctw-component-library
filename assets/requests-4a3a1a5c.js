import{a as k}from"./request-02bc8afe.js";import{f as e,a as g,b as E}from"./faker-42d66913.js";import{y as I}from"./patient-allergies-aa7a95ce.js";import{t as b,c as w}from"./action-list-32bd005e.js";const z=new Date("2020-11-11"),d=new Date,S=e.datatype.uuid(),_=Array.from({length:5}).map(g);function A(t,r,s,a){return{total:a,entry:t,resourceType:"Bundle",id:e.datatype.uuid(),meta:{lastUpdated:e.date.past().toISOString()},type:"searchset",link:E("Patient",{_tag:`https://zusapi.com/accesscontrol/owner|builder/${S}`,"_tag:not":["https://zusapi.com/thirdparty/source|surescripts","https://zusapi.com/thirdparty/source|commonwell","https://zusapi.com/thirdparty/source|elation","https://zusapi.com/lens|ActiveMedications","https://zusapi.com/lens|ChronicConditions","https://zusapi.com/summary|Common","https://zusapi.com/fhir/tag/upi-record-type|universal"]})}}function D(){const t=e.datatype.uuid(),r=e.datatype.uuid(),s=e.date.between(z,d),a=e.date.between(s,d);return{fullUrl:`https://api.storybook.zusapi.com/fhir/Patient/${t}`,resource:{resourceType:"Patient",id:t,meta:{versionId:"5",lastUpdated:a.toISOString(),source:e.helpers.arrayElement(_),tag:[I]},identifier:[{system:"https://zusapi.com/fhir/identifier/universal-id",value:r}],name:[{use:"official",family:e.name.lastName(),given:[e.name.firstName()],prefix:[e.name.prefix()]}],telecom:[{system:"phone",value:e.phone.number(e.helpers.arrayElement(["!# 555 ####!","!1-555-####!","!555-####!"])),use:e.helpers.arrayElement(["home","work","mobile"])}],gender:e.helpers.arrayElement(["female","male","female","other","unknown"]),birthDate:e.date.birthdate().toISOString()},search:{mode:"match"}}}function B(t){const r=Array.from({length:t}).map(D);return{parameters:{msw:{handlers:{mocks:[k.rest.get("https://api.dev.zusapi.com/fhir/Patient",(s,a,n)=>{const o=s.url.searchParams;if(o.has("_count")){const i=parseInt(o.get("_count")||"0",10),c=parseInt(o.get("_offset")||"0",10),p=r.filter(f=>{var m,l;const{given:u,family:y}=((l=(m=f.resource)==null?void 0:m.name)==null?void 0:l[0])||{};return`${(u==null?void 0:u[0])||""} ${y||""}`.toLowerCase().indexOf(b(o.get("name")||""))!==-1}),h=w(i,p)[Math.floor(c/i)]||[];return a(n.delay(2e3),n.status(200),n.json(A(h,i,c,p.length)))}return a(n.status(404))})]}}}}}export{B as s};
