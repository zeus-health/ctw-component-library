var N=Object.defineProperty;var q=(n,r,e)=>r in n?N(n,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[r]=e;var g=(n,r,e)=>(q(n,typeof r!="symbol"?r+"":r,e),e);import{R as t,r as l}from"./index-6f814c40.js";import{u as x,D as _,H as L,g as S}from"./history-e2d7dd55.js";import{D as V}from"./details-card-1ac2a254.js";import{D as c}from"./drawer-2856393a.js";import{L as w}from"./loading-c7ff698a.js";import{F as k,t as H,c as B,u as A}from"./patient-helper-c9c408d6.js";import{a as F,s as O}from"./patient-provider-c798b9ef.js";class z extends k{constructor(){super(...arguments);g(this,"kind","Document")}get status(){return this.resource.status}get binaryID(){const e=this.resource.content[0].attachment.url;if(e)return e.split("/").pop()}get docStatus(){return this.resource.docStatus}get resourceTypeTitle(){return"Document"}get title(){return this.resource.content[0].attachment.title}get dateCreated(){return H(this.resource.content[0].attachment.creation)}get custodian(){var e;return(e=this.resource.custodian)==null?void 0:e.display}get sectionDisplays(){var e;return((e=this.resource.category)==null?void 0:e.map(s=>B(s)))||void 0}}const P=10;function b(n){const{openDrawer:r}=F();return e=>{r({component:s=>t.createElement(j,{model:e,...n,...s})})}}function j({className:n,details:r,getHistory:e,getSourceDocument:s,header:v,isOpen:h,model:a,onClose:o,onEdit:u,onRemove:d,readOnly:m,subHeader:p}){const R=x(),[T,y]=l.useState(!1),[f,D]=l.useState(),{getRequestContext:E}=A(),i=e&&e(a);return l.useEffect(()=>{async function I(){y(!0);const C=await E(),M=await O(C,[a]);D(S(M,a.id)),y(!1)}a instanceof z?D(a.binaryID):s&&I()},[s,a,E]),t.createElement(c,{className:n,title:a.resourceTypeTitle,isOpen:h,onClose:o},t.createElement(c.Body,null,t.createElement("div",{className:"ctw-space-y-4"},t.createElement("div",{className:"ctw-space-y-2"},t.createElement("div",{className:"ctw-text-3xl"},v(a)),p&&t.createElement("div",null,p(a))),T?t.createElement(w,{message:"Loading data..."}):t.createElement(V,{details:r(a),documentButton:f&&t.createElement(_,{onClick:()=>R(f,a.resourceTypeTitle),text:"Source Document"})}),i&&(i.isLoading?t.createElement(w,{message:"Loading history..."}):t.createElement(L,{entries:i.data??[],limit:P,resourceTypeTitle:a.resourceTypeTitle})))),t.createElement(c.Footer,null,t.createElement("div",{className:"ctw-flex ctw-justify-between"},t.createElement(c.CloseButton,{onClose:o,label:"Close"}),t.createElement("div",{className:"ctw-space-x-3"},!m&&d&&t.createElement("button",{type:"button",className:"ctw-btn-default ctw-w-24","data-zus-telemetry-click":"Remove button",onClick:()=>{d(a,o)}},"Remove"),!m&&u&&t.createElement("button",{type:"button",className:"ctw-btn-primary ctw-w-24","data-zus-telemetry-click":"Edit button",onClick:()=>{o(),u(a)}},"Edit")))))}try{b.displayName="useResourceDetailsDrawer",b.__docgenInfo={description:"",displayName:"useResourceDetailsDrawer",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"(model: M) => ReactNode"}},subHeader:{defaultValue:null,description:"",name:"subHeader",required:!1,type:{name:"((model: M) => ReactNode)"}},getSourceDocument:{defaultValue:null,description:"",name:"getSourceDocument",required:!1,type:{name:"boolean"}},details:{defaultValue:null,description:"",name:"details",required:!0,type:{name:"(model: M) => DetailEntry[]"}},getHistory:{defaultValue:null,description:"",name:"getHistory",required:!1,type:{name:"((model: M) => UseQueryResult<HistoryEntries, unknown>)"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((model: M) => void)"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"((model: M, onDelete?: ((model: M) => void)) => void)"}}}}}catch{}export{z as D,b as u};
