import{r as h,R as i}from"./index-6f814c40.js";import{c as y}from"./index-74f03c09.js";import{u as b}from"./resource-details-drawer-58686bc3.js";import{C as I}from"./coding-list-1d7c950f.js";import{w as z}from"./error-boundary-10989807.js";import{T as v}from"./table-96b9b58e.js";import{V as g}from"./view-fhir-93f45bb1.js";import{F as T,P as _,al as w,a as x,s as C,am as D,l as m,C as E,S as P}from"./patient-helper-33893341.js";import"./_baseToString-7c0e3f59.js";import"./_castSlice-1b11acd9.js";import{o as S}from"./sortBy-7fc077e6.js";import"./_baseClone-3ae78372.js";import"./sortBy-6a38afc6.js";import"./_equalByTag-eda72788.js";import"./_baseForOwn-03e9c2f3.js";import{i as R}from"./isEqual-298b6ab1.js";import"./_createSet-6ff8e1d4.js";import{u as N}from"./uniqWith-79e2a4b4.js";import{u as k,P as L}from"./patient-provider-2630b162.js";import{u as U}from"./ctw-box-696ec253.js";import"./_commonjsHelpers-042e6b4d.js";import"./modal-ccda-6dbd34db.js";import"./request-5d5ec5f4.js";import"./isEmpty-258cb052.js";import"./_baseIsEqual-7d59e24c.js";import"./uniqBy-e047f966.js";import"./_basePickBy-b5376a08.js";import"./mapValues-c63fd567.js";import"./isPlainObject-243fdc78.js";import"./uniq-8676ca12.js";import"./collapsible-data-list-details-4a1431c5.js";import"./drawer-de3413cf.js";import"./index-6de6b113.js";import"./pickBy-f6e57f40.js";import"./isString-933c0e0c.js";import"./spinner-66aa4ba7.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./toNumber-d7ce3bd9.js";const V=[{title:"Date",dataIndex:"occurrence"},{title:"Description",dataIndex:"description"},{title:"CVX Code",dataIndex:"cvxCode"}];class B extends T{get description(){return this.resource.vaccineCode.text}get cvxCode(){const t=_(w,this.resource.vaccineCode);return t==null?void 0:t.code}get occurrence(){return this.resource.occurrenceDateTime?x(this.resource.occurrenceDateTime):this.resource.occurrenceString}}const n=e=>{const t=e.map(a=>new B(a));return N(t,(a,o)=>R(u(a),u(o)))},u=e=>[e.description,e.cvxCode,e.occurrence];try{n.displayName="applyImmunizationFilters",n.__docgenInfo={description:"",displayName:"applyImmunizationFilters",props:{}}}catch{}function H(){return k(D,[],async(e,t)=>{try{const{bundle:r,resources:a}=await C("Immunization",e,{patientUPID:t.UPID});return S(n(a),[o=>o.occurrence??""],["desc"])}catch(r){throw new Error(`Failed fetching immunization information for patient: ${r}`)}})}const F=({record:e})=>i.createElement(g,{name:"Immunization Resource",resource:e.resource});function M({className:e}){const t=h.useRef(null),r=U(t),a=H(),o=b({header:f=>f.description,details:A});return i.createElement("div",{ref:t,"data-zus-telemetry-namespace":"Immunizations",className:y("ctw-patient-immunizations ctw-bg-white",e,{"ctw-stacked":r.sm})},i.createElement("div",{className:"ctw-overflow-hidden"},i.createElement(v,{removeLeftAndRightBorders:!0,RowActions:F,stacked:r.sm,className:"-ctw-mx-px !ctw-rounded-none",isLoading:a.isLoading,records:a.data??[],columns:V,handleRowClick:o})))}const c=z(M,"PatientImmunizations"),A=e=>[{label:"Date",value:e.occurrence},{label:"Description",value:e.description},{label:"Vaccine Code",value:e.resource.vaccineCode.coding?i.createElement(I,{codings:e.resource.vaccineCode.coding}):void 0}];try{c.displayName="PatientImmunizations",c.__docgenInfo={description:"",displayName:"PatientImmunizations",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const O={resourceType:"Bundle",id:"f2b911f3-b5cc-42c0-899c-f4f3ed92cfd1",meta:{lastUpdated:"2023-01-26T16:02:38.923+00:00"},type:"searchset",total:2,link:[{relation:"self",url:"https://api.sandbox.zusapi.com/fhir/Immunization?_count=10&_offset=0&_sort=-_lastUpdated&_total=accurate"}],entry:[{fullUrl:"https://api.sandbox.zusapi.com/fhir/Immunization/efc72c61-a46c-412f-9c24-adca7a99a498",resource:{resourceType:"Immunization",id:"efc72c61-a46c-412f-9c24-adca7a99a498",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:39.352+00:00"}],versionId:"1",lastUpdated:"2023-01-26T15:49:39.354+00:00",source:"#nzL1s2NVRsaV2H7S",tag:[{system:"https://zusapi.com/thirdparty/source",code:"commonwell"},{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f-ae4b-45f4-a653-5677b1582115",display:"HLTH 2022 - Gunther"}]},extension:[{url:"https://zusapi.com/fhir/identifier/universal-id",valueString:"b640bda1-aec7-4be6-a890-e3685a55bce3"}],status:"completed",vaccineCode:{coding:[{system:"http://hl7.org/fhir/sid/cvx",code:"205"}],text:"Influenza vaccine, quadrivalent, adjuvanted	"},patient:{reference:"Patient/07d6b737-8cf4-42e8-8eda-66777985aa15",type:"Patient"},occurrenceDateTime:"2022-07-10"},search:{mode:"match"}},{fullUrl:"https://api.sandbox.zusapi.com/fhir/Immunization/7c2c8f76-d8ca-4ea7-9977-4bfd8b2f5085",resource:{resourceType:"Immunization",id:"7c2c8f76-d8ca-4ea7-9977-4bfd8b2f5085",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:39.087+00:00"}],versionId:"1",lastUpdated:"2023-01-26T15:49:39.102+00:00",source:"#C2QEi5NSLV0uyr1o",tag:[{system:"https://zusapi.com/thirdparty/source",code:"commonwell"},{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f-ae4b-45f4-a653-5677b1582115",display:"HLTH 2022 - Gunther"}]},extension:[{url:"https://zusapi.com/fhir/identifier/universal-id",valueString:"b640bda1-aec7-4be6-a890-e3685a55bce3"}],status:"completed",vaccineCode:{coding:[{system:"http://hl7.org/fhir/sid/cvx",code:"211"}],text:"COVID-19, subunit, rS-nanoparticle+Matrix-M1 Adjuvant, PF, 0.5 mL"},patient:{reference:"Patient/07d6b737-8cf4-42e8-8eda-66777985aa15",type:"Patient"},occurrenceDateTime:"2022-04-01"},search:{mode:"match"}}]},q={resourceType:"Bundle",id:"f4da1f39-7638-45e4-999b-9ff33d7c5201",meta:{lastUpdated:"2022-11-15T19:37:55.783+00:00"},type:"searchset",entry:[{resource:{resourceType:"Patient",id:"u12345",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:38.110+00:00"}],versionId:"2",lastUpdated:"2023-01-26T15:49:38.553+00:00",source:"#cacbf4a51c11b1b0",security:[{system:"http://terminology.hl7.org/CodeSystem/v3-ActReason",code:"HTEST"}],tag:[{system:"https://zusapi.com/thirdparty/source",code:"commonwell"},{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f-ae4b-45f4-a653-5677b1582115",display:"HLTH 2022 - Gunther"}]},identifier:[{system:"https://zusapi.com/fhir/identifier/universal-id",value:"b640bda1-aec7-4be6-a890-e3685a55bce3"}],name:[{family:"Zhang",given:["Bruno"]}],telecom:[{system:"email",value:"brunozhang@example.com"},{system:"phone",value:"555-569-2000",use:"home"},{system:"phone",value:"555-536-3933",use:"mobile"},{system:"phone",value:"555-843-3265",use:"work"}],gender:"male",birthDate:"1970-05-09",address:[{line:["357 SHADOW LN"],city:"LAS VEGAS",state:"NV",postalCode:"89106-4119"}],managingOrganization:{reference:"Organization/79a1c124-a752-4d9a-a44e-2c02499ae402"}},search:{mode:"match"}}]};function G(){return{parameters:{msw:W()}}}function W(){const e=m.rest.get("https://api.dev.zusapi.com/fhir/Patient",(r,a,o)=>a(o.delay(750),o.status(200),o.json(q))),t=m.rest.get("https://api.dev.zusapi.com/fhir/Immunization",(r,a,o)=>a(o.status(200),o.json(O)));return[e,t]}const Se={component:c,tags:["autodocs"],argTypes:{className:{options:["Blank","Fixed Width"],control:"select",mapping:{Blank:"","Fixed Width":"ctw-m-auto ctw-max-w-[600px]"}}},args:{className:"Blank",readOnly:!1},decorators:[(e,{args:t})=>i.createElement(E,{env:"dev",authToken:"dummy-token",builderId:"b123"},i.createElement(L,{patientID:"u12345",systemURL:P},i.createElement(e,{args:t})))]},s={...G()};var d,p,l;s.parameters={...s.parameters,docs:{...(d=s.parameters)==null?void 0:d.docs,source:{originalSource:`{
  ...setupImmunizationMocks()
}`,...(l=(p=s.parameters)==null?void 0:p.docs)==null?void 0:l.source}}};const Re=["Basic"];export{s as Basic,Re as __namedExportsOrder,Se as default};
//# sourceMappingURL=patient-immunizations.stories-90de0f1e.js.map
