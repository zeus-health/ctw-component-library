var g=Object.defineProperty;var F=(t,e,a)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var p=(t,e,a)=>(F(t,typeof e!="symbol"?e+"":e,a),a);import{r as d,R as i}from"./index-6f814c40.js";import{l as u,f,a as o,m as A,c as n,u as b,s as z,Q as v,b as C,C as _,P as T,S as I}from"./patient-provider-8a63fac4.js";import{c as w}from"./action-list-e2dd9cac.js";import{c as x}from"./index-74f03c09.js";import{o as S,T as P}from"./table-e295e10f.js";import"./_baseToString-187d444d.js";import"./_baseClone-fef349e9.js";import"./sortBy-efab5300.js";import"./_equalByTag-10364aa0.js";import"./_baseForOwn-253202de.js";import"./_createSet-3974b849.js";import"./_commonjsHelpers-042e6b4d.js";import"./request-47bfd586.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./_basePickBy-fb0e0feb.js";import"./_baseIsEqual-3673da74.js";import"./data-list-254aa0b0.js";import"./drawer-13cd88e8.js";import"./index-6de6b113.js";import"./spinner-66aa4ba7.js";import"./uniq-e0410fc4.js";import"./_arrayIncludes-66d8e0f7.js";import"./isString-f42f95ae.js";import"./extends-f6fdd1c6.js";import"./mapValues-df167d9c.js";import"./debounce-13803188.js";import"./toNumber-02bd1cf0.js";import"./isPlainObject-b29fff7a.js";const E={resourceType:"Bundle",id:"0cd95281",meta:{lastUpdated:"2023-01-26T15:52:40.206+00:00"},type:"searchset",link:[{relation:"self",url:"https://api.sandbox.zusapi.com/fhir/Patient?_count=1&_include=Patient%3Aorganization&_tag=https%3A%2F%2Fzusapi.com%2Faccesscontrol%2Fowner%7C&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fthirdparty%2Fsource%7Csurescripts&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fthirdparty%2Fsource%7Ccommonwell&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fthirdparty%2Fsource%7Celation&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fthirdparty%2Fsource%7Ccollective-medical&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fthirdparty%2Fsource%7Cquest&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CActiveMedications&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CChronicConditions&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fsummary%7CCommon&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Ffhir%2Ftag%2Fupi-record-type%7Cuniversal&identifier=https%3A%2F%2Fzusapi.com%2Ffhir%2Fidentifier%2Funiversal-id%7Cb640bda1-aec7-4be6-a890-e3685a55bce3"},{relation:"next",url:"https://api.sandbox.zusapi.com/fhir/Patient?_count=1&_include=Patient%3Aorganization&_offset=1&_tag=https%3A%2F%2Fzusapi.com%2Faccesscontrol%2Fowner%7C&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fthirdparty%2Fsource%7Csurescripts&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fthirdparty%2Fsource%7Ccommonwell&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fthirdparty%2Fsource%7Celation&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fthirdparty%2Fsource%7Ccollective-medical&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fthirdparty%2Fsource%7Cquest&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CActiveMedications&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CChronicConditions&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fsummary%7CCommon&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Ffhir%2Ftag%2Fupi-record-type%7Cuniversal&identifier=https%3A%2F%2Fzusapi.com%2Ffhir%2Fidentifier%2Funiversal-id%7Cb640bda1-aec7-4be6-a890-e3685a55bce3"}],entry:[{fullUrl:"https://api.sandbox.zusapi.com/fhir/Patient/76b42bff-b0cf-4056-bc28-45717a2826b9",resource:{resourceType:"Patient",id:"76b42bff",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:33.410+00:00"}],versionId:"2",lastUpdated:"2023-01-26T15:49:34.787+00:00",source:"#fb414c905229fd74",security:[{system:"http://terminology.hl7.org/CodeSystem/v3-ActReason",code:"HTEST"}],tag:[{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f",display:"HLTH 2022 - Gunther"}]},identifier:[{system:"https://zusapi.com/fhir/identifier/universal-id",value:"b640bda1"}],active:!0,name:[{family:"Zhang",given:["Bruno"]}],telecom:[{system:"email",value:"brunozhang@example.com"},{system:"phone",value:"555-569-2000",use:"home"},{system:"phone",value:"555-536-3933",use:"mobile"},{system:"phone",value:"555-843-3265",use:"work"}],gender:"male",birthDate:"1970-05-09",address:[{line:["357 SHADOW LN"],city:"LAS VEGAS",state:"NV",postalCode:"89106-4119"}],maritalStatus:{coding:[{system:"http://terminology.hl7.org/CodeSystem/v3-MaritalStatus",code:"D",display:"Divorced"}],text:"Divorced"},contact:[{relationship:[{coding:[{system:"http://terminology.hl7.org/CodeSystem/v2-0131",code:"C",display:"Emergency contact"}],text:"Emergency contact"}],name:{family:"Liu",given:["Wendy"]},telecom:[{system:"phone",value:"555-993-5207",use:"home"},{system:"email",value:"wendy.liu@example.com"}]}],managingOrganization:{reference:"Organization/56bb2e9c"}},search:{mode:"match"}},{fullUrl:"https://api.sandbox.zusapi.com/fhir/Organization/56bb2e9c",resource:{resourceType:"Organization",id:"56bb2e9c",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:29.814+00:00"}],versionId:"1",lastUpdated:"2023-01-26T15:49:29.815+00:00",source:"#8XARW8z21o5TqSvA",tag:[{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f",display:"HLTH 2022 - Gunther"}]},name:"Demo Health"},search:{mode:"include"}}]};let h;function D({allergies:t}){return{decorators:[e=>(h=w(t),d.createElement(e))],parameters:{msw:[U,L]}}}const U=u.rest.get("https://api.dev.zusapi.com/fhir/Patient",(t,e,a)=>e(a.delay(750),a.status(200),a.json(E))),L=u.rest.get("https://api.dev.zusapi.com/fhir/AllergyIntolerance",(t,e,a)=>e(a.status(200),a.json(h))),k=[{title:"Description",dataIndex:"display"},{title:"Type",dataIndex:"type"},{title:"Status",dataIndex:"clinicalStatus"},{title:"Category",dataIndex:"categories"},{title:"Onset",dataIndex:"onset"}];function H(t){var e,a;return t.onsetAge?f(t.onsetAge):t.onsetDateTime?o(t.onsetDateTime):t.onsetPeriod?o(t.onsetPeriod.start):t.onsetRange?o((a=(e=t.onsetRange.low)==null?void 0:e.value)==null?void 0:a.toString()):A(t.onsetString)}class N{constructor(e){p(this,"resource");this.resource=e}get id(){return this.resource.id??""}get type(){return this.resource.type??""}get clinicalStatus(){return n(this.resource.clinicalStatus)}get display(){return n(this.resource.code)}get categories(){var e;return(e=this.resource.category)==null?void 0:e.join(", ")}get onset(){return H(this.resource)}get manifestations(){var a;const e=[];return(a=this.resource.reaction)==null||a.forEach(r=>r.manifestation.forEach(s=>e.push(n(s)))),e.join(", ")}}function R(){return b(v,[],async(t,e)=>{try{const{bundle:a,resources:r}=await z("AllergyIntolerance",t,{patientUPID:e.UPID});return S(r.map(s=>new N(s)),[s=>s.onset],["desc"])}catch{throw new Error(`Failed fetching allergies information for patient ${e.UPID}`)}})}function l({className:t}){const e=d.useRef(null),a=C(e),r=R(),s=r.data??[],{isLoading:y}=r;return i.createElement("div",{ref:e,className:x("ctw-border ctw-border-solid ctw-border-divider-light ctw-bg-white",t,{"ctw-stacked":a.sm})},i.createElement("div",{className:"ctw-items-center ctw-justify-between ctw-py-5 ctw-px-4"},i.createElement("div",{className:"ctw-ml-3 ctw-text-xl ctw-font-medium ctw-text-content-black"},"Allergies"),i.createElement(P,{stacked:a.sm,className:"-ctw-mx-px !ctw-rounded-none",isLoading:y,records:s,columns:k})))}try{l.displayName="PatientAllergies",l.__docgenInfo={description:"",displayName:"PatientAllergies",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const G={resourceType:"Bundle",id:"e1e7d919",meta:{lastUpdated:"2023-01-26T15:54:30.956+00:00"},type:"searchset",total:3,link:[{relation:"self",url:"https://api.sandbox.zusapi.com/fhir/AllergyIntolerance?_count=250&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CActiveMedications&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CChronicConditions&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fsummary%7CCommon&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Ffhir%2Ftag%2Fupi-record-type%7Cuniversal&patient.identifier=https%3A%2F%2Fzusapi.com%2Ffhir%2Fidentifier%2Funiversal-id%7Cb640bda1-aec7-4be6-a890-e3685a55bce3"}],entry:[{fullUrl:"https://api.sandbox.zusapi.com/fhir/AllergyIntolerance/5d185eaa-fa1d-43d3-a0e8-aa9544c7d140",resource:{resourceType:"AllergyIntolerance",id:"5d185eaa",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:38.359+00:00"}],versionId:"2",lastUpdated:"2023-01-26T15:49:38.634+00:00",source:"#502b339023cd70ed",tag:[{system:"https://zusapi.com/thirdparty/source",code:"commonwell"},{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f",display:"HLTH 2022 - Gunther"}]},extension:[{url:"https://zusapi.com/fhir/identifier/universal-id",valueString:"b640bda1"}],clinicalStatus:{coding:[{system:"http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical",code:"active",display:"Active"}]},type:"intolerance",category:["environment"],code:{text:"Penicillin"},patient:{reference:"Patient/07d6b737",type:"Patient"},onsetDateTime:"2021-10-12",recordedDate:"2021-10-12"},search:{mode:"match"}},{fullUrl:"https://api.sandbox.zusapi.com/fhir/AllergyIntolerance/8802e234-0ec6-4af2-9322-b2f402521c60",resource:{resourceType:"AllergyIntolerance",id:"8802e234",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:38.627+00:00"}],versionId:"1",lastUpdated:"2023-01-26T15:49:38.658+00:00",source:"#HdhMeNQP8LI84LNt",tag:[{system:"https://zusapi.com/thirdparty/source",code:"commonwell"},{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f",display:"HLTH 2022 - Gunther"}]},extension:[{url:"https://zusapi.com/fhir/identifier/universal-id",valueString:"b640bda1"}],clinicalStatus:{coding:[{system:"http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical",code:"active",display:"Active"}]},type:"allergy",category:["medication"],code:{text:"Piperacillin / tazobactam"},patient:{reference:"Patient/07d6b737",type:"Patient"},onsetDateTime:"2021-11-02",recordedDate:"2021-11-02"},search:{mode:"match"}},{fullUrl:"https://api.sandbox.zusapi.com/fhir/AllergyIntolerance/54eaab33-a632-414d-9d92-908065b1db20",resource:{resourceType:"AllergyIntolerance",id:"54eaab33",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:38.842+00:00"}],versionId:"1",lastUpdated:"2023-01-26T15:49:38.845+00:00",source:"#heae5sSskka8GwOt",tag:[{system:"https://zusapi.com/thirdparty/source",code:"commonwell"},{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f",display:"HLTH 2022 - Gunther"}]},extension:[{url:"https://zusapi.com/fhir/identifier/universal-id",valueString:"b640bda1"}],clinicalStatus:{coding:[{system:"http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical",code:"active",display:"Active"}]},type:"allergy",category:["medication"],code:{text:"Sulfa Antibiotics"},patient:{reference:"Patient/07d6b737",type:"Patient"},onsetDateTime:"2021-11-02",recordedDate:"2021-11-02"},search:{mode:"match"}}]},ye={tags:["docsPage"],component:l,decorators:[(t,{args:e})=>i.createElement(_,{env:"dev",authToken:"ey.12345",builderId:"12345"},i.createElement(T,{patientID:"007",systemURL:I},i.createElement(t,{args:e})))]},c={...D({allergies:G})};var m;c.parameters={...c.parameters,storySource:{source:`{
  ...setupAllergiesMocks({
    allergies: allergyIntolerance
  })
}`,...(m=c.parameters)==null?void 0:m.storySource}};const ge=["Basic"];export{c as Basic,ge as __namedExportsOrder,ye as default};
//# sourceMappingURL=patient-allergies.stories-8dc522b2.js.map
