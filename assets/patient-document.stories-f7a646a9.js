import{R as n,r as F}from"./index-6f814c40.js";import{c as A}from"./index-74f03c09.js";import{u as E,D as w}from"./modal-ccda-41cf3cf9.js";import{F as R,K as S,ah as x,R as z,ai as T,H as V,a0 as I,aj as N,ak as P,w as q,h as B,l as c,C as k,a as M,S as H}from"./patient-allergies-a78f7d4b.js";import{q as y}from"./drawer-3c02213f.js";import{V as O}from"./view-fhir-377b45db.js";import{o as U,T as L}from"./table-7b0051be.js";import"./action-list-bc3500ad.js";import"./spinner-66aa4ba7.js";import"./request-e8399893.js";import"./_baseToString-7c0e3f59.js";import"./_baseClone-17ec433b.js";import"./sortBy-a390368e.js";import"./_equalByTag-eda72788.js";import"./_baseForOwn-7324d3a8.js";import{i as W}from"./isEqual-298b6ab1.js";import"./_createSet-6ff8e1d4.js";import{c as G}from"./condition-binary-d416dd33.js";import"./_commonjsHelpers-042e6b4d.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./mapValues-13598fe6.js";import"./extends-b0154772.js";import"./_basePickBy-fa3aec3b.js";import"./_baseIsEqual-7d59e24c.js";import"./uniq-8676ca12.js";import"./data-list-254aa0b0.js";import"./isString-933c0e0c.js";import"./debounce-5029c56d.js";import"./toNumber-d7ce3bd9.js";import"./index-6de6b113.js";import"./isPlainObject-f51be120.js";function Y(){const{openDrawer:e}=R();return t=>{e({component:a=>n.createElement(d,{document:t,...a})})}}function d({document:e,className:t,isOpen:a,onClose:i}){const o=E();return n.createElement(y,{className:t,title:"Document Details",isOpen:a,onClose:i,showCloseFooter:!0},n.createElement(y.Body,null,n.createElement("div",{className:"ctw-py-2"},n.createElement("div",{className:"ctw-text-2xl"},e.dateCreated," - ",e.title)),n.createElement(S,{data:u(e),documentButton:e.binaryID&&n.createElement(w,{onClick:()=>e.binaryID&&o(e.binaryID,"Document"),text:"Source Document"})})))}const u=e=>[{label:"status",value:e.status},{label:"docStatus",value:e.docStatus},{label:"Managing Organization",value:e.custodian},{label:"Section Display",value:e.sectionDisplays&&n.createElement("div",null,e.sectionDisplays.map((t,a)=>n.createElement("div",{key:t+a},t)))}];try{d.displayName="DocumentDetailsDrawer",d.__docgenInfo={description:"",displayName:"DocumentDetailsDrawer",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"DocumentModel"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}try{u.displayName="documentData",u.__docgenInfo={description:"",displayName:"documentData",props:{status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"string"}},binaryID:{defaultValue:null,description:"",name:"binaryID",required:!0,type:{name:"string | undefined"}},docStatus:{defaultValue:null,description:"",name:"docStatus",required:!0,type:{name:"string | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string | undefined"}},dateCreated:{defaultValue:null,description:"",name:"dateCreated",required:!0,type:{name:"string | undefined"}},custodian:{defaultValue:null,description:"",name:"custodian",required:!0,type:{name:"string | undefined"}},sectionDisplays:{defaultValue:null,description:"",name:"sectionDisplays",required:!0,type:{name:"string[] | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"DocumentReference"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}const l=(e=!0)=>{const t=[{widthPercent:20,minWidth:100,title:"Date Created",render:a=>n.createElement("div",null,a.dateCreated)},{widthPercent:30,minWidth:200,title:"Title",render:a=>n.createElement("div",null,a.title)},{widthPercent:30,minWidth:200,title:"Managing Organization",render:a=>n.createElement("div",null,a.custodian)}];return e&&t.push({widthPercent:20,minWidth:150,render:a=>n.createElement(O,{name:"Document Resource",resource:a.resource})}),t};try{l.displayName="patientDocumentColumns",l.__docgenInfo={description:"",displayName:"patientDocumentColumns",props:{}}}catch{}class j extends x{get status(){return this.resource.status}get binaryID(){const t=this.resource.content[0].attachment.url;if(t)return t.split("/").pop()}get docStatus(){return this.resource.docStatus}get title(){return this.resource.content[0].attachment.title}get dateCreated(){return z(this.resource.content[0].attachment.creation)}get custodian(){var t;return(t=this.resource.custodian)==null?void 0:t.display}get sectionDisplays(){var t;return((t=this.resource.category)==null?void 0:t.map(a=>T(a)))||void 0}}const m=e=>{const t=e.map(i=>new j(i));return V(t,(i,o)=>W(f(i),f(o)))},f=e=>[e.dateCreated,e.custodian,e.title];try{m.displayName="applyDocumentFilters",m.__docgenInfo={description:"",displayName:"applyDocumentFilters",props:{}}}catch{}function Q(){return I(P,[],async(e,t)=>{try{const{bundle:a,resources:i}=await N("DocumentReference",e,{patientUPID:t.UPID});return U(m(i),[o=>o.resource.content[0].attachment.creation||""],["desc"])}catch(a){throw new Error(`Failed fetching document information for patient: ${a}`)}})}function Z({className:e,includeViewFhirResource:t}){const a=F.useRef(null),i=B(a),o=Q(),r=Y();function b(C){r(C)}const _=o.data??[],{isLoading:v}=o;return n.createElement("div",{ref:a,"data-zus-telemetry-namespace":"Documents",className:A("ctw-patient-documents ctw-bg-white",e,{"ctw-stacked":i.sm})},n.createElement("div",{className:"ctw-overflow-hidden"},n.createElement(L,{stacked:i.sm,removeLeftAndRightBorders:!0,className:"-ctw-mx-px !ctw-rounded-none",isLoading:v,records:_,columns:l(t),handleRowClick:b})))}const p=q(Z,"PatientDocuments");try{p.displayName="PatientDocuments",p.__docgenInfo={description:"",displayName:"PatientDocuments",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},includeViewFhirResource:{defaultValue:null,description:"",name:"includeViewFhirResource",required:!1,type:{name:"boolean"}}}}}catch{}const K={resourceType:"Bundle",id:"b8627acb-9676-47cd-a5b9-145bb680b8eb",meta:{lastUpdated:"2023-02-21T16:37:50.194+00:00"},type:"searchset",link:[{relation:"self",url:"https://api.sandbox.zusapi.com/fhir/DocumentReference?_count=250&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CActiveMedications&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CChronicConditions&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fsummary%7CCommon&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Ffhir%2Ftag%2Fupi-record-type%7Cuniversal&patient.identifier=https%3A%2F%2Fzusapi.com%2Ffhir%2Fidentifier%2Funiversal-id%7C348a02df-f1a7-4413-93f9-b0802a7a4796"},{relation:"next",url:"https://api.sandbox.zusapi.com/fhir/DocumentReference?_count=250&_offset=250&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CActiveMedications&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CChronicConditions&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fsummary%7CCommon&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Ffhir%2Ftag%2Fupi-record-type%7Cuniversal&patient.identifier=https%3A%2F%2Fzusapi.com%2Ffhir%2Fidentifier%2Funiversal-id%7C348a02df-f1a7-4413-93f9-b0802a7a4796"}],entry:[{fullUrl:"https://api.sandbox.zusapi.com/fhir/DocumentReference/7fbc3222-4d45-4cf2-9bab-e56867c3c9a2",resource:{resourceType:"DocumentReference",id:"7fbc3222-4d45-4cf2-9bab-e56867c3c9a2",meta:{versionId:"9",lastUpdated:"2023-02-02T22:17:32.153+00:00",source:"#d6fc69a0d3aa79fb",tag:[{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f4599d90-6d29-4843-a16d-ae7c469eb229"}]},extension:[{url:"https://zusapi.com/fhir/identifier/universal-id",valueString:"348a02df-f1a7-4413-93f9-b0802a7a4796"}],masterIdentifier:{use:"usual",system:"urn:oid:2.16.840.1.113883.4.570.10",value:"458"},status:"current",docStatus:"final",type:{coding:[{system:"http://loinc.org",code:"34133-9",display:"Summarization of Episode Note"}],text:"Summarization of Episode Note"},category:[{coding:[{system:"http://loinc.org",code:"48765-2",display:"Allergies, Adverse Reactions, Alerts"}],text:"Allergies, Adverse Reactions, Alerts"},{coding:[{system:"http://loinc.org",code:"10160-0",display:"History of Medication Use"}],text:"History of Medication Use"},{coding:[{system:"http://loinc.org",code:"11450-4",display:"Problem List"}],text:"Problem List"},{coding:[{system:"http://loinc.org",code:"47519-4",display:"History of Procedures"}],text:"History of Procedures"},{coding:[{system:"http://loinc.org",code:"30954-2",display:"Relevant Diagnostic Tests and/or Laboratory Data"}],text:"Relevant Diagnostic Tests and/or Laboratory Data"},{coding:[{system:"http://loinc.org",code:"42348-3",display:"Advance Directives"}],text:"Advance Directives"},{coding:[{system:"http://loinc.org",code:"46239-0",display:"Chief Complaint and Reason for Visit"}],text:"Chief Complaint and Reason for Visit"},{coding:[{system:"http://loinc.org",code:"8653-8",display:"Hospital Discharge Instructions"}],text:"Hospital Discharge Instructions"},{coding:[{system:"http://loinc.org",code:"10183-2",display:"Hospital Discharge Medications"}],text:"Hospital Discharge Medications"},{coding:[{system:"http://loinc.org",code:"46240-8",display:"Encounters"}],text:"Encounters"},{coding:[{system:"http://loinc.org",code:"47420-5",display:"Functional Status"}],text:"Functional Status"},{coding:[{system:"http://loinc.org",code:"11369-6",display:"Immunizations"}],text:"Immunizations"},{coding:[{system:"http://loinc.org",code:"18776-5",display:"Plan of Care"}],text:"Plan of Care"},{coding:[{system:"http://loinc.org",code:"29762-2",display:"Social History"}],text:"Social History"},{coding:[{system:"http://loinc.org",code:"8716-3",display:"Vital Signs"}],text:"Vital Signs"}],subject:{reference:"Patient/b1b9380e-390c-42f9-b7bd-edc939edd5f1",type:"Patient",display:"SOLOMAN BERGAMEL"},date:"2022-04-13T15:00:54.460Z",author:[{reference:"Organization/a924058c-f6b5-4cef-8fa5-55e20628bbd7",type:"Organization",display:"Graham Hospital Association"},{reference:"Practitioner/fcd8664e-8840-4756-bd2b-a99db9f89119",type:"Practitioner"}],custodian:{reference:"Organization/1325be70-fb8d-4f01-99b9-efca49a09d37",type:"Organization",display:"Graham Hospital Association"},description:"Continuity of Care Document (Transition of Care)",content:[{attachment:{contentType:"application/xml",language:"en-US",url:"Binary/fa5b964d-d509-458a-b893-763052df4adf",hash:"DOYC3qYo0MgDnxhooYVutWko1/4=",title:"Continuity of Care Document (Transition of Care)",creation:"2021-09-10T14:38:39-05:00"}}],context:{event:[{coding:[{system:"http://loinc.org",code:"34133-9",display:"Summarization of Episode Note"}],text:"Summarization of Episode Note"}]}},search:{mode:"match"}}]},$={resourceType:"Bundle",id:"f4da1f39-7638-45e4-999b-9ff33d7c5201",meta:{lastUpdated:"2022-11-15T19:37:55.783+00:00"},type:"searchset",entry:[{resource:{resourceType:"Patient",id:"u12345",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:38.110+00:00"}],versionId:"2",lastUpdated:"2023-01-26T15:49:38.553+00:00",source:"#cacbf4a51c11b1b0",security:[{system:"http://terminology.hl7.org/CodeSystem/v3-ActReason",code:"HTEST"}],tag:[{system:"https://zusapi.com/thirdparty/source",code:"commonwell"},{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f-ae4b-45f4-a653-5677b1582115",display:"HLTH 2022 - Gunther"}]},identifier:[{system:"https://zusapi.com/fhir/identifier/universal-id",value:"b640bda1-aec7-4be6-a890-e3685a55bce3"}],name:[{family:"Zhang",given:["Bruno"]}],telecom:[{system:"email",value:"brunozhang@example.com"},{system:"phone",value:"555-569-2000",use:"home"},{system:"phone",value:"555-536-3933",use:"mobile"},{system:"phone",value:"555-843-3265",use:"work"}],gender:"male",birthDate:"1970-05-09",address:[{line:["357 SHADOW LN"],city:"LAS VEGAS",state:"NV",postalCode:"89106-4119"}],managingOrganization:{reference:"Organization/79a1c124-a752-4d9a-a44e-2c02499ae402"}},search:{mode:"match"}}]};function J(){const e=c.rest.get("https://api.dev.zusapi.com/fhir/Patient",(i,o,r)=>o(r.delay(750),r.status(200),r.json($))),t=c.rest.get("https://api.dev.zusapi.com/fhir/DocumentReference",(i,o,r)=>o(r.status(200),r.json(K))),a=c.rest.get("https://api.dev.zusapi.com/fhir/Binary",async(i,o,r)=>o(r.status(200),r.json(G)));return[e,t,a]}function X(){return{parameters:{msw:J()}}}const Te={component:p,tags:["autodocs"],argTypes:{className:{options:["Blank","Fixed Width"],control:"select",mapping:{Blank:"","Fixed Width":"ctw-m-auto ctw-max-w-[600px]"}}},args:{className:"Blank",readOnly:!1},decorators:[(e,{args:t})=>n.createElement(k,{env:"dev",authToken:"dummy-token",builderId:"b123"},n.createElement(M,{patientID:"u12345",systemURL:H},n.createElement(e,{args:t})))]},s={...X()};var g,h,D;s.parameters={...s.parameters,docs:{...(g=s.parameters)==null?void 0:g.docs,source:{originalSource:`{
  ...setupDocumentMocks()
}`,...(D=(h=s.parameters)==null?void 0:h.docs)==null?void 0:D.source}}};const Ve=["Basic"];export{s as Basic,Ve as __namedExportsOrder,Te as default};
//# sourceMappingURL=patient-document.stories-f7a646a9.js.map
