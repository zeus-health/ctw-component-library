var q=Object.defineProperty;var C=(t,r,e)=>r in t?q(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var l=(t,r,e)=>(C(t,typeof r!="symbol"?r+"":r,e),e);import{R as o,r as R}from"./index-6f814c40.js";import{c as w}from"./index-74f03c09.js";import{u as b}from"./resource-details-drawer-b03884fb.js";import{V}from"./view-fhir-af2fb9fd.js";import{F as v,a as P,c as g,G as h,w as E,H as D,s as N,I as O,u as S}from"./patient-helper-0838fee9.js";import{T as I}from"./table-a6e3434f.js";import{c as _,u as B}from"./patient-provider-d1b391ca.js";import"./_baseToString-4993715b.js";import{f as M,o as k}from"./sortBy-df4456c4.js";import"./_baseClone-25b1595e.js";import"./sortBy-d677d734.js";import"./_equalByTag-aaf39779.js";import"./_baseForOwn-d8306f34.js";import"./_createSet-12ef9b81.js";import{i as z}from"./isEqual-b08f36b0.js";import{u as W}from"./collapsible-data-list-details-b542a54e.js";import{u as A}from"./use-breakpoints-3902bba3.js";const d=(t=!1)=>{const r=[{widthPercent:20,minWidth:150,title:"Practitioner",render:e=>o.createElement(o.Fragment,null,o.createElement("div",null,e.practitionerName),o.createElement("div",null,e.managingOrganization))},{widthPercent:20,minWidth:150,title:"Role",render:e=>o.createElement("div",null,e.role)},{widthPercent:20,minWidth:150,title:"Specialty",render:e=>o.createElement("div",null,e.qualification)},{widthPercent:20,minWidth:150,title:"Noted On",render:e=>o.createElement("div",null,e.effectiveStartDate)}];return t&&r.push({widthPercent:20,minWidth:150,render:e=>o.createElement(V,{name:"CareTeam Resource",resource:e.careTeam})}),r};try{d.displayName="patientCareTeamColumns",d.__docgenInfo={description:"",displayName:"patientCareTeamColumns",props:{}}}catch{}class F extends v{constructor(){super(...arguments);l(this,"kind","CareTeam")}get status(){return this.resource.status}get periodStart(){var e;return P((e=this.resource.period)==null?void 0:e.start)}get periodEnd(){var e;return(e=this.resource.period)==null?void 0:e.end}get particpants(){return this.resource.participant}get careTeamTelecom(){return this.resource.telecom}get managingOrganization(){var a,i;return(i=(a=M(this.resource.participant,"onBehalfOf"))==null?void 0:a.onBehalfOf)==null?void 0:i.display}get role(){var e,a;return g((a=(e=this.resource.participant)==null?void 0:e[0].role)==null?void 0:a[0])}get practitionerQualification(){var i,n,s,u;const e=(s=(n=(i=this.resource.participant)==null?void 0:i[0])==null?void 0:n.member)==null?void 0:s.reference,a=h("Practitioner",this.resource.contained,this.includedResources,e);if(a)return g((u=new _(a).resource.qualification)==null?void 0:u[0].code)}getPractitionerByID(e){return h("Practitioner",this.resource.contained,this.includedResources,e)}}class x extends v{constructor(e,a){super(a);l(this,"kind","CareTeamPractitioner");l(this,"careTeam");this.careTeam=e}get practitionerName(){return new _(this.resource).fullName}get effectiveStartDate(){return this.careTeam.periodStart}get managingOrganization(){return this.careTeam.managingOrganization}get role(){return this.careTeam.role}get qualification(){return this.careTeam.practitionerQualification}get telecom(){return this.careTeam.careTeamTelecom}get status(){return this.careTeam.status}}const Q=(t,r)=>{const e=t.map(n=>new F(n,r)),a=[];e.forEach(n=>{var s;return(s=n.resource.participant)==null?void 0:s.forEach(u=>{var p,f;const c=n.getPractitionerByID((p=u.member)==null?void 0:p.reference);c!=null&&c.id&&((f=u.member)!=null&&f.reference)&&a.push(new x(n,c))})});const i=k(a,["effectiveStartDate","id"],["desc","desc"]);return W(i,(n,s)=>z(y(n),y(s)))},y=t=>[t.effectiveStartDate,t.role,t.qualification,t.practitionerName];function H(){return B(D,[],E(async(t,r)=>{try{const{bundle:e,resources:a}=await N("CareTeam",t,{patientUPID:r.UPID,_include:"CareTeam:participant"}),i=O(e);return Q(a,i)}catch(e){throw new Error(`Failed fetching care team information for patient: ${e}`)}},"req.patient_care_team",[]))}function T({className:t}){const r=R.useRef(null),e=A(r),{featureFlags:a}=S(),i=H(),n=b({header:s=>s.practitionerName,subHeader:s=>s.qualification,details:m});return o.createElement("div",{ref:r,className:w("ctw-scrollable-pass-through-height ctw-border ctw-border-solid ctw-border-divider-light ctw-bg-white",t,{"ctw-stacked":e.sm})},o.createElement(I,{stacked:e.sm,isLoading:i.isLoading,records:i.data??[],columns:d(a==null?void 0:a.enableViewFhirButton),handleRowClick:n}))}const m=t=>[{label:"Organization",value:t.managingOrganization},{label:"CareTeam Telecom",value:t.telecom&&o.createElement("div",null,t.telecom.map((r,e)=>o.createElement("div",{key:e},r.value)))},{label:"Role",value:t.role},{label:"Status",value:t.status}];try{T.displayName="PatientCareTeam",T.__docgenInfo={description:"",displayName:"PatientCareTeam",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{m.displayName="careTeamData",m.__docgenInfo={description:"",displayName:"careTeamData",props:{kind:{defaultValue:null,description:"",name:"kind",required:!0,type:{name:'"CareTeamPractitioner"'}},careTeam:{defaultValue:null,description:"",name:"careTeam",required:!0,type:{name:"CareTeamModel"}},practitionerName:{defaultValue:null,description:"",name:"practitionerName",required:!0,type:{name:"string"}},effectiveStartDate:{defaultValue:null,description:"",name:"effectiveStartDate",required:!0,type:{name:"string | undefined"}},managingOrganization:{defaultValue:null,description:"",name:"managingOrganization",required:!0,type:{name:"string | undefined"}},role:{defaultValue:null,description:"",name:"role",required:!0,type:{name:"string"}},qualification:{defaultValue:null,description:"",name:"qualification",required:!0,type:{name:"string | undefined"}},telecom:{defaultValue:null,description:"",name:"telecom",required:!0,type:{name:"ContactPoint[] | undefined"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"proposed"'},{value:'"active"'},{value:'"suspended"'},{value:'"inactive"'},{value:'"entered-in-error"'}]}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Practitioner"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isArchived:{defaultValue:null,description:"",name:"isArchived",required:!0,type:{name:"boolean"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}export{T as P};
