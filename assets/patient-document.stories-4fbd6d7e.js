import{R as s,r as D}from"./index-6f814c40.js";import{c as v}from"./index-74f03c09.js";import{a7 as F,u as _,e as C,s as A,a8 as z,z as x,h as E,i as w,l,C as P,a as R,S as T}from"./patient-allergies-2b53b8df.js";import{V as S}from"./view-fhir-92f83ecf.js";import{o as N,T as k}from"./table-87e792ee.js";import"./action-list-7d2f1f1d.js";import"./drawer-74d79233.js";import"./spinner-66aa4ba7.js";import"./request-8b58a0d5.js";import"./_baseToString-ba0098b0.js";import"./_baseClone-0bdbe065.js";import"./sortBy-35476ce0.js";import"./_equalByTag-3aa7c076.js";import"./_baseForOwn-d5bf979e.js";import{i as I}from"./isEqual-38ff4822.js";import"./_createSet-823d7c6f.js";import{m as H}from"./requests-32d5a8f3.js";import"./_commonjsHelpers-042e6b4d.js";import"./_baseIsEqual-4b283a92.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./uniq-1e65cdac.js";import"./mapValues-80a5786c.js";import"./extends-41c9b0e2.js";import"./_basePickBy-f94c0374.js";import"./data-list-254aa0b0.js";import"./isString-b8ede3fb.js";import"./debounce-0d3e7ec9.js";import"./toNumber-711c0fc1.js";import"./index-6de6b113.js";import"./isPlainObject-7e0f34c5.js";const r=(e=!0)=>{const a=[{widthPercent:20,minWidth:100,title:"Date Created",render:t=>s.createElement("div",null,t.dateCreated)},{widthPercent:30,minWidth:200,title:"Title",render:t=>s.createElement("div",null,t.title)},{widthPercent:30,minWidth:200,title:"Managing Organization",render:t=>s.createElement("div",null,t.custodian)}];return e&&a.push({widthPercent:20,minWidth:150,render:t=>s.createElement(S,{name:"Document Resource",resource:t.resource})}),a};try{r.displayName="patientDocumentColumns",r.__docgenInfo={description:"",displayName:"patientDocumentColumns",props:{}}}catch{}const c=e=>{const a=e.map(i=>new F(i));return _(a,(i,o)=>I(p(i),p(o)))},p=e=>[e.dateCreated,e.custodian,e.title];try{c.displayName="applyDocumentFilters",c.__docgenInfo={description:"",displayName:"applyDocumentFilters",props:{}}}catch{}function M(){return C(z,[],async(e,a)=>{try{const{bundle:t,resources:i}=await A("DocumentReference",e,{patientUPID:a.UPID});return N(c(i),[o=>o.resource.content[0].attachment.creation||""],["desc"])}catch(t){throw new Error(`Failed fetching document information for patient: ${t}`)}})}function O({className:e,includeViewFhirResource:a}){const t=D.useRef(null),i=E(t),o=M(),h=w({header:m=>`${m.dateCreated} - ${m.title}`,details:B}),g=o.data??[],{isLoading:b}=o;return s.createElement("div",{ref:t,"data-zus-telemetry-namespace":"Documents",className:v("ctw-patient-documents ctw-bg-white",e,{"ctw-stacked":i.sm})},s.createElement("div",{className:"ctw-overflow-hidden"},s.createElement(k,{stacked:i.sm,removeLeftAndRightBorders:!0,className:"-ctw-mx-px !ctw-rounded-none",isLoading:b,records:g,columns:r(a),handleRowClick:h})))}const d=x(O,"PatientDocuments"),B=e=>[{label:"status",value:e.status},{label:"docStatus",value:e.docStatus},{label:"Managing Organization",value:e.custodian},{label:"Section Display",value:e.sectionDisplays&&s.createElement("div",null,e.sectionDisplays.map((a,t)=>s.createElement("div",{key:a+t},a)))}];try{d.displayName="PatientDocuments",d.__docgenInfo={description:"",displayName:"PatientDocuments",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},includeViewFhirResource:{defaultValue:null,description:"",name:"includeViewFhirResource",required:!1,type:{name:"boolean"}}}}}catch{}const U={resourceType:"Bundle",id:"b8627acb-9676-47cd-a5b9-145bb680b8eb",meta:{lastUpdated:"2023-02-21T16:37:50.194+00:00"},type:"searchset",link:[{relation:"self",url:"https://api.sandbox.zusapi.com/fhir/DocumentReference?_count=250&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CActiveMedications&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CChronicConditions&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fsummary%7CCommon&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Ffhir%2Ftag%2Fupi-record-type%7Cuniversal&patient.identifier=https%3A%2F%2Fzusapi.com%2Ffhir%2Fidentifier%2Funiversal-id%7C348a02df-f1a7-4413-93f9-b0802a7a4796"},{relation:"next",url:"https://api.sandbox.zusapi.com/fhir/DocumentReference?_count=250&_offset=250&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CActiveMedications&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Flens%7CChronicConditions&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Fsummary%7CCommon&_tag%3Anot=https%3A%2F%2Fzusapi.com%2Ffhir%2Ftag%2Fupi-record-type%7Cuniversal&patient.identifier=https%3A%2F%2Fzusapi.com%2Ffhir%2Fidentifier%2Funiversal-id%7C348a02df-f1a7-4413-93f9-b0802a7a4796"}],entry:[{fullUrl:"https://api.sandbox.zusapi.com/fhir/DocumentReference/7fbc3222-4d45-4cf2-9bab-e56867c3c9a2",resource:{resourceType:"DocumentReference",id:"7fbc3222-4d45-4cf2-9bab-e56867c3c9a2",meta:{versionId:"9",lastUpdated:"2023-02-02T22:17:32.153+00:00",source:"#d6fc69a0d3aa79fb",tag:[{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f4599d90-6d29-4843-a16d-ae7c469eb229"}]},extension:[{url:"https://zusapi.com/fhir/identifier/universal-id",valueString:"348a02df-f1a7-4413-93f9-b0802a7a4796"}],masterIdentifier:{use:"usual",system:"urn:oid:2.16.840.1.113883.4.570.10",value:"458"},status:"current",docStatus:"final",type:{coding:[{system:"http://loinc.org",code:"34133-9",display:"Summarization of Episode Note"}],text:"Summarization of Episode Note"},category:[{coding:[{system:"http://loinc.org",code:"48765-2",display:"Allergies, Adverse Reactions, Alerts"}],text:"Allergies, Adverse Reactions, Alerts"},{coding:[{system:"http://loinc.org",code:"10160-0",display:"History of Medication Use"}],text:"History of Medication Use"},{coding:[{system:"http://loinc.org",code:"11450-4",display:"Problem List"}],text:"Problem List"},{coding:[{system:"http://loinc.org",code:"47519-4",display:"History of Procedures"}],text:"History of Procedures"},{coding:[{system:"http://loinc.org",code:"30954-2",display:"Relevant Diagnostic Tests and/or Laboratory Data"}],text:"Relevant Diagnostic Tests and/or Laboratory Data"},{coding:[{system:"http://loinc.org",code:"42348-3",display:"Advance Directives"}],text:"Advance Directives"},{coding:[{system:"http://loinc.org",code:"46239-0",display:"Chief Complaint and Reason for Visit"}],text:"Chief Complaint and Reason for Visit"},{coding:[{system:"http://loinc.org",code:"8653-8",display:"Hospital Discharge Instructions"}],text:"Hospital Discharge Instructions"},{coding:[{system:"http://loinc.org",code:"10183-2",display:"Hospital Discharge Medications"}],text:"Hospital Discharge Medications"},{coding:[{system:"http://loinc.org",code:"46240-8",display:"Encounters"}],text:"Encounters"},{coding:[{system:"http://loinc.org",code:"47420-5",display:"Functional Status"}],text:"Functional Status"},{coding:[{system:"http://loinc.org",code:"11369-6",display:"Immunizations"}],text:"Immunizations"},{coding:[{system:"http://loinc.org",code:"18776-5",display:"Plan of Care"}],text:"Plan of Care"},{coding:[{system:"http://loinc.org",code:"29762-2",display:"Social History"}],text:"Social History"},{coding:[{system:"http://loinc.org",code:"8716-3",display:"Vital Signs"}],text:"Vital Signs"}],subject:{reference:"Patient/b1b9380e-390c-42f9-b7bd-edc939edd5f1",type:"Patient",display:"SOLOMAN BERGAMEL"},date:"2022-04-13T15:00:54.460Z",author:[{reference:"Organization/a924058c-f6b5-4cef-8fa5-55e20628bbd7",type:"Organization",display:"Graham Hospital Association"},{reference:"Practitioner/fcd8664e-8840-4756-bd2b-a99db9f89119",type:"Practitioner"}],custodian:{reference:"Organization/1325be70-fb8d-4f01-99b9-efca49a09d37",type:"Organization",display:"Graham Hospital Association"},description:"Continuity of Care Document (Transition of Care)",content:[{attachment:{contentType:"application/xml",language:"en-US",url:"Binary/fa5b964d-d509-458a-b893-763052df4adf",hash:"DOYC3qYo0MgDnxhooYVutWko1/4=",title:"Continuity of Care Document (Transition of Care)",creation:"2021-09-10T14:38:39-05:00"}}],context:{event:[{coding:[{system:"http://loinc.org",code:"34133-9",display:"Summarization of Episode Note"}],text:"Summarization of Episode Note"}]}},search:{mode:"match"}}]},V={resourceType:"Bundle",id:"f4da1f39-7638-45e4-999b-9ff33d7c5201",meta:{lastUpdated:"2022-11-15T19:37:55.783+00:00"},type:"searchset",entry:[{resource:{resourceType:"Patient",id:"u12345",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:38.110+00:00"}],versionId:"2",lastUpdated:"2023-01-26T15:49:38.553+00:00",source:"#cacbf4a51c11b1b0",security:[{system:"http://terminology.hl7.org/CodeSystem/v3-ActReason",code:"HTEST"}],tag:[{system:"https://zusapi.com/thirdparty/source",code:"commonwell"},{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f-ae4b-45f4-a653-5677b1582115",display:"HLTH 2022 - Gunther"}]},identifier:[{system:"https://zusapi.com/fhir/identifier/universal-id",value:"b640bda1-aec7-4be6-a890-e3685a55bce3"}],name:[{family:"Zhang",given:["Bruno"]}],telecom:[{system:"email",value:"brunozhang@example.com"},{system:"phone",value:"555-569-2000",use:"home"},{system:"phone",value:"555-536-3933",use:"mobile"},{system:"phone",value:"555-843-3265",use:"work"}],gender:"male",birthDate:"1970-05-09",address:[{line:["357 SHADOW LN"],city:"LAS VEGAS",state:"NV",postalCode:"89106-4119"}],managingOrganization:{reference:"Organization/79a1c124-a752-4d9a-a44e-2c02499ae402"}},search:{mode:"match"}}]};function L(){const e=l.rest.get("https://api.dev.zusapi.com/fhir/Patient",(t,i,o)=>i(o.delay(750),o.status(200),o.json(V))),a=l.rest.get("https://api.dev.zusapi.com/fhir/DocumentReference",(t,i,o)=>i(o.status(200),o.json(U)));return[e,a,H]}function W(){return{parameters:{msw:L()}}}const ve={component:d,tags:["autodocs"],argTypes:{className:{options:["Blank","Fixed Width"],control:"select",mapping:{Blank:"","Fixed Width":"ctw-m-auto ctw-max-w-[600px]"}}},args:{className:"Blank",readOnly:!1},decorators:[(e,{args:a})=>s.createElement(P,{env:"dev",authToken:"dummy-token",builderId:"b123"},s.createElement(R,{patientID:"u12345",systemURL:T},s.createElement(e,{args:a})))]},n={...W()};var u,f,y;n.parameters={...n.parameters,docs:{...(u=n.parameters)==null?void 0:u.docs,source:{originalSource:`{
  ...setupDocumentMocks()
}`,...(y=(f=n.parameters)==null?void 0:f.docs)==null?void 0:y.source}}};const Fe=["Basic"];export{n as Basic,Fe as __namedExportsOrder,ve as default};
//# sourceMappingURL=patient-document.stories-4fbd6d7e.js.map
