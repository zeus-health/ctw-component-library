import{r as s,R as C}from"./index-6f814c40.js";import"./_baseToString-7c0e3f59.js";import"./sortBy-3347ffe9.js";import"./_baseClone-3ae78372.js";import"./sortBy-ee350c06.js";import{d as fe}from"./debounce-5029c56d.js";import{e as ve}from"./_equalByTag-eda72788.js";import"./_baseForOwn-03e9c2f3.js";import{i as xe}from"./isEmpty-258cb052.js";import"./_createSet-6ff8e1d4.js";import{i as ge}from"./sort-618282df.js";import{q as Z,c as P,o as h,C as k,y as q,I as B,b as ee,v as Oe,d as I,u as M,$ as D,r as he,S as W,s as Ce,p as K,m as X,L as Re,a as ye,i as we,j as Ie,k as Se,h as Te}from"./drawer-ef795dd3.js";import{a as S,s as $e,F as Pe,x as Ee}from"./calculate-active-index-415ace96.js";import{c as _e}from"./index-74f03c09.js";function J(e,n){let[o,t]=s.useState(e),i=Z(e);return P(()=>t(i.current),[i,t,...n]),o}function te(e={},n=null,o=[]){for(let[t,i]of Object.entries(e))ne(o,oe(n,t),i);return o}function oe(e,n){return e?e+"["+n+"]":n}function ne(e,n,o){if(Array.isArray(o))for(let[t,i]of o.entries())ne(e,oe(n,t.toString()),i);else o instanceof Date?e.push([n,o.toISOString()]):typeof o=="boolean"?e.push([n,o?"1":"0"]):typeof o=="string"?e.push([n,o]):typeof o=="number"?e.push([n,`${o}`]):o==null?e.push([n,""]):te(o,n,e)}function Fe(e,n,o){let[t,i]=s.useState(o),a=e!==void 0;return[a?e:t,h(g=>(a||i(g),n==null?void 0:n(g)))]}var Le=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Le||{}),Me=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Me||{}),ke=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ke||{}),De=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.RegisterOption=3]="RegisterOption",e[e.UnregisterOption=4]="UnregisterOption",e[e.RegisterLabel=5]="RegisterLabel",e))(De||{});function H(e,n=o=>o){let o=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,t=Te(n(e.options.slice()),a=>a.dataRef.current.domRef.current),i=o?t.indexOf(o):null;return i===-1&&(i=null),{options:t,activeOptionIndex:i}}let Ne={[1](e){return e.dataRef.current.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1}},[0](e){if(e.dataRef.current.disabled||e.comboboxState===0)return e;let n=e.activeOptionIndex,{isSelected:o}=e.dataRef.current,t=e.options.findIndex(i=>o(i.dataRef.current.value));return t!==-1&&(n=t),{...e,comboboxState:0,activeOptionIndex:n}},[2](e,n){var o;if(e.dataRef.current.disabled||e.dataRef.current.optionsRef.current&&!e.dataRef.current.optionsPropsRef.current.static&&e.comboboxState===1)return e;let t=H(e);if(t.activeOptionIndex===null){let a=t.options.findIndex(g=>!g.dataRef.current.disabled);a!==-1&&(t.activeOptionIndex=a)}let i=Ee(n,{resolveItems:()=>t.options,resolveActiveIndex:()=>t.activeOptionIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled});return{...e,...t,activeOptionIndex:i,activationTrigger:(o=n.trigger)!=null?o:1}},[3]:(e,n)=>{let o={id:n.id,dataRef:n.dataRef},t=H(e,a=>[...a,o]);e.activeOptionIndex===null&&e.dataRef.current.isSelected(n.dataRef.current.value)&&(t.activeOptionIndex=t.options.indexOf(o));let i={...e,...t,activationTrigger:1};return e.dataRef.current.__demoMode&&e.dataRef.current.value===void 0&&(i.activeOptionIndex=0),i},[4]:(e,n)=>{let o=H(e,t=>{let i=t.findIndex(a=>a.id===n.id);return i!==-1&&t.splice(i,1),t});return{...e,...o,activationTrigger:1}},[5]:(e,n)=>({...e,labelId:n.id})},G=s.createContext(null);G.displayName="ComboboxActionsContext";function j(e){let n=s.useContext(G);if(n===null){let o=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,j),o}return n}let z=s.createContext(null);z.displayName="ComboboxDataContext";function N(e){let n=s.useContext(z);if(n===null){let o=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,N),o}return n}function Ve(e,n){return M(n.type,Ne,e,n)}let Ae=s.Fragment;function qe(e,n){let{value:o,defaultValue:t,onChange:i,name:a,by:g=(p,x)=>p===x,disabled:l=!1,__demoMode:f=!1,nullable:r=!1,multiple:u=!1,...y}=e,[O,m]=Fe(o,i,t),[d,c]=s.useReducer(Ve,{dataRef:s.createRef(),comboboxState:f?0:1,options:[],activeOptionIndex:null,activationTrigger:1,labelId:null}),R=s.useRef(!1),T=s.useRef({static:!1,hold:!1}),E=s.useRef(null),L=s.useRef(null),b=s.useRef(null),_=s.useRef(null),w=h(typeof g=="string"?(p,x)=>{let $=g;return(p==null?void 0:p[$])===(x==null?void 0:x[$])}:g),F=s.useCallback(p=>M(v.mode,{[1]:()=>O.some(x=>w(x,p)),[0]:()=>w(O,p)}),[O]),v=s.useMemo(()=>({...d,optionsPropsRef:T,labelRef:E,inputRef:L,buttonRef:b,optionsRef:_,value:O,disabled:l,mode:u?1:0,get activeOptionIndex(){if(R.current&&d.activeOptionIndex===null&&d.options.length>0){let p=d.options.findIndex(x=>!x.dataRef.current.disabled);if(p!==-1)return p}return d.activeOptionIndex},compare:w,isSelected:F,nullable:r,__demoMode:f}),[O,l,u,r,f,d]);P(()=>{d.dataRef.current=v},[v]),Re([v.buttonRef,v.inputRef,v.optionsRef],()=>c({type:1}),v.comboboxState===0);let re=s.useMemo(()=>({open:v.comboboxState===0,disabled:l,activeIndex:v.activeOptionIndex,activeOption:v.activeOptionIndex===null?null:v.options[v.activeOptionIndex].dataRef.current.value,value:O}),[v,l,O]),ae=h(p=>{let x=v.options.find($=>$.id===p);!x||U(x.dataRef.current.value)}),ie=h(()=>{if(v.activeOptionIndex!==null){let{dataRef:p,id:x}=v.options[v.activeOptionIndex];U(p.current.value),c({type:2,focus:S.Specific,id:x})}}),le=h(()=>{c({type:0}),R.current=!0}),ue=h(()=>{c({type:1}),R.current=!1}),ce=h((p,x,$)=>(R.current=!1,p===S.Specific?c({type:2,focus:S.Specific,id:x,trigger:$}):c({type:2,focus:p,trigger:$}))),se=h((p,x)=>(c({type:3,id:p,dataRef:x}),()=>c({type:4,id:p}))),pe=h(p=>(c({type:5,id:p}),()=>c({type:5,id:null}))),U=h(p=>M(v.mode,{[0](){return m==null?void 0:m(p)},[1](){let x=v.value.slice(),$=x.findIndex(me=>w(me,p));return $===-1?x.push(p):x.splice($,1),m==null?void 0:m(x)}})),de=s.useMemo(()=>({onChange:U,registerOption:se,registerLabel:pe,goToOption:ce,closeCombobox:ue,openCombobox:le,selectActiveOption:ie,selectOption:ae}),[]),be=n===null?{}:{ref:n};return C.createElement(G.Provider,{value:de},C.createElement(z.Provider,{value:v},C.createElement(ye,{value:M(v.comboboxState,{[0]:K.Open,[1]:K.Closed})},a!=null&&O!=null&&te({[a]:O}).map(([p,x])=>C.createElement(we,{features:Ie.Hidden,...Se({key:p,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:p,value:x})})),D({ourProps:be,theirProps:y,slot:re,defaultTag:Ae,name:"Combobox"}))))}let Be=k(qe),je="input",Ue=k(function(e,n){var o,t;let{value:i,onChange:a,displayValue:g,type:l="text",...f}=e,r=N("Combobox.Input"),u=j("Combobox.Input"),y=q(r.inputRef,n),O=`headlessui-combobox-input-${B()}`,m=ee(),d=s.useMemo(()=>{var b;return typeof g=="function"?(b=g(r.value))!=null?b:"":typeof r.value=="string"?r.value:""},[r.value]);Oe(([b,_],[w,F])=>{!r.inputRef.current||(F===0&&_===1||b!==w)&&(r.inputRef.current.value=b)},[d,r.comboboxState]);let c=h(b=>{switch(b.key){case I.Backspace:case I.Delete:if(r.mode!==0||!r.nullable)return;let _=b.currentTarget;m.requestAnimationFrame(()=>{_.value===""&&(u.onChange(null),r.optionsRef.current&&(r.optionsRef.current.scrollTop=0),u.goToOption(S.Nothing))});break;case I.Enter:if(r.comboboxState!==0||b.nativeEvent.isComposing)return;if(b.preventDefault(),b.stopPropagation(),r.activeOptionIndex===null){u.closeCombobox();return}u.selectActiveOption(),r.mode===0&&u.closeCombobox();break;case I.ArrowDown:return b.preventDefault(),b.stopPropagation(),M(r.comboboxState,{[0]:()=>{u.goToOption(S.Next)},[1]:()=>{u.openCombobox()}});case I.ArrowUp:return b.preventDefault(),b.stopPropagation(),M(r.comboboxState,{[0]:()=>{u.goToOption(S.Previous)},[1]:()=>{u.openCombobox(),m.nextFrame(()=>{r.value||u.goToOption(S.Last)})}});case I.Home:case I.PageUp:return b.preventDefault(),b.stopPropagation(),u.goToOption(S.First);case I.End:case I.PageDown:return b.preventDefault(),b.stopPropagation(),u.goToOption(S.Last);case I.Escape:return r.comboboxState!==0?void 0:(b.preventDefault(),r.optionsRef.current&&!r.optionsPropsRef.current.static&&b.stopPropagation(),u.closeCombobox());case I.Tab:if(r.comboboxState!==0)return;r.mode===0&&u.selectActiveOption(),u.closeCombobox();break}}),R=h(b=>{u.openCombobox(),a==null||a(b)}),T=J(()=>{if(r.labelId)return[r.labelId].join(" ")},[r.labelId]),E=s.useMemo(()=>({open:r.comboboxState===0,disabled:r.disabled}),[r]),L={ref:y,id:O,role:"combobox",type:l,"aria-controls":(o=r.optionsRef.current)==null?void 0:o.id,"aria-expanded":r.disabled?void 0:r.comboboxState===0,"aria-activedescendant":r.activeOptionIndex===null||(t=r.options[r.activeOptionIndex])==null?void 0:t.id,"aria-multiselectable":r.mode===1?!0:void 0,"aria-labelledby":T,disabled:r.disabled,onKeyDown:c,onChange:R};return D({ourProps:L,theirProps:f,slot:E,defaultTag:je,name:"Combobox.Input"})}),He="button",Ke=k(function(e,n){var o;let t=N("Combobox.Button"),i=j("Combobox.Button"),a=q(t.buttonRef,n),g=`headlessui-combobox-button-${B()}`,l=ee(),f=h(d=>{switch(d.key){case I.ArrowDown:return d.preventDefault(),d.stopPropagation(),t.comboboxState===1&&i.openCombobox(),l.nextFrame(()=>{var c;return(c=t.inputRef.current)==null?void 0:c.focus({preventScroll:!0})});case I.ArrowUp:return d.preventDefault(),d.stopPropagation(),t.comboboxState===1&&(i.openCombobox(),l.nextFrame(()=>{t.value||i.goToOption(S.Last)})),l.nextFrame(()=>{var c;return(c=t.inputRef.current)==null?void 0:c.focus({preventScroll:!0})});case I.Escape:return t.comboboxState!==0?void 0:(d.preventDefault(),t.optionsRef.current&&!t.optionsPropsRef.current.static&&d.stopPropagation(),i.closeCombobox(),l.nextFrame(()=>{var c;return(c=t.inputRef.current)==null?void 0:c.focus({preventScroll:!0})}));default:return}}),r=h(d=>{if(he(d.currentTarget))return d.preventDefault();t.comboboxState===0?i.closeCombobox():(d.preventDefault(),i.openCombobox()),l.nextFrame(()=>{var c;return(c=t.inputRef.current)==null?void 0:c.focus({preventScroll:!0})})}),u=J(()=>{if(t.labelId)return[t.labelId,g].join(" ")},[t.labelId,g]),y=s.useMemo(()=>({open:t.comboboxState===0,disabled:t.disabled,value:t.value}),[t]),O=e,m={ref:a,id:g,type:$e(e,t.buttonRef),tabIndex:-1,"aria-haspopup":!0,"aria-controls":(o=t.optionsRef.current)==null?void 0:o.id,"aria-expanded":t.disabled?void 0:t.comboboxState===0,"aria-labelledby":u,disabled:t.disabled,onClick:r,onKeyDown:f};return D({ourProps:m,theirProps:O,slot:y,defaultTag:He,name:"Combobox.Button"})}),Je="label",Ge=k(function(e,n){let o=N("Combobox.Label"),t=`headlessui-combobox-label-${B()}`,i=j("Combobox.Label"),a=q(o.labelRef,n);P(()=>i.registerLabel(t),[t]);let g=h(()=>{var f;return(f=o.inputRef.current)==null?void 0:f.focus({preventScroll:!0})}),l=s.useMemo(()=>({open:o.comboboxState===0,disabled:o.disabled}),[o]);return D({ourProps:{ref:a,id:t,onClick:g},theirProps:e,slot:l,defaultTag:Je,name:"Combobox.Label"})}),ze="ul",We=W.RenderStrategy|W.Static,Xe=k(function(e,n){var o;let{hold:t=!1,...i}=e,a=N("Combobox.Options"),g=q(a.optionsRef,n),l=`headlessui-combobox-options-${B()}`,f=Ce(),r=(()=>f!==null?f===K.Open:a.comboboxState===0)();P(()=>{var m;a.optionsPropsRef.current.static=(m=e.static)!=null?m:!1},[a.optionsPropsRef,e.static]),P(()=>{a.optionsPropsRef.current.hold=t},[a.optionsPropsRef,t]),Pe({container:a.optionsRef.current,enabled:a.comboboxState===0,accept(m){return m.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:m.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(m){m.setAttribute("role","none")}});let u=J(()=>{var m,d;return(d=a.labelId)!=null?d:(m=a.buttonRef.current)==null?void 0:m.id},[a.labelId,a.buttonRef.current]),y=s.useMemo(()=>({open:a.comboboxState===0}),[a]),O={"aria-activedescendant":a.activeOptionIndex===null||(o=a.options[a.activeOptionIndex])==null?void 0:o.id,"aria-labelledby":u,role:"listbox",id:l,ref:g};return D({ourProps:O,theirProps:i,slot:y,defaultTag:ze,features:We,visible:r,name:"Combobox.Options"})}),Qe="li",Ye=k(function(e,n){var o,t;let{disabled:i=!1,value:a,...g}=e,l=N("Combobox.Option"),f=j("Combobox.Option"),r=`headlessui-combobox-option-${B()}`,u=l.activeOptionIndex!==null?l.options[l.activeOptionIndex].id===r:!1,y=l.isSelected(a),O=s.useRef(null),m=Z({disabled:i,value:a,domRef:O,textValue:(t=(o=O.current)==null?void 0:o.textContent)==null?void 0:t.toLowerCase()}),d=q(n,O),c=h(()=>f.selectOption(r));P(()=>f.registerOption(r,m),[m,r]);let R=s.useRef(!l.__demoMode);P(()=>{if(!l.__demoMode)return;let w=X();return w.requestAnimationFrame(()=>{R.current=!0}),w.dispose},[]),P(()=>{if(l.comboboxState!==0||!u||!R.current||l.activationTrigger===0)return;let w=X();return w.requestAnimationFrame(()=>{var F,v;(v=(F=O.current)==null?void 0:F.scrollIntoView)==null||v.call(F,{block:"nearest"})}),w.dispose},[O,u,l.comboboxState,l.activationTrigger,l.activeOptionIndex]);let T=h(w=>{if(i)return w.preventDefault();c(),l.mode===0&&f.closeCombobox()}),E=h(()=>{if(i)return f.goToOption(S.Nothing);f.goToOption(S.Specific,r)}),L=h(()=>{i||u||f.goToOption(S.Specific,r,0)}),b=h(()=>{i||!u||l.optionsPropsRef.current.hold||f.goToOption(S.Nothing)}),_=s.useMemo(()=>({active:u,selected:y,disabled:i}),[u,y,i]);return D({ourProps:{id:r,ref:d,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":y,disabled:void 0,onClick:T,onFocus:E,onPointerMove:L,onMouseMove:L,onPointerLeave:b,onMouseLeave:b},theirProps:g,slot:_,defaultTag:Qe,name:"Combobox.Option"})}),A=Object.assign(Be,{Input:Ue,Button:Ke,Label:Ge,Options:Xe,Option:Ye});const Q=({options:e,isLoading:n,name:o,defaultSearchTerm:t,defaultValue:i,onSearchChange:a,readonly:g})=>{const[l,f]=s.useState(t||""),[r,u]=s.useState({}),y=xe(r)?i:r,O=ve(y)?JSON.stringify(y):y,m=s.useMemo(()=>fe(R=>{const T=R.target.value;T.length>1&&a(T),T!==l&&f(T),e.filter(E=>E.label===T).length===0&&u({})},300),[a]),d=c=>{const R=e.filter(T=>T.label===c)[0];u(R.value),f(c)};return C.createElement(A,{onChange:d,value:l,disabled:g},({open:c})=>C.createElement("div",null,C.createElement(A.Button,{as:"div",onClick:R=>{(c||l.length===0)&&ge(R)&&R.preventDefault()}},C.createElement(A.Input,{className:"ctw-listbox-input ctw-w-full",onChange:R=>{R.persist(),m(R)},placeholder:"Type to search"})),C.createElement("input",{hidden:!0,name:o,value:O,readOnly:!0}),C.createElement(A.Options,{className:"ctw-listbox ctw-absolute ctw-z-10 ctw-m-0 ctw-mt-1 ctw-max-h-60 ctw-w-full ctw-list-none ctw-overflow-auto ctw-rounded-md ctw-bg-white ctw-p-0 ctw-py-1 ctw-text-base ctw-shadow-lg ctw-ring-1 ctw-ring-opacity-5 focus:ctw-outline-none sm:ctw-text-sm"},C.createElement(Ze,{options:e,query:l,isLoading:n}))))},Ze=({options:e,query:n,isLoading:o})=>n.length===0?C.createElement(V,{option:{value:"",label:"Type to search"}}):o?C.createElement(V,{option:{value:"",label:"Loading..."}}):n.length<2?C.createElement(V,{option:{value:"",label:"Pleae type at least two characters"}}):e.length===0?C.createElement(V,{option:{value:"",label:`No results found for search term '${n}'`}}):C.createElement(C.Fragment,null,e.map(t=>C.createElement(V,{option:t,key:t.label}))),V=({option:e})=>C.createElement(A.Option,{value:e.label,className:({active:n})=>`ctw-relative ctw-cursor-default ctw-select-none ctw-py-2 ctw-pr-4 ctw-pl-4 ${n?"ctw-bg-primary-light ctw-text-primary-dark":"ctw-text-content-black"}`},e.label);try{Q.displayName="ComboboxField",Q.__docgenInfo={description:"",displayName:"ComboboxField",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ComboxboxFieldOption[]"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"T"}},defaultSearchTerm:{defaultValue:null,description:"",name:"defaultSearchTerm",required:!0,type:{name:"string"}},onSearchChange:{defaultValue:null,description:"",name:"onSearchChange",required:!0,type:{name:"(searchTerm: string) => void"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const Y=({className:e,color:n,text:o})=>{const t={primary:"ctw-bg-primary-light ctw-text-primary-main",gray:"ctw-bg-bg-light ctw-text-content-light",info:"ctw-bg-info-light ctw-text-info-main",success:"ctw-bg-success-light ctw-text-success-main",caution:"ctw-bg-caution-light ctw-text-caution-main",error:"ctw-bg-error-light ctw-text-error-main",notification:"ctw-bg-notification-light ctw-text-notification-main"}[n];return C.createElement("span",{className:_e(e,t,"ctw-inline-flex ctw-rounded-full ctw-px-2 ctw-text-xs ctw-font-semibold ctw-leading-5")},o)};try{Y.displayName="Badge",Y.__docgenInfo={description:"",displayName:"Badge",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"enum",value:[{value:'"primary"'},{value:'"gray"'},{value:'"info"'},{value:'"success"'},{value:'"caution"'},{value:'"error"'},{value:'"notification"'}]}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}}}catch{}export{Y as B,Q as C,te as e,J as i,Fe as p};
