import{r as f,R as r}from"./index-6f814c40.js";import{C as st,Z as Bt}from"./zus-9f822756.js";import{m as P,E as $t,D as Oe,u as Ae}from"./use-patient-history-11eefc4f.js";import{C as ot,g as Ht,a as zt,c as lt,d as Ut,u as Zt,o as Wt,b as Gt,e as Kt,f as ut,M as ue}from"./sort-013eed15.js";import{L as Yt,M as Qt,N as dt,O as ie,P as $,R as ct,U as Xt,V as Jt,u as F,W as X,X as en,T as de,Y as L,A as Ue,I as tn,Z as nn,$ as an,a0 as rn,a1 as sn,x as ce,n as on,a2 as ln,p as un,a3 as pt,a4 as dn}from"./patient-helper-0838fee9.js";import{h as cn,q as mt}from"./request-5a1df4c1.js";import{M as pn,a as mn,g as fn,D as yn}from"./resource-details-drawer-b03884fb.js";import{S as gn}from"./spinner-66aa4ba7.js";import{b as U,d as Re,a as vn,s as bn,g as hn,e as wn,f as Cn}from"./patient-provider-d1b391ca.js";import"./_baseToString-4993715b.js";import{o as Ze,c as En}from"./sortBy-df4456c4.js";import"./_baseClone-25b1595e.js";import{d as ft}from"./sortBy-d677d734.js";import"./_equalByTag-aaf39779.js";import"./_baseForOwn-d8306f34.js";import"./_createSet-12ef9b81.js";import{c as k}from"./index-74f03c09.js";import{D as We}from"./drawer-ed34104d.js";import{u as qn,D as Pn}from"./collapsible-data-list-details-b542a54e.js";import{C as Ge}from"./medication-history-492b3089.js";import{i as Vn}from"./isEqual-b08f36b0.js";import{C as _n}from"./coding-list-1d7c950f.js";import{d as pe,t as Nn}from"./values-66360932.js";import{w as I,T as Sn}from"./error-boundary-4a876c30.js";import{L as xn}from"./loading-c7ff698a.js";import{f as Dn,a as On,b as An,c as Rn,u as yt,d as gt,R as vt,e as bt,g as kn,h as ht,L as Tn}from"./diagnostic-report-b94400ab.js";import{M as In,u as ke}from"./encounters-29dd4f38.js";import{P as Mn,a as jn}from"./patient-observations-2346fef1.js";import{P as Fn}from"./patient-allergies-4df14043.js";import{P as Ln}from"./patient-careteam-a4ed88cd.js";import{P as Bn}from"./patient-documents-4771b35e.js";import{P as $n}from"./patient-immunizations-d5d0a962.js";import{P as Hn}from"./patient-timeline-6cee5d14.js";import{u as zn}from"./use-breakpoints-3902bba3.js";import{h as wt,c as Un,C as Z,y as W,s as se,a as Te,$ as G,I as Ct,o as Y,M as Q,e as Zn,j as A,O as M,T as R,u as Et,t as Wn,S as Ke,v as Ye}from"./use-watch-a9671586.js";import{s as Gn}from"./use-controllable-046cc6fb.js";function Kn({onFocus:e}){let[t,n]=f.useState(!0);return t?r.createElement(wt,{as:"button",type:"button",features:Un.Focusable,onFocus:a=>{a.preventDefault();let s,i=50;function o(){if(i--<=0){s&&cancelAnimationFrame(s);return}if(e()){n(!1),cancelAnimationFrame(s);return}s=requestAnimationFrame(o)}s=requestAnimationFrame(o)}}):null}var Yn=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Yn||{});let Qn={[0](e,t){let n=e.tabs.filter(i=>{var o;return!((o=i.current)!=null&&o.hasAttribute("disabled"))});if(t.index<0)return{...e,selectedIndex:e.tabs.indexOf(n[0])};if(t.index>e.tabs.length)return{...e,selectedIndex:e.tabs.indexOf(n[n.length-1])};let a=e.tabs.slice(0,t.index),s=[...e.tabs.slice(t.index),...a].find(i=>n.includes(i));return s?{...e,selectedIndex:e.tabs.indexOf(s)}:e},[1](e,t){var n;if(e.tabs.includes(t.tab))return e;let a=e.tabs[e.selectedIndex],s=Ye([...e.tabs,t.tab],o=>o.current),i=(n=s.indexOf(a))!=null?n:e.selectedIndex;return i===-1&&(i=e.selectedIndex),{...e,tabs:s,selectedIndex:i}},[2](e,t){return{...e,tabs:e.tabs.filter(n=>n!==t.tab)}},[3](e,t){return e.panels.includes(t.panel)?e:{...e,panels:Ye([...e.panels,t.panel],n=>n.current)}},[4](e,t){return{...e,panels:e.panels.filter(n=>n!==t.panel)}}},Ie=f.createContext(null);Ie.displayName="TabsSSRContext";function Me(e){let t=f.useContext(Ie);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Me),n}return t}let je=f.createContext(null);je.displayName="TabsDataContext";function j(e){let t=f.useContext(je);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,j),n}return t}let Fe=f.createContext(null);Fe.displayName="TabsActionsContext";function Le(e){let t=f.useContext(Fe);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Le),n}return t}function Xn(e,t){return Et(t.type,Qn,e,t)}let Jn=f.Fragment,ea=Z(function(e,t){let{defaultIndex:n=0,vertical:a=!1,manual:s=!1,onChange:i,selectedIndex:o=null,...l}=e;const c=a?"vertical":"horizontal",h=s?"manual":"auto";let p=o!==null,v=W(t),[y,u]=f.useReducer(Xn,{selectedIndex:o??n,tabs:[],panels:[]}),C=f.useMemo(()=>({selectedIndex:y.selectedIndex}),[y.selectedIndex]),q=se(i||(()=>{})),m=se(y.tabs),w=f.useMemo(()=>({orientation:c,activation:h,...y}),[c,h,y]),b=se(p?e.selectedIndex:y.selectedIndex),E=f.useMemo(()=>({registerTab(d){return u({type:1,tab:d}),()=>u({type:2,tab:d})},registerPanel(d){return u({type:3,panel:d}),()=>u({type:4,panel:d})},change(d){b.current!==d&&q.current(d),p||u({type:0,index:d})}}),[u,p]);Te(()=>{u({type:0,index:o??n})},[o]);let _=f.useRef({tabs:[],panels:[]}),V={ref:v};return r.createElement(Ie.Provider,{value:_},r.createElement(Fe.Provider,{value:E},r.createElement(je.Provider,{value:w},w.tabs.length<=0&&r.createElement(Kn,{onFocus:()=>{var d,x;for(let D of m.current)if(((d=D.current)==null?void 0:d.tabIndex)===0)return(x=D.current)==null||x.focus(),!0;return!1}}),G({ourProps:V,theirProps:l,slot:C,defaultTag:Jn,name:"Tabs"}))))}),ta="div",na=Z(function(e,t){let{orientation:n,selectedIndex:a}=j("Tab.List"),s=W(t);return G({ourProps:{ref:s,role:"tablist","aria-orientation":n},theirProps:e,slot:{selectedIndex:a},defaultTag:ta,name:"Tabs.List"})}),aa="button",ra=Z(function(e,t){var n,a;let s=`headlessui-tabs-tab-${Ct()}`,{orientation:i,activation:o,selectedIndex:l,tabs:c,panels:h}=j("Tab"),p=Le("Tab"),v=j("Tab"),y=Me("Tab"),u=f.useRef(null),C=W(u,t);Te(()=>p.registerTab(u),[p,u]);let q=y.current.tabs.indexOf(s);q===-1&&(q=y.current.tabs.push(s)-1);let m=c.indexOf(u);m===-1&&(m=q);let w=m===l,b=Y(g=>{var S;let T=g();if(T===Q.Success&&o==="auto"){let ae=(S=Zn(u))==null?void 0:S.activeElement,K=v.tabs.findIndex(re=>re.current===ae);K!==-1&&p.change(K)}return T}),E=Y(g=>{let S=c.map(T=>T.current).filter(Boolean);if(g.key===A.Space||g.key===A.Enter){g.preventDefault(),g.stopPropagation(),p.change(m);return}switch(g.key){case A.Home:case A.PageUp:return g.preventDefault(),g.stopPropagation(),b(()=>M(S,R.First));case A.End:case A.PageDown:return g.preventDefault(),g.stopPropagation(),b(()=>M(S,R.Last))}if(b(()=>Et(i,{vertical(){return g.key===A.ArrowUp?M(S,R.Previous|R.WrapAround):g.key===A.ArrowDown?M(S,R.Next|R.WrapAround):Q.Error},horizontal(){return g.key===A.ArrowLeft?M(S,R.Previous|R.WrapAround):g.key===A.ArrowRight?M(S,R.Next|R.WrapAround):Q.Error}}))===Q.Success)return g.preventDefault()}),_=f.useRef(!1),V=Y(()=>{var g;_.current||(_.current=!0,(g=u.current)==null||g.focus(),p.change(m),Wn(()=>{_.current=!1}))}),d=Y(g=>{g.preventDefault()}),x=f.useMemo(()=>({selected:w}),[w]),D=e,O={ref:C,onKeyDown:E,onMouseDown:d,onClick:V,id:s,role:"tab",type:Gn(e,u),"aria-controls":(a=(n=h[m])==null?void 0:n.current)==null?void 0:a.id,"aria-selected":w,tabIndex:w?0:-1};return G({ourProps:O,theirProps:D,slot:x,defaultTag:aa,name:"Tabs.Tab"})}),ia="div",sa=Z(function(e,t){let{selectedIndex:n}=j("Tab.Panels"),a=W(t),s=f.useMemo(()=>({selectedIndex:n}),[n]);return G({ourProps:{ref:a},theirProps:e,slot:s,defaultTag:ia,name:"Tabs.Panels"})}),oa="div",la=Ke.RenderStrategy|Ke.Static,ua=Z(function(e,t){var n,a,s,i;let{selectedIndex:o,tabs:l,panels:c}=j("Tab.Panel"),h=Le("Tab.Panel"),p=Me("Tab.Panel"),v=`headlessui-tabs-panel-${Ct()}`,y=f.useRef(null),u=W(y,t);Te(()=>h.registerPanel(y),[h,y]);let C=p.current.panels.indexOf(v);C===-1&&(C=p.current.panels.push(v)-1);let q=c.indexOf(y);q===-1&&(q=C);let m=q===o,w=f.useMemo(()=>({selected:m}),[m]),b=e,E={ref:u,id:v,role:"tabpanel","aria-labelledby":(a=(n=l[q])==null?void 0:n.current)==null?void 0:a.id,tabIndex:m?0:-1};return!m&&((s=e.unmount)==null||s)&&!((i=e.static)!=null&&i)?r.createElement(wt,{as:"span",...E}):G({ourProps:E,theirProps:b,slot:w,defaultTag:oa,features:la,visible:m,name:"Tabs.Panel"})}),B=Object.assign(ra,{Group:ea,List:na,Panels:sa,Panel:ua});function da(e,t){if(e==null)return{};var n={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Be(e,t){if(e==null)return{};var n=da(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var ca={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},pa=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Qe(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(ca[n[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var a=e.indexOf("-->");return{type:"comment",comment:a!==-1?e.slice(4,a):""}}for(var s=new RegExp(pa),i=null;(i=s.exec(e))!==null;)if(i[0].trim())if(i[1]){var o=i[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),t.attrs[l[0]]=l[1],s.lastIndex--}else i[2]&&(t.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return t}var ma=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,fa=/^\s*$/,ya=Object.create(null);function qt(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(n){var a=[];for(var s in n)a.push(s+'="'+n[s]+'"');return a.length?" "+a.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(qt,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var ga={parse:function(e,t){t||(t={}),t.components||(t.components=ya);var n,a=[],s=[],i=-1,o=!1;if(e.indexOf("<")!==0){var l=e.indexOf("<");a.push({type:"text",content:l===-1?e:e.substring(0,l)})}return e.replace(ma,function(c,h){if(o){if(c!=="</"+n.name+">")return;o=!1}var p,v=c.charAt(1)!=="/",y=c.startsWith("<!--"),u=h+c.length,C=e.charAt(u);if(y){var q=Qe(c);return i<0?(a.push(q),a):((p=s[i]).children.push(q),a)}if(v&&(i++,(n=Qe(c)).type==="tag"&&t.components[n.name]&&(n.type="component",o=!0),n.voidElement||o||!C||C==="<"||n.children.push({type:"text",content:e.slice(u,e.indexOf("<",u))}),i===0&&a.push(n),(p=s[i-1])&&p.children.push(n),s[i]=n),(!v||n.voidElement)&&(i>-1&&(n.voidElement||n.name===c.slice(2,-1))&&(i--,n=i===-1?a:s[i]),!o&&C!=="<"&&C)){p=i===-1?a:s[i].children;var m=e.indexOf("<",u),w=e.slice(u,m===-1?void 0:m);fa.test(w)&&(w=" "),(m>-1&&i+p.length>=0||w!==" ")&&p.push({type:"text",content:w})}}),a},stringify:function(e){return e.reduce(function(t,n){return t+qt("",n)},"")}},va=["format"],ba=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xe(Object(n),!0).forEach(function(a){dt(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function oe(e,t){if(!e)return!1;var n=e.props?e.props.children:e.children;return t?n.length>0:!!n}function le(e){return e?e.props?e.props.children:e.children:[]}function ha(e){return Object.prototype.toString.call(e)!=="[object Array]"?!1:e.every(function(t){return f.isValidElement(t)})}function H(e){return Array.isArray(e)?e:[e]}function wa(e,t){var n=N({},t);return n.props=Object.assign(e.props,t.props),n}function Pt(e,t){if(!e)return"";var n="",a=H(e),s=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return a.forEach(function(i,o){if(typeof i=="string")n+="".concat(i);else if(f.isValidElement(i)){var l=Object.keys(i.props).length,c=s.indexOf(i.type)>-1,h=i.props.children;if(!h&&c&&l===0)n+="<".concat(i.type,"/>");else if(!h&&(!c||l!==0))n+="<".concat(o,"></").concat(o,">");else if(i.props.i18nIsDynamicList)n+="<".concat(o,"></").concat(o,">");else if(c&&l===1&&typeof h=="string")n+="<".concat(i.type,">").concat(h,"</").concat(i.type,">");else{var p=Pt(h,t);n+="<".concat(o,">").concat(p,"</").concat(o,">")}}else if(i===null)ie("Trans: the passed in value is invalid - seems you passed in a null child.");else if($(i)==="object"){var v=i.format,y=Be(i,va),u=Object.keys(y);if(u.length===1){var C=v?"".concat(u[0],", ").concat(v):u[0];n+="{{".concat(C,"}}")}else ie("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",i)}else ie("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",i)}),n}function Ca(e,t,n,a,s,i){if(t==="")return[];var o=a.transKeepBasicHtmlNodesFor||[],l=t&&new RegExp(o.join("|")).test(t);if(!e&&!l)return[t];var c={};function h(m){var w=H(m);w.forEach(function(b){typeof b!="string"&&(oe(b)?h(le(b)):$(b)==="object"&&!f.isValidElement(b)&&Object.assign(c,b))})}h(e);var p=ga.parse("<0>".concat(t,"</0>")),v=N(N({},c),s);function y(m,w,b){var E=le(m),_=C(E,w.children,b);return ha(E)&&_.length===0?E:_}function u(m,w,b,E,_){m.dummy&&(m.children=w),b.push(f.cloneElement(m,N(N({},m.props),{},{key:E}),_?void 0:w))}function C(m,w,b){var E=H(m),_=H(w);return _.reduce(function(V,d,x){var D=d.children&&d.children[0]&&d.children[0].content&&n.services.interpolator.interpolate(d.children[0].content,v,n.language);if(d.type==="tag"){var O=E[parseInt(d.name,10)];!O&&b.length===1&&b[0][d.name]&&(O=b[0][d.name]),O||(O={});var g=Object.keys(d.attrs).length!==0?wa({props:d.attrs},O):O,S=f.isValidElement(g),T=S&&oe(d,!0)&&!d.voidElement,ae=l&&$(g)==="object"&&g.dummy&&!S,K=$(e)==="object"&&e!==null&&Object.hasOwnProperty.call(e,d.name);if(typeof g=="string"){var re=n.services.interpolator.interpolate(g,v,n.language);V.push(re)}else if(oe(g)||T){var It=y(g,d,b);u(g,It,V,x)}else if(ae){var Mt=C(E,d.children,b);V.push(f.cloneElement(g,N(N({},g.props),{},{key:x}),Mt))}else if(Number.isNaN(parseFloat(d.name)))if(K){var jt=y(g,d,b);u(g,jt,V,x,d.voidElement)}else if(a.transSupportBasicHtmlNodes&&o.indexOf(d.name)>-1)if(d.voidElement)V.push(f.createElement(d.name,{key:"".concat(d.name,"-").concat(x)}));else{var Ft=C(E,d.children,b);V.push(f.createElement(d.name,{key:"".concat(d.name,"-").concat(x)},Ft))}else if(d.voidElement)V.push("<".concat(d.name," />"));else{var Lt=C(E,d.children,b);V.push("<".concat(d.name,">").concat(Lt,"</").concat(d.name,">"))}else if($(g)==="object"&&!S){var $e=d.children[0]?D:null;$e&&V.push($e)}else d.children.length===1&&D?V.push(f.cloneElement(g,N(N({},g.props),{},{key:x}),D)):V.push(f.cloneElement(g,N(N({},g.props),{},{key:x})))}else if(d.type==="text"){var He=a.transWrapTextNodes,ze=i?a.unescape(n.services.interpolator.interpolate(d.content,v,n.language)):n.services.interpolator.interpolate(d.content,v,n.language);He?V.push(f.createElement(He,{key:"".concat(d.name,"-").concat(x)},ze)):V.push(ze)}return V},[])}var q=C([{dummy:!0,children:e||[]}],p,H(e||[]));return le(q[0])}function Ea(e){var t=e.children,n=e.count,a=e.parent,s=e.i18nKey,i=e.context,o=e.tOptions,l=o===void 0?{}:o,c=e.values,h=e.defaults,p=e.components,v=e.ns,y=e.i18n,u=e.t,C=e.shouldUnescape,q=Be(e,ba),m=y||ct();if(!m)return Yt("You will need to pass in an i18next instance by using i18nextReactModule"),t;var w=u||m.t.bind(m)||function(T){return T};i&&(l.context=i);var b=N(N({},Qt()),m.options&&m.options.react),E=v||w.ns||m.options&&m.options.defaultNS;E=typeof E=="string"?[E]:E||["translation"];var _=h||Pt(t,b)||b.transEmptyNodeValue||s,V=b.hashTransKey,d=s||(V?V(_):_),x=c?l.interpolation:{interpolation:N(N({},l.interpolation),{},{prefix:"#$?",suffix:"?$#"})},D=N(N(N(N({},l),{},{count:n},c),x),{},{defaultValue:_,ns:E}),O=d?w(d,D):_,g=Ca(p||t,O,m,b,D,C),S=a!==void 0?a:b.defaultTransParent;return S?f.createElement(S,q,g):g}var qa=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Pa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Je(Object(n),!0).forEach(function(a){dt(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Va(e){var t=e.children,n=e.count,a=e.parent,s=e.i18nKey,i=e.context,o=e.tOptions,l=o===void 0?{}:o,c=e.values,h=e.defaults,p=e.components,v=e.ns,y=e.i18n,u=e.t,C=e.shouldUnescape,q=Be(e,qa),m=f.useContext(Xt)||{},w=m.i18n,b=m.defaultNS,E=y||w||ct(),_=u||E&&E.t.bind(E);return Ea(Pa({children:t,count:n,parent:a,i18nKey:s,context:i,tOptions:l,values:c,defaults:h,components:p,ns:v||_&&_.ns||b||E&&E.options&&E.options.defaultNS,i18n:E,t:u,shouldUnescape:C},q))}const _a=async(e,t)=>{const{authToken:n,contextBuilderId:a}=e;return(await(await cn(`${Jt(e.env)}?display=${t}`,{headers:{Authorization:`Bearer ${n}`,...a&&{"Zus-Account":a}}})).json()).conditionsList},me=({defaultCoding:e,readonly:t,...n})=>{const{getRequestContext:a}=F(),[s,i]=f.useState(!1),[o,l]=f.useState(),c=async h=>{i(!0);const p=await a(),v=await _a(p,h);v&&l(v.map(y=>({value:y,label:y.display}))),i(!1)};return r.createElement(st,{options:o||[],isLoading:s,name:`${n.name}`,defaultSearchTerm:n.defaultValue,readonly:t,onSearchChange:c,defaultValue:e})};try{me.displayName="ConditionsAutoComplete",me.__docgenInfo={description:"",displayName:"ConditionsAutoComplete",props:{defaultCoding:{defaultValue:null,description:"",name:"defaultCoding",required:!1,type:{name:"Coding"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const fe=({condition:e})=>[{label:X.t("glossary:condition_one"),field:"condition",value:e.display,readonly:!1,render:(t,n)=>r.createElement(me,{readonly:t,...n,defaultCoding:e.preferredCoding??{}})},...Vt(e)],ye=({condition:e})=>[{label:"id",value:e.id,field:"id",readonly:!0,hidden:!0},...Vt(e)],Vt=e=>[{label:"subject",value:e.subjectID,field:"subjectID",readonly:!0,hidden:!0},{label:"Status",value:e.displayStatus==="Unknown"?"Select One":e.displayStatus,field:"status"},{label:"Onset",value:e.onset,field:"onset"},{label:"Abatement",value:e.abatement,field:"abatement"},{label:"Note",value:e.notes,lines:3,field:"note"}],_t=P.object({id:P.string().optional(),subjectID:P.string({required_error:"Condition subjectID must be specified."}),status:P.enum(["Active","Pending","Inactive","Refuted","Entered In Error"]),onset:P.date().max(new Date,{message:"Onset cannot be a future date."}).optional(),abatement:P.date().max(new Date,{message:"Abatement cannot be a future date."}).optional(),note:P.string().optional()}),Nt=(e,t)=>{e.abatement&&e.status!=="Inactive"&&t.addIssue({code:P.ZodIssueCode.custom,message:"Status must be inactive.",path:["abatement"]}),e.abatement&&e.onset&&e.abatement<e.onset&&t.addIssue({code:P.ZodIssueCode.custom,message:"Abatement date must be after onset date.",path:["abatement"]})},Na=_t.superRefine((e,t)=>Nt(e,t)),Sa=_t.extend({condition:P.object({code:P.string({required_error:"Please choose a condition."}),display:P.string().optional(),system:P.string().optional()})}).superRefine((e,t)=>Nt(e,t));try{fe.displayName="getAddConditionData",fe.__docgenInfo={description:"",displayName:"getAddConditionData",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}try{ye.displayName="getEditingPatientConditionData",ye.__docgenInfo={description:"",displayName:"getEditingPatientConditionData",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}const J=({condition:e})=>{var t;return r.createElement("div",null,r.createElement("div",{className:"ctw-text-2xl"},e.display," (",(t=e.preferredCoding)==null?void 0:t.code,")"),r.createElement("div",{className:"ctw-text-sm"},e.ccsChapter))};try{J.displayName="ConditionHeader",J.__docgenInfo={description:"",displayName:"ConditionHeader",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}const ge=({resource:e,resourceName:t,onDelete:n,onClose:a,...s})=>{const[i,o]=f.useState(),[l,c]=f.useState(!1),{t:h}=en(),p=async()=>{try{c(!0),await n(),c(!1),a()}catch(v){throw de.logError(v),c(!1),o("Something went wrong. Please try again."),v}};return r.createElement(pn,{onAfterClosed:()=>o(void 0),...s},i&&r.createElement($t,{header:i}),r.createElement("div",{className:"ctw-items-left ctw-flex ctw-h-full ctw-flex-col ctw-space-y-2 ctw-overflow-y-auto","data-zus-telemetry-namespace":"ModalConfirmDelete"},r.createElement("span",{className:"ctw-text-left ctw-text-lg ctw-font-medium ctw-text-content-black"},h("resource.remove.heading",{resource:e})),r.createElement("span",{className:"ctw-subtext ctw-max-w-sm ctw-text-left ctw-text-content-light"},r.createElement(Va,{i18nKey:"resource.remove.body"},"This will remove"," ",r.createElement("span",{className:"ctw-font-medium"},{resourceName:t})," from this patient's ",{resource:e}," list."))),r.createElement("div",{className:"ctw-flex ctw-w-full ctw-space-x-4"},r.createElement("button",{type:"button",onClick:a,className:"ctw-btn-default ctw-flex-1","data-zus-telemetry-click":"Cancel button"},"Cancel"),r.createElement("button",{type:"button",disabled:l,onClick:p,className:"ctw-btn-primary ctw-save-button ctw-flex-1","data-zus-telemetry-click":"Remove button"},l?"Removing...":"Remove",l&&r.createElement(gn,{className:"ctw-ml-2 ctw-text-white"}))))};try{ge.displayName="ModalConfirmDelete",ge.__docgenInfo={description:"",displayName:"ModalConfirmDelete",props:{resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"string"}},resourceName:{defaultValue:null,description:"",name:"resourceName",required:!0,type:{name:"string"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => Promise<void>"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}}}}}catch{}function St(){var s;const{t:e}=L(),{openDrawer:t}=U(),a=((s=Re().data)==null?void 0:s.id)??"";return i=>{const o=new ot(i?Ht(i.resource):zt(a));t({component:l=>r.createElement(Oe,{title:e("resource.add",{resource:e("glossary:condition_one")}),schema:Sa,action:ft(lt)(o,a),data:fe({condition:o}),...l})})}}function xt(){var s;const{t:e}=L(),{openDrawer:t}=U(),a=((s=Re().data)==null?void 0:s.id)??"";return i=>{t({component:o=>r.createElement(Oe,{title:e("resource.edit",{resource:e("glossary:condition_one")}),header:r.createElement(J,{condition:i}),schema:Na,action:ft(lt)(i,a),data:ye({condition:i}),...o})})}}function xa(){const{t:e}=L(),{openModal:t}=vn(),{getRequestContext:n}=F();return a=>{const s=a.display??e("resource.unamed",{resource:e("glossary:condition_one")});t({component:i=>r.createElement(ge,{resource:e("glossary:condition_one"),resourceName:s,onDelete:async()=>{const o=await n();await Ut(a.resource,o)},...i})})}}const Da=(e,t)=>{let n=[];const a=e.map(i=>new ot(i,t)),s=Ze(a,["resource.recordedDate","hasEnrichment"],"desc");return n=qn(s,(i,o)=>Vn(et(i),et(o))),Ze(n,[i=>i.resource.recordedDate??"",i=>{var o;return(o=i.resource.meta)==null?void 0:o.versionId}],["desc","desc"])},et=e=>[e.recorder,e.clinicalStatus,e.verificationStatus,e.recordedDate,e.notes,e.categories[0],e.onset,e.abatement,e.encounter,e.knownCodings.map(t=>[t.system,t.code])],ee=({notes:e})=>r.createElement("div",{className:"ctw-flex ctw-flex-col ctw-space-y-4"},e.map((t,n)=>r.createElement("div",{key:t+n},r.createElement("div",null,t))));try{ee.displayName="NotesList",ee.__docgenInfo={description:"",displayName:"NotesList",props:{notes:{defaultValue:null,description:"",name:"notes",required:!0,type:{name:"string[]"}}}}}catch{}function ve(e){var n,a;const t=[{label:"Recorder",value:e.recorder},{label:"Clinical Status",value:pe(e.clinicalStatus)},{label:"Verification Status",value:pe(e.verificationStatus)},{label:"Recorded Date",value:e.recordedDate},{label:"Category",value:Ue(e.categories[0])},{label:"Note",value:e.notes.length!==0&&r.createElement(ee,{notes:e.notes})},{label:"Code",value:r.createElement(_n,{codings:e.knownCodings})},{label:"Onset Date",value:e.onset},{label:"Abatement Date",value:e.abatement},{label:"Encounter",value:e.encounter}];return{id:e.id,date:e.recordedDate,title:Ue(e.categories[0]),subtitle:(a=(n=e.patient)==null?void 0:n.organization)==null?void 0:a.name,data:t}}const be=e=>{var t,n;return[{label:"Recorder",value:e.recorder},{label:"Recorded Date",value:e.recordedDate},{label:"Provider Organization",value:(n=(t=e.patient)==null?void 0:t.organization)==null?void 0:n.name},{label:"Status",value:pe(e.displayStatus)},{label:"Onset Date",value:e.onset},{label:"Abatement Date",value:e.abatement},{label:"Note",value:e.notes.length!==0&&r.createElement(ee,{notes:e.notes})}]};try{ve.displayName="setupData",ve.__docgenInfo={description:"",displayName:"setupData",props:{kind:{defaultValue:null,description:"",name:"kind",required:!0,type:{name:'"Condition"'}},abatement:{defaultValue:null,description:"",name:"abatement",required:!0,type:{name:"string | undefined"}},active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean"}},asserter:{defaultValue:null,description:"",name:"asserter",required:!0,type:{name:"string | undefined"}},bodySites:{defaultValue:null,description:"",name:"bodySites",required:!0,type:{name:"string[]"}},categories:{defaultValue:null,description:"",name:"categories",required:!0,type:{name:"string[]"}},ccsChapter:{defaultValue:null,description:"",name:"ccsChapter",required:!0,type:{name:"string | undefined"}},ccsChapterCode:{defaultValue:null,description:"",name:"ccsChapterCode",required:!0,type:{name:"string | undefined"}},ccsGrouping:{defaultValue:null,description:"",name:"ccsGrouping",required:!0,type:{name:"string | undefined"}},clinicalStatus:{defaultValue:null,description:"",name:"clinicalStatus",required:!0,type:{name:"string"}},clinicalStatusCode:{defaultValue:null,description:"",name:"clinicalStatusCode",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"active"'},{value:'"inactive"'},{value:'"recurrence"'},{value:'"relapse"'},{value:'"remission"'},{value:'"resolved"'}]}},codings:{defaultValue:null,description:"",name:"codings",required:!0,type:{name:"CodeableConcept | undefined"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string | undefined"}},encounter:{defaultValue:null,description:"",name:"encounter",required:!0,type:{name:"string | undefined"}},evidences:{defaultValue:null,description:"",name:"evidences",required:!0,type:{name:"string[]"}},icd10Code:{defaultValue:null,description:"",name:"icd10Code",required:!0,type:{name:"string | undefined"}},icd10System:{defaultValue:null,description:"",name:"icd10System",required:!0,type:{name:"string | undefined"}},icd10Display:{defaultValue:null,description:"",name:"icd10Display",required:!0,type:{name:"string | undefined"}},isDeleted:{defaultValue:null,description:"",name:"isDeleted",required:!0,type:{name:"boolean"}},hasEnrichment:{defaultValue:null,description:"",name:"hasEnrichment",required:!0,type:{name:"boolean"}},knownCodings:{defaultValue:null,description:"",name:"knownCodings",required:!0,type:{name:"Coding[]"}},knownCodingsMatch:{defaultValue:null,description:"",name:"knownCodingsMatch",required:!0,type:{name:"(condition: ConditionModel) => boolean"}},notes:{defaultValue:null,description:"",name:"notes",required:!0,type:{name:"string[]"}},onset:{defaultValue:null,description:"",name:"onset",required:!0,type:{name:"string | undefined"}},patient:{defaultValue:null,description:"",name:"patient",required:!0,type:{name:"PatientModel | undefined"}},preferredCoding:{defaultValue:null,description:"",name:"preferredCoding",required:!0,type:{name:"Coding | undefined"}},recordedDate:{defaultValue:null,description:"",name:"recordedDate",required:!0,type:{name:"string | undefined"}},recorded:{defaultValue:null,description:"",name:"recorded",required:!0,type:{name:"string | undefined"}},recorder:{defaultValue:null,description:"",name:"recorder",required:!0,type:{name:"string | undefined"}},severity:{defaultValue:null,description:"",name:"severity",required:!0,type:{name:"string"}},snomedCoding:{defaultValue:null,description:"",name:"snomedCoding",required:!0,type:{name:"Coding | undefined"}},snomedCode:{defaultValue:null,description:"",name:"snomedCode",required:!0,type:{name:"string | undefined"}},snomedDisplay:{defaultValue:null,description:"",name:"snomedDisplay",required:!0,type:{name:"string | undefined"}},snomedSystem:{defaultValue:null,description:"",name:"snomedSystem",required:!0,type:{name:"string | undefined"}},stages:{defaultValue:null,description:"",name:"stages",required:!0,type:{name:"string[]"}},displayStatus:{defaultValue:null,description:"",name:"displayStatus",required:!0,type:{name:"enum",value:[{value:'"Unknown"'},{value:'"Active"'},{value:'"Pending"'},{value:'"Inactive"'},{value:'"Refuted"'},{value:'"Entered in Error"'}]}},subjectID:{defaultValue:null,description:"",name:"subjectID",required:!0,type:{name:"string"}},verificationStatus:{defaultValue:null,description:"",name:"verificationStatus",required:!0,type:{name:"string"}},verificationStatusCode:{defaultValue:null,description:"",name:"verificationStatusCode",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"entered-in-error"'},{value:'"unconfirmed"'},{value:'"provisional"'},{value:'"differential"'},{value:'"confirmed"'},{value:'"refuted"'}]}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Condition"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isArchived:{defaultValue:null,description:"",name:"isArchived",required:!0,type:{name:"boolean"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}try{be.displayName="conditionData",be.__docgenInfo={description:"",displayName:"conditionData",props:{kind:{defaultValue:null,description:"",name:"kind",required:!0,type:{name:'"Condition"'}},abatement:{defaultValue:null,description:"",name:"abatement",required:!0,type:{name:"string | undefined"}},active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean"}},asserter:{defaultValue:null,description:"",name:"asserter",required:!0,type:{name:"string | undefined"}},bodySites:{defaultValue:null,description:"",name:"bodySites",required:!0,type:{name:"string[]"}},categories:{defaultValue:null,description:"",name:"categories",required:!0,type:{name:"string[]"}},ccsChapter:{defaultValue:null,description:"",name:"ccsChapter",required:!0,type:{name:"string | undefined"}},ccsChapterCode:{defaultValue:null,description:"",name:"ccsChapterCode",required:!0,type:{name:"string | undefined"}},ccsGrouping:{defaultValue:null,description:"",name:"ccsGrouping",required:!0,type:{name:"string | undefined"}},clinicalStatus:{defaultValue:null,description:"",name:"clinicalStatus",required:!0,type:{name:"string"}},clinicalStatusCode:{defaultValue:null,description:"",name:"clinicalStatusCode",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"active"'},{value:'"inactive"'},{value:'"recurrence"'},{value:'"relapse"'},{value:'"remission"'},{value:'"resolved"'}]}},codings:{defaultValue:null,description:"",name:"codings",required:!0,type:{name:"CodeableConcept | undefined"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string | undefined"}},encounter:{defaultValue:null,description:"",name:"encounter",required:!0,type:{name:"string | undefined"}},evidences:{defaultValue:null,description:"",name:"evidences",required:!0,type:{name:"string[]"}},icd10Code:{defaultValue:null,description:"",name:"icd10Code",required:!0,type:{name:"string | undefined"}},icd10System:{defaultValue:null,description:"",name:"icd10System",required:!0,type:{name:"string | undefined"}},icd10Display:{defaultValue:null,description:"",name:"icd10Display",required:!0,type:{name:"string | undefined"}},isDeleted:{defaultValue:null,description:"",name:"isDeleted",required:!0,type:{name:"boolean"}},hasEnrichment:{defaultValue:null,description:"",name:"hasEnrichment",required:!0,type:{name:"boolean"}},knownCodings:{defaultValue:null,description:"",name:"knownCodings",required:!0,type:{name:"Coding[]"}},knownCodingsMatch:{defaultValue:null,description:"",name:"knownCodingsMatch",required:!0,type:{name:"(condition: ConditionModel) => boolean"}},notes:{defaultValue:null,description:"",name:"notes",required:!0,type:{name:"string[]"}},onset:{defaultValue:null,description:"",name:"onset",required:!0,type:{name:"string | undefined"}},patient:{defaultValue:null,description:"",name:"patient",required:!0,type:{name:"PatientModel | undefined"}},preferredCoding:{defaultValue:null,description:"",name:"preferredCoding",required:!0,type:{name:"Coding | undefined"}},recordedDate:{defaultValue:null,description:"",name:"recordedDate",required:!0,type:{name:"string | undefined"}},recorded:{defaultValue:null,description:"",name:"recorded",required:!0,type:{name:"string | undefined"}},recorder:{defaultValue:null,description:"",name:"recorder",required:!0,type:{name:"string | undefined"}},severity:{defaultValue:null,description:"",name:"severity",required:!0,type:{name:"string"}},snomedCoding:{defaultValue:null,description:"",name:"snomedCoding",required:!0,type:{name:"Coding | undefined"}},snomedCode:{defaultValue:null,description:"",name:"snomedCode",required:!0,type:{name:"string | undefined"}},snomedDisplay:{defaultValue:null,description:"",name:"snomedDisplay",required:!0,type:{name:"string | undefined"}},snomedSystem:{defaultValue:null,description:"",name:"snomedSystem",required:!0,type:{name:"string | undefined"}},stages:{defaultValue:null,description:"",name:"stages",required:!0,type:{name:"string[]"}},displayStatus:{defaultValue:null,description:"",name:"displayStatus",required:!0,type:{name:"enum",value:[{value:'"Unknown"'},{value:'"Active"'},{value:'"Pending"'},{value:'"Inactive"'},{value:'"Refuted"'},{value:'"Entered in Error"'}]}},subjectID:{defaultValue:null,description:"",name:"subjectID",required:!0,type:{name:"string"}},verificationStatus:{defaultValue:null,description:"",name:"verificationStatus",required:!0,type:{name:"string"}},verificationStatusCode:{defaultValue:null,description:"",name:"verificationStatusCode",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"entered-in-error"'},{value:'"unconfirmed"'},{value:'"provisional"'},{value:'"differential"'},{value:'"confirmed"'},{value:'"refuted"'}]}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Condition"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isArchived:{defaultValue:null,description:"",name:"isArchived",required:!0,type:{name:"boolean"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}const tt=10,he=I(({condition:e,onClose:t,onEdit:n})=>{const[a,s]=f.useState([]),[i,o]=f.useState([]),[l,c]=f.useState(!0),{getRequestContext:h}=F(),p=Zt(e);return f.useEffect(()=>{async function v(){if(p.data){const y=tn(p.data.bundle),u=Da(p.data.conditions,y),C=await h(),q=await bn(C,[e,...u]),m=u.map(w=>{const b=fn(q,w.id);return{...ve(w),...b&&{binaryId:b}}});s(m.filter(w=>w.date)),o(m.filter(w=>!w.date)),c(!1)}}return v(),function(){s([]),o([]),c(!0)}},[e,h,p.data,n]),r.createElement("div",{className:"ctw-space-y-6","data-zus-telemetry-namespace":"ConditionsHistory"},r.createElement(J,{condition:e}),r.createElement(Pn,{data:be(e),readOnly:!n,onEdit:()=>{t(),n==null||n()}}),r.createElement(Oa,{conditionsWithDate:a,conditionsWithoutDate:i,historyIsLoading:l}))},"ConditionsHistory"),Oa=({conditionsWithDate:e,conditionsWithoutDate:t,historyIsLoading:n})=>{const a=mn(),{t:s}=L();if(e.length===0&&t.length===0&&!n)return r.createElement("div",null,"No history found.");if(n)return r.createElement(xn,{message:s("resource.history.loading",{resource:s("glossary:condition_one")})});function i(o){return o.map(l=>l.binaryId?{...l,documentButton:r.createElement(yn,{"data-zus-telemetry-click":"DocumentButton",onClick:()=>a(l.binaryId,l.title??"Condition"),text:"Source Document"})}:l)}return r.createElement(r.Fragment,null,r.createElement(Ge,{entries:i(e),limit:tt}),t.length!==0&&r.createElement("div",{className:"ctw-space-y-2"},r.createElement("div",{className:"ctw-font-medium"},"Records with no date:"),r.createElement(Ge,{entries:i(t),limit:tt})))};try{he.displayName="ConditionHistory",he.__docgenInfo={description:"",displayName:"ConditionHistory",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"(() => void)"}}}}}catch{}function Aa(){const{openDrawer:e}=U(),t=xt();return({condition:n,readOnly:a})=>{e({component:s=>r.createElement(we,{condition:n,onEdit:a?void 0:()=>t(n),...s})})}}function we({className:e,condition:t,isOpen:n,onClose:a,onEdit:s}){const{t:i}=L();return r.createElement(We,{className:e,title:i("resource.history.heading",{resource:i("glossary:condition_one")}),isOpen:n,onClose:a,showCloseFooter:!0},r.createElement(We.Body,null,r.createElement(he,{condition:t,onClose:a,onEdit:s})))}try{we.displayName="ConditionHistoryDrawer",we.__docgenInfo={description:"",displayName:"ConditionHistoryDrawer",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"(() => void)"}}}}}catch{}const Ra=[{title:"Name",widthPercent:30,minWidth:320,render:e=>r.createElement("div",null,r.createElement("div",{className:"group-hover:ctw-underline"},e.display),r.createElement("div",{className:"ctw-pc-chapter"},e.ccsChapter))},{title:"Status",render:e=>r.createElement("div",{className:"ctw-pc-status-container"},r.createElement("div",{className:k("ctw-pc-status-dot",ka(e.displayStatus))},"•"),r.createElement("div",null,e.displayStatus),r.createElement("div",{className:"ctw-pc-status-and-extra"},r.createElement("div",null,"Last Updated:"," ",En([e.recordedDate,e.recorder?`(${e.recorder})`:""]).join(" ")))),widthPercent:30,minWidth:128},{title:"Details",widthPercent:40,minWidth:132,render:e=>{const t=e.isSummaryResource?"Earliest known onset:":"Onset:";return r.createElement("div",{className:"ctw-pc-onset-notes"},e.onset&&r.createElement("div",null,t," ",e.onset),r.createElement("div",{className:"ctw-pc-notes"},e.notes.join(" ")))}}];function ka(e){switch(e){case"Active":return"ctw-text-success-main";case"Pending":return"ctw-text-caution-main";default:return"ctw-text-content-lighter"}}const Dt={key:"isArchived",type:"tag",belowDivider:!0,display:({listView:e})=>e?"show dismissed records":"dismissed records",icon:Dn,toggleDisplay:"hide dismissed records",toggleIcon:On};function Ta(e,t){const n=[];return t&&n.push(Dt),n.push({key:"displayStatus",type:"checkbox",icon:An,display:"Status",values:[...t?Wt:Gt]},{key:"ccsChapter",type:"checkbox",icon:Rn,display:"Category",values:yt(e,"ccsChapter")}),n}const nt={displayStatus:{key:"displayStatus",selected:["Active","Pending","Unknown"],type:"checkbox"}},Ce={display:"Last Updated (New to Old)",sorts:[{key:"recordedDate",dir:"desc",isDate:!0}]},Ia=[{display:"Name (A-Z)",sorts:[{key:"display",dir:"asc"}]},{display:"Name (Z-A)",sorts:[{key:"display",dir:"desc"}]},{display:"Category (A-Z)",sorts:[{key:"ccsChapter",dir:"asc"}]},{display:"Category (Z-A)",sorts:[{key:"ccsChapter",dir:"desc"}]},{display:"Status (A-Z)",sorts:[{key:"displayStatus",dir:"asc"}]},{display:"Status (Z-A)",sorts:[{key:"displayStatus",dir:"desc"}]},{display:"Last Updated (Old to New)",sorts:[{key:"recordedDate",dir:"asc",isDate:!0}]},Ce];const te=({action:e,className:t,query:n,outside:a=!1,readOnly:s=!1,rowActions:i,emptyMessage:o="There are no condition records available.",isLoading:l})=>{const c=Aa(),{data:h,setFilters:p,setSort:v}=gt({defaultFilters:nt,defaultSort:Ce,records:n.data});return r.createElement("div",{className:k(t,"ctw-scrollable-pass-through-height")},r.createElement(vt,{filterOptions:{onChange:p,defaultState:nt,filters:Ta(n.data??[],a)},sortOptions:{defaultSort:Ce,options:Ia,onChange:v},action:e}),r.createElement(bt,{className:"ctw-patient-conditions",columns:Ra,data:h,emptyMessage:o,isLoading:l||n.isLoading,onRowClick:y=>c({condition:y,readOnly:s}),rowActions:i}))};try{te.displayName="PatientConditionsBase",te.__docgenInfo={description:"",displayName:"PatientConditionsBase",props:{action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"{ data?: ConditionModel[] | undefined; isLoading: boolean; }"}},outside:{defaultValue:{value:"false"},description:"",name:"outside",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"ComponentType<{ record: ConditionModel; }>"}},emptyMessage:{defaultValue:{value:"There are no condition records available."},description:"",name:"emptyMessage",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}}}}}catch{}const Ma=({className:e,readOnly:t=!1})=>{const n=Kt(),a=St(),{t:s}=L(),i=!t&&r.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>a()},s("resource.add",{resource:s("glossary:condition_one")}));return r.createElement(te,{action:i,className:k(e),query:n,readOnly:t,rowActions:t?void 0:ja})},Ee=I(Ma,"PatientConditions"),ja=({record:e})=>{const t=xt(),n=xa();return r.createElement("div",{className:"ctw-flex ctw-space-x-2"},!e.isDeleted&&r.createElement("button",{type:"button",className:"ctw-btn-default",onClick:()=>n(e)},"Remove"),r.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>t(e)},"Edit"))};try{Ee.displayName="PatientConditions",Ee.__docgenInfo={description:"",displayName:"PatientConditions",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const Fa=()=>{const e=Ae();return r.createElement(r.Fragment,null,e.lastRetrievedAt&&r.createElement("div",{className:"ctw-text-sm ctw-italic ctw-text-black"},"Last Retrieved ",e.lastRetrievedAt))},Ot=()=>{const{openHistoryRequestDrawer:e}=Ae();return r.createElement("button",{type:"button",className:"ctw-btn-clear ctw-link",onClick:e,"data-zus-telemetry-click":"Request records"},"Request Records")},qe=({hideRequestRecords:e=!1})=>r.createElement("div",{className:"ctw-flex ctw-space-x-1"},r.createElement(Fa,null),!e&&r.createElement(Ot,null));try{qe.displayName="PatientHistoryAction",qe.__docgenInfo={description:"",displayName:"PatientHistoryAction",props:{hideRequestRecords:{defaultValue:{value:"false"},description:"",name:"hideRequestRecords",required:!1,type:{name:"boolean"}}}}}catch{}async function La(e,t,n,a){if(!t.id)throw new Error(`Tried to ${a} a resource that hasn't been created yet.`);if(!t.isSummaryResource)throw new Error(`Tried to ${a} a patient record resource.`);const s={resourceType:"Basic",id:e==null?void 0:e.id,code:{coding:[{system:nn,code:"adminact",display:"Administrative Activity"},{system:an,code:a}]},subject:{reference:`${t.resourceType}/${t.id}`,type:t.resourceType},author:await hn(n)};if((await wn(s,n)).id)de.reportActionFailure(a);else throw de.reportActionFailure(a),new Error(`Failed to ${a} resource with id of ${t.id}`)}async function At(e,t,n){const a=e.getBasicResourceByAction("archive")||e.getBasicResourceByAction("unarchive"),s=e.isArchived?"unarchive":"archive";await La(a,e,t,s),n&&await mt.invalidateQueries(n)}const Ba=({className:e,hideRequestRecords:t=!1,readOnly:n=!1})=>{const a=ut(),s=Ae(),i=s.lastRetrievedAt===void 0&&a.data.length===0,o=s.lastRetrievedAt?void 0:r.createElement("div",{className:"ctw-flex ctw-space-x-1"},r.createElement("div",null,"Retrieve patient clinical history."),r.createElement(Ot,null)),l=r.createElement(qe,{hideRequestRecords:t||i||n});return r.createElement(te,{outside:!0,action:l,className:e,query:a,readOnly:n,rowActions:n?void 0:$a,emptyMessage:o,isLoading:s.isLoading})},Pe=I(Ba,"PatientConditions"),$a=({record:e})=>{const t=St(),{getRequestContext:n}=F();return r.createElement("div",{className:"ctw-flex ctw-space-x-2"},r.createElement("button",{type:"button",className:"ctw-btn-default",onClick:async()=>{await At(e,await n(),[rn])}},e.isArchived?"Restore":"Dismiss"),r.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>t(e)},"Add"))};try{Pe.displayName="PatientConditionsOutside",Pe.__docgenInfo={description:"",displayName:"PatientConditionsOutside",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},hideRequestRecords:{defaultValue:{value:"false"},description:"",name:"hideRequestRecords",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const z=({className:e,color:t,text:n})=>{const a={primary:"ctw-bg-primary-light ctw-text-primary-main",gray:"ctw-bg-bg-light ctw-text-content-light",info:"ctw-bg-info-light ctw-text-info-main",success:"ctw-bg-success-light ctw-text-success-main",caution:"ctw-bg-caution-light ctw-text-caution-main",error:"ctw-bg-error-light ctw-text-error-main",notification:"ctw-bg-notification-light ctw-text-notification-main"}[t];return r.createElement("span",{className:k(e,a,"ctw-inline-flex ctw-rounded-full ctw-px-2 ctw-text-xs ctw-font-semibold ctw-leading-5")},n)};try{z.displayName="Badge",z.__docgenInfo={description:"",displayName:"Badge",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"enum",value:[{value:'"error"'},{value:'"primary"'},{value:'"gray"'},{value:'"info"'},{value:'"success"'},{value:'"caution"'},{value:'"notification"'}]}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}}}catch{}const Ha=()=>{const t=ut().data.filter(n=>n.displayStatus==="Active");return t.length>0?r.createElement(z,{color:"notification",text:t.length.toString(),className:"ctw-h-5"}):null};function Rt(e,t){const n=yt(e,"lastPrescriber"),a=[];return t&&a.push(Dt),n.length>1&&a.push({key:"lastPrescriber",type:"checkbox",icon:kn,values:n,display:"prescriber"}),a}const at={};function za(){const{openDrawer:e}=U();return({medication:t})=>{e({component:n=>r.createElement(In,{medication:t,...n})})}}const Ua=[{title:"Medication Name",render:e=>r.createElement(r.Fragment,null,r.createElement("div",{className:"ctw-font-medium group-hover:ctw-underline"},e.display),r.createElement("div",{className:"ctw-font-light"},e.dosage)),widthPercent:35,minWidth:270},{title:"Dispensed",render:e=>r.createElement("div",{className:"ctw-stacked-concat"},e.quantity&&r.createElement("div",null,e.quantity),e.refills&&r.createElement("div",null,e.refills," refills")),widthPercent:14},{title:"Last Filled",render:e=>e.lastFillDate&&r.createElement("div",null,r.createElement("span",{className:"ctw-stacked-only"},"Last Filled: "),e.lastFillDate),widthPercent:18},{title:"Last Prescribed",render:e=>{const{lastPrescribedDate:t,lastPrescriber:n}=e;return!t&&!n?null:r.createElement("div",{className:"ctw-stacked-concat"},r.createElement("span",{className:"ctw-stacked-only"},"Last Prescribed: "),t&&r.createElement("div",null,t),n&&r.createElement("div",null,n))},widthPercent:18,minWidth:"90px"}],kt=[{display:"Name (A-Z)",sorts:[{key:"display",dir:"asc"}]},{display:"Name (Z-A)",sorts:[{key:"display",dir:"desc"}]},{display:"Last Fill Date (Oldest to Newest)",sorts:[{key:"lastFillDate",dir:"desc",isDate:!0}]},{display:"Last Fill Date (Newest to Oldest)",sorts:[{key:"lastFillDate",dir:"asc",isDate:!0}]},{display:"Last Prescribed (Old to New)",sorts:[{key:"lastPrescribedDate",isDate:!0,dir:"desc"},{key:"lastPrescriber",dir:"asc"}]},{display:"Last Prescribed (New to Old)",sorts:[{key:"lastPrescribedDate",isDate:!0,dir:"asc"},{key:"lastPrescriber",dir:"asc"}]}],rt=kt[0];const ne=({action:e,className:t,query:n,rowActions:a,filters:s,defaultView:i,views:o,onOpenHistoryDrawer:l})=>{const c=za(),{data:h,setFilters:p,setSort:v,setViewOption:y}=gt({defaultView:i,defaultFilters:at,defaultSort:rt,records:n.data});function u(C){l==null||l(),c({medication:C})}return r.createElement("div",{className:k("ctw-scrollable-pass-through-height",t)},r.createElement(vt,{viewOptions:i&&o?{onChange:y,defaultView:i,options:o}:void 0,filterOptions:{onChange:p,defaultState:at,filters:s},sortOptions:{defaultSort:rt,options:kt,onChange:v},action:e}),r.createElement(bt,{className:"ctw-patient-medications",columns:Ua,data:h,emptyMessage:"There are no medication records available.",isLoading:n.isLoading,onRowClick:u,rowActions:a}))};try{ne.displayName="PatientMedicationsBase",ne.__docgenInfo={description:"",displayName:"PatientMedicationsBase",props:{action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"{ data?: MedicationStatementModel[] | undefined; isLoading: boolean; }"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"ComponentType<{ record: MedicationStatementModel; }>"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterItem[]"}},defaultView:{defaultValue:null,description:"",name:"defaultView",required:!1,type:{name:"ViewOption"}},views:{defaultValue:null,description:"",name:"views",required:!1,type:{name:"ViewOption[]"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}const Za=["active","unknown","on-hold","intended","not-taken"],Wa=["completed","stopped","entered-in-error"],Tt=[{display:"Current",filters:[{key:"status",type:"checkbox",selected:Za}]},{display:"Past",filters:[{key:"status",type:"checkbox",selected:Wa}]},{display:"All",filters:[]}],Ga=Tt[0],Ka=({className:e,onOpenHistoryDrawer:t})=>{const{builderMedications:n,isLoading:a}=ke();return r.createElement(ne,{className:e,query:{data:n,isLoading:a},filters:Rt(n,!1),views:Tt,defaultView:Ga,onOpenHistoryDrawer:t})},Ve=I(Ka,"PatientMedications");try{Ve.displayName="PatientMedications",Ve.__docgenInfo={description:"",displayName:"PatientMedications",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}const Ya=async(e,t)=>{const{authToken:n,contextBuilderId:a}=e;return(await(await fetch(`${sn(e.env)}?display=${t}`,{headers:{Authorization:`Bearer ${n}`,...a&&{"Zus-Account":a}}})).json()).data},_e=({defaultCoding:e,readonly:t,...n})=>{const{getRequestContext:a}=F(),[s,i]=f.useState(!1),[o,l]=f.useState(),c=async h=>{i(!0);const p=await a(),v=await Ya(p,h);v&&l(v.map(y=>({value:y,label:y.display}))),i(!1)};return r.createElement(st,{options:o||[],isLoading:s,name:`${n.name}`,defaultSearchTerm:n.defaultValue,readonly:t,onSearchChange:c,defaultValue:e})};try{_e.displayName="MedicationsAutoComplete",_e.__docgenInfo={description:"",displayName:"MedicationsAutoComplete",props:{defaultCoding:{defaultValue:null,description:"",name:"defaultCoding",required:!1,type:{name:"Coding"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const Ne=e=>[{label:"Subject",value:e.subjectID,field:"subjectID",hidden:!0},{label:"Date Asserted",value:ce(new Date,"P"),field:"dateAsserted",hidden:!0},{label:"Medication",field:"medication",value:e.display,render:(t,n)=>r.createElement(_e,{readonly:t,...n,defaultCoding:e.rxNormCodeableConcept})},{label:"Latest Status",value:Nn(e.status),field:"status"},{label:"Instructions",value:e.dosage,field:"dosage"}],Qa=P.object({subjectID:P.string({required_error:"Patient must be specified."}),dateAsserted:P.date({required_error:"Date asserted is required."}),medication:P.object({code:P.string({required_error:"Please choose a medication."}),display:P.string().optional(),system:P.string().optional()}),dosage:P.string().optional(),status:P.enum(["active","completed","entered-in-error","intended","not-taken","on-hold","stopped","unknown"])});try{Ne.displayName="getMedicationFormData",Ne.__docgenInfo={description:"",displayName:"getMedicationFormData",props:{kind:{defaultValue:null,description:"",name:"kind",required:!0,type:{name:'"MedicationStatement"'}},builderPatientRxNormStatus:{defaultValue:null,description:"",name:"builderPatientRxNormStatus",required:!1,type:{name:"Record<string, string>"}},basedOn:{defaultValue:null,description:"",name:"basedOn",required:!0,type:{name:"string | undefined"}},category:{defaultValue:null,description:"",name:"category",required:!0,type:{name:"string"}},context:{defaultValue:null,description:"",name:"context",required:!0,type:{name:"string | undefined"}},dateAsserted:{defaultValue:null,description:"",name:"dateAsserted",required:!0,type:{name:"string | undefined"}},derivedFrom:{defaultValue:null,description:"",name:"derivedFrom",required:!0,type:{name:"string[]"}},aggregatedFrom:{defaultValue:null,description:"",name:"aggregatedFrom",required:!0,type:{name:"Reference[]"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string"}},dosage:{defaultValue:null,description:"",name:"dosage",required:!0,type:{name:"string | undefined"}},effectiveStart:{defaultValue:null,description:"",name:"effectiveStart",required:!0,type:{name:"string | undefined"}},identifier:{defaultValue:null,description:"",name:"identifier",required:!0,type:{name:"string | undefined"}},informationSource:{defaultValue:null,description:"",name:"informationSource",required:!0,type:{name:"Reference | undefined"}},medicationReference:{defaultValue:null,description:"",name:"medicationReference",required:!0,type:{name:"string | undefined"}},notesDisplay:{defaultValue:null,description:"",name:"notesDisplay",required:!0,type:{name:"string[]"}},partOf:{defaultValue:null,description:"",name:"partOf",required:!0,type:{name:"string | undefined"}},patientStatus:{defaultValue:null,description:"",name:"patientStatus",required:!0,type:{name:"string"}},rxNorm:{defaultValue:null,description:"",name:"rxNorm",required:!0,type:{name:"string | undefined"}},rxNormCodeableConcept:{defaultValue:null,description:'Get RxNorm coding with "display" defaulting to this Med-Statement label.',name:"rxNormCodeableConcept",required:!0,type:{name:"{ display: string; code?: string | undefined; _code?: Element | undefined; _display?: Element | undefined; system?: string | undefined; _system?: Element | undefined; ... 6 more ...; _id?: Element | undefined; }"}},reason:{defaultValue:null,description:"",name:"reason",required:!0,type:{name:"string | undefined"}},reasonReference:{defaultValue:null,description:"",name:"reasonReference",required:!0,type:{name:"Reference[] | undefined"}},isInactive:{defaultValue:null,description:"",name:"isInactive",required:!0,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"active"'},{value:'"entered-in-error"'},{value:'"unknown"'},{value:'"completed"'},{value:'"intended"'},{value:'"stopped"'},{value:'"on-hold"'},{value:'"not-taken"'}]}},displayStatus:{defaultValue:null,description:"",name:"displayStatus",required:!0,type:{name:"string"}},statusReason:{defaultValue:null,description:"",name:"statusReason",required:!0,type:{name:"string | undefined"}},subject:{defaultValue:null,description:"",name:"subject",required:!0,type:{name:"Reference"}},subjectID:{defaultValue:null,description:"",name:"subjectID",required:!0,type:{name:"string"}},patient:{defaultValue:null,description:"",name:"patient",required:!0,type:{name:"PatientModel | undefined"}},lastFillDate:{defaultValue:null,description:"",name:"lastFillDate",required:!0,type:{name:"string | undefined"}},quantity:{defaultValue:null,description:"",name:"quantity",required:!0,type:{name:"string | undefined"}},daysSupply:{defaultValue:null,description:"",name:"daysSupply",required:!0,type:{name:"string | undefined"}},refills:{defaultValue:null,description:"",name:"refills",required:!0,type:{name:"string | undefined"}},lastPrescriber:{defaultValue:null,description:"",name:"lastPrescriber",required:!0,type:{name:"string | undefined"}},lastPrescribedDate:{defaultValue:null,description:"",name:"lastPrescribedDate",required:!0,type:{name:"string | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"MedicationStatement"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isArchived:{defaultValue:null,description:"",name:"isArchived",required:!0,type:{name:"boolean"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}const Xa=[un,pt,dn],Ja=async(e,t)=>{const n={resourceType:"MedicationStatement",status:e.status,dateAsserted:on(e.dateAsserted),subject:{type:"Patient",reference:`Patient/${e.subjectID}`},medicationCodeableConcept:{text:e.medication.display,coding:[{system:ln,code:e.medication.code}]},...e.dosage&&{dosage:[{text:e.dosage}]}},a=new ue(n),s=await Cn(a.resource,await t());return await Promise.all(Xa.map(async i=>mt.invalidateQueries([i]))),s};function er(){const{openDrawer:e}=U();return t=>{e({component:n=>r.createElement(tr,{medication:t.resource,...n})})}}const tr=({isOpen:e,onClose:t,medication:n})=>{var l,c;const a=Re(),s={reference:`Patient/${(l=a.data)==null?void 0:l.id}`,display:(c=a.data)==null?void 0:c.display};let i;n?i=new ue({...n,subject:s,dateAsserted:ce(new Date,"yyyy-MM-dd")}):i=new ue({resourceType:"MedicationStatement",status:"active",subject:s,dateAsserted:ce(new Date,"yyyy-MM-dd")});const o=Ne(i);return r.createElement(Oe,{title:"Add Medication",action:Ja,data:o,schema:Qa,isOpen:e,onClose:t})},nr=({className:e,onAddToRecord:t,readOnly:n=!1,onOpenHistoryDrawer:a})=>{const{otherProviderMedications:s,isLoading:i}=ke();return r.createElement(ne,{className:e,query:{data:s,isLoading:i},filters:Rt(s,!0),rowActions:n?void 0:ar({onAddToRecord:t}),onOpenHistoryDrawer:a})},Se=I(nr,"PatientMedicationsOutside"),ar=({onAddToRecord:e})=>t=>r.createElement(rr,{...t,onAddToRecord:e}),rr=({record:e,onAddToRecord:t})=>{const n=er(),{getRequestContext:a}=F();return r.createElement("div",{className:"ctw-flex ctw-space-x-2"},r.createElement("button",{type:"button",className:"ctw-btn-default",onClick:async()=>{await At(e,await a(),[pt])}},e.isArchived?"Restore":"Dismiss"),r.createElement("button",{type:"button",className:"ctw-btn-primary ctw-ml-1 ctw-capitalize","data-zus-telemetry-click":"Add to record","data-testid":"add-to-record",onClick:()=>{t?t(e):n(e)}},"Add"))};try{Se.displayName="PatientMedicationsOutside",Se.__docgenInfo={description:"",displayName:"PatientMedicationsOutside",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}},onAddToRecord:{defaultValue:null,description:"",name:"onAddToRecord",required:!1,type:{name:"((record: MedicationStatementModel) => void)"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const ir=()=>{const{otherProviderMedications:e=[]}=ke(),t=e.filter(n=>!(n.isArchived||n.isInactive));return t.length>0?r.createElement(z,{color:"notification",text:t.length.toString(),className:"ctw-h-5"}):null},sr=({className:e})=>{const t=ht();return r.createElement(Mn,{query:t,className:k(e,"ctw-scrollable-pass-through-height")})},xe=I(sr,"PatientObservationsOutside");try{xe.displayName="PatientObservationsOutside",xe.__docgenInfo={description:"",displayName:"PatientObservationsOutside",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}}}}}catch{}const or=()=>{const{data:e=[]}=ht();return e.length?r.createElement(z,{color:"notification",text:e.length.toString(),className:"ctw-h-5"}):null},lr={allergies:(e={})=>({key:"allergies",getPanelClassName:()=>"ctw-pt-5",display:()=>"allergies",render:()=>r.createElement(Fn,{...e})}),"care-team":(e={})=>({key:"care-team",display:()=>"care team",render:()=>r.createElement(Ln,{...e})}),conditions:(e={})=>({key:"conditions",display:()=>X.t("zap.tabs.conditions"),render:()=>r.createElement(Ee,{...e})}),"conditions-outside":(e={})=>({key:"conditions-outside",display:()=>r.createElement("div",{className:"ctw-space-x-2"},r.createElement("span",{className:"ctw-capitalize"},X.t("zap.tabs.conditionsOutside")),r.createElement(Ha,null)),render:()=>r.createElement(Pe,{...e})}),documents:(e={})=>({key:"documents",getPanelClassName:()=>"ctw-pt-5",display:()=>"documents",render:()=>r.createElement(Bn,{...e})}),immunizations:(e={})=>({key:"immunizations",getPanelClassName:()=>"ctw-pt-5",display:()=>"immunizations",render:()=>r.createElement($n,{...e})}),medications:(e={})=>({key:"medications",display:()=>"medication list",render:()=>r.createElement(Ve,{...e})}),"medications-outside":(e={})=>({key:"medications-outside",display:()=>r.createElement("div",{className:"ctw-space-x-2"},r.createElement("span",{className:"ctw-capitalize"},X.t("zap.tabs.medicationsOutside")),r.createElement(ir,null)),render:()=>r.createElement(Se,{...e})}),observations:(e={})=>({key:"observations",display:()=>"observations",render:()=>r.createElement(jn,{...e})}),"observations-outside":(e={})=>({key:"observations-outside",display:()=>r.createElement(r.Fragment,null,r.createElement("span",{className:"ctw-pr-2 ctw-capitalize"},"outside observations"),r.createElement(or,null)),render:()=>r.createElement(xe,{...e})}),timelines:(e={})=>({key:"timelines",getPanelClassName:()=>"ctw-pt-5",display:()=>"encounter timeline",render:()=>r.createElement(Hn,{...e})})};function ur({children:e,className:t,forceHorizontalTabs:n=!1,content:a,onChange:s}){const[i,o]=f.useState(0),l=f.useRef(null),c=zn(l),h=!n&&c.sm,[p,v]=f.useState({0:!0}),y=u=>{o(u),v({...p,[u]:!0}),s&&s(u)};return r.createElement("div",{ref:l,className:k(t,"ctw-tab-group ctw-scrollable-pass-through-height ctw-w-full")},r.createElement(B.Group,{selectedIndex:i,onChange:y},h&&r.createElement(Tn,{btnClassName:"ctw-tab ctw-capitalize",optionsClassName:"ctw-tab-list ctw-capitalize",onChange:y,items:a}),r.createElement(B.List,{className:k("ctw-border-default ctw-flex ctw-justify-start ctw-border-b ctw-border-divider-light",{"ctw-hidden":h})},a.map(({key:u,display:C})=>r.createElement(B,{key:u,"data-zus-telemetry-click":`Tab[${u}]`,onClick:dr,className:({selected:q})=>k(["ctw-tab ctw-text-sm ctw-capitalize","hover:after:ctw-bg-content-black","focus-visible:ctw-outline-primary-dark focus-visible:after:ctw-bg-transparent"],{"after:ctw-bg-content-black":q,"ctw-text-content-light":!q})},C()))),e,r.createElement(B.Panels,{className:"ctw-scrollable-pass-through-height"},a.map((u,C)=>{var q;return r.createElement(B.Panel,{key:u.key,className:k("ctw-scrollable-pass-through-height",(q=u.getPanelClassName)==null?void 0:q.call(u,c.sm)),unmount:!1},p[C]&&u.render(c.sm))}))))}const De=I(ur,"TabGroup",!1);function dr(){typeof document<"u"&&requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})}try{De.displayName="TabGroup",De.__docgenInfo={description:"",displayName:"TabGroup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"TabGroupItem[]"}},forceHorizontalTabs:{defaultValue:null,description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((index: number) => void)"}}}}}catch{}const cr=({forceHorizontalTabs:e=!1,allergiesProps:t,careTeamProps:n,conditionsProps:a,conditionsOutsideProps:s,documentsProps:i,immunizationsProps:o,medicationsProps:l,medicationsOutsideProps:c,observationsProps:h,observationsOutsideProps:p,timelineProps:v,resources:y,hideTitle:u=!1,title:C="Outside Records",removeBranding:q=!1})=>{const m={allergies:t,"care-team":n,conditions:a,"conditions-outside":s,documents:i,immunizations:o,medications:l,"medications-outside":c,observations:h,"observations-outside":p,timelines:v},w=y.map(b=>{const E=m[b]??{};return lr[b](E)});return r.createElement("div",{className:"ctw-zus-aggregated-profile ctw-scrollable-pass-through-height"},!u&&r.createElement(Sn,{className:"ctw-border-b-2 ctw-border-r-0 ctw-border-l-0 ctw-border-t-0 ctw-border-solid ctw-border-divider-light"},r.createElement("h3",{className:"ctw-m-0 ctw-inline-block ctw-p-0 ctw-pb-3 ctw-text-lg ctw-font-medium"},C," ",!q&&r.createElement("span",{className:"ctw-text-sm ctw-font-light ctw-italic ctw-text-content-light"},"Powered by"," ",r.createElement("img",{src:Bt,alt:"Zus",className:"-ctw-mb-1.5"})))),r.createElement(De,{content:w,forceHorizontalTabs:e}))},it=I(cr,"ZusAggregatedProfile");try{it.displayName="ZusAggregatedProfile",it.__docgenInfo={description:`ZusAggregatedProfile allows developers to utilize most of the components
available in this library as a single customizable component with tabbed
navigation. Simply pass an array with the names of the desired resources
to include _(see below)_.

It's possible to set a custom title for the ZusAggregatedProfile component,
making it a single component which can be used to create a handful of
different widgets within an app.

\`\`\`
export const ZusMedsWidget = <ZusAggregatedProfile
  title="Medications"
  resources={["medications", "medications-outside"]}
/>

export const ZusProblemsWidget = <ZusAggregatedProfile
  title="Problems"
  resources={["allergies", "conditions", "conditions-outside"]}
/>
\`\`\`
The complete set of available resources in the ZusAggregatedProfile are
"allergies",
"care-team",
"conditions",
"conditions-outside",
"documents",
"immunizations",
"medications",
"medications-outside",
"observations",
"observations-outside",
"timelines".`,displayName:"ZusAggregatedProfile",props:{resources:{defaultValue:null,description:"",name:"resources",required:!0,type:{name:"ZAPResourceName[]"}},forceHorizontalTabs:{defaultValue:{value:"false"},description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},title:{defaultValue:{value:"Outside Records"},description:"",name:"title",required:!1,type:{name:"string"}},hideTitle:{defaultValue:{value:"false"},description:"",name:"hideTitle",required:!1,type:{name:"boolean"}},removeBranding:{defaultValue:{value:"false"},description:"",name:"removeBranding",required:!1,type:{name:"boolean"}},allergiesProps:{defaultValue:null,description:"",name:"allergiesProps",required:!1,type:{name:"PatientAllergiesProps"}},careTeamProps:{defaultValue:null,description:"",name:"careTeamProps",required:!1,type:{name:"PatientCareTeamProps"}},conditionsProps:{defaultValue:null,description:"",name:"conditionsProps",required:!1,type:{name:"PatientConditionsProps"}},conditionsOutsideProps:{defaultValue:null,description:"",name:"conditionsOutsideProps",required:!1,type:{name:"PatientConditionsOutsideProps"}},documentsProps:{defaultValue:null,description:"",name:"documentsProps",required:!1,type:{name:"PatientDocumentProps"}},immunizationsProps:{defaultValue:null,description:"",name:"immunizationsProps",required:!1,type:{name:"PatientImmunizationsProps"}},medicationsProps:{defaultValue:null,description:"",name:"medicationsProps",required:!1,type:{name:"PatientMedicationsProps"}},medicationsOutsideProps:{defaultValue:null,description:"",name:"medicationsOutsideProps",required:!1,type:{name:"PatientMedicationsOutsideProps"}},observationsProps:{defaultValue:null,description:"",name:"observationsProps",required:!1,type:{name:"PatientObservationsProps"}},observationsOutsideProps:{defaultValue:null,description:"",name:"observationsOutsideProps",required:!1,type:{name:"PatientObservationsOutsideProps"}},timelineProps:{defaultValue:null,description:"",name:"timelineProps",required:!1,type:{name:"PatientTimelineProps"}}}}}catch{}export{it as Z};
