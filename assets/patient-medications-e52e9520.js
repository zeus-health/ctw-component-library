import{r as l,R as a}from"./index-6f814c40.js";import{c as k}from"./index-74f03c09.js";import{O as fe,a as be}from"./other-provider-meds-table-6dc2367f.js";import{u as he,c as ye,d as we,b as ne,S as se}from"./use-filtered-sorted-data-0923a9d1.js";import"./_baseToString-ba0098b0.js";import"./_equalByTag-3aa7c076.js";import"./_baseClone-7982cf45.js";import{b as ve,i as ge,j as Te,t as xe,k as ee}from"./values-e0b170db.js";import"./sortBy-8d97dd92.js";import"./_baseForOwn-2ea4fe61.js";import"./mergeWith-9910f455.js";import"./_createSet-3c80ad01.js";import{m as oe,d as $,P as Ee}from"./provider-meds-table-8c1f47ef.js";import{u as Pe,a as ie,M as Se}from"./use-medications-648ee919.js";import{s as Ie}from"./sort-5c3c7af1.js";import{w as _e,S as Ae}from"./error-boundary-a8316818.js";import{L as Me,F as Ne}from"./filter-bar-d226e2ae.js";import{u as ke}from"./use-breakpoints-8921c18b.js";import{h as le,c as Oe,C as O,y as D,s as G,a as j,$ as H,I as ce,o as F,M as V,e as De,j as T,O as _,T as x,u as de,t as He,S as te,v as re}from"./use-watch-a9671586.js";import{s as Re}from"./calculate-active-index-048f6a58.js";function qe({onFocus:e}){let[t,r]=l.useState(!0);return t?a.createElement(le,{as:"button",type:"button",features:Oe.Focusable,onFocus:o=>{o.preventDefault();let n,c=50;function i(){if(c--<=0){n&&cancelAnimationFrame(n);return}if(e()){r(!1),cancelAnimationFrame(n);return}n=requestAnimationFrame(i)}n=requestAnimationFrame(i)}}):null}var Ce=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Ce||{});let Fe={[0](e,t){let r=e.tabs.filter(c=>{var i;return!((i=c.current)!=null&&i.hasAttribute("disabled"))});if(t.index<0)return{...e,selectedIndex:e.tabs.indexOf(r[0])};if(t.index>e.tabs.length)return{...e,selectedIndex:e.tabs.indexOf(r[r.length-1])};let o=e.tabs.slice(0,t.index),n=[...e.tabs.slice(t.index),...o].find(c=>r.includes(c));return n?{...e,selectedIndex:e.tabs.indexOf(n)}:e},[1](e,t){var r;if(e.tabs.includes(t.tab))return e;let o=e.tabs[e.selectedIndex],n=re([...e.tabs,t.tab],i=>i.current),c=(r=n.indexOf(o))!=null?r:e.selectedIndex;return c===-1&&(c=e.selectedIndex),{...e,tabs:n,selectedIndex:c}},[2](e,t){return{...e,tabs:e.tabs.filter(r=>r!==t.tab)}},[3](e,t){return e.panels.includes(t.panel)?e:{...e,panels:re([...e.panels,t.panel],r=>r.current)}},[4](e,t){return{...e,panels:e.panels.filter(r=>r!==t.panel)}}},Q=l.createContext(null);Q.displayName="TabsSSRContext";function J(e){let t=l.useContext(Q);if(t===null){let r=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,J),r}return t}let K=l.createContext(null);K.displayName="TabsDataContext";function A(e){let t=l.useContext(K);if(t===null){let r=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,A),r}return t}let X=l.createContext(null);X.displayName="TabsActionsContext";function Y(e){let t=l.useContext(X);if(t===null){let r=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Y),r}return t}function Ve(e,t){return de(t.type,Fe,e,t)}let $e=l.Fragment,ze=O(function(e,t){let{defaultIndex:r=0,vertical:o=!1,manual:n=!1,onChange:c,selectedIndex:i=null,...w}=e;const m=o?"vertical":"horizontal",v=n?"manual":"auto";let u=i!==null,y=D(t),[p,s]=l.useReducer(Ve,{selectedIndex:i??r,tabs:[],panels:[]}),g=l.useMemo(()=>({selectedIndex:p.selectedIndex}),[p.selectedIndex]),f=G(c||(()=>{})),b=G(p.tabs),E=l.useMemo(()=>({orientation:m,activation:v,...p}),[m,v,p]),S=G(u?e.selectedIndex:p.selectedIndex),I=l.useMemo(()=>({registerTab(h){return s({type:1,tab:h}),()=>s({type:2,tab:h})},registerPanel(h){return s({type:3,panel:h}),()=>s({type:4,panel:h})},change(h){S.current!==h&&f.current(h),u||s({type:0,index:h})}}),[s,u]);j(()=>{s({type:0,index:i??r})},[i]);let M=l.useRef({tabs:[],panels:[]}),z={ref:y};return a.createElement(Q.Provider,{value:M},a.createElement(X.Provider,{value:I},a.createElement(K.Provider,{value:E},E.tabs.length<=0&&a.createElement(qe,{onFocus:()=>{var h,R;for(let q of b.current)if(((h=q.current)==null?void 0:h.tabIndex)===0)return(R=q.current)==null||R.focus(),!0;return!1}}),H({ourProps:z,theirProps:w,slot:g,defaultTag:$e,name:"Tabs"}))))}),Ge="div",Le=O(function(e,t){let{orientation:r,selectedIndex:o}=A("Tab.List"),n=D(t);return H({ourProps:{ref:n,role:"tablist","aria-orientation":r},theirProps:e,slot:{selectedIndex:o},defaultTag:Ge,name:"Tabs.List"})}),Be="button",Ue=O(function(e,t){var r,o;let n=`headlessui-tabs-tab-${ce()}`,{orientation:c,activation:i,selectedIndex:w,tabs:m,panels:v}=A("Tab"),u=Y("Tab"),y=A("Tab"),p=J("Tab"),s=l.useRef(null),g=D(s,t);j(()=>u.registerTab(s),[u,s]);let f=p.current.tabs.indexOf(n);f===-1&&(f=p.current.tabs.push(n)-1);let b=m.indexOf(s);b===-1&&(b=f);let E=b===w,S=F(d=>{var P;let C=d();if(C===V.Success&&i==="auto"){let pe=(P=De(s))==null?void 0:P.activeElement,Z=y.tabs.findIndex(me=>me.current===pe);Z!==-1&&u.change(Z)}return C}),I=F(d=>{let P=m.map(C=>C.current).filter(Boolean);if(d.key===T.Space||d.key===T.Enter){d.preventDefault(),d.stopPropagation(),u.change(b);return}switch(d.key){case T.Home:case T.PageUp:return d.preventDefault(),d.stopPropagation(),S(()=>_(P,x.First));case T.End:case T.PageDown:return d.preventDefault(),d.stopPropagation(),S(()=>_(P,x.Last))}if(S(()=>de(c,{vertical(){return d.key===T.ArrowUp?_(P,x.Previous|x.WrapAround):d.key===T.ArrowDown?_(P,x.Next|x.WrapAround):V.Error},horizontal(){return d.key===T.ArrowLeft?_(P,x.Previous|x.WrapAround):d.key===T.ArrowRight?_(P,x.Next|x.WrapAround):V.Error}}))===V.Success)return d.preventDefault()}),M=l.useRef(!1),z=F(()=>{var d;M.current||(M.current=!0,(d=s.current)==null||d.focus(),u.change(b),He(()=>{M.current=!1}))}),h=F(d=>{d.preventDefault()}),R=l.useMemo(()=>({selected:E}),[E]),q=e,ue={ref:g,onKeyDown:I,onMouseDown:h,onClick:z,id:n,role:"tab",type:Re(e,s),"aria-controls":(o=(r=v[b])==null?void 0:r.current)==null?void 0:o.id,"aria-selected":E,tabIndex:E?0:-1};return H({ourProps:ue,theirProps:q,slot:R,defaultTag:Be,name:"Tabs.Tab"})}),We="div",je=O(function(e,t){let{selectedIndex:r}=A("Tab.Panels"),o=D(t),n=l.useMemo(()=>({selectedIndex:r}),[r]);return H({ourProps:{ref:o},theirProps:e,slot:n,defaultTag:We,name:"Tabs.Panels"})}),Qe="div",Je=te.RenderStrategy|te.Static,Ke=O(function(e,t){var r,o,n,c;let{selectedIndex:i,tabs:w,panels:m}=A("Tab.Panel"),v=Y("Tab.Panel"),u=J("Tab.Panel"),y=`headlessui-tabs-panel-${ce()}`,p=l.useRef(null),s=D(p,t);j(()=>v.registerPanel(p),[v,p]);let g=u.current.panels.indexOf(y);g===-1&&(g=u.current.panels.push(y)-1);let f=m.indexOf(p);f===-1&&(f=g);let b=f===i,E=l.useMemo(()=>({selected:b}),[b]),S=e,I={ref:s,id:y,role:"tabpanel","aria-labelledby":(o=(r=w[f])==null?void 0:r.current)==null?void 0:o.id,tabIndex:b?0:-1};return!b&&((n=e.unmount)==null||n)&&!((c=e.static)!=null&&c)?a.createElement(le,{as:"span",...I}):H({ourProps:I,theirProps:S,slot:E,defaultTag:Qe,features:Je,visible:b,name:"Tabs.Panel"})}),N=Object.assign(Ue,{Group:ze,List:Le,Panels:je,Panel:Ke});function L(e){const t=he(e,"lastPrescriber");return ve([{key:"isArchived",type:"tag",icon:ye,display:({listView:r})=>r?"show dismissed records":"dismissed records"},t.length<2?null:{key:"lastPrescriber",type:"checkbox",icon:we,values:t,display:"prescriber"}])}try{L.displayName="medicationFilters",L.__docgenInfo={description:"",displayName:"medicationFilters",props:{}}}catch{}function B({className:e,onAfterOpenHistoryDrawer:t,onOpenHistoryDrawer:r}){const[o,n]=l.useState([]),c=Pe(),{builderMedications:i,isLoading:w}=ie(),{data:m,setSort:v}=ne({defaultFilters:{},defaultSort:$,records:i});function u(y){ee(r)&&r(),c({medication:y}),setTimeout(()=>{ee(t)&&t()},0)}return l.useEffect(()=>{n(Ie(m.filter(y=>y.displayStatus!=="Active"),ge(Te("display"),xe),"asc"))},[m]),a.createElement(a.Fragment,null,a.createElement("div",{className:"ctw-flex ctw-flex-wrap ctw-gap-x-2"},a.createElement(se,{className:"ctw-my-2",options:oe,onChange:v,defaultSort:$})),a.createElement(Se,{className:e,medicationStatements:o,isLoading:w,handleRowClick:u}))}try{B.displayName="ProviderInactiveMedicationsTable",B.__docgenInfo={description:`Displays a table of inactive medication records. These are builder-owned medications
that have a status other than "active". These are not to be confused with "dismissed" or "archived"
medication records pulled from the network of other providers.`,displayName:"ProviderInactiveMedicationsTable",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}},onAfterOpenHistoryDrawer:{defaultValue:null,description:"",name:"onAfterOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}function Xe({children:e,className:t,forceHorizontalTabs:r=!1,content:o,onChange:n}){const[c,i]=l.useState(0),w=l.useRef(null),m=ke(w),v=!r&&m.sm,[u,y]=l.useState({0:!0}),p=s=>{i(s),y({...u,[s]:!0}),n&&n(s)};return a.createElement("div",{ref:w,className:k(t,"ctw-tab-group ctw-scrollable-pass-through-height ctw-w-full")},a.createElement(N.Group,{selectedIndex:c,onChange:p},v&&a.createElement(Me,{btnClassName:"ctw-tab ctw-capitalize",optionsClassName:"ctw-tab-list ctw-capitalize",onChange:p,items:o}),a.createElement(N.List,{className:k("ctw-border-default ctw-flex ctw-justify-start ctw-border-b ctw-border-divider-light",{"ctw-hidden":v})},o.map(({key:s,display:g})=>a.createElement(N,{key:s,"data-zus-telemetry-click":`Tab[${s}]`,onClick:Ye,className:({selected:f})=>k(["ctw-tab ctw-text-sm ctw-capitalize","hover:after:ctw-bg-content-black","focus-visible:ctw-outline-primary-dark focus-visible:after:ctw-bg-transparent"],{"after:ctw-bg-content-black":f,"ctw-text-content-light":!f})},g()))),e,a.createElement(N.Panels,{className:"ctw-scrollable-pass-through-height"},o.map((s,g)=>{var f;return a.createElement(N.Panel,{key:s.key,className:k("ctw-scrollable-pass-through-height",(f=s.getPanelClassName)==null?void 0:f.call(s,m.sm)),unmount:!1},u[g]&&s.render(m.sm))}))))}const U=_e(Xe,"TabGroup",!1);function Ye(){typeof document<"u"&&requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})}try{U.displayName="TabGroup",U.__docgenInfo={description:"",displayName:"TabGroup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"TabGroupItem[]"}},forceHorizontalTabs:{defaultValue:null,description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((index: number) => void)"}}}}}catch{}const Ze=e=>[{key:"medication-list",display:()=>"medication list",render:()=>a.createElement(Ee,{onOpenHistoryDrawer:e.onOpenHistoryDrawer,onAfterOpenHistoryDrawer:e.onAfterOpenHistoryDrawer})},{key:"inactive-provider-records",display:()=>"inactive",render:()=>a.createElement(B,{onOpenHistoryDrawer:e.onOpenHistoryDrawer,onAfterOpenHistoryDrawer:e.onAfterOpenHistoryDrawer})},{key:"other-provider-records",display:()=>a.createElement(a.Fragment,null,a.createElement("span",{className:"ctw-pr-2 ctw-capitalize"},"other provider records"),a.createElement(be,null)),render:()=>a.createElement(W,{...e})}];function W({handleAddToRecord:e,hideAddToRecord:t,onOpenHistoryDrawer:r,onAfterOpenHistoryDrawer:o}){const{otherProviderMedications:n}=ie(),{data:c,filters:i,setFilters:w,setSort:m}=ne({defaultFilters:{},defaultSort:$,records:n});return a.createElement("div",{className:"ctw-scrollable-pass-through-height"},a.createElement("div",{className:"ctw-flex ctw-flex-wrap ctw-gap-x-2"},a.createElement(se,{className:"ctw-my-2",options:oe,onChange:m,defaultSort:$}),a.createElement(Ne,{filters:L(n??[]),onChange:w,defaultState:{}})),a.createElement("div",{className:"ctw-scrollable-pass-through-height ctw-w-full"},a.createElement(fe,{records:c,showDismissed:!!i.isArchived,handleAddToRecord:e,hideAddToRecord:t,onOpenHistoryDrawer:r,onAfterOpenHistoryDrawer:o})))}function ae({className:e,forceHorizontalTabs:t=!1,...r}){const o=Ze(r);return a.createElement(Ae,{className:k("ctw-patient-medications ctw-scrollable-pass-through-height ctw-space-y-3 ctw-bg-white",e)},a.createElement(U,{content:o,forceHorizontalTabs:t,className:e}))}try{W.displayName="OtherProviderMedsTableTab",W.__docgenInfo={description:"",displayName:"OtherProviderMedsTableTab",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},forceHorizontalTabs:{defaultValue:null,description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},hideAddToRecord:{defaultValue:null,description:"",name:"hideAddToRecord",required:!1,type:{name:"boolean"}},handleAddToRecord:{defaultValue:null,description:"",name:"handleAddToRecord",required:!1,type:{name:"((m: MedicationStatementModel) => void)"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}},onAfterOpenHistoryDrawer:{defaultValue:null,description:"",name:"onAfterOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}try{ae.displayName="PatientMedications",ae.__docgenInfo={description:`This component is a tabbed view of patient medications from the current
provider, other providers and historical. When rendered in a small breakpoint
the component will change from horizontal tabs to a vertical dropdown menu.
If this is undesired, you may set the property \`forceHorizontalTabs\` to true
and the tabs will remain visible and horizontal. The \`forceHorizontalTabs\`
prop will not prevent the medication tables from switching to their stacked
view when viewed on smaller screens.`,displayName:"PatientMedications",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},forceHorizontalTabs:{defaultValue:{value:"false"},description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},hideAddToRecord:{defaultValue:null,description:"",name:"hideAddToRecord",required:!1,type:{name:"boolean"}},handleAddToRecord:{defaultValue:null,description:"",name:"handleAddToRecord",required:!1,type:{name:"((m: MedicationStatementModel) => void)"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}},onAfterOpenHistoryDrawer:{defaultValue:null,description:"",name:"onAfterOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}export{W as O,ae as P,U as T};
