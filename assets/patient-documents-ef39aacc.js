import{R as n,r as D}from"./index-6f814c40.js";import{c as _}from"./index-74f03c09.js";import{b as f,u as h}from"./resource-details-drawer-f22bda8d.js";import{V as y}from"./view-fhir-8f4f4169.js";import{w}from"./error-boundary-00270a2d.js";import{w as E,s as g,Y as P,u as v}from"./patient-helper-dd2ec7e9.js";import{T as C}from"./table-be835e20.js";import"./_baseToString-4993715b.js";import{o as N}from"./sortBy-be5f7eb4.js";import"./_baseClone-25b1595e.js";import"./sortBy-919d7262.js";import"./_equalByTag-aaf39779.js";import"./_baseForOwn-d8306f34.js";import{i as R}from"./isEqual-b08f36b0.js";import"./_createSet-12ef9b81.js";import{u as b}from"./uniqWith-f1edcb30.js";import{u as T}from"./patient-provider-f0f3476b.js";import{u as I}from"./use-breakpoints-62d00209.js";const s=(e=!1)=>{const a=[{widthPercent:20,minWidth:100,title:"Date Created",render:t=>n.createElement("div",{className:"group-hover:ctw-underline"},t.dateCreated)},{widthPercent:30,minWidth:200,title:"Title",render:t=>n.createElement("div",null,t.title)},{widthPercent:30,minWidth:200,title:"Managing Organization",render:t=>n.createElement("div",null,t.custodian)}];return e&&a.push({widthPercent:20,minWidth:150,render:t=>n.createElement(y,{name:"Document Resource",resource:t.resource})}),a};try{s.displayName="patientDocumentColumns",s.__docgenInfo={description:"",displayName:"patientDocumentColumns",props:{}}}catch{}const i=e=>{const a=e.map(r=>new f(r));return b(a,(r,o)=>R(m(r),m(o)))},m=e=>[e.dateCreated,e.custodian,e.title];try{i.displayName="applyDocumentFilters",i.__docgenInfo={description:"",displayName:"applyDocumentFilters",props:{}}}catch{}function W(){return T(P,[],E(async(e,a)=>{try{const{bundle:t,resources:r}=await g("DocumentReference",e,{patientUPID:a.UPID});return N(i(r),[o=>o.resource.content[0].attachment.creation||""],["desc"])}catch(t){throw new Error(`Failed fetching document information for patient: ${t}`)}},"req.patient_document"))}function k({className:e}){const a=D.useRef(null),t=I(a),r=W(),{featureFlags:o}=v(),u=h({header:c=>`${c.dateCreated} - ${c.title}`,details:M}),d=r.data??[],{isLoading:p}=r;return n.createElement("div",{ref:a,"data-zus-telemetry-namespace":"Documents",className:_("ctw-patient-documents ctw-bg-white",e,{"ctw-stacked":t.sm})},n.createElement("div",{className:"ctw-overflow-hidden"},n.createElement(C,{stacked:t.sm,isLoading:p,records:d,columns:s(o==null?void 0:o.enableViewFhirButton),handleRowClick:u})))}const l=w(k,"PatientDocuments"),M=e=>[{label:"status",value:e.status},{label:"docStatus",value:e.docStatus},{label:"Managing Organization",value:e.custodian},{label:"Section Display",value:e.sectionDisplays&&n.createElement("div",null,e.sectionDisplays.map((a,t)=>n.createElement("div",{key:a+t},a)))}];try{l.displayName="PatientDocuments",l.__docgenInfo={description:"",displayName:"PatientDocuments",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{l as P};
