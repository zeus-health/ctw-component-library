var ln=Object.defineProperty;var cn=(e,n,t)=>n in e?ln(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var at=(e,n,t)=>(cn(e,typeof n!="symbol"?n+"":n,t),t);import{r as p,R as s}from"./index-6f814c40.js";import{C as gt,Z as un}from"./zus-2d601315.js";import{b as vt,u as ht,R as bt,a as wt,c as Fe,L as dn}from"./use-filtered-sorted-data-87442ea5.js";import{w as mn,f as pn,_ as Ct,h as de,i as H,j as Et,I as fn,k as je,l as ve,m as Pt,n as yn,o as ae,p as Le,q as Be,r as $e,s as gn,b as K,t as re,x as vn,T as j,F as hn,y as F,c as k,z as A,A as rt,B as st,D as Z,E as bn,G as wn,H as Cn,J as En,K as $,L as St,M as Nt,N as Pn,O as Sn,R as Nn,U as _n,V as Dn,W as qn,X as le,Y as Ue,Z as ze,$ as xn,a0 as On,a1 as it,a2 as Vn,a3 as An,a4 as Rn,a5 as he,a6 as Tn,a7 as In,a8 as kn,a9 as _t,aa as Mn}from"./patient-provider-a4cb595f.js";import{_ as Fn}from"./_baseForOwn-bf15a333.js";import{c as Dt}from"./sortBy-6233a452.js";import{f as me,c as qt,i as jn,o as Ln}from"./sortBy-5365e8c3.js";import"./_baseClone-1afc8850.js";import{c as xt}from"./_basePickBy-70b96448.js";import"./_baseIsEqual-bfc35476.js";import{p as Bn}from"./pickBy-e3805645.js";import"./_createSet-8cf710c5.js";import{q as G,c as $n}from"./request-b468d8d1.js";import{z as N,E as Un,D as He,u as Ot}from"./use-patient-history-b02dd686.js";import{M as zn,u as Hn,a as Yn}from"./view-fhir-60474808.js";import{S as Zn}from"./spinner-66aa4ba7.js";import{e as be,t as Gn}from"./values-74d3734a.js";import{c as I}from"./index-74f03c09.js";import{u as Wn,P as Kn}from"./patient-allergies-1ba64838.js";import{C as Qn}from"./coding-list-1d7c950f.js";import{a as Xn,b as Jn,f as ea,c as ta,d as na}from"./details-card-505ef9df.js";import{w as L,T as aa}from"./error-boundary-65237800.js";import{f as ra,g as Ye,h as we}from"./encounters-1e9acd43.js";import{a as sa,P as ia}from"./patient-observations-9cc29052.js";import{u as Vt}from"./diagnostic-report-1de43a51.js";import{P as oa}from"./patient-careteam-111cf9f2.js";import{P as la}from"./patient-documents-e0ba5cee.js";import{P as ca}from"./patient-immunizations-bd3365a2.js";import{P as ua}from"./patient-timeline-e5311177.js";import{u as da}from"./use-breakpoints-8d0d8496.js";import{h as At,s as ma,C as Q,y as X,a as pe,b as Ze,$ as J,I as Rt,o as te,M as ne,e as pa,c as R,O as B,T,u as Tt,t as fa,S as ot,d as lt}from"./use-watch-ad083092.js";import{s as ya}from"./use-controllable-6b791838.js";function ga(e,n){if(e==null)return{};var t={},a=Object.keys(e),r,i;for(i=0;i<a.length;i++)r=a[i],!(n.indexOf(r)>=0)&&(t[r]=e[r]);return t}function Ge(e,n){if(e==null)return{};var t=ga(e,n),a,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var va={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ha=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function ct(e){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=e.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(n.name=t[1],(va[t[1]]||e.charAt(e.length-2)==="/")&&(n.voidElement=!0),n.name.startsWith("!--"))){var a=e.indexOf("-->");return{type:"comment",comment:a!==-1?e.slice(4,a):""}}for(var r=new RegExp(ha),i=null;(i=r.exec(e))!==null;)if(i[0].trim())if(i[1]){var o=i[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),n.attrs[l[0]]=l[1],r.lastIndex--}else i[2]&&(n.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return n}var ba=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,wa=/^\s*$/,Ca=Object.create(null);function It(e,n){switch(n.type){case"text":return e+n.content;case"tag":return e+="<"+n.name+(n.attrs?function(t){var a=[];for(var r in t)a.push(r+'="'+t[r]+'"');return a.length?" "+a.join(" "):""}(n.attrs):"")+(n.voidElement?"/>":">"),n.voidElement?e:e+n.children.reduce(It,"")+"</"+n.name+">";case"comment":return e+"<!--"+n.comment+"-->"}}var Ea={parse:function(e,n){n||(n={}),n.components||(n.components=Ca);var t,a=[],r=[],i=-1,o=!1;if(e.indexOf("<")!==0){var l=e.indexOf("<");a.push({type:"text",content:l===-1?e:e.substring(0,l)})}return e.replace(ba,function(u,g){if(o){if(u!=="</"+t.name+">")return;o=!1}var m,v=u.charAt(1)!=="/",h=u.startsWith("<!--"),f=g+u.length,P=e.charAt(f);if(h){var C=ct(u);return i<0?(a.push(C),a):((m=r[i]).children.push(C),a)}if(v&&(i++,(t=ct(u)).type==="tag"&&n.components[t.name]&&(t.type="component",o=!0),t.voidElement||o||!P||P==="<"||t.children.push({type:"text",content:e.slice(f,e.indexOf("<",f))}),i===0&&a.push(t),(m=r[i-1])&&m.children.push(t),r[i]=t),(!v||t.voidElement)&&(i>-1&&(t.voidElement||t.name===u.slice(2,-1))&&(i--,t=i===-1?a:r[i]),!o&&P!=="<"&&P)){m=i===-1?a:r[i].children;var d=e.indexOf("<",f),w=e.slice(f,d===-1?void 0:d);wa.test(w)&&(w=" "),(d>-1&&i+m.length>=0||w!==" ")&&m.push({type:"text",content:w})}}),a},stringify:function(e){return e.reduce(function(n,t){return n+It("",t)},"")}},Pa=["format"],Sa=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function ut(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?ut(Object(t),!0).forEach(function(a){Ct(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ut(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function fe(e,n){if(!e)return!1;var t=e.props?e.props.children:e.children;return n?t.length>0:!!t}function ye(e){return e?e.props?e.props.children:e.children:[]}function Na(e){return Object.prototype.toString.call(e)!=="[object Array]"?!1:e.every(function(n){return p.isValidElement(n)})}function Y(e){return Array.isArray(e)?e:[e]}function _a(e,n){var t=D({},n);return t.props=Object.assign(e.props,n.props),t}function kt(e,n){if(!e)return"";var t="",a=Y(e),r=n.transSupportBasicHtmlNodes&&n.transKeepBasicHtmlNodesFor?n.transKeepBasicHtmlNodesFor:[];return a.forEach(function(i,o){if(typeof i=="string")t+="".concat(i);else if(p.isValidElement(i)){var l=Object.keys(i.props).length,u=r.indexOf(i.type)>-1,g=i.props.children;if(!g&&u&&l===0)t+="<".concat(i.type,"/>");else if(!g&&(!u||l!==0))t+="<".concat(o,"></").concat(o,">");else if(i.props.i18nIsDynamicList)t+="<".concat(o,"></").concat(o,">");else if(u&&l===1&&typeof g=="string")t+="<".concat(i.type,">").concat(g,"</").concat(i.type,">");else{var m=kt(g,n);t+="<".concat(o,">").concat(m,"</").concat(o,">")}}else if(i===null)de("Trans: the passed in value is invalid - seems you passed in a null child.");else if(H(i)==="object"){var v=i.format,h=Ge(i,Pa),f=Object.keys(h);if(f.length===1){var P=v?"".concat(f[0],", ").concat(v):f[0];t+="{{".concat(P,"}}")}else de("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",i)}else de("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",i)}),t}function Da(e,n,t,a,r,i){if(n==="")return[];var o=a.transKeepBasicHtmlNodesFor||[],l=n&&new RegExp(o.join("|")).test(n);if(!e&&!l)return[n];var u={};function g(d){var w=Y(d);w.forEach(function(b){typeof b!="string"&&(fe(b)?g(ye(b)):H(b)==="object"&&!p.isValidElement(b)&&Object.assign(u,b))})}g(e);var m=Ea.parse("<0>".concat(n,"</0>")),v=D(D({},u),r);function h(d,w,b){var E=ye(d),S=P(E,w.children,b);return Na(E)&&S.length===0?E:S}function f(d,w,b,E,S){d.dummy&&(d.children=w),b.push(p.cloneElement(d,D(D({},d.props),{},{key:E}),S?void 0:w))}function P(d,w,b){var E=Y(d),S=Y(w);return S.reduce(function(_,c,x){var O=c.children&&c.children[0]&&c.children[0].content&&t.services.interpolator.interpolate(c.children[0].content,v,t.language);if(c.type==="tag"){var V=E[parseInt(c.name,10)];!V&&b.length===1&&b[0][c.name]&&(V=b[0][c.name]),V||(V={});var y=Object.keys(c.attrs).length!==0?_a({props:c.attrs},V):V,q=p.isValidElement(y),M=q&&fe(c,!0)&&!c.voidElement,ce=l&&H(y)==="object"&&y.dummy&&!q,ee=H(e)==="object"&&e!==null&&Object.hasOwnProperty.call(e,c.name);if(typeof y=="string"){var ue=t.services.interpolator.interpolate(y,v,t.language);_.push(ue)}else if(fe(y)||M){var nn=h(y,c,b);f(y,nn,_,x)}else if(ce){var an=P(E,c.children,b);_.push(p.cloneElement(y,D(D({},y.props),{},{key:x}),an))}else if(Number.isNaN(parseFloat(c.name)))if(ee){var rn=h(y,c,b);f(y,rn,_,x,c.voidElement)}else if(a.transSupportBasicHtmlNodes&&o.indexOf(c.name)>-1)if(c.voidElement)_.push(p.createElement(c.name,{key:"".concat(c.name,"-").concat(x)}));else{var sn=P(E,c.children,b);_.push(p.createElement(c.name,{key:"".concat(c.name,"-").concat(x)},sn))}else if(c.voidElement)_.push("<".concat(c.name," />"));else{var on=P(E,c.children,b);_.push("<".concat(c.name,">").concat(on,"</").concat(c.name,">"))}else if(H(y)==="object"&&!q){var et=c.children[0]?O:null;et&&_.push(et)}else c.children.length===1&&O?_.push(p.cloneElement(y,D(D({},y.props),{},{key:x}),O)):_.push(p.cloneElement(y,D(D({},y.props),{},{key:x})))}else if(c.type==="text"){var tt=a.transWrapTextNodes,nt=i?a.unescape(t.services.interpolator.interpolate(c.content,v,t.language)):t.services.interpolator.interpolate(c.content,v,t.language);tt?_.push(p.createElement(tt,{key:"".concat(c.name,"-").concat(x)},nt)):_.push(nt)}return _},[])}var C=P([{dummy:!0,children:e||[]}],m,Y(e||[]));return ye(C[0])}function qa(e){var n=e.children,t=e.count,a=e.parent,r=e.i18nKey,i=e.context,o=e.tOptions,l=o===void 0?{}:o,u=e.values,g=e.defaults,m=e.components,v=e.ns,h=e.i18n,f=e.t,P=e.shouldUnescape,C=Ge(e,Sa),d=h||Et();if(!d)return mn("You will need to pass in an i18next instance by using i18nextReactModule"),n;var w=f||d.t.bind(d)||function(M){return M};i&&(l.context=i);var b=D(D({},pn()),d.options&&d.options.react),E=v||w.ns||d.options&&d.options.defaultNS;E=typeof E=="string"?[E]:E||["translation"];var S=g||kt(n,b)||b.transEmptyNodeValue||r,_=b.hashTransKey,c=r||(_?_(S):S),x=u?l.interpolation:{interpolation:D(D({},l.interpolation),{},{prefix:"#$?",suffix:"?$#"})},O=D(D(D(D({},l),{},{count:t},u),x),{},{defaultValue:S,ns:E}),V=c?w(c,O):S,y=Da(m||n,V,d,b,O,P),q=a!==void 0?a:b.defaultTransParent;return q?p.createElement(q,C,y):y}var xa=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function dt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function Oa(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?dt(Object(t),!0).forEach(function(a){Ct(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dt(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Va(e){var n=e.children,t=e.count,a=e.parent,r=e.i18nKey,i=e.context,o=e.tOptions,l=o===void 0?{}:o,u=e.values,g=e.defaults,m=e.components,v=e.ns,h=e.i18n,f=e.t,P=e.shouldUnescape,C=Ge(e,xa),d=p.useContext(fn)||{},w=d.i18n,b=d.defaultNS,E=h||w||Et(),S=f||E&&E.t.bind(E);return qa(Oa({children:n,count:t,parent:a,i18nKey:r,context:i,tOptions:l,values:u,defaults:g,components:m,ns:v||S&&S.ns||b||E&&E.options&&E.options.defaultNS,i18n:E,t:f,shouldUnescape:P},C))}function Aa(e){return e===void 0}var Ra=Aa,Ta="Expected a function";function Ia(e){if(typeof e!="function")throw new TypeError(Ta);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}var ka=Ia,Ma=Fn,Fa=ka,ja=Bn;function La(e,n){return ja(e,Fa(Ma(n)))}var Ba=La;const Ce=({condition:e})=>{var n;return s.createElement("div",null,s.createElement("div",{className:"ctw-text-2xl"},e.display," (",(n=e.preferredCoding)==null?void 0:n.code,")"),s.createElement("div",{className:"ctw-text-sm"},e.ccsChapter))};try{Ce.displayName="ConditionHeader",Ce.__docgenInfo={description:"",displayName:"ConditionHeader",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}function Mt(e){return xt(e)}const Ft=e=>{let n="",t="";switch(e){case"Active":n="confirmed",t="active";break;case"Inactive":n="confirmed",t="inactive";break;case"Pending":n="unconfirmed",t="active";break;case"Refuted":n="refuted",t="inactive";break;case"Entered In Error":n="entered-in-error";break;default:throw Error("status is should be of type ConditionStatus")}return Ba({verificationStatus:{coding:[{system:je,code:n}]},...t&&{clinicalStatus:{coding:[{system:ve,code:t}]}}},Ra)},jt=async(e,n,t,a)=>{const r=await a(),i={resourceType:"Condition",id:t.id,recorder:await Pt(r),...Ft(t.status),category:t.id&&e?e.resource.category:[{coding:[{system:yn,code:"problem-list-item",display:"Problem List Item"}]}],code:t.id&&e?e.codings:{coding:[{system:t.condition.system,code:t.condition.code,display:t.condition.display}],text:t.condition.display},...t.abatement&&{abatementDateTime:ae(t.abatement)},onsetDateTime:ae(t.onset),recordedDate:ae(new Date),subject:{type:"Patient",reference:`Patient/${n}`},note:t.note?[{text:t.note}]:void 0},o=await Le(i,r);return await Promise.all([G.invalidateQueries([Be]),G.invalidateQueries([$e])]),o};function $a({onFocus:e}){let[n,t]=p.useState(!0);return n?s.createElement(At,{as:"button",type:"button",features:ma.Focusable,onFocus:a=>{a.preventDefault();let r,i=50;function o(){if(i--<=0){r&&cancelAnimationFrame(r);return}if(e()){t(!1),cancelAnimationFrame(r);return}r=requestAnimationFrame(o)}r=requestAnimationFrame(o)}}):null}var Ua=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Ua||{});let za={[0](e,n){let t=e.tabs.filter(i=>{var o;return!((o=i.current)!=null&&o.hasAttribute("disabled"))});if(n.index<0)return{...e,selectedIndex:e.tabs.indexOf(t[0])};if(n.index>e.tabs.length)return{...e,selectedIndex:e.tabs.indexOf(t[t.length-1])};let a=e.tabs.slice(0,n.index),r=[...e.tabs.slice(n.index),...a].find(i=>t.includes(i));return r?{...e,selectedIndex:e.tabs.indexOf(r)}:e},[1](e,n){var t;if(e.tabs.includes(n.tab))return e;let a=e.tabs[e.selectedIndex],r=lt([...e.tabs,n.tab],o=>o.current),i=(t=r.indexOf(a))!=null?t:e.selectedIndex;return i===-1&&(i=e.selectedIndex),{...e,tabs:r,selectedIndex:i}},[2](e,n){return{...e,tabs:e.tabs.filter(t=>t!==n.tab)}},[3](e,n){return e.panels.includes(n.panel)?e:{...e,panels:lt([...e.panels,n.panel],t=>t.current)}},[4](e,n){return{...e,panels:e.panels.filter(t=>t!==n.panel)}}},We=p.createContext(null);We.displayName="TabsSSRContext";function Ke(e){let n=p.useContext(We);if(n===null){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Ke),t}return n}let Qe=p.createContext(null);Qe.displayName="TabsDataContext";function U(e){let n=p.useContext(Qe);if(n===null){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,U),t}return n}let Xe=p.createContext(null);Xe.displayName="TabsActionsContext";function Je(e){let n=p.useContext(Xe);if(n===null){let t=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Je),t}return n}function Ha(e,n){return Tt(n.type,za,e,n)}let Ya=p.Fragment,Za=Q(function(e,n){let{defaultIndex:t=0,vertical:a=!1,manual:r=!1,onChange:i,selectedIndex:o=null,...l}=e;const u=a?"vertical":"horizontal",g=r?"manual":"auto";let m=o!==null,v=X(n),[h,f]=p.useReducer(Ha,{selectedIndex:o??t,tabs:[],panels:[]}),P=p.useMemo(()=>({selectedIndex:h.selectedIndex}),[h.selectedIndex]),C=pe(i||(()=>{})),d=pe(h.tabs),w=p.useMemo(()=>({orientation:u,activation:g,...h}),[u,g,h]),b=pe(m?e.selectedIndex:h.selectedIndex),E=p.useMemo(()=>({registerTab(c){return f({type:1,tab:c}),()=>f({type:2,tab:c})},registerPanel(c){return f({type:3,panel:c}),()=>f({type:4,panel:c})},change(c){b.current!==c&&C.current(c),m||f({type:0,index:c})}}),[f,m]);Ze(()=>{f({type:0,index:o??t})},[o]);let S=p.useRef({tabs:[],panels:[]}),_={ref:v};return s.createElement(We.Provider,{value:S},s.createElement(Xe.Provider,{value:E},s.createElement(Qe.Provider,{value:w},w.tabs.length<=0&&s.createElement($a,{onFocus:()=>{var c,x;for(let O of d.current)if(((c=O.current)==null?void 0:c.tabIndex)===0)return(x=O.current)==null||x.focus(),!0;return!1}}),J({ourProps:_,theirProps:l,slot:P,defaultTag:Ya,name:"Tabs"}))))}),Ga="div",Wa=Q(function(e,n){let{orientation:t,selectedIndex:a}=U("Tab.List"),r=X(n);return J({ourProps:{ref:r,role:"tablist","aria-orientation":t},theirProps:e,slot:{selectedIndex:a},defaultTag:Ga,name:"Tabs.List"})}),Ka="button",Qa=Q(function(e,n){var t,a;let r=`headlessui-tabs-tab-${Rt()}`,{orientation:i,activation:o,selectedIndex:l,tabs:u,panels:g}=U("Tab"),m=Je("Tab"),v=U("Tab"),h=Ke("Tab"),f=p.useRef(null),P=X(f,n);Ze(()=>m.registerTab(f),[m,f]);let C=h.current.tabs.indexOf(r);C===-1&&(C=h.current.tabs.push(r)-1);let d=u.indexOf(f);d===-1&&(d=C);let w=d===l,b=te(y=>{var q;let M=y();if(M===ne.Success&&o==="auto"){let ce=(q=pa(f))==null?void 0:q.activeElement,ee=v.tabs.findIndex(ue=>ue.current===ce);ee!==-1&&m.change(ee)}return M}),E=te(y=>{let q=u.map(M=>M.current).filter(Boolean);if(y.key===R.Space||y.key===R.Enter){y.preventDefault(),y.stopPropagation(),m.change(d);return}switch(y.key){case R.Home:case R.PageUp:return y.preventDefault(),y.stopPropagation(),b(()=>B(q,T.First));case R.End:case R.PageDown:return y.preventDefault(),y.stopPropagation(),b(()=>B(q,T.Last))}if(b(()=>Tt(i,{vertical(){return y.key===R.ArrowUp?B(q,T.Previous|T.WrapAround):y.key===R.ArrowDown?B(q,T.Next|T.WrapAround):ne.Error},horizontal(){return y.key===R.ArrowLeft?B(q,T.Previous|T.WrapAround):y.key===R.ArrowRight?B(q,T.Next|T.WrapAround):ne.Error}}))===ne.Success)return y.preventDefault()}),S=p.useRef(!1),_=te(()=>{var y;S.current||(S.current=!0,(y=f.current)==null||y.focus(),m.change(d),fa(()=>{S.current=!1}))}),c=te(y=>{y.preventDefault()}),x=p.useMemo(()=>({selected:w}),[w]),O=e,V={ref:P,onKeyDown:E,onMouseDown:c,onClick:_,id:r,role:"tab",type:ya(e,f),"aria-controls":(a=(t=g[d])==null?void 0:t.current)==null?void 0:a.id,"aria-selected":w,tabIndex:w?0:-1};return J({ourProps:V,theirProps:O,slot:x,defaultTag:Ka,name:"Tabs.Tab"})}),Xa="div",Ja=Q(function(e,n){let{selectedIndex:t}=U("Tab.Panels"),a=X(n),r=p.useMemo(()=>({selectedIndex:t}),[t]);return J({ourProps:{ref:a},theirProps:e,slot:r,defaultTag:Xa,name:"Tabs.Panels"})}),er="div",tr=ot.RenderStrategy|ot.Static,nr=Q(function(e,n){var t,a,r,i;let{selectedIndex:o,tabs:l,panels:u}=U("Tab.Panel"),g=Je("Tab.Panel"),m=Ke("Tab.Panel"),v=`headlessui-tabs-panel-${Rt()}`,h=p.useRef(null),f=X(h,n);Ze(()=>g.registerPanel(h),[g,h]);let P=m.current.panels.indexOf(v);P===-1&&(P=m.current.panels.push(v)-1);let C=u.indexOf(h);C===-1&&(C=P);let d=C===o,w=p.useMemo(()=>({selected:d}),[d]),b=e,E={ref:f,id:v,role:"tabpanel","aria-labelledby":(a=(t=l[C])==null?void 0:t.current)==null?void 0:a.id,tabIndex:d?0:-1};return!d&&((r=e.unmount)==null||r)&&!((i=e.static)!=null&&i)?s.createElement(At,{as:"span",...E}):J({ourProps:E,theirProps:b,slot:w,defaultTag:er,features:tr,visible:d,name:"Tabs.Panel"})}),z=Object.assign(Qa,{Group:Za,List:Wa,Panels:Ja,Panel:nr});const ar=async(e,n)=>{const{authToken:t,contextBuilderId:a}=e;return(await(await $n(`${gn(e.env)}?display=${n}`,{headers:{Authorization:`Bearer ${t}`,...a&&{"Zus-Account":a}}})).json()).conditionsList},Ee=({defaultCoding:e,readonly:n,...t})=>{const{getRequestContext:a}=K(),[r,i]=p.useState(!1),[o,l]=p.useState(),u=async g=>{i(!0);const m=await a(),v=await ar(m,g);v&&l(v.map(h=>({value:h,label:h.display}))),i(!1)};return s.createElement(gt,{options:o||[],isLoading:r,name:`${t.name}`,defaultSearchTerm:t.defaultValue,readonly:n,onSearchChange:u,defaultValue:e})};try{Ee.displayName="ConditionsAutoComplete",Ee.__docgenInfo={description:"",displayName:"ConditionsAutoComplete",props:{defaultCoding:{defaultValue:null,description:"",name:"defaultCoding",required:!1,type:{name:"Coding"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const Pe=({condition:e})=>[{label:re.t("glossary:condition_one"),field:"condition",value:e.display,readonly:!1,render:(n,t)=>s.createElement(Ee,{readonly:n,...t,defaultCoding:e.preferredCoding??{}})},...Lt(e)],Se=({condition:e})=>[{label:"id",value:e.id,field:"id",readonly:!0,hidden:!0},...Lt(e)],Lt=e=>[{label:"subject",value:e.subjectID,field:"subjectID",readonly:!0,hidden:!0},{label:"Status",value:e.displayStatus==="Unknown"?"Select One":e.displayStatus,field:"status"},{label:"Onset",value:e.onset,field:"onset"},{label:"Abatement",value:e.abatement,field:"abatement"},{label:"Note",value:e.notes,lines:3,field:"note"}],Bt=N.object({id:N.string().optional(),subjectID:N.string({required_error:"Condition subjectID must be specified."}),status:N.enum(["Active","Pending","Inactive","Refuted","Entered In Error"]),onset:N.date().max(new Date,{message:"Onset cannot be a future date."}).optional(),abatement:N.date().max(new Date,{message:"Abatement cannot be a future date."}).optional(),note:N.string().optional()}),$t=(e,n)=>{e.abatement&&e.status!=="Inactive"&&n.addIssue({code:N.ZodIssueCode.custom,message:"Status must be inactive.",path:["abatement"]}),e.abatement&&e.onset&&e.abatement<e.onset&&n.addIssue({code:N.ZodIssueCode.custom,message:"Abatement date must be after onset date.",path:["abatement"]})},rr=Bt.superRefine((e,n)=>$t(e,n)),sr=Bt.extend({condition:N.object({code:N.string({required_error:"Please choose a condition."}),display:N.string().optional(),system:N.string().optional()})}).superRefine((e,n)=>$t(e,n));try{Pe.displayName="getAddConditionData",Pe.__docgenInfo={description:"",displayName:"getAddConditionData",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}try{Se.displayName="getEditingPatientConditionData",Se.__docgenInfo={description:"",displayName:"getEditingPatientConditionData",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}const Ne=({resource:e,resourceName:n,onDelete:t,onClose:a,...r})=>{const[i,o]=p.useState(),[l,u]=p.useState(!1),{t:g}=vn(),m=async()=>{try{u(!0),await t(),u(!1),a()}catch(v){throw j.logError(v),u(!1),o("Something went wrong. Please try again."),v}};return s.createElement(zn,{onAfterClosed:()=>o(void 0),...r},i&&s.createElement(Un,{header:i}),s.createElement("div",{className:"ctw-items-left ctw-flex ctw-h-full ctw-flex-col ctw-space-y-2 ctw-overflow-y-auto","data-zus-telemetry-namespace":"ModalConfirmDelete"},s.createElement("span",{className:"ctw-text-left ctw-text-lg ctw-font-medium ctw-text-content-black"},g("resource.remove.heading",{resource:e})),s.createElement("span",{className:"ctw-subtext ctw-max-w-sm ctw-text-left ctw-text-content-light"},s.createElement(Va,{i18nKey:"resource.remove.body"},"This will remove"," ",s.createElement("span",{className:"ctw-font-medium"},{resourceName:n})," from this patient's ",{resource:e}," list."))),s.createElement("div",{className:"ctw-flex ctw-w-full ctw-space-x-4"},s.createElement("button",{type:"button",onClick:a,className:"ctw-btn-default ctw-flex-1","data-zus-telemetry-click":"Cancel button"},"Cancel"),s.createElement("button",{type:"button",disabled:l,onClick:m,className:"ctw-btn-primary ctw-save-button ctw-flex-1","data-zus-telemetry-click":"Remove button"},l?"Removing...":"Remove",l&&s.createElement(Zn,{className:"ctw-ml-2 ctw-text-white"}))))};try{Ne.displayName="ModalConfirmDelete",Ne.__docgenInfo={description:"",displayName:"ModalConfirmDelete",props:{resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"string"}},resourceName:{defaultValue:null,description:"",name:"resourceName",required:!0,type:{name:"string"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => Promise<void>"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}}}}}catch{}const ir={INF:{fullName:"Certain Infectious and Parasitic Diseases",shortName:"Infectious and Parasitic Diseases"},NEO:{fullName:"Neoplasms",shortName:"Neoplasms"},BLD:{fullName:"Diseases of the Blood and Blood Forming Organs and Certain Disorders Involving the Immune Mechanism",shortName:"Blood Diseases"},END:{fullName:"Endocrine, Nutritional and Metabolic Diseases",shortName:"Endocrine, Nutritional and Metabolic"},MBD:{fullName:"Mental, Behavioral and Neurodevelopmental Disorders",shortName:"Mental and Behavioral"},NVS:{fullName:"Diseases of the Nervous System",shortName:"Nervous System"},EYE:{fullName:"Diseases of the Eye and Adnexa",shortName:"Eye and Adnexa"},EAR:{fullName:"Diseases of the Ear and Mastoid Process",shortName:"Ear and Mastoid Process"},CIR:{fullName:"Diseases of the Circulatory System",shortName:"Circulatory System"},RSP:{fullName:"Diseases of the Respiratory System",shortName:"Respiratory System"},DIG:{fullName:"Diseases of the Digestive System",shortName:"Digestive System"},SKN:{fullName:"Diseases of the Skin and Subcutaneous Tissue",shortName:"Skin and Subcutaneous Tissue"},MUS:{fullName:"Diseases of the Musculoskeletal System and Connective Tissue",shortName:"Musculoskeletal System"},GEN:{fullName:"Diseases of the Genitourinary System",shortName:"Genitourinary System"},PRG:{fullName:"Pregnancy, Childbirth and the Puerperium",shortName:"Pregnancy & Childbirth"},PNL:{fullName:"Certain Conditions Originating in the Perinatal Period",shortName:"Perinatal Conditions"},MAL:{fullName:"Congenital Malformations, Deformations and Chromosomal Abnormalities",shortName:"Malformations and Chromosomal Abnormalities"},SYM:{fullName:"Symptoms, Signs and Abnormal Clinical and Laboratory Findings",shortName:"Clinical Findings"},INJ:{fullName:"Injury, Poisoning and Certain Other Consequences of External Causes",shortName:"External Causes Injury"},EXT:{fullName:"External Causes of Morbidity",shortName:"External Morbidity"},FAC:{fullName:"Factors Influencing Health Status and Contact with Health Services",shortName:"Health Status Influences"},XXX:{fullName:"Unacceptable principal diagnosis (inpatient data) or first-listed diagnosis (outpatient data)",shortName:"Unacceptable principal diagnosis"}};class Ut extends hn{constructor(){super(...arguments);at(this,"kind","Condition")}get abatement(){var t,a,r;return this.resource.abatementAge?(t=this.resource.abatementAge.value)==null?void 0:t.toString():this.resource.abatementDateTime?F(this.resource.abatementDateTime):this.resource.abatementPeriod?F(this.resource.abatementPeriod.start):this.resource.abatementRange?F((r=(a=this.resource.abatementRange.low)==null?void 0:a.value)==null?void 0:r.toString()):this.resource.abatementString}get active(){var a;const t=me((a=this.resource.clinicalStatus)==null?void 0:a.coding,{system:ve});return t!=null&&t.code?["active","recurrence","relapse"].includes(t.code):!1}get asserter(){var t;return(t=this.resource.asserter)==null?void 0:t.display}get bodySites(){var t;return((t=this.resource.bodySite)==null?void 0:t.map(a=>k(a)))||[]}get categories(){var t;return((t=this.resource.category)==null?void 0:t.map(a=>k(a)))||[]}get ccsChapter(){var a;const t=this.ccsChapterCode;if(t)return(a=ir[t])==null?void 0:a.shortName}get ccsChapterCode(){var t,a;return(a=(t=A(rt,this.resource.code))==null?void 0:t.code)==null?void 0:a.slice(0,3)}get ccsGrouping(){var t;return(t=A(rt,this.resource.code))==null?void 0:t.display}get clinicalStatus(){return k(this.resource.clinicalStatus)}get clinicalStatusCode(){var t,a;return(a=me((t=this.resource.clinicalStatus)==null?void 0:t.coding,{system:ve}))==null?void 0:a.code}get codings(){return this.resource.code}get display(){var t;return((t=st(ge,this.resource.code))==null?void 0:t.display)??k(this.resource.code)}get encounter(){var t;return(t=this.resource.encounter)==null?void 0:t.display}get evidences(){var t;return((t=this.resource.evidence)==null?void 0:t.map(a=>{var r;return k((r=a.code)==null?void 0:r[0])}))||[]}get icd10Code(){var t;return(t=A(Z,this.resource.code))==null?void 0:t.code}get icd10System(){var t;return(t=A(Z,this.resource.code))==null?void 0:t.system}get icd10Display(){var t;return(t=A(Z,this.resource.code))==null?void 0:t.display}get isDeleted(){return this.verificationStatusCode==="entered-in-error"}get knownCodings(){const t=qt(ge.map(r=>r.checkForEnrichment?bn(r.system,this.resource.code):A(r.system,this.resource.code)));return Hn(t,(r,i)=>r.system===i.system)}knownCodingsMatch(t){return jn(this.knownCodings,t.knownCodings,(a,r)=>a.code===r.code&&a.system===r.system).length>0}get notes(){var t;return((t=this.resource.note)==null?void 0:t.map(a=>a.text))||[]}get onset(){var t,a,r;return this.resource.onsetAge?(t=this.resource.onsetAge.value)==null?void 0:t.toString():this.resource.onsetDateTime?F(this.resource.onsetDateTime):this.resource.onsetPeriod?F(this.resource.onsetPeriod.start):this.resource.onsetRange?F((r=(a=this.resource.onsetRange.low)==null?void 0:a.value)==null?void 0:r.toString()):wn(this.resource.onsetString)}get patient(){const t=Cn("Patient",this.resource.contained,this.includedResources,this.resource.subject.reference);if(t)return new En(t,this.includedResources)}get preferredCoding(){return st(ge,this.resource.code)}get recordedDate(){return F(this.resource.recordedDate)}get recorded(){return F(this.resource.recordedDate)}get recorder(){var t;return(t=this.resource.recorder)==null?void 0:t.display}get severity(){return k(this.resource.severity)}get snomedCoding(){return A($,this.resource.code)}get snomedCode(){var t;return(t=A($,this.resource.code))==null?void 0:t.code}get snomedDisplay(){var t;return(t=A($,this.resource.code))==null?void 0:t.display}get snomedSystem(){var t;return(t=A($,this.resource.code))==null?void 0:t.system}get stages(){var t;return((t=this.resource.stage)==null?void 0:t.map(a=>{const r=k(a.summary),i=k(a.type);return`Summary: ${r}, Type: ${i}`}))||[]}get displayStatus(){function t(i){switch(i){case"active":case"recurrence":case"relapse":return"Active";case"inactive":case"remission":case"resolved":return"Inactive";default:return""}}function a(i){switch(i){case"confirmed":return"confirmed";case"unconfirmed":case"provisional":case"differential":return"unconfirmed";case"refuted":return"refuted";case"entered-in-error":return"entered-in-error";default:return""}}if(this.isSummaryResource)return t(this.clinicalStatusCode)||"Unknown";switch(a(this.verificationStatusCode)+t(this.clinicalStatusCode).toLowerCase()){case"unconfirmedactive":return"Pending";case"unconfirmedinactive":case"refutedactive":return"Unknown";case"confirmedinactive":return"Inactive";case"confirmedactive":return"Active";case"refutedinactive":return"Refuted";case"entered-in-error":return"Entered in Error";default:return"Unknown"}}get subjectID(){var a;const[,t]=((a=this.resource.subject.reference)==null?void 0:a.split("/"))||[];return t||""}get verificationStatus(){return k(this.resource.verificationStatus)}get verificationStatusCode(){var t,a;return(a=me((t=this.resource.verificationStatus)==null?void 0:t.coding,{system:je}))==null?void 0:a.code}}const or=["Active","Inactive","Entered in Error","Pending","Refuted","Unknown"],lr=["Active","Inactive","Unknown"],ge=[{system:$,checkForEnrichment:!0},{system:Z,checkForEnrichment:!0},{system:$},{system:Z},{system:Nn},{system:_n},{system:Dn}];function cr(e){const n={resourceType:"Condition",subject:{type:"Patient",reference:`Patient/${e}`},...Ft("Active")};return Mt(n)}function zt(){return St(Be,[],Nt(async(e,n)=>{try{const{bundle:t,resources:a}=await Pn("Condition",e,{patientUPID:n.UPID});return Zt(Yt(a,t))}catch(t){throw j.logError(t,`Failed fetching conditions for patient: ${n.UPID}`)}},"req.patient_conditions"))}function ur(){return St($e,[],Nt(async(e,n)=>{try{const{bundle:t,resources:a}=await qn("Condition",e,{_revinclude:"Basic:subject",patientUPID:n.UPID});return Zt(Yt(a,t))}catch(t){throw j.logError(t,`Failed fetching conditions outside for patient: ${n.UPID}`)}},"req.other_provider_conditions"))}function Ht(){const[e,n]=p.useState([]),t=zt(),a=ur();p.useEffect(()=>{const l=t.data??[],u=mr(a.data??[],l,!0);n(u)},[t.data,a.data]);const r=t.isLoading||a.isLoading,i=t.isError||a.isError,o=t.isFetching||a.isFetching;return{isLoading:r,isError:i,isFetching:o,data:e}}function Yt(e,n){const t=Sn(n);return e.map(a=>new Ut(a,void 0,t.get(a.id??"")))}function Zt(e){return Ln(e.filter(n=>{var t;return((t=n.resource.asserter)==null?void 0:t.type)!=="Patient"}),["resource.recordedDate","display"],["desc"])}const dr=async(e,n)=>{if(!e.id)throw new Error("Tried to edit a resource that hasn't been created yet.");const t=xt(e);if(t.verificationStatus={coding:[{code:"entered-in-error",system:je}]},delete t.clinicalStatus,(await Le(t,n)).id)j.reportActionSuccess("delete_condition");else throw j.reportActionFailure("delete_condition"),new Error(`Failed to edit resource with id of ${e.id}`);await G.invalidateQueries([Be])},mr=(e,n,t)=>e.filter(a=>a.isArchived&&!t||["FAC","XXX"].includes(a.ccsChapterCode??"")?!1:!n.some(r=>{const i=a.resource.recordedDate,o=r.resource.recordedDate,l=a.knownCodingsMatch(r),u=r.verificationStatus==="entered-in-error",g=!i||o&&i<=o,m=a.clinicalStatus===r.clinicalStatus;return l&&!u&&(g||m)}));function Gt(){var r;const{t:e}=le(),{openDrawer:n}=Ue(),a=((r=ze().data)==null?void 0:r.id)??"";return i=>{const o=new Ut(i?Mt(i.resource):cr(a));n({component:l=>s.createElement(He,{title:e("resource.add",{resource:e("glossary:condition_one")}),schema:sr,action:Dt(jt)(o,a),data:Pe({condition:o}),...l})})}}function Wt(){var r;const{t:e}=le(),{openDrawer:n}=Ue(),a=((r=ze().data)==null?void 0:r.id)??"";return i=>{n({component:o=>s.createElement(He,{title:e("resource.edit",{resource:e("glossary:condition_one")}),header:s.createElement(Ce,{condition:i}),schema:rr,action:Dt(jt)(i,a),data:Se({condition:i}),...o})})}}function Kt(){const{t:e}=le(),{openModal:n}=xn(),{getRequestContext:t}=K();return(a,r)=>{const i=a.display??e("resource.unamed",{resource:e("glossary:condition_one")});n({component:o=>s.createElement(Ne,{resource:e("glossary:condition_one"),resourceName:i,onDelete:async()=>{const l=await t();await dr(a.resource,l),r==null||r(a)},...o})})}}const pr=[{title:"Name",widthPercent:30,minWidth:320,render:e=>s.createElement("div",null,s.createElement("div",{className:"group-hover:ctw-underline"},e.display),s.createElement("div",{className:"ctw-pc-chapter"},e.ccsChapter))},{title:"Status",render:e=>s.createElement("div",{className:"ctw-pc-status-container"},s.createElement("div",{className:I("ctw-pc-status-dot",fr(e.displayStatus))},"â€¢"),s.createElement("div",null,e.displayStatus),s.createElement("div",{className:"ctw-pc-status-and-extra"},s.createElement("div",null,"Last Updated:"," ",qt([e.recordedDate,e.recorder?`(${e.recorder})`:""]).join(" ")))),widthPercent:30,minWidth:128},{title:"Details",widthPercent:40,minWidth:132,render:e=>{const n=e.isSummaryResource?"Earliest known onset:":"Onset:";return s.createElement("div",{className:"ctw-pc-onset-notes"},e.onset&&s.createElement("div",null,n," ",e.onset),s.createElement("div",{className:"ctw-pc-notes"},e.notes.join(" ")))}}];function fr(e){switch(e){case"Active":return"ctw-text-success-main";case"Pending":return"ctw-text-caution-main";default:return"ctw-text-content-lighter"}}const se=({notes:e})=>s.createElement("div",{className:"ctw-flex ctw-flex-col ctw-space-y-4"},e.map((n,t)=>s.createElement("div",{key:n+t},s.createElement("div",null,n))));try{se.displayName="NotesList",se.__docgenInfo={description:"",displayName:"NotesList",props:{notes:{defaultValue:null,description:"",name:"notes",required:!0,type:{name:"string[]"}}}}}catch{}function _e(e){return Wn({resourceType:"Condition",model:e,queryKey:On,valuesToDedupeOn:vr,getSearchParams:yr,getHistoryEntry:gr})}function yr(e){const n=e.knownCodings.map(a=>`${a.system}|${a.code}`),t={_include:["Condition:patient","Condition:encounter"],"_include:iterate":"Patient:organization"};return n.length>0?t.code=n.join(","):t._id=e.id,t}function gr(e){var t,a;const n=[{label:"Recorder",value:e.recorder},{label:"Clinical Status",value:be(e.clinicalStatus)},{label:"Verification Status",value:be(e.verificationStatus)},{label:"Recorded Date",value:e.recordedDate},{label:"Category",value:it(e.categories[0])},{label:"Note",value:e.notes.length!==0&&s.createElement(se,{notes:e.notes})},{label:"Code",value:s.createElement(Qn,{codings:e.knownCodings})},{label:"Onset Date",value:e.onset},{label:"Abatement Date",value:e.abatement},{label:"Encounter",value:e.encounter}];return{id:e.id,date:e.recordedDate,versionId:e.versionId,title:it(e.categories[0]),subtitle:(a=(t=e.patient)==null?void 0:t.organization)==null?void 0:a.name,details:n}}const vr=e=>[e.recorder,e.clinicalStatus,e.verificationStatus,e.recordedDate,e.notes,e.categories[0],e.onset,e.abatement,e.encounter,e.knownCodings.map(n=>[n.system,n.code])];try{_e.displayName="useConditionHistory",_e.__docgenInfo={description:"",displayName:"useConditionHistory",props:{kind:{defaultValue:null,description:"",name:"kind",required:!0,type:{name:'"Condition"'}},abatement:{defaultValue:null,description:"",name:"abatement",required:!0,type:{name:"string | undefined"}},active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean"}},asserter:{defaultValue:null,description:"",name:"asserter",required:!0,type:{name:"string | undefined"}},bodySites:{defaultValue:null,description:"",name:"bodySites",required:!0,type:{name:"string[]"}},categories:{defaultValue:null,description:"",name:"categories",required:!0,type:{name:"string[]"}},ccsChapter:{defaultValue:null,description:"",name:"ccsChapter",required:!0,type:{name:"string | undefined"}},ccsChapterCode:{defaultValue:null,description:"",name:"ccsChapterCode",required:!0,type:{name:"string | undefined"}},ccsGrouping:{defaultValue:null,description:"",name:"ccsGrouping",required:!0,type:{name:"string | undefined"}},clinicalStatus:{defaultValue:null,description:"",name:"clinicalStatus",required:!0,type:{name:"string"}},clinicalStatusCode:{defaultValue:null,description:"",name:"clinicalStatusCode",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"active"'},{value:'"inactive"'},{value:'"recurrence"'},{value:'"relapse"'},{value:'"remission"'},{value:'"resolved"'}]}},codings:{defaultValue:null,description:"",name:"codings",required:!0,type:{name:"CodeableConcept | undefined"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string | undefined"}},encounter:{defaultValue:null,description:"",name:"encounter",required:!0,type:{name:"string | undefined"}},evidences:{defaultValue:null,description:"",name:"evidences",required:!0,type:{name:"string[]"}},icd10Code:{defaultValue:null,description:"",name:"icd10Code",required:!0,type:{name:"string | undefined"}},icd10System:{defaultValue:null,description:"",name:"icd10System",required:!0,type:{name:"string | undefined"}},icd10Display:{defaultValue:null,description:"",name:"icd10Display",required:!0,type:{name:"string | undefined"}},isDeleted:{defaultValue:null,description:"",name:"isDeleted",required:!0,type:{name:"boolean"}},knownCodings:{defaultValue:null,description:"",name:"knownCodings",required:!0,type:{name:"Coding[]"}},knownCodingsMatch:{defaultValue:null,description:"",name:"knownCodingsMatch",required:!0,type:{name:"(condition: ConditionModel) => boolean"}},notes:{defaultValue:null,description:"",name:"notes",required:!0,type:{name:"string[]"}},onset:{defaultValue:null,description:"",name:"onset",required:!0,type:{name:"string | undefined"}},patient:{defaultValue:null,description:"",name:"patient",required:!0,type:{name:"PatientModel | undefined"}},preferredCoding:{defaultValue:null,description:"",name:"preferredCoding",required:!0,type:{name:"Coding | undefined"}},recordedDate:{defaultValue:null,description:"",name:"recordedDate",required:!0,type:{name:"string | undefined"}},recorded:{defaultValue:null,description:"",name:"recorded",required:!0,type:{name:"string | undefined"}},recorder:{defaultValue:null,description:"",name:"recorder",required:!0,type:{name:"string | undefined"}},severity:{defaultValue:null,description:"",name:"severity",required:!0,type:{name:"string"}},snomedCoding:{defaultValue:null,description:"",name:"snomedCoding",required:!0,type:{name:"Coding | undefined"}},snomedCode:{defaultValue:null,description:"",name:"snomedCode",required:!0,type:{name:"string | undefined"}},snomedDisplay:{defaultValue:null,description:"",name:"snomedDisplay",required:!0,type:{name:"string | undefined"}},snomedSystem:{defaultValue:null,description:"",name:"snomedSystem",required:!0,type:{name:"string | undefined"}},stages:{defaultValue:null,description:"",name:"stages",required:!0,type:{name:"string[]"}},displayStatus:{defaultValue:null,description:"",name:"displayStatus",required:!0,type:{name:"enum",value:[{value:'"Unknown"'},{value:'"Active"'},{value:'"Pending"'},{value:'"Inactive"'},{value:'"Refuted"'},{value:'"Entered in Error"'}]}},subjectID:{defaultValue:null,description:"",name:"subjectID",required:!0,type:{name:"string"}},verificationStatus:{defaultValue:null,description:"",name:"verificationStatus",required:!0,type:{name:"string"}},verificationStatusCode:{defaultValue:null,description:"",name:"verificationStatusCode",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"entered-in-error"'},{value:'"unconfirmed"'},{value:'"provisional"'},{value:'"differential"'},{value:'"confirmed"'},{value:'"refuted"'}]}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Condition"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},key:{defaultValue:null,description:"",name:"key",required:!0,type:{name:"string"}},versionId:{defaultValue:null,description:"",name:"versionId",required:!0,type:{name:"string"}},isArchived:{defaultValue:null,description:"",name:"isArchived",required:!0,type:{name:"boolean"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},isEnriched:{defaultValue:null,description:"",name:"isEnriched",required:!0,type:{name:"() => boolean"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}const De=({canEdit:e})=>{const n=Wt(),t=Kt();return Yn({header:a=>a.display,subHeader:a=>a.ccsChapter,getSourceDocument:!0,readOnly:!e,onEdit:n,onRemove:t,details:a=>{var r,i;return[{label:"Recorder",value:a.recorder},{label:"Recorded Date",value:a.recordedDate},{label:"Provider Organization",value:(i=(r=a.patient)==null?void 0:r.organization)==null?void 0:i.name},{label:"Status",value:be(a.displayStatus)},{label:"Onset Date",value:a.onset},{label:"Abatement Date",value:a.abatement},{label:"Note",value:a.notes.length!==0&&s.createElement(se,{notes:a.notes})}]},getHistory:_e})};try{De.displayName="useConditionDetailsDrawer",De.__docgenInfo={description:"",displayName:"useConditionDetailsDrawer",props:{canEdit:{defaultValue:null,description:"",name:"canEdit",required:!0,type:{name:"boolean"}},canRemove:{defaultValue:null,description:"",name:"canRemove",required:!0,type:{name:"boolean"}}}}}catch{}const Qt={key:"isArchived",type:"tag",belowDivider:!0,display:({listView:e})=>e?"show dismissed records":"dismissed records",icon:Xn,toggleDisplay:"hide dismissed records",toggleIcon:Jn};function hr(e,n){const t=[];return n&&t.push(Qt),t.push({key:"displayStatus",type:"checkbox",icon:ea,display:"Status",values:[...n?lr:or]},{key:"ccsChapter",type:"checkbox",icon:ta,display:"Category",values:vt(e,"ccsChapter")}),t}const mt={displayStatus:{key:"displayStatus",selected:["Active","Pending","Unknown"],type:"checkbox"}},qe={display:"Last Updated (New to Old)",sorts:[{key:"recordedDate",dir:"desc",isDate:!0}]},br=[{display:"Name (A-Z)",sorts:[{key:"display",dir:"asc"}]},{display:"Name (Z-A)",sorts:[{key:"display",dir:"desc"}]},{display:"Category (A-Z)",sorts:[{key:"ccsChapter",dir:"asc"}]},{display:"Category (Z-A)",sorts:[{key:"ccsChapter",dir:"desc"}]},{display:"Status (A-Z)",sorts:[{key:"displayStatus",dir:"asc"}]},{display:"Status (Z-A)",sorts:[{key:"displayStatus",dir:"desc"}]},{display:"Last Updated (Old to New)",sorts:[{key:"recordedDate",dir:"asc",isDate:!0}]},qe];const ie=({action:e,className:n,query:t,outside:a=!1,readOnly:r=!1,rowActions:i,emptyMessage:o="There are no condition records available.",isLoading:l})=>{const u=De({canRemove:!r&&!a,canEdit:!r&&!a}),{data:g,setFilters:m,setSort:v}=ht({defaultFilters:mt,defaultSort:qe,records:t.data});return s.createElement("div",{className:I(n,"ctw-scrollable-pass-through-height")},s.createElement(bt,{filterOptions:{onChange:m,defaultState:mt,filters:hr(t.data??[],a)},sortOptions:{defaultSort:qe,options:br,onChange:v},action:e}),s.createElement(wt,{className:"ctw-patient-conditions",columns:pr,data:g,emptyMessage:o,isLoading:l||t.isLoading,onRowClick:u,rowActions:i}))};try{ie.displayName="PatientConditionsBase",ie.__docgenInfo={description:"",displayName:"PatientConditionsBase",props:{action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"{ data?: ConditionModel[] | undefined; isLoading: boolean; }"}},outside:{defaultValue:{value:"false"},description:"",name:"outside",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"ComponentType<{ record: ConditionModel; }>"}},emptyMessage:{defaultValue:{value:"There are no condition records available."},description:"",name:"emptyMessage",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}}}}}catch{}const wr=({className:e,readOnly:n=!1})=>{const t=zt(),a=Gt(),{t:r}=le(),i=!n&&s.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>a()},r("resource.add",{resource:r("glossary:condition_one")}));return s.createElement(ie,{action:i,className:I(e),query:t,readOnly:n,rowActions:n?void 0:Cr})},xe=L(wr,"PatientConditions"),Cr=({record:e})=>{const n=Wt(),t=Kt();return s.createElement("div",{className:"ctw-flex ctw-space-x-2"},!e.isDeleted&&s.createElement("button",{type:"button",className:"ctw-btn-default",onClick:()=>t(e)},"Remove"),s.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>n(e)},"Edit"))};try{xe.displayName="PatientConditions",xe.__docgenInfo={description:"",displayName:"PatientConditions",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const Er=()=>{const e=Ot();return s.createElement(s.Fragment,null,e.lastRetrievedAt&&s.createElement("div",{className:"ctw-text-sm ctw-italic ctw-text-black"},"Last Retrieved ",e.lastRetrievedAt))},Oe=({hideRequestRecords:e=!1})=>s.createElement("div",{className:"ctw-flex ctw-space-x-1"},s.createElement(Er,null),!e&&s.createElement(Fe,null));try{Oe.displayName="PatientHistoryAction",Oe.__docgenInfo={description:"",displayName:"PatientHistoryAction",props:{hideRequestRecords:{defaultValue:{value:"false"},description:"",name:"hideRequestRecords",required:!1,type:{name:"boolean"}}}}}catch{}async function Pr(e,n,t,a){if(!n.id)throw new Error(`Tried to ${a} a resource that hasn't been created yet.`);if(!n.isSummaryResource)throw new Error(`Tried to ${a} a patient record resource.`);const r={resourceType:"Basic",id:e==null?void 0:e.id,code:{coding:[{system:Vn,code:"adminact",display:"Administrative Activity"},{system:An,code:a}]},subject:{reference:`${n.resourceType}/${n.id}`,type:n.resourceType},author:await Pt(t)};if((await Le(r,t)).id)j.reportActionFailure(a);else throw j.reportActionFailure(a),new Error(`Failed to ${a} resource with id of ${n.id}`)}async function Xt(e,n,t){const a=e.getBasicResourceByAction("archive")||e.getBasicResourceByAction("unarchive"),r=e.isArchived?"unarchive":"archive";await Pr(a,e,n,r),t&&await G.invalidateQueries(t)}const Sr=({className:e,hideRequestRecords:n=!1,readOnly:t=!1})=>{const a=Ht(),r=Ot(),i=r.lastRetrievedAt===void 0&&a.data.length===0,o=r.lastRetrievedAt?void 0:s.createElement("div",{className:"ctw-flex ctw-space-x-1"},s.createElement("div",null,"Retrieve patient clinical history."),s.createElement(Fe,null)),l=s.createElement(Oe,{hideRequestRecords:n||i||t});return s.createElement(ie,{outside:!0,action:l,className:e,query:a,readOnly:t,rowActions:t?void 0:Nr,emptyMessage:o,isLoading:r.isLoading})},Ve=L(Sr,"PatientConditions"),Nr=({record:e})=>{const n=Gt(),{getRequestContext:t}=K();return s.createElement("div",{className:"ctw-flex ctw-space-x-2"},s.createElement("button",{type:"button",className:"ctw-btn-default",onClick:async()=>{await Xt(e,await t(),[$e])}},e.isArchived?"Restore":"Dismiss"),s.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>n(e)},"Add"))};try{Ve.displayName="PatientConditionsOutside",Ve.__docgenInfo={description:"",displayName:"PatientConditionsOutside",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},hideRequestRecords:{defaultValue:{value:"false"},description:"",name:"hideRequestRecords",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const W=({className:e,color:n,text:t})=>{const a={primary:"ctw-bg-primary-light ctw-text-primary-main",gray:"ctw-bg-bg-light ctw-text-content-light",info:"ctw-bg-info-light ctw-text-info-main",success:"ctw-bg-success-light ctw-text-success-main",caution:"ctw-bg-caution-light ctw-text-caution-main",error:"ctw-bg-error-light ctw-text-error-main",notification:"ctw-bg-notification-light ctw-text-notification-main"}[n];return s.createElement("span",{className:I(e,a,"ctw-inline-flex ctw-rounded-full ctw-px-2 ctw-text-xs ctw-font-semibold ctw-leading-5")},t)};try{W.displayName="Badge",W.__docgenInfo={description:"",displayName:"Badge",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"enum",value:[{value:'"error"'},{value:'"primary"'},{value:'"gray"'},{value:'"info"'},{value:'"success"'},{value:'"caution"'},{value:'"notification"'}]}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}}}catch{}const _r=()=>{const n=Ht().data.filter(t=>t.displayStatus==="Active");return n.length>0?s.createElement(W,{color:"notification",text:n.length.toString(),className:"ctw-h-5"}):null};function Jt(e,n){const t=vt(e,"lastPrescriber"),a=[];return n&&a.push(Qt),t.length>1&&a.push({key:"lastPrescriber",type:"checkbox",icon:na,values:t,display:"prescriber"}),a}const pt={},Dr=[{title:"Medication Name",render:e=>s.createElement(s.Fragment,null,s.createElement("div",{className:"ctw-font-medium group-hover:ctw-underline"},e.display),s.createElement("div",{className:"ctw-font-light"},e.dosage)),widthPercent:35,minWidth:270},{title:"Dispensed",render:e=>s.createElement("div",{className:"ctw-stacked-concat"},e.quantity&&s.createElement("div",null,e.quantity),e.refills&&s.createElement("div",null,e.refills," refills")),widthPercent:14},{title:"Last Filled",render:e=>e.lastFillDate&&s.createElement("div",null,s.createElement("span",{className:"ctw-stacked-only"},"Last Filled: "),e.lastFillDate),widthPercent:18},{title:"Last Prescribed",render:e=>{const{lastPrescribedDate:n,lastPrescriber:t}=e;return!n&&!t?null:s.createElement("div",{className:"ctw-stacked-concat"},s.createElement("span",{className:"ctw-stacked-only"},"Last Prescribed: "),n&&s.createElement("div",null,n),t&&s.createElement("div",null,t))},widthPercent:18,minWidth:"90px"}],en=[{display:"Name (A-Z)",sorts:[{key:"display",dir:"asc"}]},{display:"Name (Z-A)",sorts:[{key:"display",dir:"desc"}]},{display:"Last Fill Date (Oldest to Newest)",sorts:[{key:"lastFillDate",dir:"desc",isDate:!0}]},{display:"Last Fill Date (Newest to Oldest)",sorts:[{key:"lastFillDate",dir:"asc",isDate:!0}]},{display:"Last Prescribed (Old to New)",sorts:[{key:"lastPrescribedDate",isDate:!0,dir:"desc"},{key:"lastPrescriber",dir:"asc"}]},{display:"Last Prescribed (New to Old)",sorts:[{key:"lastPrescribedDate",isDate:!0,dir:"asc"},{key:"lastPrescriber",dir:"asc"}]}],ft=en[0];const oe=({action:e,className:n,query:t,rowActions:a,filters:r,defaultView:i,views:o,onOpenHistoryDrawer:l})=>{const u=ra(),{data:g,setFilters:m,setSort:v,setViewOption:h}=ht({defaultView:i,defaultFilters:pt,defaultSort:ft,records:t.data});function f(P){l==null||l(),u(P)}return s.createElement("div",{className:I("ctw-scrollable-pass-through-height",n)},s.createElement(bt,{viewOptions:i&&o?{onChange:h,defaultView:i,options:o}:void 0,filterOptions:{onChange:m,defaultState:pt,filters:r},sortOptions:{defaultSort:ft,options:en,onChange:v},action:e}),s.createElement(wt,{className:"ctw-patient-medications",columns:Dr,data:g,emptyMessage:"There are no medication records available.",isLoading:t.isLoading,onRowClick:f,rowActions:a}))};try{oe.displayName="PatientMedicationsBase",oe.__docgenInfo={description:"",displayName:"PatientMedicationsBase",props:{action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"{ data?: MedicationStatementModel[] | undefined; isLoading: boolean; }"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"ComponentType<{ record: MedicationStatementModel; }>"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterItem[]"}},defaultView:{defaultValue:null,description:"",name:"defaultView",required:!1,type:{name:"ViewOption"}},views:{defaultValue:null,description:"",name:"views",required:!1,type:{name:"ViewOption[]"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}const qr=["active","unknown","on-hold","intended","not-taken"],xr=["completed","stopped","entered-in-error"],tn=[{display:"Current",filters:[{key:"status",type:"checkbox",selected:qr}]},{display:"Past",filters:[{key:"status",type:"checkbox",selected:xr}]},{display:"All",filters:[]}],Or=tn[0],Vr=({className:e,onOpenHistoryDrawer:n})=>{const{builderMedications:t,isLoading:a}=Ye();return s.createElement(oe,{className:e,query:{data:t,isLoading:a},filters:Jt(t,!1),views:tn,defaultView:Or,onOpenHistoryDrawer:n})},Ae=L(Vr,"PatientMedications");try{Ae.displayName="PatientMedications",Ae.__docgenInfo={description:"",displayName:"PatientMedications",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}const Ar=async(e,n)=>{const{authToken:t,contextBuilderId:a}=e;return(await(await fetch(`${Rn(e.env)}?display=${n}`,{headers:{Authorization:`Bearer ${t}`,...a&&{"Zus-Account":a}}})).json()).data},Re=({defaultCoding:e,readonly:n,...t})=>{const{getRequestContext:a}=K(),[r,i]=p.useState(!1),[o,l]=p.useState(),u=async g=>{i(!0);const m=await a(),v=await Ar(m,g);v&&l(v.map(h=>({value:h,label:h.display}))),i(!1)};return s.createElement(gt,{options:o||[],isLoading:r,name:`${t.name}`,defaultSearchTerm:t.defaultValue,readonly:n,onSearchChange:u,defaultValue:e})};try{Re.displayName="MedicationsAutoComplete",Re.__docgenInfo={description:"",displayName:"MedicationsAutoComplete",props:{defaultCoding:{defaultValue:null,description:"",name:"defaultCoding",required:!1,type:{name:"Coding"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const Te=e=>[{label:"Subject",value:e.subjectID,field:"subjectID",hidden:!0},{label:"Date Asserted",value:he(new Date,"P"),field:"dateAsserted",hidden:!0},{label:"Medication",field:"medication",value:e.display,render:(n,t)=>s.createElement(Re,{readonly:n,...t,defaultCoding:e.rxNormCodeableConcept})},{label:"Latest Status",value:Gn(e.status),field:"status"},{label:"Instructions",value:e.dosage,field:"dosage"}],Rr=N.object({subjectID:N.string({required_error:"Patient must be specified."}),dateAsserted:N.date({required_error:"Date asserted is required."}),medication:N.object({code:N.string({required_error:"Please choose a medication."}),display:N.string().optional(),system:N.string().optional()}),dosage:N.string().optional(),status:N.enum(["active","completed","entered-in-error","intended","not-taken","on-hold","stopped","unknown"])});try{Te.displayName="getMedicationFormData",Te.__docgenInfo={description:"",displayName:"getMedicationFormData",props:{kind:{defaultValue:null,description:"",name:"kind",required:!0,type:{name:'"MedicationStatement"'}},builderPatientRxNormStatus:{defaultValue:null,description:"",name:"builderPatientRxNormStatus",required:!1,type:{name:"Record<string, string>"}},basedOn:{defaultValue:null,description:"",name:"basedOn",required:!0,type:{name:"string | undefined"}},category:{defaultValue:null,description:"",name:"category",required:!0,type:{name:"string"}},context:{defaultValue:null,description:"",name:"context",required:!0,type:{name:"string | undefined"}},dateAsserted:{defaultValue:null,description:"",name:"dateAsserted",required:!0,type:{name:"string | undefined"}},derivedFrom:{defaultValue:null,description:"",name:"derivedFrom",required:!0,type:{name:"string[]"}},aggregatedFrom:{defaultValue:null,description:"",name:"aggregatedFrom",required:!0,type:{name:"Reference[]"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string"}},dosage:{defaultValue:null,description:"",name:"dosage",required:!0,type:{name:"string | undefined"}},effectiveStart:{defaultValue:null,description:"",name:"effectiveStart",required:!0,type:{name:"string | undefined"}},identifier:{defaultValue:null,description:"",name:"identifier",required:!0,type:{name:"string | undefined"}},informationSource:{defaultValue:null,description:"",name:"informationSource",required:!0,type:{name:"Reference | undefined"}},medicationReference:{defaultValue:null,description:"",name:"medicationReference",required:!0,type:{name:"string | undefined"}},notesDisplay:{defaultValue:null,description:"",name:"notesDisplay",required:!0,type:{name:"string[]"}},partOf:{defaultValue:null,description:"",name:"partOf",required:!0,type:{name:"string | undefined"}},patientStatus:{defaultValue:null,description:"",name:"patientStatus",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},rxNorm:{defaultValue:null,description:"",name:"rxNorm",required:!0,type:{name:"string | undefined"}},rxNormCodeableConcept:{defaultValue:null,description:'Get RxNorm coding with "display" defaulting to this Med-Statement label.',name:"rxNormCodeableConcept",required:!0,type:{name:"{ display: string; code?: string | undefined; _code?: Element | undefined; _display?: Element | undefined; system?: string | undefined; _system?: Element | undefined; ... 6 more ...; _id?: Element | undefined; }"}},reason:{defaultValue:null,description:"",name:"reason",required:!0,type:{name:"string | undefined"}},reasonReference:{defaultValue:null,description:"",name:"reasonReference",required:!0,type:{name:"Reference[] | undefined"}},isInactive:{defaultValue:null,description:"",name:"isInactive",required:!0,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"active"'},{value:'"entered-in-error"'},{value:'"unknown"'},{value:'"completed"'},{value:'"intended"'},{value:'"stopped"'},{value:'"on-hold"'},{value:'"not-taken"'}]}},displayStatus:{defaultValue:null,description:"",name:"displayStatus",required:!0,type:{name:"string"}},statusReason:{defaultValue:null,description:"",name:"statusReason",required:!0,type:{name:"string | undefined"}},subject:{defaultValue:null,description:"",name:"subject",required:!0,type:{name:"Reference"}},subjectID:{defaultValue:null,description:"",name:"subjectID",required:!0,type:{name:"string"}},patient:{defaultValue:null,description:"",name:"patient",required:!0,type:{name:"PatientModel | undefined"}},lastFillDate:{defaultValue:null,description:"",name:"lastFillDate",required:!0,type:{name:"string | undefined"}},quantity:{defaultValue:null,description:"",name:"quantity",required:!0,type:{name:"string | undefined"}},daysSupply:{defaultValue:null,description:"",name:"daysSupply",required:!0,type:{name:"string | undefined"}},refills:{defaultValue:null,description:"",name:"refills",required:!0,type:{name:"string | undefined"}},lastPrescriber:{defaultValue:null,description:"",name:"lastPrescriber",required:!0,type:{name:"string | undefined"}},lastPrescribedDate:{defaultValue:null,description:"",name:"lastPrescribedDate",required:!0,type:{name:"string | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"MedicationStatement"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},key:{defaultValue:null,description:"",name:"key",required:!0,type:{name:"string"}},versionId:{defaultValue:null,description:"",name:"versionId",required:!0,type:{name:"string"}},isArchived:{defaultValue:null,description:"",name:"isArchived",required:!0,type:{name:"boolean"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},isEnriched:{defaultValue:null,description:"",name:"isEnriched",required:!0,type:{name:"() => boolean"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}const Tr=[kn,_t,Mn],Ir=async(e,n)=>{const t={resourceType:"MedicationStatement",status:e.status,dateAsserted:ae(e.dateAsserted),subject:{type:"Patient",reference:`Patient/${e.subjectID}`},medicationCodeableConcept:{text:e.medication.display,coding:[{system:Tn,code:e.medication.code}]},...e.dosage&&{dosage:[{text:e.dosage}]}},a=new we(t),r=await In(a.resource,await n());return await Promise.all(Tr.map(async i=>G.invalidateQueries([i]))),r};function kr(){const{openDrawer:e}=Ue();return n=>{e({component:t=>s.createElement(Mr,{medication:n.resource,...t})})}}const Mr=({isOpen:e,onClose:n,medication:t})=>{var l,u;const a=ze(),r={reference:`Patient/${(l=a.data)==null?void 0:l.id}`,display:(u=a.data)==null?void 0:u.display};let i;t?i=new we({...t,subject:r,dateAsserted:he(new Date,"yyyy-MM-dd")}):i=new we({resourceType:"MedicationStatement",status:"active",subject:r,dateAsserted:he(new Date,"yyyy-MM-dd")});const o=Te(i);return s.createElement(He,{title:"Add Medication",action:Ir,data:o,schema:Rr,isOpen:e,onClose:n})},Fr=({className:e,onAddToRecord:n,readOnly:t=!1,onOpenHistoryDrawer:a})=>{const{otherProviderMedications:r,isLoading:i}=Ye();return s.createElement(oe,{className:e,query:{data:r,isLoading:i},filters:Jt(r,!0),rowActions:t?void 0:jr({onAddToRecord:n}),onOpenHistoryDrawer:a})},Ie=L(Fr,"PatientMedicationsOutside"),jr=({onAddToRecord:e})=>n=>s.createElement(Lr,{...n,onAddToRecord:e}),Lr=({record:e,onAddToRecord:n})=>{const t=kr(),{getRequestContext:a}=K();return s.createElement("div",{className:"ctw-flex ctw-space-x-2"},s.createElement("button",{type:"button",className:"ctw-btn-default",onClick:async()=>{await Xt(e,await a(),[_t])}},e.isArchived?"Restore":"Dismiss"),s.createElement("button",{type:"button",className:"ctw-btn-primary ctw-ml-1 ctw-capitalize","data-zus-telemetry-click":"Add to record","data-testid":"add-to-record",onClick:()=>{n?n(e):t(e)}},"Add"))};try{Ie.displayName="PatientMedicationsOutside",Ie.__docgenInfo={description:"",displayName:"PatientMedicationsOutside",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}},onAddToRecord:{defaultValue:null,description:"",name:"onAddToRecord",required:!1,type:{name:"((record: MedicationStatementModel) => void)"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const Br=()=>{const{otherProviderMedications:e=[]}=Ye(),n=e.filter(t=>!(t.isArchived||t.isInactive));return n.length>0?s.createElement(W,{color:"notification",text:n.length.toString(),className:"ctw-h-5"}):null},$r=({className:e})=>{const n=Vt();return s.createElement(sa,{query:n,className:I(e,"ctw-scrollable-pass-through-height")})},ke=L($r,"PatientObservationsOutside");try{ke.displayName="PatientObservationsOutside",ke.__docgenInfo={description:"",displayName:"PatientObservationsOutside",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}}}}}catch{}const Ur=()=>{const{data:e=[]}=Vt();return e.length?s.createElement(W,{color:"notification",text:e.length.toString(),className:"ctw-h-5"}):null},zr={allergies:(e={})=>({key:"allergies",getPanelClassName:()=>"ctw-pt-5",display:()=>"allergies",render:()=>s.createElement(Kn,{...e})}),"care-team":(e={})=>({key:"care-team",display:()=>"care team",render:()=>s.createElement(oa,{...e})}),conditions:(e={})=>({key:"conditions",display:()=>re.t("zap.tabs.conditions"),render:()=>s.createElement(xe,{...e})}),"conditions-outside":(e={})=>({key:"conditions-outside",display:()=>s.createElement("div",{className:"ctw-space-x-2"},s.createElement("span",{className:"ctw-capitalize"},re.t("zap.tabs.conditionsOutside")),s.createElement(_r,null)),render:()=>s.createElement(Ve,{...e})}),documents:(e={})=>({key:"documents",getPanelClassName:()=>"ctw-pt-5",display:()=>"documents",render:()=>s.createElement(la,{...e})}),immunizations:(e={})=>({key:"immunizations",getPanelClassName:()=>"ctw-pt-5",display:()=>"immunizations",render:()=>s.createElement(ca,{...e})}),medications:(e={})=>({key:"medications",display:()=>"medication list",render:()=>s.createElement(Ae,{...e})}),"medications-outside":(e={})=>({key:"medications-outside",display:()=>s.createElement("div",{className:"ctw-space-x-2"},s.createElement("span",{className:"ctw-capitalize"},re.t("zap.tabs.medicationsOutside")),s.createElement(Br,null)),render:()=>s.createElement(Ie,{...e})}),observations:(e={})=>({key:"observations",display:()=>"observations",render:()=>s.createElement(ia,{...e})}),"observations-outside":(e={})=>({key:"observations-outside",display:()=>s.createElement(s.Fragment,null,s.createElement("span",{className:"ctw-pr-2 ctw-capitalize"},"outside observations"),s.createElement(Ur,null)),render:()=>s.createElement(ke,{...e})}),timelines:(e={})=>({key:"timelines",getPanelClassName:()=>"ctw-pt-5",display:()=>"encounter timeline",render:()=>s.createElement(ua,{...e})})};function Hr({children:e,className:n,forceHorizontalTabs:t=!1,content:a,onChange:r,topRightContent:i}){const[o,l]=p.useState(0),u=p.useRef(null),g=da(u),m=!t&&g.sm,[v,h]=p.useState({0:!0}),f=C=>{l(C),h({...v,[C]:!0}),r&&r(C)},P=!!i;return s.createElement("div",{ref:u,className:I(n,"ctw-tab-group ctw-scrollable-pass-through-height ctw-w-full")},s.createElement(z.Group,{selectedIndex:o,onChange:f},m&&s.createElement(s.Fragment,null,s.createElement(dn,{btnClassName:"ctw-tab ctw-capitalize",optionsClassName:"ctw-tab-list ctw-capitalize",onChange:f,items:a}),P&&s.createElement("div",{className:"ctw-ml-auto ctw-flex ctw-items-center ctw-px-1.5"},i)),s.createElement(z.List,{className:I("ctw-border-default ctw-flex ctw-justify-start ctw-border-b ctw-border-divider-light",{"ctw-hidden":m})},a.map(({key:C,display:d})=>s.createElement(z,{key:C,"data-zus-telemetry-click":`Tab[${C}]`,onClick:Yr,className:({selected:w})=>I(["ctw-tab ctw-text-sm ctw-capitalize","hover:after:ctw-bg-content-black","focus-visible:ctw-outline-primary-dark focus-visible:after:ctw-bg-transparent"],{"after:ctw-bg-content-black":w,"ctw-text-content-light":!w})},d())),P&&s.createElement("div",{className:"ctw-ml-auto ctw-flex ctw-items-center ctw-px-1.5"},i)),e,s.createElement(z.Panels,{className:"ctw-scrollable-pass-through-height"},a.map((C,d)=>{var w;return s.createElement(z.Panel,{key:C.key,className:I("ctw-scrollable-pass-through-height",(w=C.getPanelClassName)==null?void 0:w.call(C,g.sm)),unmount:!1},v[d]&&C.render(g.sm))}))))}const Me=L(Hr,"TabGroup",!1);function Yr(){typeof document<"u"&&requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})}try{Me.displayName="TabGroup",Me.__docgenInfo={description:"",displayName:"TabGroup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"TabGroupItem[]"}},forceHorizontalTabs:{defaultValue:null,description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((index: number) => void)"}},topRightContent:{defaultValue:null,description:"",name:"topRightContent",required:!1,type:{name:"ReactNode"}}}}}catch{}const Zr=({forceHorizontalTabs:e=!1,allergiesProps:n,careTeamProps:t,conditionsProps:a,conditionsOutsideProps:r,documentsProps:i,immunizationsProps:o,medicationsProps:l,medicationsOutsideProps:u,observationsProps:g,observationsOutsideProps:m,timelineProps:v,resources:h,hideTitle:f=!1,title:P="Outside Records",removeBranding:C=!1,removeRequestRecords:d=!1})=>{const w={allergies:n,"care-team":t,conditions:a,"conditions-outside":r,documents:i,immunizations:o,medications:l,"medications-outside":u,observations:g,"observations-outside":m,timelines:v},b=h.map(E=>{const S=w[E]??{};return zr[E](S)});return s.createElement("div",{className:"ctw-zus-aggregated-profile ctw-scrollable-pass-through-height"},!f&&s.createElement(aa,{className:"ctw-border-b-2 ctw-border-l-0 ctw-border-r-0 ctw-border-t-0 ctw-border-solid ctw-border-divider-light"},s.createElement("h3",{className:"ctw-m-0 ctw-inline-block ctw-p-0 ctw-pb-3 ctw-text-lg ctw-font-medium"},P," ",!C&&s.createElement("span",{className:"ctw-text-sm ctw-font-light ctw-italic ctw-text-content-light"},"Powered by"," ",s.createElement("img",{src:un,alt:"Zus",className:"-ctw-mb-1.5"})))),s.createElement(Me,{content:b,forceHorizontalTabs:e,topRightContent:d?void 0:s.createElement(Fe,null)}))},yt=L(Zr,"ZusAggregatedProfile");try{yt.displayName="ZusAggregatedProfile",yt.__docgenInfo={description:`ZusAggregatedProfile allows developers to utilize most of the components
available in this library as a single customizable component with tabbed
navigation. Simply pass an array with the names of the desired resources
to include _(see below)_.

It's possible to set a custom title for the ZusAggregatedProfile component,
making it a single component which can be used to create a handful of
different widgets within an app.

\`\`\`
export const ZusMedsWidget = <ZusAggregatedProfile
  title="Medications"
  resources={["medications", "medications-outside"]}
/>

export const ZusProblemsWidget = <ZusAggregatedProfile
  title="Problems"
  resources={["allergies", "conditions", "conditions-outside"]}
/>
\`\`\`
The complete set of available resources in the ZusAggregatedProfile are
"allergies",
"care-team",
"conditions",
"conditions-outside",
"documents",
"immunizations",
"medications",
"medications-outside",
"observations",
"observations-outside",
"timelines".`,displayName:"ZusAggregatedProfile",props:{resources:{defaultValue:null,description:"",name:"resources",required:!0,type:{name:"ZAPResourceName[]"}},forceHorizontalTabs:{defaultValue:{value:"false"},description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},title:{defaultValue:{value:"Outside Records"},description:"",name:"title",required:!1,type:{name:"string"}},hideTitle:{defaultValue:{value:"false"},description:"",name:"hideTitle",required:!1,type:{name:"boolean"}},removeBranding:{defaultValue:{value:"false"},description:"",name:"removeBranding",required:!1,type:{name:"boolean"}},removeRequestRecords:{defaultValue:{value:"false"},description:"",name:"removeRequestRecords",required:!1,type:{name:"boolean"}},allergiesProps:{defaultValue:null,description:"",name:"allergiesProps",required:!1,type:{name:"PatientAllergiesProps"}},careTeamProps:{defaultValue:null,description:"",name:"careTeamProps",required:!1,type:{name:"PatientCareTeamProps"}},conditionsProps:{defaultValue:null,description:"",name:"conditionsProps",required:!1,type:{name:"PatientConditionsProps"}},conditionsOutsideProps:{defaultValue:null,description:"",name:"conditionsOutsideProps",required:!1,type:{name:"PatientConditionsOutsideProps"}},documentsProps:{defaultValue:null,description:"",name:"documentsProps",required:!1,type:{name:"PatientDocumentProps"}},immunizationsProps:{defaultValue:null,description:"",name:"immunizationsProps",required:!1,type:{name:"PatientImmunizationsProps"}},medicationsProps:{defaultValue:null,description:"",name:"medicationsProps",required:!1,type:{name:"PatientMedicationsProps"}},medicationsOutsideProps:{defaultValue:null,description:"",name:"medicationsOutsideProps",required:!1,type:{name:"PatientMedicationsOutsideProps"}},observationsProps:{defaultValue:null,description:"",name:"observationsProps",required:!1,type:{name:"PatientObservationsProps"}},observationsOutsideProps:{defaultValue:null,description:"",name:"observationsOutsideProps",required:!1,type:{name:"PatientObservationsOutsideProps"}},timelineProps:{defaultValue:null,description:"",name:"timelineProps",required:!1,type:{name:"PatientTimelineProps"}}}}}catch{}export{yt as Z};
