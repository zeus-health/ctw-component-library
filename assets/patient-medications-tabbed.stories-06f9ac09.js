import{r as p,R as e}from"./index-6f814c40.js";import{s as I,p as F,o as B}from"./requests-49fa3c56.js";import{c as x}from"./index-74f03c09.js";import{O as L,B as C}from"./other-provider-meds-table-6dcaa4e7.js";import{u as U,a as S,M as W}from"./use-medications-73bcc1a4.js";import{h as G,g as Q,y as Y,i as H,e as Z}from"./uniqBy-e047f966.js";import{s as j}from"./sort-256e6c7b.js";import{P as J}from"./provider-meds-table-2c79cf34.js";import{S as K}from"./ctw-box-696ec253.js";import{T as X,F as $}from"./tab-group-5521b9f6.js";/* empty css                            */import"./_baseToString-7c0e3f59.js";import"./_castSlice-1b11acd9.js";import{d as ee}from"./sortBy-7fc077e6.js";import"./_baseClone-3ae78372.js";import"./sortBy-6a38afc6.js";import"./_equalByTag-eda72788.js";import"./_baseForOwn-03e9c2f3.js";import"./_createSet-6ff8e1d4.js";import{C as re,S as te}from"./patient-helper-33893341.js";import{P as oe}from"./patient-provider-2630b162.js";import"./_commonjsHelpers-042e6b4d.js";import"./medication-05c7aacc.js";import"./collapsible-data-list-details-4a1431c5.js";import"./error-boundary-10989807.js";import"./pickBy-f6e57f40.js";import"./_basePickBy-b5376a08.js";import"./_baseIsEqual-7d59e24c.js";import"./request-5d5ec5f4.js";import"./uniqWith-79e2a4b4.js";import"./uniq-8676ca12.js";import"./urls-3154a27f.js";import"./drawer-de3413cf.js";import"./index-6de6b113.js";import"./spinner-66aa4ba7.js";import"./isEmpty-258cb052.js";import"./combobox-field-4c1b809a.js";import"./debounce-5029c56d.js";import"./toNumber-d7ce3bd9.js";import"./table-96b9b58e.js";import"./isString-933c0e0c.js";import"./badge-8ef10589.js";import"./data-list-254aa0b0.js";import"./mapValues-c63fd567.js";import"./isPlainObject-243fdc78.js";import"./dropdown-menu-5261273a.js";import"./extends-98964cd2.js";import"./_commonjs-dynamic-modules-302442b1.js";function h({className:r,onAfterOpenHistoryDrawer:t,onOpenHistoryDrawer:s}){const[c,o]=p.useState([]),f=U(),{builderMedications:l,isLoading:y}=S();function a(n){H(s)&&s(),f({medication:n}),setTimeout(()=>{H(t)&&t()},0)}return p.useEffect(()=>{l&&o(j(l.filter(n=>n.displayStatus!=="Active"),G(Q("display"),Y),"asc"))},[l]),e.createElement(e.Fragment,null,e.createElement(W,{className:r,medicationStatements:c,isLoading:y,handleRowClick:a}))}try{h.displayName="ProviderInactiveMedicationsTable",h.__docgenInfo={description:`Displays a table of inactive medication records. These are builder-owned medications
that have a status other than "active". These are not to be confused with "dismissed" or "archived"
medication records pulled from the network of other providers.`,displayName:"ProviderInactiveMedicationsTable",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}},onAfterOpenHistoryDrawer:{defaultValue:null,description:"",name:"onAfterOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}const ae=r=>[{key:"medication-list",getPanelClassName:t=>t?"ctw-mt-0":"ctw-mt-2",display:()=>"medication list",render:()=>e.createElement(J,{onOpenHistoryDrawer:r.onOpenHistoryDrawer,onAfterOpenHistoryDrawer:r.onAfterOpenHistoryDrawer})},{key:"inactive-provider-records",getPanelClassName:t=>t?"ctw-mt-0":"ctw-mt-2",display:()=>"inactive",render:()=>e.createElement(h,{onOpenHistoryDrawer:r.onOpenHistoryDrawer,onAfterOpenHistoryDrawer:r.onAfterOpenHistoryDrawer})},{key:"other-provider-records",display:()=>e.createElement(e.Fragment,null,e.createElement("span",{className:"ctw-pr-2 ctw-capitalize"},"other provider records"),e.createElement(C,null)),render:()=>e.createElement(v,{...r})}];function v({handleAddToRecord:r,hideAddToRecord:t,onOpenHistoryDrawer:s,onAfterOpenHistoryDrawer:c}){const[o,f]=p.useState({}),[l,y]=p.useState([]),{otherProviderMedications:a,isLoading:n}=S();p.useEffect(()=>{if(!n&&a){const i=a.filter(z=>{var w,g;return Array.isArray((w=o.providers)==null?void 0:w.selected)&&((g=o.providers)!=null&&g.selected.length)?o.providers.selected.includes(z.lastPrescriber):!0});y(i)}},[o,a,n]);const q="dismissed"in o,V="inactive"in o,T=a?Z(a.map(i=>i.lastPrescriber).filter(i=>typeof i=="string")):[],k=ee([{key:"dismissed",type:"tag",icon:"eye",display:({active:i})=>i?"dismissed records":"show dismissed records"},!a||T.length<2?null:{key:"providers",type:"checkbox",icon:"clipboard",values:T,display:"prescriber"}]);return e.createElement(e.Fragment,null,e.createElement($,{filters:k,handleOnChange:f}),e.createElement(L,{records:l,handleAddToRecord:r,hideAddToRecord:t,showDismissed:q,showInactive:V,onOpenHistoryDrawer:s,onAfterOpenHistoryDrawer:c}))}function b({className:r,forceHorizontalTabs:t=!1,...s}){const c=ae(s);return e.createElement(K,{className:x("ctw-patient-medications ctw-space-y-3 ctw-bg-white",r)},e.createElement(X,{content:c,forceHorizontalTabs:t,className:r}))}try{v.displayName="OtherProviderMedsTableTab",v.__docgenInfo={description:"",displayName:"OtherProviderMedsTableTab",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},forceHorizontalTabs:{defaultValue:null,description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},hideAddToRecord:{defaultValue:null,description:"",name:"hideAddToRecord",required:!1,type:{name:"boolean"}},handleAddToRecord:{defaultValue:null,description:"",name:"handleAddToRecord",required:!1,type:{name:"((m: MedicationStatementModel) => void)"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}},onAfterOpenHistoryDrawer:{defaultValue:null,description:"",name:"onAfterOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}try{b.displayName="PatientMedicationsTabbed",b.__docgenInfo={description:`This component is a tabbed view of patient medications from the current
provider, other providers and historical. When rendered in a small breakpoint
the component will change from horizontal tabs to a vertical dropdown menu.
If this is undesired, you may set the property \`forceHorizontalTabs\` to true
and the tabs will remain visible and horizontal. The \`forceHorizontalTabs\`
prop will not prevent the medication tables from switching to their stacked
view when viewed on smaller screens.`,displayName:"PatientMedicationsTabbed",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},forceHorizontalTabs:{defaultValue:{value:"false"},description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},hideAddToRecord:{defaultValue:null,description:"",name:"hideAddToRecord",required:!1,type:{name:"boolean"}},handleAddToRecord:{defaultValue:null,description:"",name:"handleAddToRecord",required:!1,type:{name:"((m: MedicationStatementModel) => void)"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}},onAfterOpenHistoryDrawer:{defaultValue:null,description:"",name:"onAfterOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}const $e={tags:["autodocs"],component:b,decorators:[(r,{args:t})=>e.createElement(re,{env:"dev",authToken:"ey.12345",builderId:"12345"},e.createElement(oe,{patientID:"007",systemURL:te},e.createElement(r,{args:t})))],args:{hideAddToRecord:void 0,forceHorizontalTabs:void 0,onAfterOpenHistoryDrawer:void 0,onOpenHistoryDrawer:void 0}},d={...I({providerMedications:F,otherProviderMedications:B})},m={...d,args:{forceHorizontalTabs:!0}},u={...d,args:{hideAddToRecord:!0}};var M,_,A;d.parameters={...d.parameters,docs:{...(M=d.parameters)==null?void 0:M.docs,source:{originalSource:`{
  ...setupMedicationMocks({
    providerMedications,
    otherProviderMedications
  })
}`,...(A=(_=d.parameters)==null?void 0:_.docs)==null?void 0:A.source}}};var O,D,E;m.parameters={...m.parameters,docs:{...(O=m.parameters)==null?void 0:O.docs,source:{originalSource:`{
  ...Basic,
  args: {
    forceHorizontalTabs: true
  }
}`,...(E=(D=m.parameters)==null?void 0:D.docs)==null?void 0:E.source}}};var P,R,N;u.parameters={...u.parameters,docs:{...(P=u.parameters)==null?void 0:P.docs,source:{originalSource:`{
  ...Basic,
  args: {
    hideAddToRecord: true
  }
}`,...(N=(R=u.parameters)==null?void 0:R.docs)==null?void 0:N.source}}};const er=["Basic","ForceHorizontalTabs","HideAddToRecord"];export{d as Basic,m as ForceHorizontalTabs,u as HideAddToRecord,er as __namedExportsOrder,$e as default};
//# sourceMappingURL=patient-medications-tabbed.stories-06f9ac09.js.map
