import{r as f,R as a}from"./index-6f814c40.js";import{C as ot,Z as Zt}from"./zus-291ac14e.js";import{m as P,E as Wt,D as Re,u as Me}from"./use-patient-history-e67bfa35.js";import{C as ut,g as Gt,a as Kt,c as dt,d as Qt,u as Yt,o as Xt,b as Jt,e as en,f as ct,M as U}from"./sort-adc6c19d.js";import{L as tn,M as nn,N as pt,O as le,P as z,R as mt,U as an,V as rn,u as j,W as ee,X as sn,T as ce,Y as L,A as Ge,I as ln,Z as on,$ as un,a0 as dn,a1 as cn,a2 as pn,w as ft,a3 as yt,a4 as Te,a5 as mn,x as pe,n as fn,a6 as yn,p as gn}from"./patient-helper-095b9701.js";import{h as vn,q as gt}from"./request-5a1df4c1.js";import{M as bn,a as hn,g as wn,D as Cn}from"./resource-details-drawer-47f87491.js";import{S as En}from"./spinner-66aa4ba7.js";import{b as W,d as ke,a as qn,s as Pn,g as Vn,e as _n,u as vt,f as Nn}from"./patient-provider-ba329fe5.js";import"./_baseToString-4993715b.js";import{o as Ke,c as Sn}from"./sortBy-be5f7eb4.js";import"./_baseClone-25b1595e.js";import{d as bt}from"./sortBy-919d7262.js";import"./_equalByTag-aaf39779.js";import"./_baseForOwn-d8306f34.js";import"./_createSet-12ef9b81.js";import{c as M}from"./index-74f03c09.js";import{D as H}from"./drawer-ed34104d.js";import{D as xn}from"./collapsible-data-list-details-f7571cef.js";import{C as Qe,u as Dn,M as On,s as An,g as Rn,a as Mn}from"./medication-history-64ec2fc3.js";import{i as Tn}from"./isEqual-b08f36b0.js";import{u as kn}from"./uniqWith-f1edcb30.js";import{C as In}from"./coding-list-1d7c950f.js";import{d as me,i as Fn,t as jn}from"./values-6943c5c5.js";import{w as k,T as Ln}from"./error-boundary-5c51611a.js";import{L as ht}from"./loading-c7ff698a.js";import{f as Bn,a as zn,b as $n,c as Hn,u as wt,d as Ct,R as Et,e as qt,g as Un,h as Pt,P as Zn,i as Wn,L as Gn}from"./patient-observations-3987eb46.js";import{D as Kn,e as Qn}from"./data-list-254aa0b0.js";import{P as Yn}from"./patient-allergies-5a5eaef0.js";import{P as Xn}from"./patient-careteam-f6918531.js";import{P as Jn}from"./patient-documents-cd85871f.js";import{P as ea}from"./patient-immunizations-3d32cf4f.js";import{P as ta}from"./patient-timeline-f2c42137.js";import{u as na}from"./use-breakpoints-5154c6fc.js";import{h as Vt,c as aa,C as G,y as K,s as oe,a as Ie,$ as Q,I as _t,o as X,M as J,e as ra,j as A,O as I,T as R,u as Nt,t as ia,S as Ye,v as Xe}from"./use-watch-a9671586.js";import{s as sa}from"./use-controllable-046cc6fb.js";function la({onFocus:e}){let[t,n]=f.useState(!0);return t?a.createElement(Vt,{as:"button",type:"button",features:aa.Focusable,onFocus:r=>{r.preventDefault();let s,i=50;function l(){if(i--<=0){s&&cancelAnimationFrame(s);return}if(e()){n(!1),cancelAnimationFrame(s);return}s=requestAnimationFrame(l)}s=requestAnimationFrame(l)}}):null}var oa=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(oa||{});let ua={[0](e,t){let n=e.tabs.filter(i=>{var l;return!((l=i.current)!=null&&l.hasAttribute("disabled"))});if(t.index<0)return{...e,selectedIndex:e.tabs.indexOf(n[0])};if(t.index>e.tabs.length)return{...e,selectedIndex:e.tabs.indexOf(n[n.length-1])};let r=e.tabs.slice(0,t.index),s=[...e.tabs.slice(t.index),...r].find(i=>n.includes(i));return s?{...e,selectedIndex:e.tabs.indexOf(s)}:e},[1](e,t){var n;if(e.tabs.includes(t.tab))return e;let r=e.tabs[e.selectedIndex],s=Xe([...e.tabs,t.tab],l=>l.current),i=(n=s.indexOf(r))!=null?n:e.selectedIndex;return i===-1&&(i=e.selectedIndex),{...e,tabs:s,selectedIndex:i}},[2](e,t){return{...e,tabs:e.tabs.filter(n=>n!==t.tab)}},[3](e,t){return e.panels.includes(t.panel)?e:{...e,panels:Xe([...e.panels,t.panel],n=>n.current)}},[4](e,t){return{...e,panels:e.panels.filter(n=>n!==t.panel)}}},Fe=f.createContext(null);Fe.displayName="TabsSSRContext";function je(e){let t=f.useContext(Fe);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,je),n}return t}let Le=f.createContext(null);Le.displayName="TabsDataContext";function F(e){let t=f.useContext(Le);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,F),n}return t}let Be=f.createContext(null);Be.displayName="TabsActionsContext";function ze(e){let t=f.useContext(Be);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ze),n}return t}function da(e,t){return Nt(t.type,ua,e,t)}let ca=f.Fragment,pa=G(function(e,t){let{defaultIndex:n=0,vertical:r=!1,manual:s=!1,onChange:i,selectedIndex:l=null,...o}=e;const c=r?"vertical":"horizontal",g=s?"manual":"auto";let p=l!==null,v=K(t),[y,u]=f.useReducer(da,{selectedIndex:l??n,tabs:[],panels:[]}),C=f.useMemo(()=>({selectedIndex:y.selectedIndex}),[y.selectedIndex]),q=oe(i||(()=>{})),m=oe(y.tabs),b=f.useMemo(()=>({orientation:c,activation:g,...y}),[c,g,y]),w=oe(p?e.selectedIndex:y.selectedIndex),E=f.useMemo(()=>({registerTab(d){return u({type:1,tab:d}),()=>u({type:2,tab:d})},registerPanel(d){return u({type:3,panel:d}),()=>u({type:4,panel:d})},change(d){w.current!==d&&q.current(d),p||u({type:0,index:d})}}),[u,p]);Ie(()=>{u({type:0,index:l??n})},[l]);let _=f.useRef({tabs:[],panels:[]}),V={ref:v};return a.createElement(Fe.Provider,{value:_},a.createElement(Be.Provider,{value:E},a.createElement(Le.Provider,{value:b},b.tabs.length<=0&&a.createElement(la,{onFocus:()=>{var d,x;for(let D of m.current)if(((d=D.current)==null?void 0:d.tabIndex)===0)return(x=D.current)==null||x.focus(),!0;return!1}}),Q({ourProps:V,theirProps:o,slot:C,defaultTag:ca,name:"Tabs"}))))}),ma="div",fa=G(function(e,t){let{orientation:n,selectedIndex:r}=F("Tab.List"),s=K(t);return Q({ourProps:{ref:s,role:"tablist","aria-orientation":n},theirProps:e,slot:{selectedIndex:r},defaultTag:ma,name:"Tabs.List"})}),ya="button",ga=G(function(e,t){var n,r;let s=`headlessui-tabs-tab-${_t()}`,{orientation:i,activation:l,selectedIndex:o,tabs:c,panels:g}=F("Tab"),p=ze("Tab"),v=F("Tab"),y=je("Tab"),u=f.useRef(null),C=K(u,t);Ie(()=>p.registerTab(u),[p,u]);let q=y.current.tabs.indexOf(s);q===-1&&(q=y.current.tabs.push(s)-1);let m=c.indexOf(u);m===-1&&(m=q);let b=m===o,w=X(h=>{var S;let T=h();if(T===J.Success&&l==="auto"){let ie=(S=ra(u))==null?void 0:S.activeElement,Y=v.tabs.findIndex(se=>se.current===ie);Y!==-1&&p.change(Y)}return T}),E=X(h=>{let S=c.map(T=>T.current).filter(Boolean);if(h.key===A.Space||h.key===A.Enter){h.preventDefault(),h.stopPropagation(),p.change(m);return}switch(h.key){case A.Home:case A.PageUp:return h.preventDefault(),h.stopPropagation(),w(()=>I(S,R.First));case A.End:case A.PageDown:return h.preventDefault(),h.stopPropagation(),w(()=>I(S,R.Last))}if(w(()=>Nt(i,{vertical(){return h.key===A.ArrowUp?I(S,R.Previous|R.WrapAround):h.key===A.ArrowDown?I(S,R.Next|R.WrapAround):J.Error},horizontal(){return h.key===A.ArrowLeft?I(S,R.Previous|R.WrapAround):h.key===A.ArrowRight?I(S,R.Next|R.WrapAround):J.Error}}))===J.Success)return h.preventDefault()}),_=f.useRef(!1),V=X(()=>{var h;_.current||(_.current=!0,(h=u.current)==null||h.focus(),p.change(m),ia(()=>{_.current=!1}))}),d=X(h=>{h.preventDefault()}),x=f.useMemo(()=>({selected:b}),[b]),D=e,O={ref:C,onKeyDown:E,onMouseDown:d,onClick:V,id:s,role:"tab",type:sa(e,u),"aria-controls":(r=(n=g[m])==null?void 0:n.current)==null?void 0:r.id,"aria-selected":b,tabIndex:b?0:-1};return Q({ourProps:O,theirProps:D,slot:x,defaultTag:ya,name:"Tabs.Tab"})}),va="div",ba=G(function(e,t){let{selectedIndex:n}=F("Tab.Panels"),r=K(t),s=f.useMemo(()=>({selectedIndex:n}),[n]);return Q({ourProps:{ref:r},theirProps:e,slot:s,defaultTag:va,name:"Tabs.Panels"})}),ha="div",wa=Ye.RenderStrategy|Ye.Static,Ca=G(function(e,t){var n,r,s,i;let{selectedIndex:l,tabs:o,panels:c}=F("Tab.Panel"),g=ze("Tab.Panel"),p=je("Tab.Panel"),v=`headlessui-tabs-panel-${_t()}`,y=f.useRef(null),u=K(y,t);Ie(()=>g.registerPanel(y),[g,y]);let C=p.current.panels.indexOf(v);C===-1&&(C=p.current.panels.push(v)-1);let q=c.indexOf(y);q===-1&&(q=C);let m=q===l,b=f.useMemo(()=>({selected:m}),[m]),w=e,E={ref:u,id:v,role:"tabpanel","aria-labelledby":(r=(n=o[q])==null?void 0:n.current)==null?void 0:r.id,tabIndex:m?0:-1};return!m&&((s=e.unmount)==null||s)&&!((i=e.static)!=null&&i)?a.createElement(Vt,{as:"span",...E}):Q({ourProps:E,theirProps:w,slot:b,defaultTag:ha,features:wa,visible:m,name:"Tabs.Panel"})}),B=Object.assign(ga,{Group:pa,List:fa,Panels:ba,Panel:Ca});function Ea(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function $e(e,t){if(e==null)return{};var n=Ea(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var qa={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Pa=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Je(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(qa[n[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("-->");return{type:"comment",comment:r!==-1?e.slice(4,r):""}}for(var s=new RegExp(Pa),i=null;(i=s.exec(e))!==null;)if(i[0].trim())if(i[1]){var l=i[1].trim(),o=[l,""];l.indexOf("=")>-1&&(o=l.split("=")),t.attrs[o[0]]=o[1],s.lastIndex--}else i[2]&&(t.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return t}var Va=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,_a=/^\s*$/,Na=Object.create(null);function St(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(n){var r=[];for(var s in n)r.push(s+'="'+n[s]+'"');return r.length?" "+r.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(St,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var Sa={parse:function(e,t){t||(t={}),t.components||(t.components=Na);var n,r=[],s=[],i=-1,l=!1;if(e.indexOf("<")!==0){var o=e.indexOf("<");r.push({type:"text",content:o===-1?e:e.substring(0,o)})}return e.replace(Va,function(c,g){if(l){if(c!=="</"+n.name+">")return;l=!1}var p,v=c.charAt(1)!=="/",y=c.startsWith("<!--"),u=g+c.length,C=e.charAt(u);if(y){var q=Je(c);return i<0?(r.push(q),r):((p=s[i]).children.push(q),r)}if(v&&(i++,(n=Je(c)).type==="tag"&&t.components[n.name]&&(n.type="component",l=!0),n.voidElement||l||!C||C==="<"||n.children.push({type:"text",content:e.slice(u,e.indexOf("<",u))}),i===0&&r.push(n),(p=s[i-1])&&p.children.push(n),s[i]=n),(!v||n.voidElement)&&(i>-1&&(n.voidElement||n.name===c.slice(2,-1))&&(i--,n=i===-1?r:s[i]),!l&&C!=="<"&&C)){p=i===-1?r:s[i].children;var m=e.indexOf("<",u),b=e.slice(u,m===-1?void 0:m);_a.test(b)&&(b=" "),(m>-1&&i+p.length>=0||b!==" ")&&p.push({type:"text",content:b})}}),r},stringify:function(e){return e.reduce(function(t,n){return t+St("",n)},"")}},xa=["format"],Da=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?et(Object(n),!0).forEach(function(r){pt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ue(e,t){if(!e)return!1;var n=e.props?e.props.children:e.children;return t?n.length>0:!!n}function de(e){return e?e.props?e.props.children:e.children:[]}function Oa(e){return Object.prototype.toString.call(e)!=="[object Array]"?!1:e.every(function(t){return f.isValidElement(t)})}function $(e){return Array.isArray(e)?e:[e]}function Aa(e,t){var n=N({},t);return n.props=Object.assign(e.props,t.props),n}function xt(e,t){if(!e)return"";var n="",r=$(e),s=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return r.forEach(function(i,l){if(typeof i=="string")n+="".concat(i);else if(f.isValidElement(i)){var o=Object.keys(i.props).length,c=s.indexOf(i.type)>-1,g=i.props.children;if(!g&&c&&o===0)n+="<".concat(i.type,"/>");else if(!g&&(!c||o!==0))n+="<".concat(l,"></").concat(l,">");else if(i.props.i18nIsDynamicList)n+="<".concat(l,"></").concat(l,">");else if(c&&o===1&&typeof g=="string")n+="<".concat(i.type,">").concat(g,"</").concat(i.type,">");else{var p=xt(g,t);n+="<".concat(l,">").concat(p,"</").concat(l,">")}}else if(i===null)le("Trans: the passed in value is invalid - seems you passed in a null child.");else if(z(i)==="object"){var v=i.format,y=$e(i,xa),u=Object.keys(y);if(u.length===1){var C=v?"".concat(u[0],", ").concat(v):u[0];n+="{{".concat(C,"}}")}else le("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",i)}else le("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",i)}),n}function Ra(e,t,n,r,s,i){if(t==="")return[];var l=r.transKeepBasicHtmlNodesFor||[],o=t&&new RegExp(l.join("|")).test(t);if(!e&&!o)return[t];var c={};function g(m){var b=$(m);b.forEach(function(w){typeof w!="string"&&(ue(w)?g(de(w)):z(w)==="object"&&!f.isValidElement(w)&&Object.assign(c,w))})}g(e);var p=Sa.parse("<0>".concat(t,"</0>")),v=N(N({},c),s);function y(m,b,w){var E=de(m),_=C(E,b.children,w);return Oa(E)&&_.length===0?E:_}function u(m,b,w,E,_){m.dummy&&(m.children=b),w.push(f.cloneElement(m,N(N({},m.props),{},{key:E}),_?void 0:b))}function C(m,b,w){var E=$(m),_=$(b);return _.reduce(function(V,d,x){var D=d.children&&d.children[0]&&d.children[0].content&&n.services.interpolator.interpolate(d.children[0].content,v,n.language);if(d.type==="tag"){var O=E[parseInt(d.name,10)];!O&&w.length===1&&w[0][d.name]&&(O=w[0][d.name]),O||(O={});var h=Object.keys(d.attrs).length!==0?Aa({props:d.attrs},O):O,S=f.isValidElement(h),T=S&&ue(d,!0)&&!d.voidElement,ie=o&&z(h)==="object"&&h.dummy&&!S,Y=z(e)==="object"&&e!==null&&Object.hasOwnProperty.call(e,d.name);if(typeof h=="string"){var se=n.services.interpolator.interpolate(h,v,n.language);V.push(se)}else if(ue(h)||T){var Bt=y(h,d,w);u(h,Bt,V,x)}else if(ie){var zt=C(E,d.children,w);V.push(f.cloneElement(h,N(N({},h.props),{},{key:x}),zt))}else if(Number.isNaN(parseFloat(d.name)))if(Y){var $t=y(h,d,w);u(h,$t,V,x,d.voidElement)}else if(r.transSupportBasicHtmlNodes&&l.indexOf(d.name)>-1)if(d.voidElement)V.push(f.createElement(d.name,{key:"".concat(d.name,"-").concat(x)}));else{var Ht=C(E,d.children,w);V.push(f.createElement(d.name,{key:"".concat(d.name,"-").concat(x)},Ht))}else if(d.voidElement)V.push("<".concat(d.name," />"));else{var Ut=C(E,d.children,w);V.push("<".concat(d.name,">").concat(Ut,"</").concat(d.name,">"))}else if(z(h)==="object"&&!S){var Ue=d.children[0]?D:null;Ue&&V.push(Ue)}else d.children.length===1&&D?V.push(f.cloneElement(h,N(N({},h.props),{},{key:x}),D)):V.push(f.cloneElement(h,N(N({},h.props),{},{key:x})))}else if(d.type==="text"){var Ze=r.transWrapTextNodes,We=i?r.unescape(n.services.interpolator.interpolate(d.content,v,n.language)):n.services.interpolator.interpolate(d.content,v,n.language);Ze?V.push(f.createElement(Ze,{key:"".concat(d.name,"-").concat(x)},We)):V.push(We)}return V},[])}var q=C([{dummy:!0,children:e||[]}],p,$(e||[]));return de(q[0])}function Ma(e){var t=e.children,n=e.count,r=e.parent,s=e.i18nKey,i=e.context,l=e.tOptions,o=l===void 0?{}:l,c=e.values,g=e.defaults,p=e.components,v=e.ns,y=e.i18n,u=e.t,C=e.shouldUnescape,q=$e(e,Da),m=y||mt();if(!m)return tn("You will need to pass in an i18next instance by using i18nextReactModule"),t;var b=u||m.t.bind(m)||function(T){return T};i&&(o.context=i);var w=N(N({},nn()),m.options&&m.options.react),E=v||b.ns||m.options&&m.options.defaultNS;E=typeof E=="string"?[E]:E||["translation"];var _=g||xt(t,w)||w.transEmptyNodeValue||s,V=w.hashTransKey,d=s||(V?V(_):_),x=c?o.interpolation:{interpolation:N(N({},o.interpolation),{},{prefix:"#$?",suffix:"?$#"})},D=N(N(N(N({},o),{},{count:n},c),x),{},{defaultValue:_,ns:E}),O=d?b(d,D):_,h=Ra(p||t,O,m,w,D,C),S=r!==void 0?r:w.defaultTransParent;return S?f.createElement(S,q,h):h}var Ta=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tt(Object(n),!0).forEach(function(r){pt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ia(e){var t=e.children,n=e.count,r=e.parent,s=e.i18nKey,i=e.context,l=e.tOptions,o=l===void 0?{}:l,c=e.values,g=e.defaults,p=e.components,v=e.ns,y=e.i18n,u=e.t,C=e.shouldUnescape,q=$e(e,Ta),m=f.useContext(an)||{},b=m.i18n,w=m.defaultNS,E=y||b||mt(),_=u||E&&E.t.bind(E);return Ma(ka({children:t,count:n,parent:r,i18nKey:s,context:i,tOptions:o,values:c,defaults:g,components:p,ns:v||_&&_.ns||w||E&&E.options&&E.options.defaultNS,i18n:E,t:u,shouldUnescape:C},q))}const Fa=async(e,t)=>{const{authToken:n,contextBuilderId:r}=e;return(await(await vn(`${rn(e.env)}?display=${t}`,{headers:{Authorization:`Bearer ${n}`,...r&&{"Zus-Account":r}}})).json()).conditionsList},fe=({defaultCoding:e,readonly:t,...n})=>{const{getRequestContext:r}=j(),[s,i]=f.useState(!1),[l,o]=f.useState(),c=async g=>{i(!0);const p=await r(),v=await Fa(p,g);v&&o(v.map(y=>({value:y,label:y.display}))),i(!1)};return a.createElement(ot,{options:l||[],isLoading:s,name:`${n.name}`,defaultSearchTerm:n.defaultValue,readonly:t,onSearchChange:c,defaultValue:e})};try{fe.displayName="ConditionsAutoComplete",fe.__docgenInfo={description:"",displayName:"ConditionsAutoComplete",props:{defaultCoding:{defaultValue:null,description:"",name:"defaultCoding",required:!1,type:{name:"Coding"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const ye=({condition:e})=>[{label:ee.t("glossary:condition_one"),field:"condition",value:e.display,readonly:!1,render:(t,n)=>a.createElement(fe,{readonly:t,...n,defaultCoding:e.preferredCoding??{}})},...Dt(e)],ge=({condition:e})=>[{label:"id",value:e.id,field:"id",readonly:!0,hidden:!0},...Dt(e)],Dt=e=>[{label:"subject",value:e.subjectID,field:"subjectID",readonly:!0,hidden:!0},{label:"Status",value:e.displayStatus==="Unknown"?"Select One":e.displayStatus,field:"status"},{label:"Onset",value:e.onset,field:"onset"},{label:"Abatement",value:e.abatement,field:"abatement"},{label:"Note",value:e.notes,lines:3,field:"note"}],Ot=P.object({id:P.string().optional(),subjectID:P.string({required_error:"Condition subjectID must be specified."}),status:P.enum(["Active","Pending","Inactive","Refuted","Entered In Error"]),onset:P.date().max(new Date,{message:"Onset cannot be a future date."}).optional(),abatement:P.date().max(new Date,{message:"Abatement cannot be a future date."}).optional(),note:P.string().optional()}),At=(e,t)=>{e.abatement&&e.status!=="Inactive"&&t.addIssue({code:P.ZodIssueCode.custom,message:"Status must be inactive.",path:["abatement"]}),e.abatement&&e.onset&&e.abatement<e.onset&&t.addIssue({code:P.ZodIssueCode.custom,message:"Abatement date must be after onset date.",path:["abatement"]})},ja=Ot.superRefine((e,t)=>At(e,t)),La=Ot.extend({condition:P.object({code:P.string({required_error:"Please choose a condition."}),display:P.string().optional(),system:P.string().optional()})}).superRefine((e,t)=>At(e,t));try{ye.displayName="getAddConditionData",ye.__docgenInfo={description:"",displayName:"getAddConditionData",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}try{ge.displayName="getEditingPatientConditionData",ge.__docgenInfo={description:"",displayName:"getEditingPatientConditionData",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}const te=({condition:e})=>{var t;return a.createElement("div",null,a.createElement("div",{className:"ctw-text-2xl"},e.display," (",(t=e.preferredCoding)==null?void 0:t.code,")"),a.createElement("div",{className:"ctw-text-sm"},e.ccsChapter))};try{te.displayName="ConditionHeader",te.__docgenInfo={description:"",displayName:"ConditionHeader",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}const ve=({resource:e,resourceName:t,onDelete:n,onClose:r,...s})=>{const[i,l]=f.useState(),[o,c]=f.useState(!1),{t:g}=sn(),p=async()=>{try{c(!0),await n(),c(!1),r()}catch(v){throw ce.logError(v),c(!1),l("Something went wrong. Please try again."),v}};return a.createElement(bn,{onAfterClosed:()=>l(void 0),...s},i&&a.createElement(Wt,{header:i}),a.createElement("div",{className:"ctw-items-left ctw-flex ctw-h-full ctw-flex-col ctw-space-y-2 ctw-overflow-y-auto","data-zus-telemetry-namespace":"ModalConfirmDelete"},a.createElement("span",{className:"ctw-text-left ctw-text-lg ctw-font-medium ctw-text-content-black"},g("resource.remove.heading",{resource:e})),a.createElement("span",{className:"ctw-subtext ctw-max-w-sm ctw-text-left ctw-text-content-light"},a.createElement(Ia,{i18nKey:"resource.remove.body"},"This will remove"," ",a.createElement("span",{className:"ctw-font-medium"},{resourceName:t})," from this patient's ",{resource:e}," list."))),a.createElement("div",{className:"ctw-flex ctw-w-full ctw-space-x-4"},a.createElement("button",{type:"button",onClick:r,className:"ctw-btn-default ctw-flex-1","data-zus-telemetry-click":"Cancel button"},"Cancel"),a.createElement("button",{type:"button",disabled:o,onClick:p,className:"ctw-btn-primary ctw-save-button ctw-flex-1","data-zus-telemetry-click":"Remove button"},o?"Removing...":"Remove",o&&a.createElement(En,{className:"ctw-ml-2 ctw-text-white"}))))};try{ve.displayName="ModalConfirmDelete",ve.__docgenInfo={description:"",displayName:"ModalConfirmDelete",props:{resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"string"}},resourceName:{defaultValue:null,description:"",name:"resourceName",required:!0,type:{name:"string"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => Promise<void>"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}}}}}catch{}function Rt(){var s;const{t:e}=L(),{openDrawer:t}=W(),r=((s=ke().data)==null?void 0:s.id)??"";return i=>{const l=new ut(i?Gt(i.resource):Kt(r));t({component:o=>a.createElement(Re,{title:e("resource.add",{resource:e("glossary:condition_one")}),schema:La,action:bt(dt)(l,r),data:ye({condition:l}),...o})})}}function Mt(){var s;const{t:e}=L(),{openDrawer:t}=W(),r=((s=ke().data)==null?void 0:s.id)??"";return i=>{t({component:l=>a.createElement(Re,{title:e("resource.edit",{resource:e("glossary:condition_one")}),header:a.createElement(te,{condition:i}),schema:ja,action:bt(dt)(i,r),data:ge({condition:i}),...l})})}}function Ba(){const{t:e}=L(),{openModal:t}=qn(),{getRequestContext:n}=j();return r=>{const s=r.display??e("resource.unamed",{resource:e("glossary:condition_one")});t({component:i=>a.createElement(ve,{resource:e("glossary:condition_one"),resourceName:s,onDelete:async()=>{const l=await n();await Qt(r.resource,l)},...i})})}}const za=(e,t)=>{let n=[];const r=e.map(i=>new ut(i,t)),s=Ke(r,["resource.recordedDate","hasEnrichment"],"desc");return n=kn(s,(i,l)=>Tn(nt(i),nt(l))),Ke(n,[i=>i.resource.recordedDate??"",i=>{var l;return(l=i.resource.meta)==null?void 0:l.versionId}],["desc","desc"])},nt=e=>[e.recorder,e.clinicalStatus,e.verificationStatus,e.recordedDate,e.notes,e.categories[0],e.onset,e.abatement,e.encounter,e.knownCodings.map(t=>[t.system,t.code])],ne=({notes:e})=>a.createElement("div",{className:"ctw-flex ctw-flex-col ctw-space-y-4"},e.map((t,n)=>a.createElement("div",{key:t+n},a.createElement("div",null,t))));try{ne.displayName="NotesList",ne.__docgenInfo={description:"",displayName:"NotesList",props:{notes:{defaultValue:null,description:"",name:"notes",required:!0,type:{name:"string[]"}}}}}catch{}function be(e){var n,r;const t=[{label:"Recorder",value:e.recorder},{label:"Clinical Status",value:me(e.clinicalStatus)},{label:"Verification Status",value:me(e.verificationStatus)},{label:"Recorded Date",value:e.recordedDate},{label:"Category",value:Ge(e.categories[0])},{label:"Note",value:e.notes.length!==0&&a.createElement(ne,{notes:e.notes})},{label:"Code",value:a.createElement(In,{codings:e.knownCodings})},{label:"Onset Date",value:e.onset},{label:"Abatement Date",value:e.abatement},{label:"Encounter",value:e.encounter}];return{id:e.id,date:e.recordedDate,title:Ge(e.categories[0]),subtitle:(r=(n=e.patient)==null?void 0:n.organization)==null?void 0:r.name,data:t}}const he=e=>{var t,n;return[{label:"Recorder",value:e.recorder},{label:"Recorded Date",value:e.recordedDate},{label:"Provider Organization",value:(n=(t=e.patient)==null?void 0:t.organization)==null?void 0:n.name},{label:"Status",value:me(e.displayStatus)},{label:"Onset Date",value:e.onset},{label:"Abatement Date",value:e.abatement},{label:"Note",value:e.notes.length!==0&&a.createElement(ne,{notes:e.notes})}]};try{be.displayName="setupData",be.__docgenInfo={description:"",displayName:"setupData",props:{abatement:{defaultValue:null,description:"",name:"abatement",required:!0,type:{name:"string | undefined"}},active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean"}},asserter:{defaultValue:null,description:"",name:"asserter",required:!0,type:{name:"string | undefined"}},bodySites:{defaultValue:null,description:"",name:"bodySites",required:!0,type:{name:"string[]"}},categories:{defaultValue:null,description:"",name:"categories",required:!0,type:{name:"string[]"}},ccsChapter:{defaultValue:null,description:"",name:"ccsChapter",required:!0,type:{name:"string | undefined"}},ccsChapterCode:{defaultValue:null,description:"",name:"ccsChapterCode",required:!0,type:{name:"string | undefined"}},ccsGrouping:{defaultValue:null,description:"",name:"ccsGrouping",required:!0,type:{name:"string | undefined"}},clinicalStatus:{defaultValue:null,description:"",name:"clinicalStatus",required:!0,type:{name:"string"}},clinicalStatusCode:{defaultValue:null,description:"",name:"clinicalStatusCode",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"active"'},{value:'"inactive"'},{value:'"recurrence"'},{value:'"relapse"'},{value:'"remission"'},{value:'"resolved"'}]}},codings:{defaultValue:null,description:"",name:"codings",required:!0,type:{name:"CodeableConcept | undefined"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string | undefined"}},encounter:{defaultValue:null,description:"",name:"encounter",required:!0,type:{name:"string | undefined"}},evidences:{defaultValue:null,description:"",name:"evidences",required:!0,type:{name:"string[]"}},icd10Code:{defaultValue:null,description:"",name:"icd10Code",required:!0,type:{name:"string | undefined"}},icd10System:{defaultValue:null,description:"",name:"icd10System",required:!0,type:{name:"string | undefined"}},icd10Display:{defaultValue:null,description:"",name:"icd10Display",required:!0,type:{name:"string | undefined"}},isDeleted:{defaultValue:null,description:"",name:"isDeleted",required:!0,type:{name:"boolean"}},hasEnrichment:{defaultValue:null,description:"",name:"hasEnrichment",required:!0,type:{name:"boolean"}},knownCodings:{defaultValue:null,description:"",name:"knownCodings",required:!0,type:{name:"Coding[]"}},knownCodingsMatch:{defaultValue:null,description:"",name:"knownCodingsMatch",required:!0,type:{name:"(condition: ConditionModel) => boolean"}},notes:{defaultValue:null,description:"",name:"notes",required:!0,type:{name:"string[]"}},onset:{defaultValue:null,description:"",name:"onset",required:!0,type:{name:"string | undefined"}},patient:{defaultValue:null,description:"",name:"patient",required:!0,type:{name:"PatientModel | undefined"}},preferredCoding:{defaultValue:null,description:"",name:"preferredCoding",required:!0,type:{name:"Coding | undefined"}},recordedDate:{defaultValue:null,description:"",name:"recordedDate",required:!0,type:{name:"string | undefined"}},recorded:{defaultValue:null,description:"",name:"recorded",required:!0,type:{name:"string | undefined"}},recorder:{defaultValue:null,description:"",name:"recorder",required:!0,type:{name:"string | undefined"}},severity:{defaultValue:null,description:"",name:"severity",required:!0,type:{name:"string"}},snomedCoding:{defaultValue:null,description:"",name:"snomedCoding",required:!0,type:{name:"Coding | undefined"}},snomedCode:{defaultValue:null,description:"",name:"snomedCode",required:!0,type:{name:"string | undefined"}},snomedDisplay:{defaultValue:null,description:"",name:"snomedDisplay",required:!0,type:{name:"string | undefined"}},snomedSystem:{defaultValue:null,description:"",name:"snomedSystem",required:!0,type:{name:"string | undefined"}},stages:{defaultValue:null,description:"",name:"stages",required:!0,type:{name:"string[]"}},displayStatus:{defaultValue:null,description:"",name:"displayStatus",required:!0,type:{name:"enum",value:[{value:'"Unknown"'},{value:'"Active"'},{value:'"Pending"'},{value:'"Inactive"'},{value:'"Refuted"'},{value:'"Entered in Error"'}]}},subjectID:{defaultValue:null,description:"",name:"subjectID",required:!0,type:{name:"string"}},verificationStatus:{defaultValue:null,description:"",name:"verificationStatus",required:!0,type:{name:"string"}},verificationStatusCode:{defaultValue:null,description:"",name:"verificationStatusCode",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"entered-in-error"'},{value:'"unconfirmed"'},{value:'"provisional"'},{value:'"differential"'},{value:'"confirmed"'},{value:'"refuted"'}]}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Condition"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isArchived:{defaultValue:null,description:"",name:"isArchived",required:!0,type:{name:"boolean"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}try{he.displayName="conditionData",he.__docgenInfo={description:"",displayName:"conditionData",props:{abatement:{defaultValue:null,description:"",name:"abatement",required:!0,type:{name:"string | undefined"}},active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean"}},asserter:{defaultValue:null,description:"",name:"asserter",required:!0,type:{name:"string | undefined"}},bodySites:{defaultValue:null,description:"",name:"bodySites",required:!0,type:{name:"string[]"}},categories:{defaultValue:null,description:"",name:"categories",required:!0,type:{name:"string[]"}},ccsChapter:{defaultValue:null,description:"",name:"ccsChapter",required:!0,type:{name:"string | undefined"}},ccsChapterCode:{defaultValue:null,description:"",name:"ccsChapterCode",required:!0,type:{name:"string | undefined"}},ccsGrouping:{defaultValue:null,description:"",name:"ccsGrouping",required:!0,type:{name:"string | undefined"}},clinicalStatus:{defaultValue:null,description:"",name:"clinicalStatus",required:!0,type:{name:"string"}},clinicalStatusCode:{defaultValue:null,description:"",name:"clinicalStatusCode",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"active"'},{value:'"inactive"'},{value:'"recurrence"'},{value:'"relapse"'},{value:'"remission"'},{value:'"resolved"'}]}},codings:{defaultValue:null,description:"",name:"codings",required:!0,type:{name:"CodeableConcept | undefined"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string | undefined"}},encounter:{defaultValue:null,description:"",name:"encounter",required:!0,type:{name:"string | undefined"}},evidences:{defaultValue:null,description:"",name:"evidences",required:!0,type:{name:"string[]"}},icd10Code:{defaultValue:null,description:"",name:"icd10Code",required:!0,type:{name:"string | undefined"}},icd10System:{defaultValue:null,description:"",name:"icd10System",required:!0,type:{name:"string | undefined"}},icd10Display:{defaultValue:null,description:"",name:"icd10Display",required:!0,type:{name:"string | undefined"}},isDeleted:{defaultValue:null,description:"",name:"isDeleted",required:!0,type:{name:"boolean"}},hasEnrichment:{defaultValue:null,description:"",name:"hasEnrichment",required:!0,type:{name:"boolean"}},knownCodings:{defaultValue:null,description:"",name:"knownCodings",required:!0,type:{name:"Coding[]"}},knownCodingsMatch:{defaultValue:null,description:"",name:"knownCodingsMatch",required:!0,type:{name:"(condition: ConditionModel) => boolean"}},notes:{defaultValue:null,description:"",name:"notes",required:!0,type:{name:"string[]"}},onset:{defaultValue:null,description:"",name:"onset",required:!0,type:{name:"string | undefined"}},patient:{defaultValue:null,description:"",name:"patient",required:!0,type:{name:"PatientModel | undefined"}},preferredCoding:{defaultValue:null,description:"",name:"preferredCoding",required:!0,type:{name:"Coding | undefined"}},recordedDate:{defaultValue:null,description:"",name:"recordedDate",required:!0,type:{name:"string | undefined"}},recorded:{defaultValue:null,description:"",name:"recorded",required:!0,type:{name:"string | undefined"}},recorder:{defaultValue:null,description:"",name:"recorder",required:!0,type:{name:"string | undefined"}},severity:{defaultValue:null,description:"",name:"severity",required:!0,type:{name:"string"}},snomedCoding:{defaultValue:null,description:"",name:"snomedCoding",required:!0,type:{name:"Coding | undefined"}},snomedCode:{defaultValue:null,description:"",name:"snomedCode",required:!0,type:{name:"string | undefined"}},snomedDisplay:{defaultValue:null,description:"",name:"snomedDisplay",required:!0,type:{name:"string | undefined"}},snomedSystem:{defaultValue:null,description:"",name:"snomedSystem",required:!0,type:{name:"string | undefined"}},stages:{defaultValue:null,description:"",name:"stages",required:!0,type:{name:"string[]"}},displayStatus:{defaultValue:null,description:"",name:"displayStatus",required:!0,type:{name:"enum",value:[{value:'"Unknown"'},{value:'"Active"'},{value:'"Pending"'},{value:'"Inactive"'},{value:'"Refuted"'},{value:'"Entered in Error"'}]}},subjectID:{defaultValue:null,description:"",name:"subjectID",required:!0,type:{name:"string"}},verificationStatus:{defaultValue:null,description:"",name:"verificationStatus",required:!0,type:{name:"string"}},verificationStatusCode:{defaultValue:null,description:"",name:"verificationStatusCode",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"entered-in-error"'},{value:'"unconfirmed"'},{value:'"provisional"'},{value:'"differential"'},{value:'"confirmed"'},{value:'"refuted"'}]}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Condition"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isArchived:{defaultValue:null,description:"",name:"isArchived",required:!0,type:{name:"boolean"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}const at=10,we=k(({condition:e,onClose:t,onEdit:n})=>{const[r,s]=f.useState([]),[i,l]=f.useState([]),[o,c]=f.useState(!0),{getRequestContext:g}=j(),p=Yt(e);return f.useEffect(()=>{async function v(){if(p.data){const y=ln(p.data.bundle),u=za(p.data.conditions,y),C=await g(),q=await Pn(C,[e,...u]),m=u.map(b=>{const w=wn(q,b.id);return{...be(b),...w&&{binaryId:w}}});s(m.filter(b=>b.date)),l(m.filter(b=>!b.date)),c(!1)}}return v(),function(){s([]),l([]),c(!0)}},[e,g,p.data,n]),a.createElement("div",{className:"ctw-space-y-6","data-zus-telemetry-namespace":"ConditionsHistory"},a.createElement(te,{condition:e}),a.createElement(xn,{data:he(e),readOnly:!n,onEdit:()=>{t(),n==null||n()}}),a.createElement($a,{conditionsWithDate:r,conditionsWithoutDate:i,historyIsLoading:o}))},"ConditionsHistory"),$a=({conditionsWithDate:e,conditionsWithoutDate:t,historyIsLoading:n})=>{const r=hn(),{t:s}=L();if(e.length===0&&t.length===0&&!n)return a.createElement("div",null,"No history found.");if(n)return a.createElement(ht,{message:s("resource.history.loading",{resource:s("glossary:condition_one")})});function i(l){return l.map(o=>o.binaryId?{...o,documentButton:a.createElement(Cn,{"data-zus-telemetry-click":"DocumentButton",onClick:()=>r(o.binaryId,o.title??"Condition"),text:"Source Document"})}:o)}return a.createElement(a.Fragment,null,a.createElement(Qe,{entries:i(e),limit:at}),t.length!==0&&a.createElement("div",{className:"ctw-space-y-2"},a.createElement("div",{className:"ctw-font-medium"},"Records with no date:"),a.createElement(Qe,{entries:i(t),limit:at})))};try{we.displayName="ConditionHistory",we.__docgenInfo={description:"",displayName:"ConditionHistory",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"(() => void)"}}}}}catch{}function Ha(){const{openDrawer:e}=W(),t=Mt();return({condition:n,readOnly:r})=>{e({component:s=>a.createElement(Ce,{condition:n,onEdit:r?void 0:()=>t(n),...s})})}}function Ce({className:e,condition:t,isOpen:n,onClose:r,onEdit:s}){const{t:i}=L();return a.createElement(H,{className:e,title:i("resource.history.heading",{resource:i("glossary:condition_one")}),isOpen:n,onClose:r,showCloseFooter:!0},a.createElement(H.Body,null,a.createElement(we,{condition:t,onClose:r,onEdit:s})))}try{Ce.displayName="ConditionHistoryDrawer",Ce.__docgenInfo={description:"",displayName:"ConditionHistoryDrawer",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"(() => void)"}}}}}catch{}const Ua=[{title:"Name",widthPercent:30,minWidth:320,render:e=>a.createElement("div",null,a.createElement("div",{className:"group-hover:ctw-underline"},e.display),a.createElement("div",{className:"ctw-pc-chapter"},e.ccsChapter))},{title:"Status",render:e=>a.createElement("div",{className:"ctw-pc-status-container"},a.createElement("div",{className:M("ctw-pc-status-dot",Za(e.displayStatus))},"•"),a.createElement("div",null,e.displayStatus),a.createElement("div",{className:"ctw-pc-status-and-extra"},a.createElement("div",null,"Last Updated:"," ",Sn([e.recordedDate,e.recorder?`(${e.recorder})`:""]).join(" ")))),widthPercent:30,minWidth:128},{title:"Details",widthPercent:40,minWidth:132,render:e=>{const t=e.isSummaryResource?"Earliest known onset:":"Onset:";return a.createElement("div",{className:"ctw-pc-onset-notes"},e.onset&&a.createElement("div",null,t," ",e.onset),a.createElement("div",{className:"ctw-pc-notes"},e.notes.join(" ")))}}];function Za(e){switch(e){case"Active":return"ctw-text-success-main";case"Pending":return"ctw-text-caution-main";default:return"ctw-text-content-lighter"}}const Tt={key:"isArchived",type:"tag",belowDivider:!0,display:({listView:e})=>e?"show dismissed records":"dismissed records",icon:Bn,toggleDisplay:"hide dismissed records",toggleIcon:zn};function Wa(e,t){const n=[];return t&&n.push(Tt),n.push({key:"displayStatus",type:"checkbox",icon:$n,display:"Status",values:[...t?Xt:Jt]},{key:"ccsChapter",type:"checkbox",icon:Hn,display:"Category",values:wt(e,"ccsChapter")}),n}const rt={displayStatus:{key:"displayStatus",selected:["Active","Pending","Unknown"],type:"checkbox"}},Ee={display:"Last Updated (New to Old)",sorts:[{key:"recordedDate",dir:"desc",isDate:!0}]},Ga=[{display:"Name (A-Z)",sorts:[{key:"display",dir:"asc"}]},{display:"Name (Z-A)",sorts:[{key:"display",dir:"desc"}]},{display:"Category (A-Z)",sorts:[{key:"ccsChapter",dir:"asc"}]},{display:"Category (Z-A)",sorts:[{key:"ccsChapter",dir:"desc"}]},{display:"Status (A-Z)",sorts:[{key:"displayStatus",dir:"asc"}]},{display:"Status (Z-A)",sorts:[{key:"displayStatus",dir:"desc"}]},{display:"Last Updated (Old to New)",sorts:[{key:"recordedDate",dir:"asc",isDate:!0}]},Ee];const ae=({action:e,className:t,query:n,outside:r=!1,readOnly:s=!1,rowActions:i,emptyMessage:l="There are no condition records available.",isLoading:o})=>{const c=Ha(),{data:g,setFilters:p,setSort:v}=Ct({defaultFilters:rt,defaultSort:Ee,records:n.data});return a.createElement("div",{className:M(t,"ctw-scrollable-pass-through-height")},a.createElement(Et,{filterOptions:{onChange:p,defaultState:rt,filters:Wa(n.data??[],r)},sortOptions:{defaultSort:Ee,options:Ga,onChange:v},action:e}),a.createElement(qt,{className:"ctw-patient-conditions",columns:Ua,data:g,emptyMessage:l,isLoading:o||n.isLoading,onRowClick:y=>c({condition:y,readOnly:s}),rowActions:i}))};try{ae.displayName="PatientConditionsBase",ae.__docgenInfo={description:"",displayName:"PatientConditionsBase",props:{action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"{ data?: ConditionModel[] | undefined; isLoading: boolean; }"}},outside:{defaultValue:{value:"false"},description:"",name:"outside",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"ComponentType<{ record: ConditionModel; }>"}},emptyMessage:{defaultValue:{value:"There are no condition records available."},description:"",name:"emptyMessage",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}}}}}catch{}const Ka=({className:e,readOnly:t=!1})=>{const n=en(),r=Rt(),{t:s}=L(),i=!t&&a.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>r()},s("resource.add",{resource:s("glossary:condition_one")}));return a.createElement(ae,{action:i,className:M(e),query:n,readOnly:t,rowActions:t?void 0:Qa})},qe=k(Ka,"PatientConditions"),Qa=({record:e})=>{const t=Mt(),n=Ba();return a.createElement("div",{className:"ctw-flex ctw-space-x-2"},!e.isDeleted&&a.createElement("button",{type:"button",className:"ctw-btn-default",onClick:()=>n(e)},"Remove"),a.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>t(e)},"Edit"))};try{qe.displayName="PatientConditions",qe.__docgenInfo={description:"",displayName:"PatientConditions",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const Ya=()=>{const e=Me();return a.createElement(a.Fragment,null,e.lastRetrievedAt&&a.createElement("div",{className:"ctw-text-sm ctw-italic ctw-text-black"},"Last Retrieved ",e.lastRetrievedAt))},kt=()=>{const{openHistoryRequestDrawer:e}=Me();return a.createElement("button",{type:"button",className:"ctw-btn-clear ctw-link",onClick:e,"data-zus-telemetry-click":"Request records"},"Request Records")},Pe=({hideRequestRecords:e=!1})=>a.createElement("div",{className:"ctw-flex ctw-space-x-1"},a.createElement(Ya,null),!e&&a.createElement(kt,null));try{Pe.displayName="PatientHistoryAction",Pe.__docgenInfo={description:"",displayName:"PatientHistoryAction",props:{hideRequestRecords:{defaultValue:{value:"false"},description:"",name:"hideRequestRecords",required:!1,type:{name:"boolean"}}}}}catch{}async function Xa(e,t,n,r){if(!t.id)throw new Error(`Tried to ${r} a resource that hasn't been created yet.`);if(!t.isSummaryResource)throw new Error(`Tried to ${r} a patient record resource.`);const s={resourceType:"Basic",id:e==null?void 0:e.id,code:{coding:[{system:on,code:"adminact",display:"Administrative Activity"},{system:un,code:r}]},subject:{reference:`${t.resourceType}/${t.id}`,type:t.resourceType},author:await Vn(n)};if((await _n(s,n)).id)ce.reportActionFailure(r);else throw ce.reportActionFailure(r),new Error(`Failed to ${r} resource with id of ${t.id}`)}async function It(e,t,n){const r=e.getBasicResourceByAction("archive")||e.getBasicResourceByAction("unarchive"),s=e.isArchived?"unarchive":"archive";await Xa(r,e,t,s),n&&await gt.invalidateQueries(n)}const Ja=({className:e,hideRequestRecords:t=!1,readOnly:n=!1})=>{const r=ct(),s=Me(),i=s.lastRetrievedAt===void 0&&r.data.length===0,l=s.lastRetrievedAt?void 0:a.createElement("div",{className:"ctw-flex ctw-space-x-1"},a.createElement("div",null,"Retrieve patient clinical history."),a.createElement(kt,null)),o=a.createElement(Pe,{hideRequestRecords:t||i||n});return a.createElement(ae,{outside:!0,action:o,className:e,query:r,readOnly:n,rowActions:n?void 0:er,emptyMessage:l,isLoading:s.isLoading})},Ve=k(Ja,"PatientConditions"),er=({record:e})=>{const t=Rt(),{getRequestContext:n}=j();return a.createElement("div",{className:"ctw-flex ctw-space-x-2"},a.createElement("button",{type:"button",className:"ctw-btn-default",onClick:async()=>{await It(e,await n(),[dn])}},e.isArchived?"Restore":"Dismiss"),a.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>t(e)},"Add"))};try{Ve.displayName="PatientConditionsOutside",Ve.__docgenInfo={description:"",displayName:"PatientConditionsOutside",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},hideRequestRecords:{defaultValue:{value:"false"},description:"",name:"hideRequestRecords",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const Z=({className:e,color:t,text:n})=>{const r={primary:"ctw-bg-primary-light ctw-text-primary-main",gray:"ctw-bg-bg-light ctw-text-content-light",info:"ctw-bg-info-light ctw-text-info-main",success:"ctw-bg-success-light ctw-text-success-main",caution:"ctw-bg-caution-light ctw-text-caution-main",error:"ctw-bg-error-light ctw-text-error-main",notification:"ctw-bg-notification-light ctw-text-notification-main"}[t];return a.createElement("span",{className:M(e,r,"ctw-inline-flex ctw-rounded-full ctw-px-2 ctw-text-xs ctw-font-semibold ctw-leading-5")},n)};try{Z.displayName="Badge",Z.__docgenInfo={description:"",displayName:"Badge",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"enum",value:[{value:'"error"'},{value:'"primary"'},{value:'"gray"'},{value:'"info"'},{value:'"success"'},{value:'"caution"'},{value:'"notification"'}]}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}}}catch{}const tr=()=>{const t=ct().data.filter(n=>n.displayStatus==="Active");return t.length>0?a.createElement(Z,{color:"notification",text:t.length.toString(),className:"ctw-h-5"}):null};function Ft(e,t){const n=wt(e,"lastPrescriber"),r=[];return t&&r.push(Tt),n.length>1&&r.push({key:"lastPrescriber",type:"checkbox",icon:Un,values:n,display:"prescriber"}),r}const it={};function nr(e,t){return e?[{label:"Status",value:e.displayStatus},{label:"Last Fill Date",value:e.lastFillDate},{label:"Quantity",value:e.quantity},{label:"Days Supply",value:e.daysSupply},{label:"Refills",value:e.refills},{label:"Instructions",value:e.dosage},{label:"Prescriber",value:t},{label:"Last Prescribed Date",value:e.lastPrescribedDate},...Qn("Note",e.notesDisplay)]:[]}const _e=({medication:e,onDismissal:t,...n})=>{const{lastPrescriber:r,isLoading:s}=Dn(e==null?void 0:e.resource),i=nr(e,r);return a.createElement(H,{title:"Medication Details",...n},a.createElement(H.Body,null,a.createElement("div",{className:"ctw-space-y-5"},a.createElement("div",{className:"ctw-flex ctw-justify-between ctw-space-x-8"},a.createElement("h3",{className:"ctw-m-0 ctw-text-3xl ctw-font-light"},e==null?void 0:e.display)),s&&a.createElement(ht,null),!s&&a.createElement(Kn,{title:"Summary",data:i}),e&&a.createElement(On,{medication:e}))),a.createElement(H.Footer,null,a.createElement("div",{className:"ctw-flex ctw-justify-end ctw-space-x-2"},Fn(t)&&!(e!=null&&e.isArchived)&&a.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>{t(e),n.onClose()},"data-zus-telemetry-click":"Dismiss"},"Dismiss"),a.createElement("button",{type:"button",className:"ctw-btn-default",onClick:n.onClose,"data-zus-telemetry-click":"Close"},"Close"))))};try{_e.displayName="MedicationDrawer",_e.__docgenInfo={description:"",displayName:"MedicationDrawer",props:{medication:{defaultValue:null,description:"",name:"medication",required:!1,type:{name:"MedicationStatementModel"}},onDismissal:{defaultValue:null,description:"",name:"onDismissal",required:!1,type:{name:"((m: MedicationStatementModel) => void)"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onOpen:{defaultValue:null,description:"",name:"onOpen",required:!1,type:{name:"(() => void)"}},onAfterOpen:{defaultValue:null,description:"",name:"onAfterOpen",required:!1,type:{name:"(() => void)"}}}}}catch{}function ar(){const{openDrawer:e}=W();return({medication:t})=>{e({component:n=>a.createElement(_e,{medication:t,...n})})}}const rr=[{title:"Medication Name",render:e=>a.createElement(a.Fragment,null,a.createElement("div",{className:"ctw-font-medium group-hover:ctw-underline"},e.display),a.createElement("div",{className:"ctw-font-light"},e.dosage)),widthPercent:35,minWidth:270},{title:"Dispensed",render:e=>a.createElement("div",{className:"ctw-stacked-concat"},e.quantity&&a.createElement("div",null,e.quantity),e.refills&&a.createElement("div",null,e.refills," refills")),widthPercent:14},{title:"Last Filled",render:e=>e.lastFillDate&&a.createElement("div",null,a.createElement("span",{className:"ctw-stacked-only"},"Last Filled: "),e.lastFillDate),widthPercent:18},{title:"Last Prescribed",render:e=>{const{lastPrescribedDate:t,lastPrescriber:n}=e;return!t&&!n?null:a.createElement("div",{className:"ctw-stacked-concat"},a.createElement("span",{className:"ctw-stacked-only"},"Last Prescribed: "),t&&a.createElement("div",null,t),n&&a.createElement("div",null,n))},widthPercent:18,minWidth:"90px"}],jt=[{display:"Name (A-Z)",sorts:[{key:"display",dir:"asc"}]},{display:"Name (Z-A)",sorts:[{key:"display",dir:"desc"}]},{display:"Last Fill Date (Oldest to Newest)",sorts:[{key:"lastFillDate",dir:"desc",isDate:!0}]},{display:"Last Fill Date (Newest to Oldest)",sorts:[{key:"lastFillDate",dir:"asc",isDate:!0}]},{display:"Last Prescribed (Old to New)",sorts:[{key:"lastPrescribedDate",isDate:!0,dir:"desc"},{key:"lastPrescriber",dir:"asc"}]},{display:"Last Prescribed (New to Old)",sorts:[{key:"lastPrescribedDate",isDate:!0,dir:"asc"},{key:"lastPrescriber",dir:"asc"}]}],st=jt[0];const re=({action:e,className:t,query:n,rowActions:r,filters:s,defaultView:i,views:l,onOpenHistoryDrawer:o})=>{const c=ar(),{data:g,setFilters:p,setSort:v,setViewOption:y}=Ct({defaultView:i,defaultFilters:it,defaultSort:st,records:n.data});function u(C){o==null||o(),c({medication:C})}return a.createElement("div",{className:M("ctw-scrollable-pass-through-height",t)},a.createElement(Et,{viewOptions:i&&l?{onChange:y,defaultView:i,options:l}:void 0,filterOptions:{onChange:p,defaultState:it,filters:s},sortOptions:{defaultSort:st,options:jt,onChange:v},action:e}),a.createElement(qt,{className:"ctw-patient-medications",columns:rr,data:g,emptyMessage:"There are no medication records available.",isLoading:n.isLoading,onRowClick:u,rowActions:r}))};try{re.displayName="PatientMedicationsBase",re.__docgenInfo={description:"",displayName:"PatientMedicationsBase",props:{action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"{ data?: MedicationStatementModel[] | undefined; isLoading: boolean; }"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"ComponentType<{ record: MedicationStatementModel; }>"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterItem[]"}},defaultView:{defaultValue:null,description:"",name:"defaultView",required:!1,type:{name:"ViewOption"}},views:{defaultValue:null,description:"",name:"views",required:!1,type:{name:"ViewOption[]"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}const ir=["active","unknown","on-hold","intended","not-taken"],sr=["completed","stopped","entered-in-error"],Lt=[{display:"Current",filters:[{key:"status",type:"checkbox",selected:ir}]},{display:"Past",filters:[{key:"status",type:"checkbox",selected:sr}]},{display:"All",filters:[]}],lr=Lt[0];function or(){return vt(yt,[{informationSourceNot:"Patient"}],ft(Rn,"req.builder_medications"))}function ur(){return vt(Te,[{_revinclude:"Basic:subject"}],ft(Mn,"req.active_medications"))}function He(){const[e,t]=f.useState([]),[n,r]=f.useState([]),s=ur(),i=or();f.useEffect(()=>{var g,p;if((g=s.data)!=null&&g.bundle&&((p=i.data)!=null&&p.bundle)){const{medications:v,bundle:y}=s.data,{medications:u}=i.data,C=cn(y),q=pn([s.data.bundle,i.data.bundle]),m=An(v.map(b=>new U(b,q,C.get(b.id??""))),u.map(b=>new U(b,q,C.get(b.id??""))));t(m.builderMedications),r(m.otherProviderMedications)}},[s.data,i.data]);const l=i.isLoading||s.isLoading,o=i.isFetching||s.isFetching,c=i.isError||s.isError;return{isFetching:o,isLoading:l,isError:c,builderMedications:e,otherProviderMedications:n}}const dr=({className:e,onOpenHistoryDrawer:t})=>{const{builderMedications:n,isLoading:r}=He();return a.createElement(re,{className:e,query:{data:n,isLoading:r},filters:Ft(n,!1),views:Lt,defaultView:lr,onOpenHistoryDrawer:t})},Ne=k(dr,"PatientMedications");try{Ne.displayName="PatientMedications",Ne.__docgenInfo={description:"",displayName:"PatientMedications",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}const cr=async(e,t)=>{const{authToken:n,contextBuilderId:r}=e;return(await(await fetch(`${mn(e.env)}?display=${t}`,{headers:{Authorization:`Bearer ${n}`,...r&&{"Zus-Account":r}}})).json()).data},Se=({defaultCoding:e,readonly:t,...n})=>{const{getRequestContext:r}=j(),[s,i]=f.useState(!1),[l,o]=f.useState(),c=async g=>{i(!0);const p=await r(),v=await cr(p,g);v&&o(v.map(y=>({value:y,label:y.display}))),i(!1)};return a.createElement(ot,{options:l||[],isLoading:s,name:`${n.name}`,defaultSearchTerm:n.defaultValue,readonly:t,onSearchChange:c,defaultValue:e})};try{Se.displayName="MedicationsAutoComplete",Se.__docgenInfo={description:"",displayName:"MedicationsAutoComplete",props:{defaultCoding:{defaultValue:null,description:"",name:"defaultCoding",required:!1,type:{name:"Coding"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const xe=e=>[{label:"Subject",value:e.subjectID,field:"subjectID",hidden:!0},{label:"Date Asserted",value:pe(new Date,"P"),field:"dateAsserted",hidden:!0},{label:"Medication",field:"medication",value:e.display,render:(t,n)=>a.createElement(Se,{readonly:t,...n,defaultCoding:e.rxNormCodeableConcept})},{label:"Latest Status",value:jn(e.status),field:"status"},{label:"Instructions",value:e.dosage,field:"dosage"}],pr=P.object({subjectID:P.string({required_error:"Patient must be specified."}),dateAsserted:P.date({required_error:"Date asserted is required."}),medication:P.object({code:P.string({required_error:"Please choose a medication."}),display:P.string().optional(),system:P.string().optional()}),dosage:P.string().optional(),status:P.enum(["active","completed","entered-in-error","intended","not-taken","on-hold","stopped","unknown"])});try{xe.displayName="getMedicationFormData",xe.__docgenInfo={description:"",displayName:"getMedicationFormData",props:{builderPatientRxNormStatus:{defaultValue:null,description:"",name:"builderPatientRxNormStatus",required:!1,type:{name:"Record<string, string>"}},basedOn:{defaultValue:null,description:"",name:"basedOn",required:!0,type:{name:"string | undefined"}},category:{defaultValue:null,description:"",name:"category",required:!0,type:{name:"string"}},context:{defaultValue:null,description:"",name:"context",required:!0,type:{name:"string | undefined"}},dateAsserted:{defaultValue:null,description:"",name:"dateAsserted",required:!0,type:{name:"string | undefined"}},derivedFrom:{defaultValue:null,description:"",name:"derivedFrom",required:!0,type:{name:"string[]"}},aggregatedFrom:{defaultValue:null,description:"",name:"aggregatedFrom",required:!0,type:{name:"Reference[]"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string"}},dosage:{defaultValue:null,description:"",name:"dosage",required:!0,type:{name:"string | undefined"}},effectiveStart:{defaultValue:null,description:"",name:"effectiveStart",required:!0,type:{name:"string | undefined"}},identifier:{defaultValue:null,description:"",name:"identifier",required:!0,type:{name:"string | undefined"}},informationSource:{defaultValue:null,description:"",name:"informationSource",required:!0,type:{name:"Reference | undefined"}},medicationReference:{defaultValue:null,description:"",name:"medicationReference",required:!0,type:{name:"string | undefined"}},notesDisplay:{defaultValue:null,description:"",name:"notesDisplay",required:!0,type:{name:"string[]"}},partOf:{defaultValue:null,description:"",name:"partOf",required:!0,type:{name:"string | undefined"}},patientStatus:{defaultValue:null,description:"",name:"patientStatus",required:!0,type:{name:"string"}},rxNorm:{defaultValue:null,description:"",name:"rxNorm",required:!0,type:{name:"string | undefined"}},rxNormCodeableConcept:{defaultValue:null,description:'Get RxNorm coding with "display" defaulting to this Med-Statement label.',name:"rxNormCodeableConcept",required:!0,type:{name:"{ display: string; code?: string | undefined; _code?: Element | undefined; _display?: Element | undefined; system?: string | undefined; _system?: Element | undefined; ... 6 more ...; _id?: Element | undefined; }"}},reason:{defaultValue:null,description:"",name:"reason",required:!0,type:{name:"string | undefined"}},reasonReference:{defaultValue:null,description:"",name:"reasonReference",required:!0,type:{name:"Reference[] | undefined"}},isInactive:{defaultValue:null,description:"",name:"isInactive",required:!0,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"active"'},{value:'"entered-in-error"'},{value:'"unknown"'},{value:'"completed"'},{value:'"intended"'},{value:'"stopped"'},{value:'"on-hold"'},{value:'"not-taken"'}]}},displayStatus:{defaultValue:null,description:"",name:"displayStatus",required:!0,type:{name:"string"}},statusReason:{defaultValue:null,description:"",name:"statusReason",required:!0,type:{name:"string | undefined"}},subject:{defaultValue:null,description:"",name:"subject",required:!0,type:{name:"Reference"}},subjectID:{defaultValue:null,description:"",name:"subjectID",required:!0,type:{name:"string"}},patient:{defaultValue:null,description:"",name:"patient",required:!0,type:{name:"PatientModel | undefined"}},lastFillDate:{defaultValue:null,description:"",name:"lastFillDate",required:!0,type:{name:"string | undefined"}},quantity:{defaultValue:null,description:"",name:"quantity",required:!0,type:{name:"string | undefined"}},daysSupply:{defaultValue:null,description:"",name:"daysSupply",required:!0,type:{name:"string | undefined"}},refills:{defaultValue:null,description:"",name:"refills",required:!0,type:{name:"string | undefined"}},lastPrescriber:{defaultValue:null,description:"",name:"lastPrescriber",required:!0,type:{name:"string | undefined"}},lastPrescribedDate:{defaultValue:null,description:"",name:"lastPrescribedDate",required:!0,type:{name:"string | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"MedicationStatement"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isArchived:{defaultValue:null,description:"",name:"isArchived",required:!0,type:{name:"boolean"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},resourceTypeTitle:{defaultValue:null,description:"",name:"resourceTypeTitle",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}const mr=[gn,Te,yt],fr=async(e,t)=>{const n={resourceType:"MedicationStatement",status:e.status,dateAsserted:fn(e.dateAsserted),subject:{type:"Patient",reference:`Patient/${e.subjectID}`},medicationCodeableConcept:{text:e.medication.display,coding:[{system:yn,code:e.medication.code}]},...e.dosage&&{dosage:[{text:e.dosage}]}},r=new U(n),s=await Nn(r.resource,await t());return await Promise.all(mr.map(async i=>gt.invalidateQueries([i]))),s};function yr(){const{openDrawer:e}=W();return t=>{e({component:n=>a.createElement(gr,{medication:t.resource,...n})})}}const gr=({isOpen:e,onClose:t,medication:n})=>{var o,c;const r=ke(),s={reference:`Patient/${(o=r.data)==null?void 0:o.id}`,display:(c=r.data)==null?void 0:c.display};let i;n?i=new U({...n,subject:s,dateAsserted:pe(new Date,"yyyy-MM-dd")}):i=new U({resourceType:"MedicationStatement",status:"active",subject:s,dateAsserted:pe(new Date,"yyyy-MM-dd")});const l=xe(i);return a.createElement(Re,{title:"Add Medication",action:fr,data:l,schema:pr,isOpen:e,onClose:t})},vr=({className:e,onAddToRecord:t,readOnly:n=!1,onOpenHistoryDrawer:r})=>{const{otherProviderMedications:s,isLoading:i}=He();return a.createElement(re,{className:e,query:{data:s,isLoading:i},filters:Ft(s,!0),rowActions:n?void 0:br({onAddToRecord:t}),onOpenHistoryDrawer:r})},De=k(vr,"PatientMedicationsOutside"),br=({onAddToRecord:e})=>t=>a.createElement(hr,{...t,onAddToRecord:e}),hr=({record:e,onAddToRecord:t})=>{const n=yr(),{getRequestContext:r}=j();return a.createElement("div",{className:"ctw-flex ctw-space-x-2"},a.createElement("button",{type:"button",className:"ctw-btn-default",onClick:async()=>{await It(e,await r(),[Te])}},e.isArchived?"Restore":"Dismiss"),a.createElement("button",{type:"button",className:"ctw-btn-primary ctw-ml-1 ctw-capitalize","data-zus-telemetry-click":"Add to record","data-testid":"add-to-record",onClick:()=>{t?t(e):n(e)}},"Add"))};try{De.displayName="PatientMedicationsOutside",De.__docgenInfo={description:"",displayName:"PatientMedicationsOutside",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}},onAddToRecord:{defaultValue:null,description:"",name:"onAddToRecord",required:!1,type:{name:"((record: MedicationStatementModel) => void)"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const wr=()=>{const{otherProviderMedications:e=[]}=He(),t=e.filter(n=>!(n.isArchived||n.isInactive));return t.length>0?a.createElement(Z,{color:"notification",text:t.length.toString(),className:"ctw-h-5"}):null},Cr=({className:e})=>{const t=Pt();return a.createElement(Zn,{query:t,className:M(e,"ctw-scrollable-pass-through-height")})},Oe=k(Cr,"PatientObservationsOutside");try{Oe.displayName="PatientObservationsOutside",Oe.__docgenInfo={description:"",displayName:"PatientObservationsOutside",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}}}}}catch{}const Er=()=>{const{data:e=[]}=Pt();return e.length?a.createElement(Z,{color:"notification",text:e.length.toString(),className:"ctw-h-5"}):null},qr={allergies:(e={})=>({key:"allergies",getPanelClassName:()=>"ctw-pt-5",display:()=>"allergies",render:()=>a.createElement(Yn,{...e})}),"care-team":(e={})=>({key:"care-team",display:()=>"care team",render:()=>a.createElement(Xn,{...e})}),conditions:(e={})=>({key:"conditions",display:()=>ee.t("zap.tabs.conditions"),render:()=>a.createElement(qe,{...e})}),"conditions-outside":(e={})=>({key:"conditions-outside",display:()=>a.createElement("div",{className:"ctw-space-x-2"},a.createElement("span",{className:"ctw-capitalize"},ee.t("zap.tabs.conditionsOutside")),a.createElement(tr,null)),render:()=>a.createElement(Ve,{...e})}),documents:(e={})=>({key:"documents",getPanelClassName:()=>"ctw-pt-5",display:()=>"documents",render:()=>a.createElement(Jn,{...e})}),immunizations:(e={})=>({key:"immunizations",getPanelClassName:()=>"ctw-pt-5",display:()=>"immunizations",render:()=>a.createElement(ea,{...e})}),medications:(e={})=>({key:"medications",display:()=>"medication list",render:()=>a.createElement(Ne,{...e})}),"medications-outside":(e={})=>({key:"medications-outside",display:()=>a.createElement("div",{className:"ctw-space-x-2"},a.createElement("span",{className:"ctw-capitalize"},ee.t("zap.tabs.medicationsOutside")),a.createElement(wr,null)),render:()=>a.createElement(De,{...e})}),observations:(e={})=>({key:"observations",display:()=>"observations",render:()=>a.createElement(Wn,{...e})}),"observations-outside":(e={})=>({key:"observations-outside",display:()=>a.createElement(a.Fragment,null,a.createElement("span",{className:"ctw-pr-2 ctw-capitalize"},"outside observations"),a.createElement(Er,null)),render:()=>a.createElement(Oe,{...e})}),timelines:(e={})=>({key:"timelines",getPanelClassName:()=>"ctw-pt-5",display:()=>"encounter timeline",render:()=>a.createElement(ta,{...e})})};function Pr({children:e,className:t,forceHorizontalTabs:n=!1,content:r,onChange:s}){const[i,l]=f.useState(0),o=f.useRef(null),c=na(o),g=!n&&c.sm,[p,v]=f.useState({0:!0}),y=u=>{l(u),v({...p,[u]:!0}),s&&s(u)};return a.createElement("div",{ref:o,className:M(t,"ctw-tab-group ctw-scrollable-pass-through-height ctw-w-full")},a.createElement(B.Group,{selectedIndex:i,onChange:y},g&&a.createElement(Gn,{btnClassName:"ctw-tab ctw-capitalize",optionsClassName:"ctw-tab-list ctw-capitalize",onChange:y,items:r}),a.createElement(B.List,{className:M("ctw-border-default ctw-flex ctw-justify-start ctw-border-b ctw-border-divider-light",{"ctw-hidden":g})},r.map(({key:u,display:C})=>a.createElement(B,{key:u,"data-zus-telemetry-click":`Tab[${u}]`,onClick:Vr,className:({selected:q})=>M(["ctw-tab ctw-text-sm ctw-capitalize","hover:after:ctw-bg-content-black","focus-visible:ctw-outline-primary-dark focus-visible:after:ctw-bg-transparent"],{"after:ctw-bg-content-black":q,"ctw-text-content-light":!q})},C()))),e,a.createElement(B.Panels,{className:"ctw-scrollable-pass-through-height"},r.map((u,C)=>{var q;return a.createElement(B.Panel,{key:u.key,className:M("ctw-scrollable-pass-through-height",(q=u.getPanelClassName)==null?void 0:q.call(u,c.sm)),unmount:!1},p[C]&&u.render(c.sm))}))))}const Ae=k(Pr,"TabGroup",!1);function Vr(){typeof document<"u"&&requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})}try{Ae.displayName="TabGroup",Ae.__docgenInfo={description:"",displayName:"TabGroup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"TabGroupItem[]"}},forceHorizontalTabs:{defaultValue:null,description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((index: number) => void)"}}}}}catch{}const _r=({forceHorizontalTabs:e=!1,allergiesProps:t,careTeamProps:n,conditionsProps:r,conditionsOutsideProps:s,documentsProps:i,immunizationsProps:l,medicationsProps:o,medicationsOutsideProps:c,observationsProps:g,observationsOutsideProps:p,timelineProps:v,resources:y,hideTitle:u=!1,title:C="Outside Records",removeBranding:q=!1})=>{const m={allergies:t,"care-team":n,conditions:r,"conditions-outside":s,documents:i,immunizations:l,medications:o,"medications-outside":c,observations:g,"observations-outside":p,timelines:v},b=y.map(w=>{const E=m[w]??{};return qr[w](E)});return a.createElement("div",{className:"ctw-zus-aggregated-profile ctw-scrollable-pass-through-height"},!u&&a.createElement(Ln,{className:"ctw-border-b-2 ctw-border-r-0 ctw-border-l-0 ctw-border-t-0 ctw-border-solid ctw-border-divider-light"},a.createElement("h3",{className:"ctw-m-0 ctw-inline-block ctw-p-0 ctw-pb-3 ctw-text-lg ctw-font-medium"},C," ",!q&&a.createElement("span",{className:"ctw-text-sm ctw-font-light ctw-italic ctw-text-content-light"},"Powered by"," ",a.createElement("img",{src:Zt,alt:"Zus",className:"-ctw-mb-1.5"})))),a.createElement(Ae,{content:b,forceHorizontalTabs:e}))},lt=k(_r,"ZusAggregatedProfile");try{lt.displayName="ZusAggregatedProfile",lt.__docgenInfo={description:`ZusAggregatedProfile allows developers to utilize most of the components
available in this library as a single customizable component with tabbed
navigation. Simply pass an array with the names of the desired resources
to include _(see below)_.

It's possible to set a custom title for the ZusAggregatedProfile component,
making it a single component which can be used to create a handful of
different widgets within an app.

\`\`\`
export const ZusMedsWidget = <ZusAggregatedProfile
  title="Medications"
  resources={["medications", "medications-outside"]}
/>

export const ZusProblemsWidget = <ZusAggregatedProfile
  title="Problems"
  resources={["allergies", "conditions", "conditions-outside"]}
/>
\`\`\`
The complete set of available resources in the ZusAggregatedProfile are
"allergies",
"care-team",
"conditions",
"conditions-outside",
"documents",
"immunizations",
"medications",
"medications-outside",
"observations",
"observations-outside",
"timelines".`,displayName:"ZusAggregatedProfile",props:{resources:{defaultValue:null,description:"",name:"resources",required:!0,type:{name:"ZAPResourceName[]"}},forceHorizontalTabs:{defaultValue:{value:"false"},description:"",name:"forceHorizontalTabs",required:!1,type:{name:"boolean"}},title:{defaultValue:{value:"Outside Records"},description:"",name:"title",required:!1,type:{name:"string"}},hideTitle:{defaultValue:{value:"false"},description:"",name:"hideTitle",required:!1,type:{name:"boolean"}},removeBranding:{defaultValue:{value:"false"},description:"",name:"removeBranding",required:!1,type:{name:"boolean"}},allergiesProps:{defaultValue:null,description:"",name:"allergiesProps",required:!1,type:{name:"PatientAllergiesProps"}},careTeamProps:{defaultValue:null,description:"",name:"careTeamProps",required:!1,type:{name:"PatientCareTeamProps"}},conditionsProps:{defaultValue:null,description:"",name:"conditionsProps",required:!1,type:{name:"PatientConditionsProps"}},conditionsOutsideProps:{defaultValue:null,description:"",name:"conditionsOutsideProps",required:!1,type:{name:"PatientConditionsOutsideProps"}},documentsProps:{defaultValue:null,description:"",name:"documentsProps",required:!1,type:{name:"PatientDocumentProps"}},immunizationsProps:{defaultValue:null,description:"",name:"immunizationsProps",required:!1,type:{name:"PatientImmunizationsProps"}},medicationsProps:{defaultValue:null,description:"",name:"medicationsProps",required:!1,type:{name:"PatientMedicationsProps"}},medicationsOutsideProps:{defaultValue:null,description:"",name:"medicationsOutsideProps",required:!1,type:{name:"PatientMedicationsOutsideProps"}},observationsProps:{defaultValue:null,description:"",name:"observationsProps",required:!1,type:{name:"PatientObservationsProps"}},observationsOutsideProps:{defaultValue:null,description:"",name:"observationsOutsideProps",required:!1,type:{name:"PatientObservationsOutsideProps"}},timelineProps:{defaultValue:null,description:"",name:"timelineProps",required:!1,type:{name:"PatientTimelineProps"}}}}}catch{}export{lt as Z};
