import{r as o,R as a}from"./index-6f814c40.js";import{a as D,u as g,M as N}from"./use-medications-4de61b0b.js";import{w as M}from"./error-boundary-3c619f42.js";import{c as O}from"./index-74f03c09.js";import{D as P,C as T,b as _}from"./dropdown-action-menu-a1855eee.js";import{e as k,s as A}from"./sort-618282df.js";import{h as x,g as F,y as C,i as v}from"./values-28adb33b.js";const w=[{display:"Name (A-Z)",sorts:[{key:"display",dir:"asc"}]},{display:"Name (Z-A)",sorts:[{key:"display",dir:"desc"}]},{display:"Status (A-Z)",sorts:[{key:"status",dir:"asc"},{key:"dateAsserted",dir:"desc"}]},{display:"Status (Z-A)",sorts:[{key:"status",dir:"desc"},{key:"dateAsserted",dir:"desc"}]},{display:"Last Fill Date (Oldest to Newest)",sorts:[{key:"lastFillDate",dir:"desc",isDate:!0}]},{display:"Last Fill Date (Newest to Oldest)",sorts:[{key:"lastFillDate",dir:"asc",isDate:!0}]},{display:"Last Prescribed Date (Oldest to Newest)",sorts:[{key:"lastPrescribedDate",isDate:!0,dir:"desc"},{key:"lastPrescriber",dir:"asc"}]},{display:"Last Prescribed Date (Newest to Oldest)",sorts:[{key:"lastPrescribedDate",isDate:!0,dir:"asc"},{key:"lastPrescriber",dir:"asc"}]}],f=w[0],y=({className:s,defaultSort:n,onChange:r,options:e})=>{const[l,i]=o.useState(n);return a.createElement(P,{type:"select",buttonClassName:O(s,"ctw-bg-transparent ctw-border-none ctw-p-0"),onItemSelect:t=>{const d=e.filter(u=>u.display===t.key)[0];r(d),i(d)},items:e.map(t=>({key:t.display,name:t.display,isSelected:l.display===t.display}))},a.createElement("div",{className:"ctw-btn-default ctw-flex ctw-items-center ctw-space-x-1"},a.createElement("span",null,"Sort: ",l.display),a.createElement(T,{className:"ctw-h-4"})))};try{y.displayName="SortButton",y.__docgenInfo={description:"",displayName:"SortButton",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}},defaultSort:{defaultValue:null,description:"",name:"defaultSort",required:!0,type:{name:"SortOption<T>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(sort: SortOption<T>) => void"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SortOption<T>[]"}}}}}catch{}function E({defaultFilters:s,defaultSort:n,records:r}){const[e,l]=o.useState(s),[i,t]=o.useState(n),[d,u]=o.useState(r??[]);return o.useEffect(()=>{const p=_(r??[],e),c=k(p,i.sorts);u(c)},[e,i,r]),{setFilters:l,setSort:t,data:d,filters:e,sortOption:i}}const S=M(({showInactive:s=!1,sortColumn:n="display",sortOrder:r="asc",onAfterOpenHistoryDrawer:e,onOpenHistoryDrawer:l})=>{const[i,t]=o.useState([]),{builderMedications:d,isLoading:u}=D(),p=g(),{data:c,setSort:b}=E({defaultFilters:{},defaultSort:f,records:d});function h(m){v(l)&&l(),p({medication:m}),setTimeout(()=>{v(e)&&e()},0)}return o.useEffect(()=>{t(A(s?c:c.filter(m=>m.displayStatus==="Active"),x(F(n),C),r))},[c,n,r,s]),a.createElement(a.Fragment,null,a.createElement("div",{className:"ctw-flex ctw-flex-wrap ctw-gap-x-2"},a.createElement(y,{className:"ctw-my-2",options:w,onChange:b,defaultSort:f})),a.createElement(N,{medicationStatements:i,telemetryNamespace:"ProviderMedsTable",isLoading:u,handleRowClick:h}))},"ProviderMedsTable");try{S.displayName="ProviderMedsTable",S.__docgenInfo={description:`Displays a table of medications that are scoped to the CTWContext builder
and patient. To show medications that aren't scoped to the builder, use the
\`OtherProviderMedsTable\` instead.

The table has a menu to the right side which will pull out the
history for the medication listed in that row.`,displayName:"ProviderMedsTable",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},showInactive:{defaultValue:null,description:"",name:"showInactive",required:!1,type:{name:"boolean"}},sortColumn:{defaultValue:null,description:"",name:"sortColumn",required:!1,type:{name:"enum",value:[{value:'"builderPatientRxNormStatus"'},{value:'"basedOn"'},{value:'"category"'},{value:'"context"'},{value:'"dateAsserted"'},{value:'"derivedFrom"'},{value:'"aggregatedFrom"'},{value:'"display"'},{value:'"dosage"'},{value:'"effectiveStart"'},{value:'"identifier"'},{value:'"informationSource"'},{value:'"medicationReference"'},{value:'"notesDisplay"'},{value:'"partOf"'},{value:'"patientStatus"'},{value:'"rxNorm"'},{value:'"rxNormCodeableConcept"'},{value:'"reason"'},{value:'"reasonReference"'},{value:'"isArchived"'},{value:'"isInactive"'},{value:'"status"'},{value:'"displayStatus"'},{value:'"statusReason"'},{value:'"subject"'},{value:'"subjectID"'},{value:'"patient"'},{value:'"lastFillDate"'},{value:'"quantity"'},{value:'"daysSupply"'},{value:'"refills"'},{value:'"lastPrescriber"'},{value:'"lastPrescribedDate"'},{value:'"resource"'},{value:'"includedResources"'},{value:'"revIncludes"'},{value:'"id"'},{value:'"isSummaryResource"'},{value:'"resourceType"'},{value:'"resourceTypeTitle"'},{value:'"getBasicResourceByAction"'},{value:'"toString"'}]}},sortOrder:{defaultValue:null,description:"",name:"sortOrder",required:!1,type:{name:"enum",value:[{value:'"asc"'},{value:'"desc"'}]}},onOpenHistoryDrawer:{defaultValue:null,description:"",name:"onOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}},onAfterOpenHistoryDrawer:{defaultValue:null,description:"",name:"onAfterOpenHistoryDrawer",required:!1,type:{name:"(() => void)"}}}}}catch{}export{S as P,y as S,f as d,w as m,E as u};
