import{R as a,r as d}from"./index-6f814c40.js";import{c as p}from"./index-74f03c09.js";import{u as l}from"./resource-details-drawer-d5f4f7b7.js";import{C as I}from"./coding-list-1d7c950f.js";import{w as f}from"./error-boundary-efa22454.js";import{F as h,ab as _,ac as w,a as g,w as y,s as z,ad as C,u as v}from"./patient-helper-9cec045f.js";import{T as D}from"./table-8ff108f6.js";import{V as R}from"./view-fhir-d8a31a51.js";import"./_baseToString-4993715b.js";import{o as E}from"./sortBy-be5f7eb4.js";import"./_baseClone-25b1595e.js";import"./sortBy-919d7262.js";import"./_equalByTag-aaf39779.js";import"./_baseForOwn-d8306f34.js";import{i as T}from"./isEqual-b08f36b0.js";import"./_createSet-12ef9b81.js";import{u as N}from"./uniqWith-f1edcb30.js";import{u as P}from"./patient-provider-1d2019d5.js";import{u as b}from"./use-breakpoints-40011340.js";const x=[{title:"Date",render:e=>a.createElement("div",{className:"group-hover:ctw-underline"},e.occurrence)},{title:"Description",dataIndex:"description"},{title:"CVX Code",dataIndex:"cvxCode"}];class F extends h{get description(){return this.resource.vaccineCode.text}get cvxCode(){const t=_(w,this.resource.vaccineCode);return t==null?void 0:t.code}get occurrence(){return this.resource.occurrenceDateTime?g(this.resource.occurrenceDateTime):this.resource.occurrenceString}}const n=e=>{const t=e.map(r=>new F(r));return N(t,(r,i)=>T(s(r),s(i)))},s=e=>[e.description,e.cvxCode,e.occurrence];try{n.displayName="applyImmunizationFilters",n.__docgenInfo={description:"",displayName:"applyImmunizationFilters",props:{}}}catch{}function M(){return P(C,[],y(async(e,t)=>{try{const{bundle:o,resources:r}=await z("Immunization",e,{patientUPID:t.UPID});return E(n(r),[i=>i.occurrence??""],["desc"])}catch(o){throw new Error(`Failed fetching immunization information for patient: ${o}`)}},"req.patient_immunizations"))}const V=({record:e})=>a.createElement(R,{name:"Immunization Resource",resource:e.resource});function k({className:e}){const t=d.useRef(null),o=b(t),{featureFlags:r}=v(),i=M(),m=l({header:u=>u.description,details:S});return a.createElement("div",{ref:t,"data-zus-telemetry-namespace":"Immunizations",className:p("ctw-patient-immunizations ctw-scrollable-pass-through-height ctw-bg-white",e,{"ctw-stacked":o.sm})},a.createElement(D,{RowActions:r!=null&&r.enableViewFhirButton?V:void 0,stacked:o.sm,isLoading:i.isLoading,records:i.data??[],columns:x,handleRowClick:m}))}const c=f(k,"PatientImmunizations"),S=e=>[{label:"Date",value:e.occurrence},{label:"Description",value:e.description},{label:"Vaccine Code",value:e.resource.vaccineCode.coding?a.createElement(I,{codings:e.resource.vaccineCode.coding}):void 0}];try{c.displayName="PatientImmunizations",c.__docgenInfo={description:"",displayName:"PatientImmunizations",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{c as P};
