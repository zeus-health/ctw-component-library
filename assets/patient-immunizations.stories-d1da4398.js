import{R as r}from"./index-6f814c40.js";import{C as f}from"./coding-list-1d7c950f.js";import{z as y,H as h,a2 as g,a3 as I,a4 as z,a5 as b,a6 as v,a7 as _,a8 as T,a9 as w,l as p,C as x,a as D,S as C}from"./patient-allergies-537ec5b6.js";import{q as d}from"./drawer-a8e46714.js";import{o as V,T as E}from"./table-f396f8bf.js";import{p as S,b as N}from"./action-list-ada7e7df.js";import"./_baseToString-5e23e5e6.js";import"./_baseClone-59dfd81b.js";import"./sortBy-7530ff7d.js";import"./_equalByTag-2573c09c.js";import"./_baseForOwn-0b302854.js";import"./_createSet-00935424.js";import"./_commonjsHelpers-042e6b4d.js";import"./request-47bfd586.js";import"./index-74f03c09.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./uniq-38208ea9.js";import"./_baseUniq-701deb29.js";import"./_basePickBy-d4bc7435.js";import"./_baseIsEqual-4482d138.js";import"./mapValues-3edfa6db.js";import"./data-list-254aa0b0.js";import"./spinner-66aa4ba7.js";import"./isString-45b38206.js";import"./extends-298b405d.js";import"./index-6de6b113.js";import"./debounce-c94122dc.js";import"./toNumber-4334224f.js";import"./isPlainObject-d68c8411.js";function P(){const{openDrawer:e}=y();return t=>{e({component:a=>r.createElement(s,{immunization:t,...a})})}}function s({immunization:e,className:t,isOpen:a,onClose:i}){return r.createElement(d,{className:t,title:"Immunization Details",isOpen:a,onClose:i,showCloseFooter:!0},r.createElement(d.Body,null,r.createElement("div",{className:"ctw-py-2"},r.createElement("div",{className:"ctw-text-2xl"},e.description)),r.createElement(h,{data:c(e)})))}const c=e=>[{label:"Description",value:e.description},{label:"Vaccine Code",value:e.resource.vaccineCode.coding?r.createElement(f,{codings:e.resource.vaccineCode.coding}):void 0}];try{s.displayName="ImmunizationDetailsDrawer",s.__docgenInfo={description:"",displayName:"ImmunizationDetailsDrawer",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},immunization:{defaultValue:null,description:"",name:"immunization",required:!0,type:{name:"ImmunizationModel"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}try{c.displayName="immunizationData",c.__docgenInfo={description:"",displayName:"immunizationData",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string | undefined"}},cvxCode:{defaultValue:null,description:"",name:"cvxCode",required:!0,type:{name:"string | undefined"}},occurance:{defaultValue:null,description:"",name:"occurance",required:!0,type:{name:"string | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Immunization"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}const q=[{widthPercent:30,minWidth:250,dataIndex:"occurance"},{widthPercent:40,minWidth:250,dataIndex:"description"},{widthPercent:20,minWidth:250,render:e=>e.cvxCode&&r.createElement("div",null,"CVX: ",e.cvxCode)},{widthPercent:10,minWidth:200,render:e=>r.createElement(g,{name:"Immunization Resource",resource:e.resource})}];class R extends I{get description(){return this.resource.vaccineCode.text}get cvxCode(){const t=z(b,this.resource.vaccineCode);return t==null?void 0:t.code}get occurance(){return this.resource.occurrenceDateTime?v(this.resource.occurrenceDateTime):this.resource.occurrenceString}}const u=e=>N(B,e.map(t=>new R(t))),B=S(["description","cvxCode","occurance"]);try{u.displayName="applyImmunizationFilters",u.__docgenInfo={description:"",displayName:"applyImmunizationFilters",props:{}}}catch{}function U(){return _(w,[],async(e,t)=>{try{const{bundle:a,resources:i}=await T("Immunization",e,{patientUPID:t.UPID});return V(u(i),[n=>n.occurance??""],["desc"])}catch(a){throw new Error(`Failed fetching immunization information for patient: ${a}`)}})}function m({className:e}){const t=U(),a=P();function i(n){a(n)}return r.createElement("div",{className:e},r.createElement(E,{className:"-ctw-mx-px !ctw-rounded-none",showTableHead:!1,isLoading:t.isLoading,records:t.data??[],columns:q,handleRowClick:i}))}try{m.displayName="PatientImmunizations",m.__docgenInfo={description:"",displayName:"PatientImmunizations",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const k={resourceType:"Bundle",id:"f2b911f3-b5cc-42c0-899c-f4f3ed92cfd1",meta:{lastUpdated:"2023-01-26T16:02:38.923+00:00"},type:"searchset",total:2,link:[{relation:"self",url:"https://api.sandbox.zusapi.com/fhir/Immunization?_count=10&_offset=0&_sort=-_lastUpdated&_total=accurate"}],entry:[{fullUrl:"https://api.sandbox.zusapi.com/fhir/Immunization/efc72c61-a46c-412f-9c24-adca7a99a498",resource:{resourceType:"Immunization",id:"efc72c61-a46c-412f-9c24-adca7a99a498",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:39.352+00:00"}],versionId:"1",lastUpdated:"2023-01-26T15:49:39.354+00:00",source:"#nzL1s2NVRsaV2H7S",tag:[{system:"https://zusapi.com/thirdparty/source",code:"commonwell"},{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f-ae4b-45f4-a653-5677b1582115",display:"HLTH 2022 - Gunther"}]},extension:[{url:"https://zusapi.com/fhir/identifier/universal-id",valueString:"b640bda1-aec7-4be6-a890-e3685a55bce3"}],status:"completed",vaccineCode:{coding:[{system:"http://hl7.org/fhir/sid/cvx",code:"205"}],text:"Influenza vaccine, quadrivalent, adjuvanted	"},patient:{reference:"Patient/07d6b737-8cf4-42e8-8eda-66777985aa15",type:"Patient"},occurrenceDateTime:"2022-07-10"},search:{mode:"match"}},{fullUrl:"https://api.sandbox.zusapi.com/fhir/Immunization/7c2c8f76-d8ca-4ea7-9977-4bfd8b2f5085",resource:{resourceType:"Immunization",id:"7c2c8f76-d8ca-4ea7-9977-4bfd8b2f5085",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:39.087+00:00"}],versionId:"1",lastUpdated:"2023-01-26T15:49:39.102+00:00",source:"#C2QEi5NSLV0uyr1o",tag:[{system:"https://zusapi.com/thirdparty/source",code:"commonwell"},{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f-ae4b-45f4-a653-5677b1582115",display:"HLTH 2022 - Gunther"}]},extension:[{url:"https://zusapi.com/fhir/identifier/universal-id",valueString:"b640bda1-aec7-4be6-a890-e3685a55bce3"}],status:"completed",vaccineCode:{coding:[{system:"http://hl7.org/fhir/sid/cvx",code:"211"}],text:"COVID-19, subunit, rS-nanoparticle+Matrix-M1 Adjuvant, PF, 0.5 mL"},patient:{reference:"Patient/07d6b737-8cf4-42e8-8eda-66777985aa15",type:"Patient"},occurrenceDateTime:"2022-04-01"},search:{mode:"match"}}]},L={resourceType:"Bundle",id:"f4da1f39-7638-45e4-999b-9ff33d7c5201",meta:{lastUpdated:"2022-11-15T19:37:55.783+00:00"},type:"searchset",entry:[{resource:{resourceType:"Patient",id:"u12345",meta:{extension:[{url:"https://zusapi.com/created-at",valueInstant:"2023-01-26T15:49:38.110+00:00"}],versionId:"2",lastUpdated:"2023-01-26T15:49:38.553+00:00",source:"#cacbf4a51c11b1b0",security:[{system:"http://terminology.hl7.org/CodeSystem/v3-ActReason",code:"HTEST"}],tag:[{system:"https://zusapi.com/thirdparty/source",code:"commonwell"},{system:"https://zusapi.com/accesscontrol/owner",code:"builder/f09f6b6f-ae4b-45f4-a653-5677b1582115",display:"HLTH 2022 - Gunther"}]},identifier:[{system:"https://zusapi.com/fhir/identifier/universal-id",value:"b640bda1-aec7-4be6-a890-e3685a55bce3"}],name:[{family:"Zhang",given:["Bruno"]}],telecom:[{system:"email",value:"brunozhang@example.com"},{system:"phone",value:"555-569-2000",use:"home"},{system:"phone",value:"555-536-3933",use:"mobile"},{system:"phone",value:"555-843-3265",use:"work"}],gender:"male",birthDate:"1970-05-09",address:[{line:["357 SHADOW LN"],city:"LAS VEGAS",state:"NV",postalCode:"89106-4119"}],managingOrganization:{reference:"Organization/79a1c124-a752-4d9a-a44e-2c02499ae402"}},search:{mode:"match"}}]},H=p.rest.get("https://api.dev.zusapi.com/fhir/Patient",(e,t,a)=>t(a.delay(750),a.status(200),a.json(L))),A=p.rest.get("https://api.dev.zusapi.com/fhir/Immunization",(e,t,a)=>t(a.status(200),a.json(k))),he={component:m,tags:["docsPage"],argTypes:{className:{options:["Blank","Fixed Width"],control:"select",mapping:{Blank:"","Fixed Width":"ctw-m-auto ctw-max-w-[600px]"}}},args:{className:"Blank",readOnly:!1},decorators:[(e,{args:t})=>r.createElement(x,{env:"dev",authToken:"dummy-token",builderId:"b123"},r.createElement(D,{patientID:"u12345",systemURL:C},r.createElement(e,{args:t})))]},o={parameters:{msw:[H,A]}};var l;o.parameters={...o.parameters,storySource:{source:`{
  parameters: {
    msw: [mockPatientGet, mockImmunizationGet]
  }
}`,...(l=o.parameters)==null?void 0:l.storySource}};const ge=["Basic"];export{o as Basic,ge as __namedExportsOrder,he as default};
//# sourceMappingURL=patient-immunizations.stories-d1da4398.js.map
