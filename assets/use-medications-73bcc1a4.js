import{R as t,r as o}from"./index-6f814c40.js";import{T as S}from"./table-96b9b58e.js";import{L as P,u as _}from"./ctw-box-696ec253.js";import{D as q,e as R}from"./data-list-254aa0b0.js";import{D as M}from"./drawer-de3413cf.js";import{a as V,M as x,b as A,g as L,c as F}from"./requests-49fa3c56.js";import{i as I}from"./uniqBy-e047f966.js";import{a as B,u as N}from"./patient-provider-2630b162.js";import{a4 as C,ao as T,as as k,an as O}from"./patient-helper-33893341.js";import{M as h}from"./medication-05c7aacc.js";function Q(e,r){return e?[{label:"Status",value:e.displayStatus},{label:"Last Fill Date",value:e.lastFillDate},{label:"Quantity",value:e.quantity},{label:"Days Supply",value:e.daysSupply},{label:"Refills",value:e.refills},{label:"Instructions",value:e.dosage},{label:"Prescriber",value:r},{label:"Last Prescribed Date",value:e.lastPrescribedDate},...R("Note",e.notesDisplay)]:[]}const g=({medication:e,onDismissal:r,...l})=>{const{lastPrescriber:d,isLoading:s}=V(e==null?void 0:e.resource),n=Q(e,d);return t.createElement(M,{title:"Medication Details",...l},t.createElement(M.Body,null,t.createElement("div",{className:"ctw-space-y-5"},t.createElement("div",{className:"ctw-flex ctw-justify-between ctw-space-x-8"},t.createElement("h3",{className:"ctw-m-0 ctw-text-3xl ctw-font-light"},e==null?void 0:e.display)),s&&t.createElement(P,null),!s&&t.createElement(q,{title:"Summary",data:n}),e&&t.createElement(x,{medication:e}))),t.createElement(M.Footer,null,t.createElement("div",{className:"ctw-flex ctw-justify-end ctw-space-x-2"},I(r)&&!(e!=null&&e.isArchived)&&t.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:()=>{r(e),l.onClose()},"data-zus-telemetry-click":"Dismiss"},"Dismiss"),t.createElement("button",{type:"button",className:"ctw-btn-default",onClick:l.onClose,"data-zus-telemetry-click":"Close"},"Close"))))};try{g.displayName="MedicationDrawer",g.__docgenInfo={description:"",displayName:"MedicationDrawer",props:{medication:{defaultValue:null,description:"",name:"medication",required:!1,type:{name:"MedicationStatementModel"}},onDismissal:{defaultValue:null,description:"",name:"onDismissal",required:!1,type:{name:"((m: MedicationStatementModel) => void)"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onOpen:{defaultValue:null,description:"",name:"onOpen",required:!1,type:{name:"(() => void)"}},onAfterOpen:{defaultValue:null,description:"",name:"onAfterOpen",required:!1,type:{name:"(() => void)"}}}}}catch{}const D=({children:e,className:r="",emptyMessage:l="No medications on record.",hideMenu:d=!1,medicationStatements:s,telemetryNamespace:n,...y})=>{const c=o.useRef(null),u=_(c),[m,p]=o.useState(),f=[{title:"Medication Name",render:a=>t.createElement(t.Fragment,null,t.createElement("div",{className:"ctw-font-medium"},a.display),t.createElement("div",{className:"ctw-font-light"},a.dosage)),widthPercent:35,minWidth:270,sortIndices:[{index:"display"},{index:"dosage",dir:"asc"}]}],b=[...f,{title:"Dispensed",render:a=>t.createElement(t.Fragment,null,a.quantity&&t.createElement("div",null,a.quantity),a.refills&&t.createElement("div",null,a.refills," refills")),widthPercent:14},{title:"Status",render:a=>t.createElement("div",{className:"ctw-capitalize"},t.createElement("div",{className:"ctw-text-content-black"},a.status),a.isArchived&&t.createElement("div",{className:"ctw-font-light"},"Dismissed")),sortIndices:[{index:"status"},{index:"dateAsserted",dir:"desc"}],widthPercent:14},{title:"Last Filled",dataIndex:"lastFillDate",sortIndices:[{index:"lastFillDate",isDate:!0}],widthPercent:18},{title:"Last Prescribed",render:a=>t.createElement(t.Fragment,null,a.lastPrescribedDate&&t.createElement("div",null,a.lastPrescribedDate),a.lastPrescriber&&t.createElement("div",null,a.lastPrescriber)),sortIndices:[{index:"lastPrescribedDate",isDate:!0},{index:"lastPrescriber",dir:"asc"}],widthPercent:18,minWidth:"90px"}];return t.createElement("div",{className:r,ref:c,"data-zus-telemetry-namespace":n},t.createElement("div",{className:"ctw-overflow-hidden"},t.createElement(S,{removeLeftAndRightBorders:!0,className:"-ctw-mx-px !ctw-rounded-none",sort:m,onSort:p,stacked:u.sm,records:s,columns:u.sm?f:b,emptyMessage:l,...y})),e)};try{D.displayName="MedicationsTableBase",D.__docgenInfo={description:"",displayName:"MedicationsTableBase",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | (string & Mapping) | (string & ArgumentArray)"}},emptyMessage:{defaultValue:{value:"No medications on record."},description:"Displayed when we have 0 records.",name:"emptyMessage",required:!1,type:{name:"string | (string & ReactElement<any, string | JSXElementConstructor<any>>)"}},hideMenu:{defaultValue:{value:"false"},description:"",name:"hideMenu",required:!1,type:{name:"boolean"}},medicationStatements:{defaultValue:null,description:"",name:"medicationStatements",required:!0,type:{name:"MedicationStatementModel[]"}},telemetryNamespace:{defaultValue:null,description:"",name:"telemetryNamespace",required:!1,type:{name:"string"}},handleRowClick:{defaultValue:null,description:"",name:"handleRowClick",required:!1,type:{name:"((record: MedicationStatementModel) => void)"}},RowActions:{defaultValue:null,description:"",name:"RowActions",required:!1,type:{name:"ComponentType<{ record: MedicationStatementModel; }>"}},getRowClassName:{defaultValue:null,description:"",name:"getRowClassName",required:!1,type:{name:"((record: MedicationStatementModel) => Argument)"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},showTableHead:{defaultValue:null,description:"",name:"showTableHead",required:!1,type:{name:"boolean"}},removeLeftAndRightBorders:{defaultValue:null,description:"",name:"removeLeftAndRightBorders",required:!1,type:{name:"boolean"}},stacked:{defaultValue:null,description:"",name:"stacked",required:!1,type:{name:"boolean"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"TableSort"}},onSort:{defaultValue:null,description:"",name:"onSort",required:!1,type:{name:"((sort: TableSort) => void)"}},hidePagination:{defaultValue:null,description:"",name:"hidePagination",required:!1,type:{name:"boolean"}}}}}catch{}function ee(){const{openDrawer:e}=B();return({medication:r})=>{e({component:l=>t.createElement(g,{medication:r,...l})})}}function z(){return N(k,[{informationSourceNot:"Patient"}],L)}function H(){return N(O,[{_revinclude:"Basic:subject"}],F)}function te(){const[e,r]=o.useState(),[l,d]=o.useState(),s=H(),n=z();o.useEffect(()=>{var m,p;if((m=s.data)!=null&&m.bundle&&((p=n.data)!=null&&p.bundle)){const{medications:f,bundle:b}=s.data,{medications:a}=n.data,E=C(b),v=T([s.data.bundle,n.data.bundle]),w=A(f.map(i=>new h(i,v,E.get(i.id??""))),a.map(i=>new h(i,v,E.get(i.id??""))));r(w.builderMedications),d(w.otherProviderMedications)}},[s.data,n.data]);const y=n.isLoading||s.isLoading,c=n.isFetching||s.isFetching,u=n.isError||s.isError;return{isFetching:c,isLoading:y,isError:u,builderMedications:e,otherProviderMedications:l}}export{D as M,te as a,ee as u};
//# sourceMappingURL=use-medications-73bcc1a4.js.map
