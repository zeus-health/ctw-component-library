import{r as d,d as t}from"./index.6453abbd.js";import{c as O}from"./index.d3b8680b.js";import{l as m,T as W}from"./table.be09a539.js";import{u as b,c as Y,g as j,d as K,e as H,T as $,D as I,f as k,B as Q,h as D,i as L,j as U,k as z,m as Z,n as G,o as J,p as X,q as ee,M as te,r as ne,a as oe,P as ie,S as ae}from"./index.fbd8392c.js";import"./action-list.63d65192.js";import{s as se,o as re,p as ce}from"./requests.a6926de0.js";import"./iframe.b227197b.js";import"./spinner.7c58c1e3.js";import"./index.f1f8248e.js";import"./drawer.3cf4423e.js";import"./index.debbc960.js";import"./extends.946277fc.js";import"./data-list.f026fb61.js";function de(e,n){return d.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:n},e),d.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"}))}const le=d.exports.forwardRef(de),pe=le;function h({hideAdd:e,onToggleShowHistoric:n}){var r,p;const a=(p=(r=b().data)==null?void 0:r.id)!=null?p:"",[s,c]=d.exports.useState(!1),l=new Y(j(a)),u=K({condition:l}),f=m.exports.curry(H)(l,a);return t.createElement("div",{className:"ctw-flex ctw-items-center ctw-justify-end ctw-space-x-2 ctw-border-0 ctw-border-t ctw-border-solid ctw-border-divider-light ctw-py-5 ctw-px-4"},t.createElement($,{name:"historic",text:"Show Historic",onChange:n}),!e&&t.createElement("button",{type:"button",className:"ctw-btn-icon",onClick:()=>c(!0)},t.createElement(pe,{className:"ctw-h-4 ctw-w-4"})),t.createElement(I,{title:"Add Condition",action:f,data:u,schema:k,isOpen:s,onClose:()=>c(!1)}))}try{h.displayName="PatientConditionsActions",h.__docgenInfo={description:"",displayName:"PatientConditionsActions",props:{hideAdd:{defaultValue:null,description:"",name:"hideAdd",required:!0,type:{name:"boolean"}},onToggleShowHistoric:{defaultValue:null,description:"",name:"onToggleShowHistoric",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/content/conditions/patient-conditions-actions.tsx#PatientConditionsActions"]={docgenInfo:h.__docgenInfo,name:"PatientConditionsActions",path:"src/components/content/conditions/patient-conditions-actions.tsx#PatientConditionsActions"})}catch{}function me(e){switch(e){case"Active":return"ctw-text-success-main";case"Pending":return"ctw-text-caution-main";default:return"ctw-text-content-lighter"}}const ue=[{widthPercent:30,minWidth:320,render:e=>t.createElement("div",null,t.createElement("div",{className:"ctw-pc-title"},e.display),t.createElement("div",{className:"ctw-pc-chapter"},e.ccsChapter))},{render:e=>{var n,o;return t.createElement("div",{className:"ctw-pc-status-container"},t.createElement("div",{className:O("ctw-pc-status-dot",me(e.status))},"\u2022"),t.createElement("div",{className:"ctw-pc-status-and-extra"},t.createElement("div",{className:"ctw-pc-status"},e.status),e.isSummaryResource?t.createElement("div",null,m.exports.compact([(o=(n=e.patient)==null?void 0:n.organization)==null?void 0:o.name,e.recordedDate]).join(" ")):t.createElement("div",null,m.exports.compact([e.recorder,e.recordedDate]).join(" "))))},widthPercent:30,minWidth:128},{widthPercent:40,minWidth:132,render:e=>{const n=e.isSummaryResource?"Earliest known onset:":"Onset:";return t.createElement("div",{className:"ctw-pc-onset-notes"},e.onset&&t.createElement("div",null,n," ",e.onset),t.createElement("div",{className:"ctw-pc-notes"},e.notes.join(" ")))}}];function Ce(){const[e,n]=d.exports.useState({collection:"patient",showHistoric:!1});function o(s){n(m.exports.merge(m.exports.cloneDeep(e),s))}function a(s,c){return(e.collection==="patient"?s:c).filter(u=>e.showHistoric?!0:["Active","Pending"].includes(u.status))}return{filters:e,updateFilters:o,applyFilters:a}}function E({collection:e,otherConditions:n,onCollectionChange:o}){function a(c){return e===c?"ctw-btn-primary":"ctw-btn-default"}const s=n.filter(c=>c.status==="Active").length;return t.createElement("div",{className:"ctw-flex ctw-items-center ctw-justify-between ctw-py-5 ctw-px-4"},t.createElement("div",{className:"ctw-text-xl ctw-font-medium ctw-text-content-black"},"Conditions"),t.createElement("div",{className:"ctw-space-x-2"},t.createElement("button",{type:"button",className:a("patient"),onClick:()=>o("patient")},"Patient Record"),t.createElement("button",{type:"button",className:O(a("other"),"ctw-space-x-2"),onClick:()=>o("other")},t.createElement("span",null,"Other Provider Records"),t.createElement(Q,{text:`${s}`,color:"gray"}))))}try{E.displayName="PatientConditionsHeader",E.__docgenInfo={description:"",displayName:"PatientConditionsHeader",props:{collection:{defaultValue:null,description:"",name:"collection",required:!0,type:{name:"enum",value:[{value:'"patient"'},{value:'"other"'}]}},otherConditions:{defaultValue:null,description:"",name:"otherConditions",required:!0,type:{name:"ConditionModel[]"}},onCollectionChange:{defaultValue:null,description:"",name:"onCollectionChange",required:!0,type:{name:"(collection: FilterCollection) => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/content/conditions/patient-conditions-header.tsx#PatientConditionsHeader"]={docgenInfo:E.__docgenInfo,name:"PatientConditionsHeader",path:"src/components/content/conditions/patient-conditions-header.tsx#PatientConditionsHeader"})}catch{}const y=({data:e,patientRecords:n,handleEditCondition:o})=>{if(e&&n.some(a=>a.id===e.id))return()=>o(e)},fe=(e,n,o)=>{e(!0),n(o)};try{y.displayName="createHandleEditCondition",y.__docgenInfo={description:"",displayName:"createHandleEditCondition",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"ConditionModel"}},patientRecords:{defaultValue:null,description:"",name:"patientRecords",required:!0,type:{name:"ConditionModel[]"}},handleEditCondition:{defaultValue:null,description:"",name:"handleEditCondition",required:!0,type:{name:"(data: ConditionModel) => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/content/conditions/patient-conditions-history.tsx#createHandleEditCondition"]={docgenInfo:y.__docgenInfo,name:"createHandleEditCondition",path:"src/components/content/conditions/patient-conditions-history.tsx#createHandleEditCondition"})}catch{}const we=(e,n,o)=>{o({drawerIsOpen:!0,actionType:"Edit",schema:D,data:L({condition:e})}),n(e)},he=(e,n,o)=>{o(!0),n(e)},Ee=(e,n,o,a)=>t.createElement("div",{className:"ctw-flex ctw-space-x-2"},t.createElement("button",{type:"button",className:"ctw-btn-default",onClick:s=>{s.stopPropagation(),he(e,n,a)}},"Remove"),t.createElement("button",{type:"button",className:"ctw-btn-primary",onClick:s=>{s.stopPropagation(),we(e,n,o)}},"Edit"));function _({className:e,readOnly:n=!1}){var T,R;const{filters:o,updateFilters:a,applyFilters:s}=Ce(),c=d.exports.useRef(null),l=U(c),[u,f]=d.exports.useState(!1),[r,p]=d.exports.useState(),[B,v]=d.exports.useState(!1),[C,g]=d.exports.useReducer((i,S)=>({...i,...S}),{schema:k,actionType:"Add",data:void 0,drawerIsOpen:!1}),P=z(),A=Z(),w=b(),{getRequestContext:q}=G();function F(){const i=P.isLoading,S=i||A.isLoading;return o.collection==="patient"?i:S}const x=(T=P.data)!=null?T:[],N=J((R=A.data)!=null?R:[],x,!0),V=s(x,N),M=i=>{w.data&&(g({actionType:"Edit",schema:D,data:L({condition:i}),drawerIsOpen:!0}),p(i))};return t.createElement("div",{ref:c,className:O("ctw-patient-conditions",e,{"ctw-patient-conditions-stacked":l.sm})},t.createElement(E,{otherConditions:N,collection:o.collection,onCollectionChange:i=>a({collection:i})}),t.createElement(h,{hideAdd:n||o.collection==="other",onToggleShowHistoric:()=>a({showHistoric:!o.showHistoric})}),t.createElement(W,{stacked:l.sm,className:"-ctw-mx-px !ctw-rounded-none",showTableHead:!1,isLoading:F(),records:V,rowActions:i=>Ee(i,p,g,v),columns:ue,handleRowClick:i=>fe(f,p,i)}),t.createElement(X,{isOpen:u,onClose:()=>f(!1),condition:r,onEdit:y({data:r,patientRecords:x,handleEditCondition:M})}),w.data&&t.createElement(I,{title:`${C.actionType} Condition`,header:C.actionType==="Edit"&&r&&t.createElement(ee,{condition:r}),action:m.exports.curry(H)(r,w.data.id),data:C.data,schema:C.schema,isOpen:C.drawerIsOpen,onClose:()=>g({drawerIsOpen:!1})}),r&&w.data&&t.createElement(te,{resource:r,resourceName:r.display||"unnamed condition",onClose:()=>v(!1),isOpen:B,onDelete:async()=>{const i=await q();await ne(r.resource,i)}}))}try{_.displayName="PatientConditions",_.__docgenInfo={description:"",displayName:"PatientConditions",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/content/conditions/patient-conditions.tsx#PatientConditions"]={docgenInfo:_.__docgenInfo,name:"PatientConditions",path:"src/components/content/conditions/patient-conditions.tsx#PatientConditions"})}catch{}const He={component:_,tags:["docsPage"],argTypes:{className:{options:["Blank","Fixed Width"],control:"select",mapping:{Blank:"","Fixed Width":"ctw-m-auto ctw-max-w-[600px]"}}},args:{className:"Blank",readOnly:!1},decorators:[(e,{args:n})=>t.createElement(oe,{env:"dev",authToken:"dummy-token",builderId:"b123"},t.createElement(ie,{patientID:"u12345",systemURL:ae},t.createElement(e,{args:n})))]},Ie={...se({otherConditions:re,patientConditions:ce})},ke=["Basic"];export{Ie as Basic,ke as __namedExportsOrder,He as default};
//# sourceMappingURL=patient-conditions.stories.98e16337.js.map
