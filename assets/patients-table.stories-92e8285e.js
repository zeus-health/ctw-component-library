import{r as n,R as e}from"./index-6f814c40.js";import{s as x}from"./requests-bcc3bd85.js";import{c as T}from"./index-74f03c09.js";import{w as S,S as k,H as M}from"./error-boundary-a59a4bdf.js";import{L as I}from"./loading-c41f709e.js";import"./_baseForOwn-b2e5e443.js";import"./sortBy-400dab6d.js";import"./sortBy-a6efb69f.js";import"./_baseClone-39df8af0.js";import"./_baseIsEqual-f087c1ca.js";import{u as V}from"./uniq-929f35e8.js";import"./_createSet-fb89f2da.js";import{u as q,a as L,Q as z,C as F}from"./patient-provider-a690f3c5.js";import{T as B}from"./table-c0cb6876.js";import{d as O}from"./debounce-97066b27.js";import"./_commonjsHelpers-042e6b4d.js";import"./request-b468d8d1.js";import"./index-135b3e83.js";import"./faker-42d66913.js";import"./values-c66b9b7f.js";import"./_basePickBy-9cf4e7d3.js";import"./mapValues-98bf2644.js";import"./isPlainObject-3a25496e.js";import"./use-breakpoints-26675c3e.js";import"./pickBy-542c46d7.js";import"./spinner-66aa4ba7.js";import"./toNumber-4f5f2b1f.js";function j(t,a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a},t),n.createElement("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"}))}const A=n.forwardRef(j),$=A;function W(t,a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a},t),n.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}))}const H=n.forwardRef(W),Q=H;function K(t,a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a},t),n.createElement("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"}))}const U=n.forwardRef(K),Y=U;const b=({currentPage:t,isLoading:a=!1,pageSize:r,setCurrentPage:i,total:l})=>{const o=Math.min(l,(t-1)*r+1),p=Math.min(t*r,l),c=Math.ceil(l/r),E=Math.max(t-1,1),w=Math.min(t+1,c);let m=[1,c];return m.push(t-1,t,t+1),m=V(m.sort((s,d)=>s-d).filter(s=>s>=1&&s<=c)),e.createElement("div",{className:"ctw-flex ctw-justify-between ctw-px-6 ctw-py-3","data-zus-telemetry-namespace":"Pagination"},e.createElement("div",{className:"ctw-text-gray-600 ctw-text-sm"},a?e.createElement(I,null):e.createElement(e.Fragment,null,e.createElement("span",{className:"ctw-font-medium"},o)," to"," ",e.createElement("span",{className:"ctw-font-medium"},p)," of"," ",e.createElement("span",{className:"ctw-font-medium"},l)," results")),c>1&&e.createElement("div",null,e.createElement("nav",{className:"ctw-pagination-nav","aria-label":"Pagination"},e.createElement(g,{page:E,setCurrentPage:i,className:"ctw-pagination-group-start ctw-hover:ctw-bg-gray-50",disabled:t===1},e.createElement("span",{className:"ctw-sr-only"},"Previous"),e.createElement($,{className:"ctw-h-5 ctw-w-5","aria-hidden":"true"})),m.map((s,d)=>{const f=m[d-1]??0,u=s-f-1;return e.createElement(n.Fragment,{key:s},u>1&&e.createElement("span",{className:"ctw-pagination-ellipsis"},"..."),u===1&&e.createElement(g,{page:s-1,setCurrentPage:i,currentPage:t}),e.createElement(g,{setCurrentPage:i,page:s,currentPage:t}))}),e.createElement(g,{page:w,setCurrentPage:i,className:"ctw-pagination-group-end",disabled:t===c},e.createElement("span",{className:"ctw-sr-only"},"Next"),e.createElement(Q,{className:"ctw-h-5 ctw-w-5","aria-hidden":"true"})))))},g=({setCurrentPage:t,page:a,currentPage:r,children:i,className:l,disabled:o=!1})=>{const p=a===r;return e.createElement("button",{type:"button",disabled:o,onClick:()=>t(a),className:T(l,"ctw-pagination-page-btn",{active:p,disabled:o}),"data-zus-telemetry-click":"paginate"},i||a)};try{b.displayName="Pagination",b.__docgenInfo={description:"",displayName:"Pagination",props:{currentPage:{defaultValue:null,description:"",name:"currentPage",required:!0,type:{name:"number"}},isLoading:{defaultValue:{value:"false"},description:"",name:"isLoading",required:!1,type:{name:"boolean"}},pageSize:{defaultValue:null,description:"",name:"pageSize",required:!0,type:{name:"number"}},setCurrentPage:{defaultValue:null,description:"",name:"setCurrentPage",required:!0,type:{name:"(n: number) => void"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"number"}}}}}catch{}function D(t,a,r){return q(z,[t,a,r],L)}const y=S(({className:t,handleRowClick:a,pageSize:r=5,title:i="Patients"})=>{const[l,o]=n.useState(1),[p,c]=n.useState(0),[E,w]=n.useState([]),[m,s]=n.useState(),{data:{patients:d,total:f}={},isFetching:u,isError:v}=D(r,l-1,m),P=n.useCallback(O(N=>{s(N),o(1),c(0),w([])},100),[]);return n.useEffect(()=>{!u&&d&&(c(f??0),w(d))},[d,f,v,u]),n.useEffect(()=>{v&&(c(0),w([]))},[v,u]),e.createElement(k,{className:T("ctw-patients-table",t),"data-zus-telemetry-namespace":"PatientsTable"},e.createElement(M,{title:i},e.createElement("div",{className:"ctw-relative"},e.createElement("div",{className:"ctw-search-icon-wrapper"},e.createElement(Y,{className:"ctw-search-icon"})),e.createElement("input",{type:"text",className:"ctw-patients-table-search",placeholder:"Search",name:"searchPatientName",onChange:N=>P(N.currentTarget.value)}))),e.createElement("div",{className:"ctw-overflow-hidden"},e.createElement(B,{records:E,columns:G,handleRowClick:a,pageSize:r,hidePagination:!0},e.createElement(b,{setCurrentPage:o,total:p,currentPage:l,pageSize:r,isLoading:u}))))},"PatientsTable"),G=[{title:"Name",render:t=>e.createElement(J,{patient:t})},{title:"Contact",render:({email:t,phoneNumber:a})=>e.createElement(e.Fragment,null,e.createElement("div",{className:"ctw-patients-table-email"},t),e.createElement("div",{className:"ctw-patients-table-phone"},a))}],J=({patient:t})=>e.createElement("div",{className:"ctw-flex ctw-items-center"},e.createElement("div",{className:"ctw-ml-4"},e.createElement("div",{className:"ctw-flex ctw-font-medium"},e.createElement("div",{className:"ctw-max-w-xs"},t.fullName),t.gender&&e.createElement("div",{className:"ctw-uppercase"}," (",t.gender[0],")")),e.createElement("div",{className:"ctw-text-content-lighter"},t.dob," (",t.age,")")));try{y.displayName="PatientsTable",y.__docgenInfo={description:"PatientsTable displays a paginated list of all patients for a builder. In\naddition to having configurable page size, lazy loading and name search, the\ncomponent accepts an `onRowClick` prop so developers can add their own\nlogic when a row is clicked. The `onRowClick` receives the targeted\n`PatientModel` as its sole argument, which contains the underlying FHIR\nobject as `.resource`.",displayName:"PatientsTable",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}},handleRowClick:{defaultValue:null,description:"",name:"handleRowClick",required:!0,type:{name:"(row: PatientModel) => void"}},pageSize:{defaultValue:null,description:"",name:"pageSize",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},getRowClasses:{defaultValue:null,description:"",name:"getRowClasses",required:!1,type:{name:"((row: PatientModel) => Argument)"}},onRowClick:{defaultValue:null,description:"",name:"onRowClick",required:!1,type:{name:"((row: PatientModel) => void)"}}}}}catch{}const X=17,Te={tags:["autodocs"],component:y,decorators:[(t,{args:a})=>e.createElement(F,{env:"dev",authToken:"ey.12345",builderId:"12345"},e.createElement(t,{args:a}))],...x(X)},h={};var C,R,_;h.parameters={...h.parameters,docs:{...(C=h.parameters)==null?void 0:C.docs,source:{originalSource:"{}",...(_=(R=h.parameters)==null?void 0:R.docs)==null?void 0:_.source}}};const Pe=["Basic"];export{h as Basic,Pe as __namedExportsOrder,Te as default};
