var yi=Object.defineProperty;var vi=(c,d,g)=>d in c?yi(c,d,{enumerable:!0,configurable:!0,writable:!0,value:g}):c[d]=g;var Gr=(c,d,g)=>(vi(c,typeof d!="symbol"?d+"":d,g),g),da=(c,d,g)=>{if(!d.has(c))throw TypeError("Cannot "+g)};var dt=(c,d,g)=>(da(c,d,"read from private field"),g?g.call(c):d.get(c)),er=(c,d,g)=>{if(d.has(c))throw TypeError("Cannot add the same private member more than once");d instanceof WeakSet?d.add(c):d.set(c,g)},hr=(c,d,g,v)=>(da(c,d,"write to private field"),v?v.call(c,g):d.set(c,g),g),fa=(c,d,g,v)=>({set _(b){hr(c,d,b,g)},get _(){return dt(c,d,v)}}),ar=(c,d,g)=>(da(c,d,"access private method"),g);import{r as react,R as React,a as React$1}from"./index.9f56b196.js";import{c as cx}from"./index.d3b8680b.js";import{l as lodash,T as Table$1,i as isMouseEvent}from"./table.6dce43b2.js";import{S as Subscribable,s as shallowEqualObjects,n as noop,i as isServer,a as isValidTimeout,t as timeUntilStale,f as focusManager,c as canFetch,b as replaceData,d as isCancelledError,e as notifyManager,p as parseQueryArgs,g as requireBrowser$1,C as CTW_REQUEST_HEADER,q as queryClient,h as ctwFetch,j as requireLib,r as requireLib$1}from"./index.7dcc3bb2.js";import{c as commonjsGlobal,a as getAugmentedNamespace}from"./_commonjsHelpers.712cc82f.js";import{c as commonjsRequire,_ as _extends}from"./extends.bed14d96.js";import{s as s$2,a as s$3,e as e$3,o as o$1,C,y,I,p as p$2,m as m$1,$ as $$1,S,b as s$4,c as p$3,d as m$2,u as u$1,L,f as C$1,h as h$1,g as s$5,F as F$1,i as o$2,r as r$2,j as S$1,n as n$2,k as F$2,N as N$1,D as D$1,T,l as I$1,q as Drawer,W as We$1,t as gt,X as XIcon}from"./drawer.0ebe46ba.js";import{S as Spinner}from"./spinner.51ecf2bb.js";import{r as reactDom,R as ReactDOM}from"./index.f2b75861.js";import{D as DataList,e as entryFromArray}from"./data-list.6d7c3503.js";import{f as fp}from"./action-list.8d2557fc.js";class QueryObserver extends Subscribable{constructor(d,g){super(),this.client=d,this.options=g,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(g)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.length===1&&(this.currentQuery.addObserver(this),shouldFetchOnMount(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(d,g){const v=this.options,b=this.currentQuery;if(this.options=this.client.defaultQueryOptions(d),shallowEqualObjects(v,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=v.queryKey),this.updateQuery();const _=this.hasListeners();_&&shouldFetchOptionally(this.currentQuery,b,this.options,v)&&this.executeFetch(),this.updateResult(g),_&&(this.currentQuery!==b||this.options.enabled!==v.enabled||this.options.staleTime!==v.staleTime)&&this.updateStaleTimeout();const E=this.computeRefetchInterval();_&&(this.currentQuery!==b||this.options.enabled!==v.enabled||E!==this.currentRefetchInterval)&&this.updateRefetchInterval(E)}getOptimisticResult(d){const g=this.client.getQueryCache().build(this.client,d);return this.createResult(g,d)}getCurrentResult(){return this.currentResult}trackResult(d){const g={};return Object.keys(d).forEach(v=>{Object.defineProperty(g,v,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(v),d[v])})}),g}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:d,...g}={}){return this.fetch({...g,meta:{refetchPage:d}})}fetchOptimistic(d){const g=this.client.defaultQueryOptions(d),v=this.client.getQueryCache().build(this.client,g);return v.isFetchingOptimistic=!0,v.fetch().then(()=>this.createResult(v,g))}fetch(d){var g;return this.executeFetch({...d,cancelRefetch:(g=d.cancelRefetch)!=null?g:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(d){this.updateQuery();let g=this.currentQuery.fetch(this.options,d);return d!=null&&d.throwOnError||(g=g.catch(noop)),g}updateStaleTimeout(){if(this.clearStaleTimeout(),isServer||this.currentResult.isStale||!isValidTimeout(this.options.staleTime))return;const g=timeUntilStale(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},g)}computeRefetchInterval(){var d;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(d=this.options.refetchInterval)!=null?d:!1}updateRefetchInterval(d){this.clearRefetchInterval(),this.currentRefetchInterval=d,!(isServer||this.options.enabled===!1||!isValidTimeout(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(d,g){const v=this.currentQuery,b=this.options,_=this.currentResult,E=this.currentResultState,R=this.currentResultOptions,M=d!==v,P=M?d.state:this.currentQueryInitialState,O=M?this.currentResult:this.previousQueryResult,{state:H}=d;let{dataUpdatedAt:Q,error:ee,errorUpdatedAt:V,fetchStatus:W,status:Y}=H,U=!1,G=!1,te;if(g._optimisticResults){const be=this.hasListeners(),ae=!be&&shouldFetchOnMount(d,g),ie=be&&shouldFetchOptionally(d,v,g,b);(ae||ie)&&(W=canFetch(d.options.networkMode)?"fetching":"paused",Q||(Y="loading")),g._optimisticResults==="isRestoring"&&(W="idle")}if(g.keepPreviousData&&!H.dataUpdateCount&&O!=null&&O.isSuccess&&Y!=="error")te=O.data,Q=O.dataUpdatedAt,Y=O.status,U=!0;else if(g.select&&typeof H.data<"u")if(_&&H.data===(E==null?void 0:E.data)&&g.select===this.selectFn)te=this.selectResult;else try{this.selectFn=g.select,te=g.select(H.data),te=replaceData(_==null?void 0:_.data,te,g),this.selectResult=te,this.selectError=null}catch(be){this.selectError=be}else te=H.data;if(typeof g.placeholderData<"u"&&typeof te>"u"&&Y==="loading"){let be;if(_!=null&&_.isPlaceholderData&&g.placeholderData===(R==null?void 0:R.placeholderData))be=_.data;else if(be=typeof g.placeholderData=="function"?g.placeholderData():g.placeholderData,g.select&&typeof be<"u")try{be=g.select(be),be=replaceData(_==null?void 0:_.data,be,g),this.selectError=null}catch(ae){this.selectError=ae}typeof be<"u"&&(Y="success",te=be,G=!0)}this.selectError&&(ee=this.selectError,te=this.selectResult,V=Date.now(),Y="error");const B=W==="fetching",j=Y==="loading",X=Y==="error";return{status:Y,fetchStatus:W,isLoading:j,isSuccess:Y==="success",isError:X,isInitialLoading:j&&B,data:te,dataUpdatedAt:Q,error:ee,errorUpdatedAt:V,failureCount:H.fetchFailureCount,errorUpdateCount:H.errorUpdateCount,isFetched:H.dataUpdateCount>0||H.errorUpdateCount>0,isFetchedAfterMount:H.dataUpdateCount>P.dataUpdateCount||H.errorUpdateCount>P.errorUpdateCount,isFetching:B,isRefetching:B&&!j,isLoadingError:X&&H.dataUpdatedAt===0,isPaused:W==="paused",isPlaceholderData:G,isPreviousData:U,isRefetchError:X&&H.dataUpdatedAt!==0,isStale:isStale(d,g),refetch:this.refetch,remove:this.remove}}updateResult(d){const g=this.currentResult,v=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,shallowEqualObjects(v,g))return;this.currentResult=v;const b={cache:!0},_=()=>{if(!g)return!0;const{notifyOnChangeProps:E}=this.options;if(E==="all"||!E&&!this.trackedProps.size)return!0;const R=new Set(E!=null?E:this.trackedProps);return this.options.useErrorBoundary&&R.add("error"),Object.keys(this.currentResult).some(M=>{const P=M;return this.currentResult[P]!==g[P]&&R.has(P)})};(d==null?void 0:d.listeners)!==!1&&_()&&(b.listeners=!0),this.notify({...b,...d})}updateQuery(){const d=this.client.getQueryCache().build(this.client,this.options);if(d===this.currentQuery)return;const g=this.currentQuery;this.currentQuery=d,this.currentQueryInitialState=d.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(g==null||g.removeObserver(this),d.addObserver(this))}onQueryUpdate(d){const g={};d.type==="success"?g.onSuccess=!d.manual:d.type==="error"&&!isCancelledError(d.error)&&(g.onError=!0),this.updateResult(g),this.hasListeners()&&this.updateTimers()}notify(d){notifyManager.batch(()=>{if(d.onSuccess){var g,v,b,_;(g=(v=this.options).onSuccess)==null||g.call(v,this.currentResult.data),(b=(_=this.options).onSettled)==null||b.call(_,this.currentResult.data,null)}else if(d.onError){var E,R,M,P;(E=(R=this.options).onError)==null||E.call(R,this.currentResult.error),(M=(P=this.options).onSettled)==null||M.call(P,void 0,this.currentResult.error)}d.listeners&&this.listeners.forEach(O=>{O(this.currentResult)}),d.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function shouldLoadOnMount(c,d){return d.enabled!==!1&&!c.state.dataUpdatedAt&&!(c.state.status==="error"&&d.retryOnMount===!1)}function shouldFetchOnMount(c,d){return shouldLoadOnMount(c,d)||c.state.dataUpdatedAt>0&&shouldFetchOn(c,d,d.refetchOnMount)}function shouldFetchOn(c,d,g){if(d.enabled!==!1){const v=typeof g=="function"?g(c):g;return v==="always"||v!==!1&&isStale(c,d)}return!1}function shouldFetchOptionally(c,d,g,v){return g.enabled!==!1&&(c!==d||v.enabled===!1)&&(!g.suspense||c.state.status!=="error")&&isStale(c,g)}function isStale(c,d){return c.isStaleByTime(d.staleTime)}var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$2=react.exports;function h(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var k$1=typeof Object.is=="function"?Object.is:h,l=e$2.useState,m=e$2.useEffect,n$1=e$2.useLayoutEffect,p$1=e$2.useDebugValue;function q$1(c,d){var g=d(),v=l({inst:{value:g,getSnapshot:d}}),b=v[0].inst,_=v[1];return n$1(function(){b.value=g,b.getSnapshot=d,r$1(b)&&_({inst:b})},[c,g,d]),m(function(){return r$1(b)&&_({inst:b}),c(function(){r$1(b)&&_({inst:b})})},[c]),p$1(g),g}function r$1(c){var d=c.getSnapshot;c=c.value;try{var g=d();return!k$1(c,g)}catch{return!0}}function t$1(c,d){return d()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$1:q$1;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$2.useSyncExternalStore!==void 0?e$2.useSyncExternalStore:u;(function(c){c.exports=useSyncExternalStoreShim_production_min})(shim);const useSyncExternalStore=shim.exports.useSyncExternalStore,defaultContext=react.exports.createContext(void 0),QueryClientSharingContext=react.exports.createContext(!1);function getQueryClientContext(c,d){return c||(d&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=defaultContext),window.ReactQueryClientContext):defaultContext)}const useQueryClient=({context:c}={})=>{const d=react.exports.useContext(getQueryClientContext(c,react.exports.useContext(QueryClientSharingContext)));if(!d)throw new Error("No QueryClient set, use QueryClientProvider to set one");return d},QueryClientProvider=({client:c,children:d,context:g,contextSharing:v=!1})=>{react.exports.useEffect(()=>(c.mount(),()=>{c.unmount()}),[c]);const b=getQueryClientContext(g,v);return react.exports.createElement(QueryClientSharingContext.Provider,{value:!g&&v},react.exports.createElement(b.Provider,{value:c},d))},IsRestoringContext=react.exports.createContext(!1),useIsRestoring=()=>react.exports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let c=!1;return{clearReset:()=>{c=!1},reset:()=>{c=!0},isReset:()=>c}}const QueryErrorResetBoundaryContext=react.exports.createContext(createValue()),useQueryErrorResetBoundary=()=>react.exports.useContext(QueryErrorResetBoundaryContext);function shouldThrowError(c,d){return typeof c=="function"?c(...d):!!c}const ensurePreventErrorBoundaryRetry=(c,d)=>{(c.suspense||c.useErrorBoundary)&&(d.isReset()||(c.retryOnMount=!1))},useClearResetErrorBoundary=c=>{react.exports.useEffect(()=>{c.clearReset()},[c])},getHasError=({result:c,errorResetBoundary:d,useErrorBoundary:g,query:v})=>c.isError&&!d.isReset()&&!c.isFetching&&shouldThrowError(g,[c.error,v]);function useBaseQuery(c,d){const g=useQueryClient({context:c.context}),v=useIsRestoring(),b=useQueryErrorResetBoundary(),_=g.defaultQueryOptions(c);_._optimisticResults=v?"isRestoring":"optimistic",_.onError&&(_.onError=notifyManager.batchCalls(_.onError)),_.onSuccess&&(_.onSuccess=notifyManager.batchCalls(_.onSuccess)),_.onSettled&&(_.onSettled=notifyManager.batchCalls(_.onSettled)),_.suspense&&typeof _.staleTime!="number"&&(_.staleTime=1e3),ensurePreventErrorBoundaryRetry(_,b),useClearResetErrorBoundary(b);const[E]=react.exports.useState(()=>new d(g,_)),R=E.getOptimisticResult(_);if(useSyncExternalStore(react.exports.useCallback(M=>v?()=>{}:E.subscribe(notifyManager.batchCalls(M)),[E,v]),()=>E.getCurrentResult(),()=>E.getCurrentResult()),react.exports.useEffect(()=>{E.setOptions(_,{listeners:!1})},[_,E]),_.suspense&&R.isLoading&&R.isFetching&&!v)throw E.fetchOptimistic(_).then(({data:M})=>{_.onSuccess==null||_.onSuccess(M),_.onSettled==null||_.onSettled(M,null)}).catch(M=>{b.clearReset(),_.onError==null||_.onError(M),_.onSettled==null||_.onSettled(void 0,M)});if(getHasError({result:R,errorResetBoundary:b,useErrorBoundary:_.useErrorBoundary,query:E.getCurrentQuery()}))throw R.error;return _.notifyOnChangeProps?R:E.trackResult(R)}function useQuery(c,d,g){const v=parseQueryArgs(c,d,g);return useBaseQuery(v,QueryObserver)}const version="0.33.0",CTWStateContext=react.exports.createContext(void 0);var client={exports:{}},queryString$1={},strictUriEncode=c=>encodeURIComponent(c).replace(/[!'()*]/g,d=>`%${d.charCodeAt(0).toString(16).toUpperCase()}`),token="%[a-f0-9]{2}",singleMatcher=new RegExp("("+token+")|([^%]+?)","gi"),multiMatcher=new RegExp("("+token+")+","gi");function decodeComponents(c,d){try{return[decodeURIComponent(c.join(""))]}catch{}if(c.length===1)return c;d=d||1;var g=c.slice(0,d),v=c.slice(d);return Array.prototype.concat.call([],decodeComponents(g),decodeComponents(v))}function decode(c){try{return decodeURIComponent(c)}catch{for(var d=c.match(singleMatcher)||[],g=1;g<d.length;g++)c=decodeComponents(d,g).join(""),d=c.match(singleMatcher)||[];return c}}function customDecodeURIComponent(c){for(var d={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},g=multiMatcher.exec(c);g;){try{d[g[0]]=decodeURIComponent(g[0])}catch{var v=decode(g[0]);v!==g[0]&&(d[g[0]]=v)}g=multiMatcher.exec(c)}d["%C2"]="\uFFFD";for(var b=Object.keys(d),_=0;_<b.length;_++){var E=b[_];c=c.replace(new RegExp(E,"g"),d[E])}return c}var decodeUriComponent=function(c){if(typeof c!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof c+"`");try{return c=c.replace(/\+/g," "),decodeURIComponent(c)}catch{return customDecodeURIComponent(c)}},splitOnFirst=(c,d)=>{if(!(typeof c=="string"&&typeof d=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(d==="")return[c];const g=c.indexOf(d);return g===-1?[c]:[c.slice(0,g),c.slice(g+d.length)]},filterObj=function(c,d){for(var g={},v=Object.keys(c),b=Array.isArray(d),_=0;_<v.length;_++){var E=v[_],R=c[E];(b?d.indexOf(E)!==-1:d(E,R,c))&&(g[E]=R)}return g};(function(c){const d=strictUriEncode,g=decodeUriComponent,v=splitOnFirst,b=filterObj,_=G=>G==null,E=Symbol("encodeFragmentIdentifier");function R(G){switch(G.arrayFormat){case"index":return te=>(B,j)=>{const X=B.length;return j===void 0||G.skipNull&&j===null||G.skipEmptyString&&j===""?B:j===null?[...B,[O(te,G),"[",X,"]"].join("")]:[...B,[O(te,G),"[",O(X,G),"]=",O(j,G)].join("")]};case"bracket":return te=>(B,j)=>j===void 0||G.skipNull&&j===null||G.skipEmptyString&&j===""?B:j===null?[...B,[O(te,G),"[]"].join("")]:[...B,[O(te,G),"[]=",O(j,G)].join("")];case"colon-list-separator":return te=>(B,j)=>j===void 0||G.skipNull&&j===null||G.skipEmptyString&&j===""?B:j===null?[...B,[O(te,G),":list="].join("")]:[...B,[O(te,G),":list=",O(j,G)].join("")];case"comma":case"separator":case"bracket-separator":{const te=G.arrayFormat==="bracket-separator"?"[]=":"=";return B=>(j,X)=>X===void 0||G.skipNull&&X===null||G.skipEmptyString&&X===""?j:(X=X===null?"":X,j.length===0?[[O(B,G),te,O(X,G)].join("")]:[[j,O(X,G)].join(G.arrayFormatSeparator)])}default:return te=>(B,j)=>j===void 0||G.skipNull&&j===null||G.skipEmptyString&&j===""?B:j===null?[...B,O(te,G)]:[...B,[O(te,G),"=",O(j,G)].join("")]}}function M(G){let te;switch(G.arrayFormat){case"index":return(B,j,X)=>{if(te=/\[(\d*)\]$/.exec(B),B=B.replace(/\[\d*\]$/,""),!te){X[B]=j;return}X[B]===void 0&&(X[B]={}),X[B][te[1]]=j};case"bracket":return(B,j,X)=>{if(te=/(\[\])$/.exec(B),B=B.replace(/\[\]$/,""),!te){X[B]=j;return}if(X[B]===void 0){X[B]=[j];return}X[B]=[].concat(X[B],j)};case"colon-list-separator":return(B,j,X)=>{if(te=/(:list)$/.exec(B),B=B.replace(/:list$/,""),!te){X[B]=j;return}if(X[B]===void 0){X[B]=[j];return}X[B]=[].concat(X[B],j)};case"comma":case"separator":return(B,j,X)=>{const oe=typeof j=="string"&&j.includes(G.arrayFormatSeparator),be=typeof j=="string"&&!oe&&H(j,G).includes(G.arrayFormatSeparator);j=be?H(j,G):j;const ae=oe||be?j.split(G.arrayFormatSeparator).map(ie=>H(ie,G)):j===null?j:H(j,G);X[B]=ae};case"bracket-separator":return(B,j,X)=>{const oe=/(\[\])$/.test(B);if(B=B.replace(/\[\]$/,""),!oe){X[B]=j&&H(j,G);return}const be=j===null?[]:j.split(G.arrayFormatSeparator).map(ae=>H(ae,G));if(X[B]===void 0){X[B]=be;return}X[B]=[].concat(X[B],be)};default:return(B,j,X)=>{if(X[B]===void 0){X[B]=j;return}X[B]=[].concat(X[B],j)}}}function P(G){if(typeof G!="string"||G.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function O(G,te){return te.encode?te.strict?d(G):encodeURIComponent(G):G}function H(G,te){return te.decode?g(G):G}function Q(G){return Array.isArray(G)?G.sort():typeof G=="object"?Q(Object.keys(G)).sort((te,B)=>Number(te)-Number(B)).map(te=>G[te]):G}function ee(G){const te=G.indexOf("#");return te!==-1&&(G=G.slice(0,te)),G}function V(G){let te="";const B=G.indexOf("#");return B!==-1&&(te=G.slice(B)),te}function W(G){G=ee(G);const te=G.indexOf("?");return te===-1?"":G.slice(te+1)}function Y(G,te){return te.parseNumbers&&!Number.isNaN(Number(G))&&typeof G=="string"&&G.trim()!==""?G=Number(G):te.parseBooleans&&G!==null&&(G.toLowerCase()==="true"||G.toLowerCase()==="false")&&(G=G.toLowerCase()==="true"),G}function U(G,te){te=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},te),P(te.arrayFormatSeparator);const B=M(te),j=Object.create(null);if(typeof G!="string"||(G=G.trim().replace(/^[?#&]/,""),!G))return j;for(const X of G.split("&")){if(X==="")continue;let[oe,be]=v(te.decode?X.replace(/\+/g," "):X,"=");be=be===void 0?null:["comma","separator","bracket-separator"].includes(te.arrayFormat)?be:H(be,te),B(H(oe,te),be,j)}for(const X of Object.keys(j)){const oe=j[X];if(typeof oe=="object"&&oe!==null)for(const be of Object.keys(oe))oe[be]=Y(oe[be],te);else j[X]=Y(oe,te)}return te.sort===!1?j:(te.sort===!0?Object.keys(j).sort():Object.keys(j).sort(te.sort)).reduce((X,oe)=>{const be=j[oe];return Boolean(be)&&typeof be=="object"&&!Array.isArray(be)?X[oe]=Q(be):X[oe]=be,X},Object.create(null))}c.extract=W,c.parse=U,c.stringify=(G,te)=>{if(!G)return"";te=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},te),P(te.arrayFormatSeparator);const B=be=>te.skipNull&&_(G[be])||te.skipEmptyString&&G[be]==="",j=R(te),X={};for(const be of Object.keys(G))B(be)||(X[be]=G[be]);const oe=Object.keys(X);return te.sort!==!1&&oe.sort(te.sort),oe.map(be=>{const ae=G[be];return ae===void 0?"":ae===null?O(be,te):Array.isArray(ae)?ae.length===0&&te.arrayFormat==="bracket-separator"?O(be,te)+"[]":ae.reduce(j(be),[]).join("&"):O(be,te)+"="+O(ae,te)}).filter(be=>be.length>0).join("&")},c.parseUrl=(G,te)=>{te=Object.assign({decode:!0},te);const[B,j]=v(G,"#");return Object.assign({url:B.split("?")[0]||"",query:U(W(G),te)},te&&te.parseFragmentIdentifier&&j?{fragmentIdentifier:H(j,te)}:{})},c.stringifyUrl=(G,te)=>{te=Object.assign({encode:!0,strict:!0,[E]:!0},te);const B=ee(G.url).split("?")[0]||"",j=c.extract(G.url),X=c.parse(j,{sort:!1}),oe=Object.assign(X,G.query);let be=c.stringify(oe,te);be&&(be=`?${be}`);let ae=V(G.url);return G.fragmentIdentifier&&(ae=`#${te[E]?O(G.fragmentIdentifier,te):G.fragmentIdentifier}`),`${B}${be}${ae}`},c.pick=(G,te,B)=>{B=Object.assign({parseFragmentIdentifier:!0,[E]:!1},B);const{url:j,query:X,fragmentIdentifier:oe}=c.parseUrl(G,B);return c.stringifyUrl({url:j,query:b(X,te),fragmentIdentifier:oe},B)},c.exclude=(G,te,B)=>{const j=Array.isArray(te)?X=>!te.includes(X):(X,oe)=>!te(X,oe);return c.pick(G,j,B)}})(queryString$1);var stringify$1={exports:{}};(function(c,d){d=c.exports=g,d.getSerialize=v;function g(b,_,E,R){return JSON.stringify(b,v(_,R),E)}function v(b,_){var E=[],R=[];return _==null&&(_=function(M,P){return E[0]===P?"[Circular ~]":"[Circular ~."+R.slice(0,E.indexOf(P)).join(".")+"]"}),function(M,P){if(E.length>0){var O=E.indexOf(this);~O?E.splice(O+1):E.push(this),~O?R.splice(O,1/0,M):R.push(M),~E.indexOf(P)&&(P=_.call(this,M,P))}else E.push(P);return b==null?P:b.call(this,M,P)}}})(stringify$1,stringify$1.exports);const stringify=stringify$1.exports,errorLogger=requireBrowser$1()("fhir-kit-client:error"),infoLogger=requireBrowser$1()("fhir-kit-client:info");function inspectObject(c){return stringify(c)}function inspectHeaders(c){return c.raw&&typeof c.raw=="function"?inspectObject(c.raw()):inspectObject(c)}function logRequestError$1(c){!errorLogger.enabled||(errorLogger("!!! Error"),c.response&&errorLogger(`    Status: ${c.response.status}`),c.config&&(errorLogger(`    ${c.config.method.toUpperCase()}: ${c.config.url}`),errorLogger(`    Headers: ${inspectHeaders(c.config.headers)}`)),c.response&&c.response.data&&errorLogger(inspectObject(c.response.data)),errorLogger("!!! Request Error"))}function logRequestInfo$1(c,d,g){!infoLogger.enabled||(d&&infoLogger(`Request: ${c.toUpperCase()} ${d.toString()}`),infoLogger(`Request Headers: ${inspectHeaders(g)}`))}function logResponseInfo$1(c){!infoLogger.enabled||(infoLogger(`Response: ${c.status}`),c.data&&infoLogger(inspectObject(c.data)))}function logError$1(c){!errorLogger.enabled||errorLogger(c)}var logging={logRequestError:logRequestError$1,logRequestInfo:logRequestInfo$1,logResponseInfo:logResponseInfo$1,logError:logError$1};const smartOauthUrl="http://fhir-registry.smarthealthit.org/StructureDefinition/oauth-uris",{logError}=logging;function authFromCapability(c){const d={};try{return c.rest.forEach(g=>{g.security.extension.find(b=>b.url===smartOauthUrl).extension.forEach(b=>{switch(b.url){case"authorize":d.authorizeUrl=new URL(b.valueUri);break;case"token":d.tokenUrl=new URL(b.valueUri);break;case"register":d.registerUrl=new URL(b.valueUri);break;case"manage":d.manageUrl=new URL(b.valueUri);break;default:}})}),d}catch(g){return logError(g),d}}function authFromWellKnown(c){const{authorization_endpoint:d,token_endpoint:g,registration_endpoint:v}=c;return{authorizeUrl:d&&new URL(d),tokenUrl:g&&new URL(g),registerUrl:v&&new URL(v)}}var smart={authFromCapability,authFromWellKnown},es6Promise={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(c,d){(function(g,v){c.exports=v()})(commonjsGlobal,function(){function g(yt){var lt=typeof yt;return yt!==null&&(lt==="object"||lt==="function")}function v(yt){return typeof yt=="function"}var b=void 0;Array.isArray?b=Array.isArray:b=function(yt){return Object.prototype.toString.call(yt)==="[object Array]"};var _=b,E=0,R=void 0,M=void 0,P=function(lt,at){X[E]=lt,X[E+1]=at,E+=2,E===2&&(M?M(oe):ae())};function O(yt){M=yt}function H(yt){P=yt}var Q=typeof window<"u"?window:void 0,ee=Q||{},V=ee.MutationObserver||ee.WebKitMutationObserver,W=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",Y=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function U(){return function(){return process.nextTick(oe)}}function G(){return typeof R<"u"?function(){R(oe)}:j()}function te(){var yt=0,lt=new V(oe),at=document.createTextNode("");return lt.observe(at,{characterData:!0}),function(){at.data=yt=++yt%2}}function B(){var yt=new MessageChannel;return yt.port1.onmessage=oe,function(){return yt.port2.postMessage(0)}}function j(){var yt=setTimeout;return function(){return yt(oe,1)}}var X=new Array(1e3);function oe(){for(var yt=0;yt<E;yt+=2){var lt=X[yt],at=X[yt+1];lt(at),X[yt]=void 0,X[yt+1]=void 0}E=0}function be(){try{var yt=Function("return this")().require("vertx");return R=yt.runOnLoop||yt.runOnContext,G()}catch{return j()}}var ae=void 0;W?ae=U():V?ae=te():Y?ae=B():Q===void 0&&typeof commonjsRequire=="function"?ae=be():ae=j();function ie(yt,lt){var at=this,ze=new this.constructor(it);ze[mt]===void 0&&kt(ze);var ct=at._state;if(ct){var Ze=arguments[ct-1];P(function(){return vt(ct,ze,Ze,at._result)})}else rt(at,ze,yt,lt);return ze}function Se(yt){var lt=this;if(yt&&typeof yt=="object"&&yt.constructor===lt)return yt;var at=new lt(it);return Pe(at,yt),at}var mt=Math.random().toString(36).substring(2);function it(){}var Tt=void 0,ht=1,Ye=2;function St(){return new TypeError("You cannot resolve a promise with itself")}function $t(){return new TypeError("A promises callback cannot return that same promise.")}function Lt(yt,lt,at,ze){try{yt.call(lt,at,ze)}catch(ct){return ct}}function Mt(yt,lt,at){P(function(ze){var ct=!1,Ze=Lt(at,lt,function(Ot){ct||(ct=!0,lt!==Ot?Pe(ze,Ot):nt(ze,Ot))},function(Ot){ct||(ct=!0,st(ze,Ot))},"Settle: "+(ze._label||" unknown promise"));!ct&&Ze&&(ct=!0,st(ze,Ze))},yt)}function jt(yt,lt){lt._state===ht?nt(yt,lt._result):lt._state===Ye?st(yt,lt._result):rt(lt,void 0,function(at){return Pe(yt,at)},function(at){return st(yt,at)})}function Qe(yt,lt,at){lt.constructor===yt.constructor&&at===ie&&lt.constructor.resolve===Se?jt(yt,lt):at===void 0?nt(yt,lt):v(at)?Mt(yt,lt,at):nt(yt,lt)}function Pe(yt,lt){if(yt===lt)st(yt,St());else if(g(lt)){var at=void 0;try{at=lt.then}catch(ze){st(yt,ze);return}Qe(yt,lt,at)}else nt(yt,lt)}function Ee(yt){yt._onerror&&yt._onerror(yt._result),tt(yt)}function nt(yt,lt){yt._state===Tt&&(yt._result=lt,yt._state=ht,yt._subscribers.length!==0&&P(tt,yt))}function st(yt,lt){yt._state===Tt&&(yt._state=Ye,yt._result=lt,P(Ee,yt))}function rt(yt,lt,at,ze){var ct=yt._subscribers,Ze=ct.length;yt._onerror=null,ct[Ze]=lt,ct[Ze+ht]=at,ct[Ze+Ye]=ze,Ze===0&&yt._state&&P(tt,yt)}function tt(yt){var lt=yt._subscribers,at=yt._state;if(lt.length!==0){for(var ze=void 0,ct=void 0,Ze=yt._result,Ot=0;Ot<lt.length;Ot+=3)ze=lt[Ot],ct=lt[Ot+at],ze?vt(at,ze,ct,Ze):ct(Ze);yt._subscribers.length=0}}function vt(yt,lt,at,ze){var ct=v(at),Ze=void 0,Ot=void 0,Ht=!0;if(ct){try{Ze=at(ze)}catch(Xt){Ht=!1,Ot=Xt}if(lt===Ze){st(lt,$t());return}}else Ze=ze;lt._state!==Tt||(ct&&Ht?Pe(lt,Ze):Ht===!1?st(lt,Ot):yt===ht?nt(lt,Ze):yt===Ye&&st(lt,Ze))}function It(yt,lt){try{lt(function(ze){Pe(yt,ze)},function(ze){st(yt,ze)})}catch(at){st(yt,at)}}var Vt=0;function wt(){return Vt++}function kt(yt){yt[mt]=Vt++,yt._state=void 0,yt._result=void 0,yt._subscribers=[]}function Zt(){return new Error("Array Methods must be provided an Array")}var Qt=function(){function yt(lt,at){this._instanceConstructor=lt,this.promise=new lt(it),this.promise[mt]||kt(this.promise),_(at)?(this.length=at.length,this._remaining=at.length,this._result=new Array(this.length),this.length===0?nt(this.promise,this._result):(this.length=this.length||0,this._enumerate(at),this._remaining===0&&nt(this.promise,this._result))):st(this.promise,Zt())}return yt.prototype._enumerate=function(at){for(var ze=0;this._state===Tt&&ze<at.length;ze++)this._eachEntry(at[ze],ze)},yt.prototype._eachEntry=function(at,ze){var ct=this._instanceConstructor,Ze=ct.resolve;if(Ze===Se){var Ot=void 0,Ht=void 0,Xt=!1;try{Ot=at.then}catch(cr){Xt=!0,Ht=cr}if(Ot===ie&&at._state!==Tt)this._settledAt(at._state,ze,at._result);else if(typeof Ot!="function")this._remaining--,this._result[ze]=at;else if(ct===ut){var ur=new ct(it);Xt?st(ur,Ht):Qe(ur,at,Ot),this._willSettleAt(ur,ze)}else this._willSettleAt(new ct(function(cr){return cr(at)}),ze)}else this._willSettleAt(Ze(at),ze)},yt.prototype._settledAt=function(at,ze,ct){var Ze=this.promise;Ze._state===Tt&&(this._remaining--,at===Ye?st(Ze,ct):this._result[ze]=ct),this._remaining===0&&nt(Ze,this._result)},yt.prototype._willSettleAt=function(at,ze){var ct=this;rt(at,void 0,function(Ze){return ct._settledAt(ht,ze,Ze)},function(Ze){return ct._settledAt(Ye,ze,Ze)})},yt}();function Z(yt){return new Qt(this,yt).promise}function z(yt){var lt=this;return _(yt)?new lt(function(at,ze){for(var ct=yt.length,Ze=0;Ze<ct;Ze++)lt.resolve(yt[Ze]).then(at,ze)}):new lt(function(at,ze){return ze(new TypeError("You must pass an array to race."))})}function K(yt){var lt=this,at=new lt(it);return st(at,yt),at}function ne(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Ae(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ut=function(){function yt(lt){this[mt]=wt(),this._result=this._state=void 0,this._subscribers=[],it!==lt&&(typeof lt!="function"&&ne(),this instanceof yt?It(this,lt):Ae())}return yt.prototype.catch=function(at){return this.then(null,at)},yt.prototype.finally=function(at){var ze=this,ct=ze.constructor;return v(at)?ze.then(function(Ze){return ct.resolve(at()).then(function(){return Ze})},function(Ze){return ct.resolve(at()).then(function(){throw Ze})}):ze.then(at,at)},yt}();ut.prototype.then=ie,ut.all=Z,ut.race=z,ut.resolve=Se,ut.reject=K,ut._setScheduler=O,ut._setAsap=H,ut._asap=P;function Rt(){var yt=void 0;if(typeof commonjsGlobal<"u")yt=commonjsGlobal;else if(typeof self<"u")yt=self;else try{yt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var lt=yt.Promise;if(lt){var at=null;try{at=Object.prototype.toString.call(lt.resolve())}catch{}if(at==="[object Promise]"&&!lt.cast)return}yt.Promise=ut}return ut.polyfill=Rt,ut.Promise=ut,ut})})(es6Promise);(function(){(function(c){(function(d){var g={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function v(ae){return ae&&DataView.prototype.isPrototypeOf(ae)}if(g.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=ArrayBuffer.isView||function(ae){return ae&&b.indexOf(Object.prototype.toString.call(ae))>-1};function E(ae){if(typeof ae!="string"&&(ae=String(ae)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(ae))throw new TypeError("Invalid character in header field name");return ae.toLowerCase()}function R(ae){return typeof ae!="string"&&(ae=String(ae)),ae}function M(ae){var ie={next:function(){var Se=ae.shift();return{done:Se===void 0,value:Se}}};return g.iterable&&(ie[Symbol.iterator]=function(){return ie}),ie}function P(ae){this.map={},ae instanceof P?ae.forEach(function(ie,Se){this.append(Se,ie)},this):Array.isArray(ae)?ae.forEach(function(ie){this.append(ie[0],ie[1])},this):ae&&Object.getOwnPropertyNames(ae).forEach(function(ie){this.append(ie,ae[ie])},this)}P.prototype.append=function(ae,ie){ae=E(ae),ie=R(ie);var Se=this.map[ae];this.map[ae]=Se?Se+", "+ie:ie},P.prototype.delete=function(ae){delete this.map[E(ae)]},P.prototype.get=function(ae){return ae=E(ae),this.has(ae)?this.map[ae]:null},P.prototype.has=function(ae){return this.map.hasOwnProperty(E(ae))},P.prototype.set=function(ae,ie){this.map[E(ae)]=R(ie)},P.prototype.forEach=function(ae,ie){for(var Se in this.map)this.map.hasOwnProperty(Se)&&ae.call(ie,this.map[Se],Se,this)},P.prototype.keys=function(){var ae=[];return this.forEach(function(ie,Se){ae.push(Se)}),M(ae)},P.prototype.values=function(){var ae=[];return this.forEach(function(ie){ae.push(ie)}),M(ae)},P.prototype.entries=function(){var ae=[];return this.forEach(function(ie,Se){ae.push([Se,ie])}),M(ae)},g.iterable&&(P.prototype[Symbol.iterator]=P.prototype.entries);function O(ae){if(ae.bodyUsed)return Promise.reject(new TypeError("Already read"));ae.bodyUsed=!0}function H(ae){return new Promise(function(ie,Se){ae.onload=function(){ie(ae.result)},ae.onerror=function(){Se(ae.error)}})}function Q(ae){var ie=new FileReader,Se=H(ie);return ie.readAsArrayBuffer(ae),Se}function ee(ae){var ie=new FileReader,Se=H(ie);return ie.readAsText(ae),Se}function V(ae){for(var ie=new Uint8Array(ae),Se=new Array(ie.length),mt=0;mt<ie.length;mt++)Se[mt]=String.fromCharCode(ie[mt]);return Se.join("")}function W(ae){if(ae.slice)return ae.slice(0);var ie=new Uint8Array(ae.byteLength);return ie.set(new Uint8Array(ae)),ie.buffer}function Y(){return this.bodyUsed=!1,this._initBody=function(ae){this._bodyInit=ae,ae?typeof ae=="string"?this._bodyText=ae:g.blob&&Blob.prototype.isPrototypeOf(ae)?this._bodyBlob=ae:g.formData&&FormData.prototype.isPrototypeOf(ae)?this._bodyFormData=ae:g.searchParams&&URLSearchParams.prototype.isPrototypeOf(ae)?this._bodyText=ae.toString():g.arrayBuffer&&g.blob&&v(ae)?(this._bodyArrayBuffer=W(ae.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):g.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(ae)||_(ae))?this._bodyArrayBuffer=W(ae):this._bodyText=ae=Object.prototype.toString.call(ae):this._bodyText="",this.headers.get("content-type")||(typeof ae=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(ae)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var ae=O(this);if(ae)return ae;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?O(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Q)}),this.text=function(){var ae=O(this);if(ae)return ae;if(this._bodyBlob)return ee(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(V(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var U=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function G(ae){var ie=ae.toUpperCase();return U.indexOf(ie)>-1?ie:ae}function te(ae,ie){ie=ie||{};var Se=ie.body;if(ae instanceof te){if(ae.bodyUsed)throw new TypeError("Already read");this.url=ae.url,this.credentials=ae.credentials,ie.headers||(this.headers=new P(ae.headers)),this.method=ae.method,this.mode=ae.mode,this.signal=ae.signal,!Se&&ae._bodyInit!=null&&(Se=ae._bodyInit,ae.bodyUsed=!0)}else this.url=String(ae);if(this.credentials=ie.credentials||this.credentials||"same-origin",(ie.headers||!this.headers)&&(this.headers=new P(ie.headers)),this.method=G(ie.method||this.method||"GET"),this.mode=ie.mode||this.mode||null,this.signal=ie.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Se)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Se)}te.prototype.clone=function(){return new te(this,{body:this._bodyInit})};function B(ae){var ie=new FormData;return ae.trim().split("&").forEach(function(Se){if(Se){var mt=Se.split("="),it=mt.shift().replace(/\+/g," "),Tt=mt.join("=").replace(/\+/g," ");ie.append(decodeURIComponent(it),decodeURIComponent(Tt))}}),ie}function j(ae){var ie=new P,Se=ae.replace(/\r?\n[\t ]+/g," ");return Se.split(/\r?\n/).forEach(function(mt){var it=mt.split(":"),Tt=it.shift().trim();if(Tt){var ht=it.join(":").trim();ie.append(Tt,ht)}}),ie}Y.call(te.prototype);function X(ae,ie){ie||(ie={}),this.type="default",this.status=ie.status===void 0?200:ie.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in ie?ie.statusText:"OK",this.headers=new P(ie.headers),this.url=ie.url||"",this._initBody(ae)}Y.call(X.prototype),X.prototype.clone=function(){return new X(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new P(this.headers),url:this.url})},X.error=function(){var ae=new X(null,{status:0,statusText:""});return ae.type="error",ae};var oe=[301,302,303,307,308];X.redirect=function(ae,ie){if(oe.indexOf(ie)===-1)throw new RangeError("Invalid status code");return new X(null,{status:ie,headers:{location:ae}})},d.DOMException=c.DOMException;try{new d.DOMException}catch{d.DOMException=function(ie,Se){this.message=ie,this.name=Se;var mt=Error(ie);this.stack=mt.stack},d.DOMException.prototype=Object.create(Error.prototype),d.DOMException.prototype.constructor=d.DOMException}function be(ae,ie){return new Promise(function(Se,mt){var it=new te(ae,ie);if(it.signal&&it.signal.aborted)return mt(new d.DOMException("Aborted","AbortError"));var Tt=new XMLHttpRequest;function ht(){Tt.abort()}Tt.onload=function(){var Ye={status:Tt.status,statusText:Tt.statusText,headers:j(Tt.getAllResponseHeaders()||"")};Ye.url="responseURL"in Tt?Tt.responseURL:Ye.headers.get("X-Request-URL");var St="response"in Tt?Tt.response:Tt.responseText;Se(new X(St,Ye))},Tt.onerror=function(){mt(new TypeError("Network request failed"))},Tt.ontimeout=function(){mt(new TypeError("Network request failed"))},Tt.onabort=function(){mt(new d.DOMException("Aborted","AbortError"))},Tt.open(it.method,it.url,!0),it.credentials==="include"?Tt.withCredentials=!0:it.credentials==="omit"&&(Tt.withCredentials=!1),"responseType"in Tt&&g.blob&&(Tt.responseType="blob"),it.headers.forEach(function(Ye,St){Tt.setRequestHeader(St,Ye)}),it.signal&&(it.signal.addEventListener("abort",ht),Tt.onreadystatechange=function(){Tt.readyState===4&&it.signal.removeEventListener("abort",ht)}),Tt.send(typeof it._bodyInit>"u"?null:it._bodyInit)})}return be.polyfill=!0,c.fetch||(c.fetch=be,c.Headers=P,c.Request=te,c.Response=X),d.Headers=P,d.Request=te,d.Response=X,d.fetch=be,Object.defineProperty(d,"__esModule",{value:!0}),d})({})})(typeof self<"u"?self:commonjsGlobal)})();var browser$1={exports:{}},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$1.exports;hasRequiredBrowser=1,browser$1.exports=c,browser$1.exports.HttpsAgent=c;function c(){}return browser$1.exports}es6Promise.exports.polyfill();const{logRequestError,logRequestInfo,logResponseInfo}=logging,defaultHeaders={accept:"application/fhir+json"},responseAttributeKey="__response",requestAttributeKey="__request";let agentIsAvailable=!1,HttpAgent,HttpsAgent;try{HttpAgent=requireBrowser(),HttpsAgent=requireBrowser().HttpsAgent,agentIsAvailable=!0}catch{logRequestInfo("HTTP Agent is not available")}const agentCache=new WeakMap;function agentBuilder(c,d={}){const g={baseUrl:c,agentOptions:d};return agentIsAvailable?(agentCache.get(g)||(c.startsWith("https")?agentCache.set(g,{agent:new HttpsAgent(d)}):agentCache.set(g,{agent:new HttpAgent(d)})),agentCache.get(g)):{}}function responseErrorBuilder({status:c,data:d,method:g,headers:v,url:b}){const _={response:{status:c,data:d},config:{method:g,url:b,headers:v}};return logRequestError(_),_}function stringifyBody(c){return typeof c=="string"?c:JSON.stringify(c)}var httpClient=class aa{static lcKeys(d){return d&&Object.keys(d).reduce((g,v)=>(g[v.toLowerCase()]=d[v],g),{})}constructor({baseUrl:d,customHeaders:g={},requestOptions:v={},requestSigner:b=void 0}){this.baseUrl=d,this.customHeaders=g,this.baseRequestOptions=v,this.requestSigner=b}set baseUrl(d){if(!d)throw new Error("baseUrl cannot be blank");if(typeof d!="string")throw new Error("baseUrl must be a string");this.baseUrlValue=d}get baseUrl(){return this.baseUrlValue}static responseFor(d){return d[responseAttributeKey]}static requestFor(d){return d[requestAttributeKey]}set bearerToken(d){const g=`Bearer ${d}`;this.authHeader={authorization:g}}requestBuilder(d,g,v,b){const _={...this.baseRequestOptions,...v,method:d,body:stringifyBody(b)};let E={};return agentIsAvailable||(E={keepalive:Object.prototype.hasOwnProperty.call(_,"keepalive")?_.keepalive:!0}),Object.assign(_,E,{headers:new Headers(this.mergeHeaders(v.headers))},agentBuilder(this.baseUrl,_)),this.requestSigner&&this.requestSigner(g,_),new Request(g,_)}async request(d,g,v={},b){const _=this.expandUrl(g),E=this.requestBuilder(d,_,v,b);logRequestInfo(d,_,E.headers);const R=await fetch(E),{status:M,headers:P}=R;logResponseInfo({status:M,response:R});const O=await R.text();let H={};if(O)try{H=JSON.parse(O)}catch{throw H=O,responseErrorBuilder({status:M,data:H,method:d,headers:P,url:_})}if(!R.ok)throw responseErrorBuilder({status:M,data:H,method:d,headers:P,url:_});return Object.defineProperty(H,responseAttributeKey,{writable:!1,enumerable:!1,value:R}),Object.defineProperty(H,requestAttributeKey,{writable:!1,enumerable:!1,value:E}),H}async get(d,g){return this.request("GET",d,g)}async delete(d,g){return this.request("DELETE",d,g)}async put(d,g,v={}){const b={"content-type":"application/fhir+json",...aa.lcKeys(v.headers)},_={...v,headers:b};return this.request("PUT",d,_,g)}async post(d,g,v={}){const b={"content-type":"application/fhir+json",...aa.lcKeys(v.headers)},_={...v,headers:b};return this.request("POST",d,_,g)}async patch(d,g,v){return this.request("PATCH",d,v,g)}expandUrl(d=""){return d.toLowerCase().startsWith("http")?d:this.baseUrl.endsWith("/")&&d.startsWith("/")?this.baseUrl+d.slice(1):this.baseUrl.endsWith("/")||d.startsWith("/")?this.baseUrl+d:`${this.baseUrl}/${d}`}mergeHeaders(d){const{lcKeys:g}=aa;return{...g(defaultHeaders),...g(this.authHeader),...g(this.customHeaders),...g(d)}}},fhirRegularExpressions={fhirReferenceRegEx:/^((http|https):\/\/([A-Za-z0-9\\.:%$]*\/)*)?(Account|ActivityDefinition|AdverseEvent|AllergyIntolerance|Appointment|AppointmentResponse|AuditEvent|Basic|Binary|BiologicallyDerivedProduct|BodySite|BodyStructure|Bundle|CapabilityStatement|CarePlan|CareTeam|CatalogEntry|ChargeItem|ChargeItemDefinition|Claim|ClaimResponse|ClinicalImpression|CodeSystem|Communication|CommunicationRequest|CompartmentDefinition|Composition|ConceptMap|Condition|Conformance|Consent|Contract|Coverage|CoverageEligibilityRequest|CoverageEligibilityResponse|DataElement|DecisionSupportRule|DecisionSupportServiceModule|DetectedIssue|Device|DeviceComponent|DeviceDefinition|DeviceMetric|DeviceRequest|DeviceUseRequest|DeviceUseStatement|DiagnosticOrder|DiagnosticReport|DiagnosticRequest|DocumentManifest|DocumentReference|EffectEvidenceSynthesis|EligibilityRequest|EligibilityResponse|Encounter|Endpoint|EnrollmentRequest|EnrollmentResponse|EntryDefinition|EpisodeOfCare|EventDefinition|Evidence|EvidenceVariable|ExampleScenario|ExpansionProfile|ExplanationOfBenefit|FamilyMemberHistory|Flag|Goal|GraphDefinition|Group|GuidanceRequest|GuidanceResponse|HealthcareService|ImagingExcerpt|ImagingManifest|ImagingObjectSelection|ImagingStudy|Immunization|ImmunizationEvaluation|ImmunizationRecommendation|ImplementationGuide|ImplementationGuideInput|ImplementationGuideOutput|InsurancePlan|Invoice|ItemInstance|Library|Linkage|List|Location|Measure|MeasureReport|Media|Medication|MedicationAdministration|MedicationDispense|MedicationKnowledge|MedicationOrder|MedicationRequest|MedicationStatement|MedicinalProduct|MedicinalProductAuthorization|MedicinalProductClinicals|MedicinalProductContraindication|MedicinalProductDeviceSpec|MedicinalProductIndication|MedicinalProductIngredient|MedicinalProductInteraction|MedicinalProductManufactured|MedicinalProductPackaged|MedicinalProductPharmaceutical|MedicinalProductUndesirableEffect|MessageDefinition|MessageHeader|ModuleDefinition|ModuleMetadata|MolecularSequence|NamingSystem|NutritionOrder|NutritionRequest|Observation|ObservationDefinition|OccupationalData|OperationDefinition|OperationOutcome|Order|OrderResponse|OrderSet|Organization|OrganizationAffiliation|OrganizationRole|Patient|PaymentNotice|PaymentReconciliation|Person|PlanDefinition|Practitioner|PractitionerRole|Procedure|ProcedureRequest|ProcessRequest|ProcessResponse|ProductPlan|Protocol|Provenance|Questionnaire|QuestionnaireResponse|ReferralRequest|RelatedPerson|RequestGroup|ResearchDefinition|ResearchElementDefinition|ResearchStudy|ResearchSubject|RiskAssessment|RiskEvidenceSynthesis|Schedule|SearchParameter|Sequence|ServiceDefinition|ServiceRequest|Slot|Specimen|SpecimenDefinition|StructureDefinition|StructureMap|Subscription|Substance|SubstanceNucleicAcid|SubstancePolymer|SubstanceProtein|SubstanceReferenceInformation|SubstanceSourceMaterial|SubstanceSpecification|SupplyDelivery|SupplyRequest|Task|TerminologyCapabilities|TestReport|TestScript|UserSession|ValueSet|VerificationResult|VisionPrescription)\/[A-Za-z0-9\-.]{1,256}(\/_history\/[A-Za-z0-9\-.]{1,256})?$/};const queryString=queryString$1,{fhirReferenceRegEx}=fhirRegularExpressions;function splitReference(c){if(!c.match(fhirReferenceRegEx))throw new Error(`${c} is not a recognized FHIR reference`);let d,g=c;c.startsWith("http")&&([,d]=fhirReferenceRegEx.exec(c),g=c.slice(d.length),d.endsWith("/")&&(d=d.slice(0,-1)));const[v,b]=g.split("/");return{baseUrl:d,resourceType:v,id:b}}function validResourceType(c){return!c.startsWith("/")&&!c.includes(":")&&/\S/.test(c)}function createQueryString(c){if(c instanceof Object&&Object.keys(c).length>0)return queryString.stringify(c)}var utils={createQueryString,splitReference,validResourceType};const deprecatePaginationArgs=(c,d)=>{if(Object.prototype.hasOwnProperty.call(c,"resourceType")){console.warn("WARNING: positional parameters for pagination methods are deprecated and will be removed in the next major version. Call with ({ bundle, options }) rather than (bundle, headers)");const g={bundle:c};return d&&(g.options={headers:d}),g}return c},deprecateHeaders=(c,d)=>d?(console.warn("WARNING: headers is deprecated and will be removed in the next major version. Use options.headers instead."),console.warn(JSON.stringify(d,null,"  ")),{headers:d,...c}):c;var deprecations={deprecateHeaders,deprecatePaginationArgs},referenceResolver,hasRequiredReferenceResolver;function requireReferenceResolver(){if(hasRequiredReferenceResolver)return referenceResolver;hasRequiredReferenceResolver=1;const{splitReference:c}=utils,{deprecateHeaders:d}=deprecations;return referenceResolver=class{constructor(g){this.client=g}async resolve({reference:g,context:v,headers:b,options:_={}}={}){return v===void 0?g.startsWith("http")?this.resolveAbsoluteReference(g,d(_,b)):this.client.httpClient.get(g,d(_,b)):g.startsWith("#")?this.resolveContainedReference(g,v):this.resolveBundleReference(g,v,d(_,b))}async resolveAbsoluteReference(g,v){if(g.startsWith(this.client.baseUrl))return this.client.httpClient.get(g,v);const{baseUrl:b,resourceType:_,id:E}=c(g),R=requireClient();return new R({baseUrl:b}).read({resourceType:_,id:E,options:v})}resolveContainedReference(g,v){if(v.contained){const b=g.slice(1),_=v.contained.find(E=>E.id===b);if(_)return _}throw new Error(`Unable to resolve contained reference: ${g}`)}async resolveBundleReference(g,v,b){const _=new RegExp(`(^|/)${g}$`),E=v.entry.find(R=>_.test(R.fullUrl));return E?E.resource:this.resolve({reference:g,options:b})}},referenceResolver}class Pagination$1{constructor(d){this.httpClient=d}nextPage(d,{headers:g}={}){const v=d.link.find(b=>b.relation==="next");return v?this.httpClient.get(v.url,{headers:g}):void 0}prevPage(d,{headers:g}={}){const v=d.link.find(b=>b.relation.match(/^prev(ious)?$/));return v?this.httpClient.get(v.url,{headers:g}):void 0}}var pagination$1=Pagination$1,browser={};const _global=typeof self<"u"?self:typeof window<"u"?window:void 0;if(!_global)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!_global.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');browser.AbortController=_global.AbortController;const{AbortController:AbortController$1}=browser;class FetchJob{constructor(){this.controller=new AbortController$1,this.resolving=!1}addSignalOption(d){return{signal:this.controller.signal,...d}}safeAbort(){this.resolving||this.controller.abort()}}class FetchQueue{constructor(){this.jobs=[],this.numJobs=0}buildJob(){const d=new FetchJob;return this.numJobs=this.jobs.push(d),d}safeAbortOthers(d){d.resolving=!0;for(let g=0,v=this.numJobs;g<v;g+=1)d!==this.jobs[g]&&this.jobs[g].safeAbort()}}var fetchQueue={FetchQueue,FetchJob};class CapabilityTool{constructor(d){this.capabilityStatement=d}serverCan(d){return this.supportFor({capabilityType:"interaction",where:{code:d}})}resourceCan(d,g){return this.supportFor({resourceType:d,capabilityType:"interaction",where:{code:g}})}serverSearch(d){return this.supportFor({capabilityType:"searchParam",where:{name:d}})}resourceSearch(d,g){return this.supportFor({resourceType:d,capabilityType:"searchParam",where:{name:g}})}supportFor({resourceType:d,capabilityType:g,where:v}={}){let b;if(d?b=this.resourceCapabilities({resourceType:d}):b=this.serverCapabilities(),!b)return!1;const _=b[g];if(v&&_){const E=Object.keys(v)[0];return _.find(M=>M[E]===v[E])!==void 0}return _!==void 0}interactionsFor({resourceType:d}={}){const g=this.resourceCapabilities({resourceType:d});return g===void 0?[]:g.interaction.map(v=>v.code)}searchParamsFor({resourceType:d}={}){const g=this.resourceCapabilities({resourceType:d});return g===void 0?[]:g.searchParam===void 0?[]:g.searchParam.map(v=>v.name)}resourceCapabilities({resourceType:d}={}){return this.serverCapabilities().resource.find(b=>b.type===d)}capabilityContents({resourceType:d,capabilityType:g}={}){const v=this.resourceCapabilities({resourceType:d});if(v!==void 0)return v[g]}serverCapabilities(){return this.capabilityStatement.rest.find(d=>d.mode==="server")}}var capabilityTool=CapabilityTool,hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;const c=queryString$1,{authFromCapability:d,authFromWellKnown:g}=smart,v=httpClient,b=requireReferenceResolver(),_=pagination$1,{createQueryString:E,validResourceType:R}=utils,{FetchQueue:M}=fetchQueue,{deprecatePaginationArgs:P,deprecateHeaders:O}=deprecations,H=capabilityTool;class Q{constructor({baseUrl:V,customHeaders:W,requestOptions:Y,requestSigner:U,bearerToken:G}={}){this.httpClient=new v({baseUrl:V,customHeaders:W,requestOptions:Y,requestSigner:U}),G&&(this.httpClient.bearerToken=G),this.resolver=new b(this),this.pagination=new _(this.httpClient)}static httpFor(V){return{request:v.requestFor(V),response:v.responseFor(V)}}get baseUrl(){return this.httpClient&&this.httpClient.baseUrl}set baseUrl(V){this.httpClient&&(this.httpClient.baseUrl=V)}get customHeaders(){return this.httpClient.customHeaders}set customHeaders(V){this.httpClient.customHeaders=V}set bearerToken(V){this.httpClient.bearerToken=V}resolve({reference:V,context:W,headers:Y,options:U={}}={}){return this.resolver.resolve({reference:V,context:W,options:O(U,Y)})}async smartAuthMetadata({headers:V,options:W={}}={}){const Y={options:O(W,V)};Y.options.headers||(Y.options.headers={}),Y.options.headers.accept="application/fhir+json,application/json";const U=this.baseUrl.replace(/\/*$/,"/"),G=new M,te=G.buildJob(),B=G.buildJob(),j=G.buildJob(),X=[];return new Promise((oe,be)=>{function ae(ie){X.push(ie)===G.numJobs&&be(new Error(X.map(Se=>Se.message).join("; ")))}this.httpClient.request("GET",`${U}.well-known/smart-configuration`,B.addSignalOption(Y)).then(ie=>(G.safeAbortOthers(B),oe(g(ie)))).catch(ie=>ae(ie)),this.capabilityStatement(te.addSignalOption(Y)).then(ie=>(G.safeAbortOthers(te),oe(d(ie)))).catch(ie=>ae(ie)),this.httpClient.request("GET",`${U}.well-known/openid-configuration`,j.addSignalOption(Y)).then(ie=>(G.safeAbortOthers(j),oe(g(ie)))).catch(ie=>ae(ie))})}capabilityStatement({headers:V,options:W={}}={}){return this.metadata||(this.metadata=this.httpClient.get("metadata",O(W,V))),this.metadata}request(V,{method:W="GET",options:Y={},body:U}={}){return Y.method&&Y.method!==W&&console.warn(`WARNING: 'options.method' has been specified: ${Y.method} but will be ignored. Use 'method' instead.`),this.httpClient.request(W,V,Y,U)}read({resourceType:V,id:W,headers:Y,options:U={}}={}){if(!R(V))throw new Error("Invalid resourceType",V);return this.httpClient.get(`${V}/${W}`,O(U,Y))}vread({resourceType:V,id:W,version:Y,headers:U,options:G={}}={}){if(!R(V))throw new Error("Invalid resourceType",V);return this.httpClient.get(`${V}/${W}/_history/${Y}`,O(G,U))}create({resourceType:V,body:W,headers:Y,options:U={}}={}){if(!R(V))throw new Error("Invalid resourceType",V);return this.httpClient.post(V,W,O(U,Y))}delete({resourceType:V,id:W,headers:Y,options:U={}}={}){if(!R(V))throw new Error("Invalid resourceType",V);return this.httpClient.delete(`${V}/${W}`,O(U,Y))}update({resourceType:V,id:W,searchParams:Y,body:U,headers:G,options:te={}}={}){if(!R(V))throw new Error("Invalid resourceType",V);if(W&&Y)throw new Error("Conditional update with search params cannot be with id",V);if(Y){const B=E(Y);return this.httpClient.put(`${V}?${B}`,U,O(te,G))}return this.httpClient.put(`${V}/${W}`,U,O(te,G))}patch({resourceType:V,id:W,JSONPatch:Y,headers:U,options:G={}}={}){if(!R(V))throw new Error("Invalid resourceType",V);const B={...O(G,U).headers||{},"Content-Type":"application/json-patch+json"};return this.httpClient.patch(`${V}/${W}`,Y,{...G,headers:B})}batch({body:V,headers:W,options:Y={}}={}){return this.httpClient.post("/",V,O(Y,W))}transaction({body:V,headers:W,options:Y={}}={}){return this.httpClient.post("/",V,O(Y,W))}operation({name:V,resourceType:W,id:Y,method:U="POST",input:G,options:te={}}={}){const B=["/"];if(W){if(!R(W))throw new Error("Invalid resourceType",W);B.push(`${W}/`)}if(Y&&B.push(`${Y}/`),B.push(`${V.startsWith("$")?V:`$${V}`}`),U.toUpperCase()==="POST")return this.httpClient.post(B.join(""),G,te);if(U.toUpperCase()==="GET")return G&&B.push(`?${c.stringify(G)}`),this.httpClient.get(B.join(""),te)}nextPage(V,W){const{bundle:Y,options:U={}}=P(V,W);return this.pagination.nextPage(Y,U)}prevPage(V,W){const{bundle:Y,options:U={}}=P(V,W);return this.pagination.prevPage(Y,U)}search({resourceType:V,compartment:W,searchParams:Y,headers:U,options:G={}}={}){if(V&&!R(V))throw new Error("Invalid resourceType",V);if(W&&V)return this.compartmentSearch({resourceType:V,compartment:W,searchParams:Y,options:O(G,U)});if(V)return this.resourceSearch({resourceType:V,searchParams:Y,options:O(G,U)});if(Y instanceof Object&&Object.keys(Y).length>0)return this.systemSearch({searchParams:Y,options:O(G,U)});throw new Error("search requires either searchParams or a resourceType")}resourceSearch({resourceType:V,searchParams:W,headers:Y,options:U={}}={}){if(!R(V))throw new Error("Invalid resourceType",V);let G=V;return U.postSearch&&(G+="/_search"),this.baseSearch({searchPath:G,searchParams:W,headers:Y,options:U})}systemSearch({searchParams:V,headers:W,options:Y={}}={}){const U="/_search";return this.baseSearch({searchPath:U,searchParams:V,headers:W,options:Y})}compartmentSearch({resourceType:V,compartment:W,searchParams:Y,headers:U,options:G={}}={}){if(!R(V))throw new Error("Invalid resourceType",V);const{resourceType:te,id:B}=W;if(!R(te))throw new Error("Invalid compartmentType",te);let j=`/${te}/${B}/${V}`;return G.postSearch&&(j+="/_search"),this.baseSearch({searchPath:j,searchParams:Y,headers:U,options:G})}baseSearch({searchPath:V,searchParams:W,headers:Y,options:U}){const G=E(W),te=O(U,Y),B=U.postSearch?"postSearch":"getSearch";return this[B](V,G,te)}postSearch(V,W,Y){const G={...{"Content-Type":"application/x-www-form-urlencoded"},...Y.headers},te={...Y,headers:G};return this.httpClient.post(V,W,te)}getSearch(V,W,Y){let U=V;return W&&(U+=`?${W}`),this.httpClient.get(U,Y)}history({resourceType:V,id:W,headers:Y,options:U={}}={}){if(V&&!R(V))throw new Error("Invalid resourceType",V);return W&&V?this.resourceHistory({resourceType:V,id:W,options:O(U,Y)}):V?this.typeHistory({resourceType:V,options:O(U,Y)}):this.systemHistory({options:O(U,Y)})}resourceHistory({resourceType:V,id:W,headers:Y,options:U={}}={}){if(!R(V))throw new Error("Invalid resourceType",V);return this.httpClient.get(`${V}/${W}/_history`,O(U,Y))}typeHistory({resourceType:V,headers:W,options:Y={}}={}){if(!R(V))throw new Error("Invalid resourceType",V);return this.httpClient.get(`${V}/_history`,O(Y,W))}systemHistory({headers:V,options:W={}}={}){return this.httpClient.get("_history",O(W,V))}}return client.exports=Q,client.exports.CapabilityTool=H,client.exports}var clientExports=requireClient();function getFhirClient(c,d,g){const v=c==="production"?"https://api.zusapi.com/fhir":`https://api.${c}.zusapi.com/fhir`,b=CTW_REQUEST_HEADER;return g&&(b["Zus-Account"]=g),new clientExports({baseUrl:v,bearerToken:d,customHeaders:b})}const omitEmptyArrays=c=>omitEmptyArraysHelper(c),omitEmptyArraysHelper=c=>{if(Array.isArray(c))return c.length===0?void 0:c.map(omitEmptyArrays);if(c!==null&&typeof c=="object"){const d=c;return Object.entries(d).forEach(([g,v])=>{d[g]=omitEmptyArrays(v)}),d}return c},CLASS_PREFIX="ctw-",defaultBreakpoints={sm:640,md:768,lg:1024},TailwindTheme={colors:{transparent:"transparent",white:"#fff",black:"#000",primary:{light:"#F3E8FF",main:"#A855F7",dark:"#7E22CE"},icon:{default:"#374151",light:"#D1D5DB",active:"#A855F7"},divider:{main:"#D1D5DB",light:"#E5E7EB"},content:{black:"#111827",light:"#6B7280",lighter:"#9CA3AF"},error:{main:"#EF4444",light:"#FEE2E2",dark:"#7F1D1D",heading:"#991B1B",message:"#B91C1B",bg:"#FEF2F2",icon:"#F97171"},success:{main:"#10B981",light:"#D1FAE5"},caution:{main:"#F59E0B",light:"#FEF3C7",heading:"#92400E",message:"#B45309",bg:"#FFFBEB",icon:"#FBBF24"},info:{main:"#0EA5E9",light:"#E0F2FE"},bg:{white:"#FFFFFF",lighter:"#F9FAFB",light:"#F3F4F6",dark:"#E5E7EB",black:"#111827"}}},EmptyTailwindCSSVars={"--tw-pan-x":" ","--tw-pan-y":" ","--tw-pinch-zoom":" ","--tw-ordinal":" ","--tw-slashed-zero":" ","--tw-numeric-figure":" ","--tw-numeric-spacing":" ","--tw-numeric-fraction":" ","--tw-ring-inset":" ","--tw-blur":" ","--tw-brightness":" ","--tw-contrast":" ","--tw-grayscale":" ","--tw-hue-rotate":" ","--tw-invert":" ","--tw-saturate":" ","--tw-sepia":" ","--tw-drop-shadow":" ","--tw-backdrop-blur":" ","--tw-backdrop-brightness":" ","--tw-backdrop-contrast":" ","--tw-backdrop-grayscale":" ","--tw-backdrop-hue-rotate":" ","--tw-backdrop-invert":" ","--tw-backdrop-opacity":" ","--tw-backdrop-saturate":" ","--tw-backdrop-sepia":" "},DefaultTheme={...TailwindTheme,breakpoints:defaultBreakpoints};function nameCSSVar(c){return`--${CLASS_PREFIX}-${c}`}function mapToCSSVar(c){const d={};return Object.entries(c).forEach(([g,v])=>{typeof v=="string"?d[nameCSSVar(g)]=hexToRGB(v):Object.entries(v).forEach(([b,_])=>{d[nameCSSVar(`${g}-${b}`)]=hexToRGB(_)})}),d}function hexToRGB(c,d){if(c.startsWith("#")){const g=parseInt(c.slice(1,3),16),v=parseInt(c.slice(3,5),16),b=parseInt(c.slice(5,7),16);return d?`rgba(${g}, ${v}, ${b}, ${d})`:`rgb(${g}, ${v}, ${b})`}return c}function e$1(c){this.message=c}e$1.prototype=new Error,e$1.prototype.name="InvalidCharacterError";var r=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(c){var d=String(c).replace(/=+$/,"");if(d.length%4==1)throw new e$1("'atob' failed: The string to be decoded is not correctly encoded.");for(var g,v,b=0,_=0,E="";v=d.charAt(_++);~v&&(g=b%4?64*g+v:v,b++%4)?E+=String.fromCharCode(255&g>>(-2*b&6)):0)v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(v);return E};function t(c){var d=c.replace(/-/g,"+").replace(/_/g,"/");switch(d.length%4){case 0:break;case 2:d+="==";break;case 3:d+="=";break;default:throw"Illegal base64url string!"}try{return function(g){return decodeURIComponent(r(g).replace(/(.)/g,function(v,b){var _=b.charCodeAt(0).toString(16).toUpperCase();return _.length<2&&(_="0"+_),"%"+_}))}(d)}catch{return r(d)}}function n(c){this.message=c}function o(c,d){if(typeof c!="string")throw new n("Invalid token specified");var g=(d=d||{}).header===!0?0:1;try{return JSON.parse(t(c.split(".")[g]))}catch(v){throw new n("Invalid token specified: "+v.message)}}n.prototype=new Error,n.prototype.name="InvalidTokenError";const AUTH_BUILDER_ID="https://zusapi.com/builder_id",AUTH_BUILDER_NAME="https://zusapi.com/builder_name",AUTH_PRACTITIONER_ID="https://zusapi.com/practitioner_id",AUTH_EMAIL="https://zusapi.com/email";function getClaims(c){try{return o(c)}catch{return{}}}function claimsBuilderId(c){return getClaims(c)[AUTH_BUILDER_ID]}function claimsBuilderName(c){return getClaims(c)[AUTH_BUILDER_NAME]}function claimsPractitionerId(c){return getClaims(c)[AUTH_PRACTITIONER_ID]}function claimsAuthEmail(c){return getClaims(c)[AUTH_EMAIL]}const main$1="",EXPIRY_PADDING_MS=6e4;function CTWProvider({theme:c,children:d,...g}){const[v,b]=react.exports.useState(),_=react.exports.useRef(null);react.exports.useEffect(()=>{window.CTWComponentLibrary={version}},[]),react.exports.useEffect(()=>{var O;const M={...mapToCSSVar((c==null?void 0:c.colors)||{}),...EmptyTailwindCSSVars},P=Object.entries(M).map(([H,Q])=>`${H}:${Q}`).join(";");(O=_.current)==null||O.setAttribute("style",P)},[_,c]);const E=react.exports.useCallback(async()=>{if(g.authToken)return g.authToken;const M=await checkOrRefreshAuth(v,g.authTokenURL,g.headers);return(v==null?void 0:v.accessToken)!==M.accessToken&&b(M),M.accessToken},[v,g]),R=react.exports.useMemo(()=>({...g,theme:lodash.exports.merge({},DefaultTheme,c),token:v,ctwProviderRef:_,actions:{handleAuth:E}}),[g,c,E,v,_]);return React.createElement("div",{ref:_},React.createElement(CTWStateContext.Provider,{value:R},React.createElement(QueryClientProvider,{client:queryClient},d)),React.createElement("div",{id:"headlessui-portal-root"},React.createElement("div",null)))}function useCTW(){const c=react.exports.useContext(CTWStateContext);if(c===void 0||c.theme===void 0)throw new Error("useCTW must be used within a CTWProvider");return{getRequestContext:react.exports.useCallback(async()=>{var b,_;const g=await c.actions.handleAuth();return{env:c.env,authToken:g,builderId:(_=(b=c.builderId)!=null?b:claimsBuilderId(g))!=null?_:"",contextBuilderId:c.builderId,fhirClient:getFhirClient(c.env,g,c.builderId)}},[c]),theme:c.theme,ctwProviderRef:c.ctwProviderRef}}function useQueryWithCTW(c,d,g,v=!0){const{getRequestContext:b}=useCTW();return useQuery([c,...d],async()=>{const _=await b();return g(_,d)},{enabled:v})}async function checkOrRefreshAuth(c,d,g){if(!c||Date.now()>=c.expiresAt+EXPIRY_PADDING_MS){const b=await(await ctwFetch(d,{headers:g})).json();return{accessToken:b.access_token,issuedTokenType:b.issued_token_type,tokenType:b.token_type,expiresAt:Date.now()+b.expires_in*1e3}}return c}try{CTWProvider.displayName="CTWProvider",CTWProvider.__docgenInfo={description:"",displayName:"CTWProvider",props:{env:{defaultValue:null,description:"",name:"env",required:!0,type:{name:"enum",value:[{value:'"dev"'},{value:'"sandbox"'},{value:'"production"'}]}},builderId:{defaultValue:null,description:"",name:"builderId",required:!1,type:{name:"string"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"Record<string, string>"}},authToken:{defaultValue:null,description:"",name:"authToken",required:!1,type:{name:"string"}},authTokenURL:{defaultValue:null,description:"",name:"authTokenURL",required:!1,type:{name:"string"}}}}}catch{}function i$2(c,d){let[g,v]=react.exports.useState(c),b=s$2(c);return s$3(()=>v(b.current),[b,v,...d]),g}function i$1(c){var d;if(c.type)return c.type;let g=(d=c.as)!=null?d:"button";if(typeof g=="string"&&g.toLowerCase()==="button")return"button"}function s$1(c,d){let[g,v]=react.exports.useState(()=>i$1(c));return s$3(()=>{v(i$1(c))},[c.type,c.as]),s$3(()=>{g||!d.current||d.current instanceof HTMLButtonElement&&!d.current.hasAttribute("type")&&v("button")},[g,d]),g}function F({container:c,accept:d,walk:g,enabled:v=!0}){let b=react.exports.useRef(d),_=react.exports.useRef(g);react.exports.useEffect(()=>{b.current=d,_.current=g},[d,g]),s$3(()=>{if(!c||!v)return;let E=e$3(c);if(!E)return;let R=b.current,M=_.current,P=Object.assign(H=>R(H),{acceptNode:R}),O=E.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,P,!1);for(;O.nextNode();)M(O.currentNode)},[c,v,b,_])}function f$1(c){throw new Error("Unexpected object: "+c)}var a=(c=>(c[c.First=0]="First",c[c.Previous=1]="Previous",c[c.Next=2]="Next",c[c.Last=3]="Last",c[c.Specific=4]="Specific",c[c.Nothing=5]="Nothing",c))(a||{});function x(c,d){let g=d.resolveItems();if(g.length<=0)return null;let v=d.resolveActiveIndex(),b=v!=null?v:-1,_=(()=>{switch(c.focus){case 0:return g.findIndex(E=>!d.resolveDisabled(E));case 1:{let E=g.slice().reverse().findIndex((R,M,P)=>b!==-1&&P.length-M-1>=b?!1:!d.resolveDisabled(R));return E===-1?E:g.length-1-E}case 2:return g.findIndex((E,R)=>R<=b?!1:!d.resolveDisabled(E));case 3:{let E=g.slice().reverse().findIndex(R=>!d.resolveDisabled(R));return E===-1?E:g.length-1-E}case 4:return g.findIndex(E=>d.resolveId(E)===c.id);case 5:return null;default:f$1(c)}})();return _===-1?v:_}function e(c={},d=null,g=[]){for(let[v,b]of Object.entries(c))f(g,s(d,v),b);return g}function s(c,d){return c?c+"["+d+"]":d}function f(c,d,g){if(Array.isArray(g))for(let[v,b]of g.entries())f(c,s(d,v.toString()),b);else g instanceof Date?c.push([d,g.toISOString()]):typeof g=="boolean"?c.push([d,g?"1":"0"]):typeof g=="string"?c.push([d,g]):typeof g=="number"?c.push([d,`${g}`]):g==null?c.push([d,""]):e(g,d,c)}function p(c,d,g){let[v,b]=react.exports.useState(g),_=c!==void 0;return[_?c:v,o$1(E=>(_||b(E),d==null?void 0:d(E)))]}var De=(c=>(c[c.Open=0]="Open",c[c.Closed=1]="Closed",c))(De||{}),Le=(c=>(c[c.Single=0]="Single",c[c.Multi=1]="Multi",c))(Le||{}),Ve=(c=>(c[c.Pointer=0]="Pointer",c[c.Other=1]="Other",c))(Ve||{}),Me$1=(c=>(c[c.OpenCombobox=0]="OpenCombobox",c[c.CloseCombobox=1]="CloseCombobox",c[c.GoToOption=2]="GoToOption",c[c.RegisterOption=3]="RegisterOption",c[c.UnregisterOption=4]="UnregisterOption",c[c.RegisterLabel=5]="RegisterLabel",c))(Me$1||{});function $(c,d=g=>g){let g=c.activeOptionIndex!==null?c.options[c.activeOptionIndex]:null,v=S$1(d(c.options.slice()),_=>_.dataRef.current.domRef.current),b=g?v.indexOf(g):null;return b===-1&&(b=null),{options:v,activeOptionIndex:b}}let he={[1](c){return c.dataRef.current.disabled||c.comboboxState===1?c:{...c,activeOptionIndex:null,comboboxState:1}},[0](c){if(c.dataRef.current.disabled||c.comboboxState===0)return c;let d=c.activeOptionIndex,{isSelected:g}=c.dataRef.current,v=c.options.findIndex(b=>g(b.dataRef.current.value));return v!==-1&&(d=v),{...c,comboboxState:0,activeOptionIndex:d}},[2](c,d){var g;if(c.dataRef.current.disabled||c.dataRef.current.optionsRef.current&&!c.dataRef.current.optionsPropsRef.current.static&&c.comboboxState===1)return c;let v=$(c);if(v.activeOptionIndex===null){let _=v.options.findIndex(E=>!E.dataRef.current.disabled);_!==-1&&(v.activeOptionIndex=_)}let b=x(d,{resolveItems:()=>v.options,resolveActiveIndex:()=>v.activeOptionIndex,resolveId:_=>_.id,resolveDisabled:_=>_.dataRef.current.disabled});return{...c,...v,activeOptionIndex:b,activationTrigger:(g=d.trigger)!=null?g:1}},[3]:(c,d)=>{let g={id:d.id,dataRef:d.dataRef},v=$(c,_=>[..._,g]);c.activeOptionIndex===null&&c.dataRef.current.isSelected(d.dataRef.current.value)&&(v.activeOptionIndex=v.options.indexOf(g));let b={...c,...v,activationTrigger:1};return c.dataRef.current.__demoMode&&c.dataRef.current.value===void 0&&(b.activeOptionIndex=0),b},[4]:(c,d)=>{let g=$(c,v=>{let b=v.findIndex(_=>_.id===d.id);return b!==-1&&v.splice(b,1),v});return{...c,...g,activationTrigger:1}},[5]:(c,d)=>({...c,labelId:d.id})},J=react.exports.createContext(null);J.displayName="ComboboxActionsContext";function N(c){let d=react.exports.useContext(J);if(d===null){let g=new Error(`<${c} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,N),g}return d}let q=react.exports.createContext(null);q.displayName="ComboboxDataContext";function w$1(c){let d=react.exports.useContext(q);if(d===null){let g=new Error(`<${c} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,w$1),g}return d}function Fe(c,d){return u$1(d.type,he,c,d)}let _e=react.exports.Fragment;function ke(c,d){let{value:g,defaultValue:v,onChange:b,name:_,by:E=(Mt,jt)=>Mt===jt,disabled:R=!1,__demoMode:M=!1,nullable:P=!1,multiple:O=!1,...H}=c,[Q,ee]=p(g,b,v),[V,W]=react.exports.useReducer(Fe,{dataRef:react.exports.createRef(),comboboxState:M?0:1,options:[],activeOptionIndex:null,activationTrigger:1,labelId:null}),Y=react.exports.useRef(!1),U=react.exports.useRef({static:!1,hold:!1}),G=react.exports.useRef(null),te=react.exports.useRef(null),B=react.exports.useRef(null),j=react.exports.useRef(null),X=o$1(typeof E=="string"?(Mt,jt)=>{let Qe=E;return(Mt==null?void 0:Mt[Qe])===(jt==null?void 0:jt[Qe])}:E),oe=react.exports.useCallback(Mt=>u$1(be.mode,{[1]:()=>Q.some(jt=>X(jt,Mt)),[0]:()=>X(Q,Mt)}),[Q]),be=react.exports.useMemo(()=>({...V,optionsPropsRef:U,labelRef:G,inputRef:te,buttonRef:B,optionsRef:j,value:Q,disabled:R,mode:O?1:0,get activeOptionIndex(){if(Y.current&&V.activeOptionIndex===null&&V.options.length>0){let Mt=V.options.findIndex(jt=>!jt.dataRef.current.disabled);if(Mt!==-1)return Mt}return V.activeOptionIndex},compare:X,isSelected:oe,nullable:P,__demoMode:M}),[Q,R,O,P,M,V]);s$3(()=>{V.dataRef.current=be},[be]),L([be.buttonRef,be.inputRef,be.optionsRef],()=>W({type:1}),be.comboboxState===0);let ae=react.exports.useMemo(()=>({open:be.comboboxState===0,disabled:R,activeIndex:be.activeOptionIndex,activeOption:be.activeOptionIndex===null?null:be.options[be.activeOptionIndex].dataRef.current.value,value:Q}),[be,R,Q]),ie=o$1(Mt=>{let jt=be.options.find(Qe=>Qe.id===Mt);!jt||St(jt.dataRef.current.value)}),Se=o$1(()=>{if(be.activeOptionIndex!==null){let{dataRef:Mt,id:jt}=be.options[be.activeOptionIndex];St(Mt.current.value),W({type:2,focus:a.Specific,id:jt})}}),mt=o$1(()=>{W({type:0}),Y.current=!0}),it=o$1(()=>{W({type:1}),Y.current=!1}),Tt=o$1((Mt,jt,Qe)=>(Y.current=!1,Mt===a.Specific?W({type:2,focus:a.Specific,id:jt,trigger:Qe}):W({type:2,focus:Mt,trigger:Qe}))),ht=o$1((Mt,jt)=>(W({type:3,id:Mt,dataRef:jt}),()=>W({type:4,id:Mt}))),Ye=o$1(Mt=>(W({type:5,id:Mt}),()=>W({type:5,id:null}))),St=o$1(Mt=>u$1(be.mode,{[0](){return ee==null?void 0:ee(Mt)},[1](){let jt=be.value.slice(),Qe=jt.findIndex(Pe=>X(Pe,Mt));return Qe===-1?jt.push(Mt):jt.splice(Qe,1),ee==null?void 0:ee(jt)}})),$t=react.exports.useMemo(()=>({onChange:St,registerOption:ht,registerLabel:Ye,goToOption:Tt,closeCombobox:it,openCombobox:mt,selectActiveOption:Se,selectOption:ie}),[]),Lt=d===null?{}:{ref:d};return React.createElement(J.Provider,{value:$t},React.createElement(q.Provider,{value:be},React.createElement(C$1,{value:u$1(be.comboboxState,{[0]:p$3.Open,[1]:p$3.Closed})},_!=null&&Q!=null&&e({[_]:Q}).map(([Mt,jt])=>React.createElement(h$1,{features:s$5.Hidden,...F$1({key:Mt,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:Mt,value:jt})})),$$1({ourProps:Lt,theirProps:H,slot:ae,defaultTag:_e,name:"Combobox"}))))}let we=C(ke),Be="input",Ue=C(function(c,d){var g,v;let{value:b,onChange:_,displayValue:E,type:R="text",...M}=c,P=w$1("Combobox.Input"),O=N("Combobox.Input"),H=y(P.inputRef,d),Q=`headlessui-combobox-input-${I()}`,ee=p$2(),V=react.exports.useMemo(()=>{var B;return typeof E=="function"?(B=E(P.value))!=null?B:"":typeof P.value=="string"?P.value:""},[P.value]);m$1(([B,j],[X,oe])=>{!P.inputRef.current||(oe===0&&j===1||B!==X)&&(P.inputRef.current.value=B)},[V,P.comboboxState]);let W=o$1(B=>{switch(B.key){case o$2.Backspace:case o$2.Delete:if(P.mode!==0||!P.nullable)return;let j=B.currentTarget;ee.requestAnimationFrame(()=>{j.value===""&&(O.onChange(null),P.optionsRef.current&&(P.optionsRef.current.scrollTop=0),O.goToOption(a.Nothing))});break;case o$2.Enter:if(P.comboboxState!==0||B.nativeEvent.isComposing)return;if(B.preventDefault(),B.stopPropagation(),P.activeOptionIndex===null){O.closeCombobox();return}O.selectActiveOption(),P.mode===0&&O.closeCombobox();break;case o$2.ArrowDown:return B.preventDefault(),B.stopPropagation(),u$1(P.comboboxState,{[0]:()=>{O.goToOption(a.Next)},[1]:()=>{O.openCombobox()}});case o$2.ArrowUp:return B.preventDefault(),B.stopPropagation(),u$1(P.comboboxState,{[0]:()=>{O.goToOption(a.Previous)},[1]:()=>{O.openCombobox(),ee.nextFrame(()=>{P.value||O.goToOption(a.Last)})}});case o$2.Home:case o$2.PageUp:return B.preventDefault(),B.stopPropagation(),O.goToOption(a.First);case o$2.End:case o$2.PageDown:return B.preventDefault(),B.stopPropagation(),O.goToOption(a.Last);case o$2.Escape:return P.comboboxState!==0?void 0:(B.preventDefault(),P.optionsRef.current&&!P.optionsPropsRef.current.static&&B.stopPropagation(),O.closeCombobox());case o$2.Tab:if(P.comboboxState!==0)return;P.mode===0&&O.selectActiveOption(),O.closeCombobox();break}}),Y=o$1(B=>{O.openCombobox(),_==null||_(B)}),U=i$2(()=>{if(P.labelId)return[P.labelId].join(" ")},[P.labelId]),G=react.exports.useMemo(()=>({open:P.comboboxState===0,disabled:P.disabled}),[P]),te={ref:H,id:Q,role:"combobox",type:R,"aria-controls":(g=P.optionsRef.current)==null?void 0:g.id,"aria-expanded":P.disabled?void 0:P.comboboxState===0,"aria-activedescendant":P.activeOptionIndex===null||(v=P.options[P.activeOptionIndex])==null?void 0:v.id,"aria-multiselectable":P.mode===1?!0:void 0,"aria-labelledby":U,disabled:P.disabled,onKeyDown:W,onChange:Y};return $$1({ourProps:te,theirProps:M,slot:G,defaultTag:Be,name:"Combobox.Input"})}),Ge="button",Ne=C(function(c,d){var g;let v=w$1("Combobox.Button"),b=N("Combobox.Button"),_=y(v.buttonRef,d),E=`headlessui-combobox-button-${I()}`,R=p$2(),M=o$1(V=>{switch(V.key){case o$2.ArrowDown:return V.preventDefault(),V.stopPropagation(),v.comboboxState===1&&b.openCombobox(),R.nextFrame(()=>{var W;return(W=v.inputRef.current)==null?void 0:W.focus({preventScroll:!0})});case o$2.ArrowUp:return V.preventDefault(),V.stopPropagation(),v.comboboxState===1&&(b.openCombobox(),R.nextFrame(()=>{v.value||b.goToOption(a.Last)})),R.nextFrame(()=>{var W;return(W=v.inputRef.current)==null?void 0:W.focus({preventScroll:!0})});case o$2.Escape:return v.comboboxState!==0?void 0:(V.preventDefault(),v.optionsRef.current&&!v.optionsPropsRef.current.static&&V.stopPropagation(),b.closeCombobox(),R.nextFrame(()=>{var W;return(W=v.inputRef.current)==null?void 0:W.focus({preventScroll:!0})}));default:return}}),P=o$1(V=>{if(r$2(V.currentTarget))return V.preventDefault();v.comboboxState===0?b.closeCombobox():(V.preventDefault(),b.openCombobox()),R.nextFrame(()=>{var W;return(W=v.inputRef.current)==null?void 0:W.focus({preventScroll:!0})})}),O=i$2(()=>{if(v.labelId)return[v.labelId,E].join(" ")},[v.labelId,E]),H=react.exports.useMemo(()=>({open:v.comboboxState===0,disabled:v.disabled,value:v.value}),[v]),Q=c,ee={ref:_,id:E,type:s$1(c,v.buttonRef),tabIndex:-1,"aria-haspopup":!0,"aria-controls":(g=v.optionsRef.current)==null?void 0:g.id,"aria-expanded":v.disabled?void 0:v.comboboxState===0,"aria-labelledby":O,disabled:v.disabled,onClick:P,onKeyDown:M};return $$1({ourProps:ee,theirProps:Q,slot:H,defaultTag:Ge,name:"Combobox.Button"})}),He="label",je=C(function(c,d){let g=w$1("Combobox.Label"),v=`headlessui-combobox-label-${I()}`,b=N("Combobox.Label"),_=y(g.labelRef,d);s$3(()=>b.registerLabel(v),[v]);let E=o$1(()=>{var M;return(M=g.inputRef.current)==null?void 0:M.focus({preventScroll:!0})}),R=react.exports.useMemo(()=>({open:g.comboboxState===0,disabled:g.disabled}),[g]);return $$1({ourProps:{ref:_,id:v,onClick:E},theirProps:c,slot:R,defaultTag:He,name:"Combobox.Label"})}),Ke="ul",We=S.RenderStrategy|S.Static,Xe=C(function(c,d){var g;let{hold:v=!1,...b}=c,_=w$1("Combobox.Options"),E=y(_.optionsRef,d),R=`headlessui-combobox-options-${I()}`,M=s$4(),P=(()=>M!==null?M===p$3.Open:_.comboboxState===0)();s$3(()=>{var ee;_.optionsPropsRef.current.static=(ee=c.static)!=null?ee:!1},[_.optionsPropsRef,c.static]),s$3(()=>{_.optionsPropsRef.current.hold=v},[_.optionsPropsRef,v]),F({container:_.optionsRef.current,enabled:_.comboboxState===0,accept(ee){return ee.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:ee.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(ee){ee.setAttribute("role","none")}});let O=i$2(()=>{var ee,V;return(V=_.labelId)!=null?V:(ee=_.buttonRef.current)==null?void 0:ee.id},[_.labelId,_.buttonRef.current]),H=react.exports.useMemo(()=>({open:_.comboboxState===0}),[_]),Q={"aria-activedescendant":_.activeOptionIndex===null||(g=_.options[_.activeOptionIndex])==null?void 0:g.id,"aria-labelledby":O,role:"listbox",id:R,ref:E};return $$1({ourProps:Q,theirProps:b,slot:H,defaultTag:Ke,features:We,visible:P,name:"Combobox.Options"})}),$e="li",Je=C(function(c,d){var g,v;let{disabled:b=!1,value:_,...E}=c,R=w$1("Combobox.Option"),M=N("Combobox.Option"),P=`headlessui-combobox-option-${I()}`,O=R.activeOptionIndex!==null?R.options[R.activeOptionIndex].id===P:!1,H=R.isSelected(_),Q=react.exports.useRef(null),ee=s$2({disabled:b,value:_,domRef:Q,textValue:(v=(g=Q.current)==null?void 0:g.textContent)==null?void 0:v.toLowerCase()}),V=y(d,Q),W=o$1(()=>M.selectOption(P));s$3(()=>M.registerOption(P,ee),[ee,P]);let Y=react.exports.useRef(!R.__demoMode);s$3(()=>{if(!R.__demoMode)return;let X=m$2();return X.requestAnimationFrame(()=>{Y.current=!0}),X.dispose},[]),s$3(()=>{if(R.comboboxState!==0||!O||!Y.current||R.activationTrigger===0)return;let X=m$2();return X.requestAnimationFrame(()=>{var oe,be;(be=(oe=Q.current)==null?void 0:oe.scrollIntoView)==null||be.call(oe,{block:"nearest"})}),X.dispose},[Q,O,R.comboboxState,R.activationTrigger,R.activeOptionIndex]);let U=o$1(X=>{if(b)return X.preventDefault();W(),R.mode===0&&M.closeCombobox()}),G=o$1(()=>{if(b)return M.goToOption(a.Nothing);M.goToOption(a.Specific,P)}),te=o$1(()=>{b||O||M.goToOption(a.Specific,P,0)}),B=o$1(()=>{b||!O||R.optionsPropsRef.current.hold||M.goToOption(a.Nothing)}),j=react.exports.useMemo(()=>({active:O,selected:H,disabled:b}),[O,H,b]);return $$1({ourProps:{id:P,ref:V,role:"option",tabIndex:b===!0?void 0:-1,"aria-disabled":b===!0?!0:void 0,"aria-selected":H,disabled:void 0,onClick:U,onFocus:G,onPointerMove:te,onMouseMove:te,onPointerLeave:B,onMouseLeave:B},theirProps:E,slot:j,defaultTag:$e,name:"Combobox.Option"})}),Lo=Object.assign(we,{Input:Ue,Button:Ne,Label:je,Options:Xe,Option:Je});var ue=(c=>(c[c.Open=0]="Open",c[c.Closed=1]="Closed",c))(ue||{}),se=(c=>(c[c.Pointer=0]="Pointer",c[c.Other=1]="Other",c))(se||{}),le=(c=>(c[c.OpenMenu=0]="OpenMenu",c[c.CloseMenu=1]="CloseMenu",c[c.GoToItem=2]="GoToItem",c[c.Search=3]="Search",c[c.ClearSearch=4]="ClearSearch",c[c.RegisterItem=5]="RegisterItem",c[c.UnregisterItem=6]="UnregisterItem",c))(le||{});function k(c,d=g=>g){let g=c.activeItemIndex!==null?c.items[c.activeItemIndex]:null,v=S$1(d(c.items.slice()),_=>_.dataRef.current.domRef.current),b=g?v.indexOf(g):null;return b===-1&&(b=null),{items:v,activeItemIndex:b}}let ce={[1](c){return c.menuState===1?c:{...c,activeItemIndex:null,menuState:1}},[0](c){return c.menuState===0?c:{...c,menuState:0}},[2]:(c,d)=>{var g;let v=k(c),b=x(d,{resolveItems:()=>v.items,resolveActiveIndex:()=>v.activeItemIndex,resolveId:_=>_.id,resolveDisabled:_=>_.dataRef.current.disabled});return{...c,...v,searchQuery:"",activeItemIndex:b,activationTrigger:(g=d.trigger)!=null?g:1}},[3]:(c,d)=>{let g=c.searchQuery!==""?0:1,v=c.searchQuery+d.value.toLowerCase(),b=(c.activeItemIndex!==null?c.items.slice(c.activeItemIndex+g).concat(c.items.slice(0,c.activeItemIndex+g)):c.items).find(E=>{var R;return((R=E.dataRef.current.textValue)==null?void 0:R.startsWith(v))&&!E.dataRef.current.disabled}),_=b?c.items.indexOf(b):-1;return _===-1||_===c.activeItemIndex?{...c,searchQuery:v}:{...c,searchQuery:v,activeItemIndex:_,activationTrigger:1}},[4](c){return c.searchQuery===""?c:{...c,searchQuery:"",searchActiveItemIndex:null}},[5]:(c,d)=>{let g=k(c,v=>[...v,{id:d.id,dataRef:d.dataRef}]);return{...c,...g}},[6]:(c,d)=>{let g=k(c,v=>{let b=v.findIndex(_=>_.id===d.id);return b!==-1&&v.splice(b,1),v});return{...c,...g,activationTrigger:1}}},w=react.exports.createContext(null);w.displayName="MenuContext";function D(c){let d=react.exports.useContext(w);if(d===null){let g=new Error(`<${c} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,D),g}return d}function pe(c,d){return u$1(d.type,ce,c,d)}let me=react.exports.Fragment,de=C(function(c,d){let g=react.exports.useReducer(pe,{menuState:1,buttonRef:react.exports.createRef(),itemsRef:react.exports.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:v,itemsRef:b,buttonRef:_},E]=g,R=y(d);L([_,b],(H,Q)=>{var ee;E({type:1}),F$2(Q,N$1.Loose)||(H.preventDefault(),(ee=_.current)==null||ee.focus())},v===0);let M=react.exports.useMemo(()=>({open:v===0}),[v]),P=c,O={ref:R};return React.createElement(w.Provider,{value:g},React.createElement(C$1,{value:u$1(v,{[0]:p$3.Open,[1]:p$3.Closed})},$$1({ourProps:O,theirProps:P,slot:M,defaultTag:me,name:"Menu"})))}),fe="button",Te=C(function(c,d){var g;let[v,b]=D("Menu.Button"),_=y(v.buttonRef,d),E=`headlessui-menu-button-${I()}`,R=p$2(),M=o$1(V=>{switch(V.key){case o$2.Space:case o$2.Enter:case o$2.ArrowDown:V.preventDefault(),V.stopPropagation(),b({type:0}),R.nextFrame(()=>b({type:2,focus:a.First}));break;case o$2.ArrowUp:V.preventDefault(),V.stopPropagation(),b({type:0}),R.nextFrame(()=>b({type:2,focus:a.Last}));break}}),P=o$1(V=>{switch(V.key){case o$2.Space:V.preventDefault();break}}),O=o$1(V=>{if(r$2(V.currentTarget))return V.preventDefault();c.disabled||(v.menuState===0?(b({type:1}),R.nextFrame(()=>{var W;return(W=v.buttonRef.current)==null?void 0:W.focus({preventScroll:!0})})):(V.preventDefault(),b({type:0})))}),H=react.exports.useMemo(()=>({open:v.menuState===0}),[v]),Q=c,ee={ref:_,id:E,type:s$1(c,v.buttonRef),"aria-haspopup":!0,"aria-controls":(g=v.itemsRef.current)==null?void 0:g.id,"aria-expanded":c.disabled?void 0:v.menuState===0,onKeyDown:M,onKeyUp:P,onClick:O};return $$1({ourProps:ee,theirProps:Q,slot:H,defaultTag:fe,name:"Menu.Button"})}),ye="div",Ie=S.RenderStrategy|S.Static,ge=C(function(c,d){var g,v;let[b,_]=D("Menu.Items"),E=y(b.itemsRef,d),R=n$2(b.itemsRef),M=`headlessui-menu-items-${I()}`,P=p$2(),O=s$4(),H=(()=>O!==null?O===p$3.Open:b.menuState===0)();react.exports.useEffect(()=>{let U=b.itemsRef.current;!U||b.menuState===0&&U!==(R==null?void 0:R.activeElement)&&U.focus({preventScroll:!0})},[b.menuState,b.itemsRef,R]),F({container:b.itemsRef.current,enabled:b.menuState===0,accept(U){return U.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:U.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(U){U.setAttribute("role","none")}});let Q=o$1(U=>{var G,te;switch(P.dispose(),U.key){case o$2.Space:if(b.searchQuery!=="")return U.preventDefault(),U.stopPropagation(),_({type:3,value:U.key});case o$2.Enter:if(U.preventDefault(),U.stopPropagation(),_({type:1}),b.activeItemIndex!==null){let{dataRef:B}=b.items[b.activeItemIndex];(te=(G=B.current)==null?void 0:G.domRef.current)==null||te.click()}I$1(b.buttonRef.current);break;case o$2.ArrowDown:return U.preventDefault(),U.stopPropagation(),_({type:2,focus:a.Next});case o$2.ArrowUp:return U.preventDefault(),U.stopPropagation(),_({type:2,focus:a.Previous});case o$2.Home:case o$2.PageUp:return U.preventDefault(),U.stopPropagation(),_({type:2,focus:a.First});case o$2.End:case o$2.PageDown:return U.preventDefault(),U.stopPropagation(),_({type:2,focus:a.Last});case o$2.Escape:U.preventDefault(),U.stopPropagation(),_({type:1}),m$2().nextFrame(()=>{var B;return(B=b.buttonRef.current)==null?void 0:B.focus({preventScroll:!0})});break;case o$2.Tab:U.preventDefault(),U.stopPropagation(),_({type:1}),m$2().nextFrame(()=>{D$1(b.buttonRef.current,U.shiftKey?T.Previous:T.Next)});break;default:U.key.length===1&&(_({type:3,value:U.key}),P.setTimeout(()=>_({type:4}),350));break}}),ee=o$1(U=>{switch(U.key){case o$2.Space:U.preventDefault();break}}),V=react.exports.useMemo(()=>({open:b.menuState===0}),[b]),W=c,Y={"aria-activedescendant":b.activeItemIndex===null||(g=b.items[b.activeItemIndex])==null?void 0:g.id,"aria-labelledby":(v=b.buttonRef.current)==null?void 0:v.id,id:M,onKeyDown:Q,onKeyUp:ee,role:"menu",tabIndex:0,ref:E};return $$1({ourProps:Y,theirProps:W,slot:V,defaultTag:ye,features:Ie,visible:H,name:"Menu.Items"})}),Me=react.exports.Fragment,Re=C(function(c,d){let{disabled:g=!1,...v}=c,[b,_]=D("Menu.Item"),E=`headlessui-menu-item-${I()}`,R=b.activeItemIndex!==null?b.items[b.activeItemIndex].id===E:!1,M=react.exports.useRef(null),P=y(d,M);s$3(()=>{if(b.menuState!==0||!R||b.activationTrigger===0)return;let Y=m$2();return Y.requestAnimationFrame(()=>{var U,G;(G=(U=M.current)==null?void 0:U.scrollIntoView)==null||G.call(U,{block:"nearest"})}),Y.dispose},[M,R,b.menuState,b.activationTrigger,b.activeItemIndex]);let O=react.exports.useRef({disabled:g,domRef:M});s$3(()=>{O.current.disabled=g},[O,g]),s$3(()=>{var Y,U;O.current.textValue=(U=(Y=M.current)==null?void 0:Y.textContent)==null?void 0:U.toLowerCase()},[O,M]),s$3(()=>(_({type:5,id:E,dataRef:O}),()=>_({type:6,id:E})),[O,E]);let H=o$1(Y=>{if(g)return Y.preventDefault();_({type:1}),I$1(b.buttonRef.current)}),Q=o$1(()=>{if(g)return _({type:2,focus:a.Nothing});_({type:2,focus:a.Specific,id:E})}),ee=o$1(()=>{g||R||_({type:2,focus:a.Specific,id:E,trigger:0})}),V=o$1(()=>{g||!R||_({type:2,focus:a.Nothing})}),W=react.exports.useMemo(()=>({active:R,disabled:g}),[R,g]);return $$1({ourProps:{id:E,ref:P,role:"menuitem",tabIndex:g===!0?void 0:-1,"aria-disabled":g===!0?!0:void 0,disabled:void 0,onClick:H,onFocus:Q,onPointerMove:ee,onMouseMove:ee,onPointerLeave:V,onMouseLeave:V},theirProps:v,slot:W,defaultTag:Me,name:"Menu.Item"})}),qe=Object.assign(de,{Button:Te,Items:ge,Item:Re});function ChevronRightIcon$2(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"}))}const ForwardRef$8=react.exports.forwardRef(ChevronRightIcon$2),ChevronRightIcon$3=ForwardRef$8;function DotsHorizontalIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"}))}const ForwardRef$7=react.exports.forwardRef(DotsHorizontalIcon),DotsHorizontalIcon$1=ForwardRef$7,SaveButton=({submitting:c})=>React.createElement("button",{type:"submit",disabled:c,className:cx("ctw-btn-primary ctw-save-button ctw-w-28 ctw-whitespace-nowrap")},c?"Saving...":"Save",c&&React.createElement(Spinner,{className:"ctw-ml-2 ctw-text-white"}));try{SaveButton.displayName="SaveButton",SaveButton.__docgenInfo={description:"",displayName:"SaveButton",props:{submitting:{defaultValue:null,description:"",name:"submitting",required:!0,type:{name:"boolean"}}}}}catch{}function ChevronLeftIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"}))}const ForwardRef$6=react.exports.forwardRef(ChevronLeftIcon),ChevronLeftIcon$1=ForwardRef$6;function ChevronRightIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}))}const ForwardRef$5=react.exports.forwardRef(ChevronRightIcon),ChevronRightIcon$1=ForwardRef$5;function ExclamationCircleIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))}const ForwardRef$4=react.exports.forwardRef(ExclamationCircleIcon),ExclamationCircleIcon$1=ForwardRef$4;function ExclamationIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))}const ForwardRef$3=react.exports.forwardRef(ExclamationIcon),ExclamationIcon$1=ForwardRef$3;function LockClosedIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"}))}const ForwardRef$2=react.exports.forwardRef(LockClosedIcon),LockClosedIcon$1=ForwardRef$2;function PencilIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"}))}const ForwardRef$1=react.exports.forwardRef(PencilIcon),PencilIcon$1=ForwardRef$1;function SearchIcon(c,d){return react.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d},c),react.exports.createElement("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"}))}const ForwardRef=react.exports.forwardRef(SearchIcon),SearchIcon$1=ForwardRef,ErrorAlert=({header:c,children:d,className:g})=>React.createElement("div",{className:cx("ctw-alert-bg ctw-rounded-md ctw-bg-error-bg",g)},React.createElement(ExclamationCircleIcon$1,{className:"ctw-h-5 ctw-flex-none ctw-text-error-icon"}),React.createElement("div",{className:"ctw-space-y-2"},React.createElement("div",{className:"ctw-font-medium ctw-text-error-heading"},c),d&&React.createElement("div",{className:"ctw-text-error-message"},d))),CautionAlert=({header:c,children:d,className:g})=>React.createElement("div",{className:cx("ctw-alert-bg ctw-rounded-md ctw-bg-caution-bg",g)},React.createElement(ExclamationIcon$1,{className:"ctw-h-5 ctw-flex-none ctw-text-caution-icon"}),React.createElement("div",{className:"ctw-space-y-2"},React.createElement("div",{className:"ctw-font-medium ctw-text-caution-heading"},c),d&&React.createElement("div",{className:"ctw-text-caution-message"},d)));try{ErrorAlert.displayName="ErrorAlert",ErrorAlert.__docgenInfo={description:"",displayName:"ErrorAlert",props:{header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{CautionAlert.displayName="CautionAlert",CautionAlert.__docgenInfo={description:"",displayName:"CautionAlert",props:{header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}function $e42e1063c40fb3ef$export$b9ecd428b558ff10(c,d,{checkForDefaultPrevented:g=!0}={}){return function(b){if(c==null||c(b),g===!1||!b.defaultPrevented)return d==null?void 0:d(b)}}function $6ed0406888f73fc4$var$setRef(c,d){typeof c=="function"?c(d):c!=null&&(c.current=d)}function $6ed0406888f73fc4$export$43e446d32b3d21af(...c){return d=>c.forEach(g=>$6ed0406888f73fc4$var$setRef(g,d))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...c){return react.exports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(...c),c)}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(c,d=[]){let g=[];function v(_,E){const R=react.exports.createContext(E),M=g.length;g=[...g,E];function P(H){const{scope:Q,children:ee,...V}=H,W=(Q==null?void 0:Q[c][M])||R,Y=react.exports.useMemo(()=>V,Object.values(V));return react.exports.createElement(W.Provider,{value:Y},ee)}function O(H,Q){const ee=(Q==null?void 0:Q[c][M])||R,V=react.exports.useContext(ee);if(V)return V;if(E!==void 0)return E;throw new Error(`\`${H}\` must be used within \`${_}\``)}return P.displayName=_+"Provider",[P,O]}const b=()=>{const _=g.map(E=>react.exports.createContext(E));return function(R){const M=(R==null?void 0:R[c])||_;return react.exports.useMemo(()=>({[`__scope${c}`]:{...R,[c]:M}}),[R,M])}};return b.scopeName=c,[v,$c512c27ab02ef895$var$composeContextScopes(b,...d)]}function $c512c27ab02ef895$var$composeContextScopes(...c){const d=c[0];if(c.length===1)return d;const g=()=>{const v=c.map(b=>({useScope:b(),scopeName:b.scopeName}));return function(_){const E=v.reduce((R,{useScope:M,scopeName:P})=>{const H=M(_)[`__scope${P}`];return{...R,...H}},{});return react.exports.useMemo(()=>({[`__scope${d.scopeName}`]:E}),[E])}};return g.scopeName=d.scopeName,g}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(c){const d=react.exports.useRef(c);return react.exports.useEffect(()=>{d.current=c}),react.exports.useMemo(()=>(...g)=>{var v;return(v=d.current)===null||v===void 0?void 0:v.call(d,...g)},[])}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:c,defaultProp:d,onChange:g=()=>{}}){const[v,b]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:d,onChange:g}),_=c!==void 0,E=_?c:v,R=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(g),M=react.exports.useCallback(P=>{if(_){const H=typeof P=="function"?P(c):P;H!==c&&R(H)}else b(P)},[_,c,b,R]);return[E,M]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:c,onChange:d}){const g=react.exports.useState(c),[v]=g,b=react.exports.useRef(v),_=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(d);return react.exports.useEffect(()=>{b.current!==v&&(_(v),b.current=v)},[v,b,_]),g}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=react.exports.forwardRef((c,d)=>{const{children:g,...v}=c,b=react.exports.Children.toArray(g),_=b.find($5e63c961fc1ce211$var$isSlottable);if(_){const E=_.props.children,R=b.map(M=>M===_?react.exports.Children.count(E)>1?react.exports.Children.only(null):react.exports.isValidElement(E)?E.props.children:null:M);return react.exports.createElement($5e63c961fc1ce211$var$SlotClone,_extends({},v,{ref:d}),react.exports.isValidElement(E)?react.exports.cloneElement(E,void 0,R):null)}return react.exports.createElement($5e63c961fc1ce211$var$SlotClone,_extends({},v,{ref:d}),g)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=react.exports.forwardRef((c,d)=>{const{children:g,...v}=c;return react.exports.isValidElement(g)?react.exports.cloneElement(g,{...$5e63c961fc1ce211$var$mergeProps(v,g.props),ref:$6ed0406888f73fc4$export$43e446d32b3d21af(d,g.ref)}):react.exports.Children.count(g)>1?react.exports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:c})=>react.exports.createElement(react.exports.Fragment,null,c);function $5e63c961fc1ce211$var$isSlottable(c){return react.exports.isValidElement(c)&&c.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(c,d){const g={...d};for(const v in d){const b=c[v],_=d[v];/^on[A-Z]/.test(v)?g[v]=(...R)=>{_==null||_(...R),b==null||b(...R)}:v==="style"?g[v]={...b,..._}:v==="className"&&(g[v]=[b,_].filter(Boolean).join(" "))}return{...c,...g}}const $8927f6f2acc4f386$var$NODES=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((c,d)=>{const g=react.exports.forwardRef((v,b)=>{const{asChild:_,...E}=v,R=_?$5e63c961fc1ce211$export$8c6ed5c666ac1360:d;return react.exports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),react.exports.createElement(R,_extends({},E,{ref:b}))});return g.displayName=`Primitive.${d}`,{...c,[d]:g}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(c,d){c&&reactDom.exports.flushSync(()=>c.dispatchEvent(d))}function $e02a7d9cb1dc128c$export$c74125a8e3af6bb2(c){const d=c+"CollectionProvider",[g,v]=$c512c27ab02ef895$export$50c7b4e9d9f19c1(d),[b,_]=g(d,{collectionRef:{current:null},itemMap:new Map}),E=ee=>{const{scope:V,children:W}=ee,Y=React.useRef(null),U=React.useRef(new Map).current;return React.createElement(b,{scope:V,itemMap:U,collectionRef:Y},W)},R=c+"CollectionSlot",M=React.forwardRef((ee,V)=>{const{scope:W,children:Y}=ee,U=_(R,W),G=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(V,U.collectionRef);return React.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{ref:G},Y)}),P=c+"CollectionItemSlot",O="data-radix-collection-item",H=React.forwardRef((ee,V)=>{const{scope:W,children:Y,...U}=ee,G=React.useRef(null),te=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(V,G),B=_(P,W);return React.useEffect(()=>(B.itemMap.set(G,{ref:G,...U}),()=>void B.itemMap.delete(G))),React.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{[O]:"",ref:te},Y)});function Q(ee){const V=_(c+"CollectionConsumer",ee);return React.useCallback(()=>{const Y=V.collectionRef.current;if(!Y)return[];const U=Array.from(Y.querySelectorAll(`[${O}]`));return Array.from(V.itemMap.values()).sort((B,j)=>U.indexOf(B.ref.current)-U.indexOf(j.ref.current))},[V.collectionRef,V.itemMap])}return[{Provider:E,Slot:M,ItemSlot:H},Q,v]}const $f631663db3294ace$var$DirectionContext=react.exports.createContext(void 0);function $f631663db3294ace$export$b39126d51d94e6f3(c){const d=react.exports.useContext($f631663db3294ace$var$DirectionContext);return c||d||"ltr"}function $addc16e1bbe58fd0$export$3a72a57244d6e765(c){const d=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(c);react.exports.useEffect(()=>{const g=v=>{v.key==="Escape"&&d(v)};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[d])}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=react.exports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=react.exports.forwardRef((c,d)=>{const{disableOutsidePointerEvents:g=!1,onEscapeKeyDown:v,onPointerDownOutside:b,onFocusOutside:_,onInteractOutside:E,onDismiss:R,...M}=c,P=react.exports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[O,H]=react.exports.useState(null),[,Q]=react.exports.useState({}),ee=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,X=>H(X)),V=Array.from(P.layers),[W]=[...P.layersWithOutsidePointerEventsDisabled].slice(-1),Y=V.indexOf(W),U=O?V.indexOf(O):-1,G=P.layersWithOutsidePointerEventsDisabled.size>0,te=U>=Y,B=$5cb92bef7577960e$var$usePointerDownOutside(X=>{const oe=X.target,be=[...P.branches].some(ae=>ae.contains(oe));!te||be||(b==null||b(X),E==null||E(X),X.defaultPrevented||R==null||R())}),j=$5cb92bef7577960e$var$useFocusOutside(X=>{const oe=X.target;[...P.branches].some(ae=>ae.contains(oe))||(_==null||_(X),E==null||E(X),X.defaultPrevented||R==null||R())});return $addc16e1bbe58fd0$export$3a72a57244d6e765(X=>{U===P.layers.size-1&&(v==null||v(X),!X.defaultPrevented&&R&&(X.preventDefault(),R()))}),react.exports.useEffect(()=>{if(!!O)return g&&(P.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),P.layersWithOutsidePointerEventsDisabled.add(O)),P.layers.add(O),$5cb92bef7577960e$var$dispatchUpdate(),()=>{g&&P.layersWithOutsidePointerEventsDisabled.size===1&&(document.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[O,g,P]),react.exports.useEffect(()=>()=>{!O||(P.layers.delete(O),P.layersWithOutsidePointerEventsDisabled.delete(O),$5cb92bef7577960e$var$dispatchUpdate())},[O,P]),react.exports.useEffect(()=>{const X=()=>Q({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,X),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,X)},[]),react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({},M,{ref:ee,style:{pointerEvents:G?te?"auto":"none":void 0,...c.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onFocusCapture,j.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onBlurCapture,j.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onPointerDownCapture,B.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside(c){const d=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(c),g=react.exports.useRef(!1),v=react.exports.useRef(()=>{});return react.exports.useEffect(()=>{const b=E=>{if(E.target&&!g.current){let M=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,d,R,{discrete:!0})};const R={originalEvent:E};E.pointerType==="touch"?(document.removeEventListener("click",v.current),v.current=M,document.addEventListener("click",v.current,{once:!0})):M()}g.current=!1},_=window.setTimeout(()=>{document.addEventListener("pointerdown",b)},0);return()=>{window.clearTimeout(_),document.removeEventListener("pointerdown",b),document.removeEventListener("click",v.current)}},[d]),{onPointerDownCapture:()=>g.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(c){const d=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(c),g=react.exports.useRef(!1);return react.exports.useEffect(()=>{const v=b=>{b.target&&!g.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,d,{originalEvent:b},{discrete:!1})};return document.addEventListener("focusin",v),()=>document.removeEventListener("focusin",v)},[d]),{onFocusCapture:()=>g.current=!0,onBlurCapture:()=>g.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const c=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(c)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(c,d,g,{discrete:v}){const b=g.originalEvent.target,_=new CustomEvent(c,{bubbles:!1,cancelable:!0,detail:g});d&&b.addEventListener(c,d,{once:!0}),v?$8927f6f2acc4f386$export$6d1a0317bde7de7f(b,_):b.dispatchEvent(_)}let $3db38b7d1fb3fe6a$var$count=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(){react.exports.useEffect(()=>{var c,d;const g=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(c=g[0])!==null&&c!==void 0?c:$3db38b7d1fb3fe6a$var$createFocusGuard()),document.body.insertAdjacentElement("beforeend",(d=g[1])!==null&&d!==void 0?d:$3db38b7d1fb3fe6a$var$createFocusGuard()),$3db38b7d1fb3fe6a$var$count++,()=>{$3db38b7d1fb3fe6a$var$count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(v=>v.remove()),$3db38b7d1fb3fe6a$var$count--}},[])}function $3db38b7d1fb3fe6a$var$createFocusGuard(){const c=document.createElement("span");return c.setAttribute("data-radix-focus-guard",""),c.tabIndex=0,c.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",c}const $d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=react.exports.forwardRef((c,d)=>{const{loop:g=!1,trapped:v=!1,onMountAutoFocus:b,onUnmountAutoFocus:_,...E}=c,[R,M]=react.exports.useState(null),P=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(b),O=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_),H=react.exports.useRef(null),Q=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,W=>M(W)),ee=react.exports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;react.exports.useEffect(()=>{if(v){let W=function(U){if(ee.paused||!R)return;const G=U.target;R.contains(G)?H.current=G:$d3863c46a17e8a28$var$focus(H.current,{select:!0})},Y=function(U){ee.paused||!R||R.contains(U.relatedTarget)||$d3863c46a17e8a28$var$focus(H.current,{select:!0})};return document.addEventListener("focusin",W),document.addEventListener("focusout",Y),()=>{document.removeEventListener("focusin",W),document.removeEventListener("focusout",Y)}}},[v,R,ee.paused]),react.exports.useEffect(()=>{if(R){$d3863c46a17e8a28$var$focusScopesStack.add(ee);const W=document.activeElement;if(!R.contains(W)){const U=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);R.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,P),R.dispatchEvent(U),U.defaultPrevented||($d3863c46a17e8a28$var$focusFirst($d3863c46a17e8a28$var$removeLinks($d3863c46a17e8a28$var$getTabbableCandidates(R)),{select:!0}),document.activeElement===W&&$d3863c46a17e8a28$var$focus(R))}return()=>{R.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,P),setTimeout(()=>{const U=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);R.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,O),R.dispatchEvent(U),U.defaultPrevented||$d3863c46a17e8a28$var$focus(W!=null?W:document.body,{select:!0}),R.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,O),$d3863c46a17e8a28$var$focusScopesStack.remove(ee)},0)}}},[R,P,O,ee]);const V=react.exports.useCallback(W=>{if(!g&&!v||ee.paused)return;const Y=W.key==="Tab"&&!W.altKey&&!W.ctrlKey&&!W.metaKey,U=document.activeElement;if(Y&&U){const G=W.currentTarget,[te,B]=$d3863c46a17e8a28$var$getTabbableEdges(G);te&&B?!W.shiftKey&&U===B?(W.preventDefault(),g&&$d3863c46a17e8a28$var$focus(te,{select:!0})):W.shiftKey&&U===te&&(W.preventDefault(),g&&$d3863c46a17e8a28$var$focus(B,{select:!0})):U===G&&W.preventDefault()}},[g,v,ee.paused]);return react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({tabIndex:-1},E,{ref:Q,onKeyDown:V}))});function $d3863c46a17e8a28$var$focusFirst(c,{select:d=!1}={}){const g=document.activeElement;for(const v of c)if($d3863c46a17e8a28$var$focus(v,{select:d}),document.activeElement!==g)return}function $d3863c46a17e8a28$var$getTabbableEdges(c){const d=$d3863c46a17e8a28$var$getTabbableCandidates(c),g=$d3863c46a17e8a28$var$findVisible(d,c),v=$d3863c46a17e8a28$var$findVisible(d.reverse(),c);return[g,v]}function $d3863c46a17e8a28$var$getTabbableCandidates(c){const d=[],g=document.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,{acceptNode:v=>{const b=v.tagName==="INPUT"&&v.type==="hidden";return v.disabled||v.hidden||b?NodeFilter.FILTER_SKIP:v.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;g.nextNode();)d.push(g.currentNode);return d}function $d3863c46a17e8a28$var$findVisible(c,d){for(const g of c)if(!$d3863c46a17e8a28$var$isHidden(g,{upTo:d}))return g}function $d3863c46a17e8a28$var$isHidden(c,{upTo:d}){if(getComputedStyle(c).visibility==="hidden")return!0;for(;c;){if(d!==void 0&&c===d)return!1;if(getComputedStyle(c).display==="none")return!0;c=c.parentElement}return!1}function $d3863c46a17e8a28$var$isSelectableInput(c){return c instanceof HTMLInputElement&&"select"in c}function $d3863c46a17e8a28$var$focus(c,{select:d=!1}={}){if(c&&c.focus){const g=document.activeElement;c.focus({preventScroll:!0}),c!==g&&$d3863c46a17e8a28$var$isSelectableInput(c)&&d&&c.select()}}const $d3863c46a17e8a28$var$focusScopesStack=$d3863c46a17e8a28$var$createFocusScopesStack();function $d3863c46a17e8a28$var$createFocusScopesStack(){let c=[];return{add(d){const g=c[0];d!==g&&(g==null||g.pause()),c=$d3863c46a17e8a28$var$arrayRemove(c,d),c.unshift(d)},remove(d){var g;c=$d3863c46a17e8a28$var$arrayRemove(c,d),(g=c[0])===null||g===void 0||g.resume()}}}function $d3863c46a17e8a28$var$arrayRemove(c,d){const g=[...c],v=g.indexOf(d);return v!==-1&&g.splice(v,1),g}function $d3863c46a17e8a28$var$removeLinks(c){return c.filter(d=>d.tagName!=="A")}const $9f79659886946c16$export$e5c5a5f917a5871c=Boolean(globalThis==null?void 0:globalThis.document)?react.exports.useLayoutEffect:()=>{},$1746a345f3d73bb7$var$useReactId=React$1["useId".toString()]||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(c){const[d,g]=react.exports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{c||g(v=>v!=null?v:String($1746a345f3d73bb7$var$count++))},[c]),c||(d?`radix-${d}`:"")}function getSide(c){return c.split("-")[0]}function getAlignment(c){return c.split("-")[1]}function getMainAxisFromPlacement(c){return["top","bottom"].includes(getSide(c))?"x":"y"}function getLengthFromAxis(c){return c==="y"?"height":"width"}function computeCoordsFromPlacement(c,d,g){let{reference:v,floating:b}=c;const _=v.x+v.width/2-b.width/2,E=v.y+v.height/2-b.height/2,R=getMainAxisFromPlacement(d),M=getLengthFromAxis(R),P=v[M]/2-b[M]/2,O=getSide(d),H=R==="x";let Q;switch(O){case"top":Q={x:_,y:v.y-b.height};break;case"bottom":Q={x:_,y:v.y+v.height};break;case"right":Q={x:v.x+v.width,y:E};break;case"left":Q={x:v.x-b.width,y:E};break;default:Q={x:v.x,y:v.y}}switch(getAlignment(d)){case"start":Q[R]-=P*(g&&H?-1:1);break;case"end":Q[R]+=P*(g&&H?-1:1);break}return Q}const computePosition$1=async(c,d,g)=>{const{placement:v="bottom",strategy:b="absolute",middleware:_=[],platform:E}=g,R=await(E.isRTL==null?void 0:E.isRTL(d));let M=await E.getElementRects({reference:c,floating:d,strategy:b}),{x:P,y:O}=computeCoordsFromPlacement(M,v,R),H=v,Q={},ee=0;for(let V=0;V<_.length;V++){const{name:W,fn:Y}=_[V],{x:U,y:G,data:te,reset:B}=await Y({x:P,y:O,initialPlacement:v,placement:H,strategy:b,middlewareData:Q,rects:M,platform:E,elements:{reference:c,floating:d}});if(P=U!=null?U:P,O=G!=null?G:O,Q={...Q,[W]:{...Q[W],...te}},B&&ee<=50){ee++,typeof B=="object"&&(B.placement&&(H=B.placement),B.rects&&(M=B.rects===!0?await E.getElementRects({reference:c,floating:d,strategy:b}):B.rects),{x:P,y:O}=computeCoordsFromPlacement(M,H,R)),V=-1;continue}}return{x:P,y:O,placement:H,strategy:b,middlewareData:Q}};function expandPaddingObject(c){return{top:0,right:0,bottom:0,left:0,...c}}function getSideObjectFromPadding(c){return typeof c!="number"?expandPaddingObject(c):{top:c,right:c,bottom:c,left:c}}function rectToClientRect(c){return{...c,top:c.y,left:c.x,right:c.x+c.width,bottom:c.y+c.height}}async function detectOverflow(c,d){var g;d===void 0&&(d={});const{x:v,y:b,platform:_,rects:E,elements:R,strategy:M}=c,{boundary:P="clippingAncestors",rootBoundary:O="viewport",elementContext:H="floating",altBoundary:Q=!1,padding:ee=0}=d,V=getSideObjectFromPadding(ee),Y=R[Q?H==="floating"?"reference":"floating":H],U=rectToClientRect(await _.getClippingRect({element:(g=await(_.isElement==null?void 0:_.isElement(Y)))==null||g?Y:Y.contextElement||await(_.getDocumentElement==null?void 0:_.getDocumentElement(R.floating)),boundary:P,rootBoundary:O,strategy:M})),G=rectToClientRect(_.convertOffsetParentRelativeRectToViewportRelativeRect?await _.convertOffsetParentRelativeRectToViewportRelativeRect({rect:H==="floating"?{...E.floating,x:v,y:b}:E.reference,offsetParent:await(_.getOffsetParent==null?void 0:_.getOffsetParent(R.floating)),strategy:M}):E[H]);return{top:U.top-G.top+V.top,bottom:G.bottom-U.bottom+V.bottom,left:U.left-G.left+V.left,right:G.right-U.right+V.right}}const min$1=Math.min,max$1=Math.max;function within(c,d,g){return max$1(c,min$1(d,g))}const arrow$1=c=>({name:"arrow",options:c,async fn(d){const{element:g,padding:v=0}=c!=null?c:{},{x:b,y:_,placement:E,rects:R,platform:M}=d;if(g==null)return{};const P=getSideObjectFromPadding(v),O={x:b,y:_},H=getMainAxisFromPlacement(E),Q=getAlignment(E),ee=getLengthFromAxis(H),V=await M.getDimensions(g),W=H==="y"?"top":"left",Y=H==="y"?"bottom":"right",U=R.reference[ee]+R.reference[H]-O[H]-R.floating[ee],G=O[H]-R.reference[H],te=await(M.getOffsetParent==null?void 0:M.getOffsetParent(g));let B=te?H==="y"?te.clientHeight||0:te.clientWidth||0:0;B===0&&(B=R.floating[ee]);const j=U/2-G/2,X=P[W],oe=B-V[ee]-P[Y],be=B/2-V[ee]/2+j,ae=within(X,be,oe),mt=(Q==="start"?P[W]:P[Y])>0&&be!==ae&&R.reference[ee]<=R.floating[ee]?be<X?X-be:oe-be:0;return{[H]:O[H]-mt,data:{[H]:ae,centerOffset:be-ae}}}}),hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(c){return c.replace(/left|right|bottom|top/g,d=>hash$1[d])}function getAlignmentSides(c,d,g){g===void 0&&(g=!1);const v=getAlignment(c),b=getMainAxisFromPlacement(c),_=getLengthFromAxis(b);let E=b==="x"?v===(g?"end":"start")?"right":"left":v==="start"?"bottom":"top";return d.reference[_]>d.floating[_]&&(E=getOppositePlacement(E)),{main:E,cross:getOppositePlacement(E)}}const hash={start:"end",end:"start"};function getOppositeAlignmentPlacement(c){return c.replace(/start|end/g,d=>hash[d])}const sides=["top","right","bottom","left"];function getExpandedPlacements(c){const d=getOppositePlacement(c);return[getOppositeAlignmentPlacement(c),d,getOppositeAlignmentPlacement(d)]}const flip=function(c){return c===void 0&&(c={}),{name:"flip",options:c,async fn(d){var g;const{placement:v,middlewareData:b,rects:_,initialPlacement:E,platform:R,elements:M}=d,{mainAxis:P=!0,crossAxis:O=!0,fallbackPlacements:H,fallbackStrategy:Q="bestFit",flipAlignment:ee=!0,...V}=c,W=getSide(v),U=H||(W===E||!ee?[getOppositePlacement(E)]:getExpandedPlacements(E)),G=[E,...U],te=await detectOverflow(d,V),B=[];let j=((g=b.flip)==null?void 0:g.overflows)||[];if(P&&B.push(te[W]),O){const{main:ae,cross:ie}=getAlignmentSides(v,_,await(R.isRTL==null?void 0:R.isRTL(M.floating)));B.push(te[ae],te[ie])}if(j=[...j,{placement:v,overflows:B}],!B.every(ae=>ae<=0)){var X,oe;const ae=((X=(oe=b.flip)==null?void 0:oe.index)!=null?X:0)+1,ie=G[ae];if(ie)return{data:{index:ae,overflows:j},reset:{placement:ie}};let Se="bottom";switch(Q){case"bestFit":{var be;const mt=(be=j.map(it=>[it,it.overflows.filter(Tt=>Tt>0).reduce((Tt,ht)=>Tt+ht,0)]).sort((it,Tt)=>it[1]-Tt[1])[0])==null?void 0:be[0].placement;mt&&(Se=mt);break}case"initialPlacement":Se=E;break}if(v!==Se)return{reset:{placement:Se}}}return{}}}};function getSideOffsets(c,d){return{top:c.top-d.height,right:c.right-d.width,bottom:c.bottom-d.height,left:c.left-d.width}}function isAnySideFullyClipped(c){return sides.some(d=>c[d]>=0)}const hide=function(c){let{strategy:d="referenceHidden",...g}=c===void 0?{}:c;return{name:"hide",async fn(v){const{rects:b}=v;switch(d){case"referenceHidden":{const _=await detectOverflow(v,{...g,elementContext:"reference"}),E=getSideOffsets(_,b.reference);return{data:{referenceHiddenOffsets:E,referenceHidden:isAnySideFullyClipped(E)}}}case"escaped":{const _=await detectOverflow(v,{...g,altBoundary:!0}),E=getSideOffsets(_,b.floating);return{data:{escapedOffsets:E,escaped:isAnySideFullyClipped(E)}}}default:return{}}}}};async function convertValueToCoords(c,d){const{placement:g,platform:v,elements:b}=c,_=await(v.isRTL==null?void 0:v.isRTL(b.floating)),E=getSide(g),R=getAlignment(g),M=getMainAxisFromPlacement(g)==="x",P=["left","top"].includes(E)?-1:1,O=_&&M?-1:1,H=typeof d=="function"?d(c):d;let{mainAxis:Q,crossAxis:ee,alignmentAxis:V}=typeof H=="number"?{mainAxis:H,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...H};return R&&typeof V=="number"&&(ee=R==="end"?V*-1:V),M?{x:ee*O,y:Q*P}:{x:Q*P,y:ee*O}}const offset=function(c){return c===void 0&&(c=0),{name:"offset",options:c,async fn(d){const{x:g,y:v}=d,b=await convertValueToCoords(d,c);return{x:g+b.x,y:v+b.y,data:b}}}};function getCrossAxis(c){return c==="x"?"y":"x"}const shift=function(c){return c===void 0&&(c={}),{name:"shift",options:c,async fn(d){const{x:g,y:v,placement:b}=d,{mainAxis:_=!0,crossAxis:E=!1,limiter:R={fn:Y=>{let{x:U,y:G}=Y;return{x:U,y:G}}},...M}=c,P={x:g,y:v},O=await detectOverflow(d,M),H=getMainAxisFromPlacement(getSide(b)),Q=getCrossAxis(H);let ee=P[H],V=P[Q];if(_){const Y=H==="y"?"top":"left",U=H==="y"?"bottom":"right",G=ee+O[Y],te=ee-O[U];ee=within(G,ee,te)}if(E){const Y=Q==="y"?"top":"left",U=Q==="y"?"bottom":"right",G=V+O[Y],te=V-O[U];V=within(G,V,te)}const W=R.fn({...d,[H]:ee,[Q]:V});return{...W,data:{x:W.x-g,y:W.y-v}}}}},limitShift=function(c){return c===void 0&&(c={}),{options:c,fn(d){const{x:g,y:v,placement:b,rects:_,middlewareData:E}=d,{offset:R=0,mainAxis:M=!0,crossAxis:P=!0}=c,O={x:g,y:v},H=getMainAxisFromPlacement(b),Q=getCrossAxis(H);let ee=O[H],V=O[Q];const W=typeof R=="function"?R({..._,placement:b}):R,Y=typeof W=="number"?{mainAxis:W,crossAxis:0}:{mainAxis:0,crossAxis:0,...W};if(M){const j=H==="y"?"height":"width",X=_.reference[H]-_.floating[j]+Y.mainAxis,oe=_.reference[H]+_.reference[j]-Y.mainAxis;ee<X?ee=X:ee>oe&&(ee=oe)}if(P){var U,G,te,B;const j=H==="y"?"width":"height",X=["top","left"].includes(getSide(b)),oe=_.reference[Q]-_.floating[j]+(X&&(U=(G=E.offset)==null?void 0:G[Q])!=null?U:0)+(X?0:Y.crossAxis),be=_.reference[Q]+_.reference[j]+(X?0:(te=(B=E.offset)==null?void 0:B[Q])!=null?te:0)-(X?Y.crossAxis:0);V<oe?V=oe:V>be&&(V=be)}return{[H]:ee,[Q]:V}}}};function isWindow(c){return c&&c.document&&c.location&&c.alert&&c.setInterval}function getWindow(c){if(c==null)return window;if(!isWindow(c)){const d=c.ownerDocument;return d&&d.defaultView||window}return c}function getComputedStyle$1(c){return getWindow(c).getComputedStyle(c)}function getNodeName(c){return isWindow(c)?"":c?(c.nodeName||"").toLowerCase():""}function getUAString(){const c=navigator.userAgentData;return c!=null&&c.brands?c.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function isHTMLElement(c){return c instanceof getWindow(c).HTMLElement}function isElement$1(c){return c instanceof getWindow(c).Element}function isNode(c){return c instanceof getWindow(c).Node}function isShadowRoot(c){if(typeof ShadowRoot>"u")return!1;const d=getWindow(c).ShadowRoot;return c instanceof d||c instanceof ShadowRoot}function isOverflowElement(c){const{overflow:d,overflowX:g,overflowY:v}=getComputedStyle$1(c);return/auto|scroll|overlay|hidden/.test(d+v+g)}function isTableElement(c){return["table","td","th"].includes(getNodeName(c))}function isContainingBlock(c){const d=/firefox/i.test(getUAString()),g=getComputedStyle$1(c);return g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].includes(g.willChange)||d&&g.willChange==="filter"||d&&(g.filter?g.filter!=="none":!1)}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}const min=Math.min,max=Math.max,round=Math.round;function getBoundingClientRect(c,d,g){var v,b,_,E;d===void 0&&(d=!1),g===void 0&&(g=!1);const R=c.getBoundingClientRect();let M=1,P=1;d&&isHTMLElement(c)&&(M=c.offsetWidth>0&&round(R.width)/c.offsetWidth||1,P=c.offsetHeight>0&&round(R.height)/c.offsetHeight||1);const O=isElement$1(c)?getWindow(c):window,H=!isLayoutViewport()&&g,Q=(R.left+(H&&(v=(b=O.visualViewport)==null?void 0:b.offsetLeft)!=null?v:0))/M,ee=(R.top+(H&&(_=(E=O.visualViewport)==null?void 0:E.offsetTop)!=null?_:0))/P,V=R.width/M,W=R.height/P;return{width:V,height:W,top:ee,right:Q+V,bottom:ee+W,left:Q,x:Q,y:ee}}function getDocumentElement(c){return((isNode(c)?c.ownerDocument:c.document)||window.document).documentElement}function getNodeScroll(c){return isElement$1(c)?{scrollLeft:c.scrollLeft,scrollTop:c.scrollTop}:{scrollLeft:c.pageXOffset,scrollTop:c.pageYOffset}}function getWindowScrollBarX(c){return getBoundingClientRect(getDocumentElement(c)).left+getNodeScroll(c).scrollLeft}function isScaled(c){const d=getBoundingClientRect(c);return round(d.width)!==c.offsetWidth||round(d.height)!==c.offsetHeight}function getRectRelativeToOffsetParent(c,d,g){const v=isHTMLElement(d),b=getDocumentElement(d),_=getBoundingClientRect(c,v&&isScaled(d),g==="fixed");let E={scrollLeft:0,scrollTop:0};const R={x:0,y:0};if(v||!v&&g!=="fixed")if((getNodeName(d)!=="body"||isOverflowElement(b))&&(E=getNodeScroll(d)),isHTMLElement(d)){const M=getBoundingClientRect(d,!0);R.x=M.x+d.clientLeft,R.y=M.y+d.clientTop}else b&&(R.x=getWindowScrollBarX(b));return{x:_.left+E.scrollLeft-R.x,y:_.top+E.scrollTop-R.y,width:_.width,height:_.height}}function getParentNode(c){return getNodeName(c)==="html"?c:c.assignedSlot||c.parentNode||(isShadowRoot(c)?c.host:null)||getDocumentElement(c)}function getTrueOffsetParent(c){return!isHTMLElement(c)||getComputedStyle(c).position==="fixed"?null:c.offsetParent}function getContainingBlock(c){let d=getParentNode(c);for(isShadowRoot(d)&&(d=d.host);isHTMLElement(d)&&!["html","body"].includes(getNodeName(d));){if(isContainingBlock(d))return d;d=d.parentNode}return null}function getOffsetParent(c){const d=getWindow(c);let g=getTrueOffsetParent(c);for(;g&&isTableElement(g)&&getComputedStyle(g).position==="static";)g=getTrueOffsetParent(g);return g&&(getNodeName(g)==="html"||getNodeName(g)==="body"&&getComputedStyle(g).position==="static"&&!isContainingBlock(g))?d:g||getContainingBlock(c)||d}function getDimensions(c){if(isHTMLElement(c))return{width:c.offsetWidth,height:c.offsetHeight};const d=getBoundingClientRect(c);return{width:d.width,height:d.height}}function convertOffsetParentRelativeRectToViewportRelativeRect(c){let{rect:d,offsetParent:g,strategy:v}=c;const b=isHTMLElement(g),_=getDocumentElement(g);if(g===_)return d;let E={scrollLeft:0,scrollTop:0};const R={x:0,y:0};if((b||!b&&v!=="fixed")&&((getNodeName(g)!=="body"||isOverflowElement(_))&&(E=getNodeScroll(g)),isHTMLElement(g))){const M=getBoundingClientRect(g,!0);R.x=M.x+g.clientLeft,R.y=M.y+g.clientTop}return{...d,x:d.x-E.scrollLeft+R.x,y:d.y-E.scrollTop+R.y}}function getViewportRect(c,d){const g=getWindow(c),v=getDocumentElement(c),b=g.visualViewport;let _=v.clientWidth,E=v.clientHeight,R=0,M=0;if(b){_=b.width,E=b.height;const P=isLayoutViewport();(P||!P&&d==="fixed")&&(R=b.offsetLeft,M=b.offsetTop)}return{width:_,height:E,x:R,y:M}}function getDocumentRect(c){var d;const g=getDocumentElement(c),v=getNodeScroll(c),b=(d=c.ownerDocument)==null?void 0:d.body,_=max(g.scrollWidth,g.clientWidth,b?b.scrollWidth:0,b?b.clientWidth:0),E=max(g.scrollHeight,g.clientHeight,b?b.scrollHeight:0,b?b.clientHeight:0);let R=-v.scrollLeft+getWindowScrollBarX(c);const M=-v.scrollTop;return getComputedStyle$1(b||g).direction==="rtl"&&(R+=max(g.clientWidth,b?b.clientWidth:0)-_),{width:_,height:E,x:R,y:M}}function getNearestOverflowAncestor(c){const d=getParentNode(c);return["html","body","#document"].includes(getNodeName(d))?c.ownerDocument.body:isHTMLElement(d)&&isOverflowElement(d)?d:getNearestOverflowAncestor(d)}function getOverflowAncestors(c,d){var g;d===void 0&&(d=[]);const v=getNearestOverflowAncestor(c),b=v===((g=c.ownerDocument)==null?void 0:g.body),_=getWindow(v),E=b?[_].concat(_.visualViewport||[],isOverflowElement(v)?v:[]):v,R=d.concat(E);return b?R:R.concat(getOverflowAncestors(E))}function contains(c,d){const g=d.getRootNode==null?void 0:d.getRootNode();if(c.contains(d))return!0;if(g&&isShadowRoot(g)){let v=d;do{if(v&&c===v)return!0;v=v.parentNode||v.host}while(v)}return!1}function getInnerBoundingClientRect(c,d){const g=getBoundingClientRect(c,!1,d==="fixed"),v=g.top+c.clientTop,b=g.left+c.clientLeft;return{top:v,left:b,x:b,y:v,right:b+c.clientWidth,bottom:v+c.clientHeight,width:c.clientWidth,height:c.clientHeight}}function getClientRectFromClippingAncestor(c,d,g){return d==="viewport"?rectToClientRect(getViewportRect(c,g)):isElement$1(d)?getInnerBoundingClientRect(d,g):rectToClientRect(getDocumentRect(getDocumentElement(c)))}function getClippingAncestors(c){const d=getOverflowAncestors(c),v=["absolute","fixed"].includes(getComputedStyle$1(c).position)&&isHTMLElement(c)?getOffsetParent(c):c;return isElement$1(v)?d.filter(b=>isElement$1(b)&&contains(b,v)&&getNodeName(b)!=="body"):[]}function getClippingRect(c){let{element:d,boundary:g,rootBoundary:v,strategy:b}=c;const E=[...g==="clippingAncestors"?getClippingAncestors(d):[].concat(g),v],R=E[0],M=E.reduce((P,O)=>{const H=getClientRectFromClippingAncestor(d,O,b);return P.top=max(H.top,P.top),P.right=min(H.right,P.right),P.bottom=min(H.bottom,P.bottom),P.left=max(H.left,P.left),P},getClientRectFromClippingAncestor(d,R,b));return{width:M.right-M.left,height:M.bottom-M.top,x:M.left,y:M.top}}const platform={getClippingRect,convertOffsetParentRelativeRectToViewportRelativeRect,isElement:isElement$1,getDimensions,getOffsetParent,getDocumentElement,getElementRects:c=>{let{reference:d,floating:g,strategy:v}=c;return{reference:getRectRelativeToOffsetParent(d,getOffsetParent(g),v),floating:{...getDimensions(g),x:0,y:0}}},getClientRects:c=>Array.from(c.getClientRects()),isRTL:c=>getComputedStyle$1(c).direction==="rtl"};function autoUpdate(c,d,g,v){v===void 0&&(v={});const{ancestorScroll:b=!0,ancestorResize:_=!0,elementResize:E=!0,animationFrame:R=!1}=v,M=b&&!R,P=_&&!R,O=M||P?[...isElement$1(c)?getOverflowAncestors(c):[],...getOverflowAncestors(d)]:[];O.forEach(W=>{M&&W.addEventListener("scroll",g,{passive:!0}),P&&W.addEventListener("resize",g)});let H=null;if(E){let W=!0;H=new ResizeObserver(()=>{W||g(),W=!1}),isElement$1(c)&&!R&&H.observe(c),H.observe(d)}let Q,ee=R?getBoundingClientRect(c):null;R&&V();function V(){const W=getBoundingClientRect(c);ee&&(W.x!==ee.x||W.y!==ee.y||W.width!==ee.width||W.height!==ee.height)&&g(),ee=W,Q=requestAnimationFrame(V)}return g(),()=>{var W;O.forEach(Y=>{M&&Y.removeEventListener("scroll",g),P&&Y.removeEventListener("resize",g)}),(W=H)==null||W.disconnect(),H=null,R&&cancelAnimationFrame(Q)}}const computePosition=(c,d,g)=>computePosition$1(c,d,{platform,...g});var index$1=typeof document<"u"?react.exports.useLayoutEffect:react.exports.useEffect;function deepEqual(c,d){if(c===d)return!0;if(typeof c!=typeof d)return!1;if(typeof c=="function"&&c.toString()===d.toString())return!0;let g,v,b;if(c&&d&&typeof c=="object"){if(Array.isArray(c)){if(g=c.length,g!=d.length)return!1;for(v=g;v--!==0;)if(!deepEqual(c[v],d[v]))return!1;return!0}if(b=Object.keys(c),g=b.length,g!==Object.keys(d).length)return!1;for(v=g;v--!==0;)if(!Object.prototype.hasOwnProperty.call(d,b[v]))return!1;for(v=g;v--!==0;){const _=b[v];if(!(_==="_owner"&&c.$$typeof)&&!deepEqual(c[_],d[_]))return!1}return!0}return c!==c&&d!==d}function useLatestRef(c){const d=react.exports.useRef(c);return index$1(()=>{d.current=c}),d}function useFloating(c){let{middleware:d,placement:g="bottom",strategy:v="absolute",whileElementsMounted:b}=c===void 0?{}:c;const _=react.exports.useRef(null),E=react.exports.useRef(null),R=useLatestRef(b),M=react.exports.useRef(null),[P,O]=react.exports.useState({x:null,y:null,strategy:v,placement:g,middlewareData:{}}),[H,Q]=react.exports.useState(d);deepEqual(H==null?void 0:H.map(te=>{let{options:B}=te;return B}),d==null?void 0:d.map(te=>{let{options:B}=te;return B}))||Q(d);const ee=react.exports.useCallback(()=>{!_.current||!E.current||computePosition(_.current,E.current,{middleware:H,placement:g,strategy:v}).then(te=>{V.current&&reactDom.exports.flushSync(()=>{O(te)})})},[H,g,v]);index$1(()=>{V.current&&ee()},[ee]);const V=react.exports.useRef(!1);index$1(()=>(V.current=!0,()=>{V.current=!1}),[]);const W=react.exports.useCallback(()=>{if(typeof M.current=="function"&&(M.current(),M.current=null),_.current&&E.current)if(R.current){const te=R.current(_.current,E.current,ee);M.current=te}else ee()},[ee,R]),Y=react.exports.useCallback(te=>{_.current=te,W()},[W]),U=react.exports.useCallback(te=>{E.current=te,W()},[W]),G=react.exports.useMemo(()=>({reference:_,floating:E}),[]);return react.exports.useMemo(()=>({...P,update:ee,refs:G,reference:Y,floating:U}),[P,ee,G,Y,U])}const arrow=c=>{const{element:d,padding:g}=c;function v(b){return Object.prototype.hasOwnProperty.call(b,"current")}return{name:"arrow",options:c,fn(b){return v(d)?d.current!=null?arrow$1({element:d.current,padding:g}).fn(b):{}:d?arrow$1({element:d,padding:g}).fn(b):{}}}},$7e8f5cd07187803e$export$21b07c8f274aebd5=react.exports.forwardRef((c,d)=>{const{children:g,width:v=10,height:b=5,..._}=c;return react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.svg,_extends({},_,{ref:d,width:v,height:b,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),c.asChild?g:react.exports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),$7e8f5cd07187803e$export$be92b6f5f03c0fe9=$7e8f5cd07187803e$export$21b07c8f274aebd5;function $db6c3485150b8e66$export$1ab7ae714698c4b8(c){const[d,g]=react.exports.useState(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(c){g({width:c.offsetWidth,height:c.offsetHeight});const v=new ResizeObserver(b=>{if(!Array.isArray(b)||!b.length)return;const _=b[0];let E,R;if("borderBoxSize"in _){const M=_.borderBoxSize,P=Array.isArray(M)?M[0]:M;E=P.inlineSize,R=P.blockSize}else E=c.offsetWidth,R=c.offsetHeight;g({width:E,height:R})});return v.observe(c,{box:"border-box"}),()=>v.unobserve(c)}else g(void 0)},[c]),d}const $cf1ac5d9fe0e8206$var$POPPER_NAME="Popper",[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cf1ac5d9fe0e8206$var$POPPER_NAME),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$POPPER_NAME),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=c=>{const{__scopePopper:d,children:g}=c,[v,b]=react.exports.useState(null);return react.exports.createElement($cf1ac5d9fe0e8206$var$PopperProvider,{scope:d,anchor:v,onAnchorChange:b},g)},$cf1ac5d9fe0e8206$var$ANCHOR_NAME="PopperAnchor",$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=react.exports.forwardRef((c,d)=>{const{__scopePopper:g,virtualRef:v,...b}=c,_=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$ANCHOR_NAME,g),E=react.exports.useRef(null),R=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,E);return react.exports.useEffect(()=>{_.onAnchorChange((v==null?void 0:v.current)||E.current)}),v?null:react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({},b,{ref:R}))}),$cf1ac5d9fe0e8206$var$CONTENT_NAME="PopperContent",[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME),[$cf1ac5d9fe0e8206$var$PositionContextProvider,$cf1ac5d9fe0e8206$var$usePositionContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,{hasParent:!1,positionUpdateFns:new Set}),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=react.exports.forwardRef((c,d)=>{var g,v,b,_,E,R,M,P;const{__scopePopper:O,side:H="bottom",sideOffset:Q=0,align:ee="center",alignOffset:V=0,arrowPadding:W=0,collisionBoundary:Y=[],collisionPadding:U=0,sticky:G="partial",hideWhenDetached:te=!1,avoidCollisions:B=!0,...j}=c,X=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,O),[oe,be]=react.exports.useState(null),ae=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,Ae=>be(Ae)),[ie,Se]=react.exports.useState(null),mt=$db6c3485150b8e66$export$1ab7ae714698c4b8(ie),it=(g=mt==null?void 0:mt.width)!==null&&g!==void 0?g:0,Tt=(v=mt==null?void 0:mt.height)!==null&&v!==void 0?v:0,ht=H+(ee!=="center"?"-"+ee:""),Ye=typeof U=="number"?U:{top:0,right:0,bottom:0,left:0,...U},St=Array.isArray(Y)?Y:[Y],$t=St.length>0,Lt={padding:Ye,boundary:St.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:$t},{reference:Mt,floating:jt,strategy:Qe,x:Pe,y:Ee,placement:nt,middlewareData:st,update:rt}=useFloating({strategy:"fixed",placement:ht,whileElementsMounted:autoUpdate,middleware:[offset({mainAxis:Q+Tt,alignmentAxis:V}),B?shift({mainAxis:!0,crossAxis:!1,limiter:G==="partial"?limitShift():void 0,...Lt}):void 0,ie?arrow({element:ie,padding:W}):void 0,B?flip({...Lt}):void 0,$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:it,arrowHeight:Tt}),te?hide({strategy:"referenceHidden"}):void 0].filter($cf1ac5d9fe0e8206$var$isDefined)});$9f79659886946c16$export$e5c5a5f917a5871c(()=>{Mt(X.anchor)},[Mt,X.anchor]);const tt=Pe!==null&&Ee!==null,[vt,It]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(nt),Vt=(b=st.arrow)===null||b===void 0?void 0:b.x,wt=(_=st.arrow)===null||_===void 0?void 0:_.y,kt=((E=st.arrow)===null||E===void 0?void 0:E.centerOffset)!==0,[Zt,Qt]=react.exports.useState();$9f79659886946c16$export$e5c5a5f917a5871c(()=>{oe&&Qt(window.getComputedStyle(oe).zIndex)},[oe]);const{hasParent:Z,positionUpdateFns:z}=$cf1ac5d9fe0e8206$var$usePositionContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,O),K=!Z;react.exports.useLayoutEffect(()=>{if(!K)return z.add(rt),()=>{z.delete(rt)}},[K,z,rt]),react.exports.useLayoutEffect(()=>{K&&tt&&Array.from(z).reverse().forEach(Ae=>requestAnimationFrame(Ae))},[K,tt,z]);const ne={"data-side":vt,"data-align":It,...j,ref:ae,style:{...j.style,animation:tt?void 0:"none",opacity:(R=st.hide)!==null&&R!==void 0&&R.referenceHidden?0:void 0}};return react.exports.createElement("div",{ref:jt,"data-radix-popper-content-wrapper":"",style:{position:Qe,left:0,top:0,transform:tt?`translate3d(${Math.round(Pe)}px, ${Math.round(Ee)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Zt,["--radix-popper-transform-origin"]:[(M=st.transformOrigin)===null||M===void 0?void 0:M.x,(P=st.transformOrigin)===null||P===void 0?void 0:P.y].join(" ")}},react.exports.createElement($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:O,placedSide:vt,onArrowChange:Se,arrowX:Vt,arrowY:wt,shouldHideArrow:kt},K?react.exports.createElement($cf1ac5d9fe0e8206$var$PositionContextProvider,{scope:O,hasParent:!0,positionUpdateFns:z},react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,ne)):react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,ne)))}),$cf1ac5d9fe0e8206$var$ARROW_NAME="PopperArrow",$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0=react.exports.forwardRef(function(d,g){const{__scopePopper:v,...b}=d,_=$cf1ac5d9fe0e8206$var$useContentContext($cf1ac5d9fe0e8206$var$ARROW_NAME,v),E=$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE[_.placedSide];return react.exports.createElement("span",{ref:_.onArrowChange,style:{position:"absolute",left:_.arrowX,top:_.arrowY,[E]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[_.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[_.placedSide],visibility:_.shouldHideArrow?"hidden":void 0}},react.exports.createElement($7e8f5cd07187803e$export$be92b6f5f03c0fe9,_extends({},b,{ref:g,style:{...b.style,display:"block"}})))});function $cf1ac5d9fe0e8206$var$isDefined(c){return c!==void 0}function $cf1ac5d9fe0e8206$var$isNotNull(c){return c!==null}const $cf1ac5d9fe0e8206$var$transformOrigin=c=>({name:"transformOrigin",options:c,fn(d){var g,v,b,_,E;const{placement:R,rects:M,middlewareData:P}=d,H=((g=P.arrow)===null||g===void 0?void 0:g.centerOffset)!==0,Q=H?0:c.arrowWidth,ee=H?0:c.arrowHeight,[V,W]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(R),Y={start:"0%",center:"50%",end:"100%"}[W],U=((v=(b=P.arrow)===null||b===void 0?void 0:b.x)!==null&&v!==void 0?v:0)+Q/2,G=((_=(E=P.arrow)===null||E===void 0?void 0:E.y)!==null&&_!==void 0?_:0)+ee/2;let te="",B="";return V==="bottom"?(te=H?Y:`${U}px`,B=`${-ee}px`):V==="top"?(te=H?Y:`${U}px`,B=`${M.floating.height+ee}px`):V==="right"?(te=`${-ee}px`,B=H?Y:`${G}px`):V==="left"&&(te=`${M.floating.width+ee}px`,B=H?Y:`${G}px`),{data:{x:te,y:B}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(c){const[d,g="center"]=c.split("-");return[d,g]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$cf1ac5d9fe0e8206$export$21b07c8f274aebd5=$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0,$f1701beae083dbae$export$602eac185826482c=react.exports.forwardRef((c,d)=>{var g;const{container:v=globalThis==null||(g=globalThis.document)===null||g===void 0?void 0:g.body,...b}=c;return v?ReactDOM.createPortal(react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({},b,{ref:d})),v):null});function $fe963b355347cc68$export$3e6543de14f8614f(c,d){return react.exports.useReducer((g,v)=>{const b=d[g][v];return b!=null?b:g},c)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=c=>{const{present:d,children:g}=c,v=$921a889cee6df7e8$var$usePresence(d),b=typeof g=="function"?g({present:v.isPresent}):react.exports.Children.only(g),_=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(v.ref,b.ref);return typeof g=="function"||v.isPresent?react.exports.cloneElement(b,{ref:_}):null};$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";function $921a889cee6df7e8$var$usePresence(c){const[d,g]=react.exports.useState(),v=react.exports.useRef({}),b=react.exports.useRef(c),_=react.exports.useRef("none"),E=c?"mounted":"unmounted",[R,M]=$fe963b355347cc68$export$3e6543de14f8614f(E,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return react.exports.useEffect(()=>{const P=$921a889cee6df7e8$var$getAnimationName(v.current);_.current=R==="mounted"?P:"none"},[R]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const P=v.current,O=b.current;if(O!==c){const Q=_.current,ee=$921a889cee6df7e8$var$getAnimationName(P);c?M("MOUNT"):ee==="none"||(P==null?void 0:P.display)==="none"?M("UNMOUNT"):M(O&&Q!==ee?"ANIMATION_OUT":"UNMOUNT"),b.current=c}},[c,M]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(d){const P=H=>{const ee=$921a889cee6df7e8$var$getAnimationName(v.current).includes(H.animationName);H.target===d&&ee&&reactDom.exports.flushSync(()=>M("ANIMATION_END"))},O=H=>{H.target===d&&(_.current=$921a889cee6df7e8$var$getAnimationName(v.current))};return d.addEventListener("animationstart",O),d.addEventListener("animationcancel",P),d.addEventListener("animationend",P),()=>{d.removeEventListener("animationstart",O),d.removeEventListener("animationcancel",P),d.removeEventListener("animationend",P)}}else M("ANIMATION_END")},[d,M]),{isPresent:["mounted","unmountSuspended"].includes(R),ref:react.exports.useCallback(P=>{P&&(v.current=getComputedStyle(P)),g(P)},[])}}function $921a889cee6df7e8$var$getAnimationName(c){return(c==null?void 0:c.animationName)||"none"}const $d7bdfb9eb0fdf311$var$ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",$d7bdfb9eb0fdf311$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d7bdfb9eb0fdf311$var$GROUP_NAME="RovingFocusGroup",[$d7bdfb9eb0fdf311$var$Collection,$d7bdfb9eb0fdf311$var$useCollection,$d7bdfb9eb0fdf311$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($d7bdfb9eb0fdf311$var$GROUP_NAME),[$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext,$d7bdfb9eb0fdf311$export$c7109489551a4f4]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d7bdfb9eb0fdf311$var$GROUP_NAME,[$d7bdfb9eb0fdf311$var$createCollectionScope]),[$d7bdfb9eb0fdf311$var$RovingFocusProvider,$d7bdfb9eb0fdf311$var$useRovingFocusContext]=$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext($d7bdfb9eb0fdf311$var$GROUP_NAME),$d7bdfb9eb0fdf311$export$8699f7c8af148338=react.exports.forwardRef((c,d)=>react.exports.createElement($d7bdfb9eb0fdf311$var$Collection.Provider,{scope:c.__scopeRovingFocusGroup},react.exports.createElement($d7bdfb9eb0fdf311$var$Collection.Slot,{scope:c.__scopeRovingFocusGroup},react.exports.createElement($d7bdfb9eb0fdf311$var$RovingFocusGroupImpl,_extends({},c,{ref:d}))))),$d7bdfb9eb0fdf311$var$RovingFocusGroupImpl=react.exports.forwardRef((c,d)=>{const{__scopeRovingFocusGroup:g,orientation:v,loop:b=!1,dir:_,currentTabStopId:E,defaultCurrentTabStopId:R,onCurrentTabStopIdChange:M,onEntryFocus:P,...O}=c,H=react.exports.useRef(null),Q=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,H),ee=$f631663db3294ace$export$b39126d51d94e6f3(_),[V=null,W]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:E,defaultProp:R,onChange:M}),[Y,U]=react.exports.useState(!1),G=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(P),te=$d7bdfb9eb0fdf311$var$useCollection(g),B=react.exports.useRef(!1);return react.exports.useEffect(()=>{const j=H.current;if(j)return j.addEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,G),()=>j.removeEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,G)},[G]),react.exports.createElement($d7bdfb9eb0fdf311$var$RovingFocusProvider,{scope:g,orientation:v,dir:ee,loop:b,currentTabStopId:V,onItemFocus:react.exports.useCallback(j=>W(j),[W]),onItemShiftTab:react.exports.useCallback(()=>U(!0),[])},react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({tabIndex:Y?-1:0,"data-orientation":v},O,{ref:Q,style:{outline:"none",...c.style},onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onMouseDown,()=>{B.current=!0}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onFocus,j=>{const X=!B.current;if(j.target===j.currentTarget&&X&&!Y){const oe=new CustomEvent($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,$d7bdfb9eb0fdf311$var$EVENT_OPTIONS);if(j.currentTarget.dispatchEvent(oe),!oe.defaultPrevented){const be=te().filter(it=>it.focusable),ae=be.find(it=>it.active),ie=be.find(it=>it.id===V),mt=[ae,ie,...be].filter(Boolean).map(it=>it.ref.current);$d7bdfb9eb0fdf311$var$focusFirst(mt)}}B.current=!1}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onBlur,()=>U(!1))})))}),$d7bdfb9eb0fdf311$var$ITEM_NAME="RovingFocusGroupItem",$d7bdfb9eb0fdf311$export$ab9df7c53fe8454=react.exports.forwardRef((c,d)=>{const{__scopeRovingFocusGroup:g,focusable:v=!0,active:b=!1,..._}=c,E=$1746a345f3d73bb7$export$f680877a34711e37(),R=$d7bdfb9eb0fdf311$var$useRovingFocusContext($d7bdfb9eb0fdf311$var$ITEM_NAME,g),M=R.currentTabStopId===E,P=$d7bdfb9eb0fdf311$var$useCollection(g);return react.exports.createElement($d7bdfb9eb0fdf311$var$Collection.ItemSlot,{scope:g,id:E,focusable:v,active:b},react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends({tabIndex:M?0:-1,"data-orientation":R.orientation},_,{ref:d,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onMouseDown,O=>{v?R.onItemFocus(E):O.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onFocus,()=>R.onItemFocus(E)),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onKeyDown,O=>{if(O.key==="Tab"&&O.shiftKey){R.onItemShiftTab();return}if(O.target!==O.currentTarget)return;const H=$d7bdfb9eb0fdf311$var$getFocusIntent(O,R.orientation,R.dir);if(H!==void 0){O.preventDefault();let ee=P().filter(V=>V.focusable).map(V=>V.ref.current);if(H==="last")ee.reverse();else if(H==="prev"||H==="next"){H==="prev"&&ee.reverse();const V=ee.indexOf(O.currentTarget);ee=R.loop?$d7bdfb9eb0fdf311$var$wrapArray(ee,V+1):ee.slice(V+1)}setTimeout(()=>$d7bdfb9eb0fdf311$var$focusFirst(ee))}})})))}),$d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $d7bdfb9eb0fdf311$var$getDirectionAwareKey(c,d){return d!=="rtl"?c:c==="ArrowLeft"?"ArrowRight":c==="ArrowRight"?"ArrowLeft":c}function $d7bdfb9eb0fdf311$var$getFocusIntent(c,d,g){const v=$d7bdfb9eb0fdf311$var$getDirectionAwareKey(c.key,g);if(!(d==="vertical"&&["ArrowLeft","ArrowRight"].includes(v))&&!(d==="horizontal"&&["ArrowUp","ArrowDown"].includes(v)))return $d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT[v]}function $d7bdfb9eb0fdf311$var$focusFirst(c){const d=document.activeElement;for(const g of c)if(g===d||(g.focus(),document.activeElement!==d))return}function $d7bdfb9eb0fdf311$var$wrapArray(c,d){return c.map((g,v)=>c[(d+v)%c.length])}const $d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9=$d7bdfb9eb0fdf311$export$8699f7c8af148338,$d7bdfb9eb0fdf311$export$6d08773d2e66f8f2=$d7bdfb9eb0fdf311$export$ab9df7c53fe8454;var getDefaultParent=function(c){if(typeof document>"u")return null;var d=Array.isArray(c)?c[0]:c;return d.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,applyAttributeToOthers=function(c,d,g,v){var b=Array.isArray(c)?c:[c];markerMap[g]||(markerMap[g]=new WeakMap);var _=markerMap[g],E=[],R=new Set,M=new Set(b),P=function(H){!H||R.has(H)||(R.add(H),P(H.parentNode))};b.forEach(P);var O=function(H){!H||M.has(H)||Array.prototype.forEach.call(H.children,function(Q){if(R.has(Q))O(Q);else{var ee=Q.getAttribute(v),V=ee!==null&&ee!=="false",W=(counterMap.get(Q)||0)+1,Y=(_.get(Q)||0)+1;counterMap.set(Q,W),_.set(Q,Y),E.push(Q),W===1&&V&&uncontrolledNodes.set(Q,!0),Y===1&&Q.setAttribute(g,"true"),V||Q.setAttribute(v,"true")}})};return O(d),R.clear(),lockCount++,function(){E.forEach(function(H){var Q=counterMap.get(H)-1,ee=_.get(H)-1;counterMap.set(H,Q),_.set(H,ee),Q||(uncontrolledNodes.has(H)||H.removeAttribute(v),uncontrolledNodes.delete(H)),ee||H.removeAttribute(g)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(c,d,g){g===void 0&&(g="data-aria-hidden");var v=Array.from(Array.isArray(c)?c:[c]),b=d||getDefaultParent(c);return b?(v.push.apply(v,Array.from(b.querySelectorAll("[aria-live]"))),applyAttributeToOthers(v,b,g,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(d){for(var g,v=1,b=arguments.length;v<b;v++){g=arguments[v];for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(d[_]=g[_])}return d},__assign.apply(this,arguments)};function __rest(c,d){var g={};for(var v in c)Object.prototype.hasOwnProperty.call(c,v)&&d.indexOf(v)<0&&(g[v]=c[v]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,v=Object.getOwnPropertySymbols(c);b<v.length;b++)d.indexOf(v[b])<0&&Object.prototype.propertyIsEnumerable.call(c,v[b])&&(g[v[b]]=c[v[b]]);return g}function __spreadArray(c,d,g){if(g||arguments.length===2)for(var v=0,b=d.length,_;v<b;v++)(_||!(v in d))&&(_||(_=Array.prototype.slice.call(d,0,v)),_[v]=d[v]);return c.concat(_||Array.prototype.slice.call(d))}var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(c,d){return typeof c=="function"?c(d):c&&(c.current=d),c}function useCallbackRef(c,d){var g=react.exports.useState(function(){return{value:c,callback:d,facade:{get current(){return g.value},set current(v){var b=g.value;b!==v&&(g.value=v,g.callback(v,b))}}}})[0];return g.callback=d,g.facade}function useMergeRefs(c,d){return useCallbackRef(d||null,function(g){return c.forEach(function(v){return assignRef(v,g)})})}function ItoI(c){return c}function innerCreateMedium(c,d){d===void 0&&(d=ItoI);var g=[],v=!1,b={read:function(){if(v)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return g.length?g[g.length-1]:c},useMedium:function(_){var E=d(_,v);return g.push(E),function(){g=g.filter(function(R){return R!==E})}},assignSyncMedium:function(_){for(v=!0;g.length;){var E=g;g=[],E.forEach(_)}g={push:function(R){return _(R)},filter:function(){return g}}},assignMedium:function(_){v=!0;var E=[];if(g.length){var R=g;g=[],R.forEach(_),E=g}var M=function(){var O=E;E=[],O.forEach(_)},P=function(){return Promise.resolve().then(M)};P(),g={push:function(O){E.push(O),P()},filter:function(O){return E=E.filter(O),g}}}};return b}function createSidecarMedium(c){c===void 0&&(c={});var d=innerCreateMedium(null);return d.options=__assign({async:!0,ssr:!1},c),d}var SideCar$1=function(c){var d=c.sideCar,g=__rest(c,["sideCar"]);if(!d)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var v=d.read();if(!v)throw new Error("Sidecar medium not found");return react.exports.createElement(v,__assign({},g))};SideCar$1.isSideCarExport=!0;function exportSidecar(c,d){return c.useMedium(d),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=react.exports.forwardRef(function(c,d){var g=react.exports.useRef(null),v=react.exports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),b=v[0],_=v[1],E=c.forwardProps,R=c.children,M=c.className,P=c.removeScrollBar,O=c.enabled,H=c.shards,Q=c.sideCar,ee=c.noIsolation,V=c.inert,W=c.allowPinchZoom,Y=c.as,U=Y===void 0?"div":Y,G=__rest(c,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),te=Q,B=useMergeRefs([g,d]),j=__assign(__assign({},G),b);return react.exports.createElement(react.exports.Fragment,null,O&&react.exports.createElement(te,{sideCar:effectCar,removeScrollBar:P,shards:H,noIsolation:ee,inert:V,setCallbacks:_,allowPinchZoom:!!W,lockRef:g}),E?react.exports.cloneElement(react.exports.Children.only(R),__assign(__assign({},j),{ref:B})):react.exports.createElement(U,__assign({},j,{className:M,ref:B}),R))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var c=document.createElement("style");c.type="text/css";var d=getNonce();return d&&c.setAttribute("nonce",d),c}function injectStyles(c,d){c.styleSheet?c.styleSheet.cssText=d:c.appendChild(document.createTextNode(d))}function insertStyleTag(c){var d=document.head||document.getElementsByTagName("head")[0];d.appendChild(c)}var stylesheetSingleton=function(){var c=0,d=null;return{add:function(g){c==0&&(d=makeStyleTag())&&(injectStyles(d,g),insertStyleTag(d)),c++},remove:function(){c--,!c&&d&&(d.parentNode&&d.parentNode.removeChild(d),d=null)}}},styleHookSingleton=function(){var c=stylesheetSingleton();return function(d,g){react.exports.useEffect(function(){return c.add(d),function(){c.remove()}},[d&&g])}},styleSingleton=function(){var c=styleHookSingleton(),d=function(g){var v=g.styles,b=g.dynamic;return c(v,b),null};return d},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(c){return parseInt(c||"",10)||0},getOffset=function(c){var d=window.getComputedStyle(document.body),g=d[c==="padding"?"paddingLeft":"marginLeft"],v=d[c==="padding"?"paddingTop":"marginTop"],b=d[c==="padding"?"paddingRight":"marginRight"];return[parse$1(g),parse$1(v),parse$1(b)]},getGapWidth=function(c){if(c===void 0&&(c="margin"),typeof window>"u")return zeroGap;var d=getOffset(c),g=document.documentElement.clientWidth,v=window.innerWidth;return{left:d[0],top:d[1],right:d[2],gap:Math.max(0,v-g+d[2]-d[0])}},Style=styleSingleton(),getStyles=function(c,d,g,v){var b=c.left,_=c.top,E=c.right,R=c.gap;return g===void 0&&(g="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(v,`;
   padding-right: `).concat(R,"px ").concat(v,`;
  }
  body {
    overflow: hidden `).concat(v,`;
    overscroll-behavior: contain;
    `).concat([d&&"position: relative ".concat(v,";"),g==="margin"&&`
    padding-left: `.concat(b,`px;
    padding-top: `).concat(_,`px;
    padding-right: `).concat(E,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(R,"px ").concat(v,`;
    `),g==="padding"&&"padding-right: ".concat(R,"px ").concat(v,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(R,"px ").concat(v,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(R,"px ").concat(v,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(v,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(v,`;
  }
  
  body {
    `).concat(removedBarSizeVariable,": ").concat(R,`px;
  }
`)},RemoveScrollBar=function(c){var d=c.noRelative,g=c.noImportant,v=c.gapMode,b=v===void 0?"margin":v,_=react.exports.useMemo(function(){return getGapWidth(b)},[b]);return react.exports.createElement(Style,{styles:getStyles(_,!d,b,g?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,elementCouldBeVScrolled=function(c){var d=window.getComputedStyle(c);return d.overflowY!=="hidden"&&!(d.overflowY===d.overflowX&&d.overflowY==="visible")},elementCouldBeHScrolled=function(c){var d=window.getComputedStyle(c);return d.overflowX!=="hidden"&&!(d.overflowY===d.overflowX&&d.overflowX==="visible")},locationCouldBeScrolled=function(c,d){var g=d;do{typeof ShadowRoot<"u"&&g instanceof ShadowRoot&&(g=g.host);var v=elementCouldBeScrolled(c,g);if(v){var b=getScrollVariables(c,g),_=b[1],E=b[2];if(_>E)return!0}g=g.parentNode}while(g&&g!==document.body);return!1},getVScrollVariables=function(c){var d=c.scrollTop,g=c.scrollHeight,v=c.clientHeight;return[d,g,v]},getHScrollVariables=function(c){var d=c.scrollLeft,g=c.scrollWidth,v=c.clientWidth;return[d,g,v]},elementCouldBeScrolled=function(c,d){return c==="v"?elementCouldBeVScrolled(d):elementCouldBeHScrolled(d)},getScrollVariables=function(c,d){return c==="v"?getVScrollVariables(d):getHScrollVariables(d)},getDirectionFactor=function(c,d){return c==="h"&&d==="rtl"?-1:1},handleScroll=function(c,d,g,v,b){var _=getDirectionFactor(c,window.getComputedStyle(d).direction),E=_*v,R=g.target,M=d.contains(R),P=!1,O=E>0,H=0,Q=0;do{var ee=getScrollVariables(c,R),V=ee[0],W=ee[1],Y=ee[2],U=W-Y-_*V;(V||U)&&elementCouldBeScrolled(c,R)&&(H+=U,Q+=V),R=R.parentNode}while(!M&&R!==document.body||M&&(d.contains(R)||d===R));return(O&&(b&&H===0||!b&&E>H)||!O&&(b&&Q===0||!b&&-E>Q))&&(P=!0),P},getTouchXY=function(c){return"changedTouches"in c?[c.changedTouches[0].clientX,c.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(c){return[c.deltaX,c.deltaY]},extractRef=function(c){return c&&"current"in c?c.current:c},deltaCompare=function(c,d){return c[0]===d[0]&&c[1]===d[1]},generateStyle=function(c){return`
  .block-interactivity-`.concat(c,` {pointer-events: none;}
  .allow-interactivity-`).concat(c,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(c){var d=react.exports.useRef([]),g=react.exports.useRef([0,0]),v=react.exports.useRef(),b=react.exports.useState(idCounter++)[0],_=react.exports.useState(function(){return styleSingleton()})[0],E=react.exports.useRef(c);react.exports.useEffect(function(){E.current=c},[c]),react.exports.useEffect(function(){if(c.inert){document.body.classList.add("block-interactivity-".concat(b));var W=__spreadArray([c.lockRef.current],(c.shards||[]).map(extractRef),!0).filter(Boolean);return W.forEach(function(Y){return Y.classList.add("allow-interactivity-".concat(b))}),function(){document.body.classList.remove("block-interactivity-".concat(b)),W.forEach(function(Y){return Y.classList.remove("allow-interactivity-".concat(b))})}}},[c.inert,c.lockRef.current,c.shards]);var R=react.exports.useCallback(function(W,Y){if("touches"in W&&W.touches.length===2)return!E.current.allowPinchZoom;var U=getTouchXY(W),G=g.current,te="deltaX"in W?W.deltaX:G[0]-U[0],B="deltaY"in W?W.deltaY:G[1]-U[1],j,X=W.target,oe=Math.abs(te)>Math.abs(B)?"h":"v";if("touches"in W&&oe==="h"&&X.type==="range")return!1;var be=locationCouldBeScrolled(oe,X);if(!be)return!0;if(be?j=oe:(j=oe==="v"?"h":"v",be=locationCouldBeScrolled(oe,X)),!be)return!1;if(!v.current&&"changedTouches"in W&&(te||B)&&(v.current=j),!j)return!0;var ae=v.current||j;return handleScroll(ae,Y,W,ae==="h"?te:B,!0)},[]),M=react.exports.useCallback(function(W){var Y=W;if(!(!lockStack.length||lockStack[lockStack.length-1]!==_)){var U="deltaY"in Y?getDeltaXY(Y):getTouchXY(Y),G=d.current.filter(function(j){return j.name===Y.type&&j.target===Y.target&&deltaCompare(j.delta,U)})[0];if(G&&G.should){Y.preventDefault();return}if(!G){var te=(E.current.shards||[]).map(extractRef).filter(Boolean).filter(function(j){return j.contains(Y.target)}),B=te.length>0?R(Y,te[0]):!E.current.noIsolation;B&&Y.preventDefault()}}},[]),P=react.exports.useCallback(function(W,Y,U,G){var te={name:W,delta:Y,target:U,should:G};d.current.push(te),setTimeout(function(){d.current=d.current.filter(function(B){return B!==te})},1)},[]),O=react.exports.useCallback(function(W){g.current=getTouchXY(W),v.current=void 0},[]),H=react.exports.useCallback(function(W){P(W.type,getDeltaXY(W),W.target,R(W,c.lockRef.current))},[]),Q=react.exports.useCallback(function(W){P(W.type,getTouchXY(W),W.target,R(W,c.lockRef.current))},[]);react.exports.useEffect(function(){return lockStack.push(_),c.setCallbacks({onScrollCapture:H,onWheelCapture:H,onTouchMoveCapture:Q}),document.addEventListener("wheel",M,nonPassive),document.addEventListener("touchmove",M,nonPassive),document.addEventListener("touchstart",O,nonPassive),function(){lockStack=lockStack.filter(function(W){return W!==_}),document.removeEventListener("wheel",M,nonPassive),document.removeEventListener("touchmove",M,nonPassive),document.removeEventListener("touchstart",O,nonPassive)}},[]);var ee=c.removeScrollBar,V=c.inert;return react.exports.createElement(react.exports.Fragment,null,V?react.exports.createElement(_,{styles:generateStyle(b)}):null,ee?react.exports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=react.exports.forwardRef(function(c,d){return react.exports.createElement(RemoveScroll,__assign({},c,{ref:d,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;const $epM9y$RemoveScroll=ReactRemoveScroll,$6cc32821e9371a1c$var$SELECTION_KEYS=["Enter"," "],$6cc32821e9371a1c$var$FIRST_KEYS=["ArrowDown","PageUp","Home"],$6cc32821e9371a1c$var$LAST_KEYS=["ArrowUp","PageDown","End"],$6cc32821e9371a1c$var$FIRST_LAST_KEYS=[...$6cc32821e9371a1c$var$FIRST_KEYS,...$6cc32821e9371a1c$var$LAST_KEYS],$6cc32821e9371a1c$var$MENU_NAME="Menu",[$6cc32821e9371a1c$var$Collection,$6cc32821e9371a1c$var$useCollection,$6cc32821e9371a1c$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($6cc32821e9371a1c$var$MENU_NAME),[$6cc32821e9371a1c$var$createMenuContext,$6cc32821e9371a1c$export$4027731b685e72eb]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($6cc32821e9371a1c$var$MENU_NAME,[$6cc32821e9371a1c$var$createCollectionScope,$cf1ac5d9fe0e8206$export$722aac194ae923,$d7bdfb9eb0fdf311$export$c7109489551a4f4]),$6cc32821e9371a1c$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),$6cc32821e9371a1c$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),[$6cc32821e9371a1c$var$MenuProvider,$6cc32821e9371a1c$var$useMenuContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$MENU_NAME),[$6cc32821e9371a1c$var$MenuRootProvider,$6cc32821e9371a1c$var$useMenuRootContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$MENU_NAME),$6cc32821e9371a1c$export$d9b273488cd8ce6f=c=>{const{__scopeMenu:d,open:g=!1,children:v,dir:b,onOpenChange:_,modal:E=!0}=c,R=$6cc32821e9371a1c$var$usePopperScope(d),[M,P]=react.exports.useState(null),O=react.exports.useRef(!1),H=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_),Q=$f631663db3294ace$export$b39126d51d94e6f3(b);return react.exports.useEffect(()=>{const ee=()=>{O.current=!0,document.addEventListener("pointerdown",V,{capture:!0,once:!0}),document.addEventListener("pointermove",V,{capture:!0,once:!0})},V=()=>O.current=!1;return document.addEventListener("keydown",ee,{capture:!0}),()=>{document.removeEventListener("keydown",ee,{capture:!0}),document.removeEventListener("pointerdown",V,{capture:!0}),document.removeEventListener("pointermove",V,{capture:!0})}},[]),react.exports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,R,react.exports.createElement($6cc32821e9371a1c$var$MenuProvider,{scope:d,open:g,onOpenChange:H,content:M,onContentChange:P},react.exports.createElement($6cc32821e9371a1c$var$MenuRootProvider,{scope:d,onClose:react.exports.useCallback(()=>H(!1),[H]),isUsingKeyboardRef:O,dir:Q,modal:E},v)))},$6cc32821e9371a1c$export$9fa5ebd18bee4d43=react.exports.forwardRef((c,d)=>{const{__scopeMenu:g,...v}=c,b=$6cc32821e9371a1c$var$usePopperScope(g);return react.exports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends({},b,v,{ref:d}))}),$6cc32821e9371a1c$var$PORTAL_NAME="MenuPortal",[$6cc32821e9371a1c$var$PortalProvider,$6cc32821e9371a1c$var$usePortalContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$PORTAL_NAME,{forceMount:void 0}),$6cc32821e9371a1c$export$793392f970497feb=c=>{const{__scopeMenu:d,forceMount:g,children:v,container:b}=c,_=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$PORTAL_NAME,d);return react.exports.createElement($6cc32821e9371a1c$var$PortalProvider,{scope:d,forceMount:g},react.exports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:g||_.open},react.exports.createElement($f1701beae083dbae$export$602eac185826482c,{asChild:!0,container:b},v)))},$6cc32821e9371a1c$var$CONTENT_NAME="MenuContent",[$6cc32821e9371a1c$var$MenuContentProvider,$6cc32821e9371a1c$var$useMenuContentContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$CONTENT_NAME),$6cc32821e9371a1c$export$479f0f2f71193efe=react.exports.forwardRef((c,d)=>{const g=$6cc32821e9371a1c$var$usePortalContext($6cc32821e9371a1c$var$CONTENT_NAME,c.__scopeMenu),{forceMount:v=g.forceMount,...b}=c,_=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,c.__scopeMenu),E=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$CONTENT_NAME,c.__scopeMenu);return react.exports.createElement($6cc32821e9371a1c$var$Collection.Provider,{scope:c.__scopeMenu},react.exports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:v||_.open},react.exports.createElement($6cc32821e9371a1c$var$Collection.Slot,{scope:c.__scopeMenu},E.modal?react.exports.createElement($6cc32821e9371a1c$var$MenuRootContentModal,_extends({},b,{ref:d})):react.exports.createElement($6cc32821e9371a1c$var$MenuRootContentNonModal,_extends({},b,{ref:d})))))}),$6cc32821e9371a1c$var$MenuRootContentModal=react.exports.forwardRef((c,d)=>{const g=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,c.__scopeMenu),v=react.exports.useRef(null),b=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,v);return react.exports.useEffect(()=>{const _=v.current;if(_)return hideOthers(_)},[]),react.exports.createElement($6cc32821e9371a1c$var$MenuContentImpl,_extends({},c,{ref:b,trapFocus:g.open,disableOutsidePointerEvents:g.open,disableOutsideScroll:!0,onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onFocusOutside,_=>_.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>g.onOpenChange(!1)}))}),$6cc32821e9371a1c$var$MenuRootContentNonModal=react.exports.forwardRef((c,d)=>{const g=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,c.__scopeMenu);return react.exports.createElement($6cc32821e9371a1c$var$MenuContentImpl,_extends({},c,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>g.onOpenChange(!1)}))}),$6cc32821e9371a1c$var$MenuContentImpl=react.exports.forwardRef((c,d)=>{const{__scopeMenu:g,loop:v=!1,trapFocus:b,onOpenAutoFocus:_,onCloseAutoFocus:E,disableOutsidePointerEvents:R,onEscapeKeyDown:M,onPointerDownOutside:P,onFocusOutside:O,onInteractOutside:H,onDismiss:Q,disableOutsideScroll:ee,...V}=c,W=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,g),Y=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$CONTENT_NAME,g),U=$6cc32821e9371a1c$var$usePopperScope(g),G=$6cc32821e9371a1c$var$useRovingFocusGroupScope(g),te=$6cc32821e9371a1c$var$useCollection(g),[B,j]=react.exports.useState(null),X=react.exports.useRef(null),oe=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,X,W.onContentChange),be=react.exports.useRef(0),ae=react.exports.useRef(""),ie=react.exports.useRef(0),Se=react.exports.useRef(null),mt=react.exports.useRef("right"),it=react.exports.useRef(0),Tt=ee?$epM9y$RemoveScroll:react.exports.Fragment,ht=ee?{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0}:void 0,Ye=$t=>{var Lt,Mt;const jt=ae.current+$t,Qe=te().filter(tt=>!tt.disabled),Pe=document.activeElement,Ee=(Lt=Qe.find(tt=>tt.ref.current===Pe))===null||Lt===void 0?void 0:Lt.textValue,nt=Qe.map(tt=>tt.textValue),st=$6cc32821e9371a1c$var$getNextMatch(nt,jt,Ee),rt=(Mt=Qe.find(tt=>tt.textValue===st))===null||Mt===void 0?void 0:Mt.ref.current;(function tt(vt){ae.current=vt,window.clearTimeout(be.current),vt!==""&&(be.current=window.setTimeout(()=>tt(""),1e3))})(jt),rt&&setTimeout(()=>rt.focus())};react.exports.useEffect(()=>()=>window.clearTimeout(be.current),[]),$3db38b7d1fb3fe6a$export$b7ece24a22aeda8c();const St=react.exports.useCallback($t=>{var Lt,Mt;return mt.current===((Lt=Se.current)===null||Lt===void 0?void 0:Lt.side)&&$6cc32821e9371a1c$var$isPointerInGraceArea($t,(Mt=Se.current)===null||Mt===void 0?void 0:Mt.area)},[]);return react.exports.createElement($6cc32821e9371a1c$var$MenuContentProvider,{scope:g,searchRef:ae,onItemEnter:react.exports.useCallback($t=>{St($t)&&$t.preventDefault()},[St]),onItemLeave:react.exports.useCallback($t=>{var Lt;St($t)||((Lt=X.current)===null||Lt===void 0||Lt.focus(),j(null))},[St]),onTriggerLeave:react.exports.useCallback($t=>{St($t)&&$t.preventDefault()},[St]),pointerGraceTimerRef:ie,onPointerGraceIntentChange:react.exports.useCallback($t=>{Se.current=$t},[])},react.exports.createElement(Tt,ht,react.exports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,trapped:b,onMountAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_,$t=>{var Lt;$t.preventDefault(),(Lt=X.current)===null||Lt===void 0||Lt.focus()}),onUnmountAutoFocus:E},react.exports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:R,onEscapeKeyDown:M,onPointerDownOutside:P,onFocusOutside:O,onInteractOutside:H,onDismiss:Q},react.exports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends({asChild:!0},G,{dir:Y.dir,orientation:"vertical",loop:v,currentTabStopId:B,onCurrentTabStopIdChange:j,onEntryFocus:$t=>{Y.isUsingKeyboardRef.current||$t.preventDefault()}}),react.exports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends({role:"menu","aria-orientation":"vertical","data-state":$6cc32821e9371a1c$var$getOpenState(W.open),dir:Y.dir},U,V,{ref:oe,style:{outline:"none",...V.style},onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(V.onKeyDown,$t=>{const Mt=$t.target.closest('[role="menu"]')===$t.currentTarget,jt=$t.ctrlKey||$t.altKey||$t.metaKey,Qe=$t.key.length===1;Mt&&($t.key==="Tab"&&$t.preventDefault(),!jt&&Qe&&Ye($t.key));const Pe=X.current;if($t.target!==Pe||!$6cc32821e9371a1c$var$FIRST_LAST_KEYS.includes($t.key))return;$t.preventDefault();const nt=te().filter(st=>!st.disabled).map(st=>st.ref.current);$6cc32821e9371a1c$var$LAST_KEYS.includes($t.key)&&nt.reverse(),$6cc32821e9371a1c$var$focusFirst(nt)}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onBlur,$t=>{$t.currentTarget.contains($t.target)||(window.clearTimeout(be.current),ae.current="")}),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onPointerMove,$6cc32821e9371a1c$var$whenMouse($t=>{const Lt=$t.target,Mt=it.current!==$t.clientX;if($t.currentTarget.contains(Lt)&&Mt){const jt=$t.clientX>it.current?"right":"left";mt.current=jt,it.current=$t.clientX}}))})))))))}),$6cc32821e9371a1c$var$ITEM_NAME="MenuItem",$6cc32821e9371a1c$var$ITEM_SELECT="menu.itemSelect",$6cc32821e9371a1c$export$2ce376c2cc3355c8=react.exports.forwardRef((c,d)=>{const{disabled:g=!1,onSelect:v,...b}=c,_=react.exports.useRef(null),E=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$ITEM_NAME,c.__scopeMenu),R=$6cc32821e9371a1c$var$useMenuContentContext($6cc32821e9371a1c$var$ITEM_NAME,c.__scopeMenu),M=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,_),P=react.exports.useRef(!1),O=()=>{const H=_.current;if(!g&&H){const Q=new CustomEvent($6cc32821e9371a1c$var$ITEM_SELECT,{bubbles:!0,cancelable:!0});H.addEventListener($6cc32821e9371a1c$var$ITEM_SELECT,ee=>v==null?void 0:v(ee),{once:!0}),$8927f6f2acc4f386$export$6d1a0317bde7de7f(H,Q),Q.defaultPrevented?P.current=!1:E.onClose()}};return react.exports.createElement($6cc32821e9371a1c$var$MenuItemImpl,_extends({},b,{ref:M,disabled:g,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onClick,O),onPointerDown:H=>{var Q;(Q=c.onPointerDown)===null||Q===void 0||Q.call(c,H),P.current=!0},onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onPointerUp,H=>{var Q;P.current||(Q=H.currentTarget)===null||Q===void 0||Q.click()}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onKeyDown,H=>{const Q=R.searchRef.current!=="";g||Q&&H.key===" "||$6cc32821e9371a1c$var$SELECTION_KEYS.includes(H.key)&&(H.currentTarget.click(),H.preventDefault())})}))}),$6cc32821e9371a1c$var$MenuItemImpl=react.exports.forwardRef((c,d)=>{const{__scopeMenu:g,disabled:v=!1,textValue:b,..._}=c,E=$6cc32821e9371a1c$var$useMenuContentContext($6cc32821e9371a1c$var$ITEM_NAME,g),R=$6cc32821e9371a1c$var$useRovingFocusGroupScope(g),M=react.exports.useRef(null),P=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d,M),[O,H]=react.exports.useState(!1),[Q,ee]=react.exports.useState("");return react.exports.useEffect(()=>{const V=M.current;if(V){var W;ee(((W=V.textContent)!==null&&W!==void 0?W:"").trim())}},[_.children]),react.exports.createElement($6cc32821e9371a1c$var$Collection.ItemSlot,{scope:g,disabled:v,textValue:b!=null?b:Q},react.exports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends({asChild:!0},R,{focusable:!v}),react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({role:"menuitem","data-highlighted":O?"":void 0,"aria-disabled":v||void 0,"data-disabled":v?"":void 0},_,{ref:P,onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onPointerMove,$6cc32821e9371a1c$var$whenMouse(V=>{v?E.onItemLeave(V):(E.onItemEnter(V),V.defaultPrevented||V.currentTarget.focus())})),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onPointerLeave,$6cc32821e9371a1c$var$whenMouse(V=>E.onItemLeave(V))),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onFocus,()=>H(!0)),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onBlur,()=>H(!1))}))))}),$6cc32821e9371a1c$var$RADIO_GROUP_NAME="MenuRadioGroup";$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$RADIO_GROUP_NAME,{value:void 0,onValueChange:()=>{}});const $6cc32821e9371a1c$var$ITEM_INDICATOR_NAME="MenuItemIndicator";$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$ITEM_INDICATOR_NAME,{checked:!1});const $6cc32821e9371a1c$export$bcdda4773debf5fa=react.exports.forwardRef((c,d)=>{const{__scopeMenu:g,...v}=c,b=$6cc32821e9371a1c$var$usePopperScope(g);return react.exports.createElement($cf1ac5d9fe0e8206$export$21b07c8f274aebd5,_extends({},b,v,{ref:d}))}),$6cc32821e9371a1c$var$SUB_NAME="MenuSub";$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$SUB_NAME);function $6cc32821e9371a1c$var$getOpenState(c){return c?"open":"closed"}function $6cc32821e9371a1c$var$focusFirst(c){const d=document.activeElement;for(const g of c)if(g===d||(g.focus(),document.activeElement!==d))return}function $6cc32821e9371a1c$var$wrapArray(c,d){return c.map((g,v)=>c[(d+v)%c.length])}function $6cc32821e9371a1c$var$getNextMatch(c,d,g){const b=d.length>1&&Array.from(d).every(P=>P===d[0])?d[0]:d,_=g?c.indexOf(g):-1;let E=$6cc32821e9371a1c$var$wrapArray(c,Math.max(_,0));b.length===1&&(E=E.filter(P=>P!==g));const M=E.find(P=>P.toLowerCase().startsWith(b.toLowerCase()));return M!==g?M:void 0}function $6cc32821e9371a1c$var$isPointInPolygon(c,d){const{x:g,y:v}=c;let b=!1;for(let _=0,E=d.length-1;_<d.length;E=_++){const R=d[_].x,M=d[_].y,P=d[E].x,O=d[E].y;M>v!=O>v&&g<(P-R)*(v-M)/(O-M)+R&&(b=!b)}return b}function $6cc32821e9371a1c$var$isPointerInGraceArea(c,d){if(!d)return!1;const g={x:c.clientX,y:c.clientY};return $6cc32821e9371a1c$var$isPointInPolygon(g,d)}function $6cc32821e9371a1c$var$whenMouse(c){return d=>d.pointerType==="mouse"?c(d):void 0}const $6cc32821e9371a1c$export$be92b6f5f03c0fe9=$6cc32821e9371a1c$export$d9b273488cd8ce6f,$6cc32821e9371a1c$export$b688253958b8dfe7=$6cc32821e9371a1c$export$9fa5ebd18bee4d43,$6cc32821e9371a1c$export$602eac185826482c=$6cc32821e9371a1c$export$793392f970497feb,$6cc32821e9371a1c$export$7c6e2c02157bb7d2=$6cc32821e9371a1c$export$479f0f2f71193efe,$6cc32821e9371a1c$export$6d08773d2e66f8f2=$6cc32821e9371a1c$export$2ce376c2cc3355c8,$6cc32821e9371a1c$export$21b07c8f274aebd5=$6cc32821e9371a1c$export$bcdda4773debf5fa,$d08ef79370b62062$var$DROPDOWN_MENU_NAME="DropdownMenu",[$d08ef79370b62062$var$createDropdownMenuContext,$d08ef79370b62062$export$c0623cd925aeb687]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d08ef79370b62062$var$DROPDOWN_MENU_NAME,[$6cc32821e9371a1c$export$4027731b685e72eb]),$d08ef79370b62062$var$useMenuScope=$6cc32821e9371a1c$export$4027731b685e72eb(),[$d08ef79370b62062$var$DropdownMenuProvider,$d08ef79370b62062$var$useDropdownMenuContext]=$d08ef79370b62062$var$createDropdownMenuContext($d08ef79370b62062$var$DROPDOWN_MENU_NAME),$d08ef79370b62062$export$e44a253a59704894=c=>{const{__scopeDropdownMenu:d,children:g,dir:v,open:b,defaultOpen:_,onOpenChange:E,modal:R=!0}=c,M=$d08ef79370b62062$var$useMenuScope(d),P=react.exports.useRef(null),[O=!1,H]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:b,defaultProp:_,onChange:E});return react.exports.createElement($d08ef79370b62062$var$DropdownMenuProvider,{scope:d,triggerId:$1746a345f3d73bb7$export$f680877a34711e37(),triggerRef:P,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),open:O,onOpenChange:H,onOpenToggle:react.exports.useCallback(()=>H(Q=>!Q),[H]),modal:R},react.exports.createElement($6cc32821e9371a1c$export$be92b6f5f03c0fe9,_extends({},M,{open:O,onOpenChange:H,dir:v,modal:R}),g))},$d08ef79370b62062$var$TRIGGER_NAME="DropdownMenuTrigger",$d08ef79370b62062$export$d2469213b3befba9=react.exports.forwardRef((c,d)=>{const{__scopeDropdownMenu:g,disabled:v=!1,...b}=c,_=$d08ef79370b62062$var$useDropdownMenuContext($d08ef79370b62062$var$TRIGGER_NAME,g),E=$d08ef79370b62062$var$useMenuScope(g);return react.exports.createElement($6cc32821e9371a1c$export$b688253958b8dfe7,_extends({asChild:!0},E),react.exports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends({type:"button",id:_.triggerId,"aria-haspopup":"menu","aria-expanded":_.open?!0:void 0,"aria-controls":_.open?_.contentId:void 0,"data-state":_.open?"open":"closed","data-disabled":v?"":void 0,disabled:v},b,{ref:$6ed0406888f73fc4$export$43e446d32b3d21af(d,_.triggerRef),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onPointerDown,R=>{!v&&R.button===0&&R.ctrlKey===!1&&(_.onOpenToggle(),_.open||R.preventDefault())}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onKeyDown,R=>{v||(["Enter"," "].includes(R.key)&&_.onOpenToggle(),R.key==="ArrowDown"&&_.onOpenChange(!0),[" ","ArrowDown"].includes(R.key)&&R.preventDefault())})})))}),$d08ef79370b62062$export$cd369b4d4d54efc9=c=>{const{__scopeDropdownMenu:d,...g}=c,v=$d08ef79370b62062$var$useMenuScope(d);return react.exports.createElement($6cc32821e9371a1c$export$602eac185826482c,_extends({},v,g))},$d08ef79370b62062$var$CONTENT_NAME="DropdownMenuContent",$d08ef79370b62062$export$6e76d93a37c01248=react.exports.forwardRef((c,d)=>{const{__scopeDropdownMenu:g,...v}=c,b=$d08ef79370b62062$var$useDropdownMenuContext($d08ef79370b62062$var$CONTENT_NAME,g),_=$d08ef79370b62062$var$useMenuScope(g),E=react.exports.useRef(!1);return react.exports.createElement($6cc32821e9371a1c$export$7c6e2c02157bb7d2,_extends({id:b.contentId,"aria-labelledby":b.triggerId},_,v,{ref:d,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onCloseAutoFocus,R=>{var M;E.current||(M=b.triggerRef.current)===null||M===void 0||M.focus(),E.current=!1,R.preventDefault()}),onInteractOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(c.onInteractOutside,R=>{const M=R.detail.originalEvent,P=M.button===0&&M.ctrlKey===!0,O=M.button===2||P;(!b.modal||O)&&(E.current=!0)}),style:{...c.style,["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"}}))}),$d08ef79370b62062$export$ed97964d1871885d=react.exports.forwardRef((c,d)=>{const{__scopeDropdownMenu:g,...v}=c,b=$d08ef79370b62062$var$useMenuScope(g);return react.exports.createElement($6cc32821e9371a1c$export$6d08773d2e66f8f2,_extends({},b,v,{ref:d}))}),$d08ef79370b62062$export$34b8980744021ec5=react.exports.forwardRef((c,d)=>{const{__scopeDropdownMenu:g,...v}=c,b=$d08ef79370b62062$var$useMenuScope(g);return react.exports.createElement($6cc32821e9371a1c$export$21b07c8f274aebd5,_extends({},b,v,{ref:d}))}),$d08ef79370b62062$export$be92b6f5f03c0fe9=$d08ef79370b62062$export$e44a253a59704894,$d08ef79370b62062$export$41fb9f06171c75f4=$d08ef79370b62062$export$d2469213b3befba9,$d08ef79370b62062$export$602eac185826482c=$d08ef79370b62062$export$cd369b4d4d54efc9,$d08ef79370b62062$export$7c6e2c02157bb7d2=$d08ef79370b62062$export$6e76d93a37c01248,$d08ef79370b62062$export$6d08773d2e66f8f2=$d08ef79370b62062$export$ed97964d1871885d,$d08ef79370b62062$export$21b07c8f274aebd5=$d08ef79370b62062$export$34b8980744021ec5,dropdownMenu="",Loading=({message:c="Loading..."})=>React.createElement("div",{className:"ctw-space-x-2"},c&&React.createElement("span",{className:"ctw-text-sm ctw-italic"},c),React.createElement(Spinner,null));try{Loading.displayName="Loading",Loading.__docgenInfo={description:"",displayName:"Loading",props:{message:{defaultValue:{value:"Loading..."},description:"",name:"message",required:!1,type:{name:"string"}}}}}catch{}function DropdownMenu({children:c,menuItems:d}){const{ctwProviderRef:g}=useCTW(),[v,b]=react.exports.useState(!1);async function _(E){b(!0),await E.action(),b(!1)}return React.createElement(qe,null,React.createElement($d08ef79370b62062$export$be92b6f5f03c0fe9,{modal:!1},React.createElement($d08ef79370b62062$export$41fb9f06171c75f4,{className:"ctw-btn-clear ctw-link","aria-label":"dropdown"},v&&React.createElement(Loading,{message:""}),!v&&c),React.createElement($d08ef79370b62062$export$602eac185826482c,{container:g.current},React.createElement($d08ef79370b62062$export$7c6e2c02157bb7d2,{onFocusOutside:E=>E.preventDefault(),className:"ctw-dropdown-menu-container",collisionPadding:10},React.createElement($d08ef79370b62062$export$21b07c8f274aebd5,{asChild:!0},React.createElement("div",{className:"ctw-dropdown-menu-arrow"})),d.map(E=>React.createElement($d08ef79370b62062$export$6d08773d2e66f8f2,{onClick:()=>_(E),key:E.name,className:cx(E.className,"ctw-dropdown-menu-item")},E.name))))))}try{DropdownMenu.displayName="DropdownMenu",DropdownMenu.__docgenInfo={description:"",displayName:"DropdownMenu",props:{menuItems:{defaultValue:null,description:"",name:"menuItems",required:!0,type:{name:"MenuItem[]"}}}}}catch{}function ConditionsTableBase({className:c,conditions:d,rowMenuActions:g,hideMenu:v,sort:b={columnTitle:"Last Recorded",dir:"desc"},onSort:_,...E}){const R=[{title:"Condition",dataIndex:"display",widthPercent:40,minWidth:320,sortIndices:[{index:"display"},{index:"recorded",dir:"desc"}]},{title:"Category",dataIndex:"ccsGrouping",widthPercent:25,minWidth:192,sortIndices:[{index:"ccsGrouping"},{index:"display",dir:"asc"}]},{title:"Status",render:M=>React.createElement("div",{className:"ctw-capitalize"},React.createElement("div",{className:"ctw-text-content-black"},M.clinicalStatus),React.createElement("div",null,M.isArchived?"Archived":M.verificationStatus)),widthPercent:17.5,minWidth:128,sortIndices:[{index:"clinicalStatus"},{index:"verificationStatus"},{index:"recorded",dir:"desc"}]},{title:"Last Recorded",dataIndex:"recordedDate",widthPercent:17.5,minWidth:132,sortIndices:[{index:"recorded"},{index:"display",dir:"asc"}]}];return v||R.push({className:"ctw-table-action-column",render:M=>React.createElement(DropdownMenu,{menuItems:g(M)},React.createElement(DotsHorizontalIcon$1,{className:"ctw-w-5"}))}),React.createElement(Table$1,{className:c,records:d,columns:R,sort:b,onSort:_,...E})}try{ConditionsTableBase.displayName="ConditionsTableBase",ConditionsTableBase.__docgenInfo={description:"",displayName:"ConditionsTableBase",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | (string & Mapping) | (string & ArgumentArray)"}},conditions:{defaultValue:null,description:"",name:"conditions",required:!0,type:{name:"ConditionModel[]"}},rowMenuActions:{defaultValue:null,description:"",name:"rowMenuActions",required:!0,type:{name:"(condition: ConditionModel) => MenuItem[]"}},hideMenu:{defaultValue:null,description:"",name:"hideMenu",required:!0,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},message:{defaultValue:null,description:"Displayed when we have 0 records.",name:"message",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},showTableHead:{defaultValue:null,description:"",name:"showTableHead",required:!1,type:{name:"boolean"}},stacked:{defaultValue:null,description:"",name:"stacked",required:!1,type:{name:"boolean"}},sort:{defaultValue:{value:'{ columnTitle: "Last Recorded", dir: "desc" }'},description:"",name:"sort",required:!1,type:{name:"TableSort"}},onSort:{defaultValue:null,description:"",name:"onSort",required:!1,type:{name:"((sort: TableSort) => void)"}},handleRowClick:{defaultValue:null,description:"",name:"handleRowClick",required:!1,type:{name:"((record: ConditionModel) => void)"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"((record: ConditionModel) => Element)"}},hidePagination:{defaultValue:null,description:"",name:"hidePagination",required:!1,type:{name:"boolean"}}}}}catch{}function toInteger(c){if(c===null||c===!0||c===!1)return NaN;var d=Number(c);return isNaN(d)?d:d<0?Math.ceil(d):Math.floor(d)}function requiredArgs(c,d){if(d.length<c)throw new TypeError(c+" argument"+(c>1?"s":"")+" required, but only "+d.length+" present")}function _typeof$z(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$z=function(g){return typeof g}:_typeof$z=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$z(c)}function toDate(c){requiredArgs(1,arguments);var d=Object.prototype.toString.call(c);return c instanceof Date||_typeof$z(c)==="object"&&d==="[object Date]"?new Date(c.getTime()):typeof c=="number"||d==="[object Number]"?new Date(c):((typeof c=="string"||d==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function addMilliseconds(c,d){requiredArgs(2,arguments);var g=toDate(c).getTime(),v=toInteger(d);return new Date(g+v)}var defaultOptions={};function getDefaultOptions(){return defaultOptions}function getTimezoneOffsetInMilliseconds(c){var d=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()));return d.setUTCFullYear(c.getFullYear()),c.getTime()-d.getTime()}function compareAsc(c,d){requiredArgs(2,arguments);var g=toDate(c),v=toDate(d),b=g.getTime()-v.getTime();return b<0?-1:b>0?1:b}var millisecondsInMinute=6e4,millisecondsInHour=36e5,millisecondsInSecond=1e3;function _typeof$y(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$y=function(g){return typeof g}:_typeof$y=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$y(c)}function isDate(c){return requiredArgs(1,arguments),c instanceof Date||_typeof$y(c)==="object"&&Object.prototype.toString.call(c)==="[object Date]"}function isValid$1(c){if(requiredArgs(1,arguments),!isDate(c)&&typeof c!="number")return!1;var d=toDate(c);return!isNaN(Number(d))}function differenceInCalendarYears(c,d){requiredArgs(2,arguments);var g=toDate(c),v=toDate(d);return g.getFullYear()-v.getFullYear()}function differenceInYears(c,d){requiredArgs(2,arguments);var g=toDate(c),v=toDate(d),b=compareAsc(g,v),_=Math.abs(differenceInCalendarYears(g,v));g.setFullYear(1584),v.setFullYear(1584);var E=compareAsc(g,v)===-b,R=b*(_-Number(E));return R===0?0:R}function subMilliseconds(c,d){requiredArgs(2,arguments);var g=toInteger(d);return addMilliseconds(c,-g)}var MILLISECONDS_IN_DAY=864e5;function getUTCDayOfYear(c){requiredArgs(1,arguments);var d=toDate(c),g=d.getTime();d.setUTCMonth(0,1),d.setUTCHours(0,0,0,0);var v=d.getTime(),b=g-v;return Math.floor(b/MILLISECONDS_IN_DAY)+1}function startOfUTCISOWeek(c){requiredArgs(1,arguments);var d=1,g=toDate(c),v=g.getUTCDay(),b=(v<d?7:0)+v-d;return g.setUTCDate(g.getUTCDate()-b),g.setUTCHours(0,0,0,0),g}function getUTCISOWeekYear(c){requiredArgs(1,arguments);var d=toDate(c),g=d.getUTCFullYear(),v=new Date(0);v.setUTCFullYear(g+1,0,4),v.setUTCHours(0,0,0,0);var b=startOfUTCISOWeek(v),_=new Date(0);_.setUTCFullYear(g,0,4),_.setUTCHours(0,0,0,0);var E=startOfUTCISOWeek(_);return d.getTime()>=b.getTime()?g+1:d.getTime()>=E.getTime()?g:g-1}function startOfUTCISOWeekYear(c){requiredArgs(1,arguments);var d=getUTCISOWeekYear(c),g=new Date(0);g.setUTCFullYear(d,0,4),g.setUTCHours(0,0,0,0);var v=startOfUTCISOWeek(g);return v}var MILLISECONDS_IN_WEEK$1=6048e5;function getUTCISOWeek(c){requiredArgs(1,arguments);var d=toDate(c),g=startOfUTCISOWeek(d).getTime()-startOfUTCISOWeekYear(d).getTime();return Math.round(g/MILLISECONDS_IN_WEEK$1)+1}function startOfUTCWeek(c,d){var g,v,b,_,E,R,M,P;requiredArgs(1,arguments);var O=getDefaultOptions(),H=toInteger((g=(v=(b=(_=d==null?void 0:d.weekStartsOn)!==null&&_!==void 0?_:d==null||(E=d.locale)===null||E===void 0||(R=E.options)===null||R===void 0?void 0:R.weekStartsOn)!==null&&b!==void 0?b:O.weekStartsOn)!==null&&v!==void 0?v:(M=O.locale)===null||M===void 0||(P=M.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&g!==void 0?g:0);if(!(H>=0&&H<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var Q=toDate(c),ee=Q.getUTCDay(),V=(ee<H?7:0)+ee-H;return Q.setUTCDate(Q.getUTCDate()-V),Q.setUTCHours(0,0,0,0),Q}function getUTCWeekYear(c,d){var g,v,b,_,E,R,M,P;requiredArgs(1,arguments);var O=toDate(c),H=O.getUTCFullYear(),Q=getDefaultOptions(),ee=toInteger((g=(v=(b=(_=d==null?void 0:d.firstWeekContainsDate)!==null&&_!==void 0?_:d==null||(E=d.locale)===null||E===void 0||(R=E.options)===null||R===void 0?void 0:R.firstWeekContainsDate)!==null&&b!==void 0?b:Q.firstWeekContainsDate)!==null&&v!==void 0?v:(M=Q.locale)===null||M===void 0||(P=M.options)===null||P===void 0?void 0:P.firstWeekContainsDate)!==null&&g!==void 0?g:1);if(!(ee>=1&&ee<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var V=new Date(0);V.setUTCFullYear(H+1,0,ee),V.setUTCHours(0,0,0,0);var W=startOfUTCWeek(V,d),Y=new Date(0);Y.setUTCFullYear(H,0,ee),Y.setUTCHours(0,0,0,0);var U=startOfUTCWeek(Y,d);return O.getTime()>=W.getTime()?H+1:O.getTime()>=U.getTime()?H:H-1}function startOfUTCWeekYear(c,d){var g,v,b,_,E,R,M,P;requiredArgs(1,arguments);var O=getDefaultOptions(),H=toInteger((g=(v=(b=(_=d==null?void 0:d.firstWeekContainsDate)!==null&&_!==void 0?_:d==null||(E=d.locale)===null||E===void 0||(R=E.options)===null||R===void 0?void 0:R.firstWeekContainsDate)!==null&&b!==void 0?b:O.firstWeekContainsDate)!==null&&v!==void 0?v:(M=O.locale)===null||M===void 0||(P=M.options)===null||P===void 0?void 0:P.firstWeekContainsDate)!==null&&g!==void 0?g:1),Q=getUTCWeekYear(c,d),ee=new Date(0);ee.setUTCFullYear(Q,0,H),ee.setUTCHours(0,0,0,0);var V=startOfUTCWeek(ee,d);return V}var MILLISECONDS_IN_WEEK=6048e5;function getUTCWeek(c,d){requiredArgs(1,arguments);var g=toDate(c),v=startOfUTCWeek(g,d).getTime()-startOfUTCWeekYear(g,d).getTime();return Math.round(v/MILLISECONDS_IN_WEEK)+1}function addLeadingZeros(c,d){for(var g=c<0?"-":"",v=Math.abs(c).toString();v.length<d;)v="0"+v;return g+v}var formatters$2={y:function(d,g){var v=d.getUTCFullYear(),b=v>0?v:1-v;return addLeadingZeros(g==="yy"?b%100:b,g.length)},M:function(d,g){var v=d.getUTCMonth();return g==="M"?String(v+1):addLeadingZeros(v+1,2)},d:function(d,g){return addLeadingZeros(d.getUTCDate(),g.length)},a:function(d,g){var v=d.getUTCHours()/12>=1?"pm":"am";switch(g){case"a":case"aa":return v.toUpperCase();case"aaa":return v;case"aaaaa":return v[0];case"aaaa":default:return v==="am"?"a.m.":"p.m."}},h:function(d,g){return addLeadingZeros(d.getUTCHours()%12||12,g.length)},H:function(d,g){return addLeadingZeros(d.getUTCHours(),g.length)},m:function(d,g){return addLeadingZeros(d.getUTCMinutes(),g.length)},s:function(d,g){return addLeadingZeros(d.getUTCSeconds(),g.length)},S:function(d,g){var v=g.length,b=d.getUTCMilliseconds(),_=Math.floor(b*Math.pow(10,v-3));return addLeadingZeros(_,g.length)}};const formatters$3=formatters$2;var dayPeriodEnum={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters={G:function(d,g,v){var b=d.getUTCFullYear()>0?1:0;switch(g){case"G":case"GG":case"GGG":return v.era(b,{width:"abbreviated"});case"GGGGG":return v.era(b,{width:"narrow"});case"GGGG":default:return v.era(b,{width:"wide"})}},y:function(d,g,v){if(g==="yo"){var b=d.getUTCFullYear(),_=b>0?b:1-b;return v.ordinalNumber(_,{unit:"year"})}return formatters$3.y(d,g)},Y:function(d,g,v,b){var _=getUTCWeekYear(d,b),E=_>0?_:1-_;if(g==="YY"){var R=E%100;return addLeadingZeros(R,2)}return g==="Yo"?v.ordinalNumber(E,{unit:"year"}):addLeadingZeros(E,g.length)},R:function(d,g){var v=getUTCISOWeekYear(d);return addLeadingZeros(v,g.length)},u:function(d,g){var v=d.getUTCFullYear();return addLeadingZeros(v,g.length)},Q:function(d,g,v){var b=Math.ceil((d.getUTCMonth()+1)/3);switch(g){case"Q":return String(b);case"QQ":return addLeadingZeros(b,2);case"Qo":return v.ordinalNumber(b,{unit:"quarter"});case"QQQ":return v.quarter(b,{width:"abbreviated",context:"formatting"});case"QQQQQ":return v.quarter(b,{width:"narrow",context:"formatting"});case"QQQQ":default:return v.quarter(b,{width:"wide",context:"formatting"})}},q:function(d,g,v){var b=Math.ceil((d.getUTCMonth()+1)/3);switch(g){case"q":return String(b);case"qq":return addLeadingZeros(b,2);case"qo":return v.ordinalNumber(b,{unit:"quarter"});case"qqq":return v.quarter(b,{width:"abbreviated",context:"standalone"});case"qqqqq":return v.quarter(b,{width:"narrow",context:"standalone"});case"qqqq":default:return v.quarter(b,{width:"wide",context:"standalone"})}},M:function(d,g,v){var b=d.getUTCMonth();switch(g){case"M":case"MM":return formatters$3.M(d,g);case"Mo":return v.ordinalNumber(b+1,{unit:"month"});case"MMM":return v.month(b,{width:"abbreviated",context:"formatting"});case"MMMMM":return v.month(b,{width:"narrow",context:"formatting"});case"MMMM":default:return v.month(b,{width:"wide",context:"formatting"})}},L:function(d,g,v){var b=d.getUTCMonth();switch(g){case"L":return String(b+1);case"LL":return addLeadingZeros(b+1,2);case"Lo":return v.ordinalNumber(b+1,{unit:"month"});case"LLL":return v.month(b,{width:"abbreviated",context:"standalone"});case"LLLLL":return v.month(b,{width:"narrow",context:"standalone"});case"LLLL":default:return v.month(b,{width:"wide",context:"standalone"})}},w:function(d,g,v,b){var _=getUTCWeek(d,b);return g==="wo"?v.ordinalNumber(_,{unit:"week"}):addLeadingZeros(_,g.length)},I:function(d,g,v){var b=getUTCISOWeek(d);return g==="Io"?v.ordinalNumber(b,{unit:"week"}):addLeadingZeros(b,g.length)},d:function(d,g,v){return g==="do"?v.ordinalNumber(d.getUTCDate(),{unit:"date"}):formatters$3.d(d,g)},D:function(d,g,v){var b=getUTCDayOfYear(d);return g==="Do"?v.ordinalNumber(b,{unit:"dayOfYear"}):addLeadingZeros(b,g.length)},E:function(d,g,v){var b=d.getUTCDay();switch(g){case"E":case"EE":case"EEE":return v.day(b,{width:"abbreviated",context:"formatting"});case"EEEEE":return v.day(b,{width:"narrow",context:"formatting"});case"EEEEEE":return v.day(b,{width:"short",context:"formatting"});case"EEEE":default:return v.day(b,{width:"wide",context:"formatting"})}},e:function(d,g,v,b){var _=d.getUTCDay(),E=(_-b.weekStartsOn+8)%7||7;switch(g){case"e":return String(E);case"ee":return addLeadingZeros(E,2);case"eo":return v.ordinalNumber(E,{unit:"day"});case"eee":return v.day(_,{width:"abbreviated",context:"formatting"});case"eeeee":return v.day(_,{width:"narrow",context:"formatting"});case"eeeeee":return v.day(_,{width:"short",context:"formatting"});case"eeee":default:return v.day(_,{width:"wide",context:"formatting"})}},c:function(d,g,v,b){var _=d.getUTCDay(),E=(_-b.weekStartsOn+8)%7||7;switch(g){case"c":return String(E);case"cc":return addLeadingZeros(E,g.length);case"co":return v.ordinalNumber(E,{unit:"day"});case"ccc":return v.day(_,{width:"abbreviated",context:"standalone"});case"ccccc":return v.day(_,{width:"narrow",context:"standalone"});case"cccccc":return v.day(_,{width:"short",context:"standalone"});case"cccc":default:return v.day(_,{width:"wide",context:"standalone"})}},i:function(d,g,v){var b=d.getUTCDay(),_=b===0?7:b;switch(g){case"i":return String(_);case"ii":return addLeadingZeros(_,g.length);case"io":return v.ordinalNumber(_,{unit:"day"});case"iii":return v.day(b,{width:"abbreviated",context:"formatting"});case"iiiii":return v.day(b,{width:"narrow",context:"formatting"});case"iiiiii":return v.day(b,{width:"short",context:"formatting"});case"iiii":default:return v.day(b,{width:"wide",context:"formatting"})}},a:function(d,g,v){var b=d.getUTCHours(),_=b/12>=1?"pm":"am";switch(g){case"a":case"aa":return v.dayPeriod(_,{width:"abbreviated",context:"formatting"});case"aaa":return v.dayPeriod(_,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return v.dayPeriod(_,{width:"narrow",context:"formatting"});case"aaaa":default:return v.dayPeriod(_,{width:"wide",context:"formatting"})}},b:function(d,g,v){var b=d.getUTCHours(),_;switch(b===12?_=dayPeriodEnum.noon:b===0?_=dayPeriodEnum.midnight:_=b/12>=1?"pm":"am",g){case"b":case"bb":return v.dayPeriod(_,{width:"abbreviated",context:"formatting"});case"bbb":return v.dayPeriod(_,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return v.dayPeriod(_,{width:"narrow",context:"formatting"});case"bbbb":default:return v.dayPeriod(_,{width:"wide",context:"formatting"})}},B:function(d,g,v){var b=d.getUTCHours(),_;switch(b>=17?_=dayPeriodEnum.evening:b>=12?_=dayPeriodEnum.afternoon:b>=4?_=dayPeriodEnum.morning:_=dayPeriodEnum.night,g){case"B":case"BB":case"BBB":return v.dayPeriod(_,{width:"abbreviated",context:"formatting"});case"BBBBB":return v.dayPeriod(_,{width:"narrow",context:"formatting"});case"BBBB":default:return v.dayPeriod(_,{width:"wide",context:"formatting"})}},h:function(d,g,v){if(g==="ho"){var b=d.getUTCHours()%12;return b===0&&(b=12),v.ordinalNumber(b,{unit:"hour"})}return formatters$3.h(d,g)},H:function(d,g,v){return g==="Ho"?v.ordinalNumber(d.getUTCHours(),{unit:"hour"}):formatters$3.H(d,g)},K:function(d,g,v){var b=d.getUTCHours()%12;return g==="Ko"?v.ordinalNumber(b,{unit:"hour"}):addLeadingZeros(b,g.length)},k:function(d,g,v){var b=d.getUTCHours();return b===0&&(b=24),g==="ko"?v.ordinalNumber(b,{unit:"hour"}):addLeadingZeros(b,g.length)},m:function(d,g,v){return g==="mo"?v.ordinalNumber(d.getUTCMinutes(),{unit:"minute"}):formatters$3.m(d,g)},s:function(d,g,v){return g==="so"?v.ordinalNumber(d.getUTCSeconds(),{unit:"second"}):formatters$3.s(d,g)},S:function(d,g){return formatters$3.S(d,g)},X:function(d,g,v,b){var _=b._originalDate||d,E=_.getTimezoneOffset();if(E===0)return"Z";switch(g){case"X":return formatTimezoneWithOptionalMinutes(E);case"XXXX":case"XX":return formatTimezone(E);case"XXXXX":case"XXX":default:return formatTimezone(E,":")}},x:function(d,g,v,b){var _=b._originalDate||d,E=_.getTimezoneOffset();switch(g){case"x":return formatTimezoneWithOptionalMinutes(E);case"xxxx":case"xx":return formatTimezone(E);case"xxxxx":case"xxx":default:return formatTimezone(E,":")}},O:function(d,g,v,b){var _=b._originalDate||d,E=_.getTimezoneOffset();switch(g){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(E,":");case"OOOO":default:return"GMT"+formatTimezone(E,":")}},z:function(d,g,v,b){var _=b._originalDate||d,E=_.getTimezoneOffset();switch(g){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(E,":");case"zzzz":default:return"GMT"+formatTimezone(E,":")}},t:function(d,g,v,b){var _=b._originalDate||d,E=Math.floor(_.getTime()/1e3);return addLeadingZeros(E,g.length)},T:function(d,g,v,b){var _=b._originalDate||d,E=_.getTime();return addLeadingZeros(E,g.length)}};function formatTimezoneShort(c,d){var g=c>0?"-":"+",v=Math.abs(c),b=Math.floor(v/60),_=v%60;if(_===0)return g+String(b);var E=d||"";return g+String(b)+E+addLeadingZeros(_,2)}function formatTimezoneWithOptionalMinutes(c,d){if(c%60===0){var g=c>0?"-":"+";return g+addLeadingZeros(Math.abs(c)/60,2)}return formatTimezone(c,d)}function formatTimezone(c,d){var g=d||"",v=c>0?"-":"+",b=Math.abs(c),_=addLeadingZeros(Math.floor(b/60),2),E=addLeadingZeros(b%60,2);return v+_+g+E}const formatters$1=formatters;var dateLongFormatter=function(d,g){switch(d){case"P":return g.date({width:"short"});case"PP":return g.date({width:"medium"});case"PPP":return g.date({width:"long"});case"PPPP":default:return g.date({width:"full"})}},timeLongFormatter=function(d,g){switch(d){case"p":return g.time({width:"short"});case"pp":return g.time({width:"medium"});case"ppp":return g.time({width:"long"});case"pppp":default:return g.time({width:"full"})}},dateTimeLongFormatter=function(d,g){var v=d.match(/(P+)(p+)?/)||[],b=v[1],_=v[2];if(!_)return dateLongFormatter(d,g);var E;switch(b){case"P":E=g.dateTime({width:"short"});break;case"PP":E=g.dateTime({width:"medium"});break;case"PPP":E=g.dateTime({width:"long"});break;case"PPPP":default:E=g.dateTime({width:"full"});break}return E.replace("{{date}}",dateLongFormatter(b,g)).replace("{{time}}",timeLongFormatter(_,g))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter};const longFormatters$1=longFormatters;var protectedDayOfYearTokens=["D","DD"],protectedWeekYearTokens=["YY","YYYY"];function isProtectedDayOfYearToken(c){return protectedDayOfYearTokens.indexOf(c)!==-1}function isProtectedWeekYearToken(c){return protectedWeekYearTokens.indexOf(c)!==-1}function throwProtectedError(c,d,g){if(c==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(d,"`) for formatting years to the input `").concat(g,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(c==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(d,"`) for formatting years to the input `").concat(g,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(c==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(d,"`) for formatting days of the month to the input `").concat(g,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(c==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(d,"`) for formatting days of the month to the input `").concat(g,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=function(d,g,v){var b,_=formatDistanceLocale[d];return typeof _=="string"?b=_:g===1?b=_.one:b=_.other.replace("{{count}}",g.toString()),v!=null&&v.addSuffix?v.comparison&&v.comparison>0?"in "+b:b+" ago":b};const formatDistance$1=formatDistance;function buildFormatLongFn(c){return function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=d.width?String(d.width):c.defaultWidth,v=c.formats[g]||c.formats[c.defaultWidth];return v}}var dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})};const formatLong$1=formatLong;var formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=function(d,g,v,b){return formatRelativeLocale[d]};const formatRelative$1=formatRelative;function buildLocalizeFn(c){return function(d,g){var v=g!=null&&g.context?String(g.context):"standalone",b;if(v==="formatting"&&c.formattingValues){var _=c.defaultFormattingWidth||c.defaultWidth,E=g!=null&&g.width?String(g.width):_;b=c.formattingValues[E]||c.formattingValues[_]}else{var R=c.defaultWidth,M=g!=null&&g.width?String(g.width):c.defaultWidth;b=c.values[M]||c.values[R]}var P=c.argumentCallback?c.argumentCallback(d):d;return b[P]}}var eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=function(d,g){var v=Number(d),b=v%100;if(b>20||b<10)switch(b%10){case 1:return v+"st";case 2:return v+"nd";case 3:return v+"rd"}return v+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:function(d){return d-1}}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};const localize$1=localize;function buildMatchFn(c){return function(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=g.width,b=v&&c.matchPatterns[v]||c.matchPatterns[c.defaultMatchWidth],_=d.match(b);if(!_)return null;var E=_[0],R=v&&c.parsePatterns[v]||c.parsePatterns[c.defaultParseWidth],M=Array.isArray(R)?findIndex(R,function(H){return H.test(E)}):findKey(R,function(H){return H.test(E)}),P;P=c.valueCallback?c.valueCallback(M):M,P=g.valueCallback?g.valueCallback(P):P;var O=d.slice(E.length);return{value:P,rest:O}}}function findKey(c,d){for(var g in c)if(c.hasOwnProperty(g)&&d(c[g]))return g}function findIndex(c,d){for(var g=0;g<c.length;g++)if(d(c[g]))return g}function buildMatchPatternFn(c){return function(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=d.match(c.matchPattern);if(!v)return null;var b=v[0],_=d.match(c.parsePattern);if(!_)return null;var E=c.valueCallback?c.valueCallback(_[0]):_[0];E=g.valueCallback?g.valueCallback(E):E;var R=d.slice(b.length);return{value:E,rest:R}}}var matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:function(d){return parseInt(d,10)}}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:function(d){return d+1}}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})};const match$1=match;var locale={code:"en-US",formatDistance:formatDistance$1,formatLong:formatLong$1,formatRelative:formatRelative$1,localize:localize$1,match:match$1,options:{weekStartsOn:0,firstWeekContainsDate:1}};const defaultLocale=locale;var formattingTokensRegExp$1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp$1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp$1=/^'([^]*?)'?$/,doubleQuoteRegExp$1=/''/g,unescapedLatinCharacterRegExp$1=/[a-zA-Z]/;function format(c,d,g){var v,b,_,E,R,M,P,O,H,Q,ee,V,W,Y,U,G,te,B;requiredArgs(2,arguments);var j=String(d),X=getDefaultOptions(),oe=(v=(b=g==null?void 0:g.locale)!==null&&b!==void 0?b:X.locale)!==null&&v!==void 0?v:defaultLocale,be=toInteger((_=(E=(R=(M=g==null?void 0:g.firstWeekContainsDate)!==null&&M!==void 0?M:g==null||(P=g.locale)===null||P===void 0||(O=P.options)===null||O===void 0?void 0:O.firstWeekContainsDate)!==null&&R!==void 0?R:X.firstWeekContainsDate)!==null&&E!==void 0?E:(H=X.locale)===null||H===void 0||(Q=H.options)===null||Q===void 0?void 0:Q.firstWeekContainsDate)!==null&&_!==void 0?_:1);if(!(be>=1&&be<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ae=toInteger((ee=(V=(W=(Y=g==null?void 0:g.weekStartsOn)!==null&&Y!==void 0?Y:g==null||(U=g.locale)===null||U===void 0||(G=U.options)===null||G===void 0?void 0:G.weekStartsOn)!==null&&W!==void 0?W:X.weekStartsOn)!==null&&V!==void 0?V:(te=X.locale)===null||te===void 0||(B=te.options)===null||B===void 0?void 0:B.weekStartsOn)!==null&&ee!==void 0?ee:0);if(!(ae>=0&&ae<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!oe.localize)throw new RangeError("locale must contain localize property");if(!oe.formatLong)throw new RangeError("locale must contain formatLong property");var ie=toDate(c);if(!isValid$1(ie))throw new RangeError("Invalid time value");var Se=getTimezoneOffsetInMilliseconds(ie),mt=subMilliseconds(ie,Se),it={firstWeekContainsDate:be,weekStartsOn:ae,locale:oe,_originalDate:ie},Tt=j.match(longFormattingTokensRegExp$1).map(function(ht){var Ye=ht[0];if(Ye==="p"||Ye==="P"){var St=longFormatters$1[Ye];return St(ht,oe.formatLong)}return ht}).join("").match(formattingTokensRegExp$1).map(function(ht){if(ht==="''")return"'";var Ye=ht[0];if(Ye==="'")return cleanEscapedString$1(ht);var St=formatters$1[Ye];if(St)return!(g!=null&&g.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(ht)&&throwProtectedError(ht,d,String(c)),!(g!=null&&g.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(ht)&&throwProtectedError(ht,d,String(c)),St(mt,ht,oe.localize,it);if(Ye.match(unescapedLatinCharacterRegExp$1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ye+"`");return ht}).join("");return Tt}function cleanEscapedString$1(c){var d=c.match(escapedStringRegExp$1);return d?d[1].replace(doubleQuoteRegExp$1,"'"):c}function assign(c,d){if(c==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(c[g]=d[g]);return c}function formatISO(c,d){var g,v;requiredArgs(1,arguments);var b=toDate(c);if(isNaN(b.getTime()))throw new RangeError("Invalid time value");var _=String((g=d==null?void 0:d.format)!==null&&g!==void 0?g:"extended"),E=String((v=d==null?void 0:d.representation)!==null&&v!==void 0?v:"complete");if(_!=="extended"&&_!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(E!=="date"&&E!=="time"&&E!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var R="",M="",P=_==="extended"?"-":"",O=_==="extended"?":":"";if(E!=="time"){var H=addLeadingZeros(b.getDate(),2),Q=addLeadingZeros(b.getMonth()+1,2),ee=addLeadingZeros(b.getFullYear(),4);R="".concat(ee).concat(P).concat(Q).concat(P).concat(H)}if(E!=="date"){var V=b.getTimezoneOffset();if(V!==0){var W=Math.abs(V),Y=addLeadingZeros(Math.floor(W/60),2),U=addLeadingZeros(W%60,2),G=V<0?"+":"-";M="".concat(G).concat(Y,":").concat(U)}else M="Z";var te=addLeadingZeros(b.getHours(),2),B=addLeadingZeros(b.getMinutes(),2),j=addLeadingZeros(b.getSeconds(),2),X=R===""?"":"T",oe=[te,B,j].join(O);R="".concat(R).concat(X).concat(oe).concat(M)}return R}function isBefore(c,d){requiredArgs(2,arguments);var g=toDate(c),v=toDate(d);return g.getTime()<v.getTime()}function isEqual(c,d){requiredArgs(2,arguments);var g=toDate(c),v=toDate(d);return g.getTime()===v.getTime()}function _typeof$x(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$x=function(g){return typeof g}:_typeof$x=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$x(c)}function _inherits$v(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$w(c,d)}function _setPrototypeOf$w(c,d){return _setPrototypeOf$w=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$w(c,d)}function _createSuper$v(c){var d=_isNativeReflectConstruct$w();return function(){var v=_getPrototypeOf$v(c),b;if(d){var _=_getPrototypeOf$v(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$v(this,b)}}function _possibleConstructorReturn$v(c,d){return d&&(_typeof$x(d)==="object"||typeof d=="function")?d:_assertThisInitialized$v(c)}function _assertThisInitialized$v(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$v(c){return _getPrototypeOf$v=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$v(c)}function _classCallCheck$w(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$w(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$w(c,d,g){return d&&_defineProperties$w(c.prototype,d),g&&_defineProperties$w(c,g),c}function _defineProperty$v(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var TIMEZONE_UNIT_PRIORITY=10,Setter=function(){function c(){_classCallCheck$w(this,c),_defineProperty$v(this,"subPriority",0)}return _createClass$w(c,[{key:"validate",value:function(g,v){return!0}}]),c}(),ValueSetter=function(c){_inherits$v(g,c);var d=_createSuper$v(g);function g(v,b,_,E,R){var M;return _classCallCheck$w(this,g),M=d.call(this),M.value=v,M.validateValue=b,M.setValue=_,M.priority=E,R&&(M.subPriority=R),M}return _createClass$w(g,[{key:"validate",value:function(b,_){return this.validateValue(b,this.value,_)}},{key:"set",value:function(b,_,E){return this.setValue(b,_,this.value,E)}}]),g}(Setter),DateToSystemTimezoneSetter=function(c){_inherits$v(g,c);var d=_createSuper$v(g);function g(){var v;_classCallCheck$w(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$v(_assertThisInitialized$v(v),"priority",TIMEZONE_UNIT_PRIORITY),_defineProperty$v(_assertThisInitialized$v(v),"subPriority",-1),v}return _createClass$w(g,[{key:"set",value:function(b,_){if(_.timestampIsSet)return b;var E=new Date(0);return E.setFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),E.setHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()),E}}]),g}(Setter);function _classCallCheck$v(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$v(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$v(c,d,g){return d&&_defineProperties$v(c.prototype,d),g&&_defineProperties$v(c,g),c}var Parser=function(){function c(){_classCallCheck$v(this,c)}return _createClass$v(c,[{key:"run",value:function(g,v,b,_){var E=this.parse(g,v,b,_);return E?{setter:new ValueSetter(E.value,this.validate,this.set,this.priority,this.subPriority),rest:E.rest}:null}},{key:"validate",value:function(g,v,b){return!0}}]),c}();function _typeof$w(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$w=function(g){return typeof g}:_typeof$w=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$w(c)}function _classCallCheck$u(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$u(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$u(c,d,g){return d&&_defineProperties$u(c.prototype,d),g&&_defineProperties$u(c,g),c}function _inherits$u(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$v(c,d)}function _setPrototypeOf$v(c,d){return _setPrototypeOf$v=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$v(c,d)}function _createSuper$u(c){var d=_isNativeReflectConstruct$v();return function(){var v=_getPrototypeOf$u(c),b;if(d){var _=_getPrototypeOf$u(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$u(this,b)}}function _possibleConstructorReturn$u(c,d){return d&&(_typeof$w(d)==="object"||typeof d=="function")?d:_assertThisInitialized$u(c)}function _assertThisInitialized$u(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$u(c){return _getPrototypeOf$u=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$u(c)}function _defineProperty$u(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var EraParser=function(c){_inherits$u(g,c);var d=_createSuper$u(g);function g(){var v;_classCallCheck$u(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$u(_assertThisInitialized$u(v),"priority",140),_defineProperty$u(_assertThisInitialized$u(v),"incompatibleTokens",["R","u","t","T"]),v}return _createClass$u(g,[{key:"parse",value:function(b,_,E){switch(_){case"G":case"GG":case"GGG":return E.era(b,{width:"abbreviated"})||E.era(b,{width:"narrow"});case"GGGGG":return E.era(b,{width:"narrow"});case"GGGG":default:return E.era(b,{width:"wide"})||E.era(b,{width:"abbreviated"})||E.era(b,{width:"narrow"})}}},{key:"set",value:function(b,_,E){return _.era=E,b.setUTCFullYear(E,0,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser),numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function mapValue(c,d){return c&&{value:d(c.value),rest:c.rest}}function parseNumericPattern(c,d){var g=d.match(c);return g?{value:parseInt(g[0],10),rest:d.slice(g[0].length)}:null}function parseTimezonePattern(c,d){var g=d.match(c);if(!g)return null;if(g[0]==="Z")return{value:0,rest:d.slice(1)};var v=g[1]==="+"?1:-1,b=g[2]?parseInt(g[2],10):0,_=g[3]?parseInt(g[3],10):0,E=g[5]?parseInt(g[5],10):0;return{value:v*(b*millisecondsInHour+_*millisecondsInMinute+E*millisecondsInSecond),rest:d.slice(g[0].length)}}function parseAnyDigitsSigned(c){return parseNumericPattern(numericPatterns.anyDigitsSigned,c)}function parseNDigits(c,d){switch(c){case 1:return parseNumericPattern(numericPatterns.singleDigit,d);case 2:return parseNumericPattern(numericPatterns.twoDigits,d);case 3:return parseNumericPattern(numericPatterns.threeDigits,d);case 4:return parseNumericPattern(numericPatterns.fourDigits,d);default:return parseNumericPattern(new RegExp("^\\d{1,"+c+"}"),d)}}function parseNDigitsSigned(c,d){switch(c){case 1:return parseNumericPattern(numericPatterns.singleDigitSigned,d);case 2:return parseNumericPattern(numericPatterns.twoDigitsSigned,d);case 3:return parseNumericPattern(numericPatterns.threeDigitsSigned,d);case 4:return parseNumericPattern(numericPatterns.fourDigitsSigned,d);default:return parseNumericPattern(new RegExp("^-?\\d{1,"+c+"}"),d)}}function dayPeriodEnumToHours(c){switch(c){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function normalizeTwoDigitYear(c,d){var g=d>0,v=g?d:1-d,b;if(v<=50)b=c||100;else{var _=v+50,E=Math.floor(_/100)*100,R=c>=_%100;b=c+E-(R?100:0)}return g?b:1-b}function isLeapYearIndex$1(c){return c%400===0||c%4===0&&c%100!==0}function _typeof$v(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$v=function(g){return typeof g}:_typeof$v=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$v(c)}function _classCallCheck$t(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$t(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$t(c,d,g){return d&&_defineProperties$t(c.prototype,d),g&&_defineProperties$t(c,g),c}function _inherits$t(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$u(c,d)}function _setPrototypeOf$u(c,d){return _setPrototypeOf$u=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$u(c,d)}function _createSuper$t(c){var d=_isNativeReflectConstruct$u();return function(){var v=_getPrototypeOf$t(c),b;if(d){var _=_getPrototypeOf$t(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$t(this,b)}}function _possibleConstructorReturn$t(c,d){return d&&(_typeof$v(d)==="object"||typeof d=="function")?d:_assertThisInitialized$t(c)}function _assertThisInitialized$t(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$t(c){return _getPrototypeOf$t=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$t(c)}function _defineProperty$t(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var YearParser=function(c){_inherits$t(g,c);var d=_createSuper$t(g);function g(){var v;_classCallCheck$t(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$t(_assertThisInitialized$t(v),"priority",130),_defineProperty$t(_assertThisInitialized$t(v),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),v}return _createClass$t(g,[{key:"parse",value:function(b,_,E){var R=function(P){return{year:P,isTwoDigitYear:_==="yy"}};switch(_){case"y":return mapValue(parseNDigits(4,b),R);case"yo":return mapValue(E.ordinalNumber(b,{unit:"year"}),R);default:return mapValue(parseNDigits(_.length,b),R)}}},{key:"validate",value:function(b,_){return _.isTwoDigitYear||_.year>0}},{key:"set",value:function(b,_,E){var R=b.getUTCFullYear();if(E.isTwoDigitYear){var M=normalizeTwoDigitYear(E.year,R);return b.setUTCFullYear(M,0,1),b.setUTCHours(0,0,0,0),b}var P=!("era"in _)||_.era===1?E.year:1-E.year;return b.setUTCFullYear(P,0,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$u(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$u=function(g){return typeof g}:_typeof$u=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$u(c)}function _classCallCheck$s(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$s(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$s(c,d,g){return d&&_defineProperties$s(c.prototype,d),g&&_defineProperties$s(c,g),c}function _inherits$s(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$t(c,d)}function _setPrototypeOf$t(c,d){return _setPrototypeOf$t=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$t(c,d)}function _createSuper$s(c){var d=_isNativeReflectConstruct$t();return function(){var v=_getPrototypeOf$s(c),b;if(d){var _=_getPrototypeOf$s(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$s(this,b)}}function _possibleConstructorReturn$s(c,d){return d&&(_typeof$u(d)==="object"||typeof d=="function")?d:_assertThisInitialized$s(c)}function _assertThisInitialized$s(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$s(c){return _getPrototypeOf$s=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$s(c)}function _defineProperty$s(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var LocalWeekYearParser=function(c){_inherits$s(g,c);var d=_createSuper$s(g);function g(){var v;_classCallCheck$s(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$s(_assertThisInitialized$s(v),"priority",130),_defineProperty$s(_assertThisInitialized$s(v),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),v}return _createClass$s(g,[{key:"parse",value:function(b,_,E){var R=function(P){return{year:P,isTwoDigitYear:_==="YY"}};switch(_){case"Y":return mapValue(parseNDigits(4,b),R);case"Yo":return mapValue(E.ordinalNumber(b,{unit:"year"}),R);default:return mapValue(parseNDigits(_.length,b),R)}}},{key:"validate",value:function(b,_){return _.isTwoDigitYear||_.year>0}},{key:"set",value:function(b,_,E,R){var M=getUTCWeekYear(b,R);if(E.isTwoDigitYear){var P=normalizeTwoDigitYear(E.year,M);return b.setUTCFullYear(P,0,R.firstWeekContainsDate),b.setUTCHours(0,0,0,0),startOfUTCWeek(b,R)}var O=!("era"in _)||_.era===1?E.year:1-E.year;return b.setUTCFullYear(O,0,R.firstWeekContainsDate),b.setUTCHours(0,0,0,0),startOfUTCWeek(b,R)}}]),g}(Parser);function _typeof$t(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$t=function(g){return typeof g}:_typeof$t=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$t(c)}function _classCallCheck$r(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$r(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$r(c,d,g){return d&&_defineProperties$r(c.prototype,d),g&&_defineProperties$r(c,g),c}function _inherits$r(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$s(c,d)}function _setPrototypeOf$s(c,d){return _setPrototypeOf$s=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$s(c,d)}function _createSuper$r(c){var d=_isNativeReflectConstruct$s();return function(){var v=_getPrototypeOf$r(c),b;if(d){var _=_getPrototypeOf$r(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$r(this,b)}}function _possibleConstructorReturn$r(c,d){return d&&(_typeof$t(d)==="object"||typeof d=="function")?d:_assertThisInitialized$r(c)}function _assertThisInitialized$r(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$r(c){return _getPrototypeOf$r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$r(c)}function _defineProperty$r(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var ISOWeekYearParser=function(c){_inherits$r(g,c);var d=_createSuper$r(g);function g(){var v;_classCallCheck$r(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$r(_assertThisInitialized$r(v),"priority",130),_defineProperty$r(_assertThisInitialized$r(v),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),v}return _createClass$r(g,[{key:"parse",value:function(b,_){return parseNDigitsSigned(_==="R"?4:_.length,b)}},{key:"set",value:function(b,_,E){var R=new Date(0);return R.setUTCFullYear(E,0,4),R.setUTCHours(0,0,0,0),startOfUTCISOWeek(R)}}]),g}(Parser);function _typeof$s(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$s=function(g){return typeof g}:_typeof$s=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$s(c)}function _classCallCheck$q(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$q(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$q(c,d,g){return d&&_defineProperties$q(c.prototype,d),g&&_defineProperties$q(c,g),c}function _inherits$q(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$r(c,d)}function _setPrototypeOf$r(c,d){return _setPrototypeOf$r=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$r(c,d)}function _createSuper$q(c){var d=_isNativeReflectConstruct$r();return function(){var v=_getPrototypeOf$q(c),b;if(d){var _=_getPrototypeOf$q(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$q(this,b)}}function _possibleConstructorReturn$q(c,d){return d&&(_typeof$s(d)==="object"||typeof d=="function")?d:_assertThisInitialized$q(c)}function _assertThisInitialized$q(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$q(c){return _getPrototypeOf$q=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$q(c)}function _defineProperty$q(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var ExtendedYearParser=function(c){_inherits$q(g,c);var d=_createSuper$q(g);function g(){var v;_classCallCheck$q(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$q(_assertThisInitialized$q(v),"priority",130),_defineProperty$q(_assertThisInitialized$q(v),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),v}return _createClass$q(g,[{key:"parse",value:function(b,_){return parseNDigitsSigned(_==="u"?4:_.length,b)}},{key:"set",value:function(b,_,E){return b.setUTCFullYear(E,0,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$r(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$r=function(g){return typeof g}:_typeof$r=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$r(c)}function _classCallCheck$p(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$p(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$p(c,d,g){return d&&_defineProperties$p(c.prototype,d),g&&_defineProperties$p(c,g),c}function _inherits$p(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$q(c,d)}function _setPrototypeOf$q(c,d){return _setPrototypeOf$q=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$q(c,d)}function _createSuper$p(c){var d=_isNativeReflectConstruct$q();return function(){var v=_getPrototypeOf$p(c),b;if(d){var _=_getPrototypeOf$p(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$p(this,b)}}function _possibleConstructorReturn$p(c,d){return d&&(_typeof$r(d)==="object"||typeof d=="function")?d:_assertThisInitialized$p(c)}function _assertThisInitialized$p(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$p(c){return _getPrototypeOf$p=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$p(c)}function _defineProperty$p(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var QuarterParser=function(c){_inherits$p(g,c);var d=_createSuper$p(g);function g(){var v;_classCallCheck$p(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$p(_assertThisInitialized$p(v),"priority",120),_defineProperty$p(_assertThisInitialized$p(v),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),v}return _createClass$p(g,[{key:"parse",value:function(b,_,E){switch(_){case"Q":case"QQ":return parseNDigits(_.length,b);case"Qo":return E.ordinalNumber(b,{unit:"quarter"});case"QQQ":return E.quarter(b,{width:"abbreviated",context:"formatting"})||E.quarter(b,{width:"narrow",context:"formatting"});case"QQQQQ":return E.quarter(b,{width:"narrow",context:"formatting"});case"QQQQ":default:return E.quarter(b,{width:"wide",context:"formatting"})||E.quarter(b,{width:"abbreviated",context:"formatting"})||E.quarter(b,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(b,_){return _>=1&&_<=4}},{key:"set",value:function(b,_,E){return b.setUTCMonth((E-1)*3,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$q(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$q=function(g){return typeof g}:_typeof$q=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$q(c)}function _classCallCheck$o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$o(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$o(c,d,g){return d&&_defineProperties$o(c.prototype,d),g&&_defineProperties$o(c,g),c}function _inherits$o(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$p(c,d)}function _setPrototypeOf$p(c,d){return _setPrototypeOf$p=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$p(c,d)}function _createSuper$o(c){var d=_isNativeReflectConstruct$p();return function(){var v=_getPrototypeOf$o(c),b;if(d){var _=_getPrototypeOf$o(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$o(this,b)}}function _possibleConstructorReturn$o(c,d){return d&&(_typeof$q(d)==="object"||typeof d=="function")?d:_assertThisInitialized$o(c)}function _assertThisInitialized$o(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$o(c){return _getPrototypeOf$o=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$o(c)}function _defineProperty$o(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var StandAloneQuarterParser=function(c){_inherits$o(g,c);var d=_createSuper$o(g);function g(){var v;_classCallCheck$o(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$o(_assertThisInitialized$o(v),"priority",120),_defineProperty$o(_assertThisInitialized$o(v),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),v}return _createClass$o(g,[{key:"parse",value:function(b,_,E){switch(_){case"q":case"qq":return parseNDigits(_.length,b);case"qo":return E.ordinalNumber(b,{unit:"quarter"});case"qqq":return E.quarter(b,{width:"abbreviated",context:"standalone"})||E.quarter(b,{width:"narrow",context:"standalone"});case"qqqqq":return E.quarter(b,{width:"narrow",context:"standalone"});case"qqqq":default:return E.quarter(b,{width:"wide",context:"standalone"})||E.quarter(b,{width:"abbreviated",context:"standalone"})||E.quarter(b,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(b,_){return _>=1&&_<=4}},{key:"set",value:function(b,_,E){return b.setUTCMonth((E-1)*3,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$p(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$p=function(g){return typeof g}:_typeof$p=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$p(c)}function _classCallCheck$n(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$n(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$n(c,d,g){return d&&_defineProperties$n(c.prototype,d),g&&_defineProperties$n(c,g),c}function _inherits$n(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$o(c,d)}function _setPrototypeOf$o(c,d){return _setPrototypeOf$o=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$o(c,d)}function _createSuper$n(c){var d=_isNativeReflectConstruct$o();return function(){var v=_getPrototypeOf$n(c),b;if(d){var _=_getPrototypeOf$n(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$n(this,b)}}function _possibleConstructorReturn$n(c,d){return d&&(_typeof$p(d)==="object"||typeof d=="function")?d:_assertThisInitialized$n(c)}function _assertThisInitialized$n(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$n(c){return _getPrototypeOf$n=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$n(c)}function _defineProperty$n(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var MonthParser=function(c){_inherits$n(g,c);var d=_createSuper$n(g);function g(){var v;_classCallCheck$n(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$n(_assertThisInitialized$n(v),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),_defineProperty$n(_assertThisInitialized$n(v),"priority",110),v}return _createClass$n(g,[{key:"parse",value:function(b,_,E){var R=function(P){return P-1};switch(_){case"M":return mapValue(parseNumericPattern(numericPatterns.month,b),R);case"MM":return mapValue(parseNDigits(2,b),R);case"Mo":return mapValue(E.ordinalNumber(b,{unit:"month"}),R);case"MMM":return E.month(b,{width:"abbreviated",context:"formatting"})||E.month(b,{width:"narrow",context:"formatting"});case"MMMMM":return E.month(b,{width:"narrow",context:"formatting"});case"MMMM":default:return E.month(b,{width:"wide",context:"formatting"})||E.month(b,{width:"abbreviated",context:"formatting"})||E.month(b,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(b,_){return _>=0&&_<=11}},{key:"set",value:function(b,_,E){return b.setUTCMonth(E,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$o(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$o=function(g){return typeof g}:_typeof$o=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$o(c)}function _classCallCheck$m(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$m(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$m(c,d,g){return d&&_defineProperties$m(c.prototype,d),g&&_defineProperties$m(c,g),c}function _inherits$m(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$n(c,d)}function _setPrototypeOf$n(c,d){return _setPrototypeOf$n=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$n(c,d)}function _createSuper$m(c){var d=_isNativeReflectConstruct$n();return function(){var v=_getPrototypeOf$m(c),b;if(d){var _=_getPrototypeOf$m(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$m(this,b)}}function _possibleConstructorReturn$m(c,d){return d&&(_typeof$o(d)==="object"||typeof d=="function")?d:_assertThisInitialized$m(c)}function _assertThisInitialized$m(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$n(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$m(c){return _getPrototypeOf$m=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$m(c)}function _defineProperty$m(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var StandAloneMonthParser=function(c){_inherits$m(g,c);var d=_createSuper$m(g);function g(){var v;_classCallCheck$m(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$m(_assertThisInitialized$m(v),"priority",110),_defineProperty$m(_assertThisInitialized$m(v),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),v}return _createClass$m(g,[{key:"parse",value:function(b,_,E){var R=function(P){return P-1};switch(_){case"L":return mapValue(parseNumericPattern(numericPatterns.month,b),R);case"LL":return mapValue(parseNDigits(2,b),R);case"Lo":return mapValue(E.ordinalNumber(b,{unit:"month"}),R);case"LLL":return E.month(b,{width:"abbreviated",context:"standalone"})||E.month(b,{width:"narrow",context:"standalone"});case"LLLLL":return E.month(b,{width:"narrow",context:"standalone"});case"LLLL":default:return E.month(b,{width:"wide",context:"standalone"})||E.month(b,{width:"abbreviated",context:"standalone"})||E.month(b,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(b,_){return _>=0&&_<=11}},{key:"set",value:function(b,_,E){return b.setUTCMonth(E,1),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function setUTCWeek(c,d,g){requiredArgs(2,arguments);var v=toDate(c),b=toInteger(d),_=getUTCWeek(v,g)-b;return v.setUTCDate(v.getUTCDate()-_*7),v}function _typeof$n(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$n=function(g){return typeof g}:_typeof$n=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$n(c)}function _classCallCheck$l(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$l(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$l(c,d,g){return d&&_defineProperties$l(c.prototype,d),g&&_defineProperties$l(c,g),c}function _inherits$l(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$m(c,d)}function _setPrototypeOf$m(c,d){return _setPrototypeOf$m=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$m(c,d)}function _createSuper$l(c){var d=_isNativeReflectConstruct$m();return function(){var v=_getPrototypeOf$l(c),b;if(d){var _=_getPrototypeOf$l(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$l(this,b)}}function _possibleConstructorReturn$l(c,d){return d&&(_typeof$n(d)==="object"||typeof d=="function")?d:_assertThisInitialized$l(c)}function _assertThisInitialized$l(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$l(c){return _getPrototypeOf$l=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$l(c)}function _defineProperty$l(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var LocalWeekParser=function(c){_inherits$l(g,c);var d=_createSuper$l(g);function g(){var v;_classCallCheck$l(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$l(_assertThisInitialized$l(v),"priority",100),_defineProperty$l(_assertThisInitialized$l(v),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),v}return _createClass$l(g,[{key:"parse",value:function(b,_,E){switch(_){case"w":return parseNumericPattern(numericPatterns.week,b);case"wo":return E.ordinalNumber(b,{unit:"week"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=1&&_<=53}},{key:"set",value:function(b,_,E,R){return startOfUTCWeek(setUTCWeek(b,E,R),R)}}]),g}(Parser);function setUTCISOWeek(c,d){requiredArgs(2,arguments);var g=toDate(c),v=toInteger(d),b=getUTCISOWeek(g)-v;return g.setUTCDate(g.getUTCDate()-b*7),g}function _typeof$m(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$m=function(g){return typeof g}:_typeof$m=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$m(c)}function _classCallCheck$k(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$k(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$k(c,d,g){return d&&_defineProperties$k(c.prototype,d),g&&_defineProperties$k(c,g),c}function _inherits$k(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$l(c,d)}function _setPrototypeOf$l(c,d){return _setPrototypeOf$l=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$l(c,d)}function _createSuper$k(c){var d=_isNativeReflectConstruct$l();return function(){var v=_getPrototypeOf$k(c),b;if(d){var _=_getPrototypeOf$k(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$k(this,b)}}function _possibleConstructorReturn$k(c,d){return d&&(_typeof$m(d)==="object"||typeof d=="function")?d:_assertThisInitialized$k(c)}function _assertThisInitialized$k(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$k(c){return _getPrototypeOf$k=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$k(c)}function _defineProperty$k(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var ISOWeekParser=function(c){_inherits$k(g,c);var d=_createSuper$k(g);function g(){var v;_classCallCheck$k(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$k(_assertThisInitialized$k(v),"priority",100),_defineProperty$k(_assertThisInitialized$k(v),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),v}return _createClass$k(g,[{key:"parse",value:function(b,_,E){switch(_){case"I":return parseNumericPattern(numericPatterns.week,b);case"Io":return E.ordinalNumber(b,{unit:"week"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=1&&_<=53}},{key:"set",value:function(b,_,E){return startOfUTCISOWeek(setUTCISOWeek(b,E))}}]),g}(Parser);function _typeof$l(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$l=function(g){return typeof g}:_typeof$l=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$l(c)}function _classCallCheck$j(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$j(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$j(c,d,g){return d&&_defineProperties$j(c.prototype,d),g&&_defineProperties$j(c,g),c}function _inherits$j(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$k(c,d)}function _setPrototypeOf$k(c,d){return _setPrototypeOf$k=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$k(c,d)}function _createSuper$j(c){var d=_isNativeReflectConstruct$k();return function(){var v=_getPrototypeOf$j(c),b;if(d){var _=_getPrototypeOf$j(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$j(this,b)}}function _possibleConstructorReturn$j(c,d){return d&&(_typeof$l(d)==="object"||typeof d=="function")?d:_assertThisInitialized$j(c)}function _assertThisInitialized$j(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$j(c){return _getPrototypeOf$j=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$j(c)}function _defineProperty$j(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31],DateParser=function(c){_inherits$j(g,c);var d=_createSuper$j(g);function g(){var v;_classCallCheck$j(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$j(_assertThisInitialized$j(v),"priority",90),_defineProperty$j(_assertThisInitialized$j(v),"subPriority",1),_defineProperty$j(_assertThisInitialized$j(v),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),v}return _createClass$j(g,[{key:"parse",value:function(b,_,E){switch(_){case"d":return parseNumericPattern(numericPatterns.date,b);case"do":return E.ordinalNumber(b,{unit:"date"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){var E=b.getUTCFullYear(),R=isLeapYearIndex$1(E),M=b.getUTCMonth();return R?_>=1&&_<=DAYS_IN_MONTH_LEAP_YEAR[M]:_>=1&&_<=DAYS_IN_MONTH[M]}},{key:"set",value:function(b,_,E){return b.setUTCDate(E),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$k(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$k=function(g){return typeof g}:_typeof$k=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$k(c)}function _classCallCheck$i(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$i(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$i(c,d,g){return d&&_defineProperties$i(c.prototype,d),g&&_defineProperties$i(c,g),c}function _inherits$i(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$j(c,d)}function _setPrototypeOf$j(c,d){return _setPrototypeOf$j=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$j(c,d)}function _createSuper$i(c){var d=_isNativeReflectConstruct$j();return function(){var v=_getPrototypeOf$i(c),b;if(d){var _=_getPrototypeOf$i(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$i(this,b)}}function _possibleConstructorReturn$i(c,d){return d&&(_typeof$k(d)==="object"||typeof d=="function")?d:_assertThisInitialized$i(c)}function _assertThisInitialized$i(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$j(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$i(c){return _getPrototypeOf$i=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$i(c)}function _defineProperty$i(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var DayOfYearParser=function(c){_inherits$i(g,c);var d=_createSuper$i(g);function g(){var v;_classCallCheck$i(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$i(_assertThisInitialized$i(v),"priority",90),_defineProperty$i(_assertThisInitialized$i(v),"subpriority",1),_defineProperty$i(_assertThisInitialized$i(v),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),v}return _createClass$i(g,[{key:"parse",value:function(b,_,E){switch(_){case"D":case"DD":return parseNumericPattern(numericPatterns.dayOfYear,b);case"Do":return E.ordinalNumber(b,{unit:"date"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){var E=b.getUTCFullYear(),R=isLeapYearIndex$1(E);return R?_>=1&&_<=366:_>=1&&_<=365}},{key:"set",value:function(b,_,E){return b.setUTCMonth(0,E),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function setUTCDay(c,d,g){var v,b,_,E,R,M,P,O;requiredArgs(2,arguments);var H=getDefaultOptions(),Q=toInteger((v=(b=(_=(E=g==null?void 0:g.weekStartsOn)!==null&&E!==void 0?E:g==null||(R=g.locale)===null||R===void 0||(M=R.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&_!==void 0?_:H.weekStartsOn)!==null&&b!==void 0?b:(P=H.locale)===null||P===void 0||(O=P.options)===null||O===void 0?void 0:O.weekStartsOn)!==null&&v!==void 0?v:0);if(!(Q>=0&&Q<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var ee=toDate(c),V=toInteger(d),W=ee.getUTCDay(),Y=V%7,U=(Y+7)%7,G=(U<Q?7:0)+V-W;return ee.setUTCDate(ee.getUTCDate()+G),ee}function _typeof$j(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$j=function(g){return typeof g}:_typeof$j=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$j(c)}function _classCallCheck$h(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$h(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$h(c,d,g){return d&&_defineProperties$h(c.prototype,d),g&&_defineProperties$h(c,g),c}function _inherits$h(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$i(c,d)}function _setPrototypeOf$i(c,d){return _setPrototypeOf$i=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$i(c,d)}function _createSuper$h(c){var d=_isNativeReflectConstruct$i();return function(){var v=_getPrototypeOf$h(c),b;if(d){var _=_getPrototypeOf$h(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$h(this,b)}}function _possibleConstructorReturn$h(c,d){return d&&(_typeof$j(d)==="object"||typeof d=="function")?d:_assertThisInitialized$h(c)}function _assertThisInitialized$h(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$i(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$h(c){return _getPrototypeOf$h=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$h(c)}function _defineProperty$h(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var DayParser=function(c){_inherits$h(g,c);var d=_createSuper$h(g);function g(){var v;_classCallCheck$h(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$h(_assertThisInitialized$h(v),"priority",90),_defineProperty$h(_assertThisInitialized$h(v),"incompatibleTokens",["D","i","e","c","t","T"]),v}return _createClass$h(g,[{key:"parse",value:function(b,_,E){switch(_){case"E":case"EE":case"EEE":return E.day(b,{width:"abbreviated",context:"formatting"})||E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"});case"EEEEE":return E.day(b,{width:"narrow",context:"formatting"});case"EEEEEE":return E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"});case"EEEE":default:return E.day(b,{width:"wide",context:"formatting"})||E.day(b,{width:"abbreviated",context:"formatting"})||E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(b,_){return _>=0&&_<=6}},{key:"set",value:function(b,_,E,R){return b=setUTCDay(b,E,R),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$i(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$i=function(g){return typeof g}:_typeof$i=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$i(c)}function _classCallCheck$g(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$g(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$g(c,d,g){return d&&_defineProperties$g(c.prototype,d),g&&_defineProperties$g(c,g),c}function _inherits$g(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$h(c,d)}function _setPrototypeOf$h(c,d){return _setPrototypeOf$h=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$h(c,d)}function _createSuper$g(c){var d=_isNativeReflectConstruct$h();return function(){var v=_getPrototypeOf$g(c),b;if(d){var _=_getPrototypeOf$g(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$g(this,b)}}function _possibleConstructorReturn$g(c,d){return d&&(_typeof$i(d)==="object"||typeof d=="function")?d:_assertThisInitialized$g(c)}function _assertThisInitialized$g(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$g(c){return _getPrototypeOf$g=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$g(c)}function _defineProperty$g(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var LocalDayParser=function(c){_inherits$g(g,c);var d=_createSuper$g(g);function g(){var v;_classCallCheck$g(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$g(_assertThisInitialized$g(v),"priority",90),_defineProperty$g(_assertThisInitialized$g(v),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),v}return _createClass$g(g,[{key:"parse",value:function(b,_,E,R){var M=function(O){var H=Math.floor((O-1)/7)*7;return(O+R.weekStartsOn+6)%7+H};switch(_){case"e":case"ee":return mapValue(parseNDigits(_.length,b),M);case"eo":return mapValue(E.ordinalNumber(b,{unit:"day"}),M);case"eee":return E.day(b,{width:"abbreviated",context:"formatting"})||E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"});case"eeeee":return E.day(b,{width:"narrow",context:"formatting"});case"eeeeee":return E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"});case"eeee":default:return E.day(b,{width:"wide",context:"formatting"})||E.day(b,{width:"abbreviated",context:"formatting"})||E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(b,_){return _>=0&&_<=6}},{key:"set",value:function(b,_,E,R){return b=setUTCDay(b,E,R),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$h(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$h=function(g){return typeof g}:_typeof$h=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$h(c)}function _classCallCheck$f(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$f(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$f(c,d,g){return d&&_defineProperties$f(c.prototype,d),g&&_defineProperties$f(c,g),c}function _inherits$f(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$g(c,d)}function _setPrototypeOf$g(c,d){return _setPrototypeOf$g=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$g(c,d)}function _createSuper$f(c){var d=_isNativeReflectConstruct$g();return function(){var v=_getPrototypeOf$f(c),b;if(d){var _=_getPrototypeOf$f(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$f(this,b)}}function _possibleConstructorReturn$f(c,d){return d&&(_typeof$h(d)==="object"||typeof d=="function")?d:_assertThisInitialized$f(c)}function _assertThisInitialized$f(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$f(c){return _getPrototypeOf$f=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$f(c)}function _defineProperty$f(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var StandAloneLocalDayParser=function(c){_inherits$f(g,c);var d=_createSuper$f(g);function g(){var v;_classCallCheck$f(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$f(_assertThisInitialized$f(v),"priority",90),_defineProperty$f(_assertThisInitialized$f(v),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),v}return _createClass$f(g,[{key:"parse",value:function(b,_,E,R){var M=function(O){var H=Math.floor((O-1)/7)*7;return(O+R.weekStartsOn+6)%7+H};switch(_){case"c":case"cc":return mapValue(parseNDigits(_.length,b),M);case"co":return mapValue(E.ordinalNumber(b,{unit:"day"}),M);case"ccc":return E.day(b,{width:"abbreviated",context:"standalone"})||E.day(b,{width:"short",context:"standalone"})||E.day(b,{width:"narrow",context:"standalone"});case"ccccc":return E.day(b,{width:"narrow",context:"standalone"});case"cccccc":return E.day(b,{width:"short",context:"standalone"})||E.day(b,{width:"narrow",context:"standalone"});case"cccc":default:return E.day(b,{width:"wide",context:"standalone"})||E.day(b,{width:"abbreviated",context:"standalone"})||E.day(b,{width:"short",context:"standalone"})||E.day(b,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(b,_){return _>=0&&_<=6}},{key:"set",value:function(b,_,E,R){return b=setUTCDay(b,E,R),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function setUTCISODay(c,d){requiredArgs(2,arguments);var g=toInteger(d);g%7===0&&(g=g-7);var v=1,b=toDate(c),_=b.getUTCDay(),E=g%7,R=(E+7)%7,M=(R<v?7:0)+g-_;return b.setUTCDate(b.getUTCDate()+M),b}function _typeof$g(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$g=function(g){return typeof g}:_typeof$g=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$g(c)}function _classCallCheck$e(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$e(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$e(c,d,g){return d&&_defineProperties$e(c.prototype,d),g&&_defineProperties$e(c,g),c}function _inherits$e(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$f(c,d)}function _setPrototypeOf$f(c,d){return _setPrototypeOf$f=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$f(c,d)}function _createSuper$e(c){var d=_isNativeReflectConstruct$f();return function(){var v=_getPrototypeOf$e(c),b;if(d){var _=_getPrototypeOf$e(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$e(this,b)}}function _possibleConstructorReturn$e(c,d){return d&&(_typeof$g(d)==="object"||typeof d=="function")?d:_assertThisInitialized$e(c)}function _assertThisInitialized$e(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$e(c){return _getPrototypeOf$e=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$e(c)}function _defineProperty$e(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var ISODayParser=function(c){_inherits$e(g,c);var d=_createSuper$e(g);function g(){var v;_classCallCheck$e(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$e(_assertThisInitialized$e(v),"priority",90),_defineProperty$e(_assertThisInitialized$e(v),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),v}return _createClass$e(g,[{key:"parse",value:function(b,_,E){var R=function(P){return P===0?7:P};switch(_){case"i":case"ii":return parseNDigits(_.length,b);case"io":return E.ordinalNumber(b,{unit:"day"});case"iii":return mapValue(E.day(b,{width:"abbreviated",context:"formatting"})||E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"}),R);case"iiiii":return mapValue(E.day(b,{width:"narrow",context:"formatting"}),R);case"iiiiii":return mapValue(E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"}),R);case"iiii":default:return mapValue(E.day(b,{width:"wide",context:"formatting"})||E.day(b,{width:"abbreviated",context:"formatting"})||E.day(b,{width:"short",context:"formatting"})||E.day(b,{width:"narrow",context:"formatting"}),R)}}},{key:"validate",value:function(b,_){return _>=1&&_<=7}},{key:"set",value:function(b,_,E){return b=setUTCISODay(b,E),b.setUTCHours(0,0,0,0),b}}]),g}(Parser);function _typeof$f(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$f=function(g){return typeof g}:_typeof$f=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$f(c)}function _classCallCheck$d(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$d(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$d(c,d,g){return d&&_defineProperties$d(c.prototype,d),g&&_defineProperties$d(c,g),c}function _inherits$d(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$e(c,d)}function _setPrototypeOf$e(c,d){return _setPrototypeOf$e=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$e(c,d)}function _createSuper$d(c){var d=_isNativeReflectConstruct$e();return function(){var v=_getPrototypeOf$d(c),b;if(d){var _=_getPrototypeOf$d(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$d(this,b)}}function _possibleConstructorReturn$d(c,d){return d&&(_typeof$f(d)==="object"||typeof d=="function")?d:_assertThisInitialized$d(c)}function _assertThisInitialized$d(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$d(c){return _getPrototypeOf$d=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$d(c)}function _defineProperty$d(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var AMPMParser=function(c){_inherits$d(g,c);var d=_createSuper$d(g);function g(){var v;_classCallCheck$d(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$d(_assertThisInitialized$d(v),"priority",80),_defineProperty$d(_assertThisInitialized$d(v),"incompatibleTokens",["b","B","H","k","t","T"]),v}return _createClass$d(g,[{key:"parse",value:function(b,_,E){switch(_){case"a":case"aa":case"aaa":return E.dayPeriod(b,{width:"abbreviated",context:"formatting"})||E.dayPeriod(b,{width:"narrow",context:"formatting"});case"aaaaa":return E.dayPeriod(b,{width:"narrow",context:"formatting"});case"aaaa":default:return E.dayPeriod(b,{width:"wide",context:"formatting"})||E.dayPeriod(b,{width:"abbreviated",context:"formatting"})||E.dayPeriod(b,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(b,_,E){return b.setUTCHours(dayPeriodEnumToHours(E),0,0,0),b}}]),g}(Parser);function _typeof$e(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$e=function(g){return typeof g}:_typeof$e=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$e(c)}function _classCallCheck$c(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$c(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$c(c,d,g){return d&&_defineProperties$c(c.prototype,d),g&&_defineProperties$c(c,g),c}function _inherits$c(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$d(c,d)}function _setPrototypeOf$d(c,d){return _setPrototypeOf$d=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$d(c,d)}function _createSuper$c(c){var d=_isNativeReflectConstruct$d();return function(){var v=_getPrototypeOf$c(c),b;if(d){var _=_getPrototypeOf$c(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$c(this,b)}}function _possibleConstructorReturn$c(c,d){return d&&(_typeof$e(d)==="object"||typeof d=="function")?d:_assertThisInitialized$c(c)}function _assertThisInitialized$c(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$c(c){return _getPrototypeOf$c=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$c(c)}function _defineProperty$c(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var AMPMMidnightParser=function(c){_inherits$c(g,c);var d=_createSuper$c(g);function g(){var v;_classCallCheck$c(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$c(_assertThisInitialized$c(v),"priority",80),_defineProperty$c(_assertThisInitialized$c(v),"incompatibleTokens",["a","B","H","k","t","T"]),v}return _createClass$c(g,[{key:"parse",value:function(b,_,E){switch(_){case"b":case"bb":case"bbb":return E.dayPeriod(b,{width:"abbreviated",context:"formatting"})||E.dayPeriod(b,{width:"narrow",context:"formatting"});case"bbbbb":return E.dayPeriod(b,{width:"narrow",context:"formatting"});case"bbbb":default:return E.dayPeriod(b,{width:"wide",context:"formatting"})||E.dayPeriod(b,{width:"abbreviated",context:"formatting"})||E.dayPeriod(b,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(b,_,E){return b.setUTCHours(dayPeriodEnumToHours(E),0,0,0),b}}]),g}(Parser);function _typeof$d(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$d=function(g){return typeof g}:_typeof$d=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$d(c)}function _classCallCheck$b(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$b(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$b(c,d,g){return d&&_defineProperties$b(c.prototype,d),g&&_defineProperties$b(c,g),c}function _inherits$b(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$c(c,d)}function _setPrototypeOf$c(c,d){return _setPrototypeOf$c=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$c(c,d)}function _createSuper$b(c){var d=_isNativeReflectConstruct$c();return function(){var v=_getPrototypeOf$b(c),b;if(d){var _=_getPrototypeOf$b(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$b(this,b)}}function _possibleConstructorReturn$b(c,d){return d&&(_typeof$d(d)==="object"||typeof d=="function")?d:_assertThisInitialized$b(c)}function _assertThisInitialized$b(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$b(c){return _getPrototypeOf$b=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$b(c)}function _defineProperty$b(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var DayPeriodParser=function(c){_inherits$b(g,c);var d=_createSuper$b(g);function g(){var v;_classCallCheck$b(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$b(_assertThisInitialized$b(v),"priority",80),_defineProperty$b(_assertThisInitialized$b(v),"incompatibleTokens",["a","b","t","T"]),v}return _createClass$b(g,[{key:"parse",value:function(b,_,E){switch(_){case"B":case"BB":case"BBB":return E.dayPeriod(b,{width:"abbreviated",context:"formatting"})||E.dayPeriod(b,{width:"narrow",context:"formatting"});case"BBBBB":return E.dayPeriod(b,{width:"narrow",context:"formatting"});case"BBBB":default:return E.dayPeriod(b,{width:"wide",context:"formatting"})||E.dayPeriod(b,{width:"abbreviated",context:"formatting"})||E.dayPeriod(b,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(b,_,E){return b.setUTCHours(dayPeriodEnumToHours(E),0,0,0),b}}]),g}(Parser);function _typeof$c(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$c=function(g){return typeof g}:_typeof$c=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$c(c)}function _classCallCheck$a(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$a(c,d,g){return d&&_defineProperties$a(c.prototype,d),g&&_defineProperties$a(c,g),c}function _inherits$a(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$b(c,d)}function _setPrototypeOf$b(c,d){return _setPrototypeOf$b=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$b(c,d)}function _createSuper$a(c){var d=_isNativeReflectConstruct$b();return function(){var v=_getPrototypeOf$a(c),b;if(d){var _=_getPrototypeOf$a(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$a(this,b)}}function _possibleConstructorReturn$a(c,d){return d&&(_typeof$c(d)==="object"||typeof d=="function")?d:_assertThisInitialized$a(c)}function _assertThisInitialized$a(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$a(c){return _getPrototypeOf$a=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$a(c)}function _defineProperty$a(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var Hour1to12Parser=function(c){_inherits$a(g,c);var d=_createSuper$a(g);function g(){var v;_classCallCheck$a(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$a(_assertThisInitialized$a(v),"priority",70),_defineProperty$a(_assertThisInitialized$a(v),"incompatibleTokens",["H","K","k","t","T"]),v}return _createClass$a(g,[{key:"parse",value:function(b,_,E){switch(_){case"h":return parseNumericPattern(numericPatterns.hour12h,b);case"ho":return E.ordinalNumber(b,{unit:"hour"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=1&&_<=12}},{key:"set",value:function(b,_,E){var R=b.getUTCHours()>=12;return R&&E<12?b.setUTCHours(E+12,0,0,0):!R&&E===12?b.setUTCHours(0,0,0,0):b.setUTCHours(E,0,0,0),b}}]),g}(Parser);function _typeof$b(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$b=function(g){return typeof g}:_typeof$b=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$b(c)}function _classCallCheck$9(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$9(c,d,g){return d&&_defineProperties$9(c.prototype,d),g&&_defineProperties$9(c,g),c}function _inherits$9(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$a(c,d)}function _setPrototypeOf$a(c,d){return _setPrototypeOf$a=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$a(c,d)}function _createSuper$9(c){var d=_isNativeReflectConstruct$a();return function(){var v=_getPrototypeOf$9(c),b;if(d){var _=_getPrototypeOf$9(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$9(this,b)}}function _possibleConstructorReturn$9(c,d){return d&&(_typeof$b(d)==="object"||typeof d=="function")?d:_assertThisInitialized$9(c)}function _assertThisInitialized$9(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$a(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$9(c){return _getPrototypeOf$9=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$9(c)}function _defineProperty$9(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var Hour0to23Parser=function(c){_inherits$9(g,c);var d=_createSuper$9(g);function g(){var v;_classCallCheck$9(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$9(_assertThisInitialized$9(v),"priority",70),_defineProperty$9(_assertThisInitialized$9(v),"incompatibleTokens",["a","b","h","K","k","t","T"]),v}return _createClass$9(g,[{key:"parse",value:function(b,_,E){switch(_){case"H":return parseNumericPattern(numericPatterns.hour23h,b);case"Ho":return E.ordinalNumber(b,{unit:"hour"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=0&&_<=23}},{key:"set",value:function(b,_,E){return b.setUTCHours(E,0,0,0),b}}]),g}(Parser);function _typeof$a(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$a=function(g){return typeof g}:_typeof$a=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$a(c)}function _classCallCheck$8(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$8(c,d,g){return d&&_defineProperties$8(c.prototype,d),g&&_defineProperties$8(c,g),c}function _inherits$8(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$9(c,d)}function _setPrototypeOf$9(c,d){return _setPrototypeOf$9=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$9(c,d)}function _createSuper$8(c){var d=_isNativeReflectConstruct$9();return function(){var v=_getPrototypeOf$8(c),b;if(d){var _=_getPrototypeOf$8(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$8(this,b)}}function _possibleConstructorReturn$8(c,d){return d&&(_typeof$a(d)==="object"||typeof d=="function")?d:_assertThisInitialized$8(c)}function _assertThisInitialized$8(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$8(c){return _getPrototypeOf$8=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$8(c)}function _defineProperty$8(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var Hour0To11Parser=function(c){_inherits$8(g,c);var d=_createSuper$8(g);function g(){var v;_classCallCheck$8(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$8(_assertThisInitialized$8(v),"priority",70),_defineProperty$8(_assertThisInitialized$8(v),"incompatibleTokens",["h","H","k","t","T"]),v}return _createClass$8(g,[{key:"parse",value:function(b,_,E){switch(_){case"K":return parseNumericPattern(numericPatterns.hour11h,b);case"Ko":return E.ordinalNumber(b,{unit:"hour"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=0&&_<=11}},{key:"set",value:function(b,_,E){var R=b.getUTCHours()>=12;return R&&E<12?b.setUTCHours(E+12,0,0,0):b.setUTCHours(E,0,0,0),b}}]),g}(Parser);function _typeof$9(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$9=function(g){return typeof g}:_typeof$9=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$9(c)}function _classCallCheck$7(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$7(c,d,g){return d&&_defineProperties$7(c.prototype,d),g&&_defineProperties$7(c,g),c}function _inherits$7(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$8(c,d)}function _setPrototypeOf$8(c,d){return _setPrototypeOf$8=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$8(c,d)}function _createSuper$7(c){var d=_isNativeReflectConstruct$8();return function(){var v=_getPrototypeOf$7(c),b;if(d){var _=_getPrototypeOf$7(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$7(this,b)}}function _possibleConstructorReturn$7(c,d){return d&&(_typeof$9(d)==="object"||typeof d=="function")?d:_assertThisInitialized$7(c)}function _assertThisInitialized$7(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$7(c){return _getPrototypeOf$7=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$7(c)}function _defineProperty$7(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var Hour1To24Parser=function(c){_inherits$7(g,c);var d=_createSuper$7(g);function g(){var v;_classCallCheck$7(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$7(_assertThisInitialized$7(v),"priority",70),_defineProperty$7(_assertThisInitialized$7(v),"incompatibleTokens",["a","b","h","H","K","t","T"]),v}return _createClass$7(g,[{key:"parse",value:function(b,_,E){switch(_){case"k":return parseNumericPattern(numericPatterns.hour24h,b);case"ko":return E.ordinalNumber(b,{unit:"hour"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=1&&_<=24}},{key:"set",value:function(b,_,E){var R=E<=24?E%24:E;return b.setUTCHours(R,0,0,0),b}}]),g}(Parser);function _typeof$8(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$8=function(g){return typeof g}:_typeof$8=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$8(c)}function _classCallCheck$6(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$6(c,d,g){return d&&_defineProperties$6(c.prototype,d),g&&_defineProperties$6(c,g),c}function _inherits$6(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$7(c,d)}function _setPrototypeOf$7(c,d){return _setPrototypeOf$7=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$7(c,d)}function _createSuper$6(c){var d=_isNativeReflectConstruct$7();return function(){var v=_getPrototypeOf$6(c),b;if(d){var _=_getPrototypeOf$6(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$6(this,b)}}function _possibleConstructorReturn$6(c,d){return d&&(_typeof$8(d)==="object"||typeof d=="function")?d:_assertThisInitialized$6(c)}function _assertThisInitialized$6(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$6(c){return _getPrototypeOf$6=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$6(c)}function _defineProperty$6(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var MinuteParser=function(c){_inherits$6(g,c);var d=_createSuper$6(g);function g(){var v;_classCallCheck$6(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$6(_assertThisInitialized$6(v),"priority",60),_defineProperty$6(_assertThisInitialized$6(v),"incompatibleTokens",["t","T"]),v}return _createClass$6(g,[{key:"parse",value:function(b,_,E){switch(_){case"m":return parseNumericPattern(numericPatterns.minute,b);case"mo":return E.ordinalNumber(b,{unit:"minute"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=0&&_<=59}},{key:"set",value:function(b,_,E){return b.setUTCMinutes(E,0,0),b}}]),g}(Parser);function _typeof$7(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$7=function(g){return typeof g}:_typeof$7=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$7(c)}function _classCallCheck$5(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$5(c,d,g){return d&&_defineProperties$5(c.prototype,d),g&&_defineProperties$5(c,g),c}function _inherits$5(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$6(c,d)}function _setPrototypeOf$6(c,d){return _setPrototypeOf$6=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$6(c,d)}function _createSuper$5(c){var d=_isNativeReflectConstruct$6();return function(){var v=_getPrototypeOf$5(c),b;if(d){var _=_getPrototypeOf$5(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$5(this,b)}}function _possibleConstructorReturn$5(c,d){return d&&(_typeof$7(d)==="object"||typeof d=="function")?d:_assertThisInitialized$5(c)}function _assertThisInitialized$5(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$6(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$5(c){return _getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$5(c)}function _defineProperty$5(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var SecondParser=function(c){_inherits$5(g,c);var d=_createSuper$5(g);function g(){var v;_classCallCheck$5(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$5(_assertThisInitialized$5(v),"priority",50),_defineProperty$5(_assertThisInitialized$5(v),"incompatibleTokens",["t","T"]),v}return _createClass$5(g,[{key:"parse",value:function(b,_,E){switch(_){case"s":return parseNumericPattern(numericPatterns.second,b);case"so":return E.ordinalNumber(b,{unit:"second"});default:return parseNDigits(_.length,b)}}},{key:"validate",value:function(b,_){return _>=0&&_<=59}},{key:"set",value:function(b,_,E){return b.setUTCSeconds(E,0),b}}]),g}(Parser);function _typeof$6(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(g){return typeof g}:_typeof$6=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$6(c)}function _classCallCheck$4(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$4(c,d,g){return d&&_defineProperties$4(c.prototype,d),g&&_defineProperties$4(c,g),c}function _inherits$4(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$5(c,d)}function _setPrototypeOf$5(c,d){return _setPrototypeOf$5=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$5(c,d)}function _createSuper$4(c){var d=_isNativeReflectConstruct$5();return function(){var v=_getPrototypeOf$4(c),b;if(d){var _=_getPrototypeOf$4(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$4(this,b)}}function _possibleConstructorReturn$4(c,d){return d&&(_typeof$6(d)==="object"||typeof d=="function")?d:_assertThisInitialized$4(c)}function _assertThisInitialized$4(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$4(c){return _getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$4(c)}function _defineProperty$4(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var FractionOfSecondParser=function(c){_inherits$4(g,c);var d=_createSuper$4(g);function g(){var v;_classCallCheck$4(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$4(_assertThisInitialized$4(v),"priority",30),_defineProperty$4(_assertThisInitialized$4(v),"incompatibleTokens",["t","T"]),v}return _createClass$4(g,[{key:"parse",value:function(b,_){var E=function(M){return Math.floor(M*Math.pow(10,-_.length+3))};return mapValue(parseNDigits(_.length,b),E)}},{key:"set",value:function(b,_,E){return b.setUTCMilliseconds(E),b}}]),g}(Parser);function _typeof$5(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(g){return typeof g}:_typeof$5=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$5(c)}function _classCallCheck$3(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$3(c,d,g){return d&&_defineProperties$3(c.prototype,d),g&&_defineProperties$3(c,g),c}function _inherits$3(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$4(c,d)}function _setPrototypeOf$4(c,d){return _setPrototypeOf$4=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$4(c,d)}function _createSuper$3(c){var d=_isNativeReflectConstruct$4();return function(){var v=_getPrototypeOf$3(c),b;if(d){var _=_getPrototypeOf$3(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$3(this,b)}}function _possibleConstructorReturn$3(c,d){return d&&(_typeof$5(d)==="object"||typeof d=="function")?d:_assertThisInitialized$3(c)}function _assertThisInitialized$3(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$3(c){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$3(c)}function _defineProperty$3(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var ISOTimezoneWithZParser=function(c){_inherits$3(g,c);var d=_createSuper$3(g);function g(){var v;_classCallCheck$3(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$3(_assertThisInitialized$3(v),"priority",10),_defineProperty$3(_assertThisInitialized$3(v),"incompatibleTokens",["t","T","x"]),v}return _createClass$3(g,[{key:"parse",value:function(b,_){switch(_){case"X":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,b);case"XX":return parseTimezonePattern(timezonePatterns.basic,b);case"XXXX":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,b);case"XXXXX":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,b);case"XXX":default:return parseTimezonePattern(timezonePatterns.extended,b)}}},{key:"set",value:function(b,_,E){return _.timestampIsSet?b:new Date(b.getTime()-E)}}]),g}(Parser);function _typeof$4(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(g){return typeof g}:_typeof$4=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$4(c)}function _classCallCheck$2(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$2(c,d,g){return d&&_defineProperties$2(c.prototype,d),g&&_defineProperties$2(c,g),c}function _inherits$2(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$3(c,d)}function _setPrototypeOf$3(c,d){return _setPrototypeOf$3=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$3(c,d)}function _createSuper$2(c){var d=_isNativeReflectConstruct$3();return function(){var v=_getPrototypeOf$2(c),b;if(d){var _=_getPrototypeOf$2(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$2(this,b)}}function _possibleConstructorReturn$2(c,d){return d&&(_typeof$4(d)==="object"||typeof d=="function")?d:_assertThisInitialized$2(c)}function _assertThisInitialized$2(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$2(c){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$2(c)}function _defineProperty$2(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var ISOTimezoneParser=function(c){_inherits$2(g,c);var d=_createSuper$2(g);function g(){var v;_classCallCheck$2(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$2(_assertThisInitialized$2(v),"priority",10),_defineProperty$2(_assertThisInitialized$2(v),"incompatibleTokens",["t","T","X"]),v}return _createClass$2(g,[{key:"parse",value:function(b,_){switch(_){case"x":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,b);case"xx":return parseTimezonePattern(timezonePatterns.basic,b);case"xxxx":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,b);case"xxxxx":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,b);case"xxx":default:return parseTimezonePattern(timezonePatterns.extended,b)}}},{key:"set",value:function(b,_,E){return _.timestampIsSet?b:new Date(b.getTime()-E)}}]),g}(Parser);function _typeof$3(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(g){return typeof g}:_typeof$3=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$3(c)}function _classCallCheck$1(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass$1(c,d,g){return d&&_defineProperties$1(c.prototype,d),g&&_defineProperties$1(c,g),c}function _inherits$1(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$2(c,d)}function _setPrototypeOf$2(c,d){return _setPrototypeOf$2=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$2(c,d)}function _createSuper$1(c){var d=_isNativeReflectConstruct$2();return function(){var v=_getPrototypeOf$1(c),b;if(d){var _=_getPrototypeOf$1(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn$1(this,b)}}function _possibleConstructorReturn$1(c,d){return d&&(_typeof$3(d)==="object"||typeof d=="function")?d:_assertThisInitialized$1(c)}function _assertThisInitialized$1(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$1(c){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf$1(c)}function _defineProperty$1(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var TimestampSecondsParser=function(c){_inherits$1(g,c);var d=_createSuper$1(g);function g(){var v;_classCallCheck$1(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty$1(_assertThisInitialized$1(v),"priority",40),_defineProperty$1(_assertThisInitialized$1(v),"incompatibleTokens","*"),v}return _createClass$1(g,[{key:"parse",value:function(b){return parseAnyDigitsSigned(b)}},{key:"set",value:function(b,_,E){return[new Date(E*1e3),{timestampIsSet:!0}]}}]),g}(Parser);function _typeof$2(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(g){return typeof g}:_typeof$2=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$2(c)}function _classCallCheck(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,d){for(var g=0;g<d.length;g++){var v=d[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function _createClass(c,d,g){return d&&_defineProperties(c.prototype,d),g&&_defineProperties(c,g),c}function _inherits(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&_setPrototypeOf$1(c,d)}function _setPrototypeOf$1(c,d){return _setPrototypeOf$1=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf$1(c,d)}function _createSuper(c){var d=_isNativeReflectConstruct$1();return function(){var v=_getPrototypeOf(c),b;if(d){var _=_getPrototypeOf(this).constructor;b=Reflect.construct(v,arguments,_)}else b=v.apply(this,arguments);return _possibleConstructorReturn(this,b)}}function _possibleConstructorReturn(c,d){return d&&(_typeof$2(d)==="object"||typeof d=="function")?d:_assertThisInitialized(c)}function _assertThisInitialized(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf(c){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},_getPrototypeOf(c)}function _defineProperty(c,d,g){return d in c?Object.defineProperty(c,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[d]=g,c}var TimestampMillisecondsParser=function(c){_inherits(g,c);var d=_createSuper(g);function g(){var v;_classCallCheck(this,g);for(var b=arguments.length,_=new Array(b),E=0;E<b;E++)_[E]=arguments[E];return v=d.call.apply(d,[this].concat(_)),_defineProperty(_assertThisInitialized(v),"priority",20),_defineProperty(_assertThisInitialized(v),"incompatibleTokens","*"),v}return _createClass(g,[{key:"parse",value:function(b){return parseAnyDigitsSigned(b)}},{key:"set",value:function(b,_,E){return[new Date(E),{timestampIsSet:!0}]}}]),g}(Parser),parsers={G:new EraParser,y:new YearParser,Y:new LocalWeekYearParser,R:new ISOWeekYearParser,u:new ExtendedYearParser,Q:new QuarterParser,q:new StandAloneQuarterParser,M:new MonthParser,L:new StandAloneMonthParser,w:new LocalWeekParser,I:new ISOWeekParser,d:new DateParser,D:new DayOfYearParser,E:new DayParser,e:new LocalDayParser,c:new StandAloneLocalDayParser,i:new ISODayParser,a:new AMPMParser,b:new AMPMMidnightParser,B:new DayPeriodParser,h:new Hour1to12Parser,H:new Hour0to23Parser,K:new Hour0To11Parser,k:new Hour1To24Parser,m:new MinuteParser,s:new SecondParser,S:new FractionOfSecondParser,X:new ISOTimezoneWithZParser,x:new ISOTimezoneParser,t:new TimestampSecondsParser,T:new TimestampMillisecondsParser};function _typeof$1(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(g){return typeof g}:_typeof$1=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof$1(c)}function _createForOfIteratorHelper(c,d){var g;if(typeof Symbol>"u"||c[Symbol.iterator]==null){if(Array.isArray(c)||(g=_unsupportedIterableToArray$1(c))||d&&c&&typeof c.length=="number"){g&&(c=g);var v=0,b=function(){};return{s:b,n:function(){return v>=c.length?{done:!0}:{done:!1,value:c[v++]}},e:function(P){throw P},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,E=!1,R;return{s:function(){g=c[Symbol.iterator]()},n:function(){var P=g.next();return _=P.done,P},e:function(P){E=!0,R=P},f:function(){try{!_&&g.return!=null&&g.return()}finally{if(E)throw R}}}}function _unsupportedIterableToArray$1(c,d){if(!!c){if(typeof c=="string")return _arrayLikeToArray$1(c,d);var g=Object.prototype.toString.call(c).slice(8,-1);if(g==="Object"&&c.constructor&&(g=c.constructor.name),g==="Map"||g==="Set")return Array.from(c);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return _arrayLikeToArray$1(c,d)}}function _arrayLikeToArray$1(c,d){(d==null||d>c.length)&&(d=c.length);for(var g=0,v=new Array(d);g<d;g++)v[g]=c[g];return v}var formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,notWhitespaceRegExp=/\S/,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function parse(c,d,g,v){var b,_,E,R,M,P,O,H,Q,ee,V,W,Y,U,G,te,B,j;requiredArgs(3,arguments);var X=String(c),oe=String(d),be=getDefaultOptions(),ae=(b=(_=v==null?void 0:v.locale)!==null&&_!==void 0?_:be.locale)!==null&&b!==void 0?b:defaultLocale;if(!ae.match)throw new RangeError("locale must contain match property");var ie=toInteger((E=(R=(M=(P=v==null?void 0:v.firstWeekContainsDate)!==null&&P!==void 0?P:v==null||(O=v.locale)===null||O===void 0||(H=O.options)===null||H===void 0?void 0:H.firstWeekContainsDate)!==null&&M!==void 0?M:be.firstWeekContainsDate)!==null&&R!==void 0?R:(Q=be.locale)===null||Q===void 0||(ee=Q.options)===null||ee===void 0?void 0:ee.firstWeekContainsDate)!==null&&E!==void 0?E:1);if(!(ie>=1&&ie<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Se=toInteger((V=(W=(Y=(U=v==null?void 0:v.weekStartsOn)!==null&&U!==void 0?U:v==null||(G=v.locale)===null||G===void 0||(te=G.options)===null||te===void 0?void 0:te.weekStartsOn)!==null&&Y!==void 0?Y:be.weekStartsOn)!==null&&W!==void 0?W:(B=be.locale)===null||B===void 0||(j=B.options)===null||j===void 0?void 0:j.weekStartsOn)!==null&&V!==void 0?V:0);if(!(Se>=0&&Se<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(oe==="")return X===""?toDate(g):new Date(NaN);var mt={firstWeekContainsDate:ie,weekStartsOn:Se,locale:ae},it=[new DateToSystemTimezoneSetter],Tt=oe.match(longFormattingTokensRegExp).map(function(tt){var vt=tt[0];if(vt in longFormatters$1){var It=longFormatters$1[vt];return It(tt,ae.formatLong)}return tt}).join("").match(formattingTokensRegExp),ht=[],Ye=_createForOfIteratorHelper(Tt),St;try{var $t=function(){var vt=St.value;!(v!=null&&v.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(vt)&&throwProtectedError(vt,oe,c),!(v!=null&&v.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(vt)&&throwProtectedError(vt,oe,c);var It=vt[0],Vt=parsers[It];if(Vt){var wt=Vt.incompatibleTokens;if(Array.isArray(wt)){var kt=ht.find(function(Qt){return wt.includes(Qt.token)||Qt.token===It});if(kt)throw new RangeError("The format string mustn't contain `".concat(kt.fullToken,"` and `").concat(vt,"` at the same time"))}else if(Vt.incompatibleTokens==="*"&&ht.length>0)throw new RangeError("The format string mustn't contain `".concat(vt,"` and any other token at the same time"));ht.push({token:It,fullToken:vt});var Zt=Vt.run(X,vt,ae.match,mt);if(!Zt)return{v:new Date(NaN)};it.push(Zt.setter),X=Zt.rest}else{if(It.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+It+"`");if(vt==="''"?vt="'":It==="'"&&(vt=cleanEscapedString(vt)),X.indexOf(vt)===0)X=X.slice(vt.length);else return{v:new Date(NaN)}}};for(Ye.s();!(St=Ye.n()).done;){var Lt=$t();if(_typeof$1(Lt)==="object")return Lt.v}}catch(tt){Ye.e(tt)}finally{Ye.f()}if(X.length>0&&notWhitespaceRegExp.test(X))return new Date(NaN);var Mt=it.map(function(tt){return tt.priority}).sort(function(tt,vt){return vt-tt}).filter(function(tt,vt,It){return It.indexOf(tt)===vt}).map(function(tt){return it.filter(function(vt){return vt.priority===tt}).sort(function(vt,It){return It.subPriority-vt.subPriority})}).map(function(tt){return tt[0]}),jt=toDate(g);if(isNaN(jt.getTime()))return new Date(NaN);var Qe=subMilliseconds(jt,getTimezoneOffsetInMilliseconds(jt)),Pe={},Ee=_createForOfIteratorHelper(Mt),nt;try{for(Ee.s();!(nt=Ee.n()).done;){var st=nt.value;if(!st.validate(Qe,mt))return new Date(NaN);var rt=st.set(Qe,Pe,mt);Array.isArray(rt)?(Qe=rt[0],assign(Pe,rt[1])):Qe=rt}}catch(tt){Ee.e(tt)}finally{Ee.f()}return Qe}function cleanEscapedString(c){return c.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}function parseISO(c,d){var g;requiredArgs(1,arguments);var v=toInteger((g=d==null?void 0:d.additionalDigits)!==null&&g!==void 0?g:2);if(v!==2&&v!==1&&v!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof c=="string"||Object.prototype.toString.call(c)==="[object String]"))return new Date(NaN);var b=splitDateString(c),_;if(b.date){var E=parseYear(b.date,v);_=parseDate(E.restDateString,E.year)}if(!_||isNaN(_.getTime()))return new Date(NaN);var R=_.getTime(),M=0,P;if(b.time&&(M=parseTime(b.time),isNaN(M)))return new Date(NaN);if(b.timezone){if(P=parseTimezone(b.timezone),isNaN(P))return new Date(NaN)}else{var O=new Date(R+M),H=new Date(0);return H.setFullYear(O.getUTCFullYear(),O.getUTCMonth(),O.getUTCDate()),H.setHours(O.getUTCHours(),O.getUTCMinutes(),O.getUTCSeconds(),O.getUTCMilliseconds()),H}return new Date(R+M+P)}var patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function splitDateString(c){var d={},g=c.split(patterns.dateTimeDelimiter),v;if(g.length>2)return d;if(/:/.test(g[0])?v=g[0]:(d.date=g[0],v=g[1],patterns.timeZoneDelimiter.test(d.date)&&(d.date=c.split(patterns.timeZoneDelimiter)[0],v=c.substr(d.date.length,c.length))),v){var b=patterns.timezone.exec(v);b?(d.time=v.replace(b[1],""),d.timezone=b[1]):d.time=v}return d}function parseYear(c,d){var g=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+d)+"})|(\\d{2}|[+-]\\d{"+(2+d)+"})$)"),v=c.match(g);if(!v)return{year:NaN,restDateString:""};var b=v[1]?parseInt(v[1]):null,_=v[2]?parseInt(v[2]):null;return{year:_===null?b:_*100,restDateString:c.slice((v[1]||v[2]).length)}}function parseDate(c,d){if(d===null)return new Date(NaN);var g=c.match(dateRegex);if(!g)return new Date(NaN);var v=!!g[4],b=parseDateUnit(g[1]),_=parseDateUnit(g[2])-1,E=parseDateUnit(g[3]),R=parseDateUnit(g[4]),M=parseDateUnit(g[5])-1;if(v)return validateWeekDate(d,R,M)?dayOfISOWeekYear(d,R,M):new Date(NaN);var P=new Date(0);return!validateDate(d,_,E)||!validateDayOfYearDate(d,b)?new Date(NaN):(P.setUTCFullYear(d,_,Math.max(b,E)),P)}function parseDateUnit(c){return c?parseInt(c):1}function parseTime(c){var d=c.match(timeRegex);if(!d)return NaN;var g=parseTimeUnit(d[1]),v=parseTimeUnit(d[2]),b=parseTimeUnit(d[3]);return validateTime(g,v,b)?g*millisecondsInHour+v*millisecondsInMinute+b*1e3:NaN}function parseTimeUnit(c){return c&&parseFloat(c.replace(",","."))||0}function parseTimezone(c){if(c==="Z")return 0;var d=c.match(timezoneRegex);if(!d)return 0;var g=d[1]==="+"?-1:1,v=parseInt(d[2]),b=d[3]&&parseInt(d[3])||0;return validateTimezone(v,b)?g*(v*millisecondsInHour+b*millisecondsInMinute):NaN}function dayOfISOWeekYear(c,d,g){var v=new Date(0);v.setUTCFullYear(c,0,4);var b=v.getUTCDay()||7,_=(d-1)*7+g+1-b;return v.setUTCDate(v.getUTCDate()+_),v}var daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(c){return c%400===0||c%4===0&&c%100!==0}function validateDate(c,d,g){return d>=0&&d<=11&&g>=1&&g<=(daysInMonths[d]||(isLeapYearIndex(c)?29:28))}function validateDayOfYearDate(c,d){return d>=1&&d<=(isLeapYearIndex(c)?366:365)}function validateWeekDate(c,d,g){return d>=1&&d<=53&&g>=0&&g<=6}function validateTime(c,d,g){return c===24?d===0&&g===0:g>=0&&g<60&&d>=0&&d<60&&c>=0&&c<25}function validateTimezone(c,d){return d>=0&&d<=59}function formatDateISOToLocal(c){if(!c)return;const d=parseISO(c);return format(d,"P")}const matchDatePattern=c=>{const d=["P","yyyyMMddHHmm"];for(let g=0;g<d.length;g+=1){const v=parse(c,d[g],new Date);if(isValid$1(v))return v}return c};function formatDateLocalToISO(c){if(!c)return;const d=matchDatePattern(c);return d instanceof Date?formatISO(d,{representation:"date"}):d}function formatStringToDate(c){if(!c)return;const d=c.substring(4,6),g=c.substring(6,8),v=c.substring(0,4);return`${d}/${g}/${v}`}function dateToISO(c){if(c)return c.toISOString().split("T")[0]}function formatPhoneNumber(c){if(!c)return;const g=c.replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return g?`${g[1]}-${g[2]}-${g[3]}`:c}function ccdaDatetimeToISO(c){if(!!c)return parseISO(`${c.substring(0,8)} ${c.substring(8)}`)}function displayDateTimeasString(c){if(!c)return"";try{return format(new Date(c),"MMMM dd, yyyy HH:mm:ss").replace("00:00:00","")}catch{return""}}const getMedicationValue=c=>{const d=fp.get("resource.medicationCodeableConcept.coding.0",c);return d?`${d.system}_${d.code}`:""},getDateValue=c=>{var g;const d=new Date((g=c.dateLocal)!=null?g:0);return dateToISO(d)},getDateTimeValue=c=>{var g;const d=new Date((g=c.date)!=null?g:0);return c.resourceType==="MedicationRequest"?d.getTime()-1:d.getTime()},sortMedHistory=c=>{if(c.length===0)return c;const d=(b,_)=>[b,b.resourceType,_],g=fp.pipe(fp.groupBy(getDateValue),fp.mapValues(b=>fp.orderBy(getDateTimeValue,"asc",b)),fp.mapValues(b=>b.map(d)),fp.mapValues(sortMedHistoryForASingleDate))(c);return fp.orderBy(b=>new Date(b).getTime(),"desc",fp.keys(g)).map(b=>g[b]).reduce(fp.concat)};function sortMedHistoryForASingleDate(c=[]){const d=new Map,g=c.map(([v,b,_])=>{const E=getMedicationValue(v);if(b==="MedicationDispense")d.set(E,_);else if(d.has(E)&&b==="MedicationRequest"){const R=d.get(E);return{model:v,type:b,sortOrder:R-.1}}return{model:v,type:b,sortOrder:_}});return fp.orderBy(fp.get("sortOrder"),"desc",g).map(fp.get("model"))}const Details=({data:c,hideEmpty:d=!0,onEdit:g,documentButton:v})=>React.createElement("div",{className:"ctw-rounded-lg ctw-bg-bg-lighter"},React.createElement("dl",{className:"ctw-space-y-2 ctw-p-4"},React.createElement("div",{className:"ctw-flex ctw-justify-between ctw-space-x-2 ctw-text-sm ctw-uppercase ctw-text-content-light"},React.createElement("div",{className:"ctw-title-container"},"Details"),React.createElement("div",{className:"ctw-flex"},v,g&&React.createElement("button",{type:"button",className:"ctw-btn-default ctw-flex ctw-space-x-2 ctw-align-middle",onClick:g},React.createElement(PencilIcon$1,{className:"ctw-h-4 ctw-w-4"}),React.createElement("span",null,"Update")))),c.filter(b=>!d||b.value||b.value===0).map(({label:b,value:_})=>React.createElement("div",{key:b,className:"ctw-text-gray-900 ctw-flex ctw-items-baseline"},React.createElement("dt",{className:"ctw-w-1/3 ctw-flex-shrink-0 ctw-font-medium"},b),React.createElement("dd",{className:"ctw-m-0"},_)))));try{Details.displayName="Details",Details.__docgenInfo={description:"",displayName:"Details",props:{hideEmpty:{defaultValue:{value:"true"},description:"",name:"hideEmpty",required:!1,type:{name:"boolean"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"CollapsibleDataListEntry[]"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"(() => void)"}},documentButton:{defaultValue:null,description:"",name:"documentButton",required:!1,type:{name:"ReactNode"}}}}}catch{}const collapsibleDataList="",CollapsibleDataList=({id:c,date:d,title:g,subtitle:v,data:b,hideEmpty:_,documentButton:E})=>{const[R,M]=react.exports.useState(!1);return React.createElement("div",{className:"ctw-collapsible-data-list ctw-space-y-1"},React.createElement(DetailSummary,{date:d,title:g,subtitle:v,isDetailShown:R,setIsDetailShown:M}),R&&React.createElement(Details,{data:b,hideEmpty:_,documentButton:E}))},DetailSummary=({date:c,title:d,subtitle:g,isDetailShown:v,setIsDetailShown:b})=>React.createElement("button",{type:"button","aria-label":"details",onClick:()=>b(!v),className:"ctw-w-full ctw-cursor-pointer ctw-border-none ctw-bg-transparent ctw-p-0 ctw-text-base ctw-outline-none"},React.createElement("div",{className:"ctw-flex ctw-items-center ctw-justify-between ctw-rounded-lg ctw-bg-bg-white ctw-p-3 ctw-text-left ctw-outline ctw-outline-1 ctw-outline-bg-dark"},React.createElement("div",{className:"ctw-flex ctw-space-x-3"},c&&React.createElement("div",{className:"ctw-min-w-[5rem]"},c),React.createElement("div",null,React.createElement("div",{className:"ctw-font-semibold ctw-text-content-black"},d),React.createElement("div",{className:"ctw-text-content-light"},g))),React.createElement("div",{className:"ctw-justify-right ctw-flex"},React.createElement(ChevronRightIcon$3,{className:cx("ctw-h-5 ctw-w-5 ctw-text-primary-dark",{"ctw-rotate-90":v})}))));try{CollapsibleDataList.displayName="CollapsibleDataList",CollapsibleDataList.__docgenInfo={description:"",displayName:"CollapsibleDataList",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},date:{defaultValue:null,description:"",name:"date",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},subtitle:{defaultValue:null,description:"",name:"subtitle",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"CollapsibleDataListEntry[]"}},hideEmpty:{defaultValue:null,description:"",name:"hideEmpty",required:!1,type:{name:"boolean"}},documentButton:{defaultValue:null,description:"",name:"documentButton",required:!1,type:{name:"ReactNode"}}}}}catch{}const CollapsibleDataListStack=({entries:c,limit:d})=>{const[g,v]=react.exports.useState(!d||c.length<=d);return React.createElement("div",{className:"ctw-space-y-3"},React.createElement("div",{className:"ctw-text-base ctw-font-medium ctw-uppercase ctw-text-content-light"},"History"),c.map(b=>React.createElement("div",{key:`${b.id}`},React.createElement(CollapsibleDataList,{id:b.id,date:b.date,title:b.title,subtitle:b.subtitle,data:b.data,hideEmpty:b.hideEmpty,documentButton:b.documentButton}))),!g&&React.createElement("div",{className:"ctw-text-center"},React.createElement("button",{type:"button",className:"ctw-link-primary",onClick:()=>v(!0)},"Load ",c.length-d," More")))};try{CollapsibleDataListStack.displayName="CollapsibleDataListStack",CollapsibleDataListStack.__docgenInfo={description:"",displayName:"CollapsibleDataListStack",props:{entries:{defaultValue:null,description:"",name:"entries",required:!0,type:{name:"CollapsibleDataListStackEntries"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}}}}}catch{}const isBundle=c=>c.resourceType==="Bundle";function getResources(c,d){var v;const g=[];return isBundle(c)&&((v=c.entry)==null||v.forEach(b=>{var _;((_=b.resource)==null?void 0:_.resourceType)===d&&g.push(b.resource)})),g}function bundleToResourceMap(c){var g;const d={};return isBundle(c)&&((g=c.entry)==null||g.forEach(v=>{const{resource:b}=v;if(!b)return;const _=`${b.resourceType}/${b.id}`;d[_]=b})),d}function getIncludedResources(c){var g;const d={};return isBundle(c)&&((g=c.entry)==null||g.forEach(v=>{const{resource:b,search:_}=v;if(!b||(_==null?void 0:_.mode)!=="include")return;const E=`${b.resourceType}/${b.id}`;d[E]=b})),d}function getIncludedBasics(c){const d={};return!isBundle(c)||!c.entry||c.entry.forEach(g=>{var E,R,M;const{resource:v,search:b}=g;if(!v||(b==null?void 0:b.mode)!=="include"||v.resourceType!=="Basic")return;const _=lodash.exports.last((R=(E=v.subject)==null?void 0:E.reference)==null?void 0:R.split("/"));!_||(d[_]||(d[_]=[]),(M=d[_])==null||M.push(v))}),d}function getMergedIncludedResources(c){return Object.assign({},...c.map(d=>getIncludedResources(d)))}function findReference(c,d,g,v){var b;if(!!v){if(v.startsWith("#"))return lodash.exports.find(d,{id:v.substring(1),resourceType:c});if(((b=g==null?void 0:g[v])==null?void 0:b.resourceType)===c)return g[v]}}const SYSTEM_BASIC_RESOURCE_TYPE="http://terminology.hl7.org/CodeSystem/basic-resource-type",SYSTEM_CONDITION_CATEGORY="http://terminology.hl7.org/CodeSystem/condition-category",SYSTEM_CONDITION_CLINICAL="http://terminology.hl7.org/CodeSystem/condition-clinical",SYSTEM_CONDITION_VERIFICATION_STATUS="http://terminology.hl7.org/CodeSystem/condition-ver-status",SYSTEM_PROVENANCE_ACTIVITY_TYPE="http://terminology.hl7.org/3.1.0/CodeSystem-v3-DataOperation.html",SYSTEM_PROVENANCE_AGENT_TYPE="http://terminology.hl7.org/CodeSystem/provenance-participant-type",SYSTEM_CCS="https://www.hcup-us.ahrq.gov/toolssoftware/ccsr/dxccsr.jsp",SYSTEM_ICD9="http://hl7.org/fhir/sid/icd-9",SYSTEM_ICD9_CM="http://hl7.org/fhir/sid/icd-9-cm",SYSTEM_ICD10="http://hl7.org/fhir/sid/icd-10",SYSTEM_ICD10_CM="http://hl7.org/fhir/sid/icd-10-cm",SYSTEM_RXNORM="http://www.nlm.nih.gov/research/umls/rxnorm",SYSTEM_SNOMED="http://snomed.info/sct",SYSTEM_SUMMARY="https://zusapi.com/summary",SYSTEM_ZUS_LENS="https://zusapi.com/lens",SYSTEM_ZUS_OWNER="https://zusapi.com/accesscontrol/owner",SYSTEM_ZUS_PROFILE_ACTION="https://zusapi.com/profile/action",SYSTEM_ZUS_THIRD_PARTY="https://zusapi.com/thirdparty/source",SYSTEM_ZUS_UNIVERSAL_ID="https://zusapi.com/fhir/identifier/universal-id",SYSTEM_ZUS_UPI_RECORD_TYPE="https://zusapi.com/fhir/tag/upi-record-type",SYSTEM_ENRICHMENT="https://zusapi.com/terminology/enrichment",LENS_EXTENSION_MEDICATION_LAST_FILL_DATE="https://zusapi.com/lens/extension/medicationLastFillDate",LENS_EXTENSION_MEDICATION_LAST_PRESCRIBED_DATE="https://zusapi.com/lens/extension/medicationLastPrescribedDate",LENS_EXTENSION_MEDICATION_QUANTITY="https://zusapi.com/lens/extension/medicationQuantity",LENS_EXTENSION_MEDICATION_DAYS_SUPPLY="https://zusapi.com/lens/extension/medicationDaysSupply",LENS_EXTENSION_MEDICATION_REFILLS="https://zusapi.com/lens/extension/medicationRefills",LENS_EXTENSION_MEDICATION_LAST_PRESCRIBER="https://zusapi.com/lens/extension/medicationLastPrescriber",LENS_EXTENSION_AGGREGATED_FROM="https://zusapi.com/lens/extension/aggregatedFrom",CTW_EXTENSION_LENS_AGGREGATED_FROM="https://zusapi.com/ctw-component-library/extension/lensAggregatedFrom",medStatusDisplays={active:"Currently taking","entered-in-error":"Never taken","not-taken":"Prescribed, not taken",completed:"No longer taking","on-hold":"On hold",intended:"Intend to take",stopped:"No longer taking"};function getMedicationCodeableConcept(c,d){var v;if(c.medicationCodeableConcept)return c.medicationCodeableConcept;const g=findReference("Medication",c.contained,d,(v=c.medicationReference)==null?void 0:v.reference);return g==null?void 0:g.code}function getIdentifyingRxNormCode(c,d){var g;return(g=getIdentifyingRxNormCoding(c,d))==null?void 0:g.code}function getIdentifyingRxNormCoding(c,d){var b;const g=getMedicationCodeableConcept(c,d),v=["ActiveIngredient","BrandName"];return(b=g==null?void 0:g.coding)==null?void 0:b.find(_=>_.system===SYSTEM_RXNORM&&(_.extension===void 0||!_.extension.some(E=>E.url===SYSTEM_ENRICHMENT&&E.valueString&&v.includes(E.valueString))))}function getPerformingOrganization(c,d){var v,b,_;let g;switch(c.resourceType){case"MedicationAdministration":case"MedicationDispense":g=(b=(v=c.performer)==null?void 0:v[0])==null?void 0:b.actor;break;case"MedicationRequest":g=c.performer||((_=c.dispenseRequest)==null?void 0:_.performer);break;case"MedicationStatement":default:return}if((g==null?void 0:g.reference)&&g.type==="Organization")return findReference("Organization",c.contained,d,g.reference)}function patientStatus(c){return lodash.exports.get(medStatusDisplays,c,"")}const MAX_COUNT=250,THIRD_PARTY_TAGS=[`${SYSTEM_ZUS_THIRD_PARTY}|surescripts`,`${SYSTEM_ZUS_THIRD_PARTY}|commonwell`,`${SYSTEM_ZUS_THIRD_PARTY}|elation`],LENS_TAGS=[`${SYSTEM_ZUS_LENS}|ActiveMedications`,`${SYSTEM_ZUS_LENS}|ChronicConditions`],UPI_TAGS=[`${SYSTEM_ZUS_UPI_RECORD_TYPE}|universal`],SUMMARY_TAGS=[`${SYSTEM_SUMMARY}|Common`];async function searchAllRecords(c,d,g){var O;const{patientUPID:v,_count:b,..._}=g!=null?g:{},R=typeof b>"u"?MAX_COUNT:b,M=await d.fhirClient.search({resourceType:c,searchParams:{..._,_count:R,...patientSearchParams(c,v)}}),P=getResources(M,c);return{bundle:M,total:(O=M.total)!=null?O:0,resources:P}}async function searchBuilderRecords(c,d,g){const v=[...THIRD_PARTY_TAGS,...LENS_TAGS,...SUMMARY_TAGS,...UPI_TAGS],b=`${SYSTEM_ZUS_OWNER}|builder/${d.builderId}`,_=mergeParams(g,{_tag:[b],"_tag:not":v});return searchAllRecords(c,d,_)}async function searchLensRecords(c,d,g,v){const b=[`${SYSTEM_ZUS_LENS}|${g}`,`${SYSTEM_ZUS_OWNER}|builder/${d.builderId}`],_=mergeParams(v,{_tag:b});return searchAllRecords(c,d,_)}async function searchSummaryRecords(c,d,g){const v=[...SUMMARY_TAGS,`${SYSTEM_ZUS_OWNER}|builder/${d.builderId}`],b=mergeParams(g,{_tag:v});return searchAllRecords(c,d,b)}async function searchCommonRecords(c,d,g){const v=mergeParams(g,{"_tag:not":[...LENS_TAGS,...SUMMARY_TAGS,...UPI_TAGS]});return searchAllRecords(c,d,v)}function patientSearchParams(c,d){if(!d)return{};const g=`${SYSTEM_ZUS_UNIVERSAL_ID}|${d}`;switch(c){case"Coverage":return{"beneficiary.identifier":g};case"Condition":case"Encounter":case"MedicationAdministration":case"MedicationDispense":case"MedicationRequest":case"MedicationStatement":return{"patient.identifier":g};case"Patient":return{identifier:g};default:throw new Error(`Unhandled patient search for resource type: ${c}`)}}function mergeParams(c,d){return lodash.exports.mergeWith(c,d,(g,v)=>Array.isArray(g)?g.concat(v):void 0)}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let c=0;c<256;++c)byteToHex.push((c+256).toString(16).slice(1));function unsafeStringify(c,d=0){return(byteToHex[c[d+0]]+byteToHex[c[d+1]]+byteToHex[c[d+2]]+byteToHex[c[d+3]]+"-"+byteToHex[c[d+4]]+byteToHex[c[d+5]]+"-"+byteToHex[c[d+6]]+byteToHex[c[d+7]]+"-"+byteToHex[c[d+8]]+byteToHex[c[d+9]]+"-"+byteToHex[c[d+10]]+byteToHex[c[d+11]]+byteToHex[c[d+12]]+byteToHex[c[d+13]]+byteToHex[c[d+14]]+byteToHex[c[d+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(c,d,g){if(native.randomUUID&&!d&&!c)return native.randomUUID();c=c||{};const v=c.random||(c.rng||rng)();if(v[6]=v[6]&15|64,v[8]=v[8]&63|128,d){g=g||0;for(let b=0;b<16;++b)d[g+b]=v[b];return d}return unsafeStringify(v)}function isOperationOutcome(c){return typeof c=="object"&&c!==null?"issue"in c:!1}const codeableConceptLabel=c=>{var d,g,v,b,_,E,R;return(R=(E=(v=c==null?void 0:c.text)!=null?v:(g=(d=c==null?void 0:c.coding)==null?void 0:d[0])==null?void 0:g.display)!=null?E:(_=(b=c==null?void 0:c.coding)==null?void 0:b[0])==null?void 0:_.code)!=null?R:""};function findCoding(c,d){return lodash.exports.find(d==null?void 0:d.coding,{system:c})}function findCodingWithEnrichment(c,d){return lodash.exports.find(d==null?void 0:d.coding,{system:c,extension:[{url:SYSTEM_ENRICHMENT}]})}const findCodingByOrderOfPreference=(c,d)=>{for(let g=0;g<c.length;g+=1){const v=c[g];if(v.checkForEnrichment){const b=findCodingWithEnrichment(v.system,d);if(b)return b}else{const b=findCoding(v.system,d);if(b)return b}}};class OperationOutcomeIssueModel{constructor(d){Gr(this,"resource");this.resource=d}get display(){return codeableConceptLabel(this.resource.details)||this.resource.diagnostics||`${this.resource.code} error`}get severity(){return this.resource.severity}}class OperationOutcomeModel{constructor(d){Gr(this,"resource");this.resource=d}get display(){return this.resource.issue.filter(g=>g.severity!=="warning").map(g=>{let v="";return g.location&&g.location.length>0&&(v+=`${g.location[0]} -- `),`${v}${g.diagnostics}`}).join("; ")}get issues(){return this.resource.issue.map(d=>new OperationOutcomeIssueModel(d))}get resourceType(){return this.resource.resourceType}}function isFhirError(c){return typeof c=="object"&&c!==null?"response"in c&&"config"in c:!1}const fhirErrorResponse=(c,d)=>{const{data:g,status:v}=d.response;let b="";return isOperationOutcome(g)&&(b=new OperationOutcomeModel(g).display),{title:c,status:v,statusText:b}};class FHIRModel{constructor(d,g,v){Gr(this,"resource");Gr(this,"includedResources");Gr(this,"revIncludes");this.resource=d,this.includedResources=g,this.revIncludes=v}get id(){return this.resource.id||""}get isSummaryResource(){var d;return lodash.exports.find((d=this.resource.meta)==null?void 0:d.tag,{system:SYSTEM_SUMMARY})!==void 0}get resourceType(){return this.resource.resourceType}getBasicResourceByAction(d){return lodash.exports.find(this.revIncludes,{resourceType:"Basic",meta:{tag:[{system:SYSTEM_ZUS_PROFILE_ACTION,code:d}]}})}toString(){return`new ${this.constructor.name}(${JSON.stringify(this.resource,null,2)}
)`}}class PractitionerModel extends FHIRModel{get fullName(){var v,b;const d=(v=this.resource.name)==null?void 0:v[0];return[(b=d==null?void 0:d.given)!=null&&b.length?d.given[0]:"",d==null?void 0:d.family].filter(_=>_).join(" ")}}const getPractitioner=async(c,d)=>{let g=[];try{const{resources:v}=await searchBuilderRecords("Practitioner",d,{_id:c});g=v}catch(v){throw new Error(`Failed fetching practitioner with an id of: ${c}. ${v}`)}if(!g[0])throw new Error(`No practitioner found with an id of: ${c}`);return new PractitionerModel(g[0])};async function getUsersPractitionerReference(c){const d=claimsPractitionerId(c.authToken);if(d){const g=await getPractitioner(d,c);return{reference:`Practitioner/${d}`,type:"Practitioner",display:g.fullName}}return{display:claimsAuthEmail(c.authToken)}}const ASSEMBLER_CODING={system:SYSTEM_PROVENANCE_AGENT_TYPE,code:"assembler",display:"Assembler"},CREATE_CODING={coding:[{system:SYSTEM_PROVENANCE_ACTIVITY_TYPE,code:"CREATE",display:"create"}]},UPDATE_CODING={coding:[{system:SYSTEM_PROVENANCE_ACTIVITY_TYPE,code:"UPDATE",display:"revise"}]},createProvenance=async(c,d,g)=>{var R;const{fhirClient:v}=g,b=claimsBuilderName(g.authToken),_=parseInt(((R=d.meta)==null?void 0:R.versionId)||"0",10),E={resourceType:"Provenance",agent:[{who:await getUsersPractitionerReference(g),onBehalfOf:{display:b}},{type:{coding:[ASSEMBLER_CODING]},who:{display:"Zus Health"}}],recorded:new Date().toISOString(),target:[{reference:`${d.resourceType}/${d.id}/_history/${_}`,type:d.resourceType}]};return E.activity=c==="CREATE"?CREATE_CODING:UPDATE_CODING,v.create({resourceType:"Provenance",body:E})};async function createOrEditFhirResource(c,d){const{fhirClient:g}=d,v=c;try{if(c.id){const _=await g.update({resourceType:c.resourceType,id:c.id,body:omitEmptyArrays(c)});return isFhirError(_)||await createProvenance("UPDATE",_,d),_}const b=await g.create({resourceType:c.resourceType,body:omitEmptyArrays(c)});return isFhirError(b)||(v.id=b.id),b}catch(b){return b}}async function createFhirResourceWithProvenance(c,d){const{fhirClient:g}=d,v=claimsBuilderName(d.authToken),b=c.id||v4(),_=v4(),E={resourceType:"Bundle",type:"transaction",entry:[{request:{method:"POST",url:c.resourceType},fullUrl:b,resource:c},{request:{method:"POST",url:"Provenance"},fullUrl:_,resource:{resourceType:"Provenance",activity:CREATE_CODING,agent:[{who:await getUsersPractitionerReference(d),onBehalfOf:{display:v}},{type:{coding:[ASSEMBLER_CODING]},who:{display:"Zus Health"}}],recorded:new Date().toISOString(),target:[{reference:`${c.resourceType}/${b}`,type:c.resourceType}]}}]};return g.transaction({body:omitEmptyArrays({...E,type:"transaction"})})}async function deleteMetaTags(c,d,g){const v={resourceType:"Parameters",parameter:[{name:"meta",valueMeta:{tag:g}}]},{fhirClient:b}=d;await b.request(`${c.resourceType}/${c.id}/$meta-delete`,{method:"POST",body:JSON.stringify(v),options:{headers:{"content-type":"application/json"}}})}const QUERY_KEY_PATIENT_CONDITIONS="patientConditions",QUERY_KEY_OTHER_PROVIDER_CONDITIONS="otherProviderConditions",QUERY_KEY_CONDITION_HISTORY="conditionHistory",QUERY_KEY_PATIENT="patient",QUERY_KEY_PATIENT_MEDICATIONS="medications",QUERY_KEY_PATIENT_BUILDER_MEDICATIONS="builder-medications",QUERY_KEY_PATIENTS_LIST="patients-list",QUERY_KEY_MEDICATION_HISTORY="medication-history",editPatient=async(c,d,g)=>{const v=await g(),b=lodash.exports.cloneDeep(c.resource);b.gender=d.gender,b.birthDate=dateToISO(d.dateOfBirth),b.name=[{use:"official",family:d.lastName,given:[d.firstName]}],b.address=[{line:[d.address],city:d.city,state:d.state,postalCode:d.zipCode}];const _=[];d.phone&&_.push({system:"phone",value:d.phone}),d.email&&_.push({system:"email",value:d.email}),b.telecom=_;const E=await createOrEditFhirResource(b,v);return await queryClient.invalidateQueries([QUERY_KEY_PATIENT]),E};class OrganizationModel extends FHIRModel{get name(){return this.resource.name}}const MaritalStatuses=[{text:"Annulled",code:"A"},{text:"Divorced",code:"D"},{text:"Interlocutory",code:"I"},{text:"Legally Separated",code:"L"},{text:"Married",code:"M"},{text:"Polygamous",code:"P"},{text:"Never Married",code:"S"},{text:"Domestic Partner",code:"T"},{text:"unmarried",code:"U"},{text:"Widowed",code:"W"}];class PatientModel extends FHIRModel{get active(){return this.resource.active}get contact(){return this.resource.contact}get dob(){return formatDateISOToLocal(this.resource.birthDate)}get age(){if(!this.resource.birthDate)return;const d=parseISO(this.resource.birthDate);return differenceInYears(new Date,d)}get gender(){return this.resource.gender}get maritalStatus(){var v,b,_;const d=(_=(b=(v=this.resource.maritalStatus)==null?void 0:v.coding)==null?void 0:b[0])==null?void 0:_.code,g=MaritalStatuses.find(E=>E.code===d);return g==null?void 0:g.text}get organization(){var g;const d=findReference("Organization",this.resource.contained,this.includedResources,(g=this.resource.managingOrganization)==null?void 0:g.reference);if(d)return new OrganizationModel(d,this.includedResources)}get use(){return this.bestName.use}get UPID(){var g;const d=(g=lodash.exports.find(this.resource.identifier,{system:SYSTEM_ZUS_UNIVERSAL_ID}))==null?void 0:g.value;if(!d)throw Error(`Patient with ID ${this.resource.identifier} does not have a UPID`);return d}getPhoneNumber(d){const g={system:"phone"};d&&(g.use=d);const v=lodash.exports.find(this.resource.telecom,g);return formatPhoneNumber(v==null?void 0:v.value)}get phoneNumber(){return this.getPhoneNumber()}get email(){var d;return(d=lodash.exports.find(this.resource.telecom,{system:"email"}))==null?void 0:d.value}get bestHomeAddress(){return lodash.exports.find(this.resource.address,{use:"home"})||lodash.exports.find(this.resource.address,d=>!d.use)}get homeAddress(){return lodash.exports.cloneDeep(this.bestHomeAddress)}get bestName(){return(!this.resource.name||this.resource.name.length===0)&&(this.resource.name=[{use:"official"}]),lodash.exports.find(this.resource.name,{use:"official"})||lodash.exports.find(this.resource.name,{use:"usual"})||this.resource.name[0]||{}}get additionalNames(){if(this.bestName.given&&this.bestName.given.length>1){const[,...d]=this.bestName.given;return d.join(" ")}}get display(){return[this.firstName,this.lastName].filter(d=>d).join(" ")}get firstName(){var d;return((d=this.bestName.given)==null?void 0:d[0])||""}get fullName(){return[this.lastName,this.firstName].filter(d=>d).join(", ")}get lastName(){return this.bestName.family}get nickname(){var g;const d=lodash.exports.find(this.resource.name,{use:"nickname"});return(g=d==null?void 0:d.given)==null?void 0:g.join(" ")}get prefix(){var d;return(d=this.bestName.prefix)==null?void 0:d.join(" ")}get suffix(){var d;return(d=this.bestName.suffix)==null?void 0:d.join(" ")}}async function getBuilderFhirPatient(c,d,g,v){let b=[],_;try{const E=await searchBuilderRecords("Patient",c,{...v,identifier:`${g}|${d}`,_count:1,_include:"Patient:organization"});b=E.resources,_=E.bundle}catch(E){throw errorResponse("Failed fetching patient",E)}if(!b[0])throw errorResponse(`Failed fetching patient information for patient from patientID ${d} with system ${g}`);return new PatientModel(b[0],getIncludedResources(_))}async function getBuilderPatientsList(c,d=[]){const[g,v,b]=d,_=parseInt(`${v!=null?v:"0"}`,10)*parseInt(`${g!=null?g:"1"}`,10),E=lodash.exports.pickBy({_count:g,_total:"accurate",_offset:_,name:b});try{const{total:R,resources:M}=await searchBuilderRecords("Patient",c,E);return{searchParams:E,patients:M.map(P=>new PatientModel(P)),total:R}}catch(R){throw errorResponse("Failed fetching patients",R)}}const PATIENT_STALE_TIME=1e3*60*5,CTWPatientContext=react.exports.createContext({patientID:"",systemURL:""});function PatientProvider({children:c,patientUPID:d,patientID:g,systemURL:v,tags:b,onPatientSave:_}){const E=react.exports.useMemo(()=>({patientID:d||g,systemURL:d?SYSTEM_ZUS_UNIVERSAL_ID:v,tags:b,onPatientSave:_}),[g,d,v,b,_]);return React.createElement(CTWPatientContext.Provider,{value:E},c)}function usePatient(){const{getRequestContext:c}=useCTW(),{patientID:d,systemURL:g,tags:v}=react.exports.useContext(CTWPatientContext);return useQuery([QUERY_KEY_PATIENT,d,g,v],async()=>{var _;const b=await c();return getBuilderFhirPatient(b,d,g,{_tag:(_=v==null?void 0:v.map(E=>`${E.system}|${E.code}`))!=null?_:[]})},{staleTime:PATIENT_STALE_TIME})}function useHandlePatientSave(c){const{getRequestContext:d}=useCTW(),{onPatientSave:g}=react.exports.useContext(CTWPatientContext);return react.exports.useCallback(async v=>g?g(v):editPatient(c,v,d),[g,c,d])}function useQueryWithPatient(c,d,g,v=!0){var E,R;const{getRequestContext:b}=useCTW(),_=usePatient();return useQuery([c,(E=_.data)==null?void 0:E.UPID,...d],async()=>{const M=await b();return g(M,_.data,d)},{enabled:!!((R=_.data)!=null&&R.UPID)&&v})}try{PatientProvider.displayName="PatientProvider",PatientProvider.__docgenInfo={description:"",displayName:"PatientProvider",props:{tags:{defaultValue:null,description:"",name:"tags",required:!1,type:{name:"Tag[]"}},onPatientSave:{defaultValue:null,description:"",name:"onPatientSave",required:!1,type:{name:"((data: PatientFormData) => Promise<void>)"}},patientUPID:{defaultValue:null,description:"",name:"patientUPID",required:!1,type:{name:"string"}},patientID:{defaultValue:null,description:"",name:"patientID",required:!1,type:{name:"string"}},systemURL:{defaultValue:null,description:"",name:"systemURL",required:!1,type:{name:"string"}}}}}catch{}try{useHandlePatientSave.displayName="useHandlePatientSave",useHandlePatientSave.__docgenInfo={description:"",displayName:"useHandlePatientSave",props:{active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean | undefined"}},contact:{defaultValue:null,description:"",name:"contact",required:!0,type:{name:"PatientContact[] | undefined"}},dob:{defaultValue:null,description:"",name:"dob",required:!0,type:{name:"string | undefined"}},age:{defaultValue:null,description:"",name:"age",required:!0,type:{name:"number | undefined"}},gender:{defaultValue:null,description:"",name:"gender",required:!0,type:{name:"string | undefined"}},maritalStatus:{defaultValue:null,description:"",name:"maritalStatus",required:!0,type:{name:"string | undefined"}},organization:{defaultValue:null,description:"",name:"organization",required:!0,type:{name:"OrganizationModel | undefined"}},use:{defaultValue:null,description:"",name:"use",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"usual"'},{value:'"official"'},{value:'"temp"'},{value:'"nickname"'},{value:'"anonymous"'},{value:'"old"'},{value:'"maiden"'}]}},UPID:{defaultValue:null,description:"",name:"UPID",required:!0,type:{name:"string"}},getPhoneNumber:{defaultValue:null,description:"",name:"getPhoneNumber",required:!0,type:{name:'(use?: "temp" | "old" | "home" | "work" | "mobile" | undefined) => string | undefined'}},phoneNumber:{defaultValue:null,description:"",name:"phoneNumber",required:!0,type:{name:"string | undefined"}},email:{defaultValue:null,description:"",name:"email",required:!0,type:{name:"string | undefined"}},bestHomeAddress:{defaultValue:null,description:"",name:"bestHomeAddress",required:!0,type:{name:"Address | undefined"}},homeAddress:{defaultValue:null,description:"",name:"homeAddress",required:!0,type:{name:"Address | undefined"}},bestName:{defaultValue:null,description:"",name:"bestName",required:!0,type:{name:"HumanName"}},additionalNames:{defaultValue:null,description:"",name:"additionalNames",required:!0,type:{name:"string | undefined"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string"}},firstName:{defaultValue:null,description:"",name:"firstName",required:!0,type:{name:"string"}},fullName:{defaultValue:null,description:"",name:"fullName",required:!0,type:{name:"string"}},lastName:{defaultValue:null,description:"",name:"lastName",required:!0,type:{name:"string | undefined"}},nickname:{defaultValue:null,description:"",name:"nickname",required:!0,type:{name:"string | undefined"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!0,type:{name:"string | undefined"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!0,type:{name:"string | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Patient"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}class MedicationAdministrationModel extends FHIRModel{get dosageDisplay(){const{text:d,route:g,dose:v}=this.resource.dosage||{};return d||fp.compact([v==null?void 0:v.value,v==null?void 0:v.unit]).join(" ")}get dosageRoute(){const{route:d}=this.resource.dosage||{};return d==null?void 0:d.text}get effectivePeriod(){const{start:d,end:g}=this.resource.effectivePeriod||{};return{start:d?formatDateISOToLocal(d):"",end:g?formatDateISOToLocal(g):""}}}class MedicationDispenseModel extends FHIRModel{get includedPerformer(){var v,b,_,E;const d=(b=(v=this.resource.performer)==null?void 0:v[0])==null?void 0:b.actor.reference,g=findReference("Practitioner",this.resource.contained,this.includedResources,d);return g?new PractitionerModel(g).fullName:(E=(_=this.resource.performer)==null?void 0:_[0])==null?void 0:E.actor.display}get performer(){return getPerformingOrganization(this.resource,this.includedResources)}get performerDetails(){var g,v,b,_,E;const{performer:d}=this;return{name:(g=d==null?void 0:d.name)!=null?g:"",address:(b=(v=d==null?void 0:d.address)==null?void 0:v[0].text)!=null?b:"",telecom:(E=(_=d==null?void 0:d.telecom)==null?void 0:_[0].value)!=null?E:""}}get status(){return this.resource.status}get quantityDisplay(){const{value:d,unit:g="units"}=this.resource.quantity||{};return d?`${d} ${g}`:void 0}get supplied(){const{value:d,unit:g="days"}=this.resource.daysSupply||{};return d?`${d} ${g}`:void 0}}class MedicationRequestModel extends FHIRModel{get includedRequester(){var v,b;const d=(v=this.resource.requester)==null?void 0:v.reference,g=findReference("Practitioner",this.resource.contained,this.includedResources,d);return g?new PractitionerModel(g).fullName:(b=this.resource.requester)==null?void 0:b.display}get pharmacy(){var b,_,E;const{reference:d,display:g}=((b=this.resource.dispenseRequest)==null?void 0:b.performer)||{},v=findReference("Organization",this.resource.contained,this.includedResources,d);if(v){const R=(_=v.telecom)==null?void 0:_[0].value,{city:M,state:P,postalCode:O,text:H,line:Q=[]}=((E=v.address)==null?void 0:E[0])||{},ee=fp.compact([M,`${P} ${O}`]).join(", ");return{telecom:R,name:v.name,address:H!=null?H:fp.compact([Q,ee]).join(`
`)}}return{name:g}}}class MedicationStatementModel extends FHIRModel{constructor(){super(...arguments);Gr(this,"builderPatientRxNormStatus")}get basedOn(){var g,v;return(v=(g=this.resource.basedOn)==null?void 0:g[0])==null?void 0:v.type}get category(){return codeableConceptLabel(this.resource.category)}get context(){var g;return(g=this.resource.context)==null?void 0:g.display}get dateAsserted(){return formatDateISOToLocal(this.resource.dateAsserted)}set dateAsserted(g){g instanceof Date?this.resource.dateAsserted=dateToISO(g):this.resource.dateAsserted=g}get derivedFrom(){var g;return((g=this.resource.derivedFrom)==null?void 0:g.map(({display:v})=>v||""))||[]}get aggregatedFrom(){const g=fp.find(v=>v.url===LENS_EXTENSION_AGGREGATED_FROM||v.url===CTW_EXTENSION_LENS_AGGREGATED_FROM,this.resource.extension);return g!=null&&g.extension?fp.compact(g.extension.map(fp.get("valueReference"))):fp.compact(this.resource.derivedFrom)}get display(){return codeableConceptLabel(getMedicationCodeableConcept(this.resource,this.includedResources))}get rxNormCoding(){return getIdentifyingRxNormCoding(this.resource,this.includedResources)}get dosage(){var g,v;return(v=(g=this.resource.dosage)==null?void 0:g[0])==null?void 0:v.text}get effectiveStart(){var g;return formatDateISOToLocal((g=this.resource.effectivePeriod)==null?void 0:g.start)}get identifier(){var g,v;return(v=(g=this.resource.identifier)==null?void 0:g[0])==null?void 0:v.value}get informationSource(){return this.resource.informationSource||void 0}set informationSource(g){this.resource.informationSource=g}get medicationReference(){var g;return(g=this.resource.medicationReference)==null?void 0:g.display}get notesDisplay(){var g;return((g=this.resource.note)==null?void 0:g.map(({text:v})=>v))||[]}get partOf(){var g,v;return(v=(g=this.resource.partOf)==null?void 0:g[0])==null?void 0:v.display}get patientStatus(){var g,v;return patientStatus((v=this.builderPatientRxNormStatus)==null?void 0:v[(g=this.rxNorm)!=null?g:""])}get rxNorm(){return getIdentifyingRxNormCode(this.resource,this.includedResources)}get reason(){var g;return codeableConceptLabel((g=this.resource.reasonCode)==null?void 0:g[0])}get reasonReference(){return this.resource.reasonReference}get status(){return fp.capitalize(this.resource.status)}get statusReason(){var g;return codeableConceptLabel((g=this.resource.statusReason)==null?void 0:g[0])}get subject(){return this.resource.subject}get subjectID(){var v;const[,g]=((v=this.resource.subject.reference)==null?void 0:v.split("/"))||[];return g||""}get lastFillDate(){var g,v;return formatDateISOToLocal((v=(g=this.resource.extension)==null?void 0:g.find(b=>b.url===LENS_EXTENSION_MEDICATION_LAST_FILL_DATE))==null?void 0:v.valueDateTime)}get quantity(){var v,b;const g=(b=(v=this.resource.extension)==null?void 0:v.find(_=>_.url===LENS_EXTENSION_MEDICATION_QUANTITY))==null?void 0:b.valueQuantity;if(g)return`${g.value} ${g.unit||""}`}get daysSupply(){var g,v,b,_;return(_=(b=(v=(g=this.resource.extension)==null?void 0:g.find(E=>E.url===LENS_EXTENSION_MEDICATION_DAYS_SUPPLY))==null?void 0:v.valueQuantity)==null?void 0:b.value)==null?void 0:_.toString()}get refills(){var g,v,b;return(b=(v=(g=this.resource.extension)==null?void 0:g.find(_=>_.url===LENS_EXTENSION_MEDICATION_REFILLS))==null?void 0:v.valueUnsignedInt)==null?void 0:b.toString()}get lastPrescriber(){var b,_;const g=(_=(b=this.resource.extension)==null?void 0:b.find(E=>E.url===LENS_EXTENSION_MEDICATION_LAST_PRESCRIBER))==null?void 0:_.valueReference;if(!(g!=null&&g.type)||!g.reference)return;const v=findReference(g.type,this.resource.contained,this.includedResources,g.reference);if(v!=null&&v.name){if(typeof v.name=="string")return v.name;const{family:E,given:R=[]}=v.name[0];return fp.compact([E,R[0]]).join(", ")}return g.display}get lastPrescribedDate(){var g,v;return formatDateISOToLocal((v=(g=this.resource.extension)==null?void 0:g.find(b=>b.url===LENS_EXTENSION_MEDICATION_LAST_PRESCRIBED_DATE))==null?void 0:v.valueDateTime)}}class MedicationModel extends FHIRModel{get performer(){var d;return(d=getPerformingOrganization(this.resource,this.includedResources))==null?void 0:d.name}get status(){return this.resource.status}get dosage(){var d,g,v;switch(this.resource.resourceType){case"MedicationStatement":return(g=(d=this.resource.dosage)==null?void 0:d[0])==null?void 0:g.text;case"MedicationAdministration":return new MedicationAdministrationModel(this.resource,this.includedResources).dosageDisplay;case"MedicationDispense":case"MedicationRequest":return codeableConceptLabel((v=this.resource.dosageInstruction)==null?void 0:v[0]);default:return""}}get date(){var d,g,v,b,_,E,R,M,P;switch(this.resource.resourceType){case"MedicationStatement":return(g=this.resource.dateAsserted)!=null?g:(d=this.resource.effectivePeriod)==null?void 0:d.start;case"MedicationAdministration":return(v=this.resource.effectivePeriod)==null?void 0:v.start;case"MedicationDispense":return(b=this.resource.whenHandedOver)!=null?b:this.resource.whenPrepared;case"MedicationRequest":return(P=this.resource.authoredOn)!=null?P:(M=(R=(E=(_=this.resource.dosageInstruction)==null?void 0:_[0].timing)==null?void 0:E.repeat)==null?void 0:R.boundsPeriod)==null?void 0:M.start;default:return""}}get dateLocal(){return formatDateISOToLocal(this.date)}get patient(){var g;const d=findReference("Patient",this.resource.contained,this.includedResources,(g=this.resource.subject)==null?void 0:g.reference);if(d)return new PatientModel(d,this.includedResources)}get prescriber(){switch(this.resource.resourceType){case"MedicationStatement":return new MedicationStatementModel(this.resource,this.includedResources).lastPrescriber;case"MedicationDispense":return new MedicationDispenseModel(this.resource,this.includedResources).includedPerformer;case"MedicationRequest":return new MedicationRequestModel(this.resource,this.includedResources).includedRequester;default:return}}}function sort(c,d,g,v=!1){const b=lodash.exports.isString(d)?fp.get(d):d;return v?sortByDate(c,b,g):lodash.exports.orderBy(c,d,g)}function sortByDate(c,d,g){return c.sort((v,b)=>{const _=d(v),E=d(b);if(!_&&!E)return 0;if(!_)return g==="asc"?-1:1;if(!E)return g==="asc"?1:-1;const R=new Date(_).getTime(),M=new Date(E).getTime();return g==="asc"?R-M:M-R}),c}const omitClientFilters=fp.omit(["informationSourceNot","informationSource"]);function applySearchFiltersToResponse(c,d={}){let g=filterMedicationsWithNoRxNorms(c.resources,c.bundle);return d.informationSource&&(g=g.filter(v=>{var b;return((b=v.informationSource)==null?void 0:b.type)===d.informationSource})),d.informationSourceNot&&(g=g.filter(v=>{var b;return((b=v.informationSource)==null?void 0:b.type)!==d.informationSourceNot})),g}async function getBuilderMedications(c,d,g=[]){const[v={}]=g;try{const b=await searchBuilderRecords("MedicationStatement",c,{patientUPID:d.UPID,_include:"MedicationStatement:medication",...omitClientFilters(v)}),_=applySearchFiltersToResponse(b,v);return{bundle:b.bundle,medications:_}}catch(b){throw errorResponse("Failed fetching medications for patient",b)}}async function getActiveMedications(c,d,g=[]){const[v={}]=g;try{const b=await searchLensRecords("MedicationStatement",c,"ActiveMedications",{patientUPID:d.UPID,_include:"MedicationStatement:medication",...omitClientFilters(v)}),_=applySearchFiltersToResponse(b,v);return{bundle:b.bundle,medications:_}}catch(b){throw errorResponse("Failed fetching medications for patient",b)}}function filterMedicationsWithNoRxNorms(c,d){const g=bundleToResourceMap(d);return c.filter(v=>getIdentifyingRxNormCode(v,g)!==void 0)}function splitMedications(c,d,g){const v=c.filter(_=>!d.some(E=>getIdentifyingRxNormCode(E,g)===getIdentifyingRxNormCode(_,g)));return{builderMedications:d.map(_=>{var O,H,Q;const E=c.find(ee=>getIdentifyingRxNormCode(ee,g)===getIdentifyingRxNormCode(_,g));if(!E)return _;const R=lodash.exports.cloneDeep(_),M=[LENS_EXTENSION_MEDICATION_LAST_FILL_DATE,LENS_EXTENSION_MEDICATION_LAST_PRESCRIBED_DATE,LENS_EXTENSION_MEDICATION_QUANTITY,LENS_EXTENSION_MEDICATION_DAYS_SUPPLY,LENS_EXTENSION_MEDICATION_REFILLS,LENS_EXTENSION_MEDICATION_LAST_PRESCRIBER];R.extension=(O=E.extension)==null?void 0:O.filter(ee=>M.includes(ee.url));const P=lodash.exports.cloneDeep((H=E.extension)==null?void 0:H.find(ee=>ee.url===LENS_EXTENSION_AGGREGATED_FROM));return P&&(P.url=CTW_EXTENSION_LENS_AGGREGATED_FROM,(Q=R.extension)==null||Q.push(P)),R}),otherProviderMedications:v}}function useMedicationHistory(c){const d=c?new MedicationStatementModel(c).aggregatedFrom:[],g=fp.pipe(fp.get("reference"),fp.split("/"),fp.last),v=fp.pipe(fp.groupBy(fp.get("type")),fp.mapValues(fp.map(g)))(d);return useQueryWithPatient(QUERY_KEY_MEDICATION_HISTORY,[(c==null?void 0:c.id)||"empty"],async(b,_)=>{try{if(!c)return{includedResources:{},medications:[]};const[E,R,M,P]=await Promise.all([searchWrapper("MedicationStatement",b,_.UPID,v.MedicationStatement),searchWrapper("MedicationAdministration",b,_.UPID,v.MedicationAdministration),searchWrapper("MedicationRequest",b,_.UPID,v.MedicationRequest,["MedicationRequest:requester"]),searchWrapper("MedicationDispense",b,_.UPID,v.MedicationDispense,["MedicationDispense:performer","MedicationDispense:prescription"])]),O=getMergedIncludedResources(fp.compact([E.bundle,R.bundle,M.bundle,P.bundle])),H=fp.compact([...E.resources,...R.resources,...M.resources,...P.resources]).map(ee=>new MedicationModel(ee,O));return{medications:sort(lodash.exports.uniqWith(H,(ee,V)=>ee.date===V.date&&ee.resource.resourceType===V.resource.resourceType),"date","desc",!0),includedResources:O}}catch(E){throw new Error(`Failed fetching medication history for medication ${c==null?void 0:c.id}: ${E}`)}})}function useLastPrescriber(c){const[d,g]=react.exports.useState(),[v,b]=react.exports.useState(!0),_=useMedicationHistory(c);return react.exports.useEffect(()=>{const{includedResources:E={},medications:R=[]}=_.data||{};if(d===void 0&&R.length){const M=fp.pipe(fp.map(fp.get("resource")),fp.filter(fp.propEq("resourceType","MedicationRequest")),fp.sortBy(P=>Date.parse(P.authoredOn)),fp.map(P=>new MedicationModel(P,E)),fp.last,fp.get("prescriber"))(R);g(M||""),b(!1)}},[d,_.data]),{isLoading:v,lastPrescriber:d}}function searchWrapper(c,d,g,v=[],b=[]){return v.length>0?searchAllRecords(c,d,{_id:v.join(","),_include:[`${c}:patient`,`${c}:medication`,...b],"_include:iterate":"Patient:organization","patient.identifier":`${SYSTEM_ZUS_UNIVERSAL_ID}|${g}`}):{resources:[],bundle:void 0}}const MEDICATION_HISTORY_LIMIT=10;function MedicationHistory({medication:c}){const[d,g]=react.exports.useState([]),v=useMedicationHistory(c.resource),b=v.isLoading;return react.exports.useEffect(()=>{if(v.data){const{medications:_}=v.data;g(sortMedHistory(_).map(createMedicationDetailsCard))}},[v.data]),b?React.createElement(React.Fragment,null,React.createElement("h2",{className:"ctw-text-lg ctw-font-semibold"},"Medication History"),React.createElement(Loading,{message:""})):React.createElement(React.Fragment,null,React.createElement("h2",{className:"ctw-text-lg ctw-font-semibold"},"Medication History"),d.length?React.createElement(CollapsibleDataListStack,{entries:d,limit:MEDICATION_HISTORY_LIMIT}):React.createElement("span",null,"No history available for this medication."))}function createMedicationStatementCard(c){var v;const d=c.resource,g=new MedicationStatementModel(d);return{date:c.dateLocal,id:c.id,title:"Medication Reviewed",hideEmpty:!1,subtitle:((v=g.informationSource)==null?void 0:v.display)||"",data:[{label:"Status",value:lodash.exports.capitalize(g.status)},{label:"Instructions",value:g.dosage}]}}function createMedicationDetailsCard(c){if(c.resourceType==="MedicationStatement")return createMedicationStatementCard(c);if(c.resourceType==="MedicationRequest")return createMedicationRequestCard(c);if(c.resourceType==="MedicationDispense")return createMedicationDispenseCard(c);if(c.resourceType==="MedicationAdministration")return createMedicationAdminCard(c);throw new Error(`Unknown medication resource type "${c.resourceType}"`)}function createMedicationRequestCard(c){const d=c.resource,{prescriber:g}=c,{name:v,address:b,telecom:_}=new MedicationRequestModel(d,c.includedResources).pharmacy,{numberOfRepeatsAllowed:E="",initialFill:R}=d.dispenseRequest||{},{value:M="",unit:P=""}=(R==null?void 0:R.quantity)||{};return{date:c.dateLocal,id:c.id,title:"Prescription Ordered",subtitle:g,hideEmpty:!1,data:[{label:"Quantity",value:[M,P].join(" ")},{label:"Refills Allowed",value:E},{label:"Instructions",value:c.dosage},{label:"Prescriber",value:g},{label:"Pharmacy",value:React.createElement(React.Fragment,null,v&&React.createElement("div",null,v),b&&React.createElement("div",null,b),_&&React.createElement("div",null,"T: ",_))}]}}function createMedicationDispenseCard(c){const d=c.resource,g=new MedicationDispenseModel(d,c.includedResources),{quantityDisplay:v,supplied:b,performerDetails:_}=g,{name:E,address:R,telecom:M}=_;return{date:c.dateLocal,hideEmpty:!1,id:c.id,title:"Medication Filled",subtitle:lodash.exports.compact([v,b?`${b} supplied`:null]).join(", "),data:[{label:"Quantity",value:v},{label:"Days supply",value:b},{label:"Pharmacy",value:React.createElement(React.Fragment,null,E&&React.createElement("div",null,E),R&&React.createElement("div",null,R),M&&React.createElement("div",null,"T: ",M))}]}}function createMedicationAdminCard(c){const d=c.resource,g=new MedicationAdministrationModel(d,c.includedResources);return{id:c.id,date:c.dateLocal,hideEmpty:!1,title:"Medication Administered",subtitle:lodash.exports.compact([g.dosageDisplay,g.dosageRoute]).join(", "),data:[{label:"Dosage",value:g.dosageDisplay},{label:"Route",value:g.dosageRoute},{label:"Start Date",value:g.effectivePeriod.start},{label:"End Date",value:g.effectivePeriod.end}]}}try{MedicationHistory.displayName="MedicationHistory",MedicationHistory.__docgenInfo={description:"Displays the history of a medication",displayName:"MedicationHistory",props:{medication:{defaultValue:null,description:"",name:"medication",required:!0,type:{name:"MedicationStatementModel"}}}}}catch{}function getDataEntriesFromMedicationStatement(c,d){return c?[{label:"Status",value:lodash.exports.capitalize(c.status)},{label:"Last Fill Date",value:c.lastFillDate},{label:"Quantity",value:c.quantity},{label:"Days Supply",value:c.daysSupply},{label:"Refills",value:c.refills},{label:"Instructions",value:c.dosage},{label:"Prescriber",value:d},{label:"Last Prescribed Date",value:c.lastPrescribedDate},...entryFromArray("Note",c.notesDisplay)]:[]}const MedicationDrawer=({medication:c,...d})=>{const{lastPrescriber:g,isLoading:v}=useLastPrescriber(c==null?void 0:c.resource),b=getDataEntriesFromMedicationStatement(c,g);return React.createElement(Drawer,{title:"Medication Details",...d},React.createElement(Drawer.Body,null,React.createElement("div",{className:"ctw-space-y-5"},React.createElement("div",{className:"ctw-flex ctw-justify-between ctw-space-x-8"},React.createElement("h3",{className:"ctw-m-0 ctw-text-3xl ctw-font-light"},c==null?void 0:c.display)),v&&React.createElement(Loading,null),!v&&React.createElement(DataList,{title:"Summary",data:b}),c&&React.createElement(MedicationHistory,{medication:c}))),React.createElement(Drawer.Footer,null,React.createElement("div",{className:"ctw-flex ctw-justify-end"},React.createElement("button",{type:"button",className:"ctw-btn-default",onClick:d.onClose},"Close"))))};try{MedicationDrawer.displayName="MedicationDrawer",MedicationDrawer.__docgenInfo={description:"",displayName:"MedicationDrawer",props:{medication:{defaultValue:null,description:"",name:"medication",required:!1,type:{name:"MedicationStatementModel"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}var resizeObservers=[],hasActiveObservations=function(){return resizeObservers.some(function(c){return c.activeTargets.length>0})},hasSkippedObservations=function(){return resizeObservers.some(function(c){return c.skippedTargets.length>0})},msg="ResizeObserver loop completed with undelivered notifications.",deliverResizeLoopError=function(){var c;typeof ErrorEvent=="function"?c=new ErrorEvent("error",{message:msg}):(c=document.createEvent("Event"),c.initEvent("error",!1,!1),c.message=msg),window.dispatchEvent(c)},ResizeObserverBoxOptions;(function(c){c.BORDER_BOX="border-box",c.CONTENT_BOX="content-box",c.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(ResizeObserverBoxOptions||(ResizeObserverBoxOptions={}));var freeze$1=function(c){return Object.freeze(c)},ResizeObserverSize=function(){function c(d,g){this.inlineSize=d,this.blockSize=g,freeze$1(this)}return c}(),DOMRectReadOnly=function(){function c(d,g,v,b){return this.x=d,this.y=g,this.width=v,this.height=b,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,freeze$1(this)}return c.prototype.toJSON=function(){var d=this,g=d.x,v=d.y,b=d.top,_=d.right,E=d.bottom,R=d.left,M=d.width,P=d.height;return{x:g,y:v,top:b,right:_,bottom:E,left:R,width:M,height:P}},c.fromRect=function(d){return new c(d.x,d.y,d.width,d.height)},c}(),isSVG=function(c){return c instanceof SVGElement&&"getBBox"in c},isHidden=function(c){if(isSVG(c)){var d=c.getBBox(),g=d.width,v=d.height;return!g&&!v}var b=c,_=b.offsetWidth,E=b.offsetHeight;return!(_||E||c.getClientRects().length)},isElement=function(c){var d;if(c instanceof Element)return!0;var g=(d=c==null?void 0:c.ownerDocument)===null||d===void 0?void 0:d.defaultView;return!!(g&&c instanceof g.Element)},isReplacedElement=function(c){switch(c.tagName){case"INPUT":if(c.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},global=typeof window<"u"?window:{},cache=new WeakMap,scrollRegexp=/auto|scroll/,verticalRegexp=/^tb|vertical/,IE=/msie|trident/i.test(global.navigator&&global.navigator.userAgent),parseDimension=function(c){return parseFloat(c||"0")},size=function(c,d,g){return c===void 0&&(c=0),d===void 0&&(d=0),g===void 0&&(g=!1),new ResizeObserverSize((g?d:c)||0,(g?c:d)||0)},zeroBoxes=freeze$1({devicePixelContentBoxSize:size(),borderBoxSize:size(),contentBoxSize:size(),contentRect:new DOMRectReadOnly(0,0,0,0)}),calculateBoxSizes=function(c,d){if(d===void 0&&(d=!1),cache.has(c)&&!d)return cache.get(c);if(isHidden(c))return cache.set(c,zeroBoxes),zeroBoxes;var g=getComputedStyle(c),v=isSVG(c)&&c.ownerSVGElement&&c.getBBox(),b=!IE&&g.boxSizing==="border-box",_=verticalRegexp.test(g.writingMode||""),E=!v&&scrollRegexp.test(g.overflowY||""),R=!v&&scrollRegexp.test(g.overflowX||""),M=v?0:parseDimension(g.paddingTop),P=v?0:parseDimension(g.paddingRight),O=v?0:parseDimension(g.paddingBottom),H=v?0:parseDimension(g.paddingLeft),Q=v?0:parseDimension(g.borderTopWidth),ee=v?0:parseDimension(g.borderRightWidth),V=v?0:parseDimension(g.borderBottomWidth),W=v?0:parseDimension(g.borderLeftWidth),Y=H+P,U=M+O,G=W+ee,te=Q+V,B=R?c.offsetHeight-te-c.clientHeight:0,j=E?c.offsetWidth-G-c.clientWidth:0,X=b?Y+G:0,oe=b?U+te:0,be=v?v.width:parseDimension(g.width)-X-j,ae=v?v.height:parseDimension(g.height)-oe-B,ie=be+Y+j+G,Se=ae+U+B+te,mt=freeze$1({devicePixelContentBoxSize:size(Math.round(be*devicePixelRatio),Math.round(ae*devicePixelRatio),_),borderBoxSize:size(ie,Se,_),contentBoxSize:size(be,ae,_),contentRect:new DOMRectReadOnly(H,M,be,ae)});return cache.set(c,mt),mt},calculateBoxSize=function(c,d,g){var v=calculateBoxSizes(c,g),b=v.borderBoxSize,_=v.contentBoxSize,E=v.devicePixelContentBoxSize;switch(d){case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:return E;case ResizeObserverBoxOptions.BORDER_BOX:return b;default:return _}},ResizeObserverEntry=function(){function c(d){var g=calculateBoxSizes(d);this.target=d,this.contentRect=g.contentRect,this.borderBoxSize=freeze$1([g.borderBoxSize]),this.contentBoxSize=freeze$1([g.contentBoxSize]),this.devicePixelContentBoxSize=freeze$1([g.devicePixelContentBoxSize])}return c}(),calculateDepthForNode=function(c){if(isHidden(c))return 1/0;for(var d=0,g=c.parentNode;g;)d+=1,g=g.parentNode;return d},broadcastActiveObservations=function(){var c=1/0,d=[];resizeObservers.forEach(function(E){if(E.activeTargets.length!==0){var R=[];E.activeTargets.forEach(function(P){var O=new ResizeObserverEntry(P.target),H=calculateDepthForNode(P.target);R.push(O),P.lastReportedSize=calculateBoxSize(P.target,P.observedBox),H<c&&(c=H)}),d.push(function(){E.callback.call(E.observer,R,E.observer)}),E.activeTargets.splice(0,E.activeTargets.length)}});for(var g=0,v=d;g<v.length;g++){var b=v[g];b()}return c},gatherActiveObservationsAtDepth=function(c){resizeObservers.forEach(function(g){g.activeTargets.splice(0,g.activeTargets.length),g.skippedTargets.splice(0,g.skippedTargets.length),g.observationTargets.forEach(function(b){b.isActive()&&(calculateDepthForNode(b.target)>c?g.activeTargets.push(b):g.skippedTargets.push(b))})})},process$1=function(){var c=0;for(gatherActiveObservationsAtDepth(c);hasActiveObservations();)c=broadcastActiveObservations(),gatherActiveObservationsAtDepth(c);return hasSkippedObservations()&&deliverResizeLoopError(),c>0},trigger,callbacks=[],notify=function(){return callbacks.splice(0).forEach(function(c){return c()})},queueMicroTask=function(c){if(!trigger){var d=0,g=document.createTextNode(""),v={characterData:!0};new MutationObserver(function(){return notify()}).observe(g,v),trigger=function(){g.textContent="".concat(d?d--:d++)}}callbacks.push(c),trigger()},queueResizeObserver=function(c){queueMicroTask(function(){requestAnimationFrame(c)})},watching=0,isWatching=function(){return!!watching},CATCH_PERIOD=250,observerConfig={attributes:!0,characterData:!0,childList:!0,subtree:!0},events=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],time=function(c){return c===void 0&&(c=0),Date.now()+c},scheduled=!1,Scheduler=function(){function c(){var d=this;this.stopped=!0,this.listener=function(){return d.schedule()}}return c.prototype.run=function(d){var g=this;if(d===void 0&&(d=CATCH_PERIOD),!scheduled){scheduled=!0;var v=time(d);queueResizeObserver(function(){var b=!1;try{b=process$1()}finally{if(scheduled=!1,d=v-time(),!isWatching())return;b?g.run(1e3):d>0?g.run(d):g.start()}})}},c.prototype.schedule=function(){this.stop(),this.run()},c.prototype.observe=function(){var d=this,g=function(){return d.observer&&d.observer.observe(document.body,observerConfig)};document.body?g():global.addEventListener("DOMContentLoaded",g)},c.prototype.start=function(){var d=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),events.forEach(function(g){return global.addEventListener(g,d.listener,!0)}))},c.prototype.stop=function(){var d=this;this.stopped||(this.observer&&this.observer.disconnect(),events.forEach(function(g){return global.removeEventListener(g,d.listener,!0)}),this.stopped=!0)},c}(),scheduler=new Scheduler,updateCount=function(c){!watching&&c>0&&scheduler.start(),watching+=c,!watching&&scheduler.stop()},skipNotifyOnElement=function(c){return!isSVG(c)&&!isReplacedElement(c)&&getComputedStyle(c).display==="inline"},ResizeObservation=function(){function c(d,g){this.target=d,this.observedBox=g||ResizeObserverBoxOptions.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return c.prototype.isActive=function(){var d=calculateBoxSize(this.target,this.observedBox,!0);return skipNotifyOnElement(this.target)&&(this.lastReportedSize=d),this.lastReportedSize.inlineSize!==d.inlineSize||this.lastReportedSize.blockSize!==d.blockSize},c}(),ResizeObserverDetail=function(){function c(d,g){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=d,this.callback=g}return c}(),observerMap=new WeakMap,getObservationIndex=function(c,d){for(var g=0;g<c.length;g+=1)if(c[g].target===d)return g;return-1},ResizeObserverController=function(){function c(){}return c.connect=function(d,g){var v=new ResizeObserverDetail(d,g);observerMap.set(d,v)},c.observe=function(d,g,v){var b=observerMap.get(d),_=b.observationTargets.length===0;getObservationIndex(b.observationTargets,g)<0&&(_&&resizeObservers.push(b),b.observationTargets.push(new ResizeObservation(g,v&&v.box)),updateCount(1),scheduler.schedule())},c.unobserve=function(d,g){var v=observerMap.get(d),b=getObservationIndex(v.observationTargets,g),_=v.observationTargets.length===1;b>=0&&(_&&resizeObservers.splice(resizeObservers.indexOf(v),1),v.observationTargets.splice(b,1),updateCount(-1))},c.disconnect=function(d){var g=this,v=observerMap.get(d);v.observationTargets.slice().forEach(function(b){return g.unobserve(d,b.target)}),v.activeTargets.splice(0,v.activeTargets.length)},c}(),ResizeObserver$2=function(){function c(d){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof d!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ResizeObserverController.connect(this,d)}return c.prototype.observe=function(d,g){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(d))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.observe(this,d,g)},c.prototype.unobserve=function(d){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(d))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.unobserve(this,d)},c.prototype.disconnect=function(){ResizeObserverController.disconnect(this)},c.toString=function(){return"function ResizeObserver () { [polyfill code] }"},c}();const usePassiveLayoutEffect=React[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],useLayoutEffect=usePassiveLayoutEffect,useLatest=c=>{const d=react.exports.useRef(c);return react.exports.useEffect(()=>{d.current=c}),d},useLatest$1=useLatest,ResizeObserver$1=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:ResizeObserver$2;function _ref$1(){}function useResizeObserver(c,d){const g=getResizeObserver(),v=useLatest$1(d);return useLayoutEffect(()=>{let b=!1;const _=c&&"current"in c?c.current:c;if(!_)return _ref$1;function E(R,M){b||v.current(R,M)}return g.subscribe(_,E),()=>{b=!0,g.unsubscribe(_,E)}},[c,g,v]),g.observer}function createResizeObserver(){let c=!1,d=[];const g=new Map,v=new ResizeObserver$1((b,_)=>{d=d.concat(b);function E(){const R=new Set;for(let M=0;M<d.length;M++){if(R.has(d[M].target))continue;R.add(d[M].target);const P=g.get(d[M].target);P==null||P.forEach(O=>O(d[M],_))}d=[],c=!1}c||window.requestAnimationFrame(E),c=!0});return{observer:v,subscribe(b,_){var E;v.observe(b);const R=(E=g.get(b))!==null&&E!==void 0?E:[];R.push(_),g.set(b,R)},unsubscribe(b,_){var E;const R=(E=g.get(b))!==null&&E!==void 0?E:[];if(R.length===1){v.unobserve(b),g.delete(b);return}const M=R.indexOf(_);M!==-1&&R.splice(M,1),g.set(b,R)}}}let _resizeObserver;const getResizeObserver=()=>_resizeObserver||(_resizeObserver=createResizeObserver()),useIsomorphicLayoutEffect=typeof window<"u"?react.exports.useLayoutEffect:react.exports.useEffect;function useBreakpoints(c){const{theme:d}=useCTW(),[g,v]=react.exports.useState(lodash.exports.mapValues(defaultBreakpoints,()=>!1));function b(){const _=c.current;if(!_)return;const{width:E}=_.getBoundingClientRect(),R={};Object.entries(d.breakpoints).forEach(([M,P])=>{R[M]=E<P}),v(R)}return useIsomorphicLayoutEffect(b,[c,d]),useResizeObserver(c,_=>b()),g}const MedicationsTableBase=({children:c,className:d="",rowMenuActions:g,hideMenu:v=!1,medicationStatements:b,..._})=>{const E=react.exports.useRef(null),R=useBreakpoints(E),M=fp.compact([{title:"Medication Name",render:P=>React.createElement(React.Fragment,null,React.createElement("div",{className:"ctw-font-medium"},P.display),React.createElement("div",{className:"ctw-font-light"},P.dosage))},{title:"Dispensed",render:P=>React.createElement(React.Fragment,null,P.quantity&&React.createElement("div",null,P.quantity),P.refills&&React.createElement("div",null,P.refills," refills"))},{title:"Last Filled",dataIndex:"lastFillDate"},{title:"Last Prescribed",render:P=>React.createElement(React.Fragment,null,P.lastPrescribedDate&&React.createElement("div",null,P.lastPrescribedDate),P.lastPrescriber&&React.createElement("div",null,P.lastPrescriber))}]);return!v&&fp.isFunction(g)&&M.push({className:"ctw-table-action-column",render:P=>React.createElement(DropdownMenu,{menuItems:g(P)},React.createElement(DotsHorizontalIcon$1,{className:"ctw-w-5"}))}),React.createElement("div",{className:d,ref:E},React.createElement(Table$1,{stacked:R.sm,records:b,columns:M,message:"There are no medications to display.",..._}),c)};try{MedicationsTableBase.displayName="MedicationsTableBase",MedicationsTableBase.__docgenInfo={description:"",displayName:"MedicationsTableBase",props:{medicationStatements:{defaultValue:null,description:"",name:"medicationStatements",required:!0,type:{name:"MedicationStatementModel[]"}},rowMenuActions:{defaultValue:null,description:"",name:"rowMenuActions",required:!1,type:{name:"((condition: MedicationStatementModel) => MenuItem[])"}},hideMenu:{defaultValue:{value:"false"},description:"",name:"hideMenu",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | (string & Mapping) | (string & ArgumentArray)"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},message:{defaultValue:null,description:"Displayed when we have 0 records.",name:"message",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},showTableHead:{defaultValue:null,description:"",name:"showTableHead",required:!1,type:{name:"boolean"}},stacked:{defaultValue:null,description:"",name:"stacked",required:!1,type:{name:"boolean"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"TableSort"}},onSort:{defaultValue:null,description:"",name:"onSort",required:!1,type:{name:"((sort: TableSort) => void)"}},handleRowClick:{defaultValue:null,description:"",name:"handleRowClick",required:!1,type:{name:"((record: MedicationStatementModel) => void)"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!1,type:{name:"((record: MedicationStatementModel) => Element)"}},hidePagination:{defaultValue:null,description:"",name:"hidePagination",required:!1,type:{name:"boolean"}}}}}catch{}var util;(function(c){c.assertEqual=b=>b;function d(b){}c.assertIs=d;function g(b){throw new Error}c.assertNever=g,c.arrayToEnum=b=>{const _={};for(const E of b)_[E]=E;return _},c.getValidEnumValues=b=>{const _=c.objectKeys(b).filter(R=>typeof b[b[R]]!="number"),E={};for(const R of _)E[R]=b[R];return c.objectValues(E)},c.objectValues=b=>c.objectKeys(b).map(function(_){return b[_]}),c.objectKeys=typeof Object.keys=="function"?b=>Object.keys(b):b=>{const _=[];for(const E in b)Object.prototype.hasOwnProperty.call(b,E)&&_.push(E);return _},c.find=(b,_)=>{for(const E of b)if(_(E))return E},c.isInteger=typeof Number.isInteger=="function"?b=>Number.isInteger(b):b=>typeof b=="number"&&isFinite(b)&&Math.floor(b)===b;function v(b,_=" | "){return b.map(E=>typeof E=="string"?`'${E}'`:E).join(_)}c.joinValues=v,c.jsonStringifyReplacer=(b,_)=>typeof _=="bigint"?_.toString():_})(util||(util={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=c=>{switch(typeof c){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(c)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"object":return Array.isArray(c)?ZodParsedType.array:c===null?ZodParsedType.null:c.then&&typeof c.then=="function"&&c.catch&&typeof c.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&c instanceof Map?ZodParsedType.map:typeof Set<"u"&&c instanceof Set?ZodParsedType.set:typeof Date<"u"&&c instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),quotelessJson=c=>JSON.stringify(c,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(d){super(),this.issues=[],this.addIssue=v=>{this.issues=[...this.issues,v]},this.addIssues=(v=[])=>{this.issues=[...this.issues,...v]};const g=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,g):this.__proto__=g,this.name="ZodError",this.issues=d}get errors(){return this.issues}format(d){const g=d||function(_){return _.message},v={_errors:[]},b=_=>{for(const E of _.issues)if(E.code==="invalid_union")E.unionErrors.map(b);else if(E.code==="invalid_return_type")b(E.returnTypeError);else if(E.code==="invalid_arguments")b(E.argumentsError);else if(E.path.length===0)v._errors.push(g(E));else{let R=v,M=0;for(;M<E.path.length;){const P=E.path[M];M===E.path.length-1?(R[P]=R[P]||{_errors:[]},R[P]._errors.push(g(E))):R[P]=R[P]||{_errors:[]},R=R[P],M++}}};return b(this),v}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(d=g=>g.message){const g={},v=[];for(const b of this.issues)b.path.length>0?(g[b.path[0]]=g[b.path[0]]||[],g[b.path[0]].push(d(b))):v.push(d(b));return{formErrors:v,fieldErrors:g}}get formErrors(){return this.flatten()}}ZodError.create=c=>new ZodError(c);const errorMap=(c,d)=>{let g;switch(c.code){case ZodIssueCode.invalid_type:c.received===ZodParsedType.undefined?g="Required":g=`Expected ${c.expected}, received ${c.received}`;break;case ZodIssueCode.invalid_literal:g=`Invalid literal value, expected ${JSON.stringify(c.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:g=`Unrecognized key(s) in object: ${util.joinValues(c.keys,", ")}`;break;case ZodIssueCode.invalid_union:g="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:g=`Invalid discriminator value. Expected ${util.joinValues(c.options)}`;break;case ZodIssueCode.invalid_enum_value:g=`Invalid enum value. Expected ${util.joinValues(c.options)}, received '${c.received}'`;break;case ZodIssueCode.invalid_arguments:g="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:g="Invalid function return type";break;case ZodIssueCode.invalid_date:g="Invalid date";break;case ZodIssueCode.invalid_string:typeof c.validation=="object"?"startsWith"in c.validation?g=`Invalid input: must start with "${c.validation.startsWith}"`:"endsWith"in c.validation?g=`Invalid input: must end with "${c.validation.endsWith}"`:util.assertNever(c.validation):c.validation!=="regex"?g=`Invalid ${c.validation}`:g="Invalid";break;case ZodIssueCode.too_small:c.type==="array"?g=`Array must contain ${c.inclusive?"at least":"more than"} ${c.minimum} element(s)`:c.type==="string"?g=`String must contain ${c.inclusive?"at least":"over"} ${c.minimum} character(s)`:c.type==="number"?g=`Number must be greater than ${c.inclusive?"or equal to ":""}${c.minimum}`:c.type==="date"?g=`Date must be greater than ${c.inclusive?"or equal to ":""}${new Date(c.minimum)}`:g="Invalid input";break;case ZodIssueCode.too_big:c.type==="array"?g=`Array must contain ${c.inclusive?"at most":"less than"} ${c.maximum} element(s)`:c.type==="string"?g=`String must contain ${c.inclusive?"at most":"under"} ${c.maximum} character(s)`:c.type==="number"?g=`Number must be less than ${c.inclusive?"or equal to ":""}${c.maximum}`:c.type==="date"?g=`Date must be smaller than ${c.inclusive?"or equal to ":""}${new Date(c.maximum)}`:g="Invalid input";break;case ZodIssueCode.custom:g="Invalid input";break;case ZodIssueCode.invalid_intersection_types:g="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:g=`Number must be a multiple of ${c.multipleOf}`;break;default:g=d.defaultError,util.assertNever(c)}return{message:g}};let overrideErrorMap=errorMap;function setErrorMap(c){overrideErrorMap=c}function getErrorMap(){return overrideErrorMap}const makeIssue=c=>{const{data:d,path:g,errorMaps:v,issueData:b}=c,_=[...g,...b.path||[]],E={...b,path:_};let R="";const M=v.filter(P=>!!P).slice().reverse();for(const P of M)R=P(E,{data:d,defaultError:R}).message;return{...b,path:_,message:b.message||R}},EMPTY_PATH=[];function addIssueToContext(c,d){const g=makeIssue({issueData:d,data:c.data,path:c.path,errorMaps:[c.common.contextualErrorMap,c.schemaErrorMap,getErrorMap(),errorMap].filter(v=>!!v)});c.common.issues.push(g)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(d,g){const v=[];for(const b of g){if(b.status==="aborted")return INVALID;b.status==="dirty"&&d.dirty(),v.push(b.value)}return{status:d.value,value:v}}static async mergeObjectAsync(d,g){const v=[];for(const b of g)v.push({key:await b.key,value:await b.value});return ParseStatus.mergeObjectSync(d,v)}static mergeObjectSync(d,g){const v={};for(const b of g){const{key:_,value:E}=b;if(_.status==="aborted"||E.status==="aborted")return INVALID;_.status==="dirty"&&d.dirty(),E.status==="dirty"&&d.dirty(),(typeof E.value<"u"||b.alwaysSet)&&(v[_.value]=E.value)}return{status:d.value,value:v}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=c=>({status:"dirty",value:c}),OK=c=>({status:"valid",value:c}),isAborted=c=>c.status==="aborted",isDirty=c=>c.status==="dirty",isValid=c=>c.status==="valid",isAsync=c=>typeof Promise!==void 0&&c instanceof Promise;var errorUtil;(function(c){c.errToObj=d=>typeof d=="string"?{message:d}:d||{},c.toString=d=>typeof d=="string"?d:d==null?void 0:d.message})(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(d,g,v,b){this.parent=d,this.data=g,this._path=v,this._key=b}get path(){return this._path.concat(this._key)}}const handleResult=(c,d)=>{if(isValid(d))return{success:!0,data:d.value};{if(!c.common.issues.length)throw new Error("Validation failed but no issues detected.");const g=new ZodError(c.common.issues);return{success:!1,error:g}}};function processCreateParams(c){if(!c)return{};const{errorMap:d,invalid_type_error:g,required_error:v,description:b}=c;if(d&&(g||v))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return d?{errorMap:d,description:b}:{errorMap:(E,R)=>E.code!=="invalid_type"?{message:R.defaultError}:typeof R.data>"u"?{message:v!=null?v:R.defaultError}:{message:g!=null?g:R.defaultError},description:b}}class ZodType{constructor(d){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=d,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(d){return getParsedType(d.data)}_getOrReturnCtx(d,g){return g||{common:d.parent.common,data:d.data,parsedType:getParsedType(d.data),schemaErrorMap:this._def.errorMap,path:d.path,parent:d.parent}}_processInputParams(d){return{status:new ParseStatus,ctx:{common:d.parent.common,data:d.data,parsedType:getParsedType(d.data),schemaErrorMap:this._def.errorMap,path:d.path,parent:d.parent}}}_parseSync(d){const g=this._parse(d);if(isAsync(g))throw new Error("Synchronous parse encountered promise.");return g}_parseAsync(d){const g=this._parse(d);return Promise.resolve(g)}parse(d,g){const v=this.safeParse(d,g);if(v.success)return v.data;throw v.error}safeParse(d,g){var v;const b={common:{issues:[],async:(v=g==null?void 0:g.async)!==null&&v!==void 0?v:!1,contextualErrorMap:g==null?void 0:g.errorMap},path:(g==null?void 0:g.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:d,parsedType:getParsedType(d)},_=this._parseSync({data:d,path:b.path,parent:b});return handleResult(b,_)}async parseAsync(d,g){const v=await this.safeParseAsync(d,g);if(v.success)return v.data;throw v.error}async safeParseAsync(d,g){const v={common:{issues:[],contextualErrorMap:g==null?void 0:g.errorMap,async:!0},path:(g==null?void 0:g.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:d,parsedType:getParsedType(d)},b=this._parse({data:d,path:[],parent:v}),_=await(isAsync(b)?b:Promise.resolve(b));return handleResult(v,_)}refine(d,g){const v=b=>typeof g=="string"||typeof g>"u"?{message:g}:typeof g=="function"?g(b):g;return this._refinement((b,_)=>{const E=d(b),R=()=>_.addIssue({code:ZodIssueCode.custom,...v(b)});return typeof Promise<"u"&&E instanceof Promise?E.then(M=>M?!0:(R(),!1)):E?!0:(R(),!1)})}refinement(d,g){return this._refinement((v,b)=>d(v)?!0:(b.addIssue(typeof g=="function"?g(v,b):g),!1))}_refinement(d){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:d}})}optional(){return ZodOptional.create(this)}nullable(){return ZodNullable.create(this)}nullish(){return this.optional().nullable()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this)}or(d){return ZodUnion.create([this,d])}and(d){return ZodIntersection.create(this,d)}transform(d){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:d}})}default(d){const g=typeof d=="function"?d:()=>d;return new ZodDefault({innerType:this,defaultValue:g,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(void 0)})}describe(d){const g=this.constructor;return new g({...this._def,description:d})}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,uuidRegex=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,emailRegex=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;class ZodString extends ZodType{constructor(){super(...arguments),this._regex=(d,g,v)=>this.refinement(b=>d.test(b),{validation:g,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(v)}),this.nonempty=d=>this.min(1,errorUtil.errToObj(d)),this.trim=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(d){if(this._getType(d)!==ZodParsedType.string){const _=this._getOrReturnCtx(d);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:_.parsedType}),INVALID}const v=new ParseStatus;let b;for(const _ of this._def.checks)if(_.kind==="min")d.data.length<_.value&&(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.too_small,minimum:_.value,type:"string",inclusive:!0,message:_.message}),v.dirty());else if(_.kind==="max")d.data.length>_.value&&(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.too_big,maximum:_.value,type:"string",inclusive:!0,message:_.message}),v.dirty());else if(_.kind==="email")emailRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"email",code:ZodIssueCode.invalid_string,message:_.message}),v.dirty());else if(_.kind==="uuid")uuidRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"uuid",code:ZodIssueCode.invalid_string,message:_.message}),v.dirty());else if(_.kind==="cuid")cuidRegex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"cuid",code:ZodIssueCode.invalid_string,message:_.message}),v.dirty());else if(_.kind==="url")try{new URL(d.data)}catch{b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"url",code:ZodIssueCode.invalid_string,message:_.message}),v.dirty()}else _.kind==="regex"?(_.regex.lastIndex=0,_.regex.test(d.data)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{validation:"regex",code:ZodIssueCode.invalid_string,message:_.message}),v.dirty())):_.kind==="trim"?d.data=d.data.trim():_.kind==="startsWith"?d.data.startsWith(_.value)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.invalid_string,validation:{startsWith:_.value},message:_.message}),v.dirty()):_.kind==="endsWith"?d.data.endsWith(_.value)||(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.invalid_string,validation:{endsWith:_.value},message:_.message}),v.dirty()):util.assertNever(_);return{status:v.value,value:d.data}}_addCheck(d){return new ZodString({...this._def,checks:[...this._def.checks,d]})}email(d){return this._addCheck({kind:"email",...errorUtil.errToObj(d)})}url(d){return this._addCheck({kind:"url",...errorUtil.errToObj(d)})}uuid(d){return this._addCheck({kind:"uuid",...errorUtil.errToObj(d)})}cuid(d){return this._addCheck({kind:"cuid",...errorUtil.errToObj(d)})}regex(d,g){return this._addCheck({kind:"regex",regex:d,...errorUtil.errToObj(g)})}startsWith(d,g){return this._addCheck({kind:"startsWith",value:d,...errorUtil.errToObj(g)})}endsWith(d,g){return this._addCheck({kind:"endsWith",value:d,...errorUtil.errToObj(g)})}min(d,g){return this._addCheck({kind:"min",value:d,...errorUtil.errToObj(g)})}max(d,g){return this._addCheck({kind:"max",value:d,...errorUtil.errToObj(g)})}length(d,g){return this.min(d,g).max(d,g)}get isEmail(){return!!this._def.checks.find(d=>d.kind==="email")}get isURL(){return!!this._def.checks.find(d=>d.kind==="url")}get isUUID(){return!!this._def.checks.find(d=>d.kind==="uuid")}get isCUID(){return!!this._def.checks.find(d=>d.kind==="cuid")}get minLength(){let d=null;for(const g of this._def.checks)g.kind==="min"&&(d===null||g.value>d)&&(d=g.value);return d}get maxLength(){let d=null;for(const g of this._def.checks)g.kind==="max"&&(d===null||g.value<d)&&(d=g.value);return d}}ZodString.create=c=>new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,...processCreateParams(c)});function floatSafeRemainder(c,d){const g=(c.toString().split(".")[1]||"").length,v=(d.toString().split(".")[1]||"").length,b=g>v?g:v,_=parseInt(c.toFixed(b).replace(".","")),E=parseInt(d.toFixed(b).replace(".",""));return _%E/Math.pow(10,b)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(d){if(this._getType(d)!==ZodParsedType.number){const _=this._getOrReturnCtx(d);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:_.parsedType}),INVALID}let v;const b=new ParseStatus;for(const _ of this._def.checks)_.kind==="int"?util.isInteger(d.data)||(v=this._getOrReturnCtx(d,v),addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:_.message}),b.dirty()):_.kind==="min"?(_.inclusive?d.data<_.value:d.data<=_.value)&&(v=this._getOrReturnCtx(d,v),addIssueToContext(v,{code:ZodIssueCode.too_small,minimum:_.value,type:"number",inclusive:_.inclusive,message:_.message}),b.dirty()):_.kind==="max"?(_.inclusive?d.data>_.value:d.data>=_.value)&&(v=this._getOrReturnCtx(d,v),addIssueToContext(v,{code:ZodIssueCode.too_big,maximum:_.value,type:"number",inclusive:_.inclusive,message:_.message}),b.dirty()):_.kind==="multipleOf"?floatSafeRemainder(d.data,_.value)!==0&&(v=this._getOrReturnCtx(d,v),addIssueToContext(v,{code:ZodIssueCode.not_multiple_of,multipleOf:_.value,message:_.message}),b.dirty()):util.assertNever(_);return{status:b.value,value:d.data}}gte(d,g){return this.setLimit("min",d,!0,errorUtil.toString(g))}gt(d,g){return this.setLimit("min",d,!1,errorUtil.toString(g))}lte(d,g){return this.setLimit("max",d,!0,errorUtil.toString(g))}lt(d,g){return this.setLimit("max",d,!1,errorUtil.toString(g))}setLimit(d,g,v,b){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:d,value:g,inclusive:v,message:errorUtil.toString(b)}]})}_addCheck(d){return new ZodNumber({...this._def,checks:[...this._def.checks,d]})}int(d){return this._addCheck({kind:"int",message:errorUtil.toString(d)})}positive(d){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(d)})}negative(d){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(d)})}nonpositive(d){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(d)})}nonnegative(d){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(d)})}multipleOf(d,g){return this._addCheck({kind:"multipleOf",value:d,message:errorUtil.toString(g)})}get minValue(){let d=null;for(const g of this._def.checks)g.kind==="min"&&(d===null||g.value>d)&&(d=g.value);return d}get maxValue(){let d=null;for(const g of this._def.checks)g.kind==="max"&&(d===null||g.value<d)&&(d=g.value);return d}get isInt(){return!!this._def.checks.find(d=>d.kind==="int")}}ZodNumber.create=c=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,...processCreateParams(c)});class ZodBigInt extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.bigint){const v=this._getOrReturnCtx(d);return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:v.parsedType}),INVALID}return OK(d.data)}}ZodBigInt.create=c=>new ZodBigInt({typeName:ZodFirstPartyTypeKind.ZodBigInt,...processCreateParams(c)});class ZodBoolean extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.boolean){const v=this._getOrReturnCtx(d);return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:v.parsedType}),INVALID}return OK(d.data)}}ZodBoolean.create=c=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,...processCreateParams(c)});class ZodDate extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.date){const _=this._getOrReturnCtx(d);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:_.parsedType}),INVALID}if(isNaN(d.data.getTime())){const _=this._getOrReturnCtx(d);return addIssueToContext(_,{code:ZodIssueCode.invalid_date}),INVALID}const v=new ParseStatus;let b;for(const _ of this._def.checks)_.kind==="min"?d.data.getTime()<_.value&&(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.too_small,message:_.message,inclusive:!0,minimum:_.value,type:"date"}),v.dirty()):_.kind==="max"?d.data.getTime()>_.value&&(b=this._getOrReturnCtx(d,b),addIssueToContext(b,{code:ZodIssueCode.too_big,message:_.message,inclusive:!0,maximum:_.value,type:"date"}),v.dirty()):util.assertNever(_);return{status:v.value,value:new Date(d.data.getTime())}}_addCheck(d){return new ZodDate({...this._def,checks:[...this._def.checks,d]})}min(d,g){return this._addCheck({kind:"min",value:d.getTime(),message:errorUtil.toString(g)})}max(d,g){return this._addCheck({kind:"max",value:d.getTime(),message:errorUtil.toString(g)})}get minDate(){let d=null;for(const g of this._def.checks)g.kind==="min"&&(d===null||g.value>d)&&(d=g.value);return d!=null?new Date(d):null}get maxDate(){let d=null;for(const g of this._def.checks)g.kind==="max"&&(d===null||g.value<d)&&(d=g.value);return d!=null?new Date(d):null}}ZodDate.create=c=>new ZodDate({checks:[],typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(c)});class ZodUndefined extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.undefined){const v=this._getOrReturnCtx(d);return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:v.parsedType}),INVALID}return OK(d.data)}}ZodUndefined.create=c=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(c)});class ZodNull extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.null){const v=this._getOrReturnCtx(d);return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:v.parsedType}),INVALID}return OK(d.data)}}ZodNull.create=c=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(c)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(d){return OK(d.data)}}ZodAny.create=c=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(c)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(d){return OK(d.data)}}ZodUnknown.create=c=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(c)});class ZodNever extends ZodType{_parse(d){const g=this._getOrReturnCtx(d);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:g.parsedType}),INVALID}}ZodNever.create=c=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(c)});class ZodVoid extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.undefined){const v=this._getOrReturnCtx(d);return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:v.parsedType}),INVALID}return OK(d.data)}}ZodVoid.create=c=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(c)});class ZodArray extends ZodType{_parse(d){const{ctx:g,status:v}=this._processInputParams(d),b=this._def;if(g.parsedType!==ZodParsedType.array)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:g.parsedType}),INVALID;if(b.minLength!==null&&g.data.length<b.minLength.value&&(addIssueToContext(g,{code:ZodIssueCode.too_small,minimum:b.minLength.value,type:"array",inclusive:!0,message:b.minLength.message}),v.dirty()),b.maxLength!==null&&g.data.length>b.maxLength.value&&(addIssueToContext(g,{code:ZodIssueCode.too_big,maximum:b.maxLength.value,type:"array",inclusive:!0,message:b.maxLength.message}),v.dirty()),g.common.async)return Promise.all(g.data.map((E,R)=>b.type._parseAsync(new ParseInputLazyPath(g,E,g.path,R)))).then(E=>ParseStatus.mergeArray(v,E));const _=g.data.map((E,R)=>b.type._parseSync(new ParseInputLazyPath(g,E,g.path,R)));return ParseStatus.mergeArray(v,_)}get element(){return this._def.type}min(d,g){return new ZodArray({...this._def,minLength:{value:d,message:errorUtil.toString(g)}})}max(d,g){return new ZodArray({...this._def,maxLength:{value:d,message:errorUtil.toString(g)}})}length(d,g){return this.min(d,g).max(d,g)}nonempty(d){return this.min(1,d)}}ZodArray.create=(c,d)=>new ZodArray({type:c,minLength:null,maxLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(d)});var objectUtil;(function(c){c.mergeShapes=(d,g)=>({...d,...g})})(objectUtil||(objectUtil={}));const AugmentFactory=c=>d=>new ZodObject({...c,shape:()=>({...c.shape(),...d})});function deepPartialify(c){if(c instanceof ZodObject){const d={};for(const g in c.shape){const v=c.shape[g];d[g]=ZodOptional.create(deepPartialify(v))}return new ZodObject({...c._def,shape:()=>d})}else return c instanceof ZodArray?ZodArray.create(deepPartialify(c.element)):c instanceof ZodOptional?ZodOptional.create(deepPartialify(c.unwrap())):c instanceof ZodNullable?ZodNullable.create(deepPartialify(c.unwrap())):c instanceof ZodTuple?ZodTuple.create(c.items.map(d=>deepPartialify(d))):c}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=AugmentFactory(this._def),this.extend=AugmentFactory(this._def)}_getCached(){if(this._cached!==null)return this._cached;const d=this._def.shape(),g=util.objectKeys(d);return this._cached={shape:d,keys:g}}_parse(d){if(this._getType(d)!==ZodParsedType.object){const P=this._getOrReturnCtx(d);return addIssueToContext(P,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:P.parsedType}),INVALID}const{status:v,ctx:b}=this._processInputParams(d),{shape:_,keys:E}=this._getCached(),R=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const P in b.data)E.includes(P)||R.push(P);const M=[];for(const P of E){const O=_[P],H=b.data[P];M.push({key:{status:"valid",value:P},value:O._parse(new ParseInputLazyPath(b,H,b.path,P)),alwaysSet:P in b.data})}if(this._def.catchall instanceof ZodNever){const P=this._def.unknownKeys;if(P==="passthrough")for(const O of R)M.push({key:{status:"valid",value:O},value:{status:"valid",value:b.data[O]}});else if(P==="strict")R.length>0&&(addIssueToContext(b,{code:ZodIssueCode.unrecognized_keys,keys:R}),v.dirty());else if(P!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const P=this._def.catchall;for(const O of R){const H=b.data[O];M.push({key:{status:"valid",value:O},value:P._parse(new ParseInputLazyPath(b,H,b.path,O)),alwaysSet:O in b.data})}}return b.common.async?Promise.resolve().then(async()=>{const P=[];for(const O of M){const H=await O.key;P.push({key:H,value:await O.value,alwaysSet:O.alwaysSet})}return P}).then(P=>ParseStatus.mergeObjectSync(v,P)):ParseStatus.mergeObjectSync(v,M)}get shape(){return this._def.shape()}strict(d){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...d!==void 0?{errorMap:(g,v)=>{var b,_,E,R;const M=(E=(_=(b=this._def).errorMap)===null||_===void 0?void 0:_.call(b,g,v).message)!==null&&E!==void 0?E:v.defaultError;return g.code==="unrecognized_keys"?{message:(R=errorUtil.errToObj(d).message)!==null&&R!==void 0?R:M}:{message:M}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}setKey(d,g){return this.augment({[d]:g})}merge(d){return new ZodObject({unknownKeys:d._def.unknownKeys,catchall:d._def.catchall,shape:()=>objectUtil.mergeShapes(this._def.shape(),d._def.shape()),typeName:ZodFirstPartyTypeKind.ZodObject})}catchall(d){return new ZodObject({...this._def,catchall:d})}pick(d){const g={};return util.objectKeys(d).map(v=>{this.shape[v]&&(g[v]=this.shape[v])}),new ZodObject({...this._def,shape:()=>g})}omit(d){const g={};return util.objectKeys(this.shape).map(v=>{util.objectKeys(d).indexOf(v)===-1&&(g[v]=this.shape[v])}),new ZodObject({...this._def,shape:()=>g})}deepPartial(){return deepPartialify(this)}partial(d){const g={};if(d)return util.objectKeys(this.shape).map(v=>{util.objectKeys(d).indexOf(v)===-1?g[v]=this.shape[v]:g[v]=this.shape[v].optional()}),new ZodObject({...this._def,shape:()=>g});for(const v in this.shape){const b=this.shape[v];g[v]=b.optional()}return new ZodObject({...this._def,shape:()=>g})}required(){const d={};for(const g in this.shape){let b=this.shape[g];for(;b instanceof ZodOptional;)b=b._def.innerType;d[g]=b}return new ZodObject({...this._def,shape:()=>d})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(c,d)=>new ZodObject({shape:()=>c,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(d)});ZodObject.strictCreate=(c,d)=>new ZodObject({shape:()=>c,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(d)});ZodObject.lazycreate=(c,d)=>new ZodObject({shape:c,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(d)});class ZodUnion extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d),v=this._def.options;function b(_){for(const R of _)if(R.result.status==="valid")return R.result;for(const R of _)if(R.result.status==="dirty")return g.common.issues.push(...R.ctx.common.issues),R.result;const E=_.map(R=>new ZodError(R.ctx.common.issues));return addIssueToContext(g,{code:ZodIssueCode.invalid_union,unionErrors:E}),INVALID}if(g.common.async)return Promise.all(v.map(async _=>{const E={...g,common:{...g.common,issues:[]},parent:null};return{result:await _._parseAsync({data:g.data,path:g.path,parent:E}),ctx:E}})).then(b);{let _;const E=[];for(const M of v){const P={...g,common:{...g.common,issues:[]},parent:null},O=M._parseSync({data:g.data,path:g.path,parent:P});if(O.status==="valid")return O;O.status==="dirty"&&!_&&(_={result:O,ctx:P}),P.common.issues.length&&E.push(P.common.issues)}if(_)return g.common.issues.push(..._.ctx.common.issues),_.result;const R=E.map(M=>new ZodError(M));return addIssueToContext(g,{code:ZodIssueCode.invalid_union,unionErrors:R}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(c,d)=>new ZodUnion({options:c,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(d)});class ZodDiscriminatedUnion extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d);if(g.parsedType!==ZodParsedType.object)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:g.parsedType}),INVALID;const v=this.discriminator,b=g.data[v],_=this.options.get(b);return _?g.common.async?_._parseAsync({data:g.data,path:g.path,parent:g}):_._parseSync({data:g.data,path:g.path,parent:g}):(addIssueToContext(g,{code:ZodIssueCode.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[v]}),INVALID)}get discriminator(){return this._def.discriminator}get validDiscriminatorValues(){return Array.from(this.options.keys())}get options(){return this._def.options}static create(d,g,v){const b=new Map;try{g.forEach(_=>{const E=_.shape[d].value;b.set(E,_)})}catch{throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(b.size!==g.length)throw new Error("Some of the discriminator values are not unique");return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:d,options:b,...processCreateParams(v)})}}function mergeValues(c,d){const g=getParsedType(c),v=getParsedType(d);if(c===d)return{valid:!0,data:c};if(g===ZodParsedType.object&&v===ZodParsedType.object){const b=util.objectKeys(d),_=util.objectKeys(c).filter(R=>b.indexOf(R)!==-1),E={...c,...d};for(const R of _){const M=mergeValues(c[R],d[R]);if(!M.valid)return{valid:!1};E[R]=M.data}return{valid:!0,data:E}}else if(g===ZodParsedType.array&&v===ZodParsedType.array){if(c.length!==d.length)return{valid:!1};const b=[];for(let _=0;_<c.length;_++){const E=c[_],R=d[_],M=mergeValues(E,R);if(!M.valid)return{valid:!1};b.push(M.data)}return{valid:!0,data:b}}else return g===ZodParsedType.date&&v===ZodParsedType.date&&+c==+d?{valid:!0,data:c}:{valid:!1}}class ZodIntersection extends ZodType{_parse(d){const{status:g,ctx:v}=this._processInputParams(d),b=(_,E)=>{if(isAborted(_)||isAborted(E))return INVALID;const R=mergeValues(_.value,E.value);return R.valid?((isDirty(_)||isDirty(E))&&g.dirty(),{status:g.value,value:R.data}):(addIssueToContext(v,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return v.common.async?Promise.all([this._def.left._parseAsync({data:v.data,path:v.path,parent:v}),this._def.right._parseAsync({data:v.data,path:v.path,parent:v})]).then(([_,E])=>b(_,E)):b(this._def.left._parseSync({data:v.data,path:v.path,parent:v}),this._def.right._parseSync({data:v.data,path:v.path,parent:v}))}}ZodIntersection.create=(c,d,g)=>new ZodIntersection({left:c,right:d,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(g)});class ZodTuple extends ZodType{_parse(d){const{status:g,ctx:v}=this._processInputParams(d);if(v.parsedType!==ZodParsedType.array)return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:v.parsedType}),INVALID;if(v.data.length<this._def.items.length)return addIssueToContext(v,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),INVALID;!this._def.rest&&v.data.length>this._def.items.length&&(addIssueToContext(v,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),g.dirty());const _=v.data.map((E,R)=>{const M=this._def.items[R]||this._def.rest;return M?M._parse(new ParseInputLazyPath(v,E,v.path,R)):null}).filter(E=>!!E);return v.common.async?Promise.all(_).then(E=>ParseStatus.mergeArray(g,E)):ParseStatus.mergeArray(g,_)}get items(){return this._def.items}rest(d){return new ZodTuple({...this._def,rest:d})}}ZodTuple.create=(c,d)=>{if(!Array.isArray(c))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:c,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(d)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(d){const{status:g,ctx:v}=this._processInputParams(d);if(v.parsedType!==ZodParsedType.object)return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:v.parsedType}),INVALID;const b=[],_=this._def.keyType,E=this._def.valueType;for(const R in v.data)b.push({key:_._parse(new ParseInputLazyPath(v,R,v.path,R)),value:E._parse(new ParseInputLazyPath(v,v.data[R],v.path,R))});return v.common.async?ParseStatus.mergeObjectAsync(g,b):ParseStatus.mergeObjectSync(g,b)}get element(){return this._def.valueType}static create(d,g,v){return g instanceof ZodType?new ZodRecord({keyType:d,valueType:g,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(v)}):new ZodRecord({keyType:ZodString.create(),valueType:d,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(g)})}}class ZodMap extends ZodType{_parse(d){const{status:g,ctx:v}=this._processInputParams(d);if(v.parsedType!==ZodParsedType.map)return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:v.parsedType}),INVALID;const b=this._def.keyType,_=this._def.valueType,E=[...v.data.entries()].map(([R,M],P)=>({key:b._parse(new ParseInputLazyPath(v,R,v.path,[P,"key"])),value:_._parse(new ParseInputLazyPath(v,M,v.path,[P,"value"]))}));if(v.common.async){const R=new Map;return Promise.resolve().then(async()=>{for(const M of E){const P=await M.key,O=await M.value;if(P.status==="aborted"||O.status==="aborted")return INVALID;(P.status==="dirty"||O.status==="dirty")&&g.dirty(),R.set(P.value,O.value)}return{status:g.value,value:R}})}else{const R=new Map;for(const M of E){const P=M.key,O=M.value;if(P.status==="aborted"||O.status==="aborted")return INVALID;(P.status==="dirty"||O.status==="dirty")&&g.dirty(),R.set(P.value,O.value)}return{status:g.value,value:R}}}}ZodMap.create=(c,d,g)=>new ZodMap({valueType:d,keyType:c,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(g)});class ZodSet extends ZodType{_parse(d){const{status:g,ctx:v}=this._processInputParams(d);if(v.parsedType!==ZodParsedType.set)return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:v.parsedType}),INVALID;const b=this._def;b.minSize!==null&&v.data.size<b.minSize.value&&(addIssueToContext(v,{code:ZodIssueCode.too_small,minimum:b.minSize.value,type:"set",inclusive:!0,message:b.minSize.message}),g.dirty()),b.maxSize!==null&&v.data.size>b.maxSize.value&&(addIssueToContext(v,{code:ZodIssueCode.too_big,maximum:b.maxSize.value,type:"set",inclusive:!0,message:b.maxSize.message}),g.dirty());const _=this._def.valueType;function E(M){const P=new Set;for(const O of M){if(O.status==="aborted")return INVALID;O.status==="dirty"&&g.dirty(),P.add(O.value)}return{status:g.value,value:P}}const R=[...v.data.values()].map((M,P)=>_._parse(new ParseInputLazyPath(v,M,v.path,P)));return v.common.async?Promise.all(R).then(M=>E(M)):E(R)}min(d,g){return new ZodSet({...this._def,minSize:{value:d,message:errorUtil.toString(g)}})}max(d,g){return new ZodSet({...this._def,maxSize:{value:d,message:errorUtil.toString(g)}})}size(d,g){return this.min(d,g).max(d,g)}nonempty(d){return this.min(1,d)}}ZodSet.create=(c,d)=>new ZodSet({valueType:c,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(d)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(d){const{ctx:g}=this._processInputParams(d);if(g.parsedType!==ZodParsedType.function)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:g.parsedType}),INVALID;function v(R,M){return makeIssue({data:R,path:g.path,errorMaps:[g.common.contextualErrorMap,g.schemaErrorMap,getErrorMap(),errorMap].filter(P=>!!P),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:M}})}function b(R,M){return makeIssue({data:R,path:g.path,errorMaps:[g.common.contextualErrorMap,g.schemaErrorMap,getErrorMap(),errorMap].filter(P=>!!P),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:M}})}const _={errorMap:g.common.contextualErrorMap},E=g.data;return this._def.returns instanceof ZodPromise?OK(async(...R)=>{const M=new ZodError([]),P=await this._def.args.parseAsync(R,_).catch(Q=>{throw M.addIssue(v(R,Q)),M}),O=await E(...P);return await this._def.returns._def.type.parseAsync(O,_).catch(Q=>{throw M.addIssue(b(O,Q)),M})}):OK((...R)=>{const M=this._def.args.safeParse(R,_);if(!M.success)throw new ZodError([v(R,M.error)]);const P=E(...M.data),O=this._def.returns.safeParse(P,_);if(!O.success)throw new ZodError([b(P,O.error)]);return O.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...d){return new ZodFunction({...this._def,args:ZodTuple.create(d).rest(ZodUnknown.create())})}returns(d){return new ZodFunction({...this._def,returns:d})}implement(d){return this.parse(d)}strictImplement(d){return this.parse(d)}static create(d,g,v){return new ZodFunction({args:d||ZodTuple.create([]).rest(ZodUnknown.create()),returns:g||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(v)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(d){const{ctx:g}=this._processInputParams(d);return this._def.getter()._parse({data:g.data,path:g.path,parent:g})}}ZodLazy.create=(c,d)=>new ZodLazy({getter:c,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(d)});class ZodLiteral extends ZodType{_parse(d){if(d.data!==this._def.value){const g=this._getOrReturnCtx(d);return addIssueToContext(g,{code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:d.data}}get value(){return this._def.value}}ZodLiteral.create=(c,d)=>new ZodLiteral({value:c,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(d)});function createZodEnum(c,d){return new ZodEnum({values:c,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(d)})}class ZodEnum extends ZodType{_parse(d){if(typeof d.data!="string"){const g=this._getOrReturnCtx(d),v=this._def.values;return addIssueToContext(g,{expected:util.joinValues(v),received:g.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._def.values.indexOf(d.data)===-1){const g=this._getOrReturnCtx(d),v=this._def.values;return addIssueToContext(g,{received:g.data,code:ZodIssueCode.invalid_enum_value,options:v}),INVALID}return OK(d.data)}get options(){return this._def.values}get enum(){const d={};for(const g of this._def.values)d[g]=g;return d}get Values(){const d={};for(const g of this._def.values)d[g]=g;return d}get Enum(){const d={};for(const g of this._def.values)d[g]=g;return d}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(d){const g=util.getValidEnumValues(this._def.values),v=this._getOrReturnCtx(d);if(v.parsedType!==ZodParsedType.string&&v.parsedType!==ZodParsedType.number){const b=util.objectValues(g);return addIssueToContext(v,{expected:util.joinValues(b),received:v.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(g.indexOf(d.data)===-1){const b=util.objectValues(g);return addIssueToContext(v,{received:v.data,code:ZodIssueCode.invalid_enum_value,options:b}),INVALID}return OK(d.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(c,d)=>new ZodNativeEnum({values:c,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(d)});class ZodPromise extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d);if(g.parsedType!==ZodParsedType.promise&&g.common.async===!1)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:g.parsedType}),INVALID;const v=g.parsedType===ZodParsedType.promise?g.data:Promise.resolve(g.data);return OK(v.then(b=>this._def.type.parseAsync(b,{path:g.path,errorMap:g.common.contextualErrorMap})))}}ZodPromise.create=(c,d)=>new ZodPromise({type:c,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(d)});class ZodEffects extends ZodType{innerType(){return this._def.schema}_parse(d){const{status:g,ctx:v}=this._processInputParams(d),b=this._def.effect||null;if(b.type==="preprocess"){const E=b.transform(v.data);return v.common.async?Promise.resolve(E).then(R=>this._def.schema._parseAsync({data:R,path:v.path,parent:v})):this._def.schema._parseSync({data:E,path:v.path,parent:v})}const _={addIssue:E=>{addIssueToContext(v,E),E.fatal?g.abort():g.dirty()},get path(){return v.path}};if(_.addIssue=_.addIssue.bind(_),b.type==="refinement"){const E=R=>{const M=b.refinement(R,_);if(v.common.async)return Promise.resolve(M);if(M instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return R};if(v.common.async===!1){const R=this._def.schema._parseSync({data:v.data,path:v.path,parent:v});return R.status==="aborted"?INVALID:(R.status==="dirty"&&g.dirty(),E(R.value),{status:g.value,value:R.value})}else return this._def.schema._parseAsync({data:v.data,path:v.path,parent:v}).then(R=>R.status==="aborted"?INVALID:(R.status==="dirty"&&g.dirty(),E(R.value).then(()=>({status:g.value,value:R.value}))))}if(b.type==="transform")if(v.common.async===!1){const E=this._def.schema._parseSync({data:v.data,path:v.path,parent:v});if(!isValid(E))return E;const R=b.transform(E.value,_);if(R instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:g.value,value:R}}else return this._def.schema._parseAsync({data:v.data,path:v.path,parent:v}).then(E=>isValid(E)?Promise.resolve(b.transform(E.value,_)).then(R=>({status:g.value,value:R})):E);util.assertNever(b)}}ZodEffects.create=(c,d,g)=>new ZodEffects({schema:c,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:d,...processCreateParams(g)});ZodEffects.createWithPreprocess=(c,d,g)=>new ZodEffects({schema:d,effect:{type:"preprocess",transform:c},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(g)});class ZodOptional extends ZodType{_parse(d){return this._getType(d)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(d)}unwrap(){return this._def.innerType}}ZodOptional.create=(c,d)=>new ZodOptional({innerType:c,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(d)});class ZodNullable extends ZodType{_parse(d){return this._getType(d)===ZodParsedType.null?OK(null):this._def.innerType._parse(d)}unwrap(){return this._def.innerType}}ZodNullable.create=(c,d)=>new ZodNullable({innerType:c,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(d)});class ZodDefault extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d);let v=g.data;return g.parsedType===ZodParsedType.undefined&&(v=this._def.defaultValue()),this._def.innerType._parse({data:v,path:g.path,parent:g})}removeDefault(){return this._def.innerType}}ZodDefault.create=(c,d)=>new ZodOptional({innerType:c,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(d)});class ZodNaN extends ZodType{_parse(d){if(this._getType(d)!==ZodParsedType.nan){const v=this._getOrReturnCtx(d);return addIssueToContext(v,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:v.parsedType}),INVALID}return{status:"valid",value:d.data}}}ZodNaN.create=c=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(c)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(d){const{ctx:g}=this._processInputParams(d),v=g.data;return this._def.type._parse({data:v,path:g.path,parent:g})}unwrap(){return this._def.type}}const custom=(c,d={},g)=>c?ZodAny.create().superRefine((v,b)=>{if(!c(v)){const _=typeof d=="function"?d(v):d,E=typeof _=="string"?{message:_}:_;b.addIssue({code:"custom",...E,fatal:g})}}):ZodAny.create(),late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(c){c.ZodString="ZodString",c.ZodNumber="ZodNumber",c.ZodNaN="ZodNaN",c.ZodBigInt="ZodBigInt",c.ZodBoolean="ZodBoolean",c.ZodDate="ZodDate",c.ZodUndefined="ZodUndefined",c.ZodNull="ZodNull",c.ZodAny="ZodAny",c.ZodUnknown="ZodUnknown",c.ZodNever="ZodNever",c.ZodVoid="ZodVoid",c.ZodArray="ZodArray",c.ZodObject="ZodObject",c.ZodUnion="ZodUnion",c.ZodDiscriminatedUnion="ZodDiscriminatedUnion",c.ZodIntersection="ZodIntersection",c.ZodTuple="ZodTuple",c.ZodRecord="ZodRecord",c.ZodMap="ZodMap",c.ZodSet="ZodSet",c.ZodFunction="ZodFunction",c.ZodLazy="ZodLazy",c.ZodLiteral="ZodLiteral",c.ZodEnum="ZodEnum",c.ZodEffects="ZodEffects",c.ZodNativeEnum="ZodNativeEnum",c.ZodOptional="ZodOptional",c.ZodNullable="ZodNullable",c.ZodDefault="ZodDefault",c.ZodPromise="ZodPromise",c.ZodBranded="ZodBranded"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(c,d={message:`Input not instance of ${c.name}`})=>custom(g=>g instanceof c,d,!0),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),NEVER=INVALID;var mod=Object.freeze({__proto__:null,getParsedType,ZodParsedType,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,ZodType,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,get objectUtil(){return objectUtil},ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodNaN,BRAND,ZodBranded,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});const ComboboxField=({options:c,isLoading:d,name:g,defaultSearchTerm:v,defaultValue:b,onSearchChange:_,readonly:E})=>{const[R,M]=react.exports.useState(v||""),[P,O]=react.exports.useState({}),H=lodash.exports.isEmpty(P)?b:P,Q=lodash.exports.isObject(H)?JSON.stringify(H):H,ee=react.exports.useMemo(()=>{const W=Y=>{const U=Y.target.value;U.length>1&&_(U),U!==R&&M(U),c.filter(G=>G.label===U).length===0&&O({})};return lodash.exports.debounce(W,300)},[_]),V=W=>{const Y=c.filter(U=>U.label===W)[0];O(Y.value),M(W)};return React.createElement(Lo,{onChange:V,value:R,disabled:E},({open:W})=>React.createElement("div",null,React.createElement(Lo.Button,{as:"div",onClick:Y=>{(W||R.length===0)&&isMouseEvent(Y)&&Y.preventDefault()}},React.createElement(Lo.Input,{className:"ctw-listbox-input ctw-w-full",onChange:Y=>{Y.persist(),ee(Y)},placeholder:"Type to search"})),React.createElement("input",{hidden:!0,name:g,value:Q,readOnly:!0}),React.createElement(Lo.Options,{className:"ctw-listbox ctw-absolute ctw-z-10 ctw-m-0 ctw-mt-1 ctw-max-h-60 ctw-w-full ctw-list-none ctw-overflow-auto ctw-rounded-md ctw-bg-white ctw-p-0 ctw-py-1 ctw-text-base ctw-shadow-lg ctw-ring-1 ctw-ring-opacity-5 focus:ctw-outline-none sm:ctw-text-sm"},React.createElement(ComboboxOptions,{options:c,query:R,isLoading:d}))))},ComboboxOptions=({options:c,query:d,isLoading:g})=>d.length===0?React.createElement(ComboboxOption,{option:{value:"",label:"Type to search"}}):g?React.createElement(ComboboxOption,{option:{value:"",label:"Loading..."}}):d.length<2?React.createElement(ComboboxOption,{option:{value:"",label:"Pleae type at least two characters"}}):c.length===0?React.createElement(ComboboxOption,{option:{value:"",label:`No results found for search term '${d}'`}}):React.createElement(React.Fragment,null,c.map(v=>React.createElement(ComboboxOption,{option:v,key:v.label}))),ComboboxOption=({option:c})=>React.createElement(Lo.Option,{value:c.label,className:({active:d})=>`ctw-relative ctw-cursor-default ctw-select-none ctw-py-2 ctw-pr-4 ctw-pl-4 ${d?"ctw-bg-primary-light ctw-text-primary-dark":"ctw-text-content-black"}`},c.label);try{ComboboxField.displayName="ComboboxField",ComboboxField.__docgenInfo={description:"",displayName:"ComboboxField",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ComboxboxFieldOption[]"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"T"}},defaultSearchTerm:{defaultValue:null,description:"",name:"defaultSearchTerm",required:!0,type:{name:"string"}},onSearchChange:{defaultValue:null,description:"",name:"onSearchChange",required:!0,type:{name:"(searchTerm: string) => void"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const getZusApiBaseUrl=c=>c==="production"?"https://api.zusapi.com":`https://api.${c}.zusapi.com`,getFormsConditionsUrl=c=>`${getZusApiBaseUrl(c)}/forms-data/terminology/conditions`,getFormsMedicationsUrl=c=>`${getZusApiBaseUrl(c)}/forms-data/terminology/dosages`,getAutoCompleteMedications=async(c,d)=>{const{authToken:g,contextBuilderId:v}=c;return(await(await fetch(`${getFormsMedicationsUrl(c.env)}?display=${d}`,{headers:{Authorization:`Bearer ${g}`,...v&&{"Zus-Account":v}}})).json()).data},MedicationsAutoComplete=({defaultCoding:c,readonly:d,...g})=>{const{getRequestContext:v}=useCTW(),[b,_]=react.exports.useState(!1),[E,R]=react.exports.useState(),M=async P=>{_(!0);const O=await v(),H=await getAutoCompleteMedications(O,P);H&&R(H.map(Q=>({value:Q,label:Q.display}))),_(!1)};return React.createElement(ComboboxField,{options:E||[],isLoading:b,name:`${g.name}`,defaultSearchTerm:g.defaultValue,readonly:d,onSearchChange:M,defaultValue:c})};try{MedicationsAutoComplete.displayName="MedicationsAutoComplete",MedicationsAutoComplete.__docgenInfo={description:"",displayName:"MedicationsAutoComplete",props:{defaultCoding:{defaultValue:null,description:"",name:"defaultCoding",required:!1,type:{name:"Coding"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const getMedicationFormData=c=>{var d;return[{label:"Subject",value:c.subjectID,field:"subjectID",readonly:!0,hidden:!0},{label:"Date Asserted",value:(d=c.dateAsserted)!=null?d:format(new Date,"P"),field:"dateAsserted",readonly:!0},{label:"Medication",field:"medication",value:c.display,readonly:!1,render:(g,v)=>{var b;return React.createElement(MedicationsAutoComplete,{readonly:g,...v,defaultCoding:(b=c.rxNormCoding)!=null?b:{}})}},{label:"Latest Status",value:c.status,field:"status"},{label:"Instructions",value:c.dosage,field:"dosage"}]},medicationStatementSchema=mod.object({subjectID:mod.string({required_error:"Patient must be specified."}),dateAsserted:mod.date({required_error:"Date asserted is required."}),medication:mod.object({code:mod.string({required_error:"Please choose a medication."}),display:mod.string().optional(),system:mod.string().optional()}),dosage:mod.string().optional(),status:mod.enum(["active","completed","entered-in-error","intended","not-taken","on-hold","stopped","unknown"])});try{getMedicationFormData.displayName="getMedicationFormData",getMedicationFormData.__docgenInfo={description:"",displayName:"getMedicationFormData",props:{builderPatientRxNormStatus:{defaultValue:null,description:"",name:"builderPatientRxNormStatus",required:!1,type:{name:"Record<string, string>"}},basedOn:{defaultValue:null,description:"",name:"basedOn",required:!0,type:{name:"string | undefined"}},category:{defaultValue:null,description:"",name:"category",required:!0,type:{name:"string"}},context:{defaultValue:null,description:"",name:"context",required:!0,type:{name:"string | undefined"}},dateAsserted:{defaultValue:null,description:"",name:"dateAsserted",required:!0,type:{name:"string | undefined"}},derivedFrom:{defaultValue:null,description:"",name:"derivedFrom",required:!0,type:{name:"string[]"}},aggregatedFrom:{defaultValue:null,description:"",name:"aggregatedFrom",required:!0,type:{name:"Reference[]"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string"}},rxNormCoding:{defaultValue:null,description:"",name:"rxNormCoding",required:!0,type:{name:"Coding | undefined"}},dosage:{defaultValue:null,description:"",name:"dosage",required:!0,type:{name:"string | undefined"}},effectiveStart:{defaultValue:null,description:"",name:"effectiveStart",required:!0,type:{name:"string | undefined"}},identifier:{defaultValue:null,description:"",name:"identifier",required:!0,type:{name:"string | undefined"}},informationSource:{defaultValue:null,description:"",name:"informationSource",required:!0,type:{name:"Reference | undefined"}},medicationReference:{defaultValue:null,description:"",name:"medicationReference",required:!0,type:{name:"string | undefined"}},notesDisplay:{defaultValue:null,description:"",name:"notesDisplay",required:!0,type:{name:"string[]"}},partOf:{defaultValue:null,description:"",name:"partOf",required:!0,type:{name:"string | undefined"}},patientStatus:{defaultValue:null,description:"",name:"patientStatus",required:!0,type:{name:"string"}},rxNorm:{defaultValue:null,description:"",name:"rxNorm",required:!0,type:{name:"string | undefined"}},reason:{defaultValue:null,description:"",name:"reason",required:!0,type:{name:"string | undefined"}},reasonReference:{defaultValue:null,description:"",name:"reasonReference",required:!0,type:{name:"Reference[] | undefined"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"string"}},statusReason:{defaultValue:null,description:"",name:"statusReason",required:!0,type:{name:"string | undefined"}},subject:{defaultValue:null,description:"",name:"subject",required:!0,type:{name:"Reference"}},subjectID:{defaultValue:null,description:"",name:"subjectID",required:!0,type:{name:"string"}},lastFillDate:{defaultValue:null,description:"",name:"lastFillDate",required:!0,type:{name:"string | undefined"}},quantity:{defaultValue:null,description:"",name:"quantity",required:!0,type:{name:"string | undefined"}},daysSupply:{defaultValue:null,description:"",name:"daysSupply",required:!0,type:{name:"string | undefined"}},refills:{defaultValue:null,description:"",name:"refills",required:!0,type:{name:"string | undefined"}},lastPrescriber:{defaultValue:null,description:"",name:"lastPrescriber",required:!0,type:{name:"string | undefined"}},lastPrescribedDate:{defaultValue:null,description:"",name:"lastPrescribedDate",required:!0,type:{name:"string | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"MedicationStatement"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch{}const QUERY_KEYS=[QUERY_KEY_PATIENT,QUERY_KEY_PATIENT_MEDICATIONS,QUERY_KEY_PATIENT_BUILDER_MEDICATIONS],createMedicationStatement=async(c,d)=>{const g={resourceType:"MedicationStatement",status:c.status,dateAsserted:dateToISO(c.dateAsserted),subject:{type:"Patient",reference:`Patient/${c.subjectID}`},medicationCodeableConcept:{text:c.medication.display,coding:[{system:SYSTEM_RXNORM,code:c.medication.code}]},...c.dosage&&{dosage:[{text:c.dosage}]}},v=new MedicationStatementModel(g),b=await createFhirResourceWithProvenance(v.resource,await d());return await Promise.all(QUERY_KEYS.map(async _=>queryClient.invalidateQueries([_]))),b},AddNewMedDrawer=({isOpen:c,handleOnClose:d,medication:g,children:v})=>{var E,R;const b=usePatient(),_=getMedicationFormData(new MedicationStatementModel(g!=null?g:{resourceType:"MedicationStatement",status:"active",subject:{reference:`Patient/${(E=b.data)==null?void 0:E.id}`,display:(R=b.data)==null?void 0:R.display},dateAsserted:format(new Date,"yyyy-MM-dd")}));return React.createElement(React.Fragment,null,v,React.createElement(DrawerFormWithFields,{title:"Add Medication",action:createMedicationStatement,data:_,schema:medicationStatementSchema,isOpen:c,onClose:()=>d()}))};try{AddNewMedDrawer.displayName="AddNewMedDrawer",AddNewMedDrawer.__docgenInfo={description:"",displayName:"AddNewMedDrawer",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},handleOnClose:{defaultValue:null,description:"",name:"handleOnClose",required:!0,type:{name:"() => void"}},medication:{defaultValue:null,description:"",name:"medication",required:!1,type:{name:"MedicationStatement"}}}}}catch{}function useQueryGetPatientMedsForBuilder(){return useQueryWithPatient(QUERY_KEY_PATIENT_BUILDER_MEDICATIONS,[{informationSourceNot:"Patient"}],getBuilderMedications)}function useQueryGetSummarizedPatientMedications(){return useQueryWithPatient(QUERY_KEY_PATIENT_MEDICATIONS,[],getActiveMedications)}function useQueryAllPatientMedications(){const[c,d]=react.exports.useState(),[g,v]=react.exports.useState(),b=useQueryGetSummarizedPatientMedications(),_=useQueryGetPatientMedsForBuilder();react.exports.useEffect(()=>{var P,O;if(((P=b.data)==null?void 0:P.bundle)&&((O=_.data)==null?void 0:O.bundle)){const{medications:H}=b.data,{medications:Q}=_.data,ee=getMergedIncludedResources([b.data.bundle,_.data.bundle]),V=splitMedications(H,Q,ee);d(V.builderMedications.map(W=>new MedicationStatementModel(W,ee))),v(V.otherProviderMedications.map(W=>new MedicationStatementModel(W,ee)))}},[b.data,_.data]);const E=_.isLoading||b.isLoading,R=_.isFetching||b.isFetching,M=_.isError||b.isError;return{isFetching:R,isLoading:E,isError:M,builderMedications:c,otherProviderMedications:g}}function OtherProviderMedsTable({sortOrder:c="asc",sortColumn:d="display"}){const[g,v]=react.exports.useState([]),[b,_]=react.exports.useState(!1),[E,R]=react.exports.useState(!1),[M,P]=react.exports.useState(),{otherProviderMedications:O,isLoading:H}=useQueryAllPatientMedications();function Q(V){P(V),_(!0)}function ee(V){P(V),R(!0)}return react.exports.useEffect(()=>{!O||v(sort(O,fp.pipe(fp.get(d),fp.toLower),c))},[O,d,c]),React.createElement(React.Fragment,null,React.createElement(MedicationsTableBase,{medicationStatements:g,isLoading:H,rowMenuActions:V=>[{name:"View History",action:async()=>{Q(V)}},{name:"Add to Record",action:async()=>{ee(V)}}]}),React.createElement(MedicationDrawer,{medication:M,isOpen:b,onClose:()=>_(!1)}),React.createElement(AddNewMedDrawer,{medication:M==null?void 0:M.resource,isOpen:E,handleOnClose:()=>R(!1)}))}try{OtherProviderMedsTable.displayName="OtherProviderMedsTable",OtherProviderMedsTable.__docgenInfo={description:`Displays a table of medications that are not scoped to the current builder.
This component displays the inverse results of \`ProviderMedsTable\`.

The table has a menu to the right side which will pull out the
history for the medication listed in that row.`,displayName:"OtherProviderMedsTable",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},sortColumn:{defaultValue:{value:"display"},description:"",name:"sortColumn",required:!1,type:{name:"enum",value:[{value:'"builderPatientRxNormStatus"'},{value:'"basedOn"'},{value:'"category"'},{value:'"context"'},{value:'"dateAsserted"'},{value:'"derivedFrom"'},{value:'"aggregatedFrom"'},{value:'"display"'},{value:'"rxNormCoding"'},{value:'"dosage"'},{value:'"effectiveStart"'},{value:'"identifier"'},{value:'"informationSource"'},{value:'"medicationReference"'},{value:'"notesDisplay"'},{value:'"partOf"'},{value:'"patientStatus"'},{value:'"rxNorm"'},{value:'"reason"'},{value:'"reasonReference"'},{value:'"status"'},{value:'"statusReason"'},{value:'"subject"'},{value:'"subjectID"'},{value:'"lastFillDate"'},{value:'"quantity"'},{value:'"daysSupply"'},{value:'"refills"'},{value:'"lastPrescriber"'},{value:'"lastPrescribedDate"'},{value:'"resource"'},{value:'"includedResources"'},{value:'"revIncludes"'},{value:'"id"'},{value:'"isSummaryResource"'},{value:'"resourceType"'},{value:'"getBasicResourceByAction"'},{value:'"toString"'}]}},sortOrder:{defaultValue:{value:"asc"},description:"",name:"sortOrder",required:!1,type:{name:"enum",value:[{value:'"asc"'},{value:'"desc"'}]}}}}}catch{}function ProviderMedsTable({showInactive:c=!1,sortColumn:d="display",sortOrder:g="asc"}){const[v,b]=react.exports.useState([]),[_,E]=react.exports.useState(!1),[R,M]=react.exports.useState(),{builderMedications:P,isLoading:O}=useQueryAllPatientMedications();function H(Q){M(Q),E(!0)}return react.exports.useEffect(()=>{!P||b(sort(c?P:P.filter(Q=>Q.status==="Active"),fp.pipe(fp.get(d),fp.toLower),g))},[P,d,g,c]),React.createElement(React.Fragment,null,React.createElement(MedicationsTableBase,{medicationStatements:v,isLoading:O,rowMenuActions:Q=>[{name:"View History",action:async()=>{H(Q)}}]}),React.createElement(MedicationDrawer,{medication:R,isOpen:_,onClose:()=>E(!1)}))}try{ProviderMedsTable.displayName="ProviderMedsTable",ProviderMedsTable.__docgenInfo={description:`Displays a table of medications that are scoped to the CTWContext builder
and patient. To show medications that aren't scoped to the builder, use the
\`OtherProviderMedsTable\` instead.

The table has a menu to the right side which will pull out the
history for the medication listed in that row.`,displayName:"ProviderMedsTable",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},sortColumn:{defaultValue:{value:"display"},description:"",name:"sortColumn",required:!1,type:{name:"enum",value:[{value:'"builderPatientRxNormStatus"'},{value:'"basedOn"'},{value:'"category"'},{value:'"context"'},{value:'"dateAsserted"'},{value:'"derivedFrom"'},{value:'"aggregatedFrom"'},{value:'"display"'},{value:'"rxNormCoding"'},{value:'"dosage"'},{value:'"effectiveStart"'},{value:'"identifier"'},{value:'"informationSource"'},{value:'"medicationReference"'},{value:'"notesDisplay"'},{value:'"partOf"'},{value:'"patientStatus"'},{value:'"rxNorm"'},{value:'"reason"'},{value:'"reasonReference"'},{value:'"status"'},{value:'"statusReason"'},{value:'"subject"'},{value:'"subjectID"'},{value:'"lastFillDate"'},{value:'"quantity"'},{value:'"daysSupply"'},{value:'"refills"'},{value:'"lastPrescriber"'},{value:'"lastPrescribedDate"'},{value:'"resource"'},{value:'"includedResources"'},{value:'"revIncludes"'},{value:'"id"'},{value:'"isSummaryResource"'},{value:'"resourceType"'},{value:'"getBasicResourceByAction"'},{value:'"toString"'}]}},sortOrder:{defaultValue:{value:"asc"},description:"",name:"sortOrder",required:!1,type:{name:"enum",value:[{value:'"asc"'},{value:'"desc"'}]}},showInactive:{defaultValue:{value:"false"},description:"",name:"showInactive",required:!1,type:{name:"boolean"}}}}}catch{}function Wrapper({className:c,children:d}){return React.createElement("div",{className:cx("ctw-container",c)},d)}function StackedWrapper({className:c,children:d}){const g=react.exports.useRef(null),v=useBreakpoints(g),b=cx(c,{"ctw-stacked":v.sm});return React.createElement("div",{className:b,ref:g},d)}function Heading({className:c,title:d,children:g}){return React.createElement("div",{className:cx("ctw-heading-container",c)},d&&React.createElement("div",{className:"ctw-title"},d),g)}function Title({className:c,title:d,children:g}){return React.createElement("div",{className:cx("ctw-title-container",c)},d&&React.createElement("div",{className:"ctw-title"},d),g)}function Body({className:c,title:d,titleChildren:g,children:v}){const b=!!(d||g);return React.createElement("div",{className:cx("ctw-body-container",c)},React.createElement("div",{className:"ctw-space-y-3"},b&&React.createElement(Title,{title:d},g),v))}try{Wrapper.displayName="Wrapper",Wrapper.__docgenInfo={description:"",displayName:"Wrapper",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{StackedWrapper.displayName="StackedWrapper",StackedWrapper.__docgenInfo={description:"",displayName:"StackedWrapper",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{Heading.displayName="Heading",Heading.__docgenInfo={description:"",displayName:"Heading",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}try{Title.displayName="Title",Title.__docgenInfo={description:"",displayName:"Title",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}try{Body.displayName="Body",Body.__docgenInfo={description:"",displayName:"Body",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},titleChildren:{defaultValue:null,description:"",name:"titleChildren",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}}}}}catch{}const toggle="",Toggle=({name:c,text:d,onChange:g,inputProps:v})=>React.createElement("div",{className:"ctw-toggle"},React.createElement("div",{className:"ctw-relative ctw-mr-2 ctw-inline-block ctw-w-10 ctw-select-none ctw-align-middle ctw-transition ctw-duration-200 ctw-ease-in"},React.createElement("label",{htmlFor:c,className:"ctw-relative ctw-block ctw-h-6 ctw-cursor-pointer ctw-overflow-hidden ctw-rounded-full ctw-bg-divider-light"},React.createElement("input",{onChange:g,...v,type:"checkbox",name:c,id:c}),React.createElement("span",{className:"ctw-toggle-span"}))),React.createElement("label",{htmlFor:c,className:"ctw-text-sm ctw-font-medium ctw-text-icon-default"},d));try{Toggle.displayName="Toggle",Toggle.__docgenInfo={description:"",displayName:"Toggle",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},inputProps:{defaultValue:null,description:"",name:"inputProps",required:!1,type:{name:"{ value: string; defaultChecked: boolean; } | { value: string; checked: boolean; disabled: boolean; }"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement>) => void)"}}}}}catch{}const ToggleControl=({toggleProps:c,onFormChange:d})=>React.createElement("form",{onChange:d,className:"ctw-text-end"},React.createElement(Toggle,{...c}));try{ToggleControl.displayName="ToggleControl",ToggleControl.__docgenInfo={description:"",displayName:"ToggleControl",props:{toggleProps:{defaultValue:null,description:"",name:"toggleProps",required:!0,type:{name:"ToggleProps"}},onFormChange:{defaultValue:null,description:"",name:"onFormChange",required:!0,type:{name:"(e: FormEvent<HTMLFormElement>) => void"}}}}}catch{}const patientMedications="";function PatientMedications({className:c,readOnly:d=!1,showConfirmedMedsTable:g=!0,showOtherProvidersMedsTable:v=!0}){const[b,_]=react.exports.useState(!1),[E,R]=react.exports.useState(!1);return React.createElement(StackedWrapper,{className:cx("ctw-patient-medications",c)},React.createElement(Heading,{title:"Medications"},!d&&React.createElement(AddNewMedDrawer,{isOpen:b,handleOnClose:()=>_(!1)},React.createElement("button",{className:"ctw-btn-clear ctw-link",type:"button",onClick:()=>_(!0)},"+ Add Medication"))),g&&React.createElement(Body,null,React.createElement(Title,{title:"Confirmed Medications"},React.createElement(ToggleControl,{onFormChange:()=>R(!E),toggleProps:{name:"status",text:"Include Inactive"}})),React.createElement(ProviderMedsTable,{showInactive:E})),v&&React.createElement(Body,{title:"Other Provider Records"},React.createElement(OtherProviderMedsTable,null)))}try{PatientMedications.displayName="PatientMedications",PatientMedications.__docgenInfo={description:"",displayName:"PatientMedications",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"active"'},{value:'"entered-in-error"'},{value:'"not-taken"'},{value:'"completed"'},{value:'"on-hold"'},{value:'"intended"'},{value:'"stopped"'}]}},showConfirmedMedsTable:{defaultValue:{value:"true"},description:"",name:"showConfirmedMedsTable",required:!1,type:{name:"boolean"}},showOtherProvidersMedsTable:{defaultValue:{value:"true"},description:"",name:"showOtherProvidersMedsTable",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const pagination="",Pagination=({currentPage:c,isLoading:d=!1,pageSize:g,setCurrentPage:v,total:b})=>{const _=Math.min(b,(c-1)*g+1),E=Math.min(c*g,b),R=Math.ceil(b/g),M=Math.max(c-1,1),P=Math.min(c+1,R);let O=[1,R];return O.push(c-1,c,c+1),O=lodash.exports.uniq(O.sort((H,Q)=>H-Q).filter(H=>H>=1&&H<=R)),React.createElement("div",{className:"ctw-flex ctw-justify-between ctw-py-3 ctw-px-6"},React.createElement("div",{className:"ctw-text-gray-600 ctw-text-sm"},d?React.createElement(Loading,null):React.createElement(React.Fragment,null,React.createElement("span",{className:"ctw-font-medium"},_)," to"," ",React.createElement("span",{className:"ctw-font-medium"},E)," of"," ",React.createElement("span",{className:"ctw-font-medium"},b)," results")),R>1&&React.createElement("div",null,React.createElement("nav",{className:"ctw-pagination-nav","aria-label":"Pagination"},React.createElement(Page,{page:M,setCurrentPage:v,className:"ctw-pagination-group-start ctw-hover:ctw-bg-gray-50",disabled:c===1},React.createElement("span",{className:"ctw-sr-only"},"Previous"),React.createElement(ChevronLeftIcon$1,{className:"ctw-h-5 ctw-w-5","aria-hidden":"true"})),O.map((H,Q)=>{var W;const ee=(W=O[Q-1])!=null?W:0,V=H-ee-1;return React.createElement(react.exports.Fragment,{key:H},V>1&&React.createElement("span",{className:"ctw-pagination-ellipsis"},"..."),V===1&&React.createElement(Page,{page:H-1,setCurrentPage:v,currentPage:c}),React.createElement(Page,{setCurrentPage:v,page:H,currentPage:c}))}),React.createElement(Page,{page:P,setCurrentPage:v,className:"ctw-pagination-group-end",disabled:c===R},React.createElement("span",{className:"ctw-sr-only"},"Next"),React.createElement(ChevronRightIcon$1,{className:"ctw-h-5 ctw-w-5","aria-hidden":"true"})))))},Page=({setCurrentPage:c,page:d,currentPage:g,children:v,className:b,disabled:_=!1})=>{const E=d===g;return React.createElement("button",{type:"button",disabled:_,onClick:()=>c(d),className:cx(b,"ctw-pagination-page-btn",{active:E,disabled:_})},v||d)};try{Pagination.displayName="Pagination",Pagination.__docgenInfo={description:"",displayName:"Pagination",props:{currentPage:{defaultValue:null,description:"",name:"currentPage",required:!0,type:{name:"number"}},isLoading:{defaultValue:{value:"false"},description:"",name:"isLoading",required:!1,type:{name:"boolean"}},pageSize:{defaultValue:null,description:"",name:"pageSize",required:!0,type:{name:"number"}},setCurrentPage:{defaultValue:null,description:"",name:"setCurrentPage",required:!0,type:{name:"(n: number) => void"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"number"}}}}}catch{}const patientsTable="";function usePatientsList(c,d,g){return useQueryWithCTW(QUERY_KEY_PATIENTS_LIST,[c,d,g],getBuilderPatientsList)}const PatientsTable=({className:c,handleAddNewPatient:d,handleRowClick:g,pageSize:v=5,title:b="Patients"})=>{const[_,E]=react.exports.useState(1),[R,M]=react.exports.useState(0),[P,O]=react.exports.useState([]),[H,Q]=react.exports.useState(),{data:{patients:ee,total:V}={},isFetching:W,isError:Y}=usePatientsList(v,_-1,H),U=react.exports.useCallback(lodash.exports.debounce(G=>{Q(G),E(1),M(0),O([])},100),[]);return react.exports.useEffect(()=>{!W&&ee&&(M(V!=null?V:0),O(ee))},[ee,V,Y,W]),react.exports.useEffect(()=>{Y&&(M(0),O([]))},[Y,W]),React.createElement(StackedWrapper,{className:cx("ctw-patients-table",c)},React.createElement(Heading,{title:b},React.createElement("div",{className:"ctw-relative"},React.createElement("div",{className:"ctw-search-icon-wrapper"},React.createElement(SearchIcon$1,{className:"ctw-search-icon"})),React.createElement("input",{type:"text",className:"ctw-patients-table-search",placeholder:"Search",name:"searchPatientName",onChange:G=>U(G.currentTarget.value)}))),React.createElement(Body,null,React.createElement(Table$1,{records:P,columns,handleRowClick:g,hidePagination:!0},React.createElement(Pagination,{setCurrentPage:E,total:R,currentPage:_,pageSize:v,isLoading:W}))))},columns=[{title:"Name",render:c=>React.createElement(PatientNameColumn,{patient:c})},{title:"Contact",render:({email:c,phoneNumber:d})=>React.createElement(React.Fragment,null,React.createElement("div",{className:"ctw-patients-table-email"},c),React.createElement("div",{className:"ctw-patients-table-phone"},d))}],PatientNameColumn=({patient:c})=>React.createElement("div",{className:"ctw-flex ctw-items-center"},React.createElement("div",{className:"ctw-ml-4"},React.createElement("div",{className:"ctw-flex ctw-font-medium"},React.createElement("div",{className:"ctw-max-w-xs"},c.fullName),c.gender&&React.createElement("div",{className:"ctw-uppercase"}," (",c.gender[0],")")),React.createElement("div",{className:"ctw-text-content-lighter"},c.dob," (",c.age,")")));try{PatientsTable.displayName="PatientsTable",PatientsTable.__docgenInfo={description:"PatientsTable displays a paginated list of all patients for a builder. In\naddition to having configurable page size, lazy loading and name search, the\ncomponent accepts an `onRowClick` prop so developers can add their own\nlogic when a row is clicked. The `onRowClick` receives the targeted\n`PatientModel` as its sole argument, which contains the underlying FHIR\nobject as `.resource`.",displayName:"PatientsTable",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"Argument"}},handleRowClick:{defaultValue:null,description:"",name:"handleRowClick",required:!0,type:{name:"(row: PatientModel) => void"}},handleAddNewPatient:{defaultValue:null,description:"",name:"handleAddNewPatient",required:!1,type:{name:"(() => void)"}},pageSize:{defaultValue:{value:"5"},description:"",name:"pageSize",required:!1,type:{name:"number"}},title:{defaultValue:{value:"Patients"},description:"",name:"title",required:!1,type:{name:"string"}},getRowClasses:{defaultValue:null,description:"",name:"getRowClasses",required:!1,type:{name:"((row: PatientModel) => Argument)"}},onRowClick:{defaultValue:null,description:"",name:"onRowClick",required:!1,type:{name:"((row: PatientModel) => void)"}}}}}catch{}const Badge=({className:c,color:d,text:g})=>{const v={primary:"ctw-bg-primary-light ctw-text-primary-main",gray:"ctw-bg-bg-light ctw-text-content-light",info:"ctw-bg-info-light ctw-text-info-main",success:"ctw-bg-success-light ctw-text-success-main",caution:"ctw-bg-caution-light ctw-text-caution-main",error:"ctw-bg-error-light ctw-text-error-main"}[d];return React.createElement("span",{className:cx(c,v,"ctw-inline-flex ctw-rounded-full ctw-px-2 ctw-text-xs ctw-font-semibold ctw-leading-5")},g)};try{Badge.displayName="Badge",Badge.__docgenInfo={description:"",displayName:"Badge",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"enum",value:[{value:'"error"'},{value:'"primary"'},{value:'"gray"'},{value:'"info"'},{value:'"success"'},{value:'"caution"'}]}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}}}catch{}const Modal=({isOpen:c,onAfterClosed:d,children:g,className:v})=>React.createElement(We$1,{appear:!0,show:c,as:react.exports.Fragment},React.createElement(gt,{as:"div",className:"ctw-relative ctw-z-[10100]",onClose:()=>{}},React.createElement(We$1.Child,{as:react.exports.Fragment,enter:"ctw-ease-out ctw-duration-300",enterFrom:"ctw-opacity-0",enterTo:"ctw-opacity-100",leave:"ctw-ease-in ctw-duration-200",leaveFrom:"ctw-opacity-100",leaveTo:"ctw-opacity-0",afterLeave:d},React.createElement("div",{className:"ctw-fixed ctw-inset-0  ctw-transition-opacity"},React.createElement("div",{className:"ctw-h-full ctw-w-full ctw-bg-content-light ctw-opacity-75"}))),React.createElement("div",{className:"ctw-fixed ctw-inset-0 ctw-overflow-auto"},React.createElement("div",{className:"ctw-flex ctw-min-h-full ctw-items-center ctw-justify-center ctw-p-4 ctw-text-center"},React.createElement(We$1.Child,{as:react.exports.Fragment,enter:"ctw-ease-out ctw-duration-300",enterFrom:"ctw-opacity-0 ctw-scale-95",enterTo:"ctw-opacity-100 ctw-scale-100",leave:"ctw-ease-in ctw-duration-200",leaveFrom:"ctw-opacity-100 ctw-scale-100",leaveTo:"ctw-opacity-0 ctw-scale-95"},React.createElement(gt.Panel,{className:cx("ctw-min-w-fit ctw-max-w-lg ctw-transform ctw-rounded-lg ctw-bg-white ctw-py-10 ctw-px-10 ctw-align-middle ctw-shadow-xl",v)},React.createElement("div",{className:"ctw-flex ctw-h-full ctw-flex-col ctw-space-y-6"},g)))))));try{Modal.displayName="Modal",Modal.__docgenInfo={description:"",displayName:"Modal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onAfterClosed:{defaultValue:null,description:"",name:"onAfterClosed",required:!1,type:{name:"(() => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const CCSChapterName={INF:{fullName:"Certain Infectious and Parasitic Diseases",shortName:"Infectious and Parasitic Diseases"},NEO:{fullName:"Neoplasms",shortName:"Neoplasms"},BLD:{fullName:"Diseases of the Blood and Blood Forming Organs and Certain Disorders Involving the Immune Mechanism",shortName:"Blood Diseases"},END:{fullName:"Endocrine, Nutritional and Metabolic Diseases",shortName:"Endocrine, Nutritional and Metabolic"},MBD:{fullName:"Mental, Behavioral and Neurodevelopmental Disorders",shortName:"Mental and Behavioral"},NVS:{fullName:"Diseases of the Nervous System",shortName:"Nervous System"},EYE:{fullName:"Diseases of the Eye and Adnexa",shortName:"Eye and Adnexa"},EAR:{fullName:"Diseases of the Ear and Mastoid Process",shortName:"Ear and Mastoid Process"},CIR:{fullName:"Diseases of the Circulatory System",shortName:"Circulatory System"},RSP:{fullName:"Diseases of the Respiratory System",shortName:"Respiratory System"},DIG:{fullName:"Diseases of the Digestive System",shortName:"Digestive System"},SKN:{fullName:"Diseases of the Skin and Subcutaneous Tissue",shortName:"Skin and Subcutaneous Tissue"},MUS:{fullName:"Diseases of the Musculoskeletal System and Connective Tissue",shortName:"Musculoskeletal System"},GEN:{fullName:"Diseases of the Genitourinary System",shortName:"Genitourinary System"},PRG:{fullName:"Pregnancy, Childbirth and the Puerperium",shortName:"Pregnancy & Childbirth"},PNL:{fullName:"Certain Conditions Originating in the Perinatal Period",shortName:"Perinatal Conditions"},MAL:{fullName:"Congenital Malformations, Deformations and Chromosomal Abnormalities",shortName:"Malformations and Chromosomal Abnormalities"},SYM:{fullName:"Symptoms, Signs and Abnormal Clinical and Laboratory Findings",shortName:"Clinical Findings"},INJ:{fullName:"Injury, Poisoning and Certain Other Consequences of External Causes",shortName:"External Causes Injury"},EXT:{fullName:"External Causes of Morbidity",shortName:"External Morbidity"},FAC:{fullName:"Factors Influencing Health Status and Contact with Health Services",shortName:"Health Status Influences"},XXX:{fullName:"Unacceptable principal diagnosis (inpatient data) or first-listed diagnosis (outpatient data)",shortName:"Unacceptable principal diagnosis"}};function getAddConditionWithDefaults(c){const d=lodash.exports.cloneDeep(c);return d.clinicalStatus={coding:[{system:SYSTEM_CONDITION_CLINICAL,code:"active",display:"Active"}],text:"active"},d.verificationStatus={coding:[{system:SYSTEM_CONDITION_VERIFICATION_STATUS,code:"confirmed",display:"Confirmed"}],text:"confirmed"},d}const createOrEditCondition=async(c,d,g,v)=>{const b=await v(),_={resourceType:"Condition",id:g.id,recorder:await getUsersPractitionerReference(b),clinicalStatus:{coding:[{system:SYSTEM_CONDITION_CLINICAL,code:g.clinicalStatus}]},verificationStatus:{coding:[{system:SYSTEM_CONDITION_VERIFICATION_STATUS,code:g.verificationStatus}]},category:g.id&&c?c.resource.category:[{coding:[{system:SYSTEM_CONDITION_CATEGORY,code:"problem-list-item",display:"Problem List Item"}]}],code:g.id&&c?c.codings:{coding:[{system:g.condition.system,code:g.condition.code,display:g.condition.display}],text:g.condition.display},...g.abatement&&{abatementDateTime:dateToISO(g.abatement)},onsetDateTime:dateToISO(g.onset),recordedDate:dateToISO(new Date),subject:{type:"Patient",reference:`Patient/${d}`},note:g.note?[{text:g.note}]:void 0};g.verificationStatus==="entered-in-error"&&(_.clinicalStatus=void 0);const E=await createOrEditFhirResource(_,b);return await Promise.all([queryClient.invalidateQueries([QUERY_KEY_PATIENT_CONDITIONS]),queryClient.invalidateQueries([QUERY_KEY_OTHER_PROVIDER_CONDITIONS])]),E},CONDITION_CODE_PREFERENCE_ORDER=[{system:SYSTEM_SNOMED,checkForEnrichment:!0},{system:SYSTEM_ICD10,checkForEnrichment:!0},{system:SYSTEM_SNOMED},{system:SYSTEM_ICD10},{system:SYSTEM_ICD10_CM},{system:SYSTEM_ICD9},{system:SYSTEM_ICD9_CM}];function getNewCondition(c){const d={resourceType:"Condition",subject:{type:"Patient",reference:`Patient/${c}`}};return getAddConditionWithDefaults(d)}function usePatientConditions(){return useQueryWithPatient(QUERY_KEY_PATIENT_CONDITIONS,[],async(c,d)=>{try{const{bundle:g,resources:v}=await searchBuilderRecords("Condition",c,{patientUPID:d.UPID});return filterAndSort(setupConditionModels(v,g))}catch(g){throw new Error(`Failed fetching condition information for patient: ${g}`)}})}function useOtherProviderConditions(){return useQueryWithPatient(QUERY_KEY_OTHER_PROVIDER_CONDITIONS,[],async(c,d)=>{try{const{bundle:g,resources:v}=await searchSummaryRecords("Condition",c,{_revinclude:"Basic:subject",patientUPID:d.UPID});return filterAndSort(setupConditionModels(v,g))}catch(g){throw new Error(`Failed fetching condition information for patient: ${g}`)}})}function useConditionHistory(c){return useQueryWithPatient(QUERY_KEY_CONDITION_HISTORY,[c],async(d,g)=>{if(!!c)try{const v=c.knownCodings.map(R=>`${R.system}|${R.code}`),b={patientUPID:g.UPID,_include:["Condition:patient","Condition:encounter"],"_include:iterate":"Patient:organization"};v.length>0?b.code=v.join(","):b._id=c.id;const{resources:_,bundle:E}=await searchCommonRecords("Condition",d,b);return{conditions:_,bundle:E}}catch(v){throw new Error(`Failed fetching condition history information for patient: ${v}`)}},!!c)}function setupConditionModels(c,d){const g=getIncludedBasics(d);return c.map(v=>{var b;return new ConditionModel(v,void 0,g[(b=v.id)!=null?b:""])})}function filterAndSort(c){return lodash.exports.orderBy(c.filter(d=>{var g;return((g=d.resource.asserter)==null?void 0:g.type)!=="Patient"}),[d=>{var g;return(g=d.resource.recordedDate)!=null?g:""},d=>d.display],["desc"])}async function getBinary(c,d){const g=new Map;return d&&await Promise.all(d.map(async v=>{var P,O;const b=`${getZusApiBaseUrl(c.env)}/fhir/Provenance?target=Condition/${v.id}`,E=await(await fetch(b,{headers:{Authorization:`Bearer ${c.authToken}`}})).json();let R;if(((O=(P=E.entry)==null?void 0:P[0].resource.entity)==null?void 0:O[0].role)==="source"){const H=E.entry[0].resource.entity[0].what.reference,Q=`${getZusApiBaseUrl(c.env)}/fhir/${H}`;R=await(await fetch(Q,{headers:{Authorization:`Bearer ${c.authToken}`,accept:"application/json","Content-Type":"application/json+fhir"}})).json()}const M={xmlBinary:R||void 0,isBinary:(R==null?void 0:R.data)!==void 0};g.set(v.id,M)})),g}class ConditionModel extends FHIRModel{get abatement(){var d,g,v;return this.resource.abatementAge?(d=this.resource.abatementAge.value)==null?void 0:d.toString():this.resource.abatementDateTime?formatDateISOToLocal(this.resource.abatementDateTime):this.resource.abatementPeriod?formatDateISOToLocal(this.resource.abatementPeriod.start):this.resource.abatementRange?formatDateISOToLocal((v=(g=this.resource.abatementRange.low)==null?void 0:g.value)==null?void 0:v.toString()):this.resource.abatementString}get active(){var g;const d=lodash.exports.find((g=this.resource.clinicalStatus)==null?void 0:g.coding,{system:SYSTEM_CONDITION_CLINICAL});return d!=null&&d.code?["active","recurrence","relapse"].includes(d.code):!1}get isArchived(){return this.getBasicResourceByAction("archive")!==void 0}get asserter(){var d;return(d=this.resource.asserter)==null?void 0:d.display}get bodySites(){var d;return((d=this.resource.bodySite)==null?void 0:d.map(g=>codeableConceptLabel(g)))||[]}get categories(){var d;return((d=this.resource.category)==null?void 0:d.map(g=>codeableConceptLabel(g)))||[]}get ccsChapter(){var g;const d=this.ccsChapterCode;if(!!d)return(g=CCSChapterName[d])==null?void 0:g.shortName}get ccsChapterCode(){var d,g;return(g=(d=findCoding(SYSTEM_CCS,this.resource.code))==null?void 0:d.code)==null?void 0:g.slice(0,3)}get ccsGrouping(){var d;return(d=findCoding(SYSTEM_CCS,this.resource.code))==null?void 0:d.display}get clinicalStatus(){return codeableConceptLabel(this.resource.clinicalStatus)}get clinicalStatusCode(){var d,g;return(g=lodash.exports.find((d=this.resource.clinicalStatus)==null?void 0:d.coding,{system:SYSTEM_CONDITION_CLINICAL}))==null?void 0:g.code}get codings(){return this.resource.code}get display(){var d,g;return(g=(d=findCodingByOrderOfPreference(CONDITION_CODE_PREFERENCE_ORDER,this.resource.code))==null?void 0:d.display)!=null?g:codeableConceptLabel(this.resource.code)}get encounter(){var d;return(d=this.resource.encounter)==null?void 0:d.display}get evidences(){var d;return((d=this.resource.evidence)==null?void 0:d.map(g=>{var v;return codeableConceptLabel((v=g.code)==null?void 0:v[0])}))||[]}get icd10Code(){var d;return(d=findCoding(SYSTEM_ICD10,this.resource.code))==null?void 0:d.code}get icd10System(){var d;return(d=findCoding(SYSTEM_ICD10,this.resource.code))==null?void 0:d.system}get icd10Display(){var d;return(d=findCoding(SYSTEM_ICD10,this.resource.code))==null?void 0:d.display}get knownCodings(){const d=lodash.exports.compact(CONDITION_CODE_PREFERENCE_ORDER.map(v=>v.checkForEnrichment?findCodingWithEnrichment(v.system,this.resource.code):findCoding(v.system,this.resource.code)));return lodash.exports.uniqWith(d,(v,b)=>v.system===b.system)}knownCodingsMatch(d){return lodash.exports.intersectionWith(this.knownCodings,d.knownCodings,(g,v)=>g.code===v.code&&g.system===v.system).length>0}get notes(){var d;return((d=this.resource.note)==null?void 0:d.map(g=>g.text))||[]}get onset(){var d,g,v;return this.resource.onsetAge?(d=this.resource.onsetAge.value)==null?void 0:d.toString():this.resource.onsetDateTime?formatDateISOToLocal(this.resource.onsetDateTime):this.resource.onsetPeriod?formatDateISOToLocal(this.resource.onsetPeriod.start):this.resource.onsetRange?formatDateISOToLocal((v=(g=this.resource.onsetRange.low)==null?void 0:g.value)==null?void 0:v.toString()):formatStringToDate(this.resource.onsetString)}get patient(){const d=findReference("Patient",this.resource.contained,this.includedResources,this.resource.subject.reference);if(d)return new PatientModel(d,this.includedResources)}get preferredCoding(){return findCodingByOrderOfPreference(CONDITION_CODE_PREFERENCE_ORDER,this.resource.code)}get recordedDate(){return formatDateISOToLocal(this.resource.recordedDate)}get recorded(){return formatDateISOToLocal(this.resource.recordedDate)}get recorder(){var d;return(d=this.resource.recorder)==null?void 0:d.display}get severity(){return codeableConceptLabel(this.resource.severity)}get snomedCoding(){return findCoding(SYSTEM_SNOMED,this.resource.code)}get snomedCode(){var d;return(d=findCoding(SYSTEM_SNOMED,this.resource.code))==null?void 0:d.code}get snomedDisplay(){var d;return(d=findCoding(SYSTEM_SNOMED,this.resource.code))==null?void 0:d.display}get snomedSystem(){var d;return(d=findCoding(SYSTEM_SNOMED,this.resource.code))==null?void 0:d.system}get stages(){var d;return((d=this.resource.stage)==null?void 0:d.map(g=>{const v=codeableConceptLabel(g.summary),b=codeableConceptLabel(g.type);return`Summary: ${v}, Type: ${b}`}))||[]}get status(){function d(g){switch(g){case"active":case"recurrence":case"relapse":return"Active";case"inactive":case"remission":case"resolved":return"Inactive";default:return"Unknown"}}if(this.isSummaryResource)return this.isArchived?"Dismissed":d(this.clinicalStatusCode);switch(this.verificationStatusCode){case"confirmed":return d(this.clinicalStatusCode);case"unconfirmed":return"Pending";case"refuted":return"Refuted";case"entered-in-error":return"Entered in Error";default:return"Unknown"}}get subjectID(){var g;const[,d]=((g=this.resource.subject.reference)==null?void 0:g.split("/"))||[];return d||""}get verificationStatus(){return codeableConceptLabel(this.resource.verificationStatus)}get verificationStatusCode(){var d,g;return(g=lodash.exports.find((d=this.resource.verificationStatus)==null?void 0:d.coding,{system:SYSTEM_CONDITION_VERIFICATION_STATUS}))==null?void 0:g.code}}function isError(c){return typeof c=="object"&&c!==null?"message"in c:!1}const errorResponse=(c,d)=>{if(isFhirError(d))throw fhirErrorResponse(c,d);return isError(d)?{title:c,statusText:d.message}:{title:c}},getFormResponseErrors=c=>{let d=[],g=!0;return isFhirError(c)&&isOperationOutcome(c.response.data)?(d=new OperationOutcomeModel(c.response.data).issues.filter(v=>v.severity!=="warning").map(v=>v.display),g=!1):c instanceof Error&&(d=[c.message],g=!1),{requestErrors:d,responseIsSuccess:g}};function parseParams(c,d,g,v){var E;let b=d;for(;b instanceof ZodObject||b instanceof ZodEffects;)if(b=b instanceof ZodObject?b.shape:b instanceof ZodEffects?b._def.schema:null,b===null)throw new Error(`Could not find shape for key ${g}`);if(g.includes(".")){let[R,...M]=g.split(".");c[R]=(E=c[R])!=null?E:{},parseParams(c[R],b[R],M.join("."),v);return}g.includes("[]")&&(g=g.replace("[]",""));const _=b[g];_&&processDef(_,c,g,v)}function processDef(c,d,g,v){let b;if(c instanceof ZodString||c instanceof ZodLiteral)b=v;else if(c instanceof ZodNumber){const _=Number(v);b=isNaN(_)?v:_}else if(c instanceof ZodDate){const _=Date.parse(v);b=isNaN(_)?v:new Date(_)}else if(c instanceof ZodBoolean)b=v==="true"?!0:v==="false"?!1:Boolean(v);else if(c instanceof ZodNativeEnum||c instanceof ZodEnum)b=v;else if(c instanceof ZodOptional||c instanceof ZodDefault){processDef(c._def.innerType,d,g,v);return}else if(c instanceof ZodArray){d[g]===void 0&&(d[g]=[]),processDef(c.element,d,g,v);return}else if(c instanceof ZodEffects){processDef(c._def.schema,d,g,v);return}else if(c instanceof ZodObject){const _=JSON.parse(v);b=_,Object.entries(c.shape).forEach(([E,R])=>{b[E]||delete _[E]})}else if(c instanceof ZodUnknown)b=JSON.parse(v);else throw new Error(`Unexpected type ${c._def.typeName} for key ${g}`);Array.isArray(d[g])?d[g].push(b):d[g]=b}function isIterable(c){return Symbol.iterator in Object(c)}function getParamsInternal(c,d){let g={},v=[];isIterable(c)?v=Array.from(c):v=Object.entries(c);for(const[M,P]of v)P!==""&&parseParams(g,d,M,P);const _=d.safeParse(g);if(_.success)return{success:!0,data:_.data,errors:void 0};const E={},R=(M,P)=>{E.hasOwnProperty(M)?E[M]=[...E[M],P]:E[M]=[P]};return _.error.issues.forEach(M=>{const{message:P,path:O,code:H,expected:Q,received:ee}=M,[V,W]=O;let Y=g[V];W!==void 0&&(Y=Y[W]),R(V,P)}),{success:!1,data:void 0,errors:E}}async function getFormData(c,d){return getParamsInternal(c,d)}function getOptions(c,d){var v;const g=c.shape[d];return(g==null?void 0:g.options)||((v=g==null?void 0:g.unwrap)==null?void 0:v.call(g).options)}function useFormInputProps(c,d={}){const g=c instanceof ZodEffects?c._def.schema:c,{shape:v}=g,b=d;return function(E,R={}){R={...b,...R};const M=v[E];if(!M)throw new Error(`no such key: ${E}`);return getInputProps(E,g,M)}}function getInputProps(c,d,g){var H,Q,ee,V;let v="text",b,_,E,R,M;const P=getOptions(d,c);if(g instanceof ZodString){g.isEmail?v="email":g.isURL&&(v="url"),E=(H=g.minLength)!=null?H:void 0,R=(Q=g.maxLength)!=null?Q:void 0;const W=g._def.checks.find(Y=>Y.kind==="regex");M=W?W.regex.source:void 0}else if(g instanceof ZodNumber)v="number",b=(ee=g.minValue)!=null?ee:void 0,_=(V=g.maxValue)!=null?V:void 0;else if(g instanceof ZodBoolean)v="checkbox";else if(g instanceof ZodDate||g._def.innerType instanceof ZodDate)v="date";else if(g instanceof ZodArray)return getInputProps(c,d,g.element);const O={name:c,type:v,options:P};return g instanceof ZodOptional||(O["aria-required"]=!0),b&&(O.min=b),_&&(O.max=_),E&&Number.isFinite(E)&&(O.minLength=E),R&&Number.isFinite(R)&&(O.maxLength=R),M&&(O.pattern=M),O}const DrawerForm=({action:c,onClose:d,children:g,schema:v,...b})=>{const[_,E]=react.exports.useState(!1),[R,M]=react.exports.useState(),{getRequestContext:P}=useCTW(),O=()=>{M({}),E(!1)},H=async Q=>{Q.preventDefault(),E(!0);const ee=Q.target,V=Array.from(Q.target.querySelectorAll("input")),W={};if(V.forEach(j=>{j.checkValidity()||(W[j.name]=[`The value is not valid for ${j.name}`])}),!lodash.exports.isEmpty(W)){M({formErrors:W}),E(!1);return}const Y=new FormData(ee),U=await getFormData(Y,v);if(!U.success){M({formErrors:U.errors,requestErrors:void 0}),E(!1);return}let G,te,B;try{G=await c(U.data,P)}catch{te=!1,B=[]}if(G){const j=getFormResponseErrors(G);te=j.responseIsSuccess,B=j.requestErrors}te?(E(!1),d()):(M({formErrors:void 0,requestErrors:B}),E(!1))};return React.createElement(Drawer,{...b,onClose:d,onAfterClosed:O},React.createElement("form",{className:"ctw-flex ctw-h-full ctw-flex-col ctw-overflow-y-auto",onSubmit:H,noValidate:!0},React.createElement(Drawer.Body,null,React.createElement("div",{className:"ctw-space-y-4"},(R==null?void 0:R.requestErrors)&&React.createElement(ErrorAlert,{header:"There was an error with your submission"},R.requestErrors.length===1?R.requestErrors[0]:React.createElement("ul",{className:"ctw-m-0 ctw-list-disc ctw-px-4"},R.requestErrors.map(Q=>React.createElement("li",null,Q)))),g(_,R==null?void 0:R.formErrors))),React.createElement(Drawer.Footer,null,React.createElement("div",{className:"ctw-flex ctw-items-center ctw-justify-between"},React.createElement(React.Fragment,null,(R==null?void 0:R.requestErrors)&&React.createElement("div",{className:"ctw-text-sm ctw-font-medium ctw-text-error-heading"},"There was an error with your submission")),React.createElement("div",{className:"ctw-ml-auto ctw-flex ctw-h-full ctw-space-x-3 ctw-justify-self-end"},React.createElement("button",{type:"button",className:"ctw-btn-default",onClick:d},"Cancel"),React.createElement(SaveButton,{submitting:_}))))))};try{DrawerForm.displayName="DrawerForm",DrawerForm.__docgenInfo={description:"",displayName:"DrawerForm",props:{action:{defaultValue:null,description:"",name:"action",required:!0,type:{name:"(data: T, getRequestContext: () => Promise<CTWRequestContext>) => Promise<unknown>"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"AnyZodSchema"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onAfterClosed:{defaultValue:null,description:`Called after drawer closing animation has ended. Use this for
any cleanup that would affect the content displayed in the drawer.`,name:"onAfterClosed",required:!1,type:{name:"(() => void)"}},disableCloseOnBlur:{defaultValue:null,description:"",name:"disableCloseOnBlur",required:!1,type:{name:"boolean"}}}}}catch{}const FormField=({errors:c,options:d,lines:g,defaultValue:v,readonly:b,hidden:_,render:E,...R})=>{const M=R.type==="date"?formatDateLocalToISO(v):v,P=()=>E?E(b,{...R,defaultValue:v,hidden:_}):d?React.createElement("select",{className:cx({"ctw-error":c},"ctw-listbox-button ctw-w-full"),name:R.name,id:R.name,disabled:R.disabled,defaultValue:M},d.map(O=>React.createElement("option",{value:O,key:O},lodash.exports.startCase(O)))):g?React.createElement("textarea",{rows:g,className:cx({"ctw-error":c},"ctw-listbox-textarea ctw-w-full ctw-whitespace-pre-wrap"),defaultValue:M,disabled:R.disabled,readOnly:b,name:R.name,id:R.name}):React.createElement("input",{...R,id:R.name,type:R.type,className:cx({"ctw-error":c},"ctw-listbox-input ctw-w-full"),readOnly:b,...M?{defaultValue:M}:{}});return E&&_?E(b,{...R,defaultValue:v,hidden:_}):_?React.createElement("input",{...R,defaultValue:M,hidden:_}):React.createElement(React.Fragment,null,React.createElement("div",{className:"ctw-relative"},P(),b&&React.createElement(LockClosedIcon$1,{className:"ctw-absolute ctw-right-3 ctw-top-1/2 ctw-h-4 ctw-w-4 ctw--translate-y-1/2 ctw-transform ctw-fill-content-lighter"}),c&&React.createElement("div",{className:"ctw-pointer-events-none ctw-absolute ctw-right-0 ctw-top-2 ctw-pr-4"},React.createElement(ExclamationCircleIcon$1,{className:"ctw-h-5 ctw-w-5 ctw-text-error-main","aria-hidden":"true"}))),c&&React.createElement("div",{className:"ctw-text-xs ctw-italic ctw-text-error-main"},c.length>1?c.map(O=>React.createElement("div",{key:O},"\u2022 ",O)):c[0]))};try{FormField.displayName="FormField",FormField.__docgenInfo={description:"",displayName:"FormField",props:{errors:{defaultValue:null,description:"",name:"errors",required:!1,type:{name:"string[]"}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:"string[]"}},lines:{defaultValue:null,description:"",name:"lines",required:!1,type:{name:"number"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"((string | string[]) & (string | number | readonly string[]))"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}},render:{defaultValue:null,description:"",name:"render",required:!1,type:{name:"((readonly: boolean, props: InputHTMLAttributes<HTMLInputElement>) => Element)"}}}}}catch{}const FormFieldLabel=({label:c,required:d,name:g})=>React.createElement("div",{className:"ctw-flex ctw-items-center ctw-justify-between"},React.createElement("label",{htmlFor:g},c),!d&&React.createElement("span",{className:"ctw-right-0 ctw-inline-block ctw-text-xs ctw-text-content-light"},"Optional"),d&&React.createElement(React.Fragment,null,React.createElement("div",{className:"ctw-flex-grow ctw-text-icon-default"},"*")));try{FormFieldLabel.displayName="FormFieldLabel",FormFieldLabel.__docgenInfo={description:"",displayName:"FormFieldLabel",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const DrawerFormWithFields=({title:c,header:d,data:g=[],schema:v,action:b,..._})=>{const E=useFormInputProps(v);return React.createElement(DrawerForm,{title:c,action:b,schema:v,..._},(R,M)=>React.createElement("div",{className:"ctw-space-y-4"},d,React.createElement("div",{className:"ctw-space-y-6"},g.map(P=>{if(lodash.exports.isArray(P))return React.createElement(FormFieldEntries,{recordList:P,errors:M,submitting:R,schema:v,key:P[0].label});const{label:O,field:H,value:Q,lines:ee,readonly:V,hidden:W,render:Y}=P;if(!H)return React.createElement(FormField,{key:O,readonly:V,render:Y,name:O});const U=E(H,v);return W?React.createElement(FormField,{...U,key:O,lines:ee,disabled:R,readonly:V,defaultValue:Q,errors:M==null?void 0:M[H],hidden:W,render:Y}):React.createElement(FormFieldEntry,{key:P.label,entry:P,errors:M,props:U,submitting:R})}))))},FormFieldEntries=({recordList:c,errors:d,submitting:g,schema:v})=>{const b=useFormInputProps(v);return React.createElement("div",{className:"ctw-flex ctw-space-x-3"},c.map(_=>React.createElement(react.exports.Fragment,{key:_.label},React.createElement(FormFieldEntry,{entry:_,props:b(_.field,v),submitting:g,errors:d}))))},FormFieldEntry=({entry:c,errors:d,props:g,submitting:v})=>{const{label:b,value:_,field:E,lines:R,readonly:M,hidden:P,render:O}=c,H=d==null?void 0:d[E];return React.createElement("div",{key:b,className:"ctw-flex ctw-grow ctw-basis-0 ctw-flex-col ctw-space-y-1.5 ctw-text-sm ctw-font-medium ctw-text-content-black"},React.createElement(FormFieldLabel,{label:b,name:g.name,required:g["aria-required"]}),React.createElement(FormField,{...g,key:b,lines:R,disabled:v,readonly:M,defaultValue:_,errors:H,hidden:P,render:O}))};try{DrawerFormWithFields.displayName="DrawerFormWithFields",DrawerFormWithFields.__docgenInfo={description:"",displayName:"DrawerFormWithFields",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},header:{defaultValue:null,description:"",name:"header",required:!1,type:{name:"ReactNode"}},data:{defaultValue:{value:"[]"},description:"",name:"data",required:!1,type:{name:"FormEntry[]"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"AnyZodSchema"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},action:{defaultValue:null,description:"",name:"action",required:!0,type:{name:"(data: T, getRequestContext: () => Promise<CTWRequestContext>) => Promise<unknown>"}}}}}catch{}const ModalConfirmDelete=({resource:c,resourceName:d,onDelete:g,onClose:v,...b})=>{const[_,E]=react.exports.useState(),[R,M]=react.exports.useState(!1),P=async()=>{try{M(!0),await g(),M(!1),v()}catch(O){throw M(!1),E("Something went wrong. Please try again."),O}};return React.createElement(Modal,{onAfterClosed:()=>E(void 0),...b},_&&React.createElement(ErrorAlert,{header:_}),React.createElement("div",{className:"ctw-items-left ctw-flex ctw-h-full ctw-flex-col ctw-space-y-2 ctw-overflow-y-auto"},React.createElement("span",{className:"ctw-text-left ctw-text-lg ctw-font-medium ctw-text-content-black"},`Remove this ${c.resourceType.toLowerCase()}?`),React.createElement("span",{className:"ctw-subtext ctw-max-w-sm ctw-text-left ctw-text-content-light"},"This will remove"," ",React.createElement("span",{className:"ctw-font-medium"},d)," from this patient's condition list.")),React.createElement("div",{className:"ctw-flex ctw-w-full ctw-space-x-4"},React.createElement("button",{type:"button",onClick:v,className:"ctw-btn-default ctw-flex-1"},"Cancel"),React.createElement("button",{type:"button",disabled:R,onClick:P,className:"ctw-btn-primary ctw-save-button ctw-flex-1"},R?"Removing...":"Remove",R&&React.createElement(Spinner,{className:"ctw-ml-2 ctw-text-white"}))))};try{ModalConfirmDelete.displayName="ModalConfirmDelete",ModalConfirmDelete.__docgenInfo={description:"",displayName:"ModalConfirmDelete",props:{resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Resource"}},resourceName:{defaultValue:null,description:"",name:"resourceName",required:!0,type:{name:"string"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => Promise<void>"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}}}}}catch{}const ConditionHeader=({condition:c})=>{var d;return React.createElement("div",{className:"ctw-py-2"},React.createElement("div",{className:"ctw-text-2xl"},c.display," (",(d=c.preferredCoding)==null?void 0:d.code,")"),React.createElement("div",{className:"ctw-text-sm"},c.ccsGrouping))};try{ConditionHeader.displayName="ConditionHeader",ConditionHeader.__docgenInfo={description:"",displayName:"ConditionHeader",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch{}const onConditionDelete=async(c,d)=>{if(!c.id)throw new Error("Tried to edit a resource that hasn't been created yet.");const g=lodash.exports.cloneDeep(c);if(g.verificationStatus={coding:[{code:"entered-in-error",system:SYSTEM_CONDITION_VERIFICATION_STATUS}]},delete g.clinicalStatus,!(await createOrEditFhirResource(g,d)).id)throw new Error(`Failed to edit resource with id of ${c.id}`);await queryClient.invalidateQueries([QUERY_KEY_PATIENT_CONDITIONS])},CodingList=({codings:c})=>React.createElement("div",{className:"ctw-flex ctw-flex-col ctw-space-y-4"},c.map(d=>React.createElement("div",{key:`${d.id}-${d.code}`},d.display,React.createElement("div",null,d.code),React.createElement("div",null,d.system))));try{CodingList.displayName="CodingList",CodingList.__docgenInfo={description:"",displayName:"CodingList",props:{codings:{defaultValue:null,description:"",name:"codings",required:!0,type:{name:"Coding[]"}}}}}catch{}var lib={exports:{}},core_min={},pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(d,g){module.exports=g()})(globalThis,()=>(()=>{var __webpack_modules__=[,(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.VerbosityLevel=d.Util=d.UnknownErrorException=d.UnexpectedResponseException=d.UNSUPPORTED_FEATURES=d.TextRenderingMode=d.StreamType=d.RenderingIntentFlag=d.PermissionFlag=d.PasswordResponses=d.PasswordException=d.PageActionEventType=d.OPS=d.MissingPDFException=d.LINE_FACTOR=d.LINE_DESCENT_FACTOR=d.InvalidPDFException=d.ImageKind=d.IDENTITY_MATRIX=d.FormatError=d.FontType=d.FeatureTest=d.FONT_IDENTITY_MATRIX=d.DocumentActionEventType=d.CMapCompressionType=d.BaseException=d.BASELINE_FACTOR=d.AnnotationType=d.AnnotationStateModelType=d.AnnotationReviewState=d.AnnotationReplyType=d.AnnotationMode=d.AnnotationMarkedState=d.AnnotationFlag=d.AnnotationFieldFlag=d.AnnotationEditorType=d.AnnotationEditorPrefix=d.AnnotationEditorParamsType=d.AnnotationBorderStyleType=d.AnnotationActionEventType=d.AbortException=void 0,d.arrayByteLength=z,d.arraysToBytes=K,d.assert=Pe,d.bytesToString=Qt,d.createPromiseCapability=A,d.createValidAbsoluteUrl=nt,d.getModificationDate=cr,d.getVerbosityLevel=Lt,d.info=Mt,d.isArrayBuffer=Xt,d.isArrayEqual=ur,d.objectFromMap=ut,d.objectSize=Ae,d.setVerbosityLevel=$t,d.shadow=st,d.string32=ne,d.stringToBytes=Z,d.stringToPDFString=Ze,d.stringToUTF8String=Ot,d.unreachable=Qe,d.utf8StringToString=Ht,d.warn=jt;const g=[1,0,0,1,0,0];d.IDENTITY_MATRIX=g;const v=[.001,0,0,.001,0,0];d.FONT_IDENTITY_MATRIX=v;const b=1.35;d.LINE_FACTOR=b;const _=.35;d.LINE_DESCENT_FACTOR=_;const E=_/b;d.BASELINE_FACTOR=E;const R={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};d.RenderingIntentFlag=R;const M={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};d.AnnotationMode=M;const P="pdfjs_internal_editor_";d.AnnotationEditorPrefix=P;const O={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};d.AnnotationEditorType=O;const H={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};d.AnnotationEditorParamsType=H;const Q={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};d.PermissionFlag=Q;const ee={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};d.TextRenderingMode=ee;const V={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};d.ImageKind=V;const W={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};d.AnnotationType=W;const Y={MARKED:"Marked",REVIEW:"Review"};d.AnnotationStateModelType=Y;const U={MARKED:"Marked",UNMARKED:"Unmarked"};d.AnnotationMarkedState=U;const G={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};d.AnnotationReviewState=G;const te={GROUP:"Group",REPLY:"R"};d.AnnotationReplyType=te;const B={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};d.AnnotationFlag=B;const j={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};d.AnnotationFieldFlag=j;const X={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};d.AnnotationBorderStyleType=X;const oe={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};d.AnnotationActionEventType=oe;const be={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};d.DocumentActionEventType=be;const ae={O:"PageOpen",C:"PageClose"};d.PageActionEventType=ae;const ie={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};d.StreamType=ie;const Se={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};d.FontType=Se;const mt={ERRORS:0,WARNINGS:1,INFOS:5};d.VerbosityLevel=mt;const it={NONE:0,BINARY:1};d.CMapCompressionType=it;const Tt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};d.OPS=Tt;const ht={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};d.UNSUPPORTED_FEATURES=ht;const Ye={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};d.PasswordResponses=Ye;let St=mt.WARNINGS;function $t(re){Number.isInteger(re)&&(St=re)}function Lt(){return St}function Mt(re){St>=mt.INFOS&&console.log(`Info: ${re}`)}function jt(re){St>=mt.WARNINGS&&console.log(`Warning: ${re}`)}function Qe(re){throw new Error(re)}function Pe(re,Ce){re||Qe(Ce)}function Ee(re){if(!re)return!1;switch(re.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function nt(re,Ce=null,ve=null){if(!re)return null;try{if(ve&&typeof re=="string"){if(ve.addDefaultProtocol&&re.startsWith("www.")){const pt=re.match(/\./g);pt&&pt.length>=2&&(re=`http://${re}`)}if(ve.tryConvertEncoding)try{re=Ot(re)}catch{}}const Oe=Ce?new URL(re,Ce):new URL(re);if(Ee(Oe))return Oe}catch{}return null}function st(re,Ce,ve,Oe=!1){return Object.defineProperty(re,Ce,{value:ve,enumerable:!Oe,configurable:!0,writable:!1}),ve}const rt=function(){function Ce(ve,Oe){this.constructor===Ce&&Qe("Cannot initialize BaseException."),this.message=ve,this.name=Oe}return Ce.prototype=new Error,Ce.constructor=Ce,Ce}();d.BaseException=rt;class tt extends rt{constructor(Ce,ve){super(Ce,"PasswordException"),this.code=ve}}d.PasswordException=tt;class vt extends rt{constructor(Ce,ve){super(Ce,"UnknownErrorException"),this.details=ve}}d.UnknownErrorException=vt;class It extends rt{constructor(Ce){super(Ce,"InvalidPDFException")}}d.InvalidPDFException=It;class Vt extends rt{constructor(Ce){super(Ce,"MissingPDFException")}}d.MissingPDFException=Vt;class wt extends rt{constructor(Ce,ve){super(Ce,"UnexpectedResponseException"),this.status=ve}}d.UnexpectedResponseException=wt;class kt extends rt{constructor(Ce){super(Ce,"FormatError")}}d.FormatError=kt;class Zt extends rt{constructor(Ce){super(Ce,"AbortException")}}d.AbortException=Zt;function Qt(re){(typeof re!="object"||re===null||re.length===void 0)&&Qe("Invalid argument for bytesToString");const Ce=re.length,ve=8192;if(Ce<ve)return String.fromCharCode.apply(null,re);const Oe=[];for(let pt=0;pt<Ce;pt+=ve){const Kt=Math.min(pt+ve,Ce),rr=re.subarray(pt,Kt);Oe.push(String.fromCharCode.apply(null,rr))}return Oe.join("")}function Z(re){typeof re!="string"&&Qe("Invalid argument for stringToBytes");const Ce=re.length,ve=new Uint8Array(Ce);for(let Oe=0;Oe<Ce;++Oe)ve[Oe]=re.charCodeAt(Oe)&255;return ve}function z(re){if(re.length!==void 0)return re.length;if(re.byteLength!==void 0)return re.byteLength;Qe("Invalid argument for arrayByteLength")}function K(re){const Ce=re.length;if(Ce===1&&re[0]instanceof Uint8Array)return re[0];let ve=0;for(let Kt=0;Kt<Ce;Kt++)ve+=z(re[Kt]);let Oe=0;const pt=new Uint8Array(ve);for(let Kt=0;Kt<Ce;Kt++){let rr=re[Kt];rr instanceof Uint8Array||(typeof rr=="string"?rr=Z(rr):rr=new Uint8Array(rr));const dr=rr.byteLength;pt.set(rr,Oe),Oe+=dr}return pt}function ne(re){return String.fromCharCode(re>>24&255,re>>16&255,re>>8&255,re&255)}function Ae(re){return Object.keys(re).length}function ut(re){const Ce=Object.create(null);for(const[ve,Oe]of re)Ce[ve]=Oe;return Ce}function Rt(){const re=new Uint8Array(4);return re[0]=1,new Uint32Array(re.buffer,0,1)[0]===1}function yt(){try{return new Function(""),!0}catch{return!1}}class lt{static get isLittleEndian(){return st(this,"isLittleEndian",Rt())}static get isEvalSupported(){return st(this,"isEvalSupported",yt())}static get isOffscreenCanvasSupported(){return st(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}d.FeatureTest=lt;const at=[...Array(256).keys()].map(re=>re.toString(16).padStart(2,"0"));class ze{static makeHexColor(Ce,ve,Oe){return`#${at[Ce]}${at[ve]}${at[Oe]}`}static scaleMinMax(Ce,ve){let Oe;Ce[0]?(Ce[0]<0&&(Oe=ve[0],ve[0]=ve[1],ve[1]=Oe),ve[0]*=Ce[0],ve[1]*=Ce[0],Ce[3]<0&&(Oe=ve[2],ve[2]=ve[3],ve[3]=Oe),ve[2]*=Ce[3],ve[3]*=Ce[3]):(Oe=ve[0],ve[0]=ve[2],ve[2]=Oe,Oe=ve[1],ve[1]=ve[3],ve[3]=Oe,Ce[1]<0&&(Oe=ve[2],ve[2]=ve[3],ve[3]=Oe),ve[2]*=Ce[1],ve[3]*=Ce[1],Ce[2]<0&&(Oe=ve[0],ve[0]=ve[1],ve[1]=Oe),ve[0]*=Ce[2],ve[1]*=Ce[2]),ve[0]+=Ce[4],ve[1]+=Ce[4],ve[2]+=Ce[5],ve[3]+=Ce[5]}static transform(Ce,ve){return[Ce[0]*ve[0]+Ce[2]*ve[1],Ce[1]*ve[0]+Ce[3]*ve[1],Ce[0]*ve[2]+Ce[2]*ve[3],Ce[1]*ve[2]+Ce[3]*ve[3],Ce[0]*ve[4]+Ce[2]*ve[5]+Ce[4],Ce[1]*ve[4]+Ce[3]*ve[5]+Ce[5]]}static applyTransform(Ce,ve){const Oe=Ce[0]*ve[0]+Ce[1]*ve[2]+ve[4],pt=Ce[0]*ve[1]+Ce[1]*ve[3]+ve[5];return[Oe,pt]}static applyInverseTransform(Ce,ve){const Oe=ve[0]*ve[3]-ve[1]*ve[2],pt=(Ce[0]*ve[3]-Ce[1]*ve[2]+ve[2]*ve[5]-ve[4]*ve[3])/Oe,Kt=(-Ce[0]*ve[1]+Ce[1]*ve[0]+ve[4]*ve[1]-ve[5]*ve[0])/Oe;return[pt,Kt]}static getAxialAlignedBoundingBox(Ce,ve){const Oe=ze.applyTransform(Ce,ve),pt=ze.applyTransform(Ce.slice(2,4),ve),Kt=ze.applyTransform([Ce[0],Ce[3]],ve),rr=ze.applyTransform([Ce[2],Ce[1]],ve);return[Math.min(Oe[0],pt[0],Kt[0],rr[0]),Math.min(Oe[1],pt[1],Kt[1],rr[1]),Math.max(Oe[0],pt[0],Kt[0],rr[0]),Math.max(Oe[1],pt[1],Kt[1],rr[1])]}static inverseTransform(Ce){const ve=Ce[0]*Ce[3]-Ce[1]*Ce[2];return[Ce[3]/ve,-Ce[1]/ve,-Ce[2]/ve,Ce[0]/ve,(Ce[2]*Ce[5]-Ce[4]*Ce[3])/ve,(Ce[4]*Ce[1]-Ce[5]*Ce[0])/ve]}static singularValueDecompose2dScale(Ce){const ve=[Ce[0],Ce[2],Ce[1],Ce[3]],Oe=Ce[0]*ve[0]+Ce[1]*ve[2],pt=Ce[0]*ve[1]+Ce[1]*ve[3],Kt=Ce[2]*ve[0]+Ce[3]*ve[2],rr=Ce[2]*ve[1]+Ce[3]*ve[3],dr=(Oe+rr)/2,Gt=Math.sqrt((Oe+rr)**2-4*(Oe*rr-Kt*pt))/2,or=dr+Gt||1,yr=dr-Gt||1;return[Math.sqrt(or),Math.sqrt(yr)]}static normalizeRect(Ce){const ve=Ce.slice(0);return Ce[0]>Ce[2]&&(ve[0]=Ce[2],ve[2]=Ce[0]),Ce[1]>Ce[3]&&(ve[1]=Ce[3],ve[3]=Ce[1]),ve}static intersect(Ce,ve){const Oe=Math.max(Math.min(Ce[0],Ce[2]),Math.min(ve[0],ve[2])),pt=Math.min(Math.max(Ce[0],Ce[2]),Math.max(ve[0],ve[2]));if(Oe>pt)return null;const Kt=Math.max(Math.min(Ce[1],Ce[3]),Math.min(ve[1],ve[3])),rr=Math.min(Math.max(Ce[1],Ce[3]),Math.max(ve[1],ve[3]));return Kt>rr?null:[Oe,Kt,pt,rr]}static bezierBoundingBox(Ce,ve,Oe,pt,Kt,rr,dr,Gt){const or=[],yr=[[],[]];let mr,Nr,Ar,br,qr,en,Wr,rn;for(let Vr=0;Vr<2;++Vr){if(Vr===0?(Nr=6*Ce-12*Oe+6*Kt,mr=-3*Ce+9*Oe-9*Kt+3*dr,Ar=3*Oe-3*Ce):(Nr=6*ve-12*pt+6*rr,mr=-3*ve+9*pt-9*rr+3*Gt,Ar=3*pt-3*ve),Math.abs(mr)<1e-12){if(Math.abs(Nr)<1e-12)continue;br=-Ar/Nr,0<br&&br<1&&or.push(br);continue}Wr=Nr*Nr-4*Ar*mr,rn=Math.sqrt(Wr),!(Wr<0)&&(qr=(-Nr+rn)/(2*mr),0<qr&&qr<1&&or.push(qr),en=(-Nr-rn)/(2*mr),0<en&&en<1&&or.push(en))}let Xr=or.length,ir;const Rr=Xr;for(;Xr--;)br=or[Xr],ir=1-br,yr[0][Xr]=ir*ir*ir*Ce+3*ir*ir*br*Oe+3*ir*br*br*Kt+br*br*br*dr,yr[1][Xr]=ir*ir*ir*ve+3*ir*ir*br*pt+3*ir*br*br*rr+br*br*br*Gt;return yr[0][Rr]=Ce,yr[1][Rr]=ve,yr[0][Rr+1]=dr,yr[1][Rr+1]=Gt,yr[0].length=yr[1].length=Rr+2,[Math.min(...yr[0]),Math.min(...yr[1]),Math.max(...yr[0]),Math.max(...yr[1])]}}d.Util=ze;const ct=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ze(re){if(re[0]>="\xEF"){let ve;if(re[0]==="\xFE"&&re[1]==="\xFF"?ve="utf-16be":re[0]==="\xFF"&&re[1]==="\xFE"?ve="utf-16le":re[0]==="\xEF"&&re[1]==="\xBB"&&re[2]==="\xBF"&&(ve="utf-8"),ve)try{const Oe=new TextDecoder(ve,{fatal:!0}),pt=Z(re);return Oe.decode(pt)}catch(Oe){jt(`stringToPDFString: "${Oe}".`)}}const Ce=[];for(let ve=0,Oe=re.length;ve<Oe;ve++){const pt=ct[re.charCodeAt(ve)];Ce.push(pt?String.fromCharCode(pt):re.charAt(ve))}return Ce.join("")}function Ot(re){return decodeURIComponent(escape(re))}function Ht(re){return unescape(encodeURIComponent(re))}function Xt(re){return typeof re=="object"&&re!==null&&re.byteLength!==void 0}function ur(re,Ce){if(re.length!==Ce.length)return!1;for(let ve=0,Oe=re.length;ve<Oe;ve++)if(re[ve]!==Ce[ve])return!1;return!0}function cr(re=new Date){return[re.getUTCFullYear().toString(),(re.getUTCMonth()+1).toString().padStart(2,"0"),re.getUTCDate().toString().padStart(2,"0"),re.getUTCHours().toString().padStart(2,"0"),re.getUTCMinutes().toString().padStart(2,"0"),re.getUTCSeconds().toString().padStart(2,"0")].join("")}function A(){const re=Object.create(null);let Ce=!1;return Object.defineProperty(re,"settled",{get(){return Ce}}),re.promise=new Promise(function(ve,Oe){re.resolve=function(pt){Ce=!0,ve(pt)},re.reject=function(pt){Ce=!0,Oe(pt)}}),re}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var c,g,v,b,_,E,R,M,P,O,H,pa,ee,V;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(12),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:Y,NodeCMapReaderFactory:U,NodeStandardFontDataFactory:G}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=Y,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=U,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=G}let createPDFNetworkStream;function setPDFNetworkStreamFactory(Y){createPDFNetworkStream=Y}function getDocument(Y){const U=new PDFDocumentLoadingTask;let G;if(typeof Y=="string"||Y instanceof URL)G={url:Y};else if((0,_util.isArrayBuffer)(Y))G={data:Y};else if(Y instanceof PDFDataRangeTransport)G={range:Y};else{if(typeof Y!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!Y.url&&!Y.data&&!Y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");G=Y}const te=Object.create(null);let B=null,j=null;for(const oe in G){const be=G[oe];switch(oe){case"url":if(typeof window<"u")try{te[oe]=new URL(be,window.location).href;continue}catch(ae){(0,_util.warn)(`Cannot create valid URL: "${ae}".`)}else if(typeof be=="string"||be instanceof URL){te[oe]=be.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":B=be;continue;case"worker":j=be;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&be instanceof Buffer)te[oe]=new Uint8Array(be);else{if(be instanceof Uint8Array)break;if(typeof be=="string")te[oe]=(0,_util.stringToBytes)(be);else if(typeof be=="object"&&be!==null&&!isNaN(be.length))te[oe]=new Uint8Array(be);else if((0,_util.isArrayBuffer)(be))te[oe]=new Uint8Array(be);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}te[oe]=be}if(te.CMapReaderFactory=te.CMapReaderFactory||DefaultCMapReaderFactory,te.StandardFontDataFactory=te.StandardFontDataFactory||DefaultStandardFontDataFactory,te.ignoreErrors=te.stopAtErrors!==!0,te.fontExtraProperties=te.fontExtraProperties===!0,te.pdfBug=te.pdfBug===!0,te.enableXfa=te.enableXfa===!0,(!Number.isInteger(te.rangeChunkSize)||te.rangeChunkSize<1)&&(te.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof te.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(te.docBaseUrl))&&(te.docBaseUrl=null),(!Number.isInteger(te.maxImageSize)||te.maxImageSize<-1)&&(te.maxImageSize=-1),typeof te.cMapUrl!="string"&&(te.cMapUrl=null),typeof te.standardFontDataUrl!="string"&&(te.standardFontDataUrl=null),typeof te.useWorkerFetch!="boolean"&&(te.useWorkerFetch=te.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&te.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof te.isEvalSupported!="boolean"&&(te.isEvalSupported=!0),typeof te.isOffscreenCanvasSupported!="boolean"&&(te.isOffscreenCanvasSupported=!_is_node.isNodeJS),typeof te.disableFontFace!="boolean"&&(te.disableFontFace=_is_node.isNodeJS),typeof te.useSystemFonts!="boolean"&&(te.useSystemFonts=!_is_node.isNodeJS&&!te.disableFontFace),(typeof te.ownerDocument!="object"||te.ownerDocument===null)&&(te.ownerDocument=globalThis.document),typeof te.disableRange!="boolean"&&(te.disableRange=!1),typeof te.disableStream!="boolean"&&(te.disableStream=!1),typeof te.disableAutoFetch!="boolean"&&(te.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(te.verbosity),!j){const oe={verbosity:te.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};j=oe.port?PDFWorker.fromPort(oe):new PDFWorker(oe),U._worker=j}const X=U.docId;return j.promise.then(function(){if(U.destroyed)throw new Error("Loading aborted");const oe=_fetchDocument(j,te,B,X),be=new Promise(function(ae){let ie;B?ie=new _transport_stream.PDFDataTransportStream({length:te.length,initialData:te.initialData,progressiveDone:te.progressiveDone,contentDispositionFilename:te.contentDispositionFilename,disableRange:te.disableRange,disableStream:te.disableStream},B):te.data||(ie=createPDFNetworkStream({url:te.url,length:te.length,httpHeaders:te.httpHeaders,withCredentials:te.withCredentials,rangeChunkSize:te.rangeChunkSize,disableRange:te.disableRange,disableStream:te.disableStream})),ae(ie)});return Promise.all([oe,be]).then(function([ae,ie]){if(U.destroyed)throw new Error("Loading aborted");const Se=new _message_handler.MessageHandler(X,ae,j.port),mt=new WorkerTransport(Se,U,ie,te);U._transport=mt,Se.send("Ready",null)})}).catch(U._capability.reject),U}async function _fetchDocument(Y,U,G,te){if(Y.destroyed)throw new Error("Worker was destroyed");G&&(U.length=G.length,U.initialData=G.initialData,U.progressiveDone=G.progressiveDone,U.contentDispositionFilename=G.contentDispositionFilename);const B=await Y.messageHandler.sendWithPromise("GetDocRequest",{docId:te,apiVersion:"3.1.81",data:U.data,password:U.password,disableAutoFetch:U.disableAutoFetch,rangeChunkSize:U.rangeChunkSize,length:U.length,docBaseUrl:U.docBaseUrl,enableXfa:U.enableXfa,evaluatorOptions:{maxImageSize:U.maxImageSize,disableFontFace:U.disableFontFace,ignoreErrors:U.ignoreErrors,isEvalSupported:U.isEvalSupported,isOffscreenCanvasSupported:U.isOffscreenCanvasSupported,fontExtraProperties:U.fontExtraProperties,useSystemFonts:U.useSystemFonts,cMapUrl:U.useWorkerFetch?U.cMapUrl:null,standardFontDataUrl:U.useWorkerFetch?U.standardFontDataUrl:null}});if(U.data&&(U.data=null),Y.destroyed)throw new Error("Worker was destroyed");return B}const d=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${fa(d,c)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var U;this.destroyed=!0,await((U=this._transport)==null?void 0:U.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=d;c=new WeakMap,er(PDFDocumentLoadingTask,c,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(U,G,te=!1,B=null){this.length=U,this.initialData=G,this.progressiveDone=te,this.contentDispositionFilename=B,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(U){this._rangeListeners.push(U)}addProgressListener(U){this._progressListeners.push(U)}addProgressiveReadListener(U){this._progressiveReadListeners.push(U)}addProgressiveDoneListener(U){this._progressiveDoneListeners.push(U)}onDataRange(U,G){for(const te of this._rangeListeners)te(U,G)}onDataProgress(U,G){this._readyCapability.promise.then(()=>{for(const te of this._progressListeners)te(U,G)})}onDataProgressiveRead(U){this._readyCapability.promise.then(()=>{for(const G of this._progressiveReadListeners)G(U)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const U of this._progressiveDoneListeners)U()})}transportReady(){this._readyCapability.resolve()}requestDataRange(U,G){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(U,G){this._pdfInfo=U,this._transport=G}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(U){return this._transport.getPage(U)}getPageIndex(U){return this._transport.getPageIndex(U)}getDestinations(){return this._transport.getDestinations()}getDestination(U){return this._transport.getDestination(U)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(U=!1){return this._transport.startCleanup(U||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(U,G,te,B,j=!1){this._pageIndex=U,this._pageInfo=G,this._ownerDocument=B,this._transport=te,this._stats=j?new _display_utils.StatTimer:null,this._pdfBug=j,this.commonObjs=te.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:U,rotation:G=this.rotate,offsetX:te=0,offsetY:B=0,dontFlip:j=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:U,rotation:G,offsetX:te,offsetY:B,dontFlip:j})}getAnnotations({intent:U="display"}={}){const G=this._transport.getRenderingIntent(U);let te=this._annotationPromises.get(G.cacheKey);return te||(te=this._transport.getAnnotations(this._pageIndex,G.renderingIntent),this._annotationPromises.set(G.cacheKey,te)),te}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var U;return((U=this._transport._htmlForXfa)==null?void 0:U.children[this._pageIndex])||null}render({canvasContext:U,viewport:G,intent:te="display",annotationMode:B=_util.AnnotationMode.ENABLE,transform:j=null,canvasFactory:X=null,background:oe=null,optionalContentConfigPromise:be=null,annotationCanvasMap:ae=null,pageColors:ie=null,printAnnotationStorage:Se=null}){var Lt,Mt;(Lt=this._stats)==null||Lt.time("Overall");const mt=this._transport.getRenderingIntent(te,B,Se);this.pendingCleanup=!1,be||(be=this._transport.getOptionalContentConfig());let it=this._intentStates.get(mt.cacheKey);it||(it=Object.create(null),this._intentStates.set(mt.cacheKey,it)),it.streamReaderCancelTimeout&&(clearTimeout(it.streamReaderCancelTimeout),it.streamReaderCancelTimeout=null);const Tt=X||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),ht=!!(mt.renderingIntent&_util.RenderingIntentFlag.PRINT);it.displayReadyCapability||(it.displayReadyCapability=(0,_util.createPromiseCapability)(),it.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Mt=this._stats)==null||Mt.time("Page Request"),this._pumpOperatorList(mt));const Ye=jt=>{var Qe,Pe;it.renderTasks.delete(St),(this.cleanupAfterRender||ht)&&(this.pendingCleanup=!0),this._tryCleanup(),jt?(St.capability.reject(jt),this._abortOperatorList({intentState:it,reason:jt instanceof Error?jt:new Error(jt)})):St.capability.resolve(),(Qe=this._stats)==null||Qe.timeEnd("Rendering"),(Pe=this._stats)==null||Pe.timeEnd("Overall")},St=new InternalRenderTask({callback:Ye,params:{canvasContext:U,viewport:G,transform:j,background:oe},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ae,operatorList:it.operatorList,pageIndex:this._pageIndex,canvasFactory:Tt,useRequestAnimationFrame:!ht,pdfBug:this._pdfBug,pageColors:ie});(it.renderTasks||(it.renderTasks=new Set)).add(St);const $t=St.task;return Promise.all([it.displayReadyCapability.promise,be]).then(([jt,Qe])=>{var Pe;if(this.pendingCleanup){Ye();return}(Pe=this._stats)==null||Pe.time("Rendering"),St.initializeGraphics({transparency:jt,optionalContentConfig:Qe}),St.operatorListChanged()}).catch(Ye),$t}getOperatorList({intent:U="display",annotationMode:G=_util.AnnotationMode.ENABLE,printAnnotationStorage:te=null}={}){var be;function B(){X.operatorList.lastChunk&&(X.opListReadCapability.resolve(X.operatorList),X.renderTasks.delete(oe))}const j=this._transport.getRenderingIntent(U,G,te,!0);let X=this._intentStates.get(j.cacheKey);X||(X=Object.create(null),this._intentStates.set(j.cacheKey,X));let oe;return X.opListReadCapability||(oe=Object.create(null),oe.operatorListChanged=B,X.opListReadCapability=(0,_util.createPromiseCapability)(),(X.renderTasks||(X.renderTasks=new Set)).add(oe),X.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(be=this._stats)==null||be.time("Page Request"),this._pumpOperatorList(j)),X.opListReadCapability.promise}streamTextContent({disableCombineTextItems:U=!1,includeMarkedContent:G=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:U!==!0,includeMarkedContent:G===!0},{highWaterMark:100,size(B){return B.items.length}})}getTextContent(U={}){if(this._transport._htmlForXfa)return this.getXfa().then(te=>_xfa_text.XfaText.textContent(te));const G=this.streamTextContent(U);return new Promise(function(te,B){function j(){X.read().then(function({value:be,done:ae}){if(ae){te(oe);return}Object.assign(oe.styles,be.styles),oe.items.push(...be.items),j()},B)}const X=G.getReader(),oe={items:[],styles:Object.create(null)};j()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const U=[];for(const G of this._intentStates.values())if(this._abortOperatorList({intentState:G,reason:new Error("Page was destroyed."),force:!0}),!G.opListReadCapability)for(const te of G.renderTasks)U.push(te.completed),te.cancel();this.objs.clear();for(const G of this._bitmaps)G.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(U)}cleanup(U=!1){return this.pendingCleanup=!0,this._tryCleanup(U)}_tryCleanup(U=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:G,operatorList:te}of this._intentStates.values())if(G.size>0||!te.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,U&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const G of this._bitmaps)G.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(U,G){var B,j;const te=this._intentStates.get(G);!te||((B=this._stats)==null||B.timeEnd("Page Request"),(j=te.displayReadyCapability)==null||j.resolve(U))}_renderPageChunk(U,G){for(let te=0,B=U.length;te<B;te++)G.operatorList.fnArray.push(U.fnArray[te]),G.operatorList.argsArray.push(U.argsArray[te]);G.operatorList.lastChunk=U.lastChunk,G.operatorList.separateAnnots=U.separateAnnots;for(const te of G.renderTasks)te.operatorListChanged();U.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:U,cacheKey:G,annotationStorageMap:te}){const j=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:U,cacheKey:G,annotationStorage:te}).getReader(),X=this._intentStates.get(G);X.streamReader=j;const oe=()=>{j.read().then(({value:be,done:ae})=>{if(ae){X.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(be,X),oe())},be=>{if(X.streamReader=null,!this._transport.destroyed){if(X.operatorList){X.operatorList.lastChunk=!0;for(const ae of X.renderTasks)ae.operatorListChanged();this._tryCleanup()}if(X.displayReadyCapability)X.displayReadyCapability.reject(be);else if(X.opListReadCapability)X.opListReadCapability.reject(be);else throw be}})};oe()}_abortOperatorList({intentState:U,reason:G,force:te=!1}){if(!!U.streamReader){if(!te){if(U.renderTasks.size>0)return;if(G instanceof _display_utils.RenderingCancelledException){U.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:U,reason:G,force:!0}),U.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(U.streamReader.cancel(new _util.AbortException(G.message)).catch(()=>{}),U.streamReader=null,!this._transport.destroyed){for(const[B,j]of this._intentStates)if(j===U){this._intentStates.delete(B);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){er(this,g,[]);er(this,v,Promise.resolve())}postMessage(U,G){const te={data:structuredClone(U,G)};dt(this,v).then(()=>{for(const B of dt(this,g))B.call(this,te)})}addEventListener(U,G){dt(this,g).push(G)}removeEventListener(U,G){const te=dt(this,g).indexOf(G);dt(this,g).splice(te,1)}terminate(){dt(this,g).length=0}}g=new WeakMap,v=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Y=(b=document==null?void 0:document.currentScript)==null?void 0:b.src;Y&&(PDFWorkerUtil.fallbackWorkerSrc=Y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Y,U){let G;try{if(G=new URL(Y),!G.origin||G.origin==="null")return!1}catch{return!1}const te=new URL(U,G);return G.origin===te.origin},PDFWorkerUtil.createCDNWrapper=function(Y){const U=`importScripts("${Y}");`;return URL.createObjectURL(new Blob([U]))}}const _PDFWorker=class{constructor({name:Y=null,port:U=null,verbosity:G=(0,_util.getVerbosityLevel)()}={}){if(U&&dt(_PDFWorker,_).has(U))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=Y,this.destroyed=!1,this.verbosity=G,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,U){dt(_PDFWorker,_).set(U,this),this._initializeFromPort(U);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Y){this._port=Y,this._messageHandler=new _message_handler.MessageHandler("main","worker",Y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Y}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Y)||(Y=PDFWorkerUtil.createCDNWrapper(new URL(Y,window.location).href));const U=new Worker(Y),G=new _message_handler.MessageHandler("main","worker",U),te=()=>{U.removeEventListener("error",B),G.destroy(),U.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},B=()=>{this._webWorker||te()};U.addEventListener("error",B),G.on("test",X=>{if(U.removeEventListener("error",B),this.destroyed){te();return}X?(this._messageHandler=G,this._port=U,this._webWorker=U,this._readyCapability.resolve(),G.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),G.destroy(),U.terminate())}),G.on("ready",X=>{if(U.removeEventListener("error",B),this.destroyed){te();return}try{j()}catch{this._setupFakeWorker()}});const j=()=>{const X=new Uint8Array;G.send("test",X,[X.buffer])};j();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const U=new LoopbackPort;this._port=U;const G=`fake${PDFWorkerUtil.fakeWorkerId++}`,te=new _message_handler.MessageHandler(G+"_worker",G,U);Y.setup(te,U);const B=new _message_handler.MessageHandler(G,G+"_worker",U);this._messageHandler=B,this._readyCapability.resolve(),B.send("configure",{verbosity:this.verbosity})}).catch(Y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Y.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),dt(_PDFWorker,_).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Y){if(!(Y!=null&&Y.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return dt(this,_).has(Y.port)?dt(this,_).get(Y.port):new _PDFWorker(Y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Y;try{return((Y=globalThis.pdfjsWorker)==null?void 0:Y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;_=new WeakMap,er(PDFWorker,_,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(U,G,te,B){er(this,E,null);er(this,R,new Map);er(this,M,new Map);er(this,P,null);this.messageHandler=U,this.loadingTask=G,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:B.ownerDocument,styleElement:B.styleElement}),this._params=B,B.useWorkerFetch||(this.CMapReaderFactory=new B.CMapReaderFactory({baseUrl:B.cMapUrl,isCompressed:B.cMapPacked}),this.StandardFontDataFactory=new B.StandardFontDataFactory({baseUrl:B.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=te,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return dt(this,E)}getRenderingIntent(U,G=_util.AnnotationMode.ENABLE,te=null,B=!1){let j=_util.RenderingIntentFlag.DISPLAY,X=null;switch(U){case"any":j=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":j=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${U}`)}switch(G){case _util.AnnotationMode.DISABLE:j+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:j+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:j+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,X=(j&_util.RenderingIntentFlag.PRINT&&te instanceof _annotation_storage.PrintAnnotationStorage?te:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${G}`)}return B&&(j+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:j,cacheKey:`${j}_${_annotation_storage.AnnotationStorage.getHash(X)}`,annotationStorageMap:X}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const U=[];for(const te of dt(this,R).values())U.push(te._destroy());dt(this,R).clear(),dt(this,M).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const G=this.messageHandler.sendWithPromise("Terminate",null);return U.push(G),Promise.all(U).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),hr(this,P,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:U,loadingTask:G}=this;U.on("GetReader",(te,B)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=j=>{this._lastProgress={loaded:j.loaded,total:j.total}},B.onPull=()=>{this._fullReader.read().then(function({value:j,done:X}){if(X){B.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(j),"GetReader - expected an ArrayBuffer."),B.enqueue(new Uint8Array(j),1,[j])}).catch(j=>{B.error(j)})},B.onCancel=j=>{this._fullReader.cancel(j),B.ready.catch(X=>{if(!this.destroyed)throw X})}}),U.on("ReaderHeadersReady",te=>{const B=(0,_util.createPromiseCapability)(),j=this._fullReader;return j.headersReady.then(()=>{var X;(!j.isStreamingSupported||!j.isRangeSupported)&&(this._lastProgress&&((X=G.onProgress)==null||X.call(G,this._lastProgress)),j.onProgress=oe=>{var be;(be=G.onProgress)==null||be.call(G,{loaded:oe.loaded,total:oe.total})}),B.resolve({isStreamingSupported:j.isStreamingSupported,isRangeSupported:j.isRangeSupported,contentLength:j.contentLength})},B.reject),B.promise}),U.on("GetRangeReader",(te,B)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const j=this._networkStream.getRangeReader(te.begin,te.end);if(!j){B.close();return}B.onPull=()=>{j.read().then(function({value:X,done:oe}){if(oe){B.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(X),"GetRangeReader - expected an ArrayBuffer."),B.enqueue(new Uint8Array(X),1,[X])}).catch(X=>{B.error(X)})},B.onCancel=X=>{j.cancel(X),B.ready.catch(oe=>{if(!this.destroyed)throw oe})}}),U.on("GetDoc",({pdfInfo:te})=>{this._numPages=te.numPages,this._htmlForXfa=te.htmlForXfa,delete te.htmlForXfa,G._capability.resolve(new PDFDocumentProxy(te,this))}),U.on("DocException",function(te){let B;switch(te.name){case"PasswordException":B=new _util.PasswordException(te.message,te.code);break;case"InvalidPDFException":B=new _util.InvalidPDFException(te.message);break;case"MissingPDFException":B=new _util.MissingPDFException(te.message);break;case"UnexpectedResponseException":B=new _util.UnexpectedResponseException(te.message,te.status);break;case"UnknownErrorException":B=new _util.UnknownErrorException(te.message,te.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}G._capability.reject(B)}),U.on("PasswordRequest",te=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),G.onPassword){const B=j=>{j instanceof Error?this._passwordCapability.reject(j):this._passwordCapability.resolve({password:j})};try{G.onPassword(B,te.code)}catch(j){this._passwordCapability.reject(j)}}else this._passwordCapability.reject(new _util.PasswordException(te.message,te.code));return this._passwordCapability.promise}),U.on("DataLoaded",te=>{var B;(B=G.onProgress)==null||B.call(G,{loaded:te.length,total:te.length}),this.downloadInfoCapability.resolve(te)}),U.on("StartRenderPage",te=>{if(this.destroyed)return;dt(this,R).get(te.pageIndex)._startRenderPage(te.transparency,te.cacheKey)}),U.on("commonobj",([te,B,j])=>{var X;if(!this.destroyed&&!this.commonObjs.has(te))switch(B){case"Font":const oe=this._params;if("error"in j){const ie=j.error;(0,_util.warn)(`Error during font loading: ${ie}`),this.commonObjs.resolve(te,ie);break}let be=null;oe.pdfBug&&((X=globalThis.FontInspector)==null?void 0:X.enabled)&&(be={registerFont(ie,Se){globalThis.FontInspector.fontAdded(ie,Se)}});const ae=new _font_loader.FontFaceObject(j,{isEvalSupported:oe.isEvalSupported,disableFontFace:oe.disableFontFace,ignoreErrors:oe.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:be});this.fontLoader.bind(ae).catch(ie=>U.sendWithPromise("FontFallback",{id:te})).finally(()=>{!oe.fontExtraProperties&&ae.data&&(ae.data=null),this.commonObjs.resolve(te,ae)});break;case"FontPath":case"Image":this.commonObjs.resolve(te,j);break;default:throw new Error(`Got unknown common object type ${B}`)}}),U.on("obj",([te,B,j,X])=>{var be;if(this.destroyed)return;const oe=dt(this,R).get(B);if(!oe.objs.has(te))switch(j){case"Image":oe.objs.resolve(te,X);const ae=8e6;if(X){let ie;if(X.bitmap){const{bitmap:Se,width:mt,height:it}=X;ie=mt*it*4,oe._bitmaps.add(Se)}else ie=((be=X.data)==null?void 0:be.length)||0;ie>ae&&(oe.cleanupAfterRender=!0)}break;case"Pattern":oe.objs.resolve(te,X);break;default:throw new Error(`Got unknown object type ${j}`)}}),U.on("DocProgress",te=>{var B;this.destroyed||(B=G.onProgress)==null||B.call(G,{loaded:te.loaded,total:te.total})}),U.on("DocStats",te=>{this.destroyed||hr(this,E,Object.freeze({streamTypes:Object.freeze(te.streamTypes),fontTypes:Object.freeze(te.fontTypes)}))}),U.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),U.on("FetchBuiltInCMap",te=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(te):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),U.on("FetchStandardFontData",te=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(te):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:U}){var G,te;this.destroyed||(te=(G=this.loadingTask).onUnsupportedFeature)==null||te.call(G,U)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var U,G;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(G=(U=this._fullReader)==null?void 0:U.filename)!=null?G:null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(U){if(!Number.isInteger(U)||U<=0||U>this._numPages)return Promise.reject(new Error("Invalid page request."));const G=U-1,te=dt(this,M).get(G);if(te)return te;const B=this.messageHandler.sendWithPromise("GetPage",{pageIndex:G}).then(j=>{if(this.destroyed)throw new Error("Transport destroyed");const X=new PDFPageProxy(G,j,this,this._params.ownerDocument,this._params.pdfBug);return dt(this,R).set(G,X),X});return dt(this,M).set(G,B),B}getPageIndex(U){return typeof U!="object"||U===null||!Number.isInteger(U.num)||U.num<0||!Number.isInteger(U.gen)||U.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:U.num,gen:U.gen})}getAnnotations(U,G){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:U,intent:G})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(U){return typeof U!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:U})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(U){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:U})}getStructTree(U){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:U})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(U=>new _optional_content_config.OptionalContentConfig(U))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return dt(this,P)||hr(this,P,this.messageHandler.sendWithPromise("GetMetadata",null).then(U=>{var G,te,B,j;return{info:U[0],metadata:U[1]?new _metadata.Metadata(U[1]):null,contentDispositionFilename:(te=(G=this._fullReader)==null?void 0:G.filename)!=null?te:null,contentLength:(j=(B=this._fullReader)==null?void 0:B.contentLength)!=null?j:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(U=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const G of dt(this,R).values())if(!G.cleanup())throw new Error(`startCleanup: Page ${G.pageNumber} is currently rendering.`);this.commonObjs.clear(),U||this.fontLoader.clear(),hr(this,P,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const U=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:U.disableAutoFetch,enableXfa:U.enableXfa})}}E=new WeakMap,R=new WeakMap,M=new WeakMap,P=new WeakMap;class PDFObjects{constructor(){er(this,H);er(this,O,Object.create(null))}get(U,G=null){if(G){const B=ar(this,H,pa).call(this,U);return B.capability.promise.then(()=>G(B.data)),null}const te=dt(this,O)[U];if(!(te!=null&&te.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${U}.`);return te.data}has(U){const G=dt(this,O)[U];return(G==null?void 0:G.capability.settled)||!1}resolve(U,G=null){const te=ar(this,H,pa).call(this,U);te.data=G,te.capability.resolve()}clear(){hr(this,O,Object.create(null))}}O=new WeakMap,H=new WeakSet,pa=function(U){const G=dt(this,O)[U];return G||(dt(this,O)[U]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(U){er(this,ee,null);hr(this,ee,U),this.onContinue=null}get promise(){return dt(this,ee).capability.promise}cancel(){dt(this,ee).cancel()}get separateAnnots(){const{separateAnnots:U}=dt(this,ee).operatorList;if(!U)return!1;const{annotationCanvasMap:G}=dt(this,ee);return U.form||U.canvas&&(G==null?void 0:G.size)>0}}ee=new WeakMap,exports.RenderTask=RenderTask;const W=class{constructor({callback:U,params:G,objs:te,commonObjs:B,annotationCanvasMap:j,operatorList:X,pageIndex:oe,canvasFactory:be,useRequestAnimationFrame:ae=!1,pdfBug:ie=!1,pageColors:Se=null}){this.callback=U,this.params=G,this.objs=te,this.commonObjs=B,this.annotationCanvasMap=j,this.operatorListIdx=null,this.operatorList=X,this._pageIndex=oe,this.canvasFactory=be,this._pdfBug=ie,this.pageColors=Se,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ae===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=G.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:U=!1,optionalContentConfig:G}){var oe,be;if(this.cancelled)return;if(this._canvas){if(dt(W,V).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");dt(W,V).add(this._canvas)}this._pdfBug&&((oe=globalThis.StepperManager)==null?void 0:oe.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:te,viewport:B,transform:j,background:X}=this.params;this.gfx=new _canvas.CanvasGraphics(te,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:G},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:j,viewport:B,transparency:U,background:X}),this.operatorListIdx=0,this.graphicsReady=!0,(be=this.graphicsReadyCallback)==null||be.call(this)}cancel(U=null){var G;this.running=!1,this.cancelled=!0,(G=this.gfx)==null||G.endDrawing(),this._canvas&&dt(W,V).delete(this._canvas),this.callback(U||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){var U;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(U=this.stepper)==null||U.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&dt(W,V).delete(this._canvas),this.callback())))}};let InternalRenderTask=W;V=new WeakMap,er(InternalRenderTask,V,new WeakSet);const version="3.1.81";exports.version=version;const build="0766898d5";exports.build=build},(c,d,g)=>{var M,P,O,La,Q;Object.defineProperty(d,"__esModule",{value:!0}),d.PrintAnnotationStorage=d.AnnotationStorage=void 0;var v=g(1),b=g(4),_=g(8);class E{constructor(){er(this,O);er(this,M,!1);er(this,P,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(V,W){const Y=dt(this,P).get(V);return Y===void 0?W:Object.assign(W,Y)}getRawValue(V){return dt(this,P).get(V)}remove(V){if(dt(this,P).delete(V),dt(this,P).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const W of dt(this,P).values())if(W instanceof b.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(V,W){const Y=dt(this,P).get(V);let U=!1;if(Y!==void 0)for(const[G,te]of Object.entries(W))Y[G]!==te&&(U=!0,Y[G]=te);else U=!0,dt(this,P).set(V,W);U&&ar(this,O,La).call(this),W instanceof b.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(W.constructor._type)}has(V){return dt(this,P).has(V)}getAll(){return dt(this,P).size>0?(0,v.objectFromMap)(dt(this,P)):null}get size(){return dt(this,P).size}resetModified(){dt(this,M)&&(hr(this,M,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new R(this)}get serializable(){if(dt(this,P).size===0)return null;const V=new Map;for(const[W,Y]of dt(this,P)){const U=Y instanceof b.AnnotationEditor?Y.serialize():Y;U&&V.set(W,U)}return V}static getHash(V){if(!V)return"";const W=new _.MurmurHash3_64;for(const[Y,U]of V)W.update(`${Y}:${JSON.stringify(U)}`);return W.hexdigest()}}M=new WeakMap,P=new WeakMap,O=new WeakSet,La=function(){dt(this,M)||(hr(this,M,!0),typeof this.onSetModified=="function"&&this.onSetModified())},d.AnnotationStorage=E;class R extends E{constructor(W){super();er(this,Q,null);hr(this,Q,structuredClone(W.serializable))}get print(){(0,v.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return dt(this,Q)}}Q=new WeakMap,d.PrintAnnotationStorage=R},(c,d,g)=>{var E,R,M,P,O,H;Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationEditor=void 0;var v=g(5),b=g(1);const Q=class{constructor(V){er(this,E,this.focusin.bind(this));er(this,R,this.focusout.bind(this));er(this,M,!1);er(this,P,!1);er(this,O,!1);er(this,H,Q._zIndex++);this.constructor===Q&&(0,b.unreachable)("Cannot initialize AnnotationEditor."),this.parent=V.parent,this.id=V.id,this.width=this.height=null,this.pageIndex=V.parent.pageIndex,this.name=V.name,this.div=null;const[W,Y]=this.parent.viewportBaseDimensions;this.x=V.x/W,this.y=V.y/Y,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,b.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=dt(this,H)}focusin(V){dt(this,M)?hr(this,M,!1):this.parent.setSelected(this)}focusout(V){if(!this.isAttachedToDOM)return;const W=V.relatedTarget;W!=null&&W.closest(`#${this.id}`)||(V.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(V){const W=this.parent.div.getBoundingClientRect();this.startX=V.clientX-W.x,this.startY=V.clientY-W.y,V.dataTransfer.setData("text/plain",this.id),V.dataTransfer.effectAllowed="move"}setAt(V,W,Y,U){const[G,te]=this.parent.viewportBaseDimensions;[Y,U]=this.screenToPageTranslation(Y,U),this.x=(V+Y)/G,this.y=(W+U)/te,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(V,W){const[Y,U]=this.parent.viewportBaseDimensions;[V,W]=this.screenToPageTranslation(V,W),this.x+=V/Y,this.y+=W/U,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(V,W){const{rotation:Y}=this.parent.viewport;switch(Y){case 90:return[W,-V];case 180:return[-V,-W];case 270:return[-W,V];default:return[V,W]}}setDims(V,W){const[Y,U]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*V/Y}%`,this.div.style.height=`${100*W/U}%`}fixDims(){const{style:V}=this.div,{height:W,width:Y}=V,U=Y.endsWith("%"),G=W.endsWith("%");if(U&&G)return;const[te,B]=this.parent.viewportBaseDimensions;U||(V.width=`${100*parseFloat(Y)/te}%`),G||(V.height=`${100*parseFloat(W)/B}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",dt(this,E)),this.div.addEventListener("focusout",dt(this,R));const[V,W]=this.getInitialTranslation();return this.translate(V,W),(0,v.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(V){const W=v.KeyboardManager.platform.isMac;if(V.button!==0||V.ctrlKey&&W){V.preventDefault();return}V.ctrlKey&&!W||V.shiftKey||V.metaKey&&W?this.parent.toggleSelected(this):this.parent.setSelected(this),hr(this,M,!0)}getRect(V,W){const[Y,U]=this.parent.viewportBaseDimensions,[G,te]=this.parent.pageDimensions,B=G*V/Y,j=te*W/U,X=this.x*G,oe=this.y*te,be=this.width*G,ae=this.height*te;switch(this.rotation){case 0:return[X+B,te-oe-j-ae,X+B+be,te-oe-j];case 90:return[X+j,te-oe+B,X+j+ae,te-oe+B+be];case 180:return[X-B-be,te-oe+j,X-B,te-oe+j+ae];case 270:return[X-j-ae,te-oe-B-be,X-j,te-oe-B];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(V,W){const[Y,U,G,te]=V,B=G-Y,j=te-U;switch(this.rotation){case 0:return[Y,W-te,B,j];case 90:return[Y,W-U,j,B];case 180:return[G,W-U,B,j];case 270:return[G,W-te,j,B];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){hr(this,O,!0)}disableEditMode(){hr(this,O,!1)}isInEditMode(){return dt(this,O)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var V;(V=this.div)==null||V.addEventListener("focusin",dt(this,E))}serialize(){(0,b.unreachable)("An editor must be serializable")}static deserialize(V,W){const Y=new this.prototype.constructor({parent:W,id:W.getNextId()});Y.rotation=V.rotation;const[U,G]=W.pageDimensions,[te,B,j,X]=Y.getRectInCurrentCoords(V.rect,G);return Y.x=te/U,Y.y=B/G,Y.width=j/U,Y.height=X/G,Y}remove(){this.div.removeEventListener("focusin",dt(this,E)),this.div.removeEventListener("focusout",dt(this,R)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var V;(V=this.div)==null||V.classList.add("selectedEditor")}unselect(){var V;(V=this.div)==null||V.classList.remove("selectedEditor")}updateParams(V,W){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return dt(this,P)}set isEditing(V){hr(this,P,V),V?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let _=Q;E=new WeakMap,R=new WeakMap,M=new WeakMap,P=new WeakMap,O=new WeakMap,H=new WeakMap,Gr(_,"_colorManager",new v.ColorManager),Gr(_,"_zIndex",1),d.AnnotationEditor=_},(c,d,g)=>{var Q,ee,V,W,Y,U,Ba,j,X,oe,be,ae,ie,Se,mt,it,Tt,ht,Ye,St,$t,Lt,Mt,jt,Qe,Pe,Ee,Ua,st,ha,tt,ja,It,qa,wt,Mn,Zt,Jn,Z,Va,K,za,Ae,ma,Rt,ea,lt,ga;Object.defineProperty(d,"__esModule",{value:!0}),d.KeyboardManager=d.CommandManager=d.ColorManager=d.AnnotationEditorUIManager=void 0,d.bindEvents=_,d.opacityToHex=E;var v=g(1),b=g(6);function _(ct,Ze,Ot){for(const Ht of Ot)Ze.addEventListener(Ht,ct[Ht].bind(ct))}function E(ct){return Math.round(Math.min(255,Math.max(1,255*ct))).toString(16).padStart(2,"0")}class R{constructor(){er(this,Q,0)}getId(){return`${v.AnnotationEditorPrefix}${fa(this,Q)._++}`}}Q=new WeakMap;class M{constructor(Ze=128){er(this,ee,[]);er(this,V,!1);er(this,W,void 0);er(this,Y,-1);hr(this,W,Ze)}add({cmd:Ze,undo:Ot,mustExec:Ht,type:Xt=NaN,overwriteIfSameType:ur=!1,keepUndo:cr=!1}){if(Ht&&Ze(),dt(this,V))return;const A={cmd:Ze,undo:Ot,type:Xt};if(dt(this,Y)===-1){dt(this,ee).length>0&&(dt(this,ee).length=0),hr(this,Y,0),dt(this,ee).push(A);return}if(ur&&dt(this,ee)[dt(this,Y)].type===Xt){cr&&(A.undo=dt(this,ee)[dt(this,Y)].undo),dt(this,ee)[dt(this,Y)]=A;return}const re=dt(this,Y)+1;re===dt(this,W)?dt(this,ee).splice(0,1):(hr(this,Y,re),re<dt(this,ee).length&&dt(this,ee).splice(re)),dt(this,ee).push(A)}undo(){dt(this,Y)!==-1&&(hr(this,V,!0),dt(this,ee)[dt(this,Y)].undo(),hr(this,V,!1),hr(this,Y,dt(this,Y)-1))}redo(){dt(this,Y)<dt(this,ee).length-1&&(hr(this,Y,dt(this,Y)+1),hr(this,V,!0),dt(this,ee)[dt(this,Y)].cmd(),hr(this,V,!1))}hasSomethingToUndo(){return dt(this,Y)!==-1}hasSomethingToRedo(){return dt(this,Y)<dt(this,ee).length-1}destroy(){hr(this,ee,null)}}ee=new WeakMap,V=new WeakMap,W=new WeakMap,Y=new WeakMap,d.CommandManager=M;const te=class{constructor(Ze){er(this,U);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const Ot=te.platform.isMac;for(const[Ht,Xt]of Ze)for(const ur of Ht){const cr=ur.startsWith("mac+");Ot&&cr?(this.callbacks.set(ur.slice(4),Xt),this.allKeys.add(ur.split("+").at(-1))):!Ot&&!cr&&(this.callbacks.set(ur,Xt),this.allKeys.add(ur.split("+").at(-1)))}}static get platform(){const Ze=typeof navigator<"u"?navigator.platform:"";return(0,v.shadow)(this,"platform",{isWin:Ze.includes("Win"),isMac:Ze.includes("Mac")})}exec(Ze,Ot){if(!this.allKeys.has(Ot.key))return;const Ht=this.callbacks.get(ar(this,U,Ba).call(this,Ot));!Ht||(Ht.bind(Ze)(),Ot.stopPropagation(),Ot.preventDefault())}};let P=te;U=new WeakSet,Ba=function(Ze){Ze.altKey&&this.buffer.push("alt"),Ze.ctrlKey&&this.buffer.push("ctrl"),Ze.metaKey&&this.buffer.push("meta"),Ze.shiftKey&&this.buffer.push("shift"),this.buffer.push(Ze.key);const Ot=this.buffer.join("+");return this.buffer.length=0,Ot},d.KeyboardManager=P;const B=class{get _colors(){const Ze=new Map([["CanvasText",null],["Canvas",null]]);return(0,b.getColorValues)(Ze),(0,v.shadow)(this,"_colors",Ze)}convert(Ze){const Ot=(0,b.getRGB)(Ze);if(!window.matchMedia("(forced-colors: active)").matches)return Ot;for(const[Ht,Xt]of this._colors)if(Xt.every((ur,cr)=>ur===Ot[cr]))return B._colorsMapping.get(Ht);return Ot}getHexCode(Ze){const Ot=this._colors.get(Ze);return Ot?v.Util.makeHexColor(...Ot):Ze}};let O=B;Gr(O,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),d.ColorManager=O;const ze=class{constructor(Ze,Ot){er(this,Ee);er(this,st);er(this,tt);er(this,It);er(this,wt);er(this,Zt);er(this,Z);er(this,K);er(this,Ae);er(this,Rt);er(this,lt);er(this,j,null);er(this,X,new Map);er(this,oe,new Map);er(this,be,new M);er(this,ae,0);er(this,ie,null);er(this,Se,null);er(this,mt,new R);er(this,it,!1);er(this,Tt,v.AnnotationEditorType.NONE);er(this,ht,new Set);er(this,Ye,this.copy.bind(this));er(this,St,this.cut.bind(this));er(this,$t,this.paste.bind(this));er(this,Lt,this.keydown.bind(this));er(this,Mt,this.onEditingAction.bind(this));er(this,jt,this.onPageChanging.bind(this));er(this,Qe,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});er(this,Pe,null);hr(this,Pe,Ze),hr(this,Se,Ot),dt(this,Se)._on("editingaction",dt(this,Mt)),dt(this,Se)._on("pagechanging",dt(this,jt))}destroy(){ar(this,st,ha).call(this),dt(this,Se)._off("editingaction",dt(this,Mt)),dt(this,Se)._off("pagechanging",dt(this,jt));for(const Ze of dt(this,oe).values())Ze.destroy();dt(this,oe).clear(),dt(this,X).clear(),hr(this,j,null),dt(this,ht).clear(),dt(this,be).destroy()}onPageChanging({pageNumber:Ze}){hr(this,ae,Ze-1)}focusMainContainer(){dt(this,Pe).focus()}copy(Ze){if(Ze.preventDefault(),dt(this,j)&&dt(this,j).commitOrRemove(),!this.hasSelection)return;const Ot=[];for(const Ht of dt(this,ht))Ht.isEmpty()||Ot.push(Ht.serialize());Ot.length!==0&&Ze.clipboardData.setData("application/pdfjs",JSON.stringify(Ot))}cut(Ze){this.copy(Ze),this.delete()}paste(Ze){Ze.preventDefault();let Ot=Ze.clipboardData.getData("application/pdfjs");if(!Ot)return;try{Ot=JSON.parse(Ot)}catch(Xt){(0,v.warn)(`paste: "${Xt.message}".`);return}if(!Array.isArray(Ot))return;this.unselectAll();const Ht=dt(this,oe).get(dt(this,ae));try{const Xt=[];for(const A of Ot){const re=Ht.deserialize(A);if(!re)return;Xt.push(re)}const ur=()=>{for(const A of Xt)ar(this,Ae,ma).call(this,A);ar(this,lt,ga).call(this,Xt)},cr=()=>{for(const A of Xt)A.remove()};this.addCommands({cmd:ur,undo:cr,mustExec:!0})}catch(Xt){(0,v.warn)(`paste: "${Xt.message}".`)}}keydown(Ze){var Ot;(Ot=this.getActive())!=null&&Ot.shouldGetKeyboardEvents()||ze._keyboardManager.exec(this,Ze)}onEditingAction(Ze){["undo","redo","delete","selectAll"].includes(Ze.name)&&this[Ze.name]()}setEditingState(Ze){Ze?(ar(this,Ee,Ua).call(this),ar(this,tt,ja).call(this),ar(this,wt,Mn).call(this,{isEditing:dt(this,Tt)!==v.AnnotationEditorType.NONE,isEmpty:ar(this,Rt,ea).call(this),hasSomethingToUndo:dt(this,be).hasSomethingToUndo(),hasSomethingToRedo:dt(this,be).hasSomethingToRedo(),hasSelectedEditor:!1})):(ar(this,st,ha).call(this),ar(this,It,qa).call(this),ar(this,wt,Mn).call(this,{isEditing:!1}))}registerEditorTypes(Ze){if(!dt(this,ie)){hr(this,ie,Ze);for(const Ot of dt(this,ie))ar(this,Zt,Jn).call(this,Ot.defaultPropertiesToUpdate)}}getId(){return dt(this,mt).getId()}addLayer(Ze){dt(this,oe).set(Ze.pageIndex,Ze),dt(this,it)?Ze.enable():Ze.disable()}removeLayer(Ze){dt(this,oe).delete(Ze.pageIndex)}updateMode(Ze){if(hr(this,Tt,Ze),Ze===v.AnnotationEditorType.NONE)this.setEditingState(!1),ar(this,K,za).call(this);else{this.setEditingState(!0),ar(this,Z,Va).call(this);for(const Ot of dt(this,oe).values())Ot.updateMode(Ze)}}updateToolbar(Ze){Ze!==dt(this,Tt)&&dt(this,Se).dispatch("switchannotationeditormode",{source:this,mode:Ze})}updateParams(Ze,Ot){if(!!dt(this,ie)){for(const Ht of dt(this,ht))Ht.updateParams(Ze,Ot);for(const Ht of dt(this,ie))Ht.updateDefaultParams(Ze,Ot)}}getEditors(Ze){const Ot=[];for(const Ht of dt(this,X).values())Ht.pageIndex===Ze&&Ot.push(Ht);return Ot}getEditor(Ze){return dt(this,X).get(Ze)}addEditor(Ze){dt(this,X).set(Ze.id,Ze)}removeEditor(Ze){dt(this,X).delete(Ze.id),this.unselect(Ze)}setActiveEditor(Ze){dt(this,j)!==Ze&&(hr(this,j,Ze),Ze&&ar(this,Zt,Jn).call(this,Ze.propertiesToUpdate))}toggleSelected(Ze){if(dt(this,ht).has(Ze)){dt(this,ht).delete(Ze),Ze.unselect(),ar(this,wt,Mn).call(this,{hasSelectedEditor:this.hasSelection});return}dt(this,ht).add(Ze),Ze.select(),ar(this,Zt,Jn).call(this,Ze.propertiesToUpdate),ar(this,wt,Mn).call(this,{hasSelectedEditor:!0})}setSelected(Ze){for(const Ot of dt(this,ht))Ot!==Ze&&Ot.unselect();dt(this,ht).clear(),dt(this,ht).add(Ze),Ze.select(),ar(this,Zt,Jn).call(this,Ze.propertiesToUpdate),ar(this,wt,Mn).call(this,{hasSelectedEditor:!0})}isSelected(Ze){return dt(this,ht).has(Ze)}unselect(Ze){Ze.unselect(),dt(this,ht).delete(Ze),ar(this,wt,Mn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return dt(this,ht).size!==0}undo(){dt(this,be).undo(),ar(this,wt,Mn).call(this,{hasSomethingToUndo:dt(this,be).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ar(this,Rt,ea).call(this)})}redo(){dt(this,be).redo(),ar(this,wt,Mn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:dt(this,be).hasSomethingToRedo(),isEmpty:ar(this,Rt,ea).call(this)})}addCommands(Ze){dt(this,be).add(Ze),ar(this,wt,Mn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ar(this,Rt,ea).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Ze=[...dt(this,ht)],Ot=()=>{for(const Xt of Ze)Xt.remove()},Ht=()=>{for(const Xt of Ze)ar(this,Ae,ma).call(this,Xt)};this.addCommands({cmd:Ot,undo:Ht,mustExec:!0})}commitOrRemove(){var Ze;(Ze=dt(this,j))==null||Ze.commitOrRemove()}selectAll(){for(const Ze of dt(this,ht))Ze.commit();ar(this,lt,ga).call(this,dt(this,X).values())}unselectAll(){if(dt(this,j)){dt(this,j).commitOrRemove();return}if(dt(this,ht).size!==0){for(const Ze of dt(this,ht))Ze.unselect();dt(this,ht).clear(),ar(this,wt,Mn).call(this,{hasSelectedEditor:!1})}}isActive(Ze){return dt(this,j)===Ze}getActive(){return dt(this,j)}getMode(){return dt(this,Tt)}};let H=ze;j=new WeakMap,X=new WeakMap,oe=new WeakMap,be=new WeakMap,ae=new WeakMap,ie=new WeakMap,Se=new WeakMap,mt=new WeakMap,it=new WeakMap,Tt=new WeakMap,ht=new WeakMap,Ye=new WeakMap,St=new WeakMap,$t=new WeakMap,Lt=new WeakMap,Mt=new WeakMap,jt=new WeakMap,Qe=new WeakMap,Pe=new WeakMap,Ee=new WeakSet,Ua=function(){dt(this,Pe).addEventListener("keydown",dt(this,Lt))},st=new WeakSet,ha=function(){dt(this,Pe).removeEventListener("keydown",dt(this,Lt))},tt=new WeakSet,ja=function(){document.addEventListener("copy",dt(this,Ye)),document.addEventListener("cut",dt(this,St)),document.addEventListener("paste",dt(this,$t))},It=new WeakSet,qa=function(){document.removeEventListener("copy",dt(this,Ye)),document.removeEventListener("cut",dt(this,St)),document.removeEventListener("paste",dt(this,$t))},wt=new WeakSet,Mn=function(Ze){Object.entries(Ze).some(([Ht,Xt])=>dt(this,Qe)[Ht]!==Xt)&&dt(this,Se).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(dt(this,Qe),Ze)})},Zt=new WeakSet,Jn=function(Ze){dt(this,Se).dispatch("annotationeditorparamschanged",{source:this,details:Ze})},Z=new WeakSet,Va=function(){if(!dt(this,it)){hr(this,it,!0);for(const Ze of dt(this,oe).values())Ze.enable()}},K=new WeakSet,za=function(){if(this.unselectAll(),dt(this,it)){hr(this,it,!1);for(const Ze of dt(this,oe).values())Ze.disable()}},Ae=new WeakSet,ma=function(Ze){const Ot=dt(this,oe).get(Ze.pageIndex);Ot?Ot.addOrRebuild(Ze):this.addEditor(Ze)},Rt=new WeakSet,ea=function(){if(dt(this,X).size===0)return!0;if(dt(this,X).size===1)for(const Ze of dt(this,X).values())return Ze.isEmpty();return!1},lt=new WeakSet,ga=function(Ze){dt(this,ht).clear();for(const Ot of Ze)Ot.isEmpty()||(dt(this,ht).add(Ot),Ot.select());ar(this,wt,Mn).call(this,{hasSelectedEditor:!0})},Gr(H,"_keyboardManager",new P([[["ctrl+a","mac+meta+a"],ze.prototype.selectAll],[["ctrl+z","mac+meta+z"],ze.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],ze.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],ze.prototype.delete],[["Escape","mac+Escape"],ze.prototype.unselectAll]])),d.AnnotationEditorUIManager=H},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.StatTimer=d.RenderingCancelledException=d.PixelsPerInch=d.PageViewport=d.PDFDateString=d.DOMStandardFontDataFactory=d.DOMSVGFactory=d.DOMCanvasFactory=d.DOMCMapReaderFactory=d.AnnotationPrefix=void 0,d.deprecated=X,d.getColorValues=Se,d.getCurrentTransform=mt,d.getCurrentTransformInverse=it,d.getFilenameFromUrl=U,d.getPdfFilenameFromUrl=G,d.getRGB=ie,d.getXfaPageViewport=ae,d.isDataScheme=W,d.isPdfFile=Y,d.isValidFetchUrl=B,d.loadScript=j;var v=g(7),b=g(1);const _="http://www.w3.org/2000/svg",E="pdfjs_internal_id_";d.AnnotationPrefix=E;const Tt=class{};let R=Tt;Gr(R,"CSS",96),Gr(R,"PDF",72),Gr(R,"PDF_TO_CSS_UNITS",Tt.CSS/Tt.PDF),d.PixelsPerInch=R;class M extends v.BaseCanvasFactory{constructor({ownerDocument:Ye=globalThis.document}={}){super(),this._document=Ye}_createCanvas(Ye,St){const $t=this._document.createElement("canvas");return $t.width=Ye,$t.height=St,$t}}d.DOMCanvasFactory=M;async function P(ht,Ye=!1){if(B(ht,document.baseURI)){const St=await fetch(ht);if(!St.ok)throw new Error(St.statusText);return Ye?new Uint8Array(await St.arrayBuffer()):(0,b.stringToBytes)(await St.text())}return new Promise((St,$t)=>{const Lt=new XMLHttpRequest;Lt.open("GET",ht,!0),Ye&&(Lt.responseType="arraybuffer"),Lt.onreadystatechange=()=>{if(Lt.readyState===XMLHttpRequest.DONE){if(Lt.status===200||Lt.status===0){let Mt;if(Ye&&Lt.response?Mt=new Uint8Array(Lt.response):!Ye&&Lt.responseText&&(Mt=(0,b.stringToBytes)(Lt.responseText)),Mt){St(Mt);return}}$t(new Error(Lt.statusText))}},Lt.send(null)})}class O extends v.BaseCMapReaderFactory{_fetchData(Ye,St){return P(Ye,this.isCompressed).then($t=>({cMapData:$t,compressionType:St}))}}d.DOMCMapReaderFactory=O;class H extends v.BaseStandardFontDataFactory{_fetchData(Ye){return P(Ye,!0)}}d.DOMStandardFontDataFactory=H;class Q extends v.BaseSVGFactory{_createSVG(Ye){return document.createElementNS(_,Ye)}}d.DOMSVGFactory=Q;class ee{constructor({viewBox:Ye,scale:St,rotation:$t,offsetX:Lt=0,offsetY:Mt=0,dontFlip:jt=!1}){this.viewBox=Ye,this.scale=St,this.rotation=$t,this.offsetX=Lt,this.offsetY=Mt;const Qe=(Ye[2]+Ye[0])/2,Pe=(Ye[3]+Ye[1])/2;let Ee,nt,st,rt;switch($t%=360,$t<0&&($t+=360),$t){case 180:Ee=-1,nt=0,st=0,rt=1;break;case 90:Ee=0,nt=1,st=1,rt=0;break;case 270:Ee=0,nt=-1,st=-1,rt=0;break;case 0:Ee=1,nt=0,st=0,rt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}jt&&(st=-st,rt=-rt);let tt,vt,It,Vt;Ee===0?(tt=Math.abs(Pe-Ye[1])*St+Lt,vt=Math.abs(Qe-Ye[0])*St+Mt,It=Math.abs(Ye[3]-Ye[1])*St,Vt=Math.abs(Ye[2]-Ye[0])*St):(tt=Math.abs(Qe-Ye[0])*St+Lt,vt=Math.abs(Pe-Ye[1])*St+Mt,It=Math.abs(Ye[2]-Ye[0])*St,Vt=Math.abs(Ye[3]-Ye[1])*St),this.transform=[Ee*St,nt*St,st*St,rt*St,tt-Ee*St*Qe-st*St*Pe,vt-nt*St*Qe-rt*St*Pe],this.width=It,this.height=Vt}clone({scale:Ye=this.scale,rotation:St=this.rotation,offsetX:$t=this.offsetX,offsetY:Lt=this.offsetY,dontFlip:Mt=!1}={}){return new ee({viewBox:this.viewBox.slice(),scale:Ye,rotation:St,offsetX:$t,offsetY:Lt,dontFlip:Mt})}convertToViewportPoint(Ye,St){return b.Util.applyTransform([Ye,St],this.transform)}convertToViewportRectangle(Ye){const St=b.Util.applyTransform([Ye[0],Ye[1]],this.transform),$t=b.Util.applyTransform([Ye[2],Ye[3]],this.transform);return[St[0],St[1],$t[0],$t[1]]}convertToPdfPoint(Ye,St){return b.Util.applyInverseTransform([Ye,St],this.transform)}}d.PageViewport=ee;class V extends b.BaseException{constructor(Ye,St){super(Ye,"RenderingCancelledException"),this.type=St}}d.RenderingCancelledException=V;function W(ht){const Ye=ht.length;let St=0;for(;St<Ye&&ht[St].trim()==="";)St++;return ht.substring(St,St+5).toLowerCase()==="data:"}function Y(ht){return typeof ht=="string"&&/\.pdf$/i.test(ht)}function U(ht,Ye=!1){return Ye||([ht]=ht.split(/[#?]/,1)),ht.substring(ht.lastIndexOf("/")+1)}function G(ht,Ye="document.pdf"){if(typeof ht!="string")return Ye;if(W(ht))return(0,b.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Ye;const St=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,$t=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Lt=St.exec(ht);let Mt=$t.exec(Lt[1])||$t.exec(Lt[2])||$t.exec(Lt[3]);if(Mt&&(Mt=Mt[0],Mt.includes("%")))try{Mt=$t.exec(decodeURIComponent(Mt))[0]}catch{}return Mt||Ye}class te{constructor(){Gr(this,"started",Object.create(null));Gr(this,"times",[])}time(Ye){Ye in this.started&&(0,b.warn)(`Timer is already running for ${Ye}`),this.started[Ye]=Date.now()}timeEnd(Ye){Ye in this.started||(0,b.warn)(`Timer has not been started for ${Ye}`),this.times.push({name:Ye,start:this.started[Ye],end:Date.now()}),delete this.started[Ye]}toString(){const Ye=[];let St=0;for(const{name:$t}of this.times)St=Math.max($t.length,St);for(const{name:$t,start:Lt,end:Mt}of this.times)Ye.push(`${$t.padEnd(St)} ${Mt-Lt}ms
`);return Ye.join("")}}d.StatTimer=te;function B(ht,Ye){try{const{protocol:St}=Ye?new URL(ht,Ye):new URL(ht);return St==="http:"||St==="https:"}catch{return!1}}function j(ht,Ye=!1){return new Promise((St,$t)=>{const Lt=document.createElement("script");Lt.src=ht,Lt.onload=function(Mt){Ye&&Lt.remove(),St(Mt)},Lt.onerror=function(){$t(new Error(`Cannot load script at: ${Lt.src}`))},(document.head||document.documentElement).append(Lt)})}function X(ht){console.log("Deprecated API usage: "+ht)}let oe;class be{static toDateObject(Ye){if(!Ye||typeof Ye!="string")return null;oe||(oe=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const St=oe.exec(Ye);if(!St)return null;const $t=parseInt(St[1],10);let Lt=parseInt(St[2],10);Lt=Lt>=1&&Lt<=12?Lt-1:0;let Mt=parseInt(St[3],10);Mt=Mt>=1&&Mt<=31?Mt:1;let jt=parseInt(St[4],10);jt=jt>=0&&jt<=23?jt:0;let Qe=parseInt(St[5],10);Qe=Qe>=0&&Qe<=59?Qe:0;let Pe=parseInt(St[6],10);Pe=Pe>=0&&Pe<=59?Pe:0;const Ee=St[7]||"Z";let nt=parseInt(St[8],10);nt=nt>=0&&nt<=23?nt:0;let st=parseInt(St[9],10)||0;return st=st>=0&&st<=59?st:0,Ee==="-"?(jt+=nt,Qe+=st):Ee==="+"&&(jt-=nt,Qe-=st),new Date(Date.UTC($t,Lt,Mt,jt,Qe,Pe))}}d.PDFDateString=be;function ae(ht,{scale:Ye=1,rotation:St=0}){const{width:$t,height:Lt}=ht.attributes.style,Mt=[0,0,parseInt($t),parseInt(Lt)];return new ee({viewBox:Mt,scale:Ye,rotation:St})}function ie(ht){if(ht.startsWith("#")){const Ye=parseInt(ht.slice(1),16);return[(Ye&16711680)>>16,(Ye&65280)>>8,Ye&255]}return ht.startsWith("rgb(")?ht.slice(4,-1).split(",").map(Ye=>parseInt(Ye)):ht.startsWith("rgba(")?ht.slice(5,-1).split(",").map(Ye=>parseInt(Ye)).slice(0,3):((0,b.warn)(`Not a valid color format: "${ht}"`),[0,0,0])}function Se(ht){const Ye=document.createElement("span");Ye.style.visibility="hidden",document.body.append(Ye);for(const St of ht.keys()){Ye.style.color=St;const $t=window.getComputedStyle(Ye).color;ht.set(St,ie($t))}Ye.remove()}function mt(ht){const{a:Ye,b:St,c:$t,d:Lt,e:Mt,f:jt}=ht.getTransform();return[Ye,St,$t,Lt,Mt,jt]}function it(ht){const{a:Ye,b:St,c:$t,d:Lt,e:Mt,f:jt}=ht.getTransform().invertSelf();return[Ye,St,$t,Lt,Mt,jt]}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BaseStandardFontDataFactory=d.BaseSVGFactory=d.BaseCanvasFactory=d.BaseCMapReaderFactory=void 0;var v=g(1);class b{constructor(){this.constructor===b&&(0,v.unreachable)("Cannot initialize BaseCanvasFactory.")}create(P,O){if(P<=0||O<=0)throw new Error("Invalid canvas size");const H=this._createCanvas(P,O);return{canvas:H,context:H.getContext("2d")}}reset(P,O,H){if(!P.canvas)throw new Error("Canvas is not specified");if(O<=0||H<=0)throw new Error("Invalid canvas size");P.canvas.width=O,P.canvas.height=H}destroy(P){if(!P.canvas)throw new Error("Canvas is not specified");P.canvas.width=0,P.canvas.height=0,P.canvas=null,P.context=null}_createCanvas(P,O){(0,v.unreachable)("Abstract method `_createCanvas` called.")}}d.BaseCanvasFactory=b;class _{constructor({baseUrl:P=null,isCompressed:O=!1}){this.constructor===_&&(0,v.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=P,this.isCompressed=O}async fetch({name:P}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!P)throw new Error("CMap name must be specified.");const O=this.baseUrl+P+(this.isCompressed?".bcmap":""),H=this.isCompressed?v.CMapCompressionType.BINARY:v.CMapCompressionType.NONE;return this._fetchData(O,H).catch(Q=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${O}`)})}_fetchData(P,O){(0,v.unreachable)("Abstract method `_fetchData` called.")}}d.BaseCMapReaderFactory=_;class E{constructor({baseUrl:P=null}){this.constructor===E&&(0,v.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=P}async fetch({filename:P}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!P)throw new Error("Font filename must be specified.");const O=`${this.baseUrl}${P}`;return this._fetchData(O).catch(H=>{throw new Error(`Unable to load font data at: ${O}`)})}_fetchData(P){(0,v.unreachable)("Abstract method `_fetchData` called.")}}d.BaseStandardFontDataFactory=E;class R{constructor(){this.constructor===R&&(0,v.unreachable)("Cannot initialize BaseSVGFactory.")}create(P,O,H=!1){if(P<=0||O<=0)throw new Error("Invalid SVG dimensions");const Q=this._createSVG("svg:svg");return Q.setAttribute("version","1.1"),H||(Q.setAttribute("width",`${P}px`),Q.setAttribute("height",`${O}px`)),Q.setAttribute("preserveAspectRatio","none"),Q.setAttribute("viewBox",`0 0 ${P} ${O}`),Q}createElement(P){if(typeof P!="string")throw new Error("Invalid SVG element type");return this._createSVG(P)}_createSVG(P){(0,v.unreachable)("Abstract method `_createSVG` called.")}}d.BaseSVGFactory=R},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MurmurHash3_64=void 0;var v=g(1);const b=3285377520,_=4294901760,E=65535;class R{constructor(P){this.h1=P?P&4294967295:b,this.h2=P?P&4294967295:b}update(P){let O,H;if(typeof P=="string"){O=new Uint8Array(P.length*2),H=0;for(let oe=0,be=P.length;oe<be;oe++){const ae=P.charCodeAt(oe);ae<=255?O[H++]=ae:(O[H++]=ae>>>8,O[H++]=ae&255)}}else if((0,v.isArrayBuffer)(P))O=P.slice(),H=O.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const Q=H>>2,ee=H-Q*4,V=new Uint32Array(O.buffer,0,Q);let W=0,Y=0,U=this.h1,G=this.h2;const te=3432918353,B=461845907,j=te&E,X=B&E;for(let oe=0;oe<Q;oe++)oe&1?(W=V[oe],W=W*te&_|W*j&E,W=W<<15|W>>>17,W=W*B&_|W*X&E,U^=W,U=U<<13|U>>>19,U=U*5+3864292196):(Y=V[oe],Y=Y*te&_|Y*j&E,Y=Y<<15|Y>>>17,Y=Y*B&_|Y*X&E,G^=Y,G=G<<13|G>>>19,G=G*5+3864292196);switch(W=0,ee){case 3:W^=O[Q*4+2]<<16;case 2:W^=O[Q*4+1]<<8;case 1:W^=O[Q*4],W=W*te&_|W*j&E,W=W<<15|W>>>17,W=W*B&_|W*X&E,Q&1?U^=W:G^=W}this.h1=U,this.h2=G}hexdigest(){let P=this.h1,O=this.h2;return P^=O>>>1,P=P*3981806797&_|P*36045&E,O=O*4283543511&_|((O<<16|P>>>16)*2950163797&_)>>>16,P^=O>>>1,P=P*444984403&_|P*60499&E,O=O*3301882366&_|((O<<16|P>>>16)*3120437893&_)>>>16,P^=O>>>1,(P>>>0).toString(16).padStart(8,"0")+(O>>>0).toString(16).padStart(8,"0")}}d.MurmurHash3_64=R},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.FontLoader=d.FontFaceObject=void 0;var v=g(1);class b{constructor({onUnsupportedFeature:R,ownerDocument:M=globalThis.document,styleElement:P=null}){this._onUnsupportedFeature=R,this._document=M,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(R){this.nativeFontFaces.push(R),this._document.fonts.add(R)}insertRule(R){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const M=this.styleElement.sheet;M.insertRule(R,M.cssRules.length)}clear(){for(const R of this.nativeFontFaces)this._document.fonts.delete(R);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(R){if(R.attached||R.missingFile)return;if(R.attached=!0,this.isFontLoadingAPISupported){const P=R.createNativeFontFace();if(P){this.addNativeFontFace(P);try{await P.loaded}catch(O){throw this._onUnsupportedFeature({featureId:v.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,v.warn)(`Failed to load font '${P.family}': '${O}'.`),R.disableFontFace=!0,O}}return}const M=R.createFontFaceRule();if(M){if(this.insertRule(M),this.isSyncFontLoadingSupported)return;await new Promise(P=>{const O=this._queueLoadingCallback(P);this._prepareFontLoadEvent(R,O)})}}get isFontLoadingAPISupported(){var M;const R=!!((M=this._document)!=null&&M.fonts);return(0,v.shadow)(this,"isFontLoadingAPISupported",R)}get isSyncFontLoadingSupported(){let R=!1;if(typeof navigator>"u")R=!0;else{const M=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(M==null?void 0:M[1])>=14&&(R=!0)}return(0,v.shadow)(this,"isSyncFontLoadingSupported",R)}_queueLoadingCallback(R){function M(){for((0,v.assert)(!O.done,"completeRequest() cannot be called twice."),O.done=!0;P.length>0&&P[0].done;){const H=P.shift();setTimeout(H.callback,0)}}const{loadingRequests:P}=this,O={done:!1,complete:M,callback:R};return P.push(O),O}get _loadTestFont(){const R=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,v.shadow)(this,"_loadTestFont",R)}_prepareFontLoadEvent(R,M){function P(ie,Se){return ie.charCodeAt(Se)<<24|ie.charCodeAt(Se+1)<<16|ie.charCodeAt(Se+2)<<8|ie.charCodeAt(Se+3)&255}function O(ie,Se,mt,it){const Tt=ie.substring(0,Se),ht=ie.substring(Se+mt);return Tt+it+ht}let H,Q;const ee=this._document.createElement("canvas");ee.width=1,ee.height=1;const V=ee.getContext("2d");let W=0;function Y(ie,Se){if(++W>30){(0,v.warn)("Load test font never loaded."),Se();return}if(V.font="30px "+ie,V.fillText(".",0,20),V.getImageData(0,0,1,1).data[3]>0){Se();return}setTimeout(Y.bind(null,ie,Se))}const U=`lt${Date.now()}${this.loadTestFontId++}`;let G=this._loadTestFont;G=O(G,976,U.length,U);const B=16,j=1482184792;let X=P(G,B);for(H=0,Q=U.length-3;H<Q;H+=4)X=X-j+P(U,H)|0;H<U.length&&(X=X-j+P(U+"XXX",H)|0),G=O(G,B,4,(0,v.string32)(X));const oe=`url(data:font/opentype;base64,${btoa(G)});`,be=`@font-face {font-family:"${U}";src:${oe}}`;this.insertRule(be);const ae=this._document.createElement("div");ae.style.visibility="hidden",ae.style.width=ae.style.height="10px",ae.style.position="absolute",ae.style.top=ae.style.left="0px";for(const ie of[R.loadedName,U]){const Se=this._document.createElement("span");Se.textContent="Hi",Se.style.fontFamily=ie,ae.append(Se)}this._document.body.append(ae),Y(U,()=>{ae.remove(),M.complete()})}}d.FontLoader=b;class _{constructor(R,{isEvalSupported:M=!0,disableFontFace:P=!1,ignoreErrors:O=!1,onUnsupportedFeature:H,fontRegistry:Q=null}){this.compiledGlyphs=Object.create(null);for(const ee in R)this[ee]=R[ee];this.isEvalSupported=M!==!1,this.disableFontFace=P===!0,this.ignoreErrors=O===!0,this._onUnsupportedFeature=H,this.fontRegistry=Q}createNativeFontFace(){var M;if(!this.data||this.disableFontFace)return null;let R;if(!this.cssFontInfo)R=new FontFace(this.loadedName,this.data,{});else{const P={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(P.style=`oblique ${this.cssFontInfo.italicAngle}deg`),R=new FontFace(this.cssFontInfo.fontFamily,this.data,P)}return(M=this.fontRegistry)==null||M.registerFont(this),R}createFontFaceRule(){var O;if(!this.data||this.disableFontFace)return null;const R=(0,v.bytesToString)(this.data),M=`url(data:${this.mimetype};base64,${btoa(R)});`;let P;if(!this.cssFontInfo)P=`@font-face {font-family:"${this.loadedName}";src:${M}}`;else{let H=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(H+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),P=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${H}src:${M}}`}return(O=this.fontRegistry)==null||O.registerFont(this,M),P}getPathGenerator(R,M){if(this.compiledGlyphs[M]!==void 0)return this.compiledGlyphs[M];let P;try{P=R.get(this.loadedName+"_path_"+M)}catch(O){if(!this.ignoreErrors)throw O;return this._onUnsupportedFeature({featureId:v.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,v.warn)(`getPathGenerator - ignoring character: "${O}".`),this.compiledGlyphs[M]=function(H,Q){}}if(this.isEvalSupported&&v.FeatureTest.isEvalSupported){const O=[];for(const H of P){const Q=H.args!==void 0?H.args.join(","):"";O.push("c.",H.cmd,"(",Q,`);
`)}return this.compiledGlyphs[M]=new Function("c","size",O.join(""))}return this.compiledGlyphs[M]=function(O,H){for(const Q of P)Q.cmd==="scale"&&(Q.args=[H,-H]),O[Q.cmd].apply(O,Q.args)}}}d.FontFaceObject=_},(c,d,g)=>{var Lt,ya;Object.defineProperty(d,"__esModule",{value:!0}),d.CanvasGraphics=void 0;var v=g(1),b=g(6),_=g(11),E=g(13),R=g(12);const M=16,P=100,O=4096,H=15,Q=10,ee=R.isNodeJS&&typeof Path2D>"u"?-1:1e3,V=16;function W(Qe,Pe){if(Qe._removeMirroring)throw new Error("Context is already forwarding operations.");Qe.__originalSave=Qe.save,Qe.__originalRestore=Qe.restore,Qe.__originalRotate=Qe.rotate,Qe.__originalScale=Qe.scale,Qe.__originalTranslate=Qe.translate,Qe.__originalTransform=Qe.transform,Qe.__originalSetTransform=Qe.setTransform,Qe.__originalResetTransform=Qe.resetTransform,Qe.__originalClip=Qe.clip,Qe.__originalMoveTo=Qe.moveTo,Qe.__originalLineTo=Qe.lineTo,Qe.__originalBezierCurveTo=Qe.bezierCurveTo,Qe.__originalRect=Qe.rect,Qe.__originalClosePath=Qe.closePath,Qe.__originalBeginPath=Qe.beginPath,Qe._removeMirroring=()=>{Qe.save=Qe.__originalSave,Qe.restore=Qe.__originalRestore,Qe.rotate=Qe.__originalRotate,Qe.scale=Qe.__originalScale,Qe.translate=Qe.__originalTranslate,Qe.transform=Qe.__originalTransform,Qe.setTransform=Qe.__originalSetTransform,Qe.resetTransform=Qe.__originalResetTransform,Qe.clip=Qe.__originalClip,Qe.moveTo=Qe.__originalMoveTo,Qe.lineTo=Qe.__originalLineTo,Qe.bezierCurveTo=Qe.__originalBezierCurveTo,Qe.rect=Qe.__originalRect,Qe.closePath=Qe.__originalClosePath,Qe.beginPath=Qe.__originalBeginPath,delete Qe._removeMirroring},Qe.save=function(){Pe.save(),this.__originalSave()},Qe.restore=function(){Pe.restore(),this.__originalRestore()},Qe.translate=function(nt,st){Pe.translate(nt,st),this.__originalTranslate(nt,st)},Qe.scale=function(nt,st){Pe.scale(nt,st),this.__originalScale(nt,st)},Qe.transform=function(nt,st,rt,tt,vt,It){Pe.transform(nt,st,rt,tt,vt,It),this.__originalTransform(nt,st,rt,tt,vt,It)},Qe.setTransform=function(nt,st,rt,tt,vt,It){Pe.setTransform(nt,st,rt,tt,vt,It),this.__originalSetTransform(nt,st,rt,tt,vt,It)},Qe.resetTransform=function(){Pe.resetTransform(),this.__originalResetTransform()},Qe.rotate=function(nt){Pe.rotate(nt),this.__originalRotate(nt)},Qe.clip=function(nt){Pe.clip(nt),this.__originalClip(nt)},Qe.moveTo=function(Ee,nt){Pe.moveTo(Ee,nt),this.__originalMoveTo(Ee,nt)},Qe.lineTo=function(Ee,nt){Pe.lineTo(Ee,nt),this.__originalLineTo(Ee,nt)},Qe.bezierCurveTo=function(Ee,nt,st,rt,tt,vt){Pe.bezierCurveTo(Ee,nt,st,rt,tt,vt),this.__originalBezierCurveTo(Ee,nt,st,rt,tt,vt)},Qe.rect=function(Ee,nt,st,rt){Pe.rect(Ee,nt,st,rt),this.__originalRect(Ee,nt,st,rt)},Qe.closePath=function(){Pe.closePath(),this.__originalClosePath()},Qe.beginPath=function(){Pe.beginPath(),this.__originalBeginPath()}}class Y{constructor(Pe){this.canvasFactory=Pe,this.cache=Object.create(null)}getCanvas(Pe,Ee,nt){let st;return this.cache[Pe]!==void 0?(st=this.cache[Pe],this.canvasFactory.reset(st,Ee,nt)):(st=this.canvasFactory.create(Ee,nt),this.cache[Pe]=st),st}delete(Pe){delete this.cache[Pe]}clear(){for(const Pe in this.cache){const Ee=this.cache[Pe];this.canvasFactory.destroy(Ee),delete this.cache[Pe]}}}function U(Qe,Pe,Ee,nt,st,rt,tt,vt,It,Vt){const[wt,kt,Zt,Qt,Z,z]=(0,b.getCurrentTransform)(Qe);if(kt===0&&Zt===0){const Ae=tt*wt+Z,ut=Math.round(Ae),Rt=vt*Qt+z,yt=Math.round(Rt),lt=(tt+It)*wt+Z,at=Math.abs(Math.round(lt)-ut)||1,ze=(vt+Vt)*Qt+z,ct=Math.abs(Math.round(ze)-yt)||1;return Qe.setTransform(Math.sign(wt),0,0,Math.sign(Qt),ut,yt),Qe.drawImage(Pe,Ee,nt,st,rt,0,0,at,ct),Qe.setTransform(wt,kt,Zt,Qt,Z,z),[at,ct]}if(wt===0&&Qt===0){const Ae=vt*Zt+Z,ut=Math.round(Ae),Rt=tt*kt+z,yt=Math.round(Rt),lt=(vt+Vt)*Zt+Z,at=Math.abs(Math.round(lt)-ut)||1,ze=(tt+It)*kt+z,ct=Math.abs(Math.round(ze)-yt)||1;return Qe.setTransform(0,Math.sign(kt),Math.sign(Zt),0,ut,yt),Qe.drawImage(Pe,Ee,nt,st,rt,0,0,ct,at),Qe.setTransform(wt,kt,Zt,Qt,Z,z),[ct,at]}Qe.drawImage(Pe,Ee,nt,st,rt,tt,vt,It,Vt);const K=Math.hypot(wt,kt),ne=Math.hypot(Zt,Qt);return[K*It,ne*Vt]}function G(Qe){const{width:Pe,height:Ee}=Qe;if(Pe>ee||Ee>ee)return null;const nt=1e3,st=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),rt=Pe+1;let tt=new Uint8Array(rt*(Ee+1)),vt,It,Vt;const wt=Pe+7&-8;let kt=new Uint8Array(wt*Ee),Zt=0;for(const ne of Qe.data){let Ae=128;for(;Ae>0;)kt[Zt++]=ne&Ae?0:255,Ae>>=1}let Qt=0;for(Zt=0,kt[Zt]!==0&&(tt[0]=1,++Qt),It=1;It<Pe;It++)kt[Zt]!==kt[Zt+1]&&(tt[It]=kt[Zt]?2:1,++Qt),Zt++;for(kt[Zt]!==0&&(tt[It]=2,++Qt),vt=1;vt<Ee;vt++){Zt=vt*wt,Vt=vt*rt,kt[Zt-wt]!==kt[Zt]&&(tt[Vt]=kt[Zt]?1:8,++Qt);let ne=(kt[Zt]?4:0)+(kt[Zt-wt]?8:0);for(It=1;It<Pe;It++)ne=(ne>>2)+(kt[Zt+1]?4:0)+(kt[Zt-wt+1]?8:0),st[ne]&&(tt[Vt+It]=st[ne],++Qt),Zt++;if(kt[Zt-wt]!==kt[Zt]&&(tt[Vt+It]=kt[Zt]?2:4,++Qt),Qt>nt)return null}for(Zt=wt*(Ee-1),Vt=vt*rt,kt[Zt]!==0&&(tt[Vt]=8,++Qt),It=1;It<Pe;It++)kt[Zt]!==kt[Zt+1]&&(tt[Vt+It]=kt[Zt]?4:8,++Qt),Zt++;if(kt[Zt]!==0&&(tt[Vt+It]=4,++Qt),Qt>nt)return null;const Z=new Int32Array([0,rt,-1,0,-rt,0,0,0,1]),z=new Path2D;for(vt=0;Qt&&vt<=Ee;vt++){let ne=vt*rt;const Ae=ne+Pe;for(;ne<Ae&&!tt[ne];)ne++;if(ne===Ae)continue;z.moveTo(ne%rt,vt);const ut=ne;let Rt=tt[ne];do{const yt=Z[Rt];do ne+=yt;while(!tt[ne]);const lt=tt[ne];lt!==5&&lt!==10?(Rt=lt,tt[ne]=0):(Rt=lt&51*Rt>>4,tt[ne]&=Rt>>2|Rt<<2),z.lineTo(ne%rt,ne/rt|0),tt[ne]||--Qt}while(ut!==ne);--vt}return kt=null,tt=null,function(ne){ne.save(),ne.scale(1/Pe,-1/Ee),ne.translate(0,-Ee),ne.fill(z),ne.beginPath(),ne.restore()}}class te{constructor(Pe,Ee){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=v.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=v.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=v.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,Pe,Ee])}clone(){const Pe=Object.create(this);return Pe.clipBox=this.clipBox.slice(),Pe}setCurrentPoint(Pe,Ee){this.x=Pe,this.y=Ee}updatePathMinMax(Pe,Ee,nt){[Ee,nt]=v.Util.applyTransform([Ee,nt],Pe),this.minX=Math.min(this.minX,Ee),this.minY=Math.min(this.minY,nt),this.maxX=Math.max(this.maxX,Ee),this.maxY=Math.max(this.maxY,nt)}updateRectMinMax(Pe,Ee){const nt=v.Util.applyTransform(Ee,Pe),st=v.Util.applyTransform(Ee.slice(2),Pe);this.minX=Math.min(this.minX,nt[0],st[0]),this.minY=Math.min(this.minY,nt[1],st[1]),this.maxX=Math.max(this.maxX,nt[0],st[0]),this.maxY=Math.max(this.maxY,nt[1],st[1])}updateScalingPathMinMax(Pe,Ee){v.Util.scaleMinMax(Pe,Ee),this.minX=Math.min(this.minX,Ee[0]),this.maxX=Math.max(this.maxX,Ee[1]),this.minY=Math.min(this.minY,Ee[2]),this.maxY=Math.max(this.maxY,Ee[3])}updateCurvePathMinMax(Pe,Ee,nt,st,rt,tt,vt,It,Vt,wt){const kt=v.Util.bezierBoundingBox(Ee,nt,st,rt,tt,vt,It,Vt);if(wt){wt[0]=Math.min(wt[0],kt[0],kt[2]),wt[1]=Math.max(wt[1],kt[0],kt[2]),wt[2]=Math.min(wt[2],kt[1],kt[3]),wt[3]=Math.max(wt[3],kt[1],kt[3]);return}this.updateRectMinMax(Pe,kt)}getPathBoundingBox(Pe=_.PathType.FILL,Ee=null){const nt=[this.minX,this.minY,this.maxX,this.maxY];if(Pe===_.PathType.STROKE){Ee||(0,v.unreachable)("Stroke bounding box must include transform.");const st=v.Util.singularValueDecompose2dScale(Ee),rt=st[0]*this.lineWidth/2,tt=st[1]*this.lineWidth/2;nt[0]-=rt,nt[1]-=tt,nt[2]+=rt,nt[3]+=tt}return nt}updateClipFromPath(){const Pe=v.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Pe||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Pe){this.clipBox=Pe,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Pe=_.PathType.FILL,Ee=null){return v.Util.intersect(this.clipBox,this.getPathBoundingBox(Pe,Ee))}}function B(Qe,Pe,Ee=null){if(typeof ImageData<"u"&&Pe instanceof ImageData){Qe.putImageData(Pe,0,0);return}const nt=Pe.height,st=Pe.width,rt=nt%V,tt=(nt-rt)/V,vt=rt===0?tt:tt+1,It=Qe.createImageData(st,V);let Vt=0,wt;const kt=Pe.data,Zt=It.data;let Qt,Z,z,K,ne,Ae,ut,Rt;if(Ee)switch(Ee.length){case 1:ne=Ee[0],Ae=Ee[0],ut=Ee[0],Rt=Ee[0];break;case 4:ne=Ee[0],Ae=Ee[1],ut=Ee[2],Rt=Ee[3];break}if(Pe.kind===v.ImageKind.GRAYSCALE_1BPP){const yt=kt.byteLength,lt=new Uint32Array(Zt.buffer,0,Zt.byteLength>>2),at=lt.length,ze=st+7>>3;let ct=4294967295,Ze=v.FeatureTest.isLittleEndian?4278190080:255;for(Rt&&Rt[0]===255&&Rt[255]===0&&([ct,Ze]=[Ze,ct]),Qt=0;Qt<vt;Qt++){for(z=Qt<tt?V:rt,wt=0,Z=0;Z<z;Z++){const Ot=yt-Vt;let Ht=0;const Xt=Ot>ze?st:Ot*8-7,ur=Xt&-8;let cr=0,A=0;for(;Ht<ur;Ht+=8)A=kt[Vt++],lt[wt++]=A&128?ct:Ze,lt[wt++]=A&64?ct:Ze,lt[wt++]=A&32?ct:Ze,lt[wt++]=A&16?ct:Ze,lt[wt++]=A&8?ct:Ze,lt[wt++]=A&4?ct:Ze,lt[wt++]=A&2?ct:Ze,lt[wt++]=A&1?ct:Ze;for(;Ht<Xt;Ht++)cr===0&&(A=kt[Vt++],cr=128),lt[wt++]=A&cr?ct:Ze,cr>>=1}for(;wt<at;)lt[wt++]=0;Qe.putImageData(It,0,Qt*V)}}else if(Pe.kind===v.ImageKind.RGBA_32BPP){const yt=!!(ne||Ae||ut);for(Z=0,K=st*V*4,Qt=0;Qt<tt;Qt++){if(Zt.set(kt.subarray(Vt,Vt+K)),Vt+=K,yt)for(let lt=0;lt<K;lt+=4)ne&&(Zt[lt+0]=ne[Zt[lt+0]]),Ae&&(Zt[lt+1]=Ae[Zt[lt+1]]),ut&&(Zt[lt+2]=ut[Zt[lt+2]]);Qe.putImageData(It,0,Z),Z+=V}if(Qt<vt){if(K=st*rt*4,Zt.set(kt.subarray(Vt,Vt+K)),yt)for(let lt=0;lt<K;lt+=4)ne&&(Zt[lt+0]=ne[Zt[lt+0]]),Ae&&(Zt[lt+1]=Ae[Zt[lt+1]]),ut&&(Zt[lt+2]=ut[Zt[lt+2]]);Qe.putImageData(It,0,Z)}}else if(Pe.kind===v.ImageKind.RGB_24BPP){const yt=!!(ne||Ae||ut);for(z=V,K=st*z,Qt=0;Qt<vt;Qt++){for(Qt>=tt&&(z=rt,K=st*z),wt=0,Z=K;Z--;)Zt[wt++]=kt[Vt++],Zt[wt++]=kt[Vt++],Zt[wt++]=kt[Vt++],Zt[wt++]=255;if(yt)for(let lt=0;lt<wt;lt+=4)ne&&(Zt[lt+0]=ne[Zt[lt+0]]),Ae&&(Zt[lt+1]=Ae[Zt[lt+1]]),ut&&(Zt[lt+2]=ut[Zt[lt+2]]);Qe.putImageData(It,0,Qt*V)}}else throw new Error(`bad image kind: ${Pe.kind}`)}function j(Qe,Pe){if(Pe.bitmap){Qe.drawImage(Pe.bitmap,0,0);return}const Ee=Pe.height,nt=Pe.width,st=Ee%V,rt=(Ee-st)/V,tt=st===0?rt:rt+1,vt=Qe.createImageData(nt,V);let It=0;const Vt=Pe.data,wt=vt.data;for(let kt=0;kt<tt;kt++){const Zt=kt<rt?V:st;({srcPos:It}=(0,E.applyMaskImageData)({src:Vt,srcPos:It,dest:wt,width:nt,height:Zt})),Qe.putImageData(vt,0,kt*V)}}function X(Qe,Pe){const Ee=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const nt of Ee)Qe[nt]!==void 0&&(Pe[nt]=Qe[nt]);Qe.setLineDash!==void 0&&(Pe.setLineDash(Qe.getLineDash()),Pe.lineDashOffset=Qe.lineDashOffset)}function oe(Qe,Pe){Qe.strokeStyle=Qe.fillStyle=Pe||"#000000",Qe.fillRule="nonzero",Qe.globalAlpha=1,Qe.lineWidth=1,Qe.lineCap="butt",Qe.lineJoin="miter",Qe.miterLimit=10,Qe.globalCompositeOperation="source-over",Qe.font="10px sans-serif",Qe.setLineDash!==void 0&&(Qe.setLineDash([]),Qe.lineDashOffset=0)}function be(Qe,Pe,Ee,nt){const st=Qe.length;for(let rt=3;rt<st;rt+=4){const tt=Qe[rt];if(tt===0)Qe[rt-3]=Pe,Qe[rt-2]=Ee,Qe[rt-1]=nt;else if(tt<255){const vt=255-tt;Qe[rt-3]=Qe[rt-3]*tt+Pe*vt>>8,Qe[rt-2]=Qe[rt-2]*tt+Ee*vt>>8,Qe[rt-1]=Qe[rt-1]*tt+nt*vt>>8}}}function ae(Qe,Pe,Ee){const nt=Qe.length,st=1/255;for(let rt=3;rt<nt;rt+=4){const tt=Ee?Ee[Qe[rt]]:Qe[rt];Pe[rt]=Pe[rt]*tt*st|0}}function ie(Qe,Pe,Ee){const nt=Qe.length;for(let st=3;st<nt;st+=4){const rt=Qe[st-3]*77+Qe[st-2]*152+Qe[st-1]*28;Pe[st]=Ee?Pe[st]*Ee[rt>>8]>>8:Pe[st]*rt>>16}}function Se(Qe,Pe,Ee,nt,st,rt,tt,vt,It,Vt,wt){const kt=!!rt,Zt=kt?rt[0]:0,Qt=kt?rt[1]:0,Z=kt?rt[2]:0;let z;st==="Luminosity"?z=ie:z=ae;const ne=Math.min(nt,Math.ceil(1048576/Ee));for(let Ae=0;Ae<nt;Ae+=ne){const ut=Math.min(ne,nt-Ae),Rt=Qe.getImageData(vt-Vt,Ae+(It-wt),Ee,ut),yt=Pe.getImageData(vt,Ae+It,Ee,ut);kt&&be(Rt.data,Zt,Qt,Z),z(Rt.data,yt.data,tt),Pe.putImageData(yt,vt,Ae+It)}}function mt(Qe,Pe,Ee,nt){const st=nt[0],rt=nt[1],tt=nt[2]-st,vt=nt[3]-rt;tt===0||vt===0||(Se(Pe.context,Ee,tt,vt,Pe.subtype,Pe.backdrop,Pe.transferMap,st,rt,Pe.offsetX,Pe.offsetY),Qe.save(),Qe.globalAlpha=1,Qe.globalCompositeOperation="source-over",Qe.setTransform(1,0,0,1,0,0),Qe.drawImage(Ee.canvas,0,0),Qe.restore())}function it(Qe,Pe){const Ee=v.Util.singularValueDecompose2dScale(Qe);Ee[0]=Math.fround(Ee[0]),Ee[1]=Math.fround(Ee[1]);const nt=Math.fround((globalThis.devicePixelRatio||1)*b.PixelsPerInch.PDF_TO_CSS_UNITS);return Pe!==void 0?Pe:Ee[0]<=nt||Ee[1]<=nt}const Tt=["butt","round","square"],ht=["miter","round","bevel"],Ye={},St={},jt=class{constructor(Pe,Ee,nt,st,{optionalContentConfig:rt,markedContentStack:tt=null},vt,It){er(this,Lt);this.ctx=Pe,this.current=new te(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Ee,this.objs=nt,this.canvasFactory=st,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=tt||[],this.optionalContentConfig=rt,this.cachedCanvases=new Y(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=vt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(It==null?void 0:It.background)||null,this.foregroundColor=(It==null?void 0:It.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Pe,Ee=null){return typeof Pe=="string"?Pe.startsWith("g_")?this.commonObjs.get(Pe):this.objs.get(Pe):Ee}beginDrawing({transform:Pe,viewport:Ee,transparency:nt=!1,background:st=null}){const rt=this.ctx.canvas.width,tt=this.ctx.canvas.height,vt=st||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const It=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const Vt=this.backgroundColor=this.ctx.fillStyle;let wt=!0,kt=vt;if(this.ctx.fillStyle=vt,kt=this.ctx.fillStyle,wt=typeof kt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(kt),It==="#000000"&&Vt==="#ffffff"||It===Vt||!wt)this.foregroundColor=this.backgroundColor=null;else{const[Zt,Qt,Z]=(0,b.getRGB)(kt),z=ne=>(ne/=255,ne<=.03928?ne/12.92:((ne+.055)/1.055)**2.4),K=Math.round(.2126*z(Zt)+.7152*z(Qt)+.0722*z(Z));this.selectColor=(ne,Ae,ut)=>{const Rt=.2126*z(ne)+.7152*z(Ae)+.0722*z(ut);return Math.round(Rt)===K?Vt:It}}}if(this.ctx.fillStyle=this.backgroundColor||vt,this.ctx.fillRect(0,0,rt,tt),this.ctx.restore(),nt){const It=this.cachedCanvases.getCanvas("transparent",rt,tt);this.compositeCtx=this.ctx,this.transparentCanvas=It.canvas,this.ctx=It.context,this.ctx.save(),this.ctx.transform(...(0,b.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),oe(this.ctx,this.foregroundColor),Pe&&(this.ctx.transform(...Pe),this.outputScaleX=Pe[0],this.outputScaleY=Pe[0]),this.ctx.transform(...Ee.transform),this.viewportScale=Ee.scale,this.baseTransform=(0,b.getCurrentTransform)(this.ctx)}executeOperatorList(Pe,Ee,nt,st){const rt=Pe.argsArray,tt=Pe.fnArray;let vt=Ee||0;const It=rt.length;if(It===vt)return vt;const Vt=It-vt>Q&&typeof nt=="function",wt=Vt?Date.now()+H:0;let kt=0;const Zt=this.commonObjs,Qt=this.objs;let Z;for(;;){if(st!==void 0&&vt===st.nextBreakPoint)return st.breakIt(vt,nt),vt;if(Z=tt[vt],Z!==v.OPS.dependency)this[Z].apply(this,rt[vt]);else for(const z of rt[vt]){const K=z.startsWith("g_")?Zt:Qt;if(!K.has(z))return K.get(z,nt),vt}if(vt++,vt===It)return vt;if(Vt&&++kt>Q){if(Date.now()>wt)return nt(),vt;kt=0}}}endDrawing(){ar(this,Lt,ya).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Pe of this._cachedBitmapsMap.values()){for(const Ee of Pe.values())typeof HTMLCanvasElement<"u"&&Ee instanceof HTMLCanvasElement&&(Ee.width=Ee.height=0);Pe.clear()}this._cachedBitmapsMap.clear()}_scaleImage(Pe,Ee){const nt=Pe.width,st=Pe.height;let rt=Math.max(Math.hypot(Ee[0],Ee[1]),1),tt=Math.max(Math.hypot(Ee[2],Ee[3]),1),vt=nt,It=st,Vt="prescale1",wt,kt;for(;rt>2&&vt>1||tt>2&&It>1;){let Zt=vt,Qt=It;rt>2&&vt>1&&(Zt=Math.ceil(vt/2),rt/=vt/Zt),tt>2&&It>1&&(Qt=Math.ceil(It/2),tt/=It/Qt),wt=this.cachedCanvases.getCanvas(Vt,Zt,Qt),kt=wt.context,kt.clearRect(0,0,Zt,Qt),kt.drawImage(Pe,0,0,vt,It,0,0,Zt,Qt),Pe=wt.canvas,vt=Zt,It=Qt,Vt=Vt==="prescale1"?"prescale2":"prescale1"}return{img:Pe,paintWidth:vt,paintHeight:It}}_createMaskCanvas(Pe){const Ee=this.ctx,{width:nt,height:st}=Pe,rt=this.current.fillColor,tt=this.current.patternFill,vt=(0,b.getCurrentTransform)(Ee);let It,Vt,wt,kt;if((Pe.bitmap||Pe.data)&&Pe.count>1){const at=Pe.bitmap||Pe.data.buffer;Vt=JSON.stringify(tt?vt:[vt.slice(0,4),rt]),It=this._cachedBitmapsMap.get(at),It||(It=new Map,this._cachedBitmapsMap.set(at,It));const ze=It.get(Vt);if(ze&&!tt){const ct=Math.round(Math.min(vt[0],vt[2])+vt[4]),Ze=Math.round(Math.min(vt[1],vt[3])+vt[5]);return{canvas:ze,offsetX:ct,offsetY:Ze}}wt=ze}wt||(kt=this.cachedCanvases.getCanvas("maskCanvas",nt,st),j(kt.context,Pe));let Zt=v.Util.transform(vt,[1/nt,0,0,-1/st,0,0]);Zt=v.Util.transform(Zt,[1,0,0,1,0,-st]);const Qt=v.Util.applyTransform([0,0],Zt),Z=v.Util.applyTransform([nt,st],Zt),z=v.Util.normalizeRect([Qt[0],Qt[1],Z[0],Z[1]]),K=Math.round(z[2]-z[0])||1,ne=Math.round(z[3]-z[1])||1,Ae=this.cachedCanvases.getCanvas("fillCanvas",K,ne),ut=Ae.context,Rt=Math.min(Qt[0],Z[0]),yt=Math.min(Qt[1],Z[1]);ut.translate(-Rt,-yt),ut.transform(...Zt),wt||(wt=this._scaleImage(kt.canvas,(0,b.getCurrentTransformInverse)(ut)),wt=wt.img,It&&tt&&It.set(Vt,wt)),ut.imageSmoothingEnabled=it((0,b.getCurrentTransform)(ut),Pe.interpolate),U(ut,wt,0,0,wt.width,wt.height,0,0,nt,st),ut.globalCompositeOperation="source-in";const lt=v.Util.transform((0,b.getCurrentTransformInverse)(ut),[1,0,0,1,-Rt,-yt]);return ut.fillStyle=tt?rt.getPattern(Ee,this,lt,_.PathType.FILL):rt,ut.fillRect(0,0,nt,st),It&&!tt&&(this.cachedCanvases.delete("fillCanvas"),It.set(Vt,Ae.canvas)),{canvas:Ae.canvas,offsetX:Math.round(Rt),offsetY:Math.round(yt)}}setLineWidth(Pe){Pe!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=Pe,this.ctx.lineWidth=Pe}setLineCap(Pe){this.ctx.lineCap=Tt[Pe]}setLineJoin(Pe){this.ctx.lineJoin=ht[Pe]}setMiterLimit(Pe){this.ctx.miterLimit=Pe}setDash(Pe,Ee){const nt=this.ctx;nt.setLineDash!==void 0&&(nt.setLineDash(Pe),nt.lineDashOffset=Ee)}setRenderingIntent(Pe){}setFlatness(Pe){}setGState(Pe){for(const[Ee,nt]of Pe)switch(Ee){case"LW":this.setLineWidth(nt);break;case"LC":this.setLineCap(nt);break;case"LJ":this.setLineJoin(nt);break;case"ML":this.setMiterLimit(nt);break;case"D":this.setDash(nt[0],nt[1]);break;case"RI":this.setRenderingIntent(nt);break;case"FL":this.setFlatness(nt);break;case"Font":this.setFont(nt[0],nt[1]);break;case"CA":this.current.strokeAlpha=nt;break;case"ca":this.current.fillAlpha=nt,this.ctx.globalAlpha=nt;break;case"BM":this.ctx.globalCompositeOperation=nt;break;case"SMask":this.current.activeSMask=nt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=nt}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Pe=this.inSMaskMode;this.current.activeSMask&&!Pe?this.beginSMaskMode():!this.current.activeSMask&&Pe&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Pe=this.ctx.canvas.width,Ee=this.ctx.canvas.height,nt="smaskGroupAt"+this.groupLevel,st=this.cachedCanvases.getCanvas(nt,Pe,Ee);this.suspendedCtx=this.ctx,this.ctx=st.context;const rt=this.ctx;rt.setTransform(...(0,b.getCurrentTransform)(this.suspendedCtx)),X(this.suspendedCtx,rt),W(rt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),X(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Pe){if(!this.current.activeSMask)return;Pe?(Pe[0]=Math.floor(Pe[0]),Pe[1]=Math.floor(Pe[1]),Pe[2]=Math.ceil(Pe[2]),Pe[3]=Math.ceil(Pe[3])):Pe=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Ee=this.current.activeSMask,nt=this.suspendedCtx;mt(nt,Ee,this.ctx,Pe),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(X(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Pe=this.current;this.stateStack.push(Pe),this.current=Pe.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),X(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(Pe,Ee,nt,st,rt,tt){this.ctx.transform(Pe,Ee,nt,st,rt,tt),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(Pe,Ee,nt){const st=this.ctx,rt=this.current;let tt=rt.x,vt=rt.y,It,Vt;const wt=(0,b.getCurrentTransform)(st),kt=wt[0]===0&&wt[3]===0||wt[1]===0&&wt[2]===0,Zt=kt?nt.slice(0):null;for(let Qt=0,Z=0,z=Pe.length;Qt<z;Qt++)switch(Pe[Qt]|0){case v.OPS.rectangle:tt=Ee[Z++],vt=Ee[Z++];const K=Ee[Z++],ne=Ee[Z++],Ae=tt+K,ut=vt+ne;st.moveTo(tt,vt),K===0||ne===0?st.lineTo(Ae,ut):(st.lineTo(Ae,vt),st.lineTo(Ae,ut),st.lineTo(tt,ut)),kt||rt.updateRectMinMax(wt,[tt,vt,Ae,ut]),st.closePath();break;case v.OPS.moveTo:tt=Ee[Z++],vt=Ee[Z++],st.moveTo(tt,vt),kt||rt.updatePathMinMax(wt,tt,vt);break;case v.OPS.lineTo:tt=Ee[Z++],vt=Ee[Z++],st.lineTo(tt,vt),kt||rt.updatePathMinMax(wt,tt,vt);break;case v.OPS.curveTo:It=tt,Vt=vt,tt=Ee[Z+4],vt=Ee[Z+5],st.bezierCurveTo(Ee[Z],Ee[Z+1],Ee[Z+2],Ee[Z+3],tt,vt),rt.updateCurvePathMinMax(wt,It,Vt,Ee[Z],Ee[Z+1],Ee[Z+2],Ee[Z+3],tt,vt,Zt),Z+=6;break;case v.OPS.curveTo2:It=tt,Vt=vt,st.bezierCurveTo(tt,vt,Ee[Z],Ee[Z+1],Ee[Z+2],Ee[Z+3]),rt.updateCurvePathMinMax(wt,It,Vt,tt,vt,Ee[Z],Ee[Z+1],Ee[Z+2],Ee[Z+3],Zt),tt=Ee[Z+2],vt=Ee[Z+3],Z+=4;break;case v.OPS.curveTo3:It=tt,Vt=vt,tt=Ee[Z+2],vt=Ee[Z+3],st.bezierCurveTo(Ee[Z],Ee[Z+1],tt,vt,tt,vt),rt.updateCurvePathMinMax(wt,It,Vt,Ee[Z],Ee[Z+1],tt,vt,tt,vt,Zt),Z+=4;break;case v.OPS.closePath:st.closePath();break}kt&&rt.updateScalingPathMinMax(wt,Zt),rt.setCurrentPoint(tt,vt)}closePath(){this.ctx.closePath()}stroke(Pe){Pe=typeof Pe<"u"?Pe:!0;const Ee=this.ctx,nt=this.current.strokeColor;Ee.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof nt=="object"&&(nt==null?void 0:nt.getPattern)?(Ee.save(),Ee.strokeStyle=nt.getPattern(Ee,this,(0,b.getCurrentTransformInverse)(Ee),_.PathType.STROKE),this.rescaleAndStroke(!1),Ee.restore()):this.rescaleAndStroke(!0)),Pe&&this.consumePath(this.current.getClippedPathBoundingBox()),Ee.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Pe){Pe=typeof Pe<"u"?Pe:!0;const Ee=this.ctx,nt=this.current.fillColor,st=this.current.patternFill;let rt=!1;st&&(Ee.save(),Ee.fillStyle=nt.getPattern(Ee,this,(0,b.getCurrentTransformInverse)(Ee),_.PathType.FILL),rt=!0);const tt=this.current.getClippedPathBoundingBox();this.contentVisible&&tt!==null&&(this.pendingEOFill?(Ee.fill("evenodd"),this.pendingEOFill=!1):Ee.fill()),rt&&Ee.restore(),Pe&&this.consumePath(tt)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Ye}eoClip(){this.pendingClip=St}beginText(){this.current.textMatrix=v.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Pe=this.pendingTextPaths,Ee=this.ctx;if(Pe===void 0){Ee.beginPath();return}Ee.save(),Ee.beginPath();for(const nt of Pe)Ee.setTransform(...nt.transform),Ee.translate(nt.x,nt.y),nt.addToPath(Ee,nt.fontSize);Ee.restore(),Ee.clip(),Ee.beginPath(),delete this.pendingTextPaths}setCharSpacing(Pe){this.current.charSpacing=Pe}setWordSpacing(Pe){this.current.wordSpacing=Pe}setHScale(Pe){this.current.textHScale=Pe/100}setLeading(Pe){this.current.leading=-Pe}setFont(Pe,Ee){const nt=this.commonObjs.get(Pe),st=this.current;if(!nt)throw new Error(`Can't find font for ${Pe}`);if(st.fontMatrix=nt.fontMatrix||v.FONT_IDENTITY_MATRIX,(st.fontMatrix[0]===0||st.fontMatrix[3]===0)&&(0,v.warn)("Invalid font matrix for font "+Pe),Ee<0?(Ee=-Ee,st.fontDirection=-1):st.fontDirection=1,this.current.font=nt,this.current.fontSize=Ee,nt.isType3Font)return;const rt=nt.loadedName||"sans-serif";let tt="normal";nt.black?tt="900":nt.bold&&(tt="bold");const vt=nt.italic?"italic":"normal",It=`"${rt}", ${nt.fallbackName}`;let Vt=Ee;Ee<M?Vt=M:Ee>P&&(Vt=P),this.current.fontSizeScale=Ee/Vt,this.ctx.font=`${vt} ${tt} ${Vt}px ${It}`}setTextRenderingMode(Pe){this.current.textRenderingMode=Pe}setTextRise(Pe){this.current.textRise=Pe}moveText(Pe,Ee){this.current.x=this.current.lineX+=Pe,this.current.y=this.current.lineY+=Ee}setLeadingMoveText(Pe,Ee){this.setLeading(-Ee),this.moveText(Pe,Ee)}setTextMatrix(Pe,Ee,nt,st,rt,tt){this.current.textMatrix=[Pe,Ee,nt,st,rt,tt],this.current.textMatrixScale=Math.hypot(Pe,Ee),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Pe,Ee,nt,st){const rt=this.ctx,tt=this.current,vt=tt.font,It=tt.textRenderingMode,Vt=tt.fontSize/tt.fontSizeScale,wt=It&v.TextRenderingMode.FILL_STROKE_MASK,kt=!!(It&v.TextRenderingMode.ADD_TO_PATH_FLAG),Zt=tt.patternFill&&!vt.missingFile;let Qt;(vt.disableFontFace||kt||Zt)&&(Qt=vt.getPathGenerator(this.commonObjs,Pe)),vt.disableFontFace||Zt?(rt.save(),rt.translate(Ee,nt),rt.beginPath(),Qt(rt,Vt),st&&rt.setTransform(...st),(wt===v.TextRenderingMode.FILL||wt===v.TextRenderingMode.FILL_STROKE)&&rt.fill(),(wt===v.TextRenderingMode.STROKE||wt===v.TextRenderingMode.FILL_STROKE)&&rt.stroke(),rt.restore()):((wt===v.TextRenderingMode.FILL||wt===v.TextRenderingMode.FILL_STROKE)&&rt.fillText(Pe,Ee,nt),(wt===v.TextRenderingMode.STROKE||wt===v.TextRenderingMode.FILL_STROKE)&&rt.strokeText(Pe,Ee,nt)),kt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,b.getCurrentTransform)(rt),x:Ee,y:nt,fontSize:Vt,addToPath:Qt})}get isFontSubpixelAAEnabled(){const{context:Pe}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Pe.scale(1.5,1),Pe.fillText("I",0,10);const Ee=Pe.getImageData(0,0,10,10).data;let nt=!1;for(let st=3;st<Ee.length;st+=4)if(Ee[st]>0&&Ee[st]<255){nt=!0;break}return(0,v.shadow)(this,"isFontSubpixelAAEnabled",nt)}showText(Pe){const Ee=this.current,nt=Ee.font;if(nt.isType3Font)return this.showType3Text(Pe);const st=Ee.fontSize;if(st===0)return;const rt=this.ctx,tt=Ee.fontSizeScale,vt=Ee.charSpacing,It=Ee.wordSpacing,Vt=Ee.fontDirection,wt=Ee.textHScale*Vt,kt=Pe.length,Zt=nt.vertical,Qt=Zt?1:-1,Z=nt.defaultVMetrics,z=st*Ee.fontMatrix[0],K=Ee.textRenderingMode===v.TextRenderingMode.FILL&&!nt.disableFontFace&&!Ee.patternFill;rt.save(),rt.transform(...Ee.textMatrix),rt.translate(Ee.x,Ee.y+Ee.textRise),Vt>0?rt.scale(wt,-1):rt.scale(wt,1);let ne;if(Ee.patternFill){rt.save();const lt=Ee.fillColor.getPattern(rt,this,(0,b.getCurrentTransformInverse)(rt),_.PathType.FILL);ne=(0,b.getCurrentTransform)(rt),rt.restore(),rt.fillStyle=lt}let Ae=Ee.lineWidth;const ut=Ee.textMatrixScale;if(ut===0||Ae===0){const lt=Ee.textRenderingMode&v.TextRenderingMode.FILL_STROKE_MASK;(lt===v.TextRenderingMode.STROKE||lt===v.TextRenderingMode.FILL_STROKE)&&(Ae=this.getSinglePixelWidth())}else Ae/=ut;if(tt!==1&&(rt.scale(tt,tt),Ae/=tt),rt.lineWidth=Ae,nt.isInvalidPDFjsFont){const lt=[];let at=0;for(const ze of Pe)lt.push(ze.unicode),at+=ze.width;rt.fillText(lt.join(""),0,0),Ee.x+=at*z*wt,rt.restore(),this.compose();return}let Rt=0,yt;for(yt=0;yt<kt;++yt){const lt=Pe[yt];if(typeof lt=="number"){Rt+=Qt*lt*st/1e3;continue}let at=!1;const ze=(lt.isSpace?It:0)+vt,ct=lt.fontChar,Ze=lt.accent;let Ot,Ht,Xt=lt.width;if(Zt){const cr=lt.vmetric||Z,A=-(lt.vmetric?cr[1]:Xt*.5)*z,re=cr[2]*z;Xt=cr?-cr[0]:Xt,Ot=A/tt,Ht=(Rt+re)/tt}else Ot=Rt/tt,Ht=0;if(nt.remeasure&&Xt>0){const cr=rt.measureText(ct).width*1e3/st*tt;if(Xt<cr&&this.isFontSubpixelAAEnabled){const A=Xt/cr;at=!0,rt.save(),rt.scale(A,1),Ot/=A}else Xt!==cr&&(Ot+=(Xt-cr)/2e3*st/tt)}if(this.contentVisible&&(lt.isInFont||nt.missingFile)){if(K&&!Ze)rt.fillText(ct,Ot,Ht);else if(this.paintChar(ct,Ot,Ht,ne),Ze){const cr=Ot+st*Ze.offset.x/tt,A=Ht-st*Ze.offset.y/tt;this.paintChar(Ze.fontChar,cr,A,ne)}}let ur;Zt?ur=Xt*z-ze*Vt:ur=Xt*z+ze*Vt,Rt+=ur,at&&rt.restore()}Zt?Ee.y-=Rt:Ee.x+=Rt*wt,rt.restore(),this.compose()}showType3Text(Pe){const Ee=this.ctx,nt=this.current,st=nt.font,rt=nt.fontSize,tt=nt.fontDirection,vt=st.vertical?1:-1,It=nt.charSpacing,Vt=nt.wordSpacing,wt=nt.textHScale*tt,kt=nt.fontMatrix||v.FONT_IDENTITY_MATRIX,Zt=Pe.length,Qt=nt.textRenderingMode===v.TextRenderingMode.INVISIBLE;let Z,z,K,ne;if(!(Qt||rt===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,Ee.save(),Ee.transform(...nt.textMatrix),Ee.translate(nt.x,nt.y),Ee.scale(wt,tt),Z=0;Z<Zt;++Z){if(z=Pe[Z],typeof z=="number"){ne=vt*z*rt/1e3,this.ctx.translate(ne,0),nt.x+=ne*wt;continue}const Ae=(z.isSpace?Vt:0)+It,ut=st.charProcOperatorList[z.operatorListId];if(!ut){(0,v.warn)(`Type3 character "${z.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=z,this.save(),Ee.scale(rt,rt),Ee.transform(...kt),this.executeOperatorList(ut),this.restore()),K=v.Util.applyTransform([z.width,0],kt)[0]*rt+Ae,Ee.translate(K,0),nt.x+=K*wt}Ee.restore(),this.processingType3=null}}setCharWidth(Pe,Ee){}setCharWidthAndBounds(Pe,Ee,nt,st,rt,tt){this.ctx.rect(nt,st,rt-nt,tt-st),this.ctx.clip(),this.endPath()}getColorN_Pattern(Pe){let Ee;if(Pe[0]==="TilingPattern"){const nt=Pe[1],st=this.baseTransform||(0,b.getCurrentTransform)(this.ctx),rt={createCanvasGraphics:tt=>new jt(tt,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Ee=new _.TilingPattern(Pe,nt,this.ctx,rt,st)}else Ee=this._getPattern(Pe[1],Pe[2]);return Ee}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Pe,Ee,nt){var rt;const st=((rt=this.selectColor)==null?void 0:rt.call(this,Pe,Ee,nt))||v.Util.makeHexColor(Pe,Ee,nt);this.ctx.strokeStyle=st,this.current.strokeColor=st}setFillRGBColor(Pe,Ee,nt){var rt;const st=((rt=this.selectColor)==null?void 0:rt.call(this,Pe,Ee,nt))||v.Util.makeHexColor(Pe,Ee,nt);this.ctx.fillStyle=st,this.current.fillColor=st,this.current.patternFill=!1}_getPattern(Pe,Ee=null){let nt;return this.cachedPatterns.has(Pe)?nt=this.cachedPatterns.get(Pe):(nt=(0,_.getShadingPattern)(this.objs.get(Pe)),this.cachedPatterns.set(Pe,nt)),Ee&&(nt.matrix=Ee),nt}shadingFill(Pe){if(!this.contentVisible)return;const Ee=this.ctx;this.save();const nt=this._getPattern(Pe);Ee.fillStyle=nt.getPattern(Ee,this,(0,b.getCurrentTransformInverse)(Ee),_.PathType.SHADING);const st=(0,b.getCurrentTransformInverse)(Ee);if(st){const rt=Ee.canvas,tt=rt.width,vt=rt.height,It=v.Util.applyTransform([0,0],st),Vt=v.Util.applyTransform([0,vt],st),wt=v.Util.applyTransform([tt,0],st),kt=v.Util.applyTransform([tt,vt],st),Zt=Math.min(It[0],Vt[0],wt[0],kt[0]),Qt=Math.min(It[1],Vt[1],wt[1],kt[1]),Z=Math.max(It[0],Vt[0],wt[0],kt[0]),z=Math.max(It[1],Vt[1],wt[1],kt[1]);this.ctx.fillRect(Zt,Qt,Z-Zt,z-Qt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,v.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,v.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Pe,Ee){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Pe)&&Pe.length===6&&this.transform(...Pe),this.baseTransform=(0,b.getCurrentTransform)(this.ctx),Ee)){const nt=Ee[2]-Ee[0],st=Ee[3]-Ee[1];this.ctx.rect(Ee[0],Ee[1],nt,st),this.current.updateRectMinMax((0,b.getCurrentTransform)(this.ctx),Ee),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Pe){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Ee=this.ctx;Pe.isolated||(0,v.info)("TODO: Support non-isolated groups."),Pe.knockout&&(0,v.warn)("Knockout groups not supported.");const nt=(0,b.getCurrentTransform)(Ee);if(Pe.matrix&&Ee.transform(...Pe.matrix),!Pe.bbox)throw new Error("Bounding box is required.");let st=v.Util.getAxialAlignedBoundingBox(Pe.bbox,(0,b.getCurrentTransform)(Ee));const rt=[0,0,Ee.canvas.width,Ee.canvas.height];st=v.Util.intersect(st,rt)||[0,0,0,0];const tt=Math.floor(st[0]),vt=Math.floor(st[1]);let It=Math.max(Math.ceil(st[2])-tt,1),Vt=Math.max(Math.ceil(st[3])-vt,1),wt=1,kt=1;It>O&&(wt=It/O,It=O),Vt>O&&(kt=Vt/O,Vt=O),this.current.startNewPathAndClipBox([0,0,It,Vt]);let Zt="groupAt"+this.groupLevel;Pe.smask&&(Zt+="_smask_"+this.smaskCounter++%2);const Qt=this.cachedCanvases.getCanvas(Zt,It,Vt),Z=Qt.context;Z.scale(1/wt,1/kt),Z.translate(-tt,-vt),Z.transform(...nt),Pe.smask?this.smaskStack.push({canvas:Qt.canvas,context:Z,offsetX:tt,offsetY:vt,scaleX:wt,scaleY:kt,subtype:Pe.smask.subtype,backdrop:Pe.smask.backdrop,transferMap:Pe.smask.transferMap||null,startTransformInverse:null}):(Ee.setTransform(1,0,0,1,0,0),Ee.translate(tt,vt),Ee.scale(wt,kt),Ee.save()),X(Ee,Z),this.ctx=Z,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Ee),this.groupLevel++}endGroup(Pe){if(!this.contentVisible)return;this.groupLevel--;const Ee=this.ctx,nt=this.groupStack.pop();if(this.ctx=nt,this.ctx.imageSmoothingEnabled=!1,Pe.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const st=(0,b.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...st);const rt=v.Util.getAxialAlignedBoundingBox([0,0,Ee.canvas.width,Ee.canvas.height],st);this.ctx.drawImage(Ee.canvas,0,0),this.ctx.restore(),this.compose(rt)}}beginAnnotation(Pe,Ee,nt,st,rt){if(ar(this,Lt,ya).call(this),oe(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Ee)&&Ee.length===4){const tt=Ee[2]-Ee[0],vt=Ee[3]-Ee[1];if(rt&&this.annotationCanvasMap){nt=nt.slice(),nt[4]-=Ee[0],nt[5]-=Ee[1],Ee=Ee.slice(),Ee[0]=Ee[1]=0,Ee[2]=tt,Ee[3]=vt;const[It,Vt]=v.Util.singularValueDecompose2dScale((0,b.getCurrentTransform)(this.ctx)),{viewportScale:wt}=this,kt=Math.ceil(tt*this.outputScaleX*wt),Zt=Math.ceil(vt*this.outputScaleY*wt);this.annotationCanvas=this.canvasFactory.create(kt,Zt);const{canvas:Qt,context:Z}=this.annotationCanvas;this.annotationCanvasMap.set(Pe,Qt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Z,this.ctx.setTransform(It,0,0,-Vt,0,vt*Vt),oe(this.ctx,this.foregroundColor)}else oe(this.ctx,this.foregroundColor),this.ctx.rect(Ee[0],Ee[1],tt,vt),this.ctx.clip(),this.endPath()}this.current=new te(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...nt),this.transform(...st)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Pe){if(!this.contentVisible)return;const Ee=Pe.count;Pe=this.getObject(Pe.data,Pe),Pe.count=Ee;const nt=this.ctx,st=this.processingType3;if(st&&(st.compiled===void 0&&(st.compiled=G(Pe)),st.compiled)){st.compiled(nt);return}const rt=this._createMaskCanvas(Pe),tt=rt.canvas;nt.save(),nt.setTransform(1,0,0,1,0,0),nt.drawImage(tt,rt.offsetX,rt.offsetY),nt.restore(),this.compose()}paintImageMaskXObjectRepeat(Pe,Ee,nt=0,st=0,rt,tt){if(!this.contentVisible)return;Pe=this.getObject(Pe.data,Pe);const vt=this.ctx;vt.save();const It=(0,b.getCurrentTransform)(vt);vt.transform(Ee,nt,st,rt,0,0);const Vt=this._createMaskCanvas(Pe);vt.setTransform(1,0,0,1,Vt.offsetX-It[4],Vt.offsetY-It[5]);for(let wt=0,kt=tt.length;wt<kt;wt+=2){const Zt=v.Util.transform(It,[Ee,nt,st,rt,tt[wt],tt[wt+1]]),[Qt,Z]=v.Util.applyTransform([0,0],Zt);vt.drawImage(Vt.canvas,Qt,Z)}vt.restore(),this.compose()}paintImageMaskXObjectGroup(Pe){if(!this.contentVisible)return;const Ee=this.ctx,nt=this.current.fillColor,st=this.current.patternFill;for(const rt of Pe){const{data:tt,width:vt,height:It,transform:Vt}=rt,wt=this.cachedCanvases.getCanvas("maskCanvas",vt,It),kt=wt.context;kt.save();const Zt=this.getObject(tt,rt);j(kt,Zt),kt.globalCompositeOperation="source-in",kt.fillStyle=st?nt.getPattern(kt,this,(0,b.getCurrentTransformInverse)(Ee),_.PathType.FILL):nt,kt.fillRect(0,0,vt,It),kt.restore(),Ee.save(),Ee.transform(...Vt),Ee.scale(1,-1),U(Ee,wt.canvas,0,0,vt,It,0,-1,1,1),Ee.restore()}this.compose()}paintImageXObject(Pe){if(!this.contentVisible)return;const Ee=this.getObject(Pe);if(!Ee){(0,v.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Ee)}paintImageXObjectRepeat(Pe,Ee,nt,st){if(!this.contentVisible)return;const rt=this.getObject(Pe);if(!rt){(0,v.warn)("Dependent image isn't ready yet");return}const tt=rt.width,vt=rt.height,It=[];for(let Vt=0,wt=st.length;Vt<wt;Vt+=2)It.push({transform:[Ee,0,0,nt,st[Vt],st[Vt+1]],x:0,y:0,w:tt,h:vt});this.paintInlineImageXObjectGroup(rt,It)}paintInlineImageXObject(Pe){if(!this.contentVisible)return;const Ee=Pe.width,nt=Pe.height,st=this.ctx;this.save(),st.scale(1/Ee,-1/nt);let rt;if(typeof HTMLElement=="function"&&Pe instanceof HTMLElement||!Pe.data)rt=Pe;else{const vt=this.cachedCanvases.getCanvas("inlineImage",Ee,nt),It=vt.context;B(It,Pe,this.current.transferMaps),rt=vt.canvas}const tt=this._scaleImage(rt,(0,b.getCurrentTransformInverse)(st));st.imageSmoothingEnabled=it((0,b.getCurrentTransform)(st),Pe.interpolate),U(st,tt.img,0,0,tt.paintWidth,tt.paintHeight,0,-nt,Ee,nt),this.compose(),this.restore()}paintInlineImageXObjectGroup(Pe,Ee){if(!this.contentVisible)return;const nt=this.ctx,st=Pe.width,rt=Pe.height,tt=this.cachedCanvases.getCanvas("inlineImage",st,rt),vt=tt.context;B(vt,Pe,this.current.transferMaps);for(const It of Ee)nt.save(),nt.transform(...It.transform),nt.scale(1,-1),U(nt,tt.canvas,It.x,It.y,It.w,It.h,0,-1,1,1),nt.restore();this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Pe){}markPointProps(Pe,Ee){}beginMarkedContent(Pe){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Pe,Ee){Pe==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Ee)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Pe){const Ee=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Pe);const nt=this.ctx;this.pendingClip&&(Ee||(this.pendingClip===St?nt.clip("evenodd"):nt.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),nt.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Pe=(0,b.getCurrentTransform)(this.ctx);if(Pe[1]===0&&Pe[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Pe[0]),Math.abs(Pe[3]));else{const Ee=Math.abs(Pe[0]*Pe[3]-Pe[2]*Pe[1]),nt=Math.hypot(Pe[0],Pe[2]),st=Math.hypot(Pe[1],Pe[3]);this._cachedGetSinglePixelWidth=Math.max(nt,st)/Ee}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:Pe}=this.current,Ee=(0,b.getCurrentTransform)(this.ctx);let nt,st;if(Ee[1]===0&&Ee[2]===0){const rt=Math.abs(Ee[0]),tt=Math.abs(Ee[3]);if(Pe===0)nt=1/rt,st=1/tt;else{const vt=rt*Pe,It=tt*Pe;nt=vt<1?1/vt:1,st=It<1?1/It:1}}else{const rt=Math.abs(Ee[0]*Ee[3]-Ee[2]*Ee[1]),tt=Math.hypot(Ee[0],Ee[1]),vt=Math.hypot(Ee[2],Ee[3]);if(Pe===0)nt=vt/rt,st=tt/rt;else{const It=Pe*rt;nt=vt>It?vt/It:1,st=tt>It?tt/It:1}}this._cachedScaleForStroking=[nt,st]}return this._cachedScaleForStroking}rescaleAndStroke(Pe){const{ctx:Ee}=this,{lineWidth:nt}=this.current,[st,rt]=this.getScaleForStroking();if(Ee.lineWidth=nt||1,st===1&&rt===1){Ee.stroke();return}let tt,vt,It;Pe&&(tt=(0,b.getCurrentTransform)(Ee),vt=Ee.getLineDash().slice(),It=Ee.lineDashOffset),Ee.scale(st,rt);const Vt=Math.max(st,rt);Ee.setLineDash(Ee.getLineDash().map(wt=>wt/Vt)),Ee.lineDashOffset/=Vt,Ee.stroke(),Pe&&(Ee.setTransform(...tt),Ee.setLineDash(vt),Ee.lineDashOffset=It)}isContentVisible(){for(let Pe=this.markedContentStack.length-1;Pe>=0;Pe--)if(!this.markedContentStack[Pe].visible)return!1;return!0}};let $t=jt;Lt=new WeakSet,ya=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},d.CanvasGraphics=$t;for(const Qe in v.OPS)$t.prototype[Qe]!==void 0&&($t.prototype[v.OPS[Qe]]=$t.prototype[Qe])},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TilingPattern=d.PathType=void 0,d.getShadingPattern=V;var v=g(1),b=g(6),_=g(12);const E={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};d.PathType=E;function R(U,G){if(!G||_.isNodeJS)return;const te=G[2]-G[0],B=G[3]-G[1],j=new Path2D;j.rect(G[0],G[1],te,B),U.clip(j)}class M{constructor(){this.constructor===M&&(0,v.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,v.unreachable)("Abstract method `getPattern` called.")}}class P extends M{constructor(G){super(),this._type=G[1],this._bbox=G[2],this._colorStops=G[3],this._p0=G[4],this._p1=G[5],this._r0=G[6],this._r1=G[7],this.matrix=null}_createGradient(G){let te;this._type==="axial"?te=G.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(te=G.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const B of this._colorStops)te.addColorStop(B[0],B[1]);return te}getPattern(G,te,B,j){let X;if(j===E.STROKE||j===E.FILL){const oe=te.current.getClippedPathBoundingBox(j,(0,b.getCurrentTransform)(G))||[0,0,0,0],be=Math.ceil(oe[2]-oe[0])||1,ae=Math.ceil(oe[3]-oe[1])||1,ie=te.cachedCanvases.getCanvas("pattern",be,ae,!0),Se=ie.context;Se.clearRect(0,0,Se.canvas.width,Se.canvas.height),Se.beginPath(),Se.rect(0,0,Se.canvas.width,Se.canvas.height),Se.translate(-oe[0],-oe[1]),B=v.Util.transform(B,[1,0,0,1,oe[0],oe[1]]),Se.transform(...te.baseTransform),this.matrix&&Se.transform(...this.matrix),R(Se,this._bbox),Se.fillStyle=this._createGradient(Se),Se.fill(),X=G.createPattern(ie.canvas,"no-repeat");const mt=new DOMMatrix(B);X.setTransform(mt)}else R(G,this._bbox),X=this._createGradient(G);return X}}function O(U,G,te,B,j,X,oe,be){const ae=G.coords,ie=G.colors,Se=U.data,mt=U.width*4;let it;ae[te+1]>ae[B+1]&&(it=te,te=B,B=it,it=X,X=oe,oe=it),ae[B+1]>ae[j+1]&&(it=B,B=j,j=it,it=oe,oe=be,be=it),ae[te+1]>ae[B+1]&&(it=te,te=B,B=it,it=X,X=oe,oe=it);const Tt=(ae[te]+G.offsetX)*G.scaleX,ht=(ae[te+1]+G.offsetY)*G.scaleY,Ye=(ae[B]+G.offsetX)*G.scaleX,St=(ae[B+1]+G.offsetY)*G.scaleY,$t=(ae[j]+G.offsetX)*G.scaleX,Lt=(ae[j+1]+G.offsetY)*G.scaleY;if(ht>=Lt)return;const Mt=ie[X],jt=ie[X+1],Qe=ie[X+2],Pe=ie[oe],Ee=ie[oe+1],nt=ie[oe+2],st=ie[be],rt=ie[be+1],tt=ie[be+2],vt=Math.round(ht),It=Math.round(Lt);let Vt,wt,kt,Zt,Qt,Z,z,K;for(let ne=vt;ne<=It;ne++){if(ne<St){let lt;ne<ht?lt=0:lt=(ht-ne)/(ht-St),Vt=Tt-(Tt-Ye)*lt,wt=Mt-(Mt-Pe)*lt,kt=jt-(jt-Ee)*lt,Zt=Qe-(Qe-nt)*lt}else{let lt;ne>Lt?lt=1:St===Lt?lt=0:lt=(St-ne)/(St-Lt),Vt=Ye-(Ye-$t)*lt,wt=Pe-(Pe-st)*lt,kt=Ee-(Ee-rt)*lt,Zt=nt-(nt-tt)*lt}let Ae;ne<ht?Ae=0:ne>Lt?Ae=1:Ae=(ht-ne)/(ht-Lt),Qt=Tt-(Tt-$t)*Ae,Z=Mt-(Mt-st)*Ae,z=jt-(jt-rt)*Ae,K=Qe-(Qe-tt)*Ae;const ut=Math.round(Math.min(Vt,Qt)),Rt=Math.round(Math.max(Vt,Qt));let yt=mt*ne+ut*4;for(let lt=ut;lt<=Rt;lt++)Ae=(Vt-lt)/(Vt-Qt),Ae<0?Ae=0:Ae>1&&(Ae=1),Se[yt++]=wt-(wt-Z)*Ae|0,Se[yt++]=kt-(kt-z)*Ae|0,Se[yt++]=Zt-(Zt-K)*Ae|0,Se[yt++]=255}}function H(U,G,te){const B=G.coords,j=G.colors;let X,oe;switch(G.type){case"lattice":const be=G.verticesPerRow,ae=Math.floor(B.length/be)-1,ie=be-1;for(X=0;X<ae;X++){let Se=X*be;for(let mt=0;mt<ie;mt++,Se++)O(U,te,B[Se],B[Se+1],B[Se+be],j[Se],j[Se+1],j[Se+be]),O(U,te,B[Se+be+1],B[Se+1],B[Se+be],j[Se+be+1],j[Se+1],j[Se+be])}break;case"triangles":for(X=0,oe=B.length;X<oe;X+=3)O(U,te,B[X],B[X+1],B[X+2],j[X],j[X+1],j[X+2]);break;default:throw new Error("illegal figure")}}class Q extends M{constructor(G){super(),this._coords=G[2],this._colors=G[3],this._figures=G[4],this._bounds=G[5],this._bbox=G[7],this._background=G[8],this.matrix=null}_createMeshCanvas(G,te,B){const be=Math.floor(this._bounds[0]),ae=Math.floor(this._bounds[1]),ie=Math.ceil(this._bounds[2])-be,Se=Math.ceil(this._bounds[3])-ae,mt=Math.min(Math.ceil(Math.abs(ie*G[0]*1.1)),3e3),it=Math.min(Math.ceil(Math.abs(Se*G[1]*1.1)),3e3),Tt=ie/mt,ht=Se/it,Ye={coords:this._coords,colors:this._colors,offsetX:-be,offsetY:-ae,scaleX:1/Tt,scaleY:1/ht},St=mt+2*2,$t=it+2*2,Lt=B.getCanvas("mesh",St,$t,!1),Mt=Lt.context,jt=Mt.createImageData(mt,it);if(te){const Pe=jt.data;for(let Ee=0,nt=Pe.length;Ee<nt;Ee+=4)Pe[Ee]=te[0],Pe[Ee+1]=te[1],Pe[Ee+2]=te[2],Pe[Ee+3]=255}for(const Pe of this._figures)H(jt,Pe,Ye);return Mt.putImageData(jt,2,2),{canvas:Lt.canvas,offsetX:be-2*Tt,offsetY:ae-2*ht,scaleX:Tt,scaleY:ht}}getPattern(G,te,B,j){R(G,this._bbox);let X;if(j===E.SHADING)X=v.Util.singularValueDecompose2dScale((0,b.getCurrentTransform)(G));else if(X=v.Util.singularValueDecompose2dScale(te.baseTransform),this.matrix){const be=v.Util.singularValueDecompose2dScale(this.matrix);X=[X[0]*be[0],X[1]*be[1]]}const oe=this._createMeshCanvas(X,j===E.SHADING?null:this._background,te.cachedCanvases);return j!==E.SHADING&&(G.setTransform(...te.baseTransform),this.matrix&&G.transform(...this.matrix)),G.translate(oe.offsetX,oe.offsetY),G.scale(oe.scaleX,oe.scaleY),G.createPattern(oe.canvas,"no-repeat")}}class ee extends M{getPattern(){return"hotpink"}}function V(U){switch(U[0]){case"RadialAxial":return new P(U);case"Mesh":return new Q(U);case"Dummy":return new ee}throw new Error(`Unknown IR type: ${U[0]}`)}const W={COLORED:1,UNCOLORED:2};class Y{static get MAX_PATTERN_SIZE(){return(0,v.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(G,te,B,j,X){this.operatorList=G[2],this.matrix=G[3]||[1,0,0,1,0,0],this.bbox=G[4],this.xstep=G[5],this.ystep=G[6],this.paintType=G[7],this.tilingType=G[8],this.color=te,this.ctx=B,this.canvasGraphicsFactory=j,this.baseTransform=X}createPatternCanvas(G){const te=this.operatorList,B=this.bbox,j=this.xstep,X=this.ystep,oe=this.paintType,be=this.tilingType,ae=this.color,ie=this.canvasGraphicsFactory;(0,v.info)("TilingType: "+be);const Se=B[0],mt=B[1],it=B[2],Tt=B[3],ht=v.Util.singularValueDecompose2dScale(this.matrix),Ye=v.Util.singularValueDecompose2dScale(this.baseTransform),St=[ht[0]*Ye[0],ht[1]*Ye[1]],$t=this.getSizeAndScale(j,this.ctx.canvas.width,St[0]),Lt=this.getSizeAndScale(X,this.ctx.canvas.height,St[1]),Mt=G.cachedCanvases.getCanvas("pattern",$t.size,Lt.size,!0),jt=Mt.context,Qe=ie.createCanvasGraphics(jt);Qe.groupLevel=G.groupLevel,this.setFillAndStrokeStyleToContext(Qe,oe,ae);let Pe=Se,Ee=mt,nt=it,st=Tt;return Se<0&&(Pe=0,nt+=Math.abs(Se)),mt<0&&(Ee=0,st+=Math.abs(mt)),jt.translate(-($t.scale*Pe),-(Lt.scale*Ee)),Qe.transform($t.scale,0,0,Lt.scale,0,0),jt.save(),this.clipBbox(Qe,Pe,Ee,nt,st),Qe.baseTransform=(0,b.getCurrentTransform)(Qe.ctx),Qe.executeOperatorList(te),Qe.endDrawing(),{canvas:Mt.canvas,scaleX:$t.scale,scaleY:Lt.scale,offsetX:Pe,offsetY:Ee}}getSizeAndScale(G,te,B){G=Math.abs(G);const j=Math.max(Y.MAX_PATTERN_SIZE,te);let X=Math.ceil(G*B);return X>=j?X=j:B=X/G,{scale:B,size:X}}clipBbox(G,te,B,j,X){const oe=j-te,be=X-B;G.ctx.rect(te,B,oe,be),G.current.updateRectMinMax((0,b.getCurrentTransform)(G.ctx),[te,B,j,X]),G.clip(),G.endPath()}setFillAndStrokeStyleToContext(G,te,B){const j=G.ctx,X=G.current;switch(te){case W.COLORED:const oe=this.ctx;j.fillStyle=oe.fillStyle,j.strokeStyle=oe.strokeStyle,X.fillColor=oe.fillStyle,X.strokeColor=oe.strokeStyle;break;case W.UNCOLORED:const be=v.Util.makeHexColor(B[0],B[1],B[2]);j.fillStyle=be,j.strokeStyle=be,X.fillColor=be,X.strokeColor=be;break;default:throw new v.FormatError(`Unsupported paint type: ${te}`)}}getPattern(G,te,B,j){let X=B;j!==E.SHADING&&(X=v.Util.transform(X,te.baseTransform),this.matrix&&(X=v.Util.transform(X,this.matrix)));const oe=this.createPatternCanvas(te);let be=new DOMMatrix(X);be=be.translate(oe.offsetX,oe.offsetY),be=be.scale(1/oe.scaleX,1/oe.scaleY);const ae=G.createPattern(oe.canvas,"repeat");return ae.setTransform(be),ae}}d.TilingPattern=Y},(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.isNodeJS=void 0;const g=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");d.isNodeJS=g},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.applyMaskImageData=b;var v=g(1);function b({src:_,srcPos:E=0,dest:R,destPos:M=0,width:P,height:O,inverseDecode:H=!1}){const Q=v.FeatureTest.isLittleEndian?4278190080:255,[ee,V]=H?[0,Q]:[Q,0],W=P>>3,Y=P&7,U=_.length;R=new Uint32Array(R.buffer);for(let G=0;G<O;G++){for(const B=E+W;E<B;E++){const j=E<U?_[E]:255;R[M++]=j&128?V:ee,R[M++]=j&64?V:ee,R[M++]=j&32?V:ee,R[M++]=j&16?V:ee,R[M++]=j&8?V:ee,R[M++]=j&4?V:ee,R[M++]=j&2?V:ee,R[M++]=j&1?V:ee}if(Y===0)continue;const te=E<U?_[E++]:255;for(let B=0;B<Y;B++)R[M++]=te&1<<7-B?V:ee}return{srcPos:E,destPos:M}}},(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GlobalWorkerOptions=void 0;const g=Object.create(null);d.GlobalWorkerOptions=g,g.workerPort=g.workerPort===void 0?null:g.workerPort,g.workerSrc=g.workerSrc===void 0?"":g.workerSrc},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MessageHandler=void 0;var v=g(1);const b={UNKNOWN:0,DATA:1,ERROR:2},_={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function E(M){switch(M instanceof Error||typeof M=="object"&&M!==null||(0,v.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),M.name){case"AbortException":return new v.AbortException(M.message);case"MissingPDFException":return new v.MissingPDFException(M.message);case"PasswordException":return new v.PasswordException(M.message,M.code);case"UnexpectedResponseException":return new v.UnexpectedResponseException(M.message,M.status);case"UnknownErrorException":return new v.UnknownErrorException(M.message,M.details);default:return new v.UnknownErrorException(M.message,M.toString())}}class R{constructor(P,O,H){this.sourceName=P,this.targetName=O,this.comObj=H,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=Q=>{const ee=Q.data;if(ee.targetName!==this.sourceName)return;if(ee.stream){this._processStreamMessage(ee);return}if(ee.callback){const W=ee.callbackId,Y=this.callbackCapabilities[W];if(!Y)throw new Error(`Cannot resolve callback ${W}`);if(delete this.callbackCapabilities[W],ee.callback===b.DATA)Y.resolve(ee.data);else if(ee.callback===b.ERROR)Y.reject(E(ee.reason));else throw new Error("Unexpected callback case");return}const V=this.actionHandler[ee.action];if(!V)throw new Error(`Unknown action from worker: ${ee.action}`);if(ee.callbackId){const W=this.sourceName,Y=ee.sourceName;new Promise(function(U){U(V(ee.data))}).then(function(U){H.postMessage({sourceName:W,targetName:Y,callback:b.DATA,callbackId:ee.callbackId,data:U})},function(U){H.postMessage({sourceName:W,targetName:Y,callback:b.ERROR,callbackId:ee.callbackId,reason:E(U)})});return}if(ee.streamId){this._createStreamSink(ee);return}V(ee.data)},H.addEventListener("message",this._onComObjOnMessage)}on(P,O){const H=this.actionHandler;if(H[P])throw new Error(`There is already an actionName called "${P}"`);H[P]=O}send(P,O,H){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:P,data:O},H)}sendWithPromise(P,O,H){const Q=this.callbackId++,ee=(0,v.createPromiseCapability)();this.callbackCapabilities[Q]=ee;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:P,callbackId:Q,data:O},H)}catch(V){ee.reject(V)}return ee.promise}sendWithStream(P,O,H,Q){const ee=this.streamId++,V=this.sourceName,W=this.targetName,Y=this.comObj;return new ReadableStream({start:U=>{const G=(0,v.createPromiseCapability)();return this.streamControllers[ee]={controller:U,startCall:G,pullCall:null,cancelCall:null,isClosed:!1},Y.postMessage({sourceName:V,targetName:W,action:P,streamId:ee,data:O,desiredSize:U.desiredSize},Q),G.promise},pull:U=>{const G=(0,v.createPromiseCapability)();return this.streamControllers[ee].pullCall=G,Y.postMessage({sourceName:V,targetName:W,stream:_.PULL,streamId:ee,desiredSize:U.desiredSize}),G.promise},cancel:U=>{(0,v.assert)(U instanceof Error,"cancel must have a valid reason");const G=(0,v.createPromiseCapability)();return this.streamControllers[ee].cancelCall=G,this.streamControllers[ee].isClosed=!0,Y.postMessage({sourceName:V,targetName:W,stream:_.CANCEL,streamId:ee,reason:E(U)}),G.promise}},H)}_createStreamSink(P){const O=P.streamId,H=this.sourceName,Q=P.sourceName,ee=this.comObj,V=this,W=this.actionHandler[P.action],Y={enqueue(U,G=1,te){if(this.isCancelled)return;const B=this.desiredSize;this.desiredSize-=G,B>0&&this.desiredSize<=0&&(this.sinkCapability=(0,v.createPromiseCapability)(),this.ready=this.sinkCapability.promise),ee.postMessage({sourceName:H,targetName:Q,stream:_.ENQUEUE,streamId:O,chunk:U},te)},close(){this.isCancelled||(this.isCancelled=!0,ee.postMessage({sourceName:H,targetName:Q,stream:_.CLOSE,streamId:O}),delete V.streamSinks[O])},error(U){(0,v.assert)(U instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,ee.postMessage({sourceName:H,targetName:Q,stream:_.ERROR,streamId:O,reason:E(U)}))},sinkCapability:(0,v.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:P.desiredSize,ready:null};Y.sinkCapability.resolve(),Y.ready=Y.sinkCapability.promise,this.streamSinks[O]=Y,new Promise(function(U){U(W(P.data,Y))}).then(function(){ee.postMessage({sourceName:H,targetName:Q,stream:_.START_COMPLETE,streamId:O,success:!0})},function(U){ee.postMessage({sourceName:H,targetName:Q,stream:_.START_COMPLETE,streamId:O,reason:E(U)})})}_processStreamMessage(P){const O=P.streamId,H=this.sourceName,Q=P.sourceName,ee=this.comObj,V=this.streamControllers[O],W=this.streamSinks[O];switch(P.stream){case _.START_COMPLETE:P.success?V.startCall.resolve():V.startCall.reject(E(P.reason));break;case _.PULL_COMPLETE:P.success?V.pullCall.resolve():V.pullCall.reject(E(P.reason));break;case _.PULL:if(!W){ee.postMessage({sourceName:H,targetName:Q,stream:_.PULL_COMPLETE,streamId:O,success:!0});break}W.desiredSize<=0&&P.desiredSize>0&&W.sinkCapability.resolve(),W.desiredSize=P.desiredSize,new Promise(function(Y){Y(W.onPull&&W.onPull())}).then(function(){ee.postMessage({sourceName:H,targetName:Q,stream:_.PULL_COMPLETE,streamId:O,success:!0})},function(Y){ee.postMessage({sourceName:H,targetName:Q,stream:_.PULL_COMPLETE,streamId:O,reason:E(Y)})});break;case _.ENQUEUE:if((0,v.assert)(V,"enqueue should have stream controller"),V.isClosed)break;V.controller.enqueue(P.chunk);break;case _.CLOSE:if((0,v.assert)(V,"close should have stream controller"),V.isClosed)break;V.isClosed=!0,V.controller.close(),this._deleteStreamController(V,O);break;case _.ERROR:(0,v.assert)(V,"error should have stream controller"),V.controller.error(E(P.reason)),this._deleteStreamController(V,O);break;case _.CANCEL_COMPLETE:P.success?V.cancelCall.resolve():V.cancelCall.reject(E(P.reason)),this._deleteStreamController(V,O);break;case _.CANCEL:if(!W)break;new Promise(function(Y){Y(W.onCancel&&W.onCancel(E(P.reason)))}).then(function(){ee.postMessage({sourceName:H,targetName:Q,stream:_.CANCEL_COMPLETE,streamId:O,success:!0})},function(Y){ee.postMessage({sourceName:H,targetName:Q,stream:_.CANCEL_COMPLETE,streamId:O,reason:E(Y)})}),W.sinkCapability.reject(E(P.reason)),W.isCancelled=!0,delete this.streamSinks[O];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(P,O){await Promise.allSettled([P.startCall&&P.startCall.promise,P.pullCall&&P.pullCall.promise,P.cancelCall&&P.cancelCall.promise]),delete this.streamControllers[O]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}d.MessageHandler=R},(c,d,g)=>{var _,E;Object.defineProperty(d,"__esModule",{value:!0}),d.Metadata=void 0;var v=g(1);class b{constructor({parsedData:M,rawData:P}){er(this,_,void 0);er(this,E,void 0);hr(this,_,M),hr(this,E,P)}getRaw(){return dt(this,E)}get(M){var P;return(P=dt(this,_).get(M))!=null?P:null}getAll(){return(0,v.objectFromMap)(dt(this,_))}has(M){return dt(this,_).has(M)}}_=new WeakMap,E=new WeakMap,d.Metadata=b},(c,d,g)=>{var M,P,O,H,Q,ee,va;Object.defineProperty(d,"__esModule",{value:!0}),d.OptionalContentConfig=void 0;var v=g(1),b=g(8);const _=Symbol("INTERNAL");class E{constructor(Y,U){er(this,M,!0);this.name=Y,this.intent=U}get visible(){return dt(this,M)}_setVisible(Y,U){Y!==_&&(0,v.unreachable)("Internal method `_setVisible` called."),hr(this,M,U)}}M=new WeakMap;class R{constructor(Y){er(this,ee);er(this,P,null);er(this,O,new Map);er(this,H,null);er(this,Q,null);if(this.name=null,this.creator=null,Y!==null){this.name=Y.name,this.creator=Y.creator,hr(this,Q,Y.order);for(const U of Y.groups)dt(this,O).set(U.id,new E(U.name,U.intent));if(Y.baseState==="OFF")for(const U of dt(this,O).values())U._setVisible(_,!1);for(const U of Y.on)dt(this,O).get(U)._setVisible(_,!0);for(const U of Y.off)dt(this,O).get(U)._setVisible(_,!1);hr(this,H,this.getHash())}}isVisible(Y){if(dt(this,O).size===0)return!0;if(!Y)return(0,v.warn)("Optional content group not defined."),!0;if(Y.type==="OCG")return dt(this,O).has(Y.id)?dt(this,O).get(Y.id).visible:((0,v.warn)(`Optional content group not found: ${Y.id}`),!0);if(Y.type==="OCMD"){if(Y.expression)return ar(this,ee,va).call(this,Y.expression);if(!Y.policy||Y.policy==="AnyOn"){for(const U of Y.ids){if(!dt(this,O).has(U))return(0,v.warn)(`Optional content group not found: ${U}`),!0;if(dt(this,O).get(U).visible)return!0}return!1}else if(Y.policy==="AllOn"){for(const U of Y.ids){if(!dt(this,O).has(U))return(0,v.warn)(`Optional content group not found: ${U}`),!0;if(!dt(this,O).get(U).visible)return!1}return!0}else if(Y.policy==="AnyOff"){for(const U of Y.ids){if(!dt(this,O).has(U))return(0,v.warn)(`Optional content group not found: ${U}`),!0;if(!dt(this,O).get(U).visible)return!0}return!1}else if(Y.policy==="AllOff"){for(const U of Y.ids){if(!dt(this,O).has(U))return(0,v.warn)(`Optional content group not found: ${U}`),!0;if(dt(this,O).get(U).visible)return!1}return!0}return(0,v.warn)(`Unknown optional content policy ${Y.policy}.`),!0}return(0,v.warn)(`Unknown group type ${Y.type}.`),!0}setVisibility(Y,U=!0){if(!dt(this,O).has(Y)){(0,v.warn)(`Optional content group not found: ${Y}`);return}dt(this,O).get(Y)._setVisible(_,!!U),hr(this,P,null)}get hasInitialVisibility(){return this.getHash()===dt(this,H)}getOrder(){return dt(this,O).size?dt(this,Q)?dt(this,Q).slice():[...dt(this,O).keys()]:null}getGroups(){return dt(this,O).size>0?(0,v.objectFromMap)(dt(this,O)):null}getGroup(Y){return dt(this,O).get(Y)||null}getHash(){if(dt(this,P)!==null)return dt(this,P);const Y=new b.MurmurHash3_64;for(const[U,G]of dt(this,O))Y.update(`${U}:${G.visible}`);return hr(this,P,Y.hexdigest())}}P=new WeakMap,O=new WeakMap,H=new WeakMap,Q=new WeakMap,ee=new WeakSet,va=function(Y){const U=Y.length;if(U<2)return!0;const G=Y[0];for(let te=1;te<U;te++){const B=Y[te];let j;if(Array.isArray(B))j=ar(this,ee,va).call(this,B);else if(dt(this,O).has(B))j=dt(this,O).get(B).visible;else return(0,v.warn)(`Optional content group not found: ${B}`),!0;switch(G){case"And":if(!j)return!1;break;case"Or":if(j)return!0;break;case"Not":return!j;default:return!0}}return G==="And"},d.OptionalContentConfig=R},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFDataTransportStream=void 0;var v=g(1),b=g(6);class _{constructor(P,O){(0,v.assert)(O,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=P.progressiveDone||!1,this._contentDispositionFilename=P.contentDispositionFilename||null;const H=P.initialData;if((H==null?void 0:H.length)>0){const Q=new Uint8Array(H).buffer;this._queuedChunks.push(Q)}this._pdfDataRangeTransport=O,this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._contentLength=P.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((Q,ee)=>{this._onReceiveData({begin:Q,chunk:ee})}),this._pdfDataRangeTransport.addProgressListener((Q,ee)=>{this._onProgress({loaded:Q,total:ee})}),this._pdfDataRangeTransport.addProgressiveReadListener(Q=>{this._onReceiveData({chunk:Q})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(P){const O=new Uint8Array(P.chunk).buffer;if(P.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(O):this._queuedChunks.push(O);else{const H=this._rangeReaders.some(function(Q){return Q._begin!==P.begin?!1:(Q._enqueue(O),!0)});(0,v.assert)(H,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var P,O;return(O=(P=this._fullRequestReader)==null?void 0:P._loaded)!=null?O:0}_onProgress(P){var O,H,Q,ee;P.total===void 0?(H=(O=this._rangeReaders[0])==null?void 0:O.onProgress)==null||H.call(O,{loaded:P.loaded}):(ee=(Q=this._fullRequestReader)==null?void 0:Q.onProgress)==null||ee.call(Q,{loaded:P.loaded,total:P.total})}_onProgressiveDone(){var P;(P=this._fullRequestReader)==null||P.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(P){const O=this._rangeReaders.indexOf(P);O>=0&&this._rangeReaders.splice(O,1)}getFullReader(){(0,v.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const P=this._queuedChunks;return this._queuedChunks=null,new E(this,P,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(P,O){if(O<=this._progressiveDataLength)return null;const H=new R(this,P,O);return this._pdfDataRangeTransport.requestDataRange(P,O),this._rangeReaders.push(H),H}cancelAllRequests(P){var O;(O=this._fullRequestReader)==null||O.cancel(P);for(const H of this._rangeReaders.slice(0))H.cancel(P);this._pdfDataRangeTransport.abort()}}d.PDFDataTransportStream=_;class E{constructor(P,O,H=!1,Q=null){this._stream=P,this._done=H||!1,this._filename=(0,b.isPdfFile)(Q)?Q:null,this._queuedChunks=O||[],this._loaded=0;for(const ee of this._queuedChunks)this._loaded+=ee.byteLength;this._requests=[],this._headersReady=Promise.resolve(),P._fullRequestReader=this,this.onProgress=null}_enqueue(P){this._done||(this._requests.length>0?this._requests.shift().resolve({value:P,done:!1}):this._queuedChunks.push(P),this._loaded+=P.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=(0,v.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class R{constructor(P,O,H){this._stream=P,this._begin=O,this._end=H,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(P){if(!this._done){if(this._requests.length===0)this._queuedChunk=P;else{this._requests.shift().resolve({value:P,done:!1});for(const H of this._requests)H.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const O=this._queuedChunk;return this._queuedChunk=null,{value:O,done:!1}}if(this._done)return{value:void 0,done:!0};const P=(0,v.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.XfaText=void 0;class g{static textContent(b){const _=[],E={items:_,styles:Object.create(null)};function R(M){var H;if(!M)return;let P=null;const O=M.name;if(O==="#text")P=M.value;else if(g.shouldBuildText(O))(H=M==null?void 0:M.attributes)!=null&&H.textContent?P=M.attributes.textContent:M.value&&(P=M.value);else return;if(P!==null&&_.push({str:P}),!!M.children)for(const Q of M.children)R(Q)}return R(b),E}static shouldBuildText(b){return!(b==="textarea"||b==="input"||b==="option"||b==="select")}}d.XfaText=g},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.NodeStandardFontDataFactory=d.NodeCanvasFactory=d.NodeCMapReaderFactory=void 0;var v=g(7);const b=function(M){return new Promise((P,O)=>{require$$5.readFile(M,(Q,ee)=>{if(Q||!ee){O(new Error(Q));return}P(new Uint8Array(ee))})})};class _ extends v.BaseCanvasFactory{_createCanvas(P,O){return require$$5.createCanvas(P,O)}}d.NodeCanvasFactory=_;class E extends v.BaseCMapReaderFactory{_fetchData(P,O){return b(P).then(H=>({cMapData:H,compressionType:O}))}}d.NodeCMapReaderFactory=E;class R extends v.BaseStandardFontDataFactory{_fetchData(P){return b(P)}}d.NodeStandardFontDataFactory=R},(c,d,g)=>{var M,P,O,H,Q,ee,V,W,Y,ba,G,Ha,B,_a,X,Wa;Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationEditorLayer=void 0;var v=g(5),b=g(1),_=g(22),E=g(23);const be=class{constructor(ie){er(this,Y);er(this,G);er(this,B);er(this,X);er(this,M,void 0);er(this,P,!1);er(this,O,this.pointerup.bind(this));er(this,H,this.pointerdown.bind(this));er(this,Q,new Map);er(this,ee,!1);er(this,V,!1);er(this,W,void 0);be._initialized||(be._initialized=!0,_.FreeTextEditor.initialize(ie.l10n),E.InkEditor.initialize(ie.l10n)),ie.uiManager.registerEditorTypes([_.FreeTextEditor,E.InkEditor]),hr(this,W,ie.uiManager),this.annotationStorage=ie.annotationStorage,this.pageIndex=ie.pageIndex,this.div=ie.div,hr(this,M,ie.accessibilityManager),dt(this,W).addLayer(this)}updateToolbar(ie){dt(this,W).updateToolbar(ie)}updateMode(ie=dt(this,W).getMode()){ar(this,X,Wa).call(this),ie===b.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),dt(this,W).unselectAll(),this.div.classList.toggle("freeTextEditing",ie===b.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",ie===b.AnnotationEditorType.INK)}addInkEditorIfNeeded(ie){if(!ie&&dt(this,W).getMode()!==b.AnnotationEditorType.INK)return;if(!ie){for(const mt of dt(this,Q).values())if(mt.isEmpty()){mt.setInBackground();return}}ar(this,B,_a).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(ie){dt(this,W).setEditingState(ie)}addCommands(ie){dt(this,W).addCommands(ie)}enable(){this.div.style.pointerEvents="auto";for(const ie of dt(this,Q).values())ie.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const ie of dt(this,Q).values())ie.disableEditing()}setActiveEditor(ie){dt(this,W).getActive()!==ie&&dt(this,W).setActiveEditor(ie)}enableClick(){this.div.addEventListener("pointerdown",dt(this,H)),this.div.addEventListener("pointerup",dt(this,O))}disableClick(){this.div.removeEventListener("pointerdown",dt(this,H)),this.div.removeEventListener("pointerup",dt(this,O))}attach(ie){dt(this,Q).set(ie.id,ie)}detach(ie){var Se;dt(this,Q).delete(ie.id),(Se=dt(this,M))==null||Se.removePointerInTextLayer(ie.contentDiv)}remove(ie){dt(this,W).removeEditor(ie),this.detach(ie),this.annotationStorage.remove(ie.id),ie.div.style.display="none",setTimeout(()=>{ie.div.style.display="",ie.div.remove(),ie.isAttachedToDOM=!1,document.activeElement===document.body&&dt(this,W).focusMainContainer()},0),dt(this,V)||this.addInkEditorIfNeeded(!1)}add(ie){if(ar(this,Y,ba).call(this,ie),dt(this,W).addEditor(ie),this.attach(ie),!ie.isAttachedToDOM){const Se=ie.render();this.div.append(Se),ie.isAttachedToDOM=!0}this.moveEditorInDOM(ie),ie.onceAdded(),this.addToAnnotationStorage(ie)}moveEditorInDOM(ie){var Se;(Se=dt(this,M))==null||Se.moveElementInDOM(this.div,ie.div,ie.contentDiv,!0)}addToAnnotationStorage(ie){!ie.isEmpty()&&!this.annotationStorage.has(ie.id)&&this.annotationStorage.setValue(ie.id,ie)}addOrRebuild(ie){ie.needsToBeRebuilt()?ie.rebuild():this.add(ie)}addANewEditor(ie){const Se=()=>{this.addOrRebuild(ie)},mt=()=>{ie.remove()};this.addCommands({cmd:Se,undo:mt,mustExec:!0})}addUndoableEditor(ie){const Se=()=>{this.addOrRebuild(ie)},mt=()=>{ie.remove()};this.addCommands({cmd:Se,undo:mt,mustExec:!1})}getNextId(){return dt(this,W).getId()}deserialize(ie){switch(ie.annotationType){case b.AnnotationEditorType.FREETEXT:return _.FreeTextEditor.deserialize(ie,this);case b.AnnotationEditorType.INK:return E.InkEditor.deserialize(ie,this)}return null}setSelected(ie){dt(this,W).setSelected(ie)}toggleSelected(ie){dt(this,W).toggleSelected(ie)}isSelected(ie){return dt(this,W).isSelected(ie)}unselect(ie){dt(this,W).unselect(ie)}pointerup(ie){const Se=v.KeyboardManager.platform.isMac;if(!(ie.button!==0||ie.ctrlKey&&Se)&&ie.target===this.div&&!!dt(this,ee)){if(hr(this,ee,!1),!dt(this,P)){hr(this,P,!0);return}ar(this,B,_a).call(this,ie)}}pointerdown(ie){const Se=v.KeyboardManager.platform.isMac;if(ie.button!==0||ie.ctrlKey&&Se||ie.target!==this.div)return;hr(this,ee,!0);const mt=dt(this,W).getActive();hr(this,P,!mt||mt.isEmpty())}drop(ie){const Se=ie.dataTransfer.getData("text/plain"),mt=dt(this,W).getEditor(Se);if(!mt)return;ie.preventDefault(),ie.dataTransfer.dropEffect="move",ar(this,Y,ba).call(this,mt);const it=this.div.getBoundingClientRect(),Tt=ie.clientX-it.x,ht=ie.clientY-it.y;mt.translate(Tt-mt.startX,ht-mt.startY),this.moveEditorInDOM(mt),mt.div.focus()}dragover(ie){ie.preventDefault()}destroy(){var ie,Se;((ie=dt(this,W).getActive())==null?void 0:ie.parent)===this&&dt(this,W).setActiveEditor(null);for(const mt of dt(this,Q).values())(Se=dt(this,M))==null||Se.removePointerInTextLayer(mt.contentDiv),mt.isAttachedToDOM=!1,mt.div.remove(),mt.parent=null;this.div=null,dt(this,Q).clear(),dt(this,W).removeLayer(this)}render(ie){this.viewport=ie.viewport,(0,v.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const Se of dt(this,W).getEditors(this.pageIndex))this.add(Se);this.updateMode()}update(ie){dt(this,W).commitOrRemove(),this.viewport=ie.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[ie,Se,mt,it]=this.viewport.viewBox,Tt=mt-ie,ht=it-Se;return[Tt,ht]}get viewportBaseDimensions(){const{width:ie,height:Se,rotation:mt}=this.viewport;return mt%180===0?[ie,Se]:[Se,ie]}setDimensions(){const{width:ie,height:Se,rotation:mt}=this.viewport,it=mt%180!==0,Tt=Math.floor(ie)+"px",ht=Math.floor(Se)+"px";this.div.style.width=it?ht:Tt,this.div.style.height=it?Tt:ht,this.div.setAttribute("data-main-rotation",mt)}};let R=be;M=new WeakMap,P=new WeakMap,O=new WeakMap,H=new WeakMap,Q=new WeakMap,ee=new WeakMap,V=new WeakMap,W=new WeakMap,Y=new WeakSet,ba=function(ie){var Se;ie.parent!==this&&(this.attach(ie),ie.pageIndex=this.pageIndex,(Se=ie.parent)==null||Se.detach(ie),ie.parent=this,ie.div&&ie.isAttachedToDOM&&(ie.div.remove(),this.div.append(ie.div)))},G=new WeakSet,Ha=function(ie){switch(dt(this,W).getMode()){case b.AnnotationEditorType.FREETEXT:return new _.FreeTextEditor(ie);case b.AnnotationEditorType.INK:return new E.InkEditor(ie)}return null},B=new WeakSet,_a=function(ie){const Se=this.getNextId(),mt=ar(this,G,Ha).call(this,{parent:this,id:Se,x:ie.offsetX,y:ie.offsetY});return mt&&this.add(mt),mt},X=new WeakSet,Wa=function(){hr(this,V,!0);for(const ie of dt(this,Q).values())ie.isEmpty()&&ie.remove();hr(this,V,!1)},Gr(R,"_initialized",!1),d.AnnotationEditorLayer=R},(c,d,g)=>{var R,M,P,O,H,Q,ee,V,W,Y,Za,G,Ya,B,Ga,X,Ea;Object.defineProperty(d,"__esModule",{value:!0}),d.FreeTextEditor=void 0;var v=g(1),b=g(5),_=g(4);const be=class extends _.AnnotationEditor{constructor(Se){super({...Se,name:"freeTextEditor"});er(this,Y);er(this,G);er(this,B);er(this,X);er(this,R,this.editorDivBlur.bind(this));er(this,M,this.editorDivFocus.bind(this));er(this,P,this.editorDivInput.bind(this));er(this,O,this.editorDivKeydown.bind(this));er(this,H,void 0);er(this,Q,"");er(this,ee,`${this.id}-editor`);er(this,V,!1);er(this,W,void 0);hr(this,H,Se.color||be._defaultColor||_.AnnotationEditor._defaultLineColor),hr(this,W,Se.fontSize||be._defaultFontSize)}static initialize(Se){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(it=>[it,Se.get(it)]));const mt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(mt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Se,mt){switch(Se){case v.AnnotationEditorParamsType.FREETEXT_SIZE:be._defaultFontSize=mt;break;case v.AnnotationEditorParamsType.FREETEXT_COLOR:be._defaultColor=mt;break}}updateParams(Se,mt){switch(Se){case v.AnnotationEditorParamsType.FREETEXT_SIZE:ar(this,Y,Za).call(this,mt);break;case v.AnnotationEditorParamsType.FREETEXT_COLOR:ar(this,G,Ya).call(this,mt);break}}static get defaultPropertiesToUpdate(){return[[v.AnnotationEditorParamsType.FREETEXT_SIZE,be._defaultFontSize],[v.AnnotationEditorParamsType.FREETEXT_COLOR,be._defaultColor||_.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[v.AnnotationEditorParamsType.FREETEXT_SIZE,dt(this,W)],[v.AnnotationEditorParamsType.FREETEXT_COLOR,dt(this,H)]]}getInitialTranslation(){return[-be._internalPadding*this.parent.scaleFactor,-(be._internalPadding+dt(this,W))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(v.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",dt(this,O)),this.editorDiv.addEventListener("focus",dt(this,M)),this.editorDiv.addEventListener("blur",dt(this,R)),this.editorDiv.addEventListener("input",dt(this,P)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",dt(this,ee)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",dt(this,O)),this.editorDiv.removeEventListener("focus",dt(this,M)),this.editorDiv.removeEventListener("blur",dt(this,R)),this.editorDiv.removeEventListener("input",dt(this,P)),this.div.focus(),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Se){super.focusin(Se),Se.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){super.commit(),dt(this,V)||(hr(this,V,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),hr(this,Q,ar(this,B,Ga).call(this).trimEnd()),ar(this,X,Ea).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(Se){this.enableEditMode(),this.editorDiv.focus()}keydown(Se){Se.target===this.div&&Se.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(Se){be._keyboardManager.exec(this,Se)}editorDivFocus(Se){this.isEditing=!0}editorDivBlur(Se){this.isEditing=!1}editorDivInput(Se){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Se,mt;this.width&&(Se=this.x,mt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",dt(this,ee)),this.enableEditing(),be._l10nPromise.get("editor_free_text2_aria_label").then(Tt=>{var ht;return(ht=this.editorDiv)==null?void 0:ht.setAttribute("aria-label",Tt)}),be._l10nPromise.get("free_text2_default_content").then(Tt=>{var ht;return(ht=this.editorDiv)==null?void 0:ht.setAttribute("default-content",Tt)}),this.editorDiv.contentEditable=!0;const{style:it}=this.editorDiv;if(it.fontSize=`calc(${dt(this,W)}px * var(--scale-factor))`,it.color=dt(this,H),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,b.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Tt,ht]=this.parent.viewportBaseDimensions;this.setAt(Se*Tt,mt*ht,this.width*Tt,this.height*ht);for(const Ye of dt(this,Q).split(`
`)){const St=document.createElement("div");St.append(Ye?document.createTextNode(Ye):document.createElement("br")),this.editorDiv.append(St)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Se,mt){const it=super.deserialize(Se,mt);return hr(it,W,Se.fontSize),hr(it,H,v.Util.makeHexColor(...Se.color)),hr(it,Q,Se.value),it}serialize(){if(this.isEmpty())return null;const Se=be._internalPadding*this.parent.scaleFactor,mt=this.getRect(Se,Se),it=_.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:v.AnnotationEditorType.FREETEXT,color:it,fontSize:dt(this,W),value:dt(this,Q),pageIndex:this.parent.pageIndex,rect:mt,rotation:this.rotation}}};let E=be;R=new WeakMap,M=new WeakMap,P=new WeakMap,O=new WeakMap,H=new WeakMap,Q=new WeakMap,ee=new WeakMap,V=new WeakMap,W=new WeakMap,Y=new WeakSet,Za=function(Se){const mt=Tt=>{this.editorDiv.style.fontSize=`calc(${Tt}px * var(--scale-factor))`,this.translate(0,-(Tt-dt(this,W))*this.parent.scaleFactor),hr(this,W,Tt),ar(this,X,Ea).call(this)},it=dt(this,W);this.parent.addCommands({cmd:()=>{mt(Se)},undo:()=>{mt(it)},mustExec:!0,type:v.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},G=new WeakSet,Ya=function(Se){const mt=dt(this,H);this.parent.addCommands({cmd:()=>{hr(this,H,Se),this.editorDiv.style.color=Se},undo:()=>{hr(this,H,mt),this.editorDiv.style.color=mt},mustExec:!0,type:v.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},B=new WeakSet,Ga=function(){const Se=this.editorDiv.getElementsByTagName("div");if(Se.length===0)return this.editorDiv.innerText;const mt=[];for(const it of Se)mt.push(it.innerText.replace(/\r\n?|\n/,""));return mt.join(`
`)},X=new WeakSet,Ea=function(){const[Se,mt]=this.parent.viewportBaseDimensions,it=this.div.getBoundingClientRect();this.width=it.width/Se,this.height=it.height/mt},Gr(E,"_freeTextDefaultContent",""),Gr(E,"_l10nPromise"),Gr(E,"_internalPadding",0),Gr(E,"_defaultColor",null),Gr(E,"_defaultFontSize",10),Gr(E,"_keyboardManager",new b.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],be.prototype.commitOrRemove]])),Gr(E,"_type","freetext"),d.FreeTextEditor=E},(c,d,g)=>{var O,H,Q,ee,V,W,Y,U,G,te,B,j,X,oe,be,Xa,ie,Ka,mt,Qa,Tt,Ja,Ye,wa,$t,ei,Mt,ti,Qe,ri,Ee,Fn,st,xa,tt,ia,It,oa,wt,Xn,Zt,Sa,Z,sa,K,Ca,Ae,ni,Rt,ai,lt,ii,ze,Ta,Ze,ca,Ht,Kn,ur,Aa;Object.defineProperty(d,"__esModule",{value:!0}),d.InkEditor=void 0,Object.defineProperty(d,"fitCurve",{enumerable:!0,get:function(){return _.fitCurve}});var v=g(1),b=g(4),_=g(24),E=g(5);const R=16,M=100,A=class extends b.AnnotationEditor{constructor(ve){super({...ve,name:"inkEditor"});er(this,be);er(this,ie);er(this,mt);er(this,Tt);er(this,Ye);er(this,$t);er(this,Mt);er(this,Qe);er(this,Ee);er(this,st);er(this,tt);er(this,It);er(this,wt);er(this,Zt);er(this,Z);er(this,Ae);er(this,Rt);er(this,lt);er(this,ze);er(this,Ze);er(this,Ht);er(this,ur);er(this,O,0);er(this,H,0);er(this,Q,0);er(this,ee,this.canvasPointermove.bind(this));er(this,V,this.canvasPointerleave.bind(this));er(this,W,this.canvasPointerup.bind(this));er(this,Y,this.canvasPointerdown.bind(this));er(this,U,!1);er(this,G,!1);er(this,te,null);er(this,B,null);er(this,j,0);er(this,X,0);er(this,oe,null);this.color=ve.color||null,this.thickness=ve.thickness||null,this.opacity=ve.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(ve){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(Oe=>[Oe,ve.get(Oe)]))}static updateDefaultParams(ve,Oe){switch(ve){case v.AnnotationEditorParamsType.INK_THICKNESS:A._defaultThickness=Oe;break;case v.AnnotationEditorParamsType.INK_COLOR:A._defaultColor=Oe;break;case v.AnnotationEditorParamsType.INK_OPACITY:A._defaultOpacity=Oe/100;break}}updateParams(ve,Oe){switch(ve){case v.AnnotationEditorParamsType.INK_THICKNESS:ar(this,be,Xa).call(this,Oe);break;case v.AnnotationEditorParamsType.INK_COLOR:ar(this,ie,Ka).call(this,Oe);break;case v.AnnotationEditorParamsType.INK_OPACITY:ar(this,mt,Qa).call(this,Oe);break}}static get defaultPropertiesToUpdate(){return[[v.AnnotationEditorParamsType.INK_THICKNESS,A._defaultThickness],[v.AnnotationEditorParamsType.INK_COLOR,A._defaultColor||b.AnnotationEditor._defaultLineColor],[v.AnnotationEditorParamsType.INK_OPACITY,Math.round(A._defaultOpacity*100)]]}get propertiesToUpdate(){var ve;return[[v.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||A._defaultThickness],[v.AnnotationEditorParamsType.INK_COLOR,this.color||A._defaultColor||b.AnnotationEditor._defaultLineColor],[v.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((ve=this.opacity)!=null?ve:A._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ar(this,tt,ia).call(this),ar(this,It,oa).call(this)),this.isAttachedToDOM||(this.parent.add(this),ar(this,wt,Xn).call(this)),ar(this,Ht,Kn).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,dt(this,B).disconnect(),hr(this,B,null),super.remove())}enableEditMode(){dt(this,U)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",dt(this,Y)),this.canvas.addEventListener("pointerup",dt(this,W)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",dt(this,Y)),this.canvas.removeEventListener("pointerup",dt(this,W)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){dt(this,U)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),hr(this,U,!0),this.div.classList.add("disabled"),ar(this,Ht,Kn).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(ve){super.focusin(ve),this.enableEditMode()}canvasPointerdown(ve){ve.button!==0||!this.isInEditMode()||dt(this,U)||(this.setInForeground(),ve.type!=="mouse"&&this.div.focus(),ve.stopPropagation(),this.canvas.addEventListener("pointerleave",dt(this,V)),this.canvas.addEventListener("pointermove",dt(this,ee)),ar(this,$t,ei).call(this,ve.offsetX,ve.offsetY))}canvasPointermove(ve){ve.stopPropagation(),ar(this,Mt,ti).call(this,ve.offsetX,ve.offsetY)}canvasPointerup(ve){ve.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(ve.stopPropagation(),ar(this,st,xa).call(this,ve),this.setInBackground())}canvasPointerleave(ve){ar(this,st,xa).call(this,ve),this.setInBackground()}render(){if(this.div)return this.div;let ve,Oe;this.width&&(ve=this.x,Oe=this.y),super.render(),A._l10nPromise.get("editor_ink2_aria_label").then(Gt=>{var or;return(or=this.div)==null?void 0:or.setAttribute("aria-label",Gt)});const[pt,Kt,rr,dr]=ar(this,Tt,Ja).call(this);if(this.setAt(pt,Kt,0,0),this.setDims(rr,dr),ar(this,tt,ia).call(this),this.width){const[Gt,or]=this.parent.viewportBaseDimensions;this.setAt(ve*Gt,Oe*or,this.width*Gt,this.height*or),hr(this,G,!0),ar(this,wt,Xn).call(this),this.setDims(this.width*Gt,this.height*or),ar(this,Ee,Fn).call(this),ar(this,ur,Aa).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ar(this,It,oa).call(this),this.div}setDimensions(ve,Oe){const pt=Math.round(ve),Kt=Math.round(Oe);if(dt(this,j)===pt&&dt(this,X)===Kt)return;hr(this,j,pt),hr(this,X,Kt),this.canvas.style.visibility="hidden",dt(this,O)&&Math.abs(dt(this,O)-ve/Oe)>.01&&(Oe=Math.ceil(ve/dt(this,O)),this.setDims(ve,Oe));const[rr,dr]=this.parent.viewportBaseDimensions;this.width=ve/rr,this.height=Oe/dr,dt(this,U)&&ar(this,Zt,Sa).call(this,ve,Oe),ar(this,wt,Xn).call(this),ar(this,Ee,Fn).call(this),this.canvas.style.visibility="visible"}static deserialize(ve,Oe){var Nr,Ar;const pt=super.deserialize(ve,Oe);pt.thickness=ve.thickness,pt.color=v.Util.makeHexColor(...ve.color),pt.opacity=ve.opacity;const[Kt,rr]=Oe.pageDimensions,dr=pt.width*Kt,Gt=pt.height*rr,or=Oe.scaleFactor,yr=ve.thickness/2;hr(pt,O,dr/Gt),hr(pt,U,!0),hr(pt,j,Math.round(dr)),hr(pt,X,Math.round(Gt));for(const{bezier:br}of ve.paths){const qr=[];pt.paths.push(qr);let en=or*(br[0]-yr),Wr=or*(Gt-br[1]-yr);for(let Xr=2,ir=br.length;Xr<ir;Xr+=6){const Rr=or*(br[Xr]-yr),Vr=or*(Gt-br[Xr+1]-yr),Zr=or*(br[Xr+2]-yr),Et=or*(Gt-br[Xr+3]-yr),xt=or*(br[Xr+4]-yr),ot=or*(Gt-br[Xr+5]-yr);qr.push([[en,Wr],[Rr,Vr],[Zr,Et],[xt,ot]]),en=xt,Wr=ot}const rn=ar(this,K,Ca).call(this,qr);pt.bezierPath2D.push(rn)}const mr=ar(Nr=pt,ze,Ta).call(Nr);return hr(pt,Q,Math.max(R,mr[2]-mr[0])),hr(pt,H,Math.max(R,mr[3]-mr[1])),ar(Ar=pt,Zt,Sa).call(Ar,dr,Gt),pt}serialize(){if(this.isEmpty())return null;const ve=this.getRect(0,0),Oe=this.rotation%180===0?ve[3]-ve[1]:ve[2]-ve[0],pt=b.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:v.AnnotationEditorType.INK,color:pt,thickness:this.thickness,opacity:this.opacity,paths:ar(this,Ae,ni).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,Oe),pageIndex:this.parent.pageIndex,rect:ve,rotation:this.rotation}}};let P=A;O=new WeakMap,H=new WeakMap,Q=new WeakMap,ee=new WeakMap,V=new WeakMap,W=new WeakMap,Y=new WeakMap,U=new WeakMap,G=new WeakMap,te=new WeakMap,B=new WeakMap,j=new WeakMap,X=new WeakMap,oe=new WeakMap,be=new WeakSet,Xa=function(ve){const Oe=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=ve,ar(this,Ht,Kn).call(this)},undo:()=>{this.thickness=Oe,ar(this,Ht,Kn).call(this)},mustExec:!0,type:v.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},ie=new WeakSet,Ka=function(ve){const Oe=this.color;this.parent.addCommands({cmd:()=>{this.color=ve,ar(this,Ee,Fn).call(this)},undo:()=>{this.color=Oe,ar(this,Ee,Fn).call(this)},mustExec:!0,type:v.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},mt=new WeakSet,Qa=function(ve){ve/=100;const Oe=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=ve,ar(this,Ee,Fn).call(this)},undo:()=>{this.opacity=Oe,ar(this,Ee,Fn).call(this)},mustExec:!0,type:v.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Tt=new WeakSet,Ja=function(){const{width:ve,height:Oe,rotation:pt}=this.parent.viewport;switch(pt){case 90:return[0,ve,ve,Oe];case 180:return[ve,Oe,ve,Oe];case 270:return[Oe,0,ve,Oe];default:return[0,0,ve,Oe]}},Ye=new WeakSet,wa=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,E.opacityToHex)(this.opacity)}`},$t=new WeakSet,ei=function(ve,Oe){var pt;this.isEditing=!0,dt(this,G)||(hr(this,G,!0),ar(this,wt,Xn).call(this),this.thickness||(this.thickness=A._defaultThickness),this.color||(this.color=A._defaultColor||b.AnnotationEditor._defaultLineColor),(pt=this.opacity)!=null||(this.opacity=A._defaultOpacity)),this.currentPath.push([ve,Oe]),hr(this,te,null),ar(this,Ye,wa).call(this),this.ctx.beginPath(),this.ctx.moveTo(ve,Oe),hr(this,oe,()=>{!dt(this,oe)||(dt(this,te)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ar(this,Ee,Fn).call(this),this.ctx.lineTo(...dt(this,te)),hr(this,te,null),this.ctx.stroke()),window.requestAnimationFrame(dt(this,oe)))}),window.requestAnimationFrame(dt(this,oe))},Mt=new WeakSet,ti=function(ve,Oe){const[pt,Kt]=this.currentPath.at(-1);ve===pt&&Oe===Kt||(this.currentPath.push([ve,Oe]),hr(this,te,[ve,Oe]))},Qe=new WeakSet,ri=function(ve,Oe){var yr;this.ctx.closePath(),hr(this,oe,null),ve=Math.min(Math.max(ve,0),this.canvas.width),Oe=Math.min(Math.max(Oe,0),this.canvas.height);const[pt,Kt]=this.currentPath.at(-1);(ve!==pt||Oe!==Kt)&&this.currentPath.push([ve,Oe]);let rr;if(this.currentPath.length!==1)rr=(0,_.fitCurve)(this.currentPath,30,null);else{const mr=[ve,Oe];rr=[[mr,mr.slice(),mr.slice(),mr]]}const dr=ar(yr=A,K,Ca).call(yr,rr);this.currentPath.length=0;const Gt=()=>{this.paths.push(rr),this.bezierPath2D.push(dr),this.rebuild()},or=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ar(this,tt,ia).call(this),ar(this,It,oa).call(this)),ar(this,Ht,Kn).call(this))};this.parent.addCommands({cmd:Gt,undo:or,mustExec:!0})},Ee=new WeakSet,Fn=function(){if(this.isEmpty()){ar(this,Z,sa).call(this);return}ar(this,Ye,wa).call(this);const{canvas:ve,ctx:Oe}=this;Oe.setTransform(1,0,0,1,0,0),Oe.clearRect(0,0,ve.width,ve.height),ar(this,Z,sa).call(this);for(const pt of this.bezierPath2D)Oe.stroke(pt)},st=new WeakSet,xa=function(ve){ar(this,Qe,ri).call(this,ve.offsetX,ve.offsetY),this.canvas.removeEventListener("pointerleave",dt(this,V)),this.canvas.removeEventListener("pointermove",dt(this,ee)),this.parent.addToAnnotationStorage(this)},tt=new WeakSet,ia=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",A._l10nPromise.get("editor_ink_canvas_aria_label").then(ve=>{var Oe;return(Oe=this.canvas)==null?void 0:Oe.setAttribute("aria-label",ve)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},It=new WeakSet,oa=function(){let ve=null;hr(this,B,new ResizeObserver(Oe=>{const pt=Oe[0].contentRect;pt.width&&pt.height&&(ve!==null&&clearTimeout(ve),ve=setTimeout(()=>{this.fixDims(),ve=null},M),this.setDimensions(pt.width,pt.height))})),dt(this,B).observe(this.div)},wt=new WeakSet,Xn=function(){if(!dt(this,G))return;const[ve,Oe]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*ve),this.canvas.height=Math.ceil(this.height*Oe),ar(this,Z,sa).call(this)},Zt=new WeakSet,Sa=function(ve,Oe){const pt=ar(this,Ze,ca).call(this),Kt=(ve-pt)/dt(this,Q),rr=(Oe-pt)/dt(this,H);this.scaleFactor=Math.min(Kt,rr)},Z=new WeakSet,sa=function(){const ve=ar(this,Ze,ca).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ve,this.translationY*this.scaleFactor+ve)},K=new WeakSet,Ca=function(ve){const Oe=new Path2D;for(let pt=0,Kt=ve.length;pt<Kt;pt++){const[rr,dr,Gt,or]=ve[pt];pt===0&&Oe.moveTo(...rr),Oe.bezierCurveTo(dr[0],dr[1],Gt[0],Gt[1],or[0],or[1])}return Oe},Ae=new WeakSet,ni=function(ve,Oe,pt,Kt){const dr=[],Gt=this.thickness/2;let or,yr;for(const mr of this.paths){or=[],yr=[];for(let Nr=0,Ar=mr.length;Nr<Ar;Nr++){const[br,qr,en,Wr]=mr[Nr],rn=ve*(br[0]+Oe)+Gt,Xr=Kt-ve*(br[1]+pt)-Gt,ir=ve*(qr[0]+Oe)+Gt,Rr=Kt-ve*(qr[1]+pt)-Gt,Vr=ve*(en[0]+Oe)+Gt,Zr=Kt-ve*(en[1]+pt)-Gt,Et=ve*(Wr[0]+Oe)+Gt,xt=Kt-ve*(Wr[1]+pt)-Gt;Nr===0&&(or.push(rn,Xr),yr.push(rn,Xr)),or.push(ir,Rr,Vr,Zr,Et,xt),ar(this,Rt,ai).call(this,rn,Xr,ir,Rr,Vr,Zr,Et,xt,4,yr)}dr.push({bezier:or,points:yr})}return dr},Rt=new WeakSet,ai=function(ve,Oe,pt,Kt,rr,dr,Gt,or,yr,mr){if(ar(this,lt,ii).call(this,ve,Oe,pt,Kt,rr,dr,Gt,or)){mr.push(Gt,or);return}for(let Nr=1;Nr<yr-1;Nr++){const Ar=Nr/yr,br=1-Ar;let qr=Ar*ve+br*pt,en=Ar*Oe+br*Kt,Wr=Ar*pt+br*rr,rn=Ar*Kt+br*dr;const Xr=Ar*rr+br*Gt,ir=Ar*dr+br*or;qr=Ar*qr+br*Wr,en=Ar*en+br*rn,Wr=Ar*Wr+br*Xr,rn=Ar*rn+br*ir,qr=Ar*qr+br*Wr,en=Ar*en+br*rn,mr.push(qr,en)}mr.push(Gt,or)},lt=new WeakSet,ii=function(ve,Oe,pt,Kt,rr,dr,Gt,or){const mr=(3*pt-2*ve-Gt)**2,Nr=(3*Kt-2*Oe-or)**2,Ar=(3*rr-ve-2*Gt)**2,br=(3*dr-Oe-2*or)**2;return Math.max(mr,Ar)+Math.max(Nr,br)<=10},ze=new WeakSet,Ta=function(){let ve=1/0,Oe=-1/0,pt=1/0,Kt=-1/0;for(const rr of this.paths)for(const[dr,Gt,or,yr]of rr){const mr=v.Util.bezierBoundingBox(...dr,...Gt,...or,...yr);ve=Math.min(ve,mr[0]),pt=Math.min(pt,mr[1]),Oe=Math.max(Oe,mr[2]),Kt=Math.max(Kt,mr[3])}return[ve,pt,Oe,Kt]},Ze=new WeakSet,ca=function(){return dt(this,U)?Math.ceil(this.thickness*this.parent.scaleFactor):0},Ht=new WeakSet,Kn=function(ve=!1){if(this.isEmpty())return;if(!dt(this,U)){ar(this,Ee,Fn).call(this);return}const Oe=ar(this,ze,Ta).call(this),pt=ar(this,Ze,ca).call(this);hr(this,Q,Math.max(R,Oe[2]-Oe[0])),hr(this,H,Math.max(R,Oe[3]-Oe[1]));const Kt=Math.ceil(pt+dt(this,Q)*this.scaleFactor),rr=Math.ceil(pt+dt(this,H)*this.scaleFactor),[dr,Gt]=this.parent.viewportBaseDimensions;this.width=Kt/dr,this.height=rr/Gt,hr(this,O,Kt/rr),ar(this,ur,Aa).call(this);const or=this.translationX,yr=this.translationY;this.translationX=-Oe[0],this.translationY=-Oe[1],ar(this,wt,Xn).call(this),ar(this,Ee,Fn).call(this),hr(this,j,Kt),hr(this,X,rr),this.setDims(Kt,rr);const mr=ve?pt/this.scaleFactor/2:0;this.translate(or-this.translationX-mr,yr-this.translationY-mr)},ur=new WeakSet,Aa=function(){const{style:ve}=this.div;dt(this,O)>=1?(ve.minHeight=`${R}px`,ve.minWidth=`${Math.round(dt(this,O)*R)}px`):(ve.minWidth=`${R}px`,ve.minHeight=`${Math.round(R/dt(this,O))}px`)},er(P,K),Gr(P,"_defaultColor",null),Gr(P,"_defaultOpacity",1),Gr(P,"_defaultThickness",1),Gr(P,"_l10nPromise"),Gr(P,"_type","ink"),d.InkEditor=P},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.fitCurve=void 0;const v=g(25);d.fitCurve=v},c=>{function d(V,W,Y){if(!Array.isArray(V))throw new TypeError("First argument should be an array");if(V.forEach(B=>{if(!Array.isArray(B)||B.some(j=>typeof j!="number")||B.length!==V[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),V=V.filter((B,j)=>j===0||!B.every((X,oe)=>X===V[j-1][oe])),V.length<2)return[];const U=V.length,G=H(V[1],V[0]),te=H(V[U-2],V[U-1]);return g(V,G,te,W,Y)}function g(V,W,Y,U,G){var B,j,X,oe,be,ae,ie,Se,mt,it,Tt,ht,Ye;if(V.length===2)return ht=Q.vectorLen(Q.subtract(V[0],V[1]))/3,B=[V[0],Q.addArrays(V[0],Q.mulItems(W,ht)),Q.addArrays(V[1],Q.mulItems(Y,ht)),V[1]],[B];if(j=R(V),[B,oe,ae]=v(V,j,j,W,Y,G),oe===0||oe<U)return[B];if(oe<U*U)for(X=j,be=oe,ie=ae,Ye=0;Ye<20;Ye++){if(X=_(B,V,X),[B,oe,ae]=v(V,j,X,W,Y,G),oe<U)return[B];if(ae===ie){let St=oe/be;if(St>.9999&&St<1.0001)break}be=oe,ie=ae}return Tt=[],Se=Q.subtract(V[ae-1],V[ae+1]),Se.every(St=>St===0)&&(Se=Q.subtract(V[ae-1],V[ae]),[Se[0],Se[1]]=[-Se[1],Se[0]]),mt=Q.normalize(Se),it=Q.mulItems(mt,-1),Tt=Tt.concat(g(V.slice(0,ae+1),W,mt,U,G)),Tt=Tt.concat(g(V.slice(ae),it,Y,U,G)),Tt}function v(V,W,Y,U,G,te){var B,j,X;return B=b(V,Y,U,G),[j,X]=M(V,B,W),te&&te({bez:B,points:V,params:W,maxErr:j,maxPoint:X}),[B,j,X]}function b(V,W,Y,U){var G,te,B,j,X,oe,be,ae,ie,Se,mt,it,Tt,ht,Ye,St,$t,Lt=V[0],Mt=V[V.length-1];for(G=[Lt,null,null,Mt],te=Q.zeros_Xx2x2(W.length),Tt=0,ht=W.length;Tt<ht;Tt++)St=W[Tt],$t=1-St,B=te[Tt],B[0]=Q.mulItems(Y,3*St*($t*$t)),B[1]=Q.mulItems(U,3*$t*(St*St));for(j=[[0,0],[0,0]],X=[0,0],Tt=0,ht=V.length;Tt<ht;Tt++)St=W[Tt],B=te[Tt],j[0][0]+=Q.dot(B[0],B[0]),j[0][1]+=Q.dot(B[0],B[1]),j[1][0]+=Q.dot(B[0],B[1]),j[1][1]+=Q.dot(B[1],B[1]),Ye=Q.subtract(V[Tt],ee.q([Lt,Lt,Mt,Mt],St)),X[0]+=Q.dot(B[0],Ye),X[1]+=Q.dot(B[1],Ye);return oe=j[0][0]*j[1][1]-j[1][0]*j[0][1],be=j[0][0]*X[1]-j[1][0]*X[0],ae=X[0]*j[1][1]-X[1]*j[0][1],ie=oe===0?0:ae/oe,Se=oe===0?0:be/oe,it=Q.vectorLen(Q.subtract(Lt,Mt)),mt=1e-6*it,ie<mt||Se<mt?(G[1]=Q.addArrays(Lt,Q.mulItems(Y,it/3)),G[2]=Q.addArrays(Mt,Q.mulItems(U,it/3))):(G[1]=Q.addArrays(Lt,Q.mulItems(Y,ie)),G[2]=Q.addArrays(Mt,Q.mulItems(U,Se))),G}function _(V,W,Y){return Y.map((U,G)=>E(V,W[G],U))}function E(V,W,Y){var U=Q.subtract(ee.q(V,Y),W),G=ee.qprime(V,Y),te=Q.mulMatrix(U,G),B=Q.sum(Q.squareItems(G))+2*Q.mulMatrix(U,ee.qprimeprime(V,Y));return B===0?Y:Y-te/B}function R(V){var W=[],Y,U,G;return V.forEach((te,B)=>{Y=B?U+Q.vectorLen(Q.subtract(te,G)):0,W.push(Y),U=Y,G=te}),W=W.map(te=>te/U),W}function M(V,W,Y){var U,G,te,B,j,X,oe,be;G=0,te=Math.floor(V.length/2);const ae=P(W,10);for(j=0,X=V.length;j<X;j++)oe=V[j],be=O(W,Y[j],ae,10),B=Q.subtract(ee.q(W,be),oe),U=B[0]*B[0]+B[1]*B[1],U>G&&(G=U,te=j);return[G,te]}var P=function(V,W){for(var Y,U=[0],G=V[0],te=0,B=1;B<=W;B++)Y=ee.q(V,B/W),te+=Q.vectorLen(Q.subtract(Y,G)),U.push(te),G=Y;return U=U.map(j=>j/te),U};function O(V,W,Y,U){if(W<0)return 0;if(W>1)return 1;for(var G,te,B,j,X,oe=1;oe<=U;oe++)if(W<=Y[oe]){j=(oe-1)/U,B=oe/U,te=Y[oe-1],G=Y[oe],X=(W-te)/(G-te)*(B-j)+j;break}return X}function H(V,W){return Q.normalize(Q.subtract(V,W))}class Q{static zeros_Xx2x2(W){for(var Y=[];W--;)Y.push([0,0]);return Y}static mulItems(W,Y){return W.map(U=>U*Y)}static mulMatrix(W,Y){return W.reduce((U,G,te)=>U+G*Y[te],0)}static subtract(W,Y){return W.map((U,G)=>U-Y[G])}static addArrays(W,Y){return W.map((U,G)=>U+Y[G])}static addItems(W,Y){return W.map(U=>U+Y)}static sum(W){return W.reduce((Y,U)=>Y+U)}static dot(W,Y){return Q.mulMatrix(W,Y)}static vectorLen(W){return Math.hypot(...W)}static divItems(W,Y){return W.map(U=>U/Y)}static squareItems(W){return W.map(Y=>Y*Y)}static normalize(W){return this.divItems(W,this.vectorLen(W))}}class ee{static q(W,Y){var U=1-Y,G=Q.mulItems(W[0],U*U*U),te=Q.mulItems(W[1],3*U*U*Y),B=Q.mulItems(W[2],3*U*Y*Y),j=Q.mulItems(W[3],Y*Y*Y);return Q.addArrays(Q.addArrays(G,te),Q.addArrays(B,j))}static qprime(W,Y){var U=1-Y,G=Q.mulItems(Q.subtract(W[1],W[0]),3*U*U),te=Q.mulItems(Q.subtract(W[2],W[1]),6*U*Y),B=Q.mulItems(Q.subtract(W[3],W[2]),3*Y*Y);return Q.addArrays(Q.addArrays(G,te),B)}static qprimeprime(W,Y){return Q.addArrays(Q.mulItems(Q.addArrays(Q.subtract(W[2],Q.mulItems(W[1],2)),W[0]),6*(1-Y)),Q.mulItems(Q.addArrays(Q.subtract(W[3],Q.mulItems(W[2],2)),W[1]),6*Y))}}c.exports=d,c.exports.fitCubic=g,c.exports.createTangent=H},(c,d,g)=>{var Pe,Hn,nt,oi,tt,Ra,It,Pa,wt,Oa;Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationLayer=void 0;var v=g(1),b=g(6),_=g(3),E=g(27),R=g(28);const M=1e3,P=9,O=new WeakSet;function H(Qt){return{width:Qt[2]-Qt[0],height:Qt[3]-Qt[1]}}class Q{static create(Z){switch(Z.data.annotationType){case v.AnnotationType.LINK:return new V(Z);case v.AnnotationType.TEXT:return new W(Z);case v.AnnotationType.WIDGET:switch(Z.data.fieldType){case"Tx":return new U(Z);case"Btn":return Z.data.radioButton?new te(Z):Z.data.checkBox?new G(Z):new B(Z);case"Ch":return new j(Z)}return new Y(Z);case v.AnnotationType.POPUP:return new X(Z);case v.AnnotationType.FREETEXT:return new be(Z);case v.AnnotationType.LINE:return new ae(Z);case v.AnnotationType.SQUARE:return new ie(Z);case v.AnnotationType.CIRCLE:return new Se(Z);case v.AnnotationType.POLYLINE:return new mt(Z);case v.AnnotationType.CARET:return new Tt(Z);case v.AnnotationType.INK:return new ht(Z);case v.AnnotationType.POLYGON:return new it(Z);case v.AnnotationType.HIGHLIGHT:return new Ye(Z);case v.AnnotationType.UNDERLINE:return new St(Z);case v.AnnotationType.SQUIGGLY:return new $t(Z);case v.AnnotationType.STRIKEOUT:return new Lt(Z);case v.AnnotationType.STAMP:return new Mt(Z);case v.AnnotationType.FILEATTACHMENT:return new jt(Z);default:return new ee(Z)}}}class ee{constructor(Z,{isRenderable:z=!1,ignoreBorder:K=!1,createQuadrilaterals:ne=!1}={}){this.isRenderable=z,this.data=Z.data,this.layer=Z.layer,this.page=Z.page,this.viewport=Z.viewport,this.linkService=Z.linkService,this.downloadManager=Z.downloadManager,this.imageResourcesPath=Z.imageResourcesPath,this.renderForms=Z.renderForms,this.svgFactory=Z.svgFactory,this.annotationStorage=Z.annotationStorage,this.enableScripting=Z.enableScripting,this.hasJSActions=Z.hasJSActions,this._fieldObjects=Z.fieldObjects,this._mouseState=Z.mouseState,z&&(this.container=this._createContainer(K)),ne&&(this.quadrilaterals=this._createQuadrilaterals(K))}_createContainer(Z=!1){const z=this.data,K=this.page,ne=this.viewport,Ae=document.createElement("section"),{width:ut,height:Rt}=H(z.rect),[yt,lt,at,ze]=ne.viewBox,ct=at-yt,Ze=ze-lt;Ae.setAttribute("data-annotation-id",z.id);const Ot=v.Util.normalizeRect([z.rect[0],K.view[3]-z.rect[1]+K.view[1],z.rect[2],K.view[3]-z.rect[3]+K.view[1]]);if(!Z&&z.borderStyle.width>0){Ae.style.borderWidth=`${z.borderStyle.width}px`;const Xt=z.borderStyle.horizontalCornerRadius,ur=z.borderStyle.verticalCornerRadius;if(Xt>0||ur>0){const A=`calc(${Xt}px * var(--scale-factor)) / calc(${ur}px * var(--scale-factor))`;Ae.style.borderRadius=A}else if(this instanceof te){const A=`calc(${ut}px * var(--scale-factor)) / calc(${Rt}px * var(--scale-factor))`;Ae.style.borderRadius=A}switch(z.borderStyle.style){case v.AnnotationBorderStyleType.SOLID:Ae.style.borderStyle="solid";break;case v.AnnotationBorderStyleType.DASHED:Ae.style.borderStyle="dashed";break;case v.AnnotationBorderStyleType.BEVELED:(0,v.warn)("Unimplemented border style: beveled");break;case v.AnnotationBorderStyleType.INSET:(0,v.warn)("Unimplemented border style: inset");break;case v.AnnotationBorderStyleType.UNDERLINE:Ae.style.borderBottomStyle="solid";break}const cr=z.borderColor||null;cr?Ae.style.borderColor=v.Util.makeHexColor(cr[0]|0,cr[1]|0,cr[2]|0):Ae.style.borderWidth=0}Ae.style.left=`${100*(Ot[0]-yt)/ct}%`,Ae.style.top=`${100*(Ot[1]-lt)/Ze}%`;const{rotation:Ht}=z;return z.hasOwnCanvas||Ht===0?(Ae.style.width=`${100*ut/ct}%`,Ae.style.height=`${100*Rt/Ze}%`):this.setRotation(Ht,Ae),Ae}setRotation(Z,z=this.container){const[K,ne,Ae,ut]=this.viewport.viewBox,Rt=Ae-K,yt=ut-ne,{width:lt,height:at}=H(this.data.rect);let ze,ct;Z%180===0?(ze=100*lt/Rt,ct=100*at/yt):(ze=100*at/Rt,ct=100*lt/yt),z.style.width=`${ze}%`,z.style.height=`${ct}%`,z.setAttribute("data-main-rotation",(360-Z)%360)}get _commonActions(){const Z=(z,K,ne)=>{const Ae=ne.detail[z];ne.target.style[K]=E.ColorConverters[`${Ae[0]}_HTML`](Ae.slice(1))};return(0,v.shadow)(this,"_commonActions",{display:z=>{const K=z.detail.display%2===1;this.container.style.visibility=K?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:K,print:z.detail.display===0||z.detail.display===3})},print:z=>{this.annotationStorage.setValue(this.data.id,{print:z.detail.print})},hidden:z=>{this.container.style.visibility=z.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:z.detail.hidden})},focus:z=>{setTimeout(()=>z.target.focus({preventScroll:!1}),0)},userName:z=>{z.target.title=z.detail.userName},readonly:z=>{z.detail.readonly?z.target.setAttribute("readonly",""):z.target.removeAttribute("readonly")},required:z=>{this._setRequired(z.target,z.detail.required)},bgColor:z=>{Z("bgColor","backgroundColor",z)},fillColor:z=>{Z("fillColor","backgroundColor",z)},fgColor:z=>{Z("fgColor","color",z)},textColor:z=>{Z("textColor","color",z)},borderColor:z=>{Z("borderColor","borderColor",z)},strokeColor:z=>{Z("strokeColor","borderColor",z)},rotation:z=>{const K=z.detail.rotation;this.setRotation(K),this.annotationStorage.setValue(this.data.id,{rotation:K})}})}_dispatchEventFromSandbox(Z,z){const K=this._commonActions;for(const ne of Object.keys(z.detail)){const Ae=Z[ne]||K[ne];Ae==null||Ae(z)}}_setDefaultPropertiesFromJS(Z){if(!this.enableScripting)return;const z=this.annotationStorage.getRawValue(this.data.id);if(!z)return;const K=this._commonActions;for(const[ne,Ae]of Object.entries(z)){const ut=K[ne];if(ut){const Rt={detail:{[ne]:Ae},target:Z};ut(Rt),delete z[ne]}}}_createQuadrilaterals(Z=!1){if(!this.data.quadPoints)return null;const z=[],K=this.data.rect;for(const ne of this.data.quadPoints)this.data.rect=[ne[2].x,ne[2].y,ne[1].x,ne[1].y],z.push(this._createContainer(Z));return this.data.rect=K,z}_createPopup(Z,z){let K=this.container;this.quadrilaterals&&(Z=Z||this.quadrilaterals,K=this.quadrilaterals[0]),Z||(Z=document.createElement("div"),Z.className="popupTriggerArea",K.append(Z));const Ae=new oe({container:K,trigger:Z,color:z.color,titleObj:z.titleObj,modificationDate:z.modificationDate,contentsObj:z.contentsObj,richText:z.richText,hideWrapper:!0}).render();Ae.style.left="100%",K.append(Ae)}_renderQuadrilaterals(Z){for(const z of this.quadrilaterals)z.className=Z;return this.quadrilaterals}render(){(0,v.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Z,z=null){const K=[];if(this._fieldObjects){const ne=this._fieldObjects[Z];if(ne)for(const{page:Ae,id:ut,exportValues:Rt}of ne){if(Ae===-1||ut===z)continue;const yt=typeof Rt=="string"?Rt:null,lt=document.querySelector(`[data-element-id="${ut}"]`);if(lt&&!O.has(lt)){(0,v.warn)(`_getElementsByName - element not allowed: ${ut}`);continue}K.push({id:ut,exportValue:yt,domElement:lt})}return K}for(const ne of document.getElementsByName(Z)){const{exportValue:Ae}=ne,ut=ne.getAttribute("data-element-id");ut!==z&&(!O.has(ne)||K.push({id:ut,exportValue:Ae,domElement:ne}))}return K}static get platform(){const Z=typeof navigator<"u"?navigator.platform:"";return(0,v.shadow)(this,"platform",{isWin:Z.includes("Win"),isMac:Z.includes("Mac")})}}class V extends ee{constructor(z,K=null){super(z,{isRenderable:!0,ignoreBorder:!!(K!=null&&K.ignoreBorder),createQuadrilaterals:!0});er(this,Pe);er(this,nt);this.isTooltipOnly=z.data.isTooltipOnly}render(){const{data:z,linkService:K}=this,ne=document.createElement("a");ne.setAttribute("data-element-id",z.id);let Ae=!1;return z.url?(K.addLinkAttributes(ne,z.url,z.newWindow),Ae=!0):z.action?(this._bindNamedAction(ne,z.action),Ae=!0):z.attachment?(this._bindAttachment(ne,z.attachment),Ae=!0):z.setOCGState?(ar(this,nt,oi).call(this,ne,z.setOCGState),Ae=!0):z.dest?(this._bindLink(ne,z.dest),Ae=!0):(z.actions&&(z.actions.Action||z.actions["Mouse Up"]||z.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ne,z),Ae=!0),z.resetForm?(this._bindResetFormAction(ne,z.resetForm),Ae=!0):this.isTooltipOnly&&!Ae&&(this._bindLink(ne,""),Ae=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((ut,Rt)=>{const yt=Rt===0?ne:ne.cloneNode();return ut.append(yt),ut}):(this.container.className="linkAnnotation",Ae&&this.container.append(ne),this.container)}_bindLink(z,K){z.href=this.linkService.getDestinationHash(K),z.onclick=()=>(K&&this.linkService.goToDestination(K),!1),(K||K==="")&&ar(this,Pe,Hn).call(this)}_bindNamedAction(z,K){z.href=this.linkService.getAnchorUrl(""),z.onclick=()=>(this.linkService.executeNamedAction(K),!1),ar(this,Pe,Hn).call(this)}_bindAttachment(z,K){z.href=this.linkService.getAnchorUrl(""),z.onclick=()=>{var ne;return(ne=this.downloadManager)==null||ne.openOrDownloadData(this.container,K.content,K.filename),!1},ar(this,Pe,Hn).call(this)}_bindJSAction(z,K){z.href=this.linkService.getAnchorUrl("");const ne=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Ae of Object.keys(K.actions)){const ut=ne.get(Ae);!ut||(z[ut]=()=>{var Rt;return(Rt=this.linkService.eventBus)==null||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K.id,name:Ae}}),!1})}z.onclick||(z.onclick=()=>!1),ar(this,Pe,Hn).call(this)}_bindResetFormAction(z,K){const ne=z.onclick;if(ne||(z.href=this.linkService.getAnchorUrl("")),ar(this,Pe,Hn).call(this),!this._fieldObjects){(0,v.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ne||(z.onclick=()=>!1);return}z.onclick=()=>{var ze;ne==null||ne();const{fields:Ae,refs:ut,include:Rt}=K,yt=[];if(Ae.length!==0||ut.length!==0){const ct=new Set(ut);for(const Ze of Ae){const Ot=this._fieldObjects[Ze]||[];for(const{id:Ht}of Ot)ct.add(Ht)}for(const Ze of Object.values(this._fieldObjects))for(const Ot of Ze)ct.has(Ot.id)===Rt&&yt.push(Ot)}else for(const ct of Object.values(this._fieldObjects))yt.push(...ct);const lt=this.annotationStorage,at=[];for(const ct of yt){const{id:Ze}=ct;switch(at.push(Ze),ct.type){case"text":{const Ht=ct.defaultValue||"";lt.setValue(Ze,{value:Ht});break}case"checkbox":case"radiobutton":{const Ht=ct.defaultValue===ct.exportValues;lt.setValue(Ze,{value:Ht});break}case"combobox":case"listbox":{const Ht=ct.defaultValue||"";lt.setValue(Ze,{value:Ht});break}default:continue}const Ot=document.querySelector(`[data-element-id="${Ze}"]`);if(Ot){if(!O.has(Ot)){(0,v.warn)(`_bindResetFormAction - element not allowed: ${Ze}`);continue}}else continue;Ot.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ze=this.linkService.eventBus)==null||ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:at,name:"ResetForm"}})),!1}}}Pe=new WeakSet,Hn=function(){this.container.setAttribute("data-internal-link","")},nt=new WeakSet,oi=function(z,K){z.href=this.linkService.getAnchorUrl(""),z.onclick=()=>(this.linkService.executeSetOCGState(K),!1),ar(this,Pe,Hn).call(this)};class W extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z})}render(){this.container.className="textAnnotation";const Z=document.createElement("img");return Z.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Z.alt="[{{type}} Annotation]",Z.dataset.l10nId="text_annotation_type",Z.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(Z,this.data),this.container.append(Z),this.container}}class Y extends ee{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(Z){const{isWin:z,isMac:K}=ee.platform;return z&&Z.ctrlKey||K&&Z.metaKey}_setEventListener(Z,z,K,ne){z.includes("mouse")?Z.addEventListener(z,Ae=>{var ut;(ut=this.linkService.eventBus)==null||ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:K,value:ne(Ae),shift:Ae.shiftKey,modifier:this._getKeyModifier(Ae)}})}):Z.addEventListener(z,Ae=>{var ut;(ut=this.linkService.eventBus)==null||ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:K,value:ne(Ae)}})})}_setEventListeners(Z,z,K){var ne;for(const[Ae,ut]of z)(ut==="Action"||((ne=this.data.actions)==null?void 0:ne[ut]))&&this._setEventListener(Z,Ae,ut,K)}_setBackgroundColor(Z){const z=this.data.backgroundColor||null;Z.style.backgroundColor=z===null?"transparent":v.Util.makeHexColor(z[0],z[1],z[2])}_setTextStyle(Z){const z=["left","center","right"],{fontColor:K}=this.data.defaultAppearanceData,ne=this.data.defaultAppearanceData.fontSize||P,Ae=Z.style;let ut;const Rt=2,yt=lt=>Math.round(10*lt)/10;if(this.data.multiLine){const lt=Math.abs(this.data.rect[3]-this.data.rect[1]-Rt),at=Math.round(lt/(v.LINE_FACTOR*ne))||1,ze=lt/at;ut=Math.min(ne,yt(ze/v.LINE_FACTOR))}else{const lt=Math.abs(this.data.rect[3]-this.data.rect[1]-Rt);ut=Math.min(ne,yt(lt/v.LINE_FACTOR))}Ae.fontSize=`calc(${ut}px * var(--scale-factor))`,Ae.color=v.Util.makeHexColor(K[0],K[1],K[2]),this.data.textAlignment!==null&&(Ae.textAlign=z[this.data.textAlignment])}_setRequired(Z,z){z?Z.setAttribute("required",!0):Z.removeAttribute("required"),Z.setAttribute("aria-required",z)}}class U extends Y{constructor(Z){const z=Z.renderForms||!Z.data.hasAppearance&&!!Z.data.fieldValue;super(Z,{isRenderable:z})}setPropertyOnSiblings(Z,z,K,ne){const Ae=this.annotationStorage;for(const ut of this._getElementsByName(Z.name,Z.id))ut.domElement&&(ut.domElement[z]=K),Ae.setValue(ut.id,{[ne]:K})}render(){var ne;const Z=this.annotationStorage,z=this.data.id;this.container.className="textWidgetAnnotation";let K=null;if(this.renderForms){const Ae=Z.getValue(z,{value:this.data.fieldValue});let ut=Ae.formattedValue||Ae.value||"";const Rt=Z.getValue(z,{charLimit:this.data.maxLen}).charLimit;Rt&&ut.length>Rt&&(ut=ut.slice(0,Rt));const yt={userValue:ut,formattedValue:null,valueOnFocus:""};this.data.multiLine?(K=document.createElement("textarea"),K.textContent=ut,this.data.doNotScroll&&(K.style.overflowY="hidden")):(K=document.createElement("input"),K.type="text",K.setAttribute("value",ut),this.data.doNotScroll&&(K.style.overflowX="hidden")),O.add(K),K.setAttribute("data-element-id",z),K.disabled=this.data.readOnly,K.name=this.data.fieldName,K.tabIndex=M,this._setRequired(K,this.data.required),Rt&&(K.maxLength=Rt),K.addEventListener("input",at=>{Z.setValue(z,{value:at.target.value}),this.setPropertyOnSiblings(K,"value",at.target.value,"value")}),K.addEventListener("resetform",at=>{var ct;const ze=(ct=this.data.defaultFieldValue)!=null?ct:"";K.value=yt.userValue=ze,yt.formattedValue=null});let lt=at=>{const{formattedValue:ze}=yt;ze!=null&&(at.target.value=ze),at.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){K.addEventListener("focus",ze=>{yt.userValue&&(ze.target.value=yt.userValue),yt.valueOnFocus=ze.target.value}),K.addEventListener("updatefromsandbox",ze=>{const ct={value(Ze){var Ot;yt.userValue=(Ot=Ze.detail.value)!=null?Ot:"",Z.setValue(z,{value:yt.userValue.toString()}),Ze.target.value=yt.userValue},formattedValue(Ze){const{formattedValue:Ot}=Ze.detail;yt.formattedValue=Ot,Ot!=null&&Ze.target!==document.activeElement&&(Ze.target.value=Ot),Z.setValue(z,{formattedValue:Ot})},selRange(Ze){Ze.target.setSelectionRange(...Ze.detail.selRange)},charLimit:Ze=>{var ur;const{charLimit:Ot}=Ze.detail,{target:Ht}=Ze;if(Ot===0){Ht.removeAttribute("maxLength");return}Ht.setAttribute("maxLength",Ot);let Xt=yt.userValue;!Xt||Xt.length<=Ot||(Xt=Xt.slice(0,Ot),Ht.value=yt.userValue=Xt,Z.setValue(z,{value:Xt}),(ur=this.linkService.eventBus)==null||ur.dispatch("dispatcheventinsandbox",{source:this,detail:{id:z,name:"Keystroke",value:Xt,willCommit:!0,commitKey:1,selStart:Ht.selectionStart,selEnd:Ht.selectionEnd}}))}};this._dispatchEventFromSandbox(ct,ze)}),K.addEventListener("keydown",ze=>{var Ot;let ct=-1;if(ze.key==="Escape"?ct=0:ze.key==="Enter"&&!this.data.multiLine?ct=2:ze.key==="Tab"&&(ct=3),ct===-1)return;const{value:Ze}=ze.target;yt.valueOnFocus!==Ze&&(yt.userValue=Ze,(Ot=this.linkService.eventBus)==null||Ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:z,name:"Keystroke",value:Ze,willCommit:!0,commitKey:ct,selStart:ze.target.selectionStart,selEnd:ze.target.selectionEnd}}))});const at=lt;lt=null,K.addEventListener("blur",ze=>{var Ze;const{value:ct}=ze.target;yt.userValue=ct,this._mouseState.isDown&&yt.valueOnFocus!==ct&&((Ze=this.linkService.eventBus)==null||Ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:z,name:"Keystroke",value:ct,willCommit:!0,commitKey:1,selStart:ze.target.selectionStart,selEnd:ze.target.selectionEnd}})),at(ze)}),(ne=this.data.actions)!=null&&ne.Keystroke&&K.addEventListener("beforeinput",ze=>{var A;const{data:ct,target:Ze}=ze,{value:Ot,selectionStart:Ht,selectionEnd:Xt}=Ze;let ur=Ht,cr=Xt;switch(ze.inputType){case"deleteWordBackward":{const re=Ot.substring(0,Ht).match(/\w*[^\w]*$/);re&&(ur-=re[0].length);break}case"deleteWordForward":{const re=Ot.substring(Ht).match(/^[^\w]*\w*/);re&&(cr+=re[0].length);break}case"deleteContentBackward":Ht===Xt&&(ur-=1);break;case"deleteContentForward":Ht===Xt&&(cr+=1);break}ze.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:z,name:"Keystroke",value:Ot,change:ct||"",willCommit:!1,selStart:ur,selEnd:cr}})}),this._setEventListeners(K,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ze=>ze.target.value)}if(lt&&K.addEventListener("blur",lt),this.data.comb){const ze=(this.data.rect[2]-this.data.rect[0])/Rt;K.classList.add("comb"),K.style.letterSpacing=`calc(${ze}px * var(--scale-factor) - 1ch)`}}else K=document.createElement("div"),K.textContent=this.data.fieldValue,K.style.verticalAlign="middle",K.style.display="table-cell";return this._setTextStyle(K),this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}class G extends Y{constructor(Z){super(Z,{isRenderable:Z.renderForms})}render(){const Z=this.annotationStorage,z=this.data,K=z.id;let ne=Z.getValue(K,{value:z.exportValue===z.fieldValue}).value;typeof ne=="string"&&(ne=ne!=="Off",Z.setValue(K,{value:ne})),this.container.className="buttonWidgetAnnotation checkBox";const Ae=document.createElement("input");return O.add(Ae),Ae.setAttribute("data-element-id",K),Ae.disabled=z.readOnly,this._setRequired(Ae,this.data.required),Ae.type="checkbox",Ae.name=z.fieldName,ne&&Ae.setAttribute("checked",!0),Ae.setAttribute("exportValue",z.exportValue),Ae.tabIndex=M,Ae.addEventListener("change",ut=>{const{name:Rt,checked:yt}=ut.target;for(const lt of this._getElementsByName(Rt,K)){const at=yt&&lt.exportValue===z.exportValue;lt.domElement&&(lt.domElement.checked=at),Z.setValue(lt.id,{value:at})}Z.setValue(K,{value:yt})}),Ae.addEventListener("resetform",ut=>{const Rt=z.defaultFieldValue||"Off";ut.target.checked=Rt===z.exportValue}),this.enableScripting&&this.hasJSActions&&(Ae.addEventListener("updatefromsandbox",ut=>{const Rt={value(yt){yt.target.checked=yt.detail.value!=="Off",Z.setValue(K,{value:yt.target.checked})}};this._dispatchEventFromSandbox(Rt,ut)}),this._setEventListeners(Ae,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ut=>ut.target.checked)),this._setBackgroundColor(Ae),this._setDefaultPropertiesFromJS(Ae),this.container.append(Ae),this.container}}class te extends Y{constructor(Z){super(Z,{isRenderable:Z.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const Z=this.annotationStorage,z=this.data,K=z.id;let ne=Z.getValue(K,{value:z.fieldValue===z.buttonValue}).value;typeof ne=="string"&&(ne=ne!==z.buttonValue,Z.setValue(K,{value:ne}));const Ae=document.createElement("input");if(O.add(Ae),Ae.setAttribute("data-element-id",K),Ae.disabled=z.readOnly,this._setRequired(Ae,this.data.required),Ae.type="radio",Ae.name=z.fieldName,ne&&Ae.setAttribute("checked",!0),Ae.tabIndex=M,Ae.addEventListener("change",ut=>{const{name:Rt,checked:yt}=ut.target;for(const lt of this._getElementsByName(Rt,K))Z.setValue(lt.id,{value:!1});Z.setValue(K,{value:yt})}),Ae.addEventListener("resetform",ut=>{const Rt=z.defaultFieldValue;ut.target.checked=Rt!=null&&Rt===z.buttonValue}),this.enableScripting&&this.hasJSActions){const ut=z.buttonValue;Ae.addEventListener("updatefromsandbox",Rt=>{const yt={value:lt=>{const at=ut===lt.detail.value;for(const ze of this._getElementsByName(lt.target.name)){const ct=at&&ze.id===K;ze.domElement&&(ze.domElement.checked=ct),Z.setValue(ze.id,{value:ct})}}};this._dispatchEventFromSandbox(yt,Rt)}),this._setEventListeners(Ae,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Rt=>Rt.target.checked)}return this._setBackgroundColor(Ae),this._setDefaultPropertiesFromJS(Ae),this.container.append(Ae),this.container}}class B extends V{constructor(Z){super(Z,{ignoreBorder:Z.data.hasAppearance})}render(){const Z=super.render();Z.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(Z.title=this.data.alternativeText);const z=Z.lastChild;return this.enableScripting&&this.hasJSActions&&z&&(this._setDefaultPropertiesFromJS(z),z.addEventListener("updatefromsandbox",K=>{this._dispatchEventFromSandbox({},K)})),Z}}class j extends Y{constructor(Z){super(Z,{isRenderable:Z.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const Z=this.annotationStorage,z=this.data.id,K=Z.getValue(z,{value:this.data.fieldValue}),ne=document.createElement("select");O.add(ne),ne.setAttribute("data-element-id",z),ne.disabled=this.data.readOnly,this._setRequired(ne,this.data.required),ne.name=this.data.fieldName,ne.tabIndex=M;let Ae=this.data.combo&&this.data.options.length>0;this.data.combo||(ne.size=this.data.options.length,this.data.multiSelect&&(ne.multiple=!0)),ne.addEventListener("resetform",lt=>{const at=this.data.defaultFieldValue;for(const ze of ne.options)ze.selected=ze.value===at});for(const lt of this.data.options){const at=document.createElement("option");at.textContent=lt.displayValue,at.value=lt.exportValue,K.value.includes(lt.exportValue)&&(at.setAttribute("selected",!0),Ae=!1),ne.append(at)}let ut=null;if(Ae){const lt=document.createElement("option");lt.value=" ",lt.setAttribute("hidden",!0),lt.setAttribute("selected",!0),ne.prepend(lt),ut=()=>{lt.remove(),ne.removeEventListener("input",ut),ut=null},ne.addEventListener("input",ut)}const Rt=(lt,at)=>{const ze=at?"value":"textContent",ct=lt.target.options;return lt.target.multiple?Array.prototype.filter.call(ct,Ze=>Ze.selected).map(Ze=>Ze[ze]):ct.selectedIndex===-1?null:ct[ct.selectedIndex][ze]},yt=lt=>{const at=lt.target.options;return Array.prototype.map.call(at,ze=>({displayValue:ze.textContent,exportValue:ze.value}))};return this.enableScripting&&this.hasJSActions?(ne.addEventListener("updatefromsandbox",lt=>{const at={value(ze){ut==null||ut();const ct=ze.detail.value,Ze=new Set(Array.isArray(ct)?ct:[ct]);for(const Ot of ne.options)Ot.selected=Ze.has(Ot.value);Z.setValue(z,{value:Rt(ze,!0)})},multipleSelection(ze){ne.multiple=!0},remove(ze){const ct=ne.options,Ze=ze.detail.remove;ct[Ze].selected=!1,ne.remove(Ze),ct.length>0&&Array.prototype.findIndex.call(ct,Ht=>Ht.selected)===-1&&(ct[0].selected=!0),Z.setValue(z,{value:Rt(ze,!0),items:yt(ze)})},clear(ze){for(;ne.length!==0;)ne.remove(0);Z.setValue(z,{value:null,items:[]})},insert(ze){const{index:ct,displayValue:Ze,exportValue:Ot}=ze.detail.insert,Ht=ne.children[ct],Xt=document.createElement("option");Xt.textContent=Ze,Xt.value=Ot,Ht?Ht.before(Xt):ne.append(Xt),Z.setValue(z,{value:Rt(ze,!0),items:yt(ze)})},items(ze){const{items:ct}=ze.detail;for(;ne.length!==0;)ne.remove(0);for(const Ze of ct){const{displayValue:Ot,exportValue:Ht}=Ze,Xt=document.createElement("option");Xt.textContent=Ot,Xt.value=Ht,ne.append(Xt)}ne.options.length>0&&(ne.options[0].selected=!0),Z.setValue(z,{value:Rt(ze,!0),items:yt(ze)})},indices(ze){const ct=new Set(ze.detail.indices);for(const Ze of ze.target.options)Ze.selected=ct.has(Ze.index);Z.setValue(z,{value:Rt(ze,!0)})},editable(ze){ze.target.disabled=!ze.detail.editable}};this._dispatchEventFromSandbox(at,lt)}),ne.addEventListener("input",lt=>{var ct;const at=Rt(lt,!0),ze=Rt(lt,!1);Z.setValue(z,{value:at}),(ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:z,name:"Keystroke",value:ze,changeEx:at,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(ne,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],lt=>lt.target.checked)):ne.addEventListener("input",function(lt){Z.setValue(z,{value:Rt(lt,!0)})}),this.data.combo&&this._setTextStyle(ne),this._setBackgroundColor(ne),this._setDefaultPropertiesFromJS(ne),this.container.append(ne),this.container}}const rt=class extends ee{constructor(Z){var ne,Ae,ut;const{data:z}=Z,K=!rt.IGNORE_TYPES.has(z.parentType)&&!!(((ne=z.titleObj)==null?void 0:ne.str)||((Ae=z.contentsObj)==null?void 0:Ae.str)||((ut=z.richText)==null?void 0:ut.str));super(Z,{isRenderable:K})}render(){this.container.className="popupAnnotation";const Z=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(Z.length===0)return this.container;const z=new oe({container:this.container,trigger:Array.from(Z),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),K=this.page,ne=v.Util.normalizeRect([this.data.parentRect[0],K.view[3]-this.data.parentRect[1]+K.view[1],this.data.parentRect[2],K.view[3]-this.data.parentRect[3]+K.view[1]]),Ae=ne[0]+this.data.parentRect[2]-this.data.parentRect[0],ut=ne[1],[Rt,yt,lt,at]=this.viewport.viewBox,ze=lt-Rt,ct=at-yt;return this.container.style.left=`${100*(Ae-Rt)/ze}%`,this.container.style.top=`${100*(ut-yt)/ct}%`,this.container.append(z.render()),this.container}};let X=rt;Gr(X,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class oe{constructor(Z){this.container=Z.container,this.trigger=Z.trigger,this.color=Z.color,this.titleObj=Z.titleObj,this.modificationDate=Z.modificationDate,this.contentsObj=Z.contentsObj,this.richText=Z.richText,this.hideWrapper=Z.hideWrapper||!1,this.pinned=!1}render(){var Rt,yt;const z=document.createElement("div");z.className="popupWrapper",this.hideElement=this.hideWrapper?z:this.container,this.hideElement.hidden=!0;const K=document.createElement("div");K.className="popup";const ne=this.color;if(ne){const lt=.7*(255-ne[0])+ne[0],at=.7*(255-ne[1])+ne[1],ze=.7*(255-ne[2])+ne[2];K.style.backgroundColor=v.Util.makeHexColor(lt|0,at|0,ze|0)}const Ae=document.createElement("h1");Ae.dir=this.titleObj.dir,Ae.textContent=this.titleObj.str,K.append(Ae);const ut=b.PDFDateString.toDateObject(this.modificationDate);if(ut){const lt=document.createElement("span");lt.className="popupDate",lt.textContent="{{date}}, {{time}}",lt.dataset.l10nId="annotation_date_string",lt.dataset.l10nArgs=JSON.stringify({date:ut.toLocaleDateString(),time:ut.toLocaleTimeString()}),K.append(lt)}if(((Rt=this.richText)==null?void 0:Rt.str)&&(!((yt=this.contentsObj)!=null&&yt.str)||this.contentsObj.str===this.richText.str))R.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:K}),K.lastChild.className="richText popupContent";else{const lt=this._formatContents(this.contentsObj);K.append(lt)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const lt of this.trigger)lt.addEventListener("click",this._toggle.bind(this)),lt.addEventListener("mouseover",this._show.bind(this,!1)),lt.addEventListener("mouseout",this._hide.bind(this,!1));return K.addEventListener("click",this._hide.bind(this,!0)),z.append(K),z}_formatContents({str:Z,dir:z}){const K=document.createElement("p");K.className="popupContent",K.dir=z;const ne=Z.split(/(?:\r\n?|\n)/);for(let Ae=0,ut=ne.length;Ae<ut;++Ae){const Rt=ne[Ae];K.append(document.createTextNode(Rt)),Ae<ut-1&&K.append(document.createElement("br"))}return K}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(Z=!1){Z&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(Z=!0){Z&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class be extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z,ignoreBorder:!0}),this.textContent=Z.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const Z=document.createElement("div");Z.className="annotationTextContent",Z.setAttribute("role","comment");for(const z of this.textContent){const K=document.createElement("span");K.textContent=z,Z.append(K)}this.container.append(Z)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ae extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const Z=this.data,{width:z,height:K}=H(Z.rect),ne=this.svgFactory.create(z,K,!0),Ae=this.svgFactory.createElement("svg:line");return Ae.setAttribute("x1",Z.rect[2]-Z.lineCoordinates[0]),Ae.setAttribute("y1",Z.rect[3]-Z.lineCoordinates[1]),Ae.setAttribute("x2",Z.rect[2]-Z.lineCoordinates[2]),Ae.setAttribute("y2",Z.rect[3]-Z.lineCoordinates[3]),Ae.setAttribute("stroke-width",Z.borderStyle.width||1),Ae.setAttribute("stroke","transparent"),Ae.setAttribute("fill","transparent"),ne.append(Ae),this.container.append(ne),this._createPopup(Ae,Z),this.container}}class ie extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const Z=this.data,{width:z,height:K}=H(Z.rect),ne=this.svgFactory.create(z,K,!0),Ae=Z.borderStyle.width,ut=this.svgFactory.createElement("svg:rect");return ut.setAttribute("x",Ae/2),ut.setAttribute("y",Ae/2),ut.setAttribute("width",z-Ae),ut.setAttribute("height",K-Ae),ut.setAttribute("stroke-width",Ae||1),ut.setAttribute("stroke","transparent"),ut.setAttribute("fill","transparent"),ne.append(ut),this.container.append(ne),this._createPopup(ut,Z),this.container}}class Se extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const Z=this.data,{width:z,height:K}=H(Z.rect),ne=this.svgFactory.create(z,K,!0),Ae=Z.borderStyle.width,ut=this.svgFactory.createElement("svg:ellipse");return ut.setAttribute("cx",z/2),ut.setAttribute("cy",K/2),ut.setAttribute("rx",z/2-Ae/2),ut.setAttribute("ry",K/2-Ae/2),ut.setAttribute("stroke-width",Ae||1),ut.setAttribute("stroke","transparent"),ut.setAttribute("fill","transparent"),ne.append(ut),this.container.append(ne),this._createPopup(ut,Z),this.container}}class mt extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const Z=this.data,{width:z,height:K}=H(Z.rect),ne=this.svgFactory.create(z,K,!0);let Ae=[];for(const Rt of Z.vertices){const yt=Rt.x-Z.rect[0],lt=Z.rect[3]-Rt.y;Ae.push(yt+","+lt)}Ae=Ae.join(" ");const ut=this.svgFactory.createElement(this.svgElementName);return ut.setAttribute("points",Ae),ut.setAttribute("stroke-width",Z.borderStyle.width||1),ut.setAttribute("stroke","transparent"),ut.setAttribute("fill","transparent"),ne.append(ut),this.container.append(ne),this._createPopup(ut,Z),this.container}}class it extends mt{constructor(Z){super(Z),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Tt extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ht extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const Z=this.data,{width:z,height:K}=H(Z.rect),ne=this.svgFactory.create(z,K,!0);for(const Ae of Z.inkLists){let ut=[];for(const yt of Ae){const lt=yt.x-Z.rect[0],at=Z.rect[3]-yt.y;ut.push(`${lt},${at}`)}ut=ut.join(" ");const Rt=this.svgFactory.createElement(this.svgElementName);Rt.setAttribute("points",ut),Rt.setAttribute("stroke-width",Z.borderStyle.width||1),Rt.setAttribute("stroke","transparent"),Rt.setAttribute("fill","transparent"),this._createPopup(Rt,Z),ne.append(Rt)}return this.container.append(ne),this.container}}class Ye extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class St extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class $t extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class Lt extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class Mt extends ee{constructor(Z){var K,ne,Ae;const z=!!(Z.data.hasPopup||((K=Z.data.titleObj)==null?void 0:K.str)||((ne=Z.data.contentsObj)==null?void 0:ne.str)||((Ae=Z.data.richText)==null?void 0:Ae.str));super(Z,{isRenderable:z,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class jt extends ee{constructor(Z){var ne;super(Z,{isRenderable:!0});const{filename:z,content:K}=this.data.file;this.filename=(0,b.getFilenameFromUrl)(z,!0),this.content=K,(ne=this.linkService.eventBus)==null||ne.dispatch("fileattachmentannotation",{source:this,filename:z,content:K})}render(){var z,K;this.container.className="fileAttachmentAnnotation";const Z=document.createElement("div");return Z.className="popupTriggerArea",Z.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((z=this.data.titleObj)==null?void 0:z.str)||((K=this.data.contentsObj)==null?void 0:K.str)||this.data.richText)&&this._createPopup(Z,this.data),this.container.append(Z),this.container}_download(){var Z;(Z=this.downloadManager)==null||Z.openOrDownloadData(this.container,this.content,this.filename)}}const Zt=class{static render(Z){var Rt,yt;const{annotations:z,div:K,viewport:ne,accessibilityManager:Ae}=Z;ar(this,It,Pa).call(this,K,ne);let ut=0;for(const lt of z){if(lt.annotationType!==v.AnnotationType.POPUP){const{width:ze,height:ct}=H(lt.rect);if(ze<=0||ct<=0)continue}const at=Q.create({data:lt,layer:K,page:Z.page,viewport:ne,linkService:Z.linkService,downloadManager:Z.downloadManager,imageResourcesPath:Z.imageResourcesPath||"",renderForms:Z.renderForms!==!1,svgFactory:new b.DOMSVGFactory,annotationStorage:Z.annotationStorage||new _.AnnotationStorage,enableScripting:Z.enableScripting,hasJSActions:Z.hasJSActions,fieldObjects:Z.fieldObjects,mouseState:Z.mouseState||{isDown:!1}});if(at.isRenderable){const ze=at.render();if(lt.hidden&&(ze.style.visibility="hidden"),Array.isArray(ze))for(const ct of ze)ct.style.zIndex=ut++,ar(Rt=Zt,tt,Ra).call(Rt,ct,lt.id,K,Ae);else ze.style.zIndex=ut++,at instanceof X?K.prepend(ze):ar(yt=Zt,tt,Ra).call(yt,ze,lt.id,K,Ae)}}ar(this,wt,Oa).call(this,K,Z.annotationCanvasMap)}static update(Z){const{annotationCanvasMap:z,div:K,viewport:ne}=Z;ar(this,It,Pa).call(this,K,ne),ar(this,wt,Oa).call(this,K,z),K.hidden=!1}};let Qe=Zt;tt=new WeakSet,Ra=function(Z,z,K,ne){const Ae=Z.firstChild||Z;Ae.id=`${b.AnnotationPrefix}${z}`,K.append(Z),ne==null||ne.moveElementInDOM(K,Z,Ae,!1)},It=new WeakSet,Pa=function(Z,{width:z,height:K,rotation:ne}){const{style:Ae}=Z,ut=ne%180!==0,Rt=Math.floor(z)+"px",yt=Math.floor(K)+"px";Ae.width=ut?yt:Rt,Ae.height=ut?Rt:yt,Z.setAttribute("data-main-rotation",ne)},wt=new WeakSet,Oa=function(Z,z){if(!!z){for(const[K,ne]of z){const Ae=Z.querySelector(`[data-annotation-id="${K}"]`);if(!Ae)continue;const{firstChild:ut}=Ae;ut?ut.nodeName==="CANVAS"?ut.replaceWith(ne):ut.before(ne):Ae.append(ne)}z.clear()}},er(Qe,tt),er(Qe,It),er(Qe,wt),d.AnnotationLayer=Qe},(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ColorConverters=void 0;function g(b){return Math.floor(Math.max(0,Math.min(1,b))*255).toString(16).padStart(2,"0")}class v{static CMYK_G([_,E,R,M]){return["G",1-Math.min(1,.3*_+.59*R+.11*E+M)]}static G_CMYK([_]){return["CMYK",0,0,0,1-_]}static G_RGB([_]){return["RGB",_,_,_]}static G_HTML([_]){const E=g(_);return`#${E}${E}${E}`}static RGB_G([_,E,R]){return["G",.3*_+.59*E+.11*R]}static RGB_HTML([_,E,R]){const M=g(_),P=g(E),O=g(R);return`#${M}${P}${O}`}static T_HTML(){return"#00000000"}static CMYK_RGB([_,E,R,M]){return["RGB",1-Math.min(1,_+M),1-Math.min(1,R+M),1-Math.min(1,E+M)]}static CMYK_HTML(_){const E=this.CMYK_RGB(_).slice(1);return this.RGB_HTML(E)}static RGB_CMYK([_,E,R]){const M=1-_,P=1-E,O=1-R,H=Math.min(M,P,O);return["CMYK",M,P,O,H]}}d.ColorConverters=v},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.XfaLayer=void 0;var v=g(19);class b{static setupStorage(E,R,M,P,O){const H=P.getValue(R,{value:null});switch(M.name){case"textarea":if(H.value!==null&&(E.textContent=H.value),O==="print")break;E.addEventListener("input",Q=>{P.setValue(R,{value:Q.target.value})});break;case"input":if(M.attributes.type==="radio"||M.attributes.type==="checkbox"){if(H.value===M.attributes.xfaOn?E.setAttribute("checked",!0):H.value===M.attributes.xfaOff&&E.removeAttribute("checked"),O==="print")break;E.addEventListener("change",Q=>{P.setValue(R,{value:Q.target.checked?Q.target.getAttribute("xfaOn"):Q.target.getAttribute("xfaOff")})})}else{if(H.value!==null&&E.setAttribute("value",H.value),O==="print")break;E.addEventListener("input",Q=>{P.setValue(R,{value:Q.target.value})})}break;case"select":if(H.value!==null)for(const Q of M.children)Q.attributes.value===H.value&&(Q.attributes.selected=!0);E.addEventListener("input",Q=>{const ee=Q.target.options,V=ee.selectedIndex===-1?"":ee[ee.selectedIndex].value;P.setValue(R,{value:V})});break}}static setAttributes({html:E,element:R,storage:M=null,intent:P,linkService:O}){const{attributes:H}=R,Q=E instanceof HTMLAnchorElement;H.type==="radio"&&(H.name=`${H.name}-${P}`);for(const[ee,V]of Object.entries(H))if(V!=null)switch(ee){case"class":V.length&&E.setAttribute(ee,V.join(" "));break;case"dataId":break;case"id":E.setAttribute("data-element-id",V);break;case"style":Object.assign(E.style,V);break;case"textContent":E.textContent=V;break;default:(!Q||ee!=="href"&&ee!=="newWindow")&&E.setAttribute(ee,V)}Q&&O.addLinkAttributes(E,H.href,H.newWindow),M&&H.dataId&&this.setupStorage(E,H.dataId,R,M)}static render(E){var W;const R=E.annotationStorage,M=E.linkService,P=E.xfaHtml,O=E.intent||"display",H=document.createElement(P.name);P.attributes&&this.setAttributes({html:H,element:P,intent:O,linkService:M});const Q=[[P,-1,H]],ee=E.div;if(ee.append(H),E.viewport){const Y=`matrix(${E.viewport.transform.join(",")})`;ee.style.transform=Y}O!=="richText"&&ee.setAttribute("class","xfaLayer xfaFont");const V=[];for(;Q.length>0;){const[Y,U,G]=Q.at(-1);if(U+1===Y.children.length){Q.pop();continue}const te=Y.children[++Q.at(-1)[1]];if(te===null)continue;const{name:B}=te;if(B==="#text"){const X=document.createTextNode(te.value);V.push(X),G.append(X);continue}let j;if((W=te==null?void 0:te.attributes)!=null&&W.xmlns?j=document.createElementNS(te.attributes.xmlns,B):j=document.createElement(B),G.append(j),te.attributes&&this.setAttributes({html:j,element:te,storage:R,intent:O,linkService:M}),te.children&&te.children.length>0)Q.push([te,-1,j]);else if(te.value){const X=document.createTextNode(te.value);v.XfaText.shouldBuildText(B)&&V.push(X),j.append(X)}}for(const Y of ee.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Y.setAttribute("readOnly",!0);return{textDivs:V}}static update(E){const R=`matrix(${E.viewport.transform.join(",")})`;E.div.style.transform=R,E.div.hidden=!1}}d.XfaLayer=b},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TextLayerRenderTask=void 0,d.renderTextLayer=ee;var v=g(1),b=g(6);const _=1e5,E=30,R=.8,M=new Map;function P(V,W){const Y=M.get(V);if(Y)return Y;W.save(),W.font=`${E}px ${V}`;const U=W.measureText("");let G=U.fontBoundingBoxAscent,te=Math.abs(U.fontBoundingBoxDescent);if(G){W.restore();const j=G/(G+te);return M.set(V,j),j}W.strokeStyle="red",W.clearRect(0,0,E,E),W.strokeText("g",0,0);let B=W.getImageData(0,0,E,E).data;te=0;for(let j=B.length-1-3;j>=0;j-=4)if(B[j]>0){te=Math.ceil(j/4/E);break}W.clearRect(0,0,E,E),W.strokeText("A",0,E),B=W.getImageData(0,0,E,E).data,G=0;for(let j=0,X=B.length;j<X;j+=4)if(B[j]>0){G=E-Math.floor(j/4/E);break}if(W.restore(),G){const j=G/(G+te);return M.set(V,j),j}return M.set(V,R),R}function O(V,W,Y,U){const G=document.createElement("span"),te={angle:0,canvasWidth:0,hasText:W.str!=="",hasEOL:W.hasEOL,fontSize:0};V._textDivs.push(G);const B=v.Util.transform(V._viewport.transform,W.transform);let j=Math.atan2(B[1],B[0]);const X=Y[W.fontName];X.vertical&&(j+=Math.PI/2);const oe=Math.hypot(B[2],B[3]),be=oe*P(X.fontFamily,U);let ae,ie;j===0?(ae=B[4],ie=B[5]-be):(ae=B[4]+be*Math.sin(j),ie=B[5]-be*Math.cos(j)),G.style.left=`${ae}px`,G.style.top=`${ie}px`,G.style.fontSize=`${oe}px`,G.style.fontFamily=X.fontFamily,te.fontSize=oe,G.setAttribute("role","presentation"),G.textContent=W.str,G.dir=W.dir,V._fontInspectorEnabled&&(G.dataset.fontName=W.fontName),j!==0&&(te.angle=j*(180/Math.PI));let Se=!1;if(W.str.length>1)Se=!0;else if(W.str!==" "&&W.transform[0]!==W.transform[3]){const mt=Math.abs(W.transform[0]),it=Math.abs(W.transform[3]);mt!==it&&Math.max(mt,it)/Math.min(mt,it)>1.5&&(Se=!0)}Se&&(X.vertical?te.canvasWidth=W.height*V._viewport.scale:te.canvasWidth=W.width*V._viewport.scale),V._textDivProperties.set(G,te),V._textContentStream&&V._layoutText(G)}function H(V){if(V._canceled)return;const W=V._textDivs,Y=V._capability;if(W.length>_){V._renderingDone=!0,Y.resolve();return}if(!V._textContentStream)for(const G of W)V._layoutText(G);V._renderingDone=!0,Y.resolve()}class Q{constructor({textContent:W,textContentStream:Y,container:U,viewport:G,textDivs:te,textContentItemsStr:B}){var j;this._textContent=W,this._textContentStream=Y,this._container=U,this._document=U.ownerDocument,this._viewport=G,this._textDivs=te||[],this._textContentItemsStr=B||[],this._fontInspectorEnabled=!!((j=globalThis.FontInspector)!=null&&j.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,v.createPromiseCapability)(),this._renderTimer=null,this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._textDivProperties=null,this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new v.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(W,Y){for(const U of W){if(U.str===void 0){if(U.type==="beginMarkedContentProps"||U.type==="beginMarkedContent"){const G=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),U.id!==null&&this._container.setAttribute("id",`${U.id}`),G.append(this._container)}else U.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(U.str),O(this,U,Y,this._layoutTextCtx)}}_layoutText(W){const Y=this._textDivProperties.get(W);let U="";if(Y.canvasWidth!==0&&Y.hasText){const{fontFamily:G}=W.style,{fontSize:te}=Y;(te!==this._layoutTextLastFontSize||G!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${te*this._devicePixelRatio}px ${G}`,this._layoutTextLastFontSize=te,this._layoutTextLastFontFamily=G);const{width:B}=this._layoutTextCtx.measureText(W.textContent);B>0&&(U=`scaleX(${this._devicePixelRatio*Y.canvasWidth/B})`)}if(Y.angle!==0&&(U=`rotate(${Y.angle}deg) ${U}`),U.length>0&&(W.style.transform=U),Y.hasText&&this._container.append(W),Y.hasEOL){const G=document.createElement("br");G.setAttribute("role","presentation"),this._container.append(G)}}_render(W=0){const Y=(0,v.createPromiseCapability)();let U=Object.create(null);const G=this._document.createElement("canvas");if(G.height=G.width=E,this._layoutTextCtx=G.getContext("2d",{alpha:!1}),this._textContent){const te=this._textContent.items,B=this._textContent.styles;this._processItems(te,B),Y.resolve()}else if(this._textContentStream){const te=()=>{this._reader.read().then(({value:B,done:j})=>{if(j){Y.resolve();return}Object.assign(U,B.styles),this._processItems(B.items,U),te()},Y.reject)};this._reader=this._textContentStream.getReader(),te()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');Y.promise.then(()=>{U=null,W?((0,b.deprecated)("The TextLayerRender `timeout` parameter will be removed in the future, since streaming of textContent has made it obsolete."),this._renderTimer=setTimeout(()=>{H(this),this._renderTimer=null},W)):H(this)},this._capability.reject)}}d.TextLayerRenderTask=Q;function ee(V){const W=new Q({textContent:V.textContent,textContentStream:V.textContentStream,container:V.container,viewport:V.viewport,textDivs:V.textDivs,textContentItemsStr:V.textContentItemsStr});return W._render(V.timeout),W}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.SVGGraphics=void 0;var v=g(6),b=g(1),_=g(12);let E=class{constructor(){(0,b.unreachable)("Not implemented: SVGGraphics")}};d.SVGGraphics=E;{let W=function(j){let X=[];const oe=[];for(const be of j){if(be.fn==="save"){X.push({fnId:92,fn:"group",items:[]}),oe.push(X),X=X.at(-1).items;continue}be.fn==="restore"?X=oe.pop():X.push(be)}return X},Y=function(j){if(Number.isInteger(j))return j.toString();const X=j.toFixed(10);let oe=X.length-1;if(X[oe]!=="0")return X;do oe--;while(X[oe]==="0");return X.substring(0,X[oe]==="."?oe:oe+1)},U=function(j){if(j[4]===0&&j[5]===0){if(j[1]===0&&j[2]===0)return j[0]===1&&j[3]===1?"":`scale(${Y(j[0])} ${Y(j[3])})`;if(j[0]===j[3]&&j[1]===-j[2]){const X=Math.acos(j[0])*180/Math.PI;return`rotate(${Y(X)})`}}else if(j[0]===1&&j[1]===0&&j[2]===0&&j[3]===1)return`translate(${Y(j[4])} ${Y(j[5])})`;return`matrix(${Y(j[0])} ${Y(j[1])} ${Y(j[2])} ${Y(j[3])} ${Y(j[4])} ${Y(j[5])})`};const R={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},M="http://www.w3.org/XML/1998/namespace",P="http://www.w3.org/1999/xlink",O=["butt","round","square"],H=["miter","round","bevel"],Q=function(j,X="",oe=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!oe)return URL.createObjectURL(new Blob([j],{type:X}));const be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let ae=`data:${X};base64,`;for(let ie=0,Se=j.length;ie<Se;ie+=3){const mt=j[ie]&255,it=j[ie+1]&255,Tt=j[ie+2]&255,ht=mt>>2,Ye=(mt&3)<<4|it>>4,St=ie+1<Se?(it&15)<<2|Tt>>6:64,$t=ie+2<Se?Tt&63:64;ae+=be[ht]+be[Ye]+be[St]+be[$t]}return ae},ee=function(){const j=new Uint8Array([137,80,78,71,13,10,26,10]),X=12,oe=new Int32Array(256);for(let Tt=0;Tt<256;Tt++){let ht=Tt;for(let Ye=0;Ye<8;Ye++)ht&1?ht=3988292384^ht>>1&2147483647:ht=ht>>1&2147483647;oe[Tt]=ht}function be(Tt,ht,Ye){let St=-1;for(let $t=ht;$t<Ye;$t++){const Lt=(St^Tt[$t])&255,Mt=oe[Lt];St=St>>>8^Mt}return St^-1}function ae(Tt,ht,Ye,St){let $t=St;const Lt=ht.length;Ye[$t]=Lt>>24&255,Ye[$t+1]=Lt>>16&255,Ye[$t+2]=Lt>>8&255,Ye[$t+3]=Lt&255,$t+=4,Ye[$t]=Tt.charCodeAt(0)&255,Ye[$t+1]=Tt.charCodeAt(1)&255,Ye[$t+2]=Tt.charCodeAt(2)&255,Ye[$t+3]=Tt.charCodeAt(3)&255,$t+=4,Ye.set(ht,$t),$t+=ht.length;const Mt=be(Ye,St+4,$t);Ye[$t]=Mt>>24&255,Ye[$t+1]=Mt>>16&255,Ye[$t+2]=Mt>>8&255,Ye[$t+3]=Mt&255}function ie(Tt,ht,Ye){let St=1,$t=0;for(let Lt=ht;Lt<Ye;++Lt)St=(St+(Tt[Lt]&255))%65521,$t=($t+St)%65521;return $t<<16|St}function Se(Tt){if(!_.isNodeJS)return mt(Tt);try{let ht;parseInt(process.versions.node)>=8?ht=Tt:ht=Buffer.from(Tt);const Ye=require$$5.deflateSync(ht,{level:9});return Ye instanceof Uint8Array?Ye:new Uint8Array(Ye)}catch(ht){(0,b.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ht)}return mt(Tt)}function mt(Tt){let ht=Tt.length;const Ye=65535,St=Math.ceil(ht/Ye),$t=new Uint8Array(2+ht+St*5+4);let Lt=0;$t[Lt++]=120,$t[Lt++]=156;let Mt=0;for(;ht>Ye;)$t[Lt++]=0,$t[Lt++]=255,$t[Lt++]=255,$t[Lt++]=0,$t[Lt++]=0,$t.set(Tt.subarray(Mt,Mt+Ye),Lt),Lt+=Ye,Mt+=Ye,ht-=Ye;$t[Lt++]=1,$t[Lt++]=ht&255,$t[Lt++]=ht>>8&255,$t[Lt++]=~ht&65535&255,$t[Lt++]=(~ht&65535)>>8&255,$t.set(Tt.subarray(Mt),Lt),Lt+=Tt.length-Mt;const jt=ie(Tt,0,Tt.length);return $t[Lt++]=jt>>24&255,$t[Lt++]=jt>>16&255,$t[Lt++]=jt>>8&255,$t[Lt++]=jt&255,$t}function it(Tt,ht,Ye,St){const $t=Tt.width,Lt=Tt.height;let Mt,jt,Qe;const Pe=Tt.data;switch(ht){case b.ImageKind.GRAYSCALE_1BPP:jt=0,Mt=1,Qe=$t+7>>3;break;case b.ImageKind.RGB_24BPP:jt=2,Mt=8,Qe=$t*3;break;case b.ImageKind.RGBA_32BPP:jt=6,Mt=8,Qe=$t*4;break;default:throw new Error("invalid format")}const Ee=new Uint8Array((1+Qe)*Lt);let nt=0,st=0;for(let wt=0;wt<Lt;++wt)Ee[nt++]=0,Ee.set(Pe.subarray(st,st+Qe),nt),st+=Qe,nt+=Qe;if(ht===b.ImageKind.GRAYSCALE_1BPP&&St){nt=0;for(let wt=0;wt<Lt;wt++){nt++;for(let kt=0;kt<Qe;kt++)Ee[nt++]^=255}}const rt=new Uint8Array([$t>>24&255,$t>>16&255,$t>>8&255,$t&255,Lt>>24&255,Lt>>16&255,Lt>>8&255,Lt&255,Mt,jt,0,0,0]),tt=Se(Ee),vt=j.length+X*3+rt.length+tt.length,It=new Uint8Array(vt);let Vt=0;return It.set(j,Vt),Vt+=j.length,ae("IHDR",rt,It,Vt),Vt+=X+rt.length,ae("IDATA",tt,It,Vt),Vt+=X+tt.length,ae("IEND",new Uint8Array(0),It,Vt),Q(It,"image/png",Ye)}return function(ht,Ye,St){const $t=ht.kind===void 0?b.ImageKind.GRAYSCALE_1BPP:ht.kind;return it(ht,$t,Ye,St)}}();class V{constructor(){this.fontSizeScale=1,this.fontWeight=R.fontWeight,this.fontSize=0,this.textMatrix=b.IDENTITY_MATRIX,this.fontMatrix=b.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=b.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=R.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(X,oe){this.x=X,this.y=oe}}let G=0,te=0,B=0;d.SVGGraphics=E=class{constructor(j,X,oe=!1){(0,v.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new v.DOMSVGFactory,this.current=new V,this.transformMatrix=b.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=j,this.objs=X,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!oe,this._operatorIdMapping=[];for(const be in b.OPS)this._operatorIdMapping[b.OPS[be]]=be}getObject(j,X=null){return typeof j=="string"?j.startsWith("g_")?this.commonObjs.get(j):this.objs.get(j):X}save(){this.transformStack.push(this.transformMatrix);const j=this.current;this.extraStack.push(j),this.current=j.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(j){this.save(),this.executeOpTree(j),this.restore()}loadDependencies(j){const X=j.fnArray,oe=j.argsArray;for(let be=0,ae=X.length;be<ae;be++)if(X[be]===b.OPS.dependency)for(const ie of oe[be]){const Se=ie.startsWith("g_")?this.commonObjs:this.objs,mt=new Promise(it=>{Se.get(ie,it)});this.current.dependencies.push(mt)}return Promise.all(this.current.dependencies)}transform(j,X,oe,be,ae,ie){const Se=[j,X,oe,be,ae,ie];this.transformMatrix=b.Util.transform(this.transformMatrix,Se),this.tgrp=null}getSVG(j,X){this.viewport=X;const oe=this._initialize(X);return this.loadDependencies(j).then(()=>(this.transformMatrix=b.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(j)),oe))}convertOpList(j){const X=this._operatorIdMapping,oe=j.argsArray,be=j.fnArray,ae=[];for(let ie=0,Se=be.length;ie<Se;ie++){const mt=be[ie];ae.push({fnId:mt,fn:X[mt],args:oe[ie]})}return W(ae)}executeOpTree(j){for(const X of j){const oe=X.fn,be=X.fnId,ae=X.args;switch(be|0){case b.OPS.beginText:this.beginText();break;case b.OPS.dependency:break;case b.OPS.setLeading:this.setLeading(ae);break;case b.OPS.setLeadingMoveText:this.setLeadingMoveText(ae[0],ae[1]);break;case b.OPS.setFont:this.setFont(ae);break;case b.OPS.showText:this.showText(ae[0]);break;case b.OPS.showSpacedText:this.showText(ae[0]);break;case b.OPS.endText:this.endText();break;case b.OPS.moveText:this.moveText(ae[0],ae[1]);break;case b.OPS.setCharSpacing:this.setCharSpacing(ae[0]);break;case b.OPS.setWordSpacing:this.setWordSpacing(ae[0]);break;case b.OPS.setHScale:this.setHScale(ae[0]);break;case b.OPS.setTextMatrix:this.setTextMatrix(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]);break;case b.OPS.setTextRise:this.setTextRise(ae[0]);break;case b.OPS.setTextRenderingMode:this.setTextRenderingMode(ae[0]);break;case b.OPS.setLineWidth:this.setLineWidth(ae[0]);break;case b.OPS.setLineJoin:this.setLineJoin(ae[0]);break;case b.OPS.setLineCap:this.setLineCap(ae[0]);break;case b.OPS.setMiterLimit:this.setMiterLimit(ae[0]);break;case b.OPS.setFillRGBColor:this.setFillRGBColor(ae[0],ae[1],ae[2]);break;case b.OPS.setStrokeRGBColor:this.setStrokeRGBColor(ae[0],ae[1],ae[2]);break;case b.OPS.setStrokeColorN:this.setStrokeColorN(ae);break;case b.OPS.setFillColorN:this.setFillColorN(ae);break;case b.OPS.shadingFill:this.shadingFill(ae[0]);break;case b.OPS.setDash:this.setDash(ae[0],ae[1]);break;case b.OPS.setRenderingIntent:this.setRenderingIntent(ae[0]);break;case b.OPS.setFlatness:this.setFlatness(ae[0]);break;case b.OPS.setGState:this.setGState(ae[0]);break;case b.OPS.fill:this.fill();break;case b.OPS.eoFill:this.eoFill();break;case b.OPS.stroke:this.stroke();break;case b.OPS.fillStroke:this.fillStroke();break;case b.OPS.eoFillStroke:this.eoFillStroke();break;case b.OPS.clip:this.clip("nonzero");break;case b.OPS.eoClip:this.clip("evenodd");break;case b.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case b.OPS.paintImageXObject:this.paintImageXObject(ae[0]);break;case b.OPS.paintInlineImageXObject:this.paintInlineImageXObject(ae[0]);break;case b.OPS.paintImageMaskXObject:this.paintImageMaskXObject(ae[0]);break;case b.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(ae[0],ae[1]);break;case b.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case b.OPS.closePath:this.closePath();break;case b.OPS.closeStroke:this.closeStroke();break;case b.OPS.closeFillStroke:this.closeFillStroke();break;case b.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case b.OPS.nextLine:this.nextLine();break;case b.OPS.transform:this.transform(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]);break;case b.OPS.constructPath:this.constructPath(ae[0],ae[1]);break;case b.OPS.endPath:this.endPath();break;case 92:this.group(X.items);break;default:(0,b.warn)(`Unimplemented operator ${oe}`);break}}}setWordSpacing(j){this.current.wordSpacing=j}setCharSpacing(j){this.current.charSpacing=j}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(j,X,oe,be,ae,ie){const Se=this.current;Se.textMatrix=Se.lineMatrix=[j,X,oe,be,ae,ie],Se.textMatrixScale=Math.hypot(j,X),Se.x=Se.lineX=0,Se.y=Se.lineY=0,Se.xcoords=[],Se.ycoords=[],Se.tspan=this.svgFactory.createElement("svg:tspan"),Se.tspan.setAttributeNS(null,"font-family",Se.fontFamily),Se.tspan.setAttributeNS(null,"font-size",`${Y(Se.fontSize)}px`),Se.tspan.setAttributeNS(null,"y",Y(-Se.y)),Se.txtElement=this.svgFactory.createElement("svg:text"),Se.txtElement.append(Se.tspan)}beginText(){const j=this.current;j.x=j.lineX=0,j.y=j.lineY=0,j.textMatrix=b.IDENTITY_MATRIX,j.lineMatrix=b.IDENTITY_MATRIX,j.textMatrixScale=1,j.tspan=this.svgFactory.createElement("svg:tspan"),j.txtElement=this.svgFactory.createElement("svg:text"),j.txtgrp=this.svgFactory.createElement("svg:g"),j.xcoords=[],j.ycoords=[]}moveText(j,X){const oe=this.current;oe.x=oe.lineX+=j,oe.y=oe.lineY+=X,oe.xcoords=[],oe.ycoords=[],oe.tspan=this.svgFactory.createElement("svg:tspan"),oe.tspan.setAttributeNS(null,"font-family",oe.fontFamily),oe.tspan.setAttributeNS(null,"font-size",`${Y(oe.fontSize)}px`),oe.tspan.setAttributeNS(null,"y",Y(-oe.y))}showText(j){const X=this.current,oe=X.font,be=X.fontSize;if(be===0)return;const ae=X.fontSizeScale,ie=X.charSpacing,Se=X.wordSpacing,mt=X.fontDirection,it=X.textHScale*mt,Tt=oe.vertical,ht=Tt?1:-1,Ye=oe.defaultVMetrics,St=be*X.fontMatrix[0];let $t=0;for(const jt of j){if(jt===null){$t+=mt*Se;continue}else if(typeof jt=="number"){$t+=ht*jt*be/1e3;continue}const Qe=(jt.isSpace?Se:0)+ie,Pe=jt.fontChar;let Ee,nt,st=jt.width;if(Tt){let tt;const vt=jt.vmetric||Ye;tt=jt.vmetric?vt[1]:st*.5,tt=-tt*St;const It=vt[2]*St;st=vt?-vt[0]:st,Ee=tt/ae,nt=($t+It)/ae}else Ee=$t/ae,nt=0;(jt.isInFont||oe.missingFile)&&(X.xcoords.push(X.x+Ee),Tt&&X.ycoords.push(-X.y+nt),X.tspan.textContent+=Pe);let rt;Tt?rt=st*St-Qe*mt:rt=st*St+Qe*mt,$t+=rt}X.tspan.setAttributeNS(null,"x",X.xcoords.map(Y).join(" ")),Tt?X.tspan.setAttributeNS(null,"y",X.ycoords.map(Y).join(" ")):X.tspan.setAttributeNS(null,"y",Y(-X.y)),Tt?X.y-=$t:X.x+=$t*it,X.tspan.setAttributeNS(null,"font-family",X.fontFamily),X.tspan.setAttributeNS(null,"font-size",`${Y(X.fontSize)}px`),X.fontStyle!==R.fontStyle&&X.tspan.setAttributeNS(null,"font-style",X.fontStyle),X.fontWeight!==R.fontWeight&&X.tspan.setAttributeNS(null,"font-weight",X.fontWeight);const Lt=X.textRenderingMode&b.TextRenderingMode.FILL_STROKE_MASK;if(Lt===b.TextRenderingMode.FILL||Lt===b.TextRenderingMode.FILL_STROKE?(X.fillColor!==R.fillColor&&X.tspan.setAttributeNS(null,"fill",X.fillColor),X.fillAlpha<1&&X.tspan.setAttributeNS(null,"fill-opacity",X.fillAlpha)):X.textRenderingMode===b.TextRenderingMode.ADD_TO_PATH?X.tspan.setAttributeNS(null,"fill","transparent"):X.tspan.setAttributeNS(null,"fill","none"),Lt===b.TextRenderingMode.STROKE||Lt===b.TextRenderingMode.FILL_STROKE){const jt=1/(X.textMatrixScale||1);this._setStrokeAttributes(X.tspan,jt)}let Mt=X.textMatrix;X.textRise!==0&&(Mt=Mt.slice(),Mt[5]+=X.textRise),X.txtElement.setAttributeNS(null,"transform",`${U(Mt)} scale(${Y(it)}, -1)`),X.txtElement.setAttributeNS(M,"xml:space","preserve"),X.txtElement.append(X.tspan),X.txtgrp.append(X.txtElement),this._ensureTransformGroup().append(X.txtElement)}setLeadingMoveText(j,X){this.setLeading(-X),this.moveText(j,X)}addFontStyle(j){if(!j.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const X=Q(j.data,j.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${j.loadedName}"; src: url(${X}); }
`}setFont(j){const X=this.current,oe=this.commonObjs.get(j[0]);let be=j[1];X.font=oe,this.embedFonts&&!oe.missingFile&&!this.embeddedFonts[oe.loadedName]&&(this.addFontStyle(oe),this.embeddedFonts[oe.loadedName]=oe),X.fontMatrix=oe.fontMatrix||b.FONT_IDENTITY_MATRIX;let ae="normal";oe.black?ae="900":oe.bold&&(ae="bold");const ie=oe.italic?"italic":"normal";be<0?(be=-be,X.fontDirection=-1):X.fontDirection=1,X.fontSize=be,X.fontFamily=oe.loadedName,X.fontWeight=ae,X.fontStyle=ie,X.tspan=this.svgFactory.createElement("svg:tspan"),X.tspan.setAttributeNS(null,"y",Y(-X.y)),X.xcoords=[],X.ycoords=[]}endText(){var X;const j=this.current;j.textRenderingMode&b.TextRenderingMode.ADD_TO_PATH_FLAG&&((X=j.txtElement)==null?void 0:X.hasChildNodes())&&(j.element=j.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(j){j>0&&(this.current.lineWidth=j)}setLineCap(j){this.current.lineCap=O[j]}setLineJoin(j){this.current.lineJoin=H[j]}setMiterLimit(j){this.current.miterLimit=j}setStrokeAlpha(j){this.current.strokeAlpha=j}setStrokeRGBColor(j,X,oe){this.current.strokeColor=b.Util.makeHexColor(j,X,oe)}setFillAlpha(j){this.current.fillAlpha=j}setFillRGBColor(j,X,oe){this.current.fillColor=b.Util.makeHexColor(j,X,oe),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(j){this.current.strokeColor=this._makeColorN_Pattern(j)}setFillColorN(j){this.current.fillColor=this._makeColorN_Pattern(j)}shadingFill(j){const X=this.viewport.width,oe=this.viewport.height,be=b.Util.inverseTransform(this.transformMatrix),ae=b.Util.applyTransform([0,0],be),ie=b.Util.applyTransform([0,oe],be),Se=b.Util.applyTransform([X,0],be),mt=b.Util.applyTransform([X,oe],be),it=Math.min(ae[0],ie[0],Se[0],mt[0]),Tt=Math.min(ae[1],ie[1],Se[1],mt[1]),ht=Math.max(ae[0],ie[0],Se[0],mt[0]),Ye=Math.max(ae[1],ie[1],Se[1],mt[1]),St=this.svgFactory.createElement("svg:rect");St.setAttributeNS(null,"x",it),St.setAttributeNS(null,"y",Tt),St.setAttributeNS(null,"width",ht-it),St.setAttributeNS(null,"height",Ye-Tt),St.setAttributeNS(null,"fill",this._makeShadingPattern(j)),this.current.fillAlpha<1&&St.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(St)}_makeColorN_Pattern(j){return j[0]==="TilingPattern"?this._makeTilingPattern(j):this._makeShadingPattern(j)}_makeTilingPattern(j){const X=j[1],oe=j[2],be=j[3]||b.IDENTITY_MATRIX,[ae,ie,Se,mt]=j[4],it=j[5],Tt=j[6],ht=j[7],Ye=`shading${B++}`,[St,$t,Lt,Mt]=b.Util.normalizeRect([...b.Util.applyTransform([ae,ie],be),...b.Util.applyTransform([Se,mt],be)]),[jt,Qe]=b.Util.singularValueDecompose2dScale(be),Pe=it*jt,Ee=Tt*Qe,nt=this.svgFactory.createElement("svg:pattern");nt.setAttributeNS(null,"id",Ye),nt.setAttributeNS(null,"patternUnits","userSpaceOnUse"),nt.setAttributeNS(null,"width",Pe),nt.setAttributeNS(null,"height",Ee),nt.setAttributeNS(null,"x",`${St}`),nt.setAttributeNS(null,"y",`${$t}`);const st=this.svg,rt=this.transformMatrix,tt=this.current.fillColor,vt=this.current.strokeColor,It=this.svgFactory.create(Lt-St,Mt-$t);if(this.svg=It,this.transformMatrix=be,ht===2){const Vt=b.Util.makeHexColor(...X);this.current.fillColor=Vt,this.current.strokeColor=Vt}return this.executeOpTree(this.convertOpList(oe)),this.svg=st,this.transformMatrix=rt,this.current.fillColor=tt,this.current.strokeColor=vt,nt.append(It.childNodes[0]),this.defs.append(nt),`url(#${Ye})`}_makeShadingPattern(j){switch(typeof j=="string"&&(j=this.objs.get(j)),j[0]){case"RadialAxial":const X=`shading${B++}`,oe=j[3];let be;switch(j[1]){case"axial":const ae=j[4],ie=j[5];be=this.svgFactory.createElement("svg:linearGradient"),be.setAttributeNS(null,"id",X),be.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),be.setAttributeNS(null,"x1",ae[0]),be.setAttributeNS(null,"y1",ae[1]),be.setAttributeNS(null,"x2",ie[0]),be.setAttributeNS(null,"y2",ie[1]);break;case"radial":const Se=j[4],mt=j[5],it=j[6],Tt=j[7];be=this.svgFactory.createElement("svg:radialGradient"),be.setAttributeNS(null,"id",X),be.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),be.setAttributeNS(null,"cx",mt[0]),be.setAttributeNS(null,"cy",mt[1]),be.setAttributeNS(null,"r",Tt),be.setAttributeNS(null,"fx",Se[0]),be.setAttributeNS(null,"fy",Se[1]),be.setAttributeNS(null,"fr",it);break;default:throw new Error(`Unknown RadialAxial type: ${j[1]}`)}for(const ae of oe){const ie=this.svgFactory.createElement("svg:stop");ie.setAttributeNS(null,"offset",ae[0]),ie.setAttributeNS(null,"stop-color",ae[1]),be.append(ie)}return this.defs.append(be),`url(#${X})`;case"Mesh":return(0,b.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${j[0]}`)}}setDash(j,X){this.current.dashArray=j,this.current.dashPhase=X}constructPath(j,X){const oe=this.current;let be=oe.x,ae=oe.y,ie=[],Se=0;for(const mt of j)switch(mt|0){case b.OPS.rectangle:be=X[Se++],ae=X[Se++];const it=X[Se++],Tt=X[Se++],ht=be+it,Ye=ae+Tt;ie.push("M",Y(be),Y(ae),"L",Y(ht),Y(ae),"L",Y(ht),Y(Ye),"L",Y(be),Y(Ye),"Z");break;case b.OPS.moveTo:be=X[Se++],ae=X[Se++],ie.push("M",Y(be),Y(ae));break;case b.OPS.lineTo:be=X[Se++],ae=X[Se++],ie.push("L",Y(be),Y(ae));break;case b.OPS.curveTo:be=X[Se+4],ae=X[Se+5],ie.push("C",Y(X[Se]),Y(X[Se+1]),Y(X[Se+2]),Y(X[Se+3]),Y(be),Y(ae)),Se+=6;break;case b.OPS.curveTo2:ie.push("C",Y(be),Y(ae),Y(X[Se]),Y(X[Se+1]),Y(X[Se+2]),Y(X[Se+3])),be=X[Se+2],ae=X[Se+3],Se+=4;break;case b.OPS.curveTo3:be=X[Se+2],ae=X[Se+3],ie.push("C",Y(X[Se]),Y(X[Se+1]),Y(be),Y(ae),Y(be),Y(ae)),Se+=4;break;case b.OPS.closePath:ie.push("Z");break}ie=ie.join(" "),oe.path&&j.length>0&&j[0]!==b.OPS.rectangle&&j[0]!==b.OPS.moveTo?ie=oe.path.getAttributeNS(null,"d")+ie:(oe.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(oe.path)),oe.path.setAttributeNS(null,"d",ie),oe.path.setAttributeNS(null,"fill","none"),oe.element=oe.path,oe.setCurrentPoint(be,ae)}endPath(){const j=this.current;if(j.path=null,!this.pendingClip)return;if(!j.element){this.pendingClip=null;return}const X=`clippath${G++}`,oe=this.svgFactory.createElement("svg:clipPath");oe.setAttributeNS(null,"id",X),oe.setAttributeNS(null,"transform",U(this.transformMatrix));const be=j.element.cloneNode(!0);if(this.pendingClip==="evenodd"?be.setAttributeNS(null,"clip-rule","evenodd"):be.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,oe.append(be),this.defs.append(oe),j.activeClipUrl){j.clipGroup=null;for(const ae of this.extraStack)ae.clipGroup=null;oe.setAttributeNS(null,"clip-path",j.activeClipUrl)}j.activeClipUrl=`url(#${X})`,this.tgrp=null}clip(j){this.pendingClip=j}closePath(){const j=this.current;if(j.path){const X=`${j.path.getAttributeNS(null,"d")}Z`;j.path.setAttributeNS(null,"d",X)}}setLeading(j){this.current.leading=-j}setTextRise(j){this.current.textRise=j}setTextRenderingMode(j){this.current.textRenderingMode=j}setHScale(j){this.current.textHScale=j/100}setRenderingIntent(j){}setFlatness(j){}setGState(j){for(const[X,oe]of j)switch(X){case"LW":this.setLineWidth(oe);break;case"LC":this.setLineCap(oe);break;case"LJ":this.setLineJoin(oe);break;case"ML":this.setMiterLimit(oe);break;case"D":this.setDash(oe[0],oe[1]);break;case"RI":this.setRenderingIntent(oe);break;case"FL":this.setFlatness(oe);break;case"Font":this.setFont(oe);break;case"CA":this.setStrokeAlpha(oe);break;case"ca":this.setFillAlpha(oe);break;default:(0,b.warn)(`Unimplemented graphic state operator ${X}`);break}}fill(){const j=this.current;j.element&&(j.element.setAttributeNS(null,"fill",j.fillColor),j.element.setAttributeNS(null,"fill-opacity",j.fillAlpha),this.endPath())}stroke(){const j=this.current;j.element&&(this._setStrokeAttributes(j.element),j.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(j,X=1){const oe=this.current;let be=oe.dashArray;X!==1&&be.length>0&&(be=be.map(function(ae){return X*ae})),j.setAttributeNS(null,"stroke",oe.strokeColor),j.setAttributeNS(null,"stroke-opacity",oe.strokeAlpha),j.setAttributeNS(null,"stroke-miterlimit",Y(oe.miterLimit)),j.setAttributeNS(null,"stroke-linecap",oe.lineCap),j.setAttributeNS(null,"stroke-linejoin",oe.lineJoin),j.setAttributeNS(null,"stroke-width",Y(X*oe.lineWidth)+"px"),j.setAttributeNS(null,"stroke-dasharray",be.map(Y).join(" ")),j.setAttributeNS(null,"stroke-dashoffset",Y(X*oe.dashPhase)+"px")}eoFill(){var j;(j=this.current.element)==null||j.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var j;(j=this.current.element)==null||j.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width","1px"),j.setAttributeNS(null,"height","1px"),j.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(j)}paintImageXObject(j){const X=this.getObject(j);if(!X){(0,b.warn)(`Dependent image with object ID ${j} is not ready yet`);return}this.paintInlineImageXObject(X)}paintInlineImageXObject(j,X){const oe=j.width,be=j.height,ae=ee(j,this.forceDataSchema,!!X),ie=this.svgFactory.createElement("svg:rect");ie.setAttributeNS(null,"x","0"),ie.setAttributeNS(null,"y","0"),ie.setAttributeNS(null,"width",Y(oe)),ie.setAttributeNS(null,"height",Y(be)),this.current.element=ie,this.clip("nonzero");const Se=this.svgFactory.createElement("svg:image");Se.setAttributeNS(P,"xlink:href",ae),Se.setAttributeNS(null,"x","0"),Se.setAttributeNS(null,"y",Y(-be)),Se.setAttributeNS(null,"width",Y(oe)+"px"),Se.setAttributeNS(null,"height",Y(be)+"px"),Se.setAttributeNS(null,"transform",`scale(${Y(1/oe)} ${Y(-1/be)})`),X?X.append(Se):this._ensureTransformGroup().append(Se)}paintImageMaskXObject(j){const X=this.getObject(j.data,j);if(X.bitmap){(0,b.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const oe=this.current,be=X.width,ae=X.height,ie=oe.fillColor;oe.maskId=`mask${te++}`;const Se=this.svgFactory.createElement("svg:mask");Se.setAttributeNS(null,"id",oe.maskId);const mt=this.svgFactory.createElement("svg:rect");mt.setAttributeNS(null,"x","0"),mt.setAttributeNS(null,"y","0"),mt.setAttributeNS(null,"width",Y(be)),mt.setAttributeNS(null,"height",Y(ae)),mt.setAttributeNS(null,"fill",ie),mt.setAttributeNS(null,"mask",`url(#${oe.maskId})`),this.defs.append(Se),this._ensureTransformGroup().append(mt),this.paintInlineImageXObject(X,Se)}paintFormXObjectBegin(j,X){if(Array.isArray(j)&&j.length===6&&this.transform(j[0],j[1],j[2],j[3],j[4],j[5]),X){const oe=X[2]-X[0],be=X[3]-X[1],ae=this.svgFactory.createElement("svg:rect");ae.setAttributeNS(null,"x",X[0]),ae.setAttributeNS(null,"y",X[1]),ae.setAttributeNS(null,"width",Y(oe)),ae.setAttributeNS(null,"height",Y(be)),this.current.element=ae,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(j){const X=this.svgFactory.create(j.width,j.height),oe=this.svgFactory.createElement("svg:defs");X.append(oe),this.defs=oe;const be=this.svgFactory.createElement("svg:g");return be.setAttributeNS(null,"transform",U(j.transform)),X.append(be),this.svg=be,X}_ensureClipGroup(){if(!this.current.clipGroup){const j=this.svgFactory.createElement("svg:g");j.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(j),this.current.clipGroup=j}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",U(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFNodeStream=void 0;var v=g(1),b=g(32);const _=require$$5,E=require$$5,R=require$$5,M=require$$5,P=/^file:\/\/\/[a-zA-Z]:\//;function O(te){const B=M.parse(te);return B.protocol==="file:"||B.host?B:/^[a-z]:[/\\]/i.test(te)?M.parse(`file:///${te}`):(B.host||(B.protocol="file:"),B)}class H{constructor(B){this.source=B,this.url=O(B.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&B.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var B,j;return(j=(B=this._fullRequestReader)==null?void 0:B._loaded)!=null?j:0}getFullReader(){return(0,v.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new U(this):new W(this),this._fullRequestReader}getRangeReader(B,j){if(j<=this._progressiveDataLength)return null;const X=this.isFsUrl?new G(this,B,j):new Y(this,B,j);return this._rangeRequestReaders.push(X),X}cancelAllRequests(B){var j;(j=this._fullRequestReader)==null||j.cancel(B);for(const X of this._rangeRequestReaders.slice(0))X.cancel(B)}}d.PDFNodeStream=H;class Q{constructor(B){this._url=B.url,this._done=!1,this._storedError=null,this.onProgress=null;const j=B.source;this._contentLength=j.length,this._loaded=0,this._filename=null,this._disableRange=j.disableRange||!1,this._rangeChunkSize=j.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!j.disableStream,this._isRangeSupported=!j.disableRange,this._readableStream=null,this._readCapability=(0,v.createPromiseCapability)(),this._headersCapability=(0,v.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var X;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const B=this._readableStream.read();return B===null?(this._readCapability=(0,v.createPromiseCapability)(),this.read()):(this._loaded+=B.length,(X=this.onProgress)==null||X.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(B).buffer,done:!1})}cancel(B){if(!this._readableStream){this._error(B);return}this._readableStream.destroy(B)}_error(B){this._storedError=B,this._readCapability.resolve()}_setReadableStream(B){this._readableStream=B,B.on("readable",()=>{this._readCapability.resolve()}),B.on("end",()=>{B.destroy(),this._done=!0,this._readCapability.resolve()}),B.on("error",j=>{this._error(j)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new v.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ee{constructor(B){this._url=B.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,v.createPromiseCapability)();const j=B.source;this._isStreamingSupported=!j.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var X;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const B=this._readableStream.read();return B===null?(this._readCapability=(0,v.createPromiseCapability)(),this.read()):(this._loaded+=B.length,(X=this.onProgress)==null||X.call(this,{loaded:this._loaded}),{value:new Uint8Array(B).buffer,done:!1})}cancel(B){if(!this._readableStream){this._error(B);return}this._readableStream.destroy(B)}_error(B){this._storedError=B,this._readCapability.resolve()}_setReadableStream(B){this._readableStream=B,B.on("readable",()=>{this._readCapability.resolve()}),B.on("end",()=>{B.destroy(),this._done=!0,this._readCapability.resolve()}),B.on("error",j=>{this._error(j)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function V(te,B){return{protocol:te.protocol,auth:te.auth,host:te.hostname,port:te.port,path:te.path,method:"GET",headers:B}}class W extends Q{constructor(B){super(B);const j=X=>{if(X.statusCode===404){const ie=new v.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ie,this._headersCapability.reject(ie);return}this._headersCapability.resolve(),this._setReadableStream(X);const oe=ie=>this._readableStream.headers[ie.toLowerCase()],{allowRangeRequests:be,suggestedLength:ae}=(0,b.validateRangeRequestCapabilities)({getResponseHeader:oe,isHttp:B.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=be,this._contentLength=ae||this._contentLength,this._filename=(0,b.extractFilenameFromHeader)(oe)};this._request=null,this._url.protocol==="http:"?this._request=E.request(V(this._url,B.httpHeaders),j):this._request=R.request(V(this._url,B.httpHeaders),j),this._request.on("error",X=>{this._storedError=X,this._headersCapability.reject(X)}),this._request.end()}}class Y extends ee{constructor(B,j,X){super(B),this._httpHeaders={};for(const be in B.httpHeaders){const ae=B.httpHeaders[be];typeof ae>"u"||(this._httpHeaders[be]=ae)}this._httpHeaders.Range=`bytes=${j}-${X-1}`;const oe=be=>{if(be.statusCode===404){const ae=new v.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ae;return}this._setReadableStream(be)};this._request=null,this._url.protocol==="http:"?this._request=E.request(V(this._url,this._httpHeaders),oe):this._request=R.request(V(this._url,this._httpHeaders),oe),this._request.on("error",be=>{this._storedError=be}),this._request.end()}}class U extends Q{constructor(B){super(B);let j=decodeURIComponent(this._url.path);P.test(this._url.href)&&(j=j.replace(/^\//,"")),_.lstat(j,(X,oe)=>{if(X){X.code==="ENOENT"&&(X=new v.MissingPDFException(`Missing PDF "${j}".`)),this._storedError=X,this._headersCapability.reject(X);return}this._contentLength=oe.size,this._setReadableStream(_.createReadStream(j)),this._headersCapability.resolve()})}}class G extends ee{constructor(B,j,X){super(B);let oe=decodeURIComponent(this._url.path);P.test(this._url.href)&&(oe=oe.replace(/^\//,"")),this._setReadableStream(_.createReadStream(oe,{start:j,end:X-1}))}}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.createResponseStatusError=M,d.extractFilenameFromHeader=R,d.validateRangeRequestCapabilities=E,d.validateResponseStatus=P;var v=g(1),b=g(33),_=g(6);function E({getResponseHeader:O,isHttp:H,rangeChunkSize:Q,disableRange:ee}){const V={allowRangeRequests:!1,suggestedLength:void 0},W=parseInt(O("Content-Length"),10);return!Number.isInteger(W)||(V.suggestedLength=W,W<=2*Q)||ee||!H||O("Accept-Ranges")!=="bytes"||(O("Content-Encoding")||"identity")!=="identity"||(V.allowRangeRequests=!0),V}function R(O){const H=O("Content-Disposition");if(H){let Q=(0,b.getFilenameFromContentDispositionHeader)(H);if(Q.includes("%"))try{Q=decodeURIComponent(Q)}catch{}if((0,_.isPdfFile)(Q))return Q}return null}function M(O,H){return O===404||O===0&&H.startsWith("file:")?new v.MissingPDFException('Missing PDF "'+H+'".'):new v.UnexpectedResponseException(`Unexpected server response (${O}) while retrieving PDF "${H}".`,O)}function P(O){return O===200||O===206}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getFilenameFromContentDispositionHeader=b;var v=g(1);function b(_){let E=!0,R=M("filename\\*","i").exec(_);if(R){R=R[1];let W=Q(R);return W=unescape(W),W=ee(W),W=V(W),O(W)}if(R=H(_),R){const W=V(R);return O(W)}if(R=M("filename","i").exec(_),R){R=R[1];let W=Q(R);return W=V(W),O(W)}function M(W,Y){return new RegExp("(?:^|;)\\s*"+W+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Y)}function P(W,Y){if(W){if(!/^[\x00-\xFF]+$/.test(Y))return Y;try{const U=new TextDecoder(W,{fatal:!0}),G=(0,v.stringToBytes)(Y);Y=U.decode(G),E=!1}catch{}}return Y}function O(W){return E&&/[\x80-\xff]/.test(W)&&(W=P("utf-8",W),E&&(W=P("iso-8859-1",W))),W}function H(W){const Y=[];let U;const G=M("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(U=G.exec(W))!==null;){let[,B,j,X]=U;if(B=parseInt(B,10),B in Y){if(B===0)break;continue}Y[B]=[j,X]}const te=[];for(let B=0;B<Y.length&&B in Y;++B){let[j,X]=Y[B];X=Q(X),j&&(X=unescape(X),B===0&&(X=ee(X))),te.push(X)}return te.join("")}function Q(W){if(W.startsWith('"')){const Y=W.slice(1).split('\\"');for(let U=0;U<Y.length;++U){const G=Y[U].indexOf('"');G!==-1&&(Y[U]=Y[U].slice(0,G),Y.length=U+1),Y[U]=Y[U].replace(/\\(.)/g,"$1")}W=Y.join('"')}return W}function ee(W){const Y=W.indexOf("'");if(Y===-1)return W;const U=W.slice(0,Y),te=W.slice(Y+1).replace(/^[^']*'/,"");return P(U,te)}function V(W){return!W.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(W)?W:W.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Y,U,G,te){if(G==="q"||G==="Q")return te=te.replace(/_/g," "),te=te.replace(/=([0-9a-fA-F]{2})/g,function(B,j){return String.fromCharCode(parseInt(j,16))}),P(U,te);try{te=atob(te)}catch{}return P(U,te)})}return""}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFNetworkStream=void 0;var v=g(1),b=g(32);const _=200,E=206;function R(Q){const ee=Q.response;return typeof ee!="string"?ee:(0,v.stringToBytes)(ee).buffer}class M{constructor(ee,V={}){this.url=ee,this.isHttp=/^https?:/i.test(ee),this.httpHeaders=this.isHttp&&V.httpHeaders||Object.create(null),this.withCredentials=V.withCredentials||!1,this.getXhr=V.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(ee,V,W){const Y={begin:ee,end:V};for(const U in W)Y[U]=W[U];return this.request(Y)}requestFull(ee){return this.request(ee)}request(ee){const V=this.getXhr(),W=this.currXhrId++,Y=this.pendingRequests[W]={xhr:V};V.open("GET",this.url),V.withCredentials=this.withCredentials;for(const U in this.httpHeaders){const G=this.httpHeaders[U];typeof G>"u"||V.setRequestHeader(U,G)}return this.isHttp&&"begin"in ee&&"end"in ee?(V.setRequestHeader("Range",`bytes=${ee.begin}-${ee.end-1}`),Y.expectedStatus=E):Y.expectedStatus=_,V.responseType="arraybuffer",ee.onError&&(V.onerror=function(U){ee.onError(V.status)}),V.onreadystatechange=this.onStateChange.bind(this,W),V.onprogress=this.onProgress.bind(this,W),Y.onHeadersReceived=ee.onHeadersReceived,Y.onDone=ee.onDone,Y.onError=ee.onError,Y.onProgress=ee.onProgress,V.send(null),W}onProgress(ee,V){var Y;const W=this.pendingRequests[ee];!W||(Y=W.onProgress)==null||Y.call(W,V)}onStateChange(ee,V){var B,j,X;const W=this.pendingRequests[ee];if(!W)return;const Y=W.xhr;if(Y.readyState>=2&&W.onHeadersReceived&&(W.onHeadersReceived(),delete W.onHeadersReceived),Y.readyState!==4||!(ee in this.pendingRequests))return;if(delete this.pendingRequests[ee],Y.status===0&&this.isHttp){(B=W.onError)==null||B.call(W,Y.status);return}const U=Y.status||_;if(!(U===_&&W.expectedStatus===E)&&U!==W.expectedStatus){(j=W.onError)==null||j.call(W,Y.status);return}const te=R(Y);if(U===E){const oe=Y.getResponseHeader("Content-Range"),be=/bytes (\d+)-(\d+)\/(\d+)/.exec(oe);W.onDone({begin:parseInt(be[1],10),chunk:te})}else te?W.onDone({begin:0,chunk:te}):(X=W.onError)==null||X.call(W,Y.status)}getRequestXhr(ee){return this.pendingRequests[ee].xhr}isPendingRequest(ee){return ee in this.pendingRequests}abortRequest(ee){const V=this.pendingRequests[ee].xhr;delete this.pendingRequests[ee],V.abort()}}class P{constructor(ee){this._source=ee,this._manager=new M(ee.url,{httpHeaders:ee.httpHeaders,withCredentials:ee.withCredentials}),this._rangeChunkSize=ee.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(ee){const V=this._rangeRequestReaders.indexOf(ee);V>=0&&this._rangeRequestReaders.splice(V,1)}getFullReader(){return(0,v.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new O(this._manager,this._source),this._fullRequestReader}getRangeReader(ee,V){const W=new H(this._manager,ee,V);return W.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(W),W}cancelAllRequests(ee){var V;(V=this._fullRequestReader)==null||V.cancel(ee);for(const W of this._rangeRequestReaders.slice(0))W.cancel(ee)}}d.PDFNetworkStream=P;class O{constructor(ee,V){this._manager=ee;const W={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=V.url,this._fullRequestId=ee.requestFull(W),this._headersReceivedCapability=(0,v.createPromiseCapability)(),this._disableRange=V.disableRange||!1,this._contentLength=V.length,this._rangeChunkSize=V.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const ee=this._fullRequestId,V=this._manager.getRequestXhr(ee),W=G=>V.getResponseHeader(G),{allowRangeRequests:Y,suggestedLength:U}=(0,b.validateRangeRequestCapabilities)({getResponseHeader:W,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Y&&(this._isRangeSupported=!0),this._contentLength=U||this._contentLength,this._filename=(0,b.extractFilenameFromHeader)(W),this._isRangeSupported&&this._manager.abortRequest(ee),this._headersReceivedCapability.resolve()}_onDone(ee){if(ee&&(this._requests.length>0?this._requests.shift().resolve({value:ee.chunk,done:!1}):this._cachedChunks.push(ee.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(ee){this._storedError=(0,b.createResponseStatusError)(ee,this._url),this._headersReceivedCapability.reject(this._storedError);for(const V of this._requests)V.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(ee){var V;(V=this.onProgress)==null||V.call(this,{loaded:ee.loaded,total:ee.lengthComputable?ee.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const ee=(0,v.createPromiseCapability)();return this._requests.push(ee),ee.promise}cancel(ee){this._done=!0,this._headersReceivedCapability.reject(ee);for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class H{constructor(ee,V,W){this._manager=ee;const Y={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ee.url,this._requestId=ee.requestRange(V,W,Y),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var ee;(ee=this.onClosed)==null||ee.call(this,this)}_onDone(ee){const V=ee.chunk;this._requests.length>0?this._requests.shift().resolve({value:V,done:!1}):this._queuedChunk=V,this._done=!0;for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(ee){this._storedError=(0,b.createResponseStatusError)(ee,this._url);for(const V of this._requests)V.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(ee){var V;this.isStreamingSupported||(V=this.onProgress)==null||V.call(this,{loaded:ee.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const V=this._queuedChunk;return this._queuedChunk=null,{value:V,done:!1}}if(this._done)return{value:void 0,done:!0};const ee=(0,v.createPromiseCapability)();return this._requests.push(ee),ee.promise}cancel(ee){this._done=!0;for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(c,d,g)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFFetchStream=void 0;var v=g(1),b=g(32);function _(O,H,Q){return{method:"GET",headers:O,signal:Q.signal,mode:"cors",credentials:H?"include":"same-origin",redirect:"follow"}}function E(O){const H=new Headers;for(const Q in O){const ee=O[Q];typeof ee>"u"||H.append(Q,ee)}return H}class R{constructor(H){this.source=H,this.isHttp=/^https?:/i.test(H.url),this.httpHeaders=this.isHttp&&H.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var H,Q;return(Q=(H=this._fullRequestReader)==null?void 0:H._loaded)!=null?Q:0}getFullReader(){return(0,v.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new M(this),this._fullRequestReader}getRangeReader(H,Q){if(Q<=this._progressiveDataLength)return null;const ee=new P(this,H,Q);return this._rangeRequestReaders.push(ee),ee}cancelAllRequests(H){var Q;(Q=this._fullRequestReader)==null||Q.cancel(H);for(const ee of this._rangeRequestReaders.slice(0))ee.cancel(H)}}d.PDFFetchStream=R;class M{constructor(H){this._stream=H,this._reader=null,this._loaded=0,this._filename=null;const Q=H.source;this._withCredentials=Q.withCredentials||!1,this._contentLength=Q.length,this._headersCapability=(0,v.createPromiseCapability)(),this._disableRange=Q.disableRange||!1,this._rangeChunkSize=Q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!Q.disableStream,this._isRangeSupported=!Q.disableRange,this._headers=E(this._stream.httpHeaders);const ee=Q.url;fetch(ee,_(this._headers,this._withCredentials,this._abortController)).then(V=>{if(!(0,b.validateResponseStatus)(V.status))throw(0,b.createResponseStatusError)(V.status,ee);this._reader=V.body.getReader(),this._headersCapability.resolve();const W=G=>V.headers.get(G),{allowRangeRequests:Y,suggestedLength:U}=(0,b.validateRangeRequestCapabilities)({getResponseHeader:W,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Y,this._contentLength=U||this._contentLength,this._filename=(0,b.extractFilenameFromHeader)(W),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new v.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var V;await this._headersCapability.promise;const{value:H,done:Q}=await this._reader.read();return Q?{value:H,done:Q}:(this._loaded+=H.byteLength,(V=this.onProgress)==null||V.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(H).buffer,done:!1})}cancel(H){var Q;(Q=this._reader)==null||Q.cancel(H),this._abortController.abort()}}class P{constructor(H,Q,ee){this._stream=H,this._reader=null,this._loaded=0;const V=H.source;this._withCredentials=V.withCredentials||!1,this._readCapability=(0,v.createPromiseCapability)(),this._isStreamingSupported=!V.disableStream,this._abortController=new AbortController,this._headers=E(this._stream.httpHeaders),this._headers.append("Range",`bytes=${Q}-${ee-1}`);const W=V.url;fetch(W,_(this._headers,this._withCredentials,this._abortController)).then(Y=>{if(!(0,b.validateResponseStatus)(Y.status))throw(0,b.createResponseStatusError)(Y.status,W);this._readCapability.resolve(),this._reader=Y.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var V;await this._readCapability.promise;const{value:H,done:Q}=await this._reader.read();return Q?{value:H,done:Q}:(this._loaded+=H.byteLength,(V=this.onProgress)==null||V.call(this,{loaded:this._loaded}),{value:new Uint8Array(H).buffer,done:!1})}cancel(H){var Q;(Q=this._reader)==null||Q.cancel(H),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(c){var d=__webpack_module_cache__[c];if(d!==void 0)return d.exports;var g=__webpack_module_cache__[c]={exports:{}};return __webpack_modules__[c](g,g.exports,__w_pdfjs_require__),g.exports}var __webpack_exports__={};return(()=>{var c=__webpack_exports__;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"AnnotationEditorLayer",{enumerable:!0,get:function(){return b.AnnotationEditorLayer}}),Object.defineProperty(c,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return d.AnnotationEditorParamsType}}),Object.defineProperty(c,"AnnotationEditorType",{enumerable:!0,get:function(){return d.AnnotationEditorType}}),Object.defineProperty(c,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return _.AnnotationEditorUIManager}}),Object.defineProperty(c,"AnnotationLayer",{enumerable:!0,get:function(){return E.AnnotationLayer}}),Object.defineProperty(c,"AnnotationMode",{enumerable:!0,get:function(){return d.AnnotationMode}}),Object.defineProperty(c,"CMapCompressionType",{enumerable:!0,get:function(){return d.CMapCompressionType}}),Object.defineProperty(c,"GlobalWorkerOptions",{enumerable:!0,get:function(){return R.GlobalWorkerOptions}}),Object.defineProperty(c,"InvalidPDFException",{enumerable:!0,get:function(){return d.InvalidPDFException}}),Object.defineProperty(c,"MissingPDFException",{enumerable:!0,get:function(){return d.MissingPDFException}}),Object.defineProperty(c,"OPS",{enumerable:!0,get:function(){return d.OPS}}),Object.defineProperty(c,"PDFDataRangeTransport",{enumerable:!0,get:function(){return g.PDFDataRangeTransport}}),Object.defineProperty(c,"PDFDateString",{enumerable:!0,get:function(){return v.PDFDateString}}),Object.defineProperty(c,"PDFWorker",{enumerable:!0,get:function(){return g.PDFWorker}}),Object.defineProperty(c,"PasswordResponses",{enumerable:!0,get:function(){return d.PasswordResponses}}),Object.defineProperty(c,"PermissionFlag",{enumerable:!0,get:function(){return d.PermissionFlag}}),Object.defineProperty(c,"PixelsPerInch",{enumerable:!0,get:function(){return v.PixelsPerInch}}),Object.defineProperty(c,"RenderingCancelledException",{enumerable:!0,get:function(){return v.RenderingCancelledException}}),Object.defineProperty(c,"SVGGraphics",{enumerable:!0,get:function(){return O.SVGGraphics}}),Object.defineProperty(c,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return d.UNSUPPORTED_FEATURES}}),Object.defineProperty(c,"UnexpectedResponseException",{enumerable:!0,get:function(){return d.UnexpectedResponseException}}),Object.defineProperty(c,"Util",{enumerable:!0,get:function(){return d.Util}}),Object.defineProperty(c,"VerbosityLevel",{enumerable:!0,get:function(){return d.VerbosityLevel}}),Object.defineProperty(c,"XfaLayer",{enumerable:!0,get:function(){return H.XfaLayer}}),Object.defineProperty(c,"build",{enumerable:!0,get:function(){return g.build}}),Object.defineProperty(c,"createPromiseCapability",{enumerable:!0,get:function(){return d.createPromiseCapability}}),Object.defineProperty(c,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return d.createValidAbsoluteUrl}}),Object.defineProperty(c,"getDocument",{enumerable:!0,get:function(){return g.getDocument}}),Object.defineProperty(c,"getFilenameFromUrl",{enumerable:!0,get:function(){return v.getFilenameFromUrl}}),Object.defineProperty(c,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return v.getPdfFilenameFromUrl}}),Object.defineProperty(c,"getXfaPageViewport",{enumerable:!0,get:function(){return v.getXfaPageViewport}}),Object.defineProperty(c,"isPdfFile",{enumerable:!0,get:function(){return v.isPdfFile}}),Object.defineProperty(c,"loadScript",{enumerable:!0,get:function(){return v.loadScript}}),Object.defineProperty(c,"renderTextLayer",{enumerable:!0,get:function(){return P.renderTextLayer}}),Object.defineProperty(c,"shadow",{enumerable:!0,get:function(){return d.shadow}}),Object.defineProperty(c,"version",{enumerable:!0,get:function(){return g.version}});var d=__w_pdfjs_require__(1),g=__w_pdfjs_require__(2),v=__w_pdfjs_require__(6),b=__w_pdfjs_require__(21),_=__w_pdfjs_require__(5),E=__w_pdfjs_require__(26),R=__w_pdfjs_require__(14),M=__w_pdfjs_require__(12),P=__w_pdfjs_require__(29),O=__w_pdfjs_require__(30),H=__w_pdfjs_require__(28);if(M.isNodeJS){const{PDFNodeStream:Q}=__w_pdfjs_require__(31);(0,g.setPDFNetworkStreamFactory)(ee=>new Q(ee))}else{const{PDFNetworkStream:Q}=__w_pdfjs_require__(34),{PDFFetchStream:ee}=__w_pdfjs_require__(35);(0,g.setPDFNetworkStreamFactory)(V=>(0,v.isValidFetchUrl)(V.url)?new ee(V):new Q(V))}})(),__webpack_exports__})())})(pdf);(function(c){var d=react.exports,g=pdf.exports;function v(xe){var et=Object.create(null);return xe&&Object.keys(xe).forEach(function(Ct){if(Ct!=="default"){var Pt=Object.getOwnPropertyDescriptor(xe,Ct);Object.defineProperty(et,Ct,Pt.get?Pt:{enumerable:!0,get:function(){return xe[Ct]}})}}),et.default=xe,Object.freeze(et)}var b,_=v(d),E=v(g);c.AnnotationType=void 0,(b=c.AnnotationType||(c.AnnotationType={}))[b.Text=1]="Text",b[b.Link=2]="Link",b[b.FreeText=3]="FreeText",b[b.Line=4]="Line",b[b.Square=5]="Square",b[b.Circle=6]="Circle",b[b.Polygon=7]="Polygon",b[b.Polyline=8]="Polyline",b[b.Highlight=9]="Highlight",b[b.Underline=10]="Underline",b[b.Squiggly=11]="Squiggly",b[b.StrikeOut=12]="StrikeOut",b[b.Stamp=13]="Stamp",b[b.Caret=14]="Caret",b[b.Ink=15]="Ink",b[b.Popup=16]="Popup",b[b.FileAttachment=17]="FileAttachment";var R=function(xe,et){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ct,Pt){Ct.__proto__=Pt}||function(Ct,Pt){for(var Bt in Pt)Object.prototype.hasOwnProperty.call(Pt,Bt)&&(Ct[Bt]=Pt[Bt])},R(xe,et)};function M(xe,et){if(typeof et!="function"&&et!==null)throw new TypeError("Class extends value "+String(et)+" is not a constructor or null");function Ct(){this.constructor=xe}R(xe,et),xe.prototype=et===null?Object.create(et):(Ct.prototype=et.prototype,new Ct)}var P,O=function(){return O=Object.assign||function(xe){for(var et,Ct=1,Pt=arguments.length;Ct<Pt;Ct++)for(var Bt in et=arguments[Ct])Object.prototype.hasOwnProperty.call(et,Bt)&&(xe[Bt]=et[Bt]);return xe},O.apply(this,arguments)};c.TextDirection=void 0,(P=c.TextDirection||(c.TextDirection={})).RightToLeft="RTL",P.LeftToRight="LTR";var H,Q=_.createContext({currentTheme:"light",direction:c.TextDirection.LeftToRight,setCurrentTheme:function(){}}),ee=function(xe){var et=[];return Object.keys(xe).forEach(function(Ct){Ct&&xe[Ct]&&et.push(Ct)}),et.join(" ")},V=typeof window<"u"?_.useLayoutEffect:_.useEffect,W=function(xe){var et=_.useRef(null),Ct=xe.once,Pt=xe.threshold,Bt=xe.onVisibilityChanged;return V(function(){var Ut=et.current;if(Ut){var Yt=new IntersectionObserver(function(qt){qt.forEach(function(Nt){var Wt=Nt.isIntersecting,zt=Nt.intersectionRatio;Bt({isVisible:Wt,ratio:zt}),Wt&&Ct&&(Yt.unobserve(Ut),Yt.disconnect())})},{threshold:Pt||0});return Yt.observe(Ut),function(){Yt.unobserve(Ut),Yt.disconnect()}}},[]),et},Y=function(xe){var et=xe.children,Ct=xe.ignoreDirection,Pt=Ct!==void 0&&Ct,Bt=xe.size,Ut=Bt===void 0?24:Bt,Yt=_.useContext(Q).direction,qt=!Pt&&Yt===c.TextDirection.RightToLeft,Nt="".concat(Ut||24,"px");return _.createElement("svg",{"aria-hidden":"true",className:ee({"rpv-core__icon":!0,"rpv-core__icon--rtl":qt}),focusable:"false",height:Nt,viewBox:"0 0 24 24",width:Nt},et)},U=function(){return _.createElement(Y,{size:16},_.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},G=function(xe){var et=xe.children,Ct=xe.testId,Pt=xe.onClick,Bt=_.useContext(Q).direction===c.TextDirection.RightToLeft,Ut=Ct?{"data-testid":Ct}:{};return _.createElement("button",O({className:ee({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":Bt}),type:"button",onClick:Pt},Ut),et)},te=function(xe){var et=xe.size,Ct=et===void 0?"4rem":et,Pt=xe.testId,Bt=_.useState(!1),Ut=Bt[0],Yt=Bt[1],qt=Pt?{"data-testid":Pt}:{},Nt=W({onVisibilityChanged:function(Wt){Yt(Wt.isVisible)}});return _.createElement("div",O({},qt,{className:ee({"rpv-core__spinner":!0,"rpv-core__spinner--animating":Ut}),ref:Nt,style:{height:Ct,width:Ct}}))},B=function(xe){var et=xe.ariaLabel,Ct=et===void 0?"":et,Pt=xe.autoFocus,Bt=Pt!==void 0&&Pt,Ut=xe.placeholder,Yt=Ut===void 0?"":Ut,qt=xe.testId,Nt=xe.type,Wt=Nt===void 0?"text":Nt,zt=xe.value,sr=zt===void 0?"":zt,tr=xe.onChange,lr=xe.onKeyDown,nr=lr===void 0?function(){}:lr,Sr=_.useContext(Q).direction,fr=_.useRef(),Tr=Sr===c.TextDirection.RightToLeft,vr={ref:fr,"data-testid":"","aria-label":Ct,className:ee({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Tr}),placeholder:Yt,value:sr,onChange:function(wr){return tr(wr.target.value)},onKeyDown:nr};return qt&&(vr["data-testid"]=qt),V(function(){if(Bt){var wr=fr.current;if(wr){var $r=window.scrollX,xr=window.scrollY;wr.focus(),window.scrollTo($r,xr)}}},[]),Wt==="text"?_.createElement("input",O({type:"text"},vr)):_.createElement("input",O({type:"password"},vr))},j=function(){var xe=_.useRef(!1);return _.useEffect(function(){return xe.current=!0,function(){xe.current=!1}},[]),xe};(function(xe){xe.NotRenderedYet="NotRenderedYet",xe.Rendering="Rendering",xe.Rendered="Rendered"})(H||(H={}));var X,oe=function(xe){var et=xe.doc,Ct=et.numPages,Pt=et.loadingTask.docId,Bt=_.useMemo(function(){return Array(Ct).fill(null).map(function(qt,Nt){return{pageIndex:Nt,renderStatus:H.NotRenderedYet,visibility:-9999}})},[Pt]),Ut=_.useRef({currentRenderingPage:-1,startRange:0,endRange:Ct-1,visibilities:Bt}),Yt=function(qt,Nt){Ut.current.visibilities[qt].visibility=Nt};return{getHighestPriorityPage:function(){var qt=Ut.current.visibilities.slice(Ut.current.startRange,Ut.current.endRange+1).filter(function(tr){return tr.visibility>-9999});if(!qt.length)return-1;for(var Nt=qt[0].pageIndex,Wt=qt[qt.length-1].pageIndex,zt=qt.length,sr=0;sr<zt;sr++){if(qt[sr].renderStatus===H.Rendering)return-1;if(qt[sr].renderStatus===H.NotRenderedYet)return qt[sr].pageIndex}return Wt+1<Ct&&Ut.current.visibilities[Wt+1].renderStatus!==H.Rendered?Wt+1:Nt-1>=0&&Ut.current.visibilities[Nt-1].renderStatus!==H.Rendered?Nt-1:-1},isInRange:function(qt){return qt>=Ut.current.startRange&&qt<=Ut.current.endRange},markNotRendered:function(){for(var qt=0;qt<Ct;qt++)Ut.current.visibilities[qt].renderStatus=H.NotRenderedYet},markRendered:function(qt){Ut.current.visibilities[qt].renderStatus=H.Rendered},markRendering:function(qt){Ut.current.currentRenderingPage!==-1&&Ut.current.currentRenderingPage!==qt&&Ut.current.visibilities[Ut.current.currentRenderingPage].renderStatus===H.Rendering&&(Ut.current.visibilities[Ut.current.currentRenderingPage].renderStatus=H.NotRenderedYet),Ut.current.visibilities[qt].renderStatus=H.Rendering,Ut.current.currentRenderingPage=qt},setOutOfRange:function(qt){Yt(qt,-9999)},setRange:function(qt,Nt){Ut.current.startRange=qt,Ut.current.endRange=Nt;for(var Wt=0;Wt<Ct;Wt++)(Wt<qt||Wt>Nt)&&(Ut.current.visibilities[Wt].visibility=-9999,Ut.current.visibilities[Wt].renderStatus=H.NotRenderedYet)},setVisibility:Yt}},be={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},ae=_.createContext({l10n:be,setL10n:function(){}}),ie=0,Se=function(){return ie++},mt=function(xe,et,Ct){var Pt=function(Bt){var Ut=et.current;if(Ut){var Yt=Bt.target;if(Yt instanceof Element&&Yt.shadowRoot){var qt=Bt.composedPath();qt.length>0&&!Ut.contains(qt[0])&&Ct()}else Ut.contains(Yt)||Ct()}};_.useEffect(function(){if(xe){var Bt={capture:!0};return document.addEventListener("click",Pt,Bt),function(){document.removeEventListener("click",Pt,Bt)}}},[])},it=function(xe){var et=function(Ct){Ct.key==="Escape"&&xe()};_.useEffect(function(){return document.addEventListener("keyup",et),function(){document.removeEventListener("keyup",et)}},[])},Tt=function(xe){var et=xe.ariaControlsSuffix,Ct=xe.children,Pt=xe.closeOnClickOutside,Bt=xe.closeOnEscape,Ut=xe.onToggle,Yt=_.useRef(),qt=_.useContext(Q).direction===c.TextDirection.RightToLeft;return _.useEffect(function(){var Nt=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=Nt}},[]),it(function(){Yt.current&&Bt&&Ut()}),mt(Pt,Yt,Ut),V(function(){var Nt=Yt.current;if(Nt){var Wt=.75*document.body.clientHeight;Nt.getBoundingClientRect().height>=Wt&&(Nt.style.overflow="auto",Nt.style.maxHeight="".concat(Wt,"px"))}},[]),_.createElement("div",{"aria-modal":"true",className:ee({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":qt}),id:"rpv-core__modal-body-".concat(et),ref:Yt,role:"dialog",tabIndex:-1},Ct)},ht=function(xe){var et=xe.children;return _.createElement("div",{className:"rpv-core__modal-overlay"},et)};c.ToggleStatus=void 0,(X=c.ToggleStatus||(c.ToggleStatus={})).Close="Close",X.Open="Open",X.Toggle="Toggle";var Ye,St=function(xe){var et=_.useState(xe),Ct=et[0],Pt=et[1];return{opened:Ct,toggle:function(Bt){switch(Bt){case c.ToggleStatus.Close:Pt(!1);break;case c.ToggleStatus.Open:Pt(!0);break;case c.ToggleStatus.Toggle:default:Pt(function(Ut){return!Ut})}}}},$t=function(xe){var et=xe.content,Ct=xe.isOpened,Pt=Ct!==void 0&&Ct,Bt=xe.target,Ut=St(Pt),Yt=Ut.opened,qt=Ut.toggle;return _.createElement(_.Fragment,null,Bt&&Bt(qt,Yt),Yt&&et(qt))};c.Position=void 0,(Ye=c.Position||(c.Position={})).TopLeft="TOP_LEFT",Ye.TopCenter="TOP_CENTER",Ye.TopRight="TOP_RIGHT",Ye.RightTop="RIGHT_TOP",Ye.RightCenter="RIGHT_CENTER",Ye.RightBottom="RIGHT_BOTTOM",Ye.BottomLeft="BOTTOM_LEFT",Ye.BottomCenter="BOTTOM_CENTER",Ye.BottomRight="BOTTOM_RIGHT",Ye.LeftTop="LEFT_TOP",Ye.LeftCenter="LEFT_CENTER",Ye.LeftBottom="LEFT_BOTTOM";var Lt,Mt,jt,Qe,Pe,Ee=function(xe,et,Ct,Pt,Bt){V(function(){var Ut=et.current,Yt=xe.current,qt=Ct.current;if(Yt&&Ut&&qt){var Nt=qt.getBoundingClientRect(),Wt=function(tr,lr,nr,Sr){var fr=lr.getBoundingClientRect(),Tr=tr.getBoundingClientRect(),vr=Tr.height,wr=Tr.width,$r=0,xr=0;switch(nr){case c.Position.TopLeft:$r=fr.top-vr,xr=fr.left;break;case c.Position.TopCenter:$r=fr.top-vr,xr=fr.left+fr.width/2-wr/2;break;case c.Position.TopRight:$r=fr.top-vr,xr=fr.left+fr.width-wr;break;case c.Position.RightTop:$r=fr.top,xr=fr.left+fr.width;break;case c.Position.RightCenter:$r=fr.top+fr.height/2-vr/2,xr=fr.left+fr.width;break;case c.Position.RightBottom:$r=fr.top+fr.height-vr,xr=fr.left+fr.width;break;case c.Position.BottomLeft:$r=fr.top+fr.height,xr=fr.left;break;case c.Position.BottomCenter:$r=fr.top+fr.height,xr=fr.left+fr.width/2-wr/2;break;case c.Position.BottomRight:$r=fr.top+fr.height,xr=fr.left+fr.width-wr;break;case c.Position.LeftTop:$r=fr.top,xr=fr.left-wr;break;case c.Position.LeftCenter:$r=fr.top+fr.height/2-vr/2,xr=fr.left-wr;break;case c.Position.LeftBottom:$r=fr.top+fr.height-vr,xr=fr.left-wr}return{left:xr+(Sr.left||0),top:$r+(Sr.top||0)}}(Yt,Ut,Pt,Bt),zt=Wt.top,sr=Wt.left;Yt.style.top="".concat(zt-Nt.top,"px"),Yt.style.left="".concat(sr-Nt.left,"px")}},[])},nt=function(xe){var et,Ct=xe.customClassName,Pt=xe.position;return _.createElement("div",{className:ee((et={"rpv-core__arrow":!0,"rpv-core__arrow--tl":Pt===c.Position.TopLeft,"rpv-core__arrow--tc":Pt===c.Position.TopCenter,"rpv-core__arrow--tr":Pt===c.Position.TopRight,"rpv-core__arrow--rt":Pt===c.Position.RightTop,"rpv-core__arrow--rc":Pt===c.Position.RightCenter,"rpv-core__arrow--rb":Pt===c.Position.RightBottom,"rpv-core__arrow--bl":Pt===c.Position.BottomLeft,"rpv-core__arrow--bc":Pt===c.Position.BottomCenter,"rpv-core__arrow--br":Pt===c.Position.BottomRight,"rpv-core__arrow--lt":Pt===c.Position.LeftTop,"rpv-core__arrow--lc":Pt===c.Position.LeftCenter,"rpv-core__arrow--lb":Pt===c.Position.LeftBottom},et["".concat(Ct)]=Ct!=="",et))})},st=function(xe){var et=xe.ariaControlsSuffix,Ct=xe.children,Pt=xe.closeOnClickOutside,Bt=xe.offset,Ut=xe.position,Yt=xe.targetRef,qt=xe.onClose,Nt=_.useRef(),Wt=_.useRef(),zt=_.useRef(),sr=_.useContext(Q).direction===c.TextDirection.RightToLeft;mt(Pt,Nt,qt),Ee(Nt,Yt,zt,Ut,Bt),V(function(){var lr=Wt.current;if(lr){var nr=.75*document.body.clientHeight;lr.getBoundingClientRect().height>=nr&&(lr.style.overflow="auto",lr.style.maxHeight="".concat(nr,"px"))}},[]);var tr="rpv-core__popover-body-inner-".concat(et);return _.createElement(_.Fragment,null,_.createElement("div",{ref:zt,style:{left:0,position:"absolute",top:0}}),_.createElement("div",{"aria-describedby":tr,className:ee({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":sr}),id:"rpv-core__popover-body-".concat(et),ref:Nt,role:"dialog",tabIndex:-1},_.createElement(nt,{customClassName:"rpv-core__popover-body-arrow",position:Ut}),_.createElement("div",{id:tr,ref:Wt},Ct)))},rt=function(xe){var et=xe.closeOnEscape,Ct=xe.onClose,Pt=_.useRef();return it(function(){Pt.current&&et&&Ct()}),_.createElement("div",{className:"rpv-core__popover-overlay",ref:Pt})},tt=function(xe){var et=xe.ariaControlsSuffix,Ct=xe.children,Pt=xe.contentRef,Bt=xe.offset,Ut=xe.position,Yt=xe.targetRef,qt=_.useRef(),Nt=_.useContext(Q).direction===c.TextDirection.RightToLeft;return Ee(Pt,Yt,qt,Ut,Bt),_.createElement(_.Fragment,null,_.createElement("div",{ref:qt,style:{left:0,position:"absolute",top:0}}),_.createElement("div",{className:ee({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":Nt}),id:"rpv-core__tooltip-body-".concat(et),ref:Pt,role:"tooltip"},_.createElement(nt,{customClassName:"rpv-core__tooltip-body-arrow",position:Ut}),_.createElement("div",{className:"rpv-core__tooltip-body-content"},Ct)))};c.LayerRenderStatus=void 0,(Lt=c.LayerRenderStatus||(c.LayerRenderStatus={}))[Lt.PreRender=0]="PreRender",Lt[Lt.DidRender=1]="DidRender",c.PageMode=void 0,(Mt=c.PageMode||(c.PageMode={})).Attachments="UseAttachments",Mt.Bookmarks="UseOutlines",Mt.ContentGroup="UseOC",Mt.Default="UserNone",Mt.FullScreen="FullScreen",Mt.Thumbnails="UseThumbs",c.RotateDirection=void 0,(jt=c.RotateDirection||(c.RotateDirection={})).Backward="Backward",jt.Forward="Forward",c.ScrollMode=void 0,(Qe=c.ScrollMode||(c.ScrollMode={})).Horizontal="Horizontal",Qe.Vertical="Vertical",Qe.Wrapped="Wrapped",c.SpecialZoomLevel=void 0,(Pe=c.SpecialZoomLevel||(c.SpecialZoomLevel={})).ActualSize="ActualSize",Pe.PageFit="PageFit",Pe.PageWidth="PageWidth";var vt=function(xe,et){switch(et[1].name){case"XYZ":return{bottomOffset:function(Ct,Pt){return et[3]===null?Pt:et[3]},leftOffset:function(Ct,Pt){return et[2]===null?0:et[2]},pageIndex:xe,scaleTo:et[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:xe,scaleTo:c.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:et[2],leftOffset:0,pageIndex:xe,scaleTo:c.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:xe,scaleTo:1}}},It=new Map,Vt=new Map,wt=function(xe,et){return"".concat(xe.loadingTask.docId,"___").concat(et.num,"R").concat(et.gen===0?"":et.gen)},kt=function(xe,et,Ct){It.set(wt(xe,et),Ct)},Zt=function(xe,et){if(!xe)return Promise.reject("The document is not loaded yet");var Ct="".concat(xe.loadingTask.docId,"___").concat(et),Pt=Vt.get(Ct);return Pt?Promise.resolve(Pt):new Promise(function(Bt,Ut){xe.getPage(et+1).then(function(Yt){Vt.set(Ct,Yt),Yt.ref&&kt(xe,Yt.ref,et),Bt(Yt)})})},Qt=function(xe,et){return new Promise(function(Ct){new Promise(function(Pt){typeof et=="string"?xe.getDestination(et).then(function(Bt){Pt(Bt)}):Pt(et)}).then(function(Pt){if(typeof Pt[0]=="object"&&Pt[0]!==null){var Bt=Pt[0],Ut=function(qt,Nt){var Wt=wt(qt,Nt);return It.has(Wt)?It.get(Wt):null}(xe,Bt);Ut===null?xe.getPageIndex(Bt).then(function(qt){kt(xe,Bt,qt),Qt(xe,et).then(function(Nt){return Ct(Nt)})}):Ct(vt(Ut,Pt))}else{var Yt=vt(Pt[0],Pt);Ct(Yt)}})})};function Z(xe){var et=_.useRef(xe);return _.useEffect(function(){et.current=xe},[xe]),et.current}var z,K=function(xe,et){var Ct=et.rect;return xe.height!==Ct.height||xe.width!==Ct.width?Ct:xe},ne=function(xe){return 1-Math.pow(1-xe,4)},Ae={left:0,top:0},ut={capture:!1,passive:!0},Rt=function(xe){var et=xe.elementRef,Ct=xe.isRtl,Pt=xe.scrollMode,Bt=xe.onSmoothScroll,Ut=function(fr){var Tr=j(),vr=_.useRef(0),wr=_.useState(fr),$r=wr[0],xr=wr[1],kr=_.useCallback(function(Lr){cancelAnimationFrame(vr.current),vr.current=requestAnimationFrame(function(){Tr.current&&xr(Lr)})},[]);return _.useEffect(function(){return function(){cancelAnimationFrame(vr.current)}},[]),[$r,kr]}(Ae),Yt=Ut[0],qt=Ut[1],Nt=_.useState(et.current),Wt=Nt[0],zt=Nt[1],sr=Ct?-1:1,tr=_.useRef(Pt);tr.current=Pt;var lr=_.useCallback(function(){return Bt(!1)},[]),nr=_.useCallback(function(){if(Wt)switch(tr.current){case c.ScrollMode.Horizontal:qt({left:sr*Wt.scrollLeft,top:0});break;case c.ScrollMode.Vertical:default:qt({left:0,top:Wt.scrollTop})}},[Wt]);V(function(){zt(et.current)}),V(function(){if(Wt)return Wt.addEventListener("scroll",nr,ut),function(){Wt.removeEventListener("scroll",nr,ut)}},[Wt]);var Sr=_.useCallback(function(fr,Tr){var vr=et.current;if(vr){var wr=0,$r=c.ScrollMode.Vertical;switch(tr.current){case c.ScrollMode.Horizontal:wr=sr*fr.left,$r=c.ScrollMode.Horizontal;break;case c.ScrollMode.Vertical:default:wr=fr.top,$r=c.ScrollMode.Vertical}if(Tr)Bt(!0),function(xr,kr,Lr,sn,Kr,mn){Kr===void 0&&(Kr=function(un){return un}),mn===void 0&&(mn=function(){});var Yr=0;switch(kr){case c.ScrollMode.Horizontal:Yr=xr.scrollLeft;case c.ScrollMode.Vertical:default:Yr=xr.scrollTop}var pn,ln=-1,_n=Yr-Lr;if(_n!==0){var tn=function(un){ln===-1&&(ln=un);var gn=un-ln,En=Math.min(gn/sn,1),Fr=Kr(En),Ir=Yr-_n*Fr;switch(kr){case c.ScrollMode.Horizontal:xr.scrollLeft=Ir;case c.ScrollMode.Vertical:default:xr.scrollTop=Ir}Ir===Lr&&mn(),gn<sn?pn=window.requestAnimationFrame(tn):window.cancelAnimationFrame(pn)};pn=window.requestAnimationFrame(tn)}}(vr,$r,wr,400,ne,lr);else switch(tr.current){case c.ScrollMode.Horizontal:vr.scrollLeft=wr;break;case c.ScrollMode.Vertical:default:vr.scrollTop=wr}}},[et]);return{scrollOffset:Yt,scrollTo:Sr}},yt={height:0,width:0},lt={left:0,top:0},at=function(xe){var et=xe.estimateSize,Ct=xe.isRtl,Pt=xe.numberOfItems,Bt=xe.setStartRange,Ut=xe.setEndRange,Yt=xe.parentRef,qt=xe.scrollMode,Nt=xe.transformSize,Wt=_.useState(!1),zt=Wt[0],sr=Wt[1],tr=_.useCallback(function(Fr){return sr(Fr)},[]),lr=Rt({elementRef:Yt,isRtl:Ct,scrollMode:qt,onSmoothScroll:tr}),nr=lr.scrollOffset,Sr=lr.scrollTo,fr=function(Fr){var Ir=Fr.elementRef,Br=_.useState(Ir.current),Dr=Br[0],zr=Br[1],Qr=_.useRef(!1),Hr=_.useReducer(K,{height:0,width:0}),Sn=Hr[0],an=Hr[1];return V(function(){Ir.current!==Dr&&zr(Ir.current)}),V(function(){if(Dr&&!Qr.current){Qr.current=!0;var wn=Dr.getBoundingClientRect(),An=wn.height,Rn=wn.width;an({rect:{height:An,width:Rn}})}},[Dr]),_.useEffect(function(){if(Dr){var wn=new ResizeObserver(function(An,Rn){An.forEach(function(Pn){if(Pn.target===Dr){var Jr=Pn.contentRect,Cn=Jr.height,Tn=Jr.width;an({rect:{height:Cn,width:Tn}})}})});return wn.observe(Dr),function(){wn.unobserve(Dr)}}},[Dr]),Sn}({elementRef:Yt}),Tr=_.useRef({scrollOffset:lt,measurements:[],parentRect:yt,totalSize:yt});Tr.current.scrollOffset=nr,Tr.current.parentRect=fr;var vr=_.useState({}),wr=vr[0],$r=vr[1],xr=_.useMemo(function(){for(var Fr=[],Ir=0,Br={left:0,top:0},Dr=0,zr=0;zr<Pt;zr++){var Qr=wr[zr]||Nt(zr,et(zr)),Hr=lt;if(zr===0)Ir=Qr.width,Br={left:0,top:0},Dr=Qr.height;else switch(qt){case c.ScrollMode.Wrapped:(Ir+=Qr.width)<fr.width?(Hr={left:Fr[zr-1].end.left,top:Br.top},Dr=Math.max(Dr,Qr.height)):(Ir=Qr.width,Br={left:(Hr={left:Br.left,top:Br.top+Dr}).left,top:Hr.top},Dr=Qr.height);break;case c.ScrollMode.Horizontal:case c.ScrollMode.Vertical:default:Hr=Fr[zr-1].end}var Sn={left:Hr.left+Qr.width,top:Hr.top+Qr.height};Fr[zr]={index:zr,start:Hr,size:Qr,end:Sn,visibility:-1}}return Fr},[et,qt,fr,wr,Nt]),kr=xr[Pt-1]?{height:xr[Pt-1].end.top,width:xr[Pt-1].end.left}:yt;Tr.current.measurements=xr,Tr.current.totalSize=kr;var Lr=function(Fr,Ir,Br,Dr){var zr=0;switch(Fr){case c.ScrollMode.Horizontal:zr=Dr.left;break;case c.ScrollMode.Vertical:default:zr=Dr.top}var Qr=Ir.length-1,Hr=function(on,Dn,Un,$n){for(;on<=Dn;){var kn=(on+Dn)/2|0,Zn=$n(kn);if(Zn<Un)on=kn+1;else{if(!(Zn>Un))return kn;Dn=kn-1}}return on>0?on-1:0}(0,Qr,zr,function(on){switch(Fr){case c.ScrollMode.Horizontal:return Ir[on].start.left;case c.ScrollMode.Wrapped:case c.ScrollMode.Vertical:default:return Ir[on].start.top}});if(Fr===c.ScrollMode.Wrapped)for(var Sn=Ir[Hr].start.top;Hr-1>=0&&Ir[Hr-1].start.top===Sn&&Ir[Hr-1].start.left>=Dr.left;)Hr--;for(var an=Hr,wn={},An=Hr,Rn=-1;an<=Qr;){var Pn=Ir[an].size,Jr=yt,Cn={top:Ir[an].start.top-Dr.top,left:Ir[an].start.left-Dr.left},Tn={height:Br.height-Cn.top,width:Br.width-Cn.left};if(Fr===c.ScrollMode.Horizontal&&Tn.width<0){an--;break}if(Fr===c.ScrollMode.Vertical&&Tn.height<0){an--;break}if(Fr===c.ScrollMode.Wrapped&&(Tn.width<0||Tn.height<0)){an--;break}if(Fr===c.ScrollMode.Vertical)Jr.width=1;else if(Cn.left<0){var qn=Pn.width- -Cn.left;Jr.width=qn<=Br.width?qn/Br.width:1}else Jr.width=Pn.width<=Tn.width?1:Tn.width/Pn.width;if(Fr===c.ScrollMode.Horizontal)Jr.height=1;else if(Cn.top<0){var yn=Pn.height- -Cn.top;Jr.height=yn<=Br.height?yn/Br.height:1}else Jr.height=Pn.height<=Tn.height?1:Tn.height/Pn.height;wn[an]=Jr.width*Jr.height,Rn<wn[an]&&(Rn=wn[an],An=an),an++}return{start:Hr,end:an,maxVisbilityIndex:An,visibilities:wn}}(qt,Tr.current.measurements,Tr.current.parentRect,Tr.current.scrollOffset),sn=Lr.maxVisbilityIndex,Kr=Lr.visibilities,mn=Lr.start,Yr=Lr.end,pn=Bt(mn),ln=Ut(Yr),_n=_.useMemo(function(){for(var Fr=[],Ir=function(Dr){var zr=xr[Dr],Qr=O(O({},zr),{visibility:Kr[Dr]!==void 0?Kr[Dr]:-1,measureRef:function(Hr){if(Hr){var Sn=Hr.getBoundingClientRect();if(Sn.height!==0||Sn.width!==0){var an=Nt(Dr,{height:Sn.height,width:Sn.width});an.height===zr.size.height&&an.width===zr.size.width||$r(function(wn){var An;return O(O({},wn),((An={})[Dr]=an,An))})}}}});Fr.push(Qr)},Br=pn;Br<=ln;Br++)Ir(Br);return Fr},[Nt,Kr,xr]),tn=_.useCallback(function(Fr,Ir){var Br,Dr,zr,Qr=Tr.current.measurements[Br=0,Dr=Pt-1,zr=Fr,Math.max(Br,Math.min(zr,Dr))];Qr&&Sr({left:Ir.left+Qr.start.left,top:Ir.top+Qr.start.top},!0)},[Sr]),un=_.useCallback(function(){switch(qt){case c.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(kr.width,"px")};case c.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(kr.height,"px"),width:"100%"}}},[qt,kr]),gn=_.useCallback(function(Fr){var Ir,Br,Dr,zr=Ct?"right":"left",Qr=Ct?-1:1;switch(qt){case c.ScrollMode.Horizontal:return(Ir={height:"100%",width:"".concat(Fr.size.width,"px")})[zr]=0,Ir.position="absolute",Ir.top=0,Ir.transform="translateX(".concat(Fr.start.left*Qr,"px)"),Ir;case c.ScrollMode.Wrapped:return(Br={height:"".concat(Fr.size.height,"px"),width:"".concat(Fr.size.width,"px")})[zr]=0,Br.position="absolute",Br.top=0,Br.transform="translate(".concat(Fr.start.left*Qr,"px, ").concat(Fr.start.top,"px)"),Br;case c.ScrollMode.Vertical:default:return(Dr={height:"".concat(Fr.size.height,"px"),width:"100%"})[zr]=0,Dr.position="absolute",Dr.top=0,Dr.transform="translateY(".concat(Fr.start.top,"px)"),Dr}},[Ct,qt]),En=_.useCallback(function(Fr){$r({});var Ir=Tr.current.scrollOffset,Br={left:Ir.left*Fr,top:Ir.top*Fr};Sr(Br,!1)},[]);return{isSmoothScrolling:zt,startIndex:mn,startRange:pn,endIndex:Yr,endRange:ln,maxVisbilityIndex:sn,virtualItems:_n,getContainerStyles:un,getItemStyles:gn,scrollToItem:tn,zoom:En}};(function(xe){xe[xe.Solid=1]="Solid",xe[xe.Dashed=2]="Dashed",xe[xe.Beveled=3]="Beveled",xe[xe.Inset=4]="Inset",xe[xe.Underline=5]="Underline"})(z||(z={}));var ze,ct=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),Ze=function(xe,et,Ct,Pt){var Bt=parseInt(xe,10);return Bt>=et&&Bt<=Ct?Bt:Pt},Ot=function(xe){return xe.contentsObj?xe.contentsObj.str:xe.contents||""},Ht=function(xe){return xe.titleObj?xe.titleObj.str:xe.title||""},Xt=function(xe){var et=xe.annotation,Ct=_.useContext(Q).direction,Pt=Ht(et),Bt=Ot(et),Ut=Ct===c.TextDirection.RightToLeft,Yt=_.useRef(),qt="";if(et.modificationDate){var Nt=function(Wt){var zt=ct.exec(Wt);if(!zt)return null;var sr=parseInt(zt[1],10),tr=Ze(zt[2],1,12,1)-1,lr=Ze(zt[3],1,31,1),nr=Ze(zt[4],0,23,0),Sr=Ze(zt[5],0,59,0),fr=Ze(zt[6],0,59,0),Tr=zt[7]||"Z",vr=Ze(zt[8],0,23,0),wr=Ze(zt[9],0,59,0);switch(Tr){case"-":nr+=vr,Sr+=wr;break;case"+":nr-=vr,Sr-=wr}return new Date(Date.UTC(sr,tr,lr,nr,Sr,fr))}(et.modificationDate);qt=Nt?"".concat(Nt.toLocaleDateString(),", ").concat(Nt.toLocaleTimeString()):""}return _.useLayoutEffect(function(){if(Yt.current){var Wt=document.querySelector('[data-annotation-id="'.concat(et.id,'"]'));if(Wt){var zt=Wt;return zt.style.zIndex+=1,function(){zt.style.zIndex="".concat(parseInt(zt.style.zIndex,10)-1)}}}},[]),_.createElement("div",{ref:Yt,className:ee({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":Ut}),style:{top:et.annotationType===c.AnnotationType.Popup?"":"100%"}},Pt&&_.createElement(_.Fragment,null,_.createElement("div",{className:ee({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!Ut,"rpv-core__annotation-popup-title--rtl":Ut})},Pt),_.createElement("div",{className:"rpv-core__annotation-popup-date"},qt)),Bt&&_.createElement("div",{className:"rpv-core__annotation-popup-content"},Bt.split(`
`).map(function(Wt,zt){return _.createElement(_.Fragment,{key:zt},Wt,_.createElement("br",null))})))};(function(xe){xe.Click="Click",xe.Hover="Hover"})(ze||(ze={}));var ur,cr=function(xe){var et,Ct=xe.annotation,Pt=xe.children,Bt=xe.ignoreBorder,Ut=xe.hasPopup,Yt=xe.isRenderable,qt=xe.page,Nt=xe.viewport,Wt=Ct.rect,zt=function(){var Lr=St(!1),sn=Lr.opened,Kr=Lr.toggle,mn=_.useState(ze.Hover),Yr=mn[0],pn=mn[1];return{opened:sn,closeOnHover:function(){Yr===ze.Hover&&Kr(c.ToggleStatus.Close)},openOnHover:function(){Yr===ze.Hover&&Kr(c.ToggleStatus.Open)},toggleOnClick:function(){switch(Yr){case ze.Click:sn&&pn(ze.Hover),Kr(c.ToggleStatus.Toggle);break;case ze.Hover:pn(ze.Click),Kr(c.ToggleStatus.Open)}}}}(),sr=zt.closeOnHover,tr=zt.opened,lr=zt.openOnHover,nr=zt.toggleOnClick,Sr=(et=[Wt[0],qt.view[3]+qt.view[1]-Wt[1],Wt[2],qt.view[3]+qt.view[1]-Wt[3]],[Math.min(et[0],et[2]),Math.min(et[1],et[3]),Math.max(et[0],et[2]),Math.max(et[1],et[3])]),fr=Wt[2]-Wt[0],Tr=Wt[3]-Wt[1],vr={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!Bt&&Ct.borderStyle.width>0){switch(Ct.borderStyle.style){case z.Dashed:vr.borderStyle="dashed";break;case z.Solid:vr.borderStyle="solid";break;case z.Underline:vr=Object.assign({borderBottomStyle:"solid"},vr);case z.Beveled:case z.Inset:}var wr=Ct.borderStyle.width;vr.borderWidth="".concat(wr,"px"),Ct.borderStyle.style!==z.Underline&&(fr-=2*wr,Tr-=2*wr);var $r=Ct.borderStyle,xr=$r.horizontalCornerRadius,kr=$r.verticalCornerRadius;(xr>0||kr>0)&&(vr.borderRadius="".concat(xr,"px / ").concat(kr,"px")),Ct.color?vr.borderColor="rgb(".concat(0|Ct.color[0],", ").concat(0|Ct.color[1],", ").concat(0|Ct.color[2],")"):vr.borderWidth="0"}return _.createElement(_.Fragment,null,Yt&&Pt({popup:{opened:tr,closeOnHover:sr,openOnHover:lr,toggleOnClick:nr},slot:{attrs:{style:Object.assign({height:"".concat(Tr,"px"),left:"".concat(Sr[0],"px"),top:"".concat(Sr[1],"px"),transform:"matrix(".concat(Nt.transform.join(","),")"),transformOrigin:"-".concat(Sr[0],"px -").concat(Sr[1],"px"),width:"".concat(fr,"px")},vr)},children:_.createElement(_.Fragment,null,Ut&&tr&&_.createElement(Xt,{annotation:Ct}))}}))},A=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=et.hasPopup===!1,Ut=Ht(et),Yt=Ot(et),qt=!!(et.hasPopup||Ut||Yt);return _.createElement(cr,{annotation:et,hasPopup:Bt,ignoreBorder:!0,isRenderable:qt,page:Ct,viewport:Pt},function(Nt){return _.createElement("div",O({},Nt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":et.id,onClick:Nt.popup.toggleOnClick,onMouseEnter:Nt.popup.openOnHover,onMouseLeave:Nt.popup.closeOnHover}),Nt.slot.children)})},re=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=et.hasPopup===!1,Ut=Ht(et),Yt=Ot(et),qt=!!(et.hasPopup||Ut||Yt),Nt=et.rect,Wt=Nt[2]-Nt[0],zt=Nt[3]-Nt[1],sr=et.borderStyle.width;return _.createElement(cr,{annotation:et,hasPopup:Bt,ignoreBorder:!0,isRenderable:qt,page:Ct,viewport:Pt},function(tr){return _.createElement("div",O({},tr.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":et.id,onClick:tr.popup.toggleOnClick,onMouseEnter:tr.popup.openOnHover,onMouseLeave:tr.popup.closeOnHover}),_.createElement("svg",{height:"".concat(zt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Wt," ").concat(zt),width:"".concat(Wt,"px")},_.createElement("circle",{cy:zt/2,fill:"none",rx:Wt/2-sr/2,ry:zt/2-sr/2,stroke:"transparent",strokeWidth:sr||1})),tr.slot.children)})},Ce=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=Ht(et),Ut=Ot(et),Yt=!(et.hasPopup!==!1||!Bt&&!Ut),qt=function(){var Nt,Wt,zt,sr,tr=et.file;tr&&(Nt=tr.filename,Wt=tr.content,zt=typeof Wt=="string"?"":URL.createObjectURL(new Blob([Wt],{type:""})),(sr=document.createElement("a")).style.display="none",sr.href=zt||Nt,sr.setAttribute("download",function(lr){var nr=lr.split("/").pop();return nr?nr.split("#")[0].split("?")[0]:lr}(Nt)),document.body.appendChild(sr),sr.click(),document.body.removeChild(sr),zt&&URL.revokeObjectURL(zt))};return _.createElement(cr,{annotation:et,hasPopup:Yt,ignoreBorder:!0,isRenderable:!0,page:Ct,viewport:Pt},function(Nt){return _.createElement("div",O({},Nt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":et.id,onClick:Nt.popup.toggleOnClick,onDoubleClick:qt,onMouseEnter:Nt.popup.openOnHover,onMouseLeave:Nt.popup.closeOnHover}),Nt.slot.children)})},ve=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=et.hasPopup===!1,Ut=Ht(et),Yt=Ot(et),qt=!!(et.hasPopup||Ut||Yt);return _.createElement(cr,{annotation:et,hasPopup:Bt,ignoreBorder:!0,isRenderable:qt,page:Ct,viewport:Pt},function(Nt){return _.createElement("div",O({},Nt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":et.id,onClick:Nt.popup.toggleOnClick,onMouseEnter:Nt.popup.openOnHover,onMouseLeave:Nt.popup.closeOnHover}),Nt.slot.children)})},Oe=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=Ht(et),Ut=Ot(et),Yt=!(!Bt&&!Ut),qt=!et.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(et.parentType)!==-1;return V(function(){if(et.parentId){var Nt=document.querySelector('[data-annotation-id="'.concat(et.parentId,'"]')),Wt=document.querySelector('[data-annotation-id="'.concat(et.id,'"]'));if(Nt&&Wt){var zt=parseFloat(Nt.style.left),sr=parseFloat(Nt.style.top)+parseFloat(Nt.style.height);Wt.style.left="".concat(zt,"px"),Wt.style.top="".concat(sr,"px"),Wt.style.transformOrigin="-".concat(zt,"px -").concat(sr,"px")}}},[]),_.createElement(cr,{annotation:et,hasPopup:qt,ignoreBorder:!1,isRenderable:Yt,page:Ct,viewport:Pt},function(Nt){return _.createElement("div",O({},Nt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":et.id}),_.createElement(Xt,{annotation:et}))})},pt=function(xe){var et=xe.annotation,Ct=xe.childAnnotation,Pt=xe.page,Bt=xe.viewport,Ut=et.hasPopup===!1,Yt=Ht(et),qt=Ot(et),Nt=!!(et.hasPopup||Yt||qt);if(et.quadPoints&&et.quadPoints.length>0){var Wt=et.quadPoints.map(function(zt){return Object.assign({},et,{rect:[zt[2].x,zt[2].y,zt[1].x,zt[1].y],quadPoints:[]})});return _.createElement(_.Fragment,null,Wt.map(function(zt,sr){return _.createElement(pt,{key:sr,annotation:zt,childAnnotation:Ct,page:Pt,viewport:Bt})}))}return _.createElement(cr,{annotation:et,hasPopup:Ut,ignoreBorder:!0,isRenderable:Nt,page:Pt,viewport:Bt},function(zt){return _.createElement(_.Fragment,null,_.createElement("div",O({},zt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":et.id,onClick:zt.popup.toggleOnClick,onMouseEnter:zt.popup.openOnHover,onMouseLeave:zt.popup.closeOnHover}),zt.slot.children),Ct&&Ct.annotationType===c.AnnotationType.Popup&&zt.popup.opened&&_.createElement(Oe,{annotation:Ct,page:Pt,viewport:Bt}))})},Kt=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=et.hasPopup===!1,Ut=Ht(et),Yt=Ot(et),qt=!!(et.hasPopup||Ut||Yt),Nt=et.rect,Wt=Nt[2]-Nt[0],zt=Nt[3]-Nt[1],sr=et.borderStyle.width;return _.createElement(cr,{annotation:et,hasPopup:Bt,ignoreBorder:!0,isRenderable:qt,page:Ct,viewport:Pt},function(tr){return _.createElement("div",O({},tr.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":et.id,onClick:tr.popup.toggleOnClick,onMouseEnter:tr.popup.openOnHover,onMouseLeave:tr.popup.closeOnHover}),et.inkLists&&et.inkLists.length&&_.createElement("svg",{height:"".concat(zt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Wt," ").concat(zt),width:"".concat(Wt,"px")},et.inkLists.map(function(lr,nr){return _.createElement("polyline",{key:nr,fill:"none",stroke:"transparent",strokeWidth:sr||1,points:lr.map(function(Sr){return"".concat(Sr.x-Nt[0],",").concat(Nt[3]-Sr.y)}).join(" ")})})),tr.slot.children)})},rr=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=et.hasPopup===!1,Ut=Ht(et),Yt=Ot(et),qt=!!(et.hasPopup||Ut||Yt),Nt=et.rect,Wt=Nt[2]-Nt[0],zt=Nt[3]-Nt[1],sr=et.borderStyle.width;return _.createElement(cr,{annotation:et,hasPopup:Bt,ignoreBorder:!0,isRenderable:qt,page:Ct,viewport:Pt},function(tr){return _.createElement("div",O({},tr.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":et.id,onClick:tr.popup.toggleOnClick,onMouseEnter:tr.popup.openOnHover,onMouseLeave:tr.popup.closeOnHover}),_.createElement("svg",{height:"".concat(zt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Wt," ").concat(zt),width:"".concat(Wt,"px")},_.createElement("line",{stroke:"transparent",strokeWidth:sr||1,x1:Nt[2]-et.lineCoordinates[0],x2:Nt[2]-et.lineCoordinates[2],y1:Nt[3]-et.lineCoordinates[1],y2:Nt[3]-et.lineCoordinates[3]})),tr.slot.children)})},dr=/^([^\w]*)(javascript|data|vbscript)/im,Gt=/&#(\w+)(^\w|;)?/g,or=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,yr=/^([^:]+):/gm,mr=function(xe,et){et===void 0&&(et="about:blank");var Ct,Pt=(Ct=xe||"",Ct.replace(Gt,function(qt,Nt){return String.fromCharCode(Nt)})).replace(or,"").trim();if(!Pt)return et;var Bt=Pt[0];if(Bt==="."||Bt==="/")return Pt;var Ut=Pt.match(yr);if(!Ut)return Pt;var Yt=Ut[0];return dr.test(Yt)?et:Pt},Nr=function(xe){var et,Ct=xe.annotation,Pt=xe.doc,Bt=xe.outlines,Ut=xe.page,Yt=xe.viewport,qt=xe.onExecuteNamedAction,Nt=xe.onJumpToDest,Wt=!!(Ct.url||Ct.dest||Ct.action||Ct.unsafeUrl),zt={};if(Ct.url||Ct.unsafeUrl){var sr=mr(Ct.url||Ct.unsafeUrl,"");sr?zt={"data-target":"external",href:sr,rel:"noopener noreferrer nofollow",target:Ct.newWindow?"_blank":"",title:sr}:Wt=!1}else zt={href:"","data-annotation-link":Ct.id,onClick:function(lr){lr.preventDefault(),Ct.action?qt(Ct.action):Qt(Pt,Ct.dest).then(function(nr){var Sr=nr.pageIndex,fr=nr.bottomOffset,Tr=nr.leftOffset,vr=nr.scaleTo;Nt(Sr,fr,Tr,vr)})}};var tr=Bt&&Bt.length&&Ct.dest&&typeof Ct.dest=="string"?(et=Bt.find(function(lr){return lr.dest===Ct.dest}))===null||et===void 0?void 0:et.title:"";return tr&&(zt=Object.assign({},zt,{title:tr,"aria-label":tr})),_.createElement(cr,{annotation:Ct,hasPopup:!1,ignoreBorder:!1,isRenderable:Wt,page:Ut,viewport:Yt},function(lr){return _.createElement("div",O({},lr.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":Ct.id,"data-testid":"core__annotation--link-".concat(Ct.id)}),_.createElement("a",O({},zt)))})},Ar=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=et.hasPopup===!1,Ut=Ht(et),Yt=Ot(et),qt=!!(et.hasPopup||Ut||Yt),Nt=et.rect,Wt=Nt[2]-Nt[0],zt=Nt[3]-Nt[1],sr=et.borderStyle.width;return _.createElement(cr,{annotation:et,hasPopup:Bt,ignoreBorder:!0,isRenderable:qt,page:Ct,viewport:Pt},function(tr){return _.createElement("div",O({},tr.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":et.id,onClick:tr.popup.toggleOnClick,onMouseEnter:tr.popup.openOnHover,onMouseLeave:tr.popup.closeOnHover}),et.vertices&&et.vertices.length&&_.createElement("svg",{height:"".concat(zt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Wt," ").concat(zt),width:"".concat(Wt,"px")},_.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:sr||1,points:et.vertices.map(function(lr){return"".concat(lr.x-Nt[0],",").concat(Nt[3]-lr.y)}).join(" ")})),tr.slot.children)})},br=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=et.hasPopup===!1,Ut=Ht(et),Yt=Ot(et),qt=!!(et.hasPopup||Ut||Yt),Nt=et.rect,Wt=Nt[2]-Nt[0],zt=Nt[3]-Nt[1],sr=et.borderStyle.width;return _.createElement(cr,{annotation:et,hasPopup:Bt,ignoreBorder:!0,isRenderable:qt,page:Ct,viewport:Pt},function(tr){return _.createElement("div",O({},tr.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":et.id,onClick:tr.popup.toggleOnClick,onMouseEnter:tr.popup.openOnHover,onMouseLeave:tr.popup.closeOnHover}),et.vertices&&et.vertices.length&&_.createElement("svg",{height:"".concat(zt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Wt," ").concat(zt),width:"".concat(Wt,"px")},_.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:sr||1,points:et.vertices.map(function(lr){return"".concat(lr.x-Nt[0],",").concat(Nt[3]-lr.y)}).join(" ")})),tr.slot.children)})},qr=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=et.hasPopup===!1,Ut=Ht(et),Yt=Ot(et),qt=!!(et.hasPopup||Ut||Yt),Nt=et.rect,Wt=Nt[2]-Nt[0],zt=Nt[3]-Nt[1],sr=et.borderStyle.width;return _.createElement(cr,{annotation:et,hasPopup:Bt,ignoreBorder:!0,isRenderable:qt,page:Ct,viewport:Pt},function(tr){return _.createElement("div",O({},tr.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":et.id,onClick:tr.popup.toggleOnClick,onMouseEnter:tr.popup.openOnHover,onMouseLeave:tr.popup.closeOnHover}),_.createElement("svg",{height:"".concat(zt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Wt," ").concat(zt),width:"".concat(Wt,"px")},_.createElement("rect",{height:zt-sr,fill:"none",stroke:"transparent",strokeWidth:sr||1,x:sr/2,y:sr/2,width:Wt-sr})),tr.slot.children)})},en=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=et.hasPopup===!1,Ut=Ht(et),Yt=Ot(et),qt=!!(et.hasPopup||Ut||Yt);return _.createElement(cr,{annotation:et,hasPopup:Bt,ignoreBorder:!0,isRenderable:qt,page:Ct,viewport:Pt},function(Nt){return _.createElement("div",O({},Nt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":et.id,onClick:Nt.popup.toggleOnClick,onMouseEnter:Nt.popup.openOnHover,onMouseLeave:Nt.popup.closeOnHover}),Nt.slot.children)})},Wr=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=et.hasPopup===!1,Ut=Ht(et),Yt=Ot(et),qt=!!(et.hasPopup||Ut||Yt);return _.createElement(cr,{annotation:et,hasPopup:Bt,ignoreBorder:!0,isRenderable:qt,page:Ct,viewport:Pt},function(Nt){return _.createElement("div",O({},Nt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":et.id,onClick:Nt.popup.toggleOnClick,onMouseEnter:Nt.popup.openOnHover,onMouseLeave:Nt.popup.closeOnHover}),Nt.slot.children)})},rn=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=et.hasPopup===!1,Ut=Ht(et),Yt=Ot(et),qt=!!(et.hasPopup||Ut||Yt);return _.createElement(cr,{annotation:et,hasPopup:Bt,ignoreBorder:!0,isRenderable:qt,page:Ct,viewport:Pt},function(Nt){return _.createElement("div",O({},Nt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":et.id,onClick:Nt.popup.toggleOnClick,onMouseEnter:Nt.popup.openOnHover,onMouseLeave:Nt.popup.closeOnHover}),Nt.slot.children)})},Xr=function(){return _.createElement(Y,{size:16},_.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),_.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),_.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),_.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},ir=function(){return _.createElement(Y,{size:16},_.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),_.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),_.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),_.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),_.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),_.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),_.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),_.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),_.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),_.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Rr=function(){return _.createElement(Y,{size:16},_.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),_.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Vr=function(){return _.createElement(Y,{size:16},_.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),_.createElement("path",{d:"M6 4.5L6 0.5"}),_.createElement("path",{d:"M18 4.5L18 0.5"}),_.createElement("path",{d:"M10 4.5L10 0.5"}),_.createElement("path",{d:"M14 4.5L14 0.5"}))},Zr=function(){return _.createElement(Y,{size:16},_.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),_.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),_.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Et=function(){return _.createElement(Y,{size:16},_.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},xt=function(xe){var et=xe.annotation,Ct=xe.childAnnotation,Pt=xe.page,Bt=xe.viewport,Ut=et.hasPopup===!1,Yt=Ht(et),qt=Ot(et),Nt=!!(et.hasPopup||Yt||qt),Wt=et.name?et.name.toLowerCase():"";return _.createElement(cr,{annotation:et,hasPopup:Ut,ignoreBorder:!1,isRenderable:Nt,page:Pt,viewport:Bt},function(zt){return _.createElement(_.Fragment,null,_.createElement("div",O({},zt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":et.id,onClick:zt.popup.toggleOnClick,onMouseEnter:zt.popup.openOnHover,onMouseLeave:zt.popup.closeOnHover}),Wt&&_.createElement("div",{className:"rpv-core__annotation-text-icon"},Wt==="check"&&_.createElement(U,null),Wt==="comment"&&_.createElement(Xr,null),Wt==="help"&&_.createElement(ir,null),Wt==="insert"&&_.createElement(Et,null),Wt==="key"&&_.createElement(Rr,null),Wt==="note"&&_.createElement(Vr,null),(Wt==="newparagraph"||Wt==="paragraph")&&_.createElement(Zr,null)),zt.slot.children),Ct&&Ct.annotationType===c.AnnotationType.Popup&&zt.popup.opened&&_.createElement(Oe,{annotation:Ct,page:Pt,viewport:Bt}))})},ot=function(xe){var et=xe.annotation,Ct=xe.page,Pt=xe.viewport,Bt=et.hasPopup===!1,Ut=Ht(et),Yt=Ot(et),qt=!!(et.hasPopup||Ut||Yt);return _.createElement(cr,{annotation:et,hasPopup:Bt,ignoreBorder:!0,isRenderable:qt,page:Ct,viewport:Pt},function(Nt){return _.createElement("div",O({},Nt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":et.id,onClick:Nt.popup.toggleOnClick,onMouseEnter:Nt.popup.openOnHover,onMouseLeave:Nt.popup.closeOnHover}),Nt.slot.children)})},bt=function(xe){var et=xe.annotations,Ct=xe.doc,Pt=xe.outlines,Bt=xe.page,Ut=xe.pageIndex,Yt=xe.plugins,qt=xe.rotation,Nt=xe.scale,Wt=xe.onExecuteNamedAction,zt=xe.onJumpToDest,sr=_.useRef(),tr=Bt.getViewport({rotation:qt,scale:Nt}).clone({dontFlip:!0}),lr=et.filter(function(nr){return!nr.parentId});return V(function(){var nr=sr.current;nr&&Yt.forEach(function(Sr){Sr.onAnnotationLayerRender&&Sr.onAnnotationLayerRender({annotations:lr,container:nr,pageIndex:Ut,rotation:qt,scale:Nt})})},[]),_.createElement("div",{ref:sr,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(Ut)},lr.map(function(nr){var Sr=et.find(function(fr){return fr.parentId===nr.id});switch(nr.annotationType){case c.AnnotationType.Caret:return _.createElement(A,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.Circle:return _.createElement(re,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.FileAttachment:return _.createElement(Ce,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.FreeText:return _.createElement(ve,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.Highlight:return _.createElement(pt,{key:nr.id,annotation:nr,childAnnotation:Sr,page:Bt,viewport:tr});case c.AnnotationType.Ink:return _.createElement(Kt,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.Line:return _.createElement(rr,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.Link:return _.createElement(Nr,{key:nr.id,annotation:nr,doc:Ct,outlines:Pt,page:Bt,viewport:tr,onExecuteNamedAction:Wt,onJumpToDest:zt});case c.AnnotationType.Polygon:return _.createElement(Ar,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.Polyline:return _.createElement(br,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.Popup:return _.createElement(Oe,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.Square:return _.createElement(qr,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.Squiggly:return _.createElement(en,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.Stamp:return _.createElement(Wr,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.StrikeOut:return _.createElement(rn,{key:nr.id,annotation:nr,page:Bt,viewport:tr});case c.AnnotationType.Text:return _.createElement(xt,{key:nr.id,annotation:nr,childAnnotation:Sr,page:Bt,viewport:tr});case c.AnnotationType.Underline:return _.createElement(ot,{key:nr.id,annotation:nr,page:Bt,viewport:tr});default:return _.createElement(_.Fragment,{key:nr.id})}}))},_t=function(xe){var et=xe.page,Ct=xe.renderAnnotations,Pt=j(),Bt=_.useState({loading:!0,annotations:[]}),Ut=Bt[0],Yt=Bt[1];return _.useEffect(function(){et.getAnnotations({intent:"display"}).then(function(qt){Pt.current&&Yt({loading:!1,annotations:qt})})},[]),Ut.loading?_.createElement(_.Fragment,null):Ct(Ut.annotations)},Ft=function(xe){var et=xe.doc,Ct=xe.outlines,Pt=xe.page,Bt=xe.pageIndex,Ut=xe.plugins,Yt=xe.rotation,qt=xe.scale,Nt=xe.onExecuteNamedAction,Wt=xe.onJumpToDest;return _.createElement(_t,{page:Pt,renderAnnotations:function(zt){return _.createElement(bt,{annotations:zt,doc:et,outlines:Ct,page:Pt,pageIndex:Bt,plugins:Ut,rotation:Yt,scale:qt,onExecuteNamedAction:Nt,onJumpToDest:Wt})}})},ft=function(xe,et){var Ct=xe%et;return Ct===0?xe:Math.floor(xe-Ct)},Dt=function(xe){var et=xe.canvasLayerRef,Ct=xe.height,Pt=xe.page,Bt=xe.pageIndex,Ut=xe.plugins,Yt=xe.rotation,qt=xe.scale,Nt=xe.width,Wt=xe.onRenderCanvasCompleted,zt=_.useRef();return V(function(){var sr=zt.current;sr&&sr.cancel();var tr=et.current;Ut.forEach(function(Lr){Lr.onCanvasLayerRender&&Lr.onCanvasLayerRender({ele:tr,pageIndex:Bt,rotation:Yt,scale:qt,status:c.LayerRenderStatus.PreRender})});var lr=Pt.getViewport({rotation:Yt,scale:qt}),nr=window.devicePixelRatio||1,Sr=Math.sqrt(16777216/(lr.width*lr.height)),fr=nr>Sr;fr?tr.style.transform="scale(1, 1)":tr.style.removeProperty("transform");var Tr=Math.min(Sr,nr),vr=function(Lr,sn){var Kr,mn;if(Math.floor(Lr)===Lr)return[Lr,1];var Yr=1/Lr;if(Yr>sn)return[1,sn];if(Math.floor(Yr)===Yr)return[1,Yr];for(var pn=Lr>1?Yr:Lr,ln=0,_n=1,tn=1,un=1;;){var gn=ln+tn,En=_n+un;if(En>sn)break;pn<=gn/En?(tn=(Kr=[gn,En])[0],un=Kr[1]):(ln=(mn=[gn,En])[0],_n=mn[1])}return pn<(ln/_n+tn/un)/2?pn===Lr?[ln,_n]:[_n,ln]:pn===Lr?[tn,un]:[un,tn]}(Tr,8),wr=vr[0],$r=vr[1];tr.width=ft(lr.width*Tr,wr),tr.height=ft(lr.height*Tr,wr),tr.style.width="".concat(ft(lr.width,$r),"px"),tr.style.height="".concat(ft(lr.height,$r),"px"),tr.hidden=!0;var xr=tr.getContext("2d",{alpha:!1}),kr=fr||nr!==1?[Tr,0,0,Tr,0,0]:null;return zt.current=Pt.render({canvasContext:xr,transform:kr,viewport:lr}),zt.current.promise.then(function(){tr.hidden=!1,Ut.forEach(function(Lr){Lr.onCanvasLayerRender&&Lr.onCanvasLayerRender({ele:tr,pageIndex:Bt,rotation:Yt,scale:qt,status:c.LayerRenderStatus.DidRender})}),Wt()},function(){Wt()}),function(){tr&&(tr.width=0,tr.height=0)}},[]),_.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(Ct,"px"),width:"".concat(Nt,"px")}},_.createElement("canvas",{ref:et}))},At=function(xe){var et=xe.height,Ct=xe.page,Pt=xe.rotation,Bt=xe.scale,Ut=xe.width,Yt=_.useRef();return V(function(){var qt=Yt.current,Nt=Ct.getViewport({rotation:Pt,scale:Bt});Ct.getOperatorList().then(function(Wt){(function(){var zt=Yt.current;zt&&(zt.innerHTML="")})(),new E.SVGGraphics(Ct.commonObjs,Ct.objs).getSVG(Wt,Nt).then(function(zt){zt.style.height="".concat(et,"px"),zt.style.width="".concat(Ut,"px"),qt.appendChild(zt)})})},[]),_.createElement("div",{className:"rpv-core__svg-layer",ref:Yt})},Jt=function(xe){var et=xe.containerRef,Ct=xe.page,Pt=xe.pageIndex,Bt=xe.plugins,Ut=xe.rotation,Yt=xe.scale,qt=xe.onRenderTextCompleted,Nt=_.useRef(),Wt=function(){var zt=et.current;zt&&([].slice.call(zt.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(sr){return zt.removeChild(sr)}),[].slice.call(zt.querySelectorAll('br[role="presentation"]')).forEach(function(sr){return zt.removeChild(sr)}))};return V(function(){var zt=Nt.current;zt&&zt.cancel();var sr=et.current;if(sr){sr.removeAttribute("data-testid");var tr=Ct.getViewport({rotation:Ut,scale:Yt});return Bt.forEach(function(lr){lr.onTextLayerRender&&lr.onTextLayerRender({ele:sr,pageIndex:Pt,scale:Yt,status:c.LayerRenderStatus.PreRender})}),Ct.getTextContent().then(function(lr){Wt(),Nt.current=E.renderTextLayer({container:sr,textContent:lr,viewport:tr}),Nt.current.promise.then(function(){sr.setAttribute("data-testid","core__text-layer-".concat(Pt)),[].slice.call(sr.children).forEach(function(nr){nr.classList.contains("rpv-core__text-layer-text--not")||nr.classList.add("rpv-core__text-layer-text")}),Bt.forEach(function(nr){nr.onTextLayerRender&&nr.onTextLayerRender({ele:sr,pageIndex:Pt,scale:Yt,status:c.LayerRenderStatus.DidRender})}),qt()},function(){sr.removeAttribute("data-testid"),qt()})}),function(){var lr;Wt(),(lr=Nt.current)===null||lr===void 0||lr.cancel()}}},[]),_.createElement("div",{className:"rpv-core__text-layer",ref:et})},gr=function(xe){var et=xe.doc,Ct=xe.outlines,Pt=xe.pageIndex,Bt=xe.pageRotation,Ut=xe.pageSize,Yt=xe.plugins,qt=xe.renderPage,Nt=xe.renderQueueKey,Wt=xe.rotation,zt=xe.scale,sr=xe.shouldRender,tr=xe.onExecuteNamedAction,lr=xe.onJumpToDest,nr=xe.onRenderCompleted,Sr=xe.onRotatePage,fr=j(),Tr=_.useState(null),vr=Tr[0],wr=Tr[1],$r=_.useState(!1),xr=$r[0],kr=$r[1],Lr=_.useState(!1),sn=Lr[0],Kr=Lr[1],mn=_.useRef(),Yr=_.useRef(),pn=Math.abs(Wt+Bt)%180==0,ln=Ut.pageWidth*zt,_n=Ut.pageHeight*zt,tn=pn?ln:_n,un=pn?_n:ln,gn=(Ut.rotation+Wt+Bt)%360,En=_.useRef(0),Fr=qt||function(Ir){return _.createElement(_.Fragment,null,Ir.canvasLayer.children,Ir.textLayer.children,Ir.annotationLayer.children)};return _.useEffect(function(){wr(null),kr(!1),Kr(!1)},[Bt,Wt,zt]),_.useEffect(function(){sr&&fr.current&&!vr&&Zt(et,Pt).then(function(Ir){fr.current&&(En.current=Nt,wr(Ir))})},[sr,vr]),_.useEffect(function(){xr&&sn&&(Nt!==En.current?(wr(null),kr(!1),Kr(!1)):nr(Pt))},[xr,sn]),_.createElement("div",{className:"rpv-core__page-layer","data-testid":"core__page-layer-".concat(Pt),style:{height:"".concat(un,"px"),width:"".concat(tn,"px")}},vr?_.createElement(_.Fragment,null,Fr({annotationLayer:{attrs:{},children:_.createElement(Ft,{doc:et,outlines:Ct,page:vr,pageIndex:Pt,plugins:Yt,rotation:gn,scale:zt,onExecuteNamedAction:tr,onJumpToDest:lr})},canvasLayer:{attrs:{},children:_.createElement(Dt,{canvasLayerRef:mn,height:un,page:vr,pageIndex:Pt,plugins:Yt,rotation:gn,scale:zt,width:tn,onRenderCanvasCompleted:function(){fr.current&&kr(!0)}})},canvasLayerRendered:xr,doc:et,height:un,pageIndex:Pt,rotation:gn,scale:zt,svgLayer:{attrs:{},children:_.createElement(At,{height:un,page:vr,rotation:gn,scale:zt,width:tn})},textLayer:{attrs:{},children:_.createElement(Jt,{containerRef:Yr,page:vr,pageIndex:Pt,plugins:Yt,rotation:gn,scale:zt,onRenderTextCompleted:function(){fr.current&&Kr(!0)}})},textLayerRendered:sn,width:tn,markRendered:nr,onRotatePage:function(Ir){return Sr(Pt,Ir)}}),Yt.map(function(Ir,Br){return Ir.renderPageLayer?_.createElement(_.Fragment,{key:Br},Ir.renderPageLayer({canvasLayerRef:mn,canvasLayerRendered:xr,doc:et,height:un,pageIndex:Pt,rotation:gn,scale:zt,textLayerRef:Yr,textLayerRendered:sn,width:tn})):_.createElement(_.Fragment,{key:Br})})):_.createElement(te,{testId:"core__page-layer-loading-".concat(Pt)}))},Er=function(xe,et,Ct,Pt){switch(Pt){case c.SpecialZoomLevel.ActualSize:return 1;case c.SpecialZoomLevel.PageFit:return Math.min((xe.clientWidth-17)/Ct,(xe.clientHeight-16)/et);case c.SpecialZoomLevel.PageWidth:return(xe.clientWidth-17)/Ct}},Cr=function(xe){var et=[];return xe.map(function(Ct){et=et.concat(Ct).concat(function(Pt){var Bt=[];return Pt.items&&Pt.items.length>0&&(Bt=Bt.concat(Cr(Pt.items))),Bt}(Ct))}),et},Ur={buildPageStyles:function(){return{}},tranformSize:function(xe){return xe.size}},_r=function(xe){var et=xe.currentFile,Ct=xe.defaultScale,Pt=xe.doc,Bt=xe.initialPage,Ut=xe.initialRotation,Yt=xe.initialScale,qt=xe.pageLayout,Nt=xe.pageSizes,Wt=xe.plugins,zt=xe.renderPage,sr=xe.scrollMode,tr=xe.viewerState,lr=xe.onDocumentLoad,nr=xe.onOpenFile,Sr=xe.onPageChange,fr=xe.onRotate,Tr=xe.onRotatePage,vr=xe.onZoom,wr=Pt.numPages,$r=Pt.loadingTask.docId,xr=_.useContext(ae).l10n,kr=_.useContext(Q),Lr=kr.direction===c.TextDirection.RightToLeft,sn=_.useRef(),Kr=_.useRef(),mn=_.useState(Bt),Yr=mn[0],pn=mn[1],ln=_.useRef(null),_n=_.useState(Ut),tn=_n[0],un=_n[1],gn=Z(tn),En=_.useState(!1),Fr=En[0],Ir=En[1],Br=_.useState(new Map),Dr=Br[0],zr=Br[1],Qr=_.useState(sr),Hr=Qr[0],Sn=Qr[1],an=Z(Hr),wn=function(pr){var Pr=j(),Mr=_.useState([]),dn=Mr[0],vn=Mr[1];return _.useEffect(function(){pr.getOutline().then(function(hn){if(Pr.current&&hn!==null){var In=Cr(hn);vn(In)}})},[]),dn}(Pt),An=_.useState(Yt),Rn=An[0],Pn=An[1],Jr=_.useRef(tr),Cn=_.useRef(typeof Ct=="string"?Ct:null),Tn=_.useState(-1),qn=Tn[0],yn=Tn[1],on=_.useState(0),Dn=on[0],Un=on[1],$n=oe({doc:Pt});_.useEffect(function(){return function(){It.clear(),Vt.clear()}},[$r]);var kn,Zn,ta,la,$a=_.useMemo(function(){return Object.assign({},Ur,qt)},[]),si=_.useCallback(function(pr){var Pr=[Nt[pr].pageHeight,Nt[pr].pageWidth],Mr=Math.abs(tn)%180==0?{height:Pr[0],width:Pr[1]}:{height:Pr[1],width:Pr[0]};return{height:Mr.height*Rn,width:Mr.width*Rn}},[tn,Rn]),ci=_.useCallback(function(pr){return Math.max(pr-3,0)},[]),li=_.useCallback(function(pr){return Math.min(pr+3,wr-1)},[wr]),ui=_.useCallback(function(pr,Pr){return $a.tranformSize({numPages:wr,pageIndex:pr,size:Pr})},[]),bn=at({estimateSize:si,isRtl:Lr,numberOfItems:wr,parentRef:Kr,scrollMode:Hr,setStartRange:ci,setEndRange:li,transformSize:ui}),di=(kn=function(pr){Cn.current&&(yn(-1),Qn(Cn.current))},Zn=200,ta=_.useRef(),la=function(){ta.current&&clearTimeout(ta.current)},_.useEffect(function(){return function(){return la()}},[]),_.useCallback(function(){for(var pr=[],Pr=0;Pr<arguments.length;Pr++)pr[Pr]=arguments[Pr];la(),ta.current=setTimeout(function(){kn.apply(void 0,pr)},Zn)},[kn,Zn]));(function(pr){var Pr=pr.targetRef,Mr=pr.onResize;V(function(){var dn=new ResizeObserver(function(hn){hn.forEach(function(In){Mr(In.target)})}),vn=Pr.current;if(vn)return dn.observe(vn),function(){dn.unobserve(vn)}},[])})({targetRef:Kr,onResize:di});var Yn=function(pr){var Pr=pr;Wt.forEach(function(Mr){Mr.onViewerStateChange&&(Pr=Mr.onViewerStateChange(Pr))}),Jr.current=Pr},fi=function(){return Kr.current},pi=function(){return Jr.current},Ia=_.useCallback(function(pr,Pr,Mr,dn){var vn=Kr.current,hn=Jr.current;vn&&hn&&Zt(Pt,pr).then(function(In){var Ln=In.getViewport({scale:1}),zn=0,ra=(typeof Pr=="function"?Pr(Ln.width,Ln.height):Pr)||0,na=(typeof Mr=="function"?Mr(Ln.width,Ln.height):Mr)||0,Gn=hn.scale;switch(dn){case c.SpecialZoomLevel.PageFit:zn=0,na=0,Qn(c.SpecialZoomLevel.PageFit);break;case c.SpecialZoomLevel.PageWidth:Gn=Er(vn,Nt[pr].pageHeight,Nt[pr].pageWidth,c.SpecialZoomLevel.PageWidth),zn=(Ln.height-ra)*Gn,na*=Gn,Qn(Gn);break;default:zn=(Ln.height-ra)*Gn,na*=Gn}switch(hn.scrollMode){case c.ScrollMode.Horizontal:bn.scrollToItem(pr,{left:na,top:0});break;case c.ScrollMode.Vertical:default:bn.scrollToItem(pr,{left:0,top:zn})}})},[]),Vn=_.useCallback(function(pr){0<=pr&&pr<wr&&bn.scrollToItem(pr,{left:0,top:0})},[]),Na=_.useCallback(function(pr){var Pr,Mr;(Pr=pr.name,Mr=Pr.split(/\./).pop(),Mr?Mr.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(dn){var vn=new FileReader;vn.readAsArrayBuffer(pr),vn.onload=function(){var hn=new Uint8Array(vn.result);dn(hn)}}).then(function(dn){nr(pr.name,dn)})},[nr]),Da=_.useCallback(function(pr){var Pr=pr===c.RotateDirection.Backward?-90:90,Mr=Jr.current.rotation,dn=Mr===360||Mr===-360?Pr:Mr+Pr;$n.markNotRendered(),un(dn),Yn(O(O({},Jr.current),{rotation:dn})),fr({direction:pr,doc:Pt,rotation:dn})},[]),ua=_.useCallback(function(pr,Pr){var Mr=Pr===c.RotateDirection.Backward?-90:90,dn=Jr.current.pagesRotation,vn=(dn.has(pr)?dn.get(pr):Ut)+Mr,hn=dn.set(pr,vn);zr(hn),Ir(function(In){return!In}),Yn(O(O({},Jr.current),{pagesRotation:hn,rotatedPage:pr})),Tr({direction:Pr,doc:Pt,pageIndex:pr,rotation:vn}),$n.markRendering(pr),yn(pr)},[]),Ma=_.useCallback(function(pr){Yn(O(O({},Jr.current),{scrollMode:pr})),Sn(pr)},[]),Qn=_.useCallback(function(pr){var Pr=Kr.current,Mr=Jr.current.pageIndex;if(!(Mr<0||Mr>=wr)){var dn=Nt[Mr].pageHeight,vn=Nt[Mr].pageWidth,hn=Pr?typeof pr=="string"?Er(Pr,dn,vn,pr):pr:1;Cn.current=typeof pr=="string"?pr:null,hn!==Jr.current.scale&&(bn.zoom(hn/Jr.current.scale),Un(function(In){return In+1}),$n.markNotRendered(),Pn(hn),vr({doc:Pt,scale:hn}),Yn(O(O({},Jr.current),{scale:hn})))}},[]);_.useEffect(function(){var pr={getPagesContainer:fi,getViewerState:pi,jumpToDestination:Ia,jumpToPage:Vn,openFile:Na,rotate:Da,rotatePage:ua,setViewerState:Yn,switchScrollMode:Ma,zoom:Qn};return Wt.forEach(function(Pr){Pr.install&&Pr.install(pr)}),function(){Wt.forEach(function(Pr){Pr.uninstall&&Pr.uninstall(pr)})}},[$r]),_.useEffect(function(){lr({doc:Pt,file:et}),Wt.forEach(function(pr){pr.onDocumentLoad&&pr.onDocumentLoad({doc:Pt,file:et})}),Bt&&Vn(Bt)},[$r]),V(function(){var pr=Jr.current.pageIndex;pr>-1&&an!==Hr&&bn.scrollToItem(pr,{left:0,top:0})},[Hr]),V(function(){var pr=Jr.current.pageIndex;pr>-1&&gn!==tn&&bn.scrollToItem(pr,{left:0,top:0})},[tn]),_.useEffect(function(){bn.isSmoothScrolling||ln.current!==null&&ln.current===Yr||(ln.current=Yr,Sr({currentPage:Yr,doc:Pt}))},[Yr,bn.isSmoothScrolling]),_.useEffect(function(){var pr=bn.startRange,Pr=bn.endRange,Mr=bn.maxVisbilityIndex,dn=bn.virtualItems,vn=Mr;pn(vn),Yn(O(O({},Jr.current),{pageIndex:vn})),$n.setRange(pr,Pr);for(var hn=function(Ln){var zn=dn.find(function(ra){return ra.index===Ln});zn&&$n.setVisibility(Ln,zn.visibility)},In=pr;In<=Pr;In++)hn(In);ka()},[bn.startRange,bn.endRange,bn.maxVisbilityIndex,Fr,tn,Rn]);var hi=_.useCallback(function(pr){$n.markRendered(pr),ka()},[Dn]),ka=function(){var pr=$n.getHighestPriorityPage();pr>-1&&$n.isInRange(pr)&&($n.markRendering(pr),yn(pr))},mi=function(pr){var Pr=Yr-1,Mr=Yr+1;switch(pr){case"FirstPage":Vn(0);break;case"LastPage":Vn(wr-1);break;case"NextPage":Mr<wr&&Vn(Mr);break;case"PrevPage":Pr>=0&&Vn(Pr)}},gi=_.useCallback(function(){var pr=xr&&xr.core?xr.core.pageLabel:"Page {{pageIndex}}",Pr={attrs:{"data-testid":"core__inner-container",ref:sn,style:{height:"100%"}},children:_.createElement(_.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:ee({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":Hr===c.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":Lr,"rpv-core__inner-pages--vertical":Hr===c.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":Hr===c.ScrollMode.Wrapped}),ref:Kr,style:{height:"100%",overflow:"auto",position:"relative"}},children:_.createElement("div",{style:bn.getContainerStyles()},bn.virtualItems.map(function(Mr){return _.createElement("div",{"aria-label":pr.replace("{{pageIndex}}","".concat(Mr.index+1)),className:"rpv-core__inner-page",key:Mr.index,role:"region",style:Object.assign({},bn.getItemStyles(Mr),$a.buildPageStyles({numPages:wr,pageIndex:Mr.index}))},_.createElement(gr,{doc:Pt,outlines:wn,pageIndex:Mr.index,pageRotation:Dr.has(Mr.index)?Dr.get(Mr.index):0,pageSize:Nt[Mr.index],plugins:Wt,renderPage:zt,renderQueueKey:Dn,rotation:tn,scale:Rn,shouldRender:qn===Mr.index,onExecuteNamedAction:mi,onJumpToDest:Ia,onRenderCompleted:hi,onRotatePage:ua}))}))}};return Wt.forEach(function(Mr){Mr.renderViewer&&(Pr=Mr.renderViewer({containerRef:sn,doc:Pt,pagesRotation:Dr,pageSizes:Nt,rotation:tn,slot:Pr,themeContext:kr,jumpToPage:Vn,openFile:Na,rotate:Da,rotatePage:ua,switchScrollMode:Ma,zoom:Qn}))}),Pr},[Wt,bn]),Fa=_.useCallback(function(pr){return _.createElement("div",O({},pr.attrs,{style:pr.attrs&&pr.attrs.style?pr.attrs.style:{}}),pr.children,pr.subSlot&&Fa(pr.subSlot))},[]);return Fa(gi())},jr=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],nn=function(xe){var et=xe.defaultScale,Ct=xe.doc,Pt=xe.render,Bt=xe.scrollMode,Ut=_.useRef(),Yt=_.useState(1),qt=Yt[0],Nt=Yt[1],Wt=_.useState([]),zt=Wt[0],sr=Wt[1];return _.useLayoutEffect(function(){var tr=Array(Ct.numPages).fill(0).map(function(lr,nr){return new Promise(function(Sr,fr){Zt(Ct,nr).then(function(Tr){var vr=Tr.getViewport({scale:1});Sr({pageHeight:vr.height,pageWidth:vr.width,rotation:vr.rotation})})})});Promise.all(tr).then(function(lr){sr(lr);var nr=Ut.current;if(nr&&lr.length!==0){var Sr=lr[0].pageWidth,fr=lr[0].pageHeight,Tr=nr.parentElement,vr=(Tr.clientWidth-45)/Sr,wr=(Tr.clientHeight-45)/fr,$r=vr;switch(Bt){case c.ScrollMode.Horizontal:$r=Math.min(vr,wr);break;case c.ScrollMode.Vertical:default:$r=vr}var xr,kr,Lr=et?typeof et=="string"?Er(Tr,fr,Sr,et):et:(xr=$r,(kr=jr.findIndex(function(sn){return sn>=xr}))===-1||kr===0?xr:jr[kr-1]);Nt(Lr)}})},[Ct.loadingTask.docId]),zt.length===0?_.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:Ut},_.createElement(te,null)):Pt(zt,qt)},Or=function(){};(function(xe){xe[xe.REQUIRE_PASSWORD=0]="REQUIRE_PASSWORD",xe[xe.WRONG_PASSWORD=1]="WRONG_PASSWORD"})(ur||(ur={}));var cn=function(xe){function et(Ct,Pt){var Bt=xe.call(this)||this;return Bt.verifyPassword=Ct,Bt.submitPassword=Pt,Bt}return M(et,xe),et}(Or),xn=function(xe){var et=xe.submitPassword,Ct=xe.verifyPassword,Pt=xe.onDocumentAskPassword,Bt=_.useContext(ae).l10n,Ut=_.useState(""),Yt=Ut[0],qt=Ut[1],Nt=_.useContext(Q).direction===c.TextDirection.RightToLeft,Wt=function(){return Ct(Yt)};return _.useEffect(function(){Pt&&Pt({verifyPassword:Ct})},[]),_.createElement("div",{className:"rpv-core__asking-password-wrapper"},_.createElement("div",{className:ee({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":Nt})},_.createElement("div",{className:"rpv-core__asking-password-message"},et===ur.REQUIRE_PASSWORD&&Bt.core.askingPassword.requirePasswordToOpen,et===ur.WRONG_PASSWORD&&Bt.core.wrongPassword.tryAgain),_.createElement("div",{className:"rpv-core__asking-password-body"},_.createElement("div",{className:ee({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!Nt,"rpv-core__asking-password-input--rtl":Nt})},_.createElement(B,{testId:"core__asking-password-input",type:"password",value:Yt,onChange:qt,onKeyDown:function(zt){zt.key==="Enter"&&Wt()}})),_.createElement(G,{onClick:Wt},Bt.core.askingPassword.submit))))},Nn=function(xe){function et(Ct){var Pt=xe.call(this)||this;return Pt.doc=Ct,Pt}return M(et,xe),et}(Or),jn=function(xe){function et(Ct){var Pt=xe.call(this)||this;return Pt.error=Ct,Pt}return M(et,xe),et}(Or),On=function(xe){function et(Ct){var Pt=xe.call(this)||this;return Pt.percentages=Ct,Pt}return M(et,xe),et}(Or),Wn=function(xe){var et=xe.characterMap,Ct=xe.file,Pt=xe.httpHeaders,Bt=xe.render,Ut=xe.renderError,Yt=xe.renderLoader,qt=xe.transformGetDocumentParams,Nt=xe.withCredentials,Wt=xe.onDocumentAskPassword,zt=_.useContext(Q).direction===c.TextDirection.RightToLeft,sr=_.useState(new On(0)),tr=sr[0],lr=sr[1],nr=_.useState(0);nr[0],nr[1];var Sr=_.useRef(""),fr=_.useState(null);fr[0],fr[1];var Tr=j();return _.useEffect(function(){Sr.current="",lr(new On(0));var vr=new E.PDFWorker({name:"PDFWorker_".concat(Date.now())}),wr=Object.assign({httpHeaders:Pt,withCredentials:Nt,worker:vr},typeof Ct=="string"?{url:Ct}:{data:Ct},et?{cMapUrl:et.url,cMapPacked:et.isCompressed}:{}),$r=qt?qt(wr):wr,xr=E.getDocument($r);return xr.onPassword=function(kr,Lr){switch(Lr){case E.PasswordResponses.NEED_PASSWORD:Tr.current&&lr(new cn(kr,ur.REQUIRE_PASSWORD));break;case E.PasswordResponses.INCORRECT_PASSWORD:Tr.current&&lr(new cn(kr,ur.WRONG_PASSWORD))}},xr.onProgress=function(kr){var Lr=kr.total>0?Math.min(100,100*kr.loaded/kr.total):100;Tr.current&&Sr.current===""&&lr(new On(Lr))},xr.promise.then(function(kr){Sr.current=kr.loadingTask.docId,Tr.current&&lr(new Nn(kr))},function(kr){return Tr.current&&!vr.destroyed&&lr(new jn({message:kr.message||"Cannot load document",name:kr.name}))}),function(){xr.destroy(),vr.destroy()}},[Ct]),tr instanceof cn?_.createElement(xn,{submitPassword:tr.submitPassword,verifyPassword:tr.verifyPassword,onDocumentAskPassword:Wt}):tr instanceof Nn?Bt(tr.doc):tr instanceof jn?Ut?Ut(tr.error):_.createElement("div",{className:ee({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":zt})},_.createElement("div",{className:"rpv-core__doc-error-text"},tr.error.message)):_.createElement("div",{"data-testid":"core__doc-loading",className:ee({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":zt})},Yt?Yt(tr.percentages):_.createElement(te,null))},Bn=function(xe,et){var Ct=_.useMemo(function(){return xe==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":xe},[]),Pt=_.useState(Ct),Bt=Pt[0],Ut=Pt[1],Yt=Z(Bt);return _.useEffect(function(){if(xe==="auto"){var qt=window.matchMedia("(prefers-color-scheme: dark)"),Nt=function(Wt){Ut(Wt.matches?"dark":"light")};return qt.addEventListener("change",Nt),function(){return qt.removeEventListener("change",Nt)}}},[]),_.useEffect(function(){Bt!==Yt&&et&&et(Bt)},[Bt]),_.useEffect(function(){xe!==Bt&&Ut(xe)},[xe]),{currentTheme:Bt,setCurrentTheme:Ut}};c.Button=function(xe){var et=xe.children,Ct=xe.testId,Pt=xe.onClick,Bt=_.useContext(Q).direction===c.TextDirection.RightToLeft,Ut=Ct?{"data-testid":Ct}:{};return _.createElement("button",O({className:ee({"rpv-core__button":!0,"rpv-core__button--rtl":Bt}),type:"button",onClick:Pt},Ut),et)},c.Icon=Y,c.LazyRender=function(xe){var et=xe.attrs,Ct=xe.children,Pt=xe.testId,Bt=_.useState(!1),Ut=Bt[0],Yt=Bt[1],qt=Pt?O(O({},et),{"data-testid":Pt}):et,Nt=W({once:!0,onVisibilityChanged:function(Wt){Wt.isVisible&&Yt(!0)}});return _.createElement("div",O({ref:Nt},qt),Ut&&Ct)},c.LocalizationContext=ae,c.Menu=function(xe){var et=xe.children,Ct=_.useRef(),Pt=_.useRef([]),Bt=_.useContext(Q).direction===c.TextDirection.RightToLeft,Ut=function(qt){if(Ct.current)switch(qt.key){case"Tab":qt.preventDefault();break;case"ArrowDown":qt.preventDefault(),Yt(function(Nt,Wt){return Wt+1});break;case"ArrowUp":qt.preventDefault(),Yt(function(Nt,Wt){return Wt-1});break;case"End":qt.preventDefault(),Yt(function(Nt,Wt){return Nt.length-1});break;case"Home":qt.preventDefault(),Yt(function(Nt,Wt){return 0})}},Yt=function(qt){if(Ct.current){var Nt=Pt.current,Wt=Nt.findIndex(function(sr){return sr.getAttribute("tabindex")==="0"}),zt=Math.min(Nt.length-1,Math.max(0,qt(Nt,Wt)));Wt>=0&&Wt<=Nt.length-1&&Nt[Wt].setAttribute("tabindex","-1"),Nt[zt].setAttribute("tabindex","0"),Nt[zt].focus()}};return V(function(){var qt=Ct.current;if(qt){var Nt=function(Wt){var zt=[];return Wt.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(sr){if(sr instanceof HTMLElement){var tr=sr.parentElement;(tr===Wt||window.getComputedStyle(tr).display!=="none")&&zt.push(sr)}}),zt}(qt);Pt.current=Nt}},[]),V(function(){return document.addEventListener("keydown",Ut),function(){document.removeEventListener("keydown",Ut)}},[]),_.createElement("div",{ref:Ct,"aria-orientation":"vertical",className:ee({"rpv-core__menu":!0,"rpv-core__menu--rtl":Bt}),role:"menu",tabIndex:0},et)},c.MenuDivider=function(){return _.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},c.MenuItem=function(xe){var et=xe.checked,Ct=et!==void 0&&et,Pt=xe.children,Bt=xe.icon,Ut=Bt===void 0?null:Bt,Yt=xe.isDisabled,qt=Yt!==void 0&&Yt,Nt=xe.testId,Wt=xe.onClick,zt=_.useContext(Q).direction===c.TextDirection.RightToLeft,sr=Nt?{"data-testid":Nt}:{};return _.createElement("button",O({className:ee({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":qt,"rpv-core__menu-item--ltr":!zt,"rpv-core__menu-item--rtl":zt}),role:"menuitem",tabIndex:-1,type:"button",onClick:Wt},sr),_.createElement("div",{className:ee({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!zt,"rpv-core__menu-item-icon--rtl":zt})},Ut),_.createElement("div",{className:ee({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!zt,"rpv-core__menu-item-label--rtl":zt})},Pt),_.createElement("div",{className:ee({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!zt,"rpv-core__menu-item-check--rtl":zt})},Ct&&_.createElement(U,null)))},c.MinimalButton=function(xe){var et=xe.ariaLabel,Ct=et===void 0?"":et,Pt=xe.ariaKeyShortcuts,Bt=Pt===void 0?"":Pt,Ut=xe.children,Yt=xe.isDisabled,qt=Yt!==void 0&&Yt,Nt=xe.isSelected,Wt=Nt!==void 0&&Nt,zt=xe.testId,sr=xe.onClick,tr=_.useContext(Q).direction===c.TextDirection.RightToLeft,lr=zt?{"data-testid":zt}:{};return _.createElement("button",O({"aria-label":Ct},Bt&&{"aria-keyshortcuts":Bt},qt&&{"aria-disabled":!0},{className:ee({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":qt,"rpv-core__minimal-button--rtl":tr,"rpv-core__minimal-button--selected":Wt}),type:"button",onClick:sr},lr),Ut)},c.Modal=function(xe){var et=xe.ariaControlsSuffix,Ct=xe.closeOnClickOutside,Pt=xe.closeOnEscape,Bt=xe.content,Ut=xe.isOpened,Yt=Ut!==void 0&&Ut,qt=xe.target,Nt=et||"".concat(Se());return _.createElement($t,{target:qt?function(Wt,zt){return _.createElement("div",{"aria-expanded":zt?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(Nt)},qt(Wt,zt))}:null,content:function(Wt){return _.createElement(ht,null,_.createElement(Tt,{ariaControlsSuffix:Nt,closeOnClickOutside:Ct,closeOnEscape:Pt,onToggle:Wt},Bt(Wt)))},isOpened:Yt})},c.Popover=function(xe){var et=xe.ariaHasPopup,Ct=et===void 0?"dialog":et,Pt=xe.ariaControlsSuffix,Bt=xe.closeOnClickOutside,Ut=xe.closeOnEscape,Yt=xe.content,qt=xe.lockScroll,Nt=qt===void 0||qt,Wt=xe.offset,zt=xe.position,sr=xe.target,tr=St(!1),lr=tr.opened,nr=tr.toggle,Sr=_.useRef(),fr=_.useMemo(function(){return Pt||"".concat(Se())},[]);return _.createElement("div",{ref:Sr,"aria-expanded":lr?"true":"false","aria-haspopup":Ct,"aria-controls":"rpv-core__popver-body-".concat(fr)},sr(nr,lr),lr&&_.createElement(_.Fragment,null,Nt&&_.createElement(rt,{closeOnEscape:Ut,onClose:nr}),_.createElement(st,{ariaControlsSuffix:fr,closeOnClickOutside:Bt,offset:Wt,position:zt,targetRef:Sr,onClose:nr},Yt(nr))))},c.PrimaryButton=G,c.ProgressBar=function(xe){var et=xe.progress,Ct=_.useContext(Q).direction===c.TextDirection.RightToLeft;return _.createElement("div",{className:ee({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":Ct})},_.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(et,"%")}},et,"%"))},c.Separator=function(){return _.createElement("div",{className:"rpv-core__separator"})},c.Spinner=te,c.Splitter=function(xe){var et=xe.constrain,Ct=_.useContext(Q).direction===c.TextDirection.RightToLeft,Pt=_.useRef(),Bt=_.useRef(),Ut=_.useRef(),Yt=_.useRef(0),qt=_.useRef(0),Nt=_.useRef(0),Wt=_.useRef(0),zt={capture:!0},sr=function(lr){var nr=Pt.current,Sr=Bt.current,fr=Ut.current;if(nr&&Sr&&fr){var Tr=Wt.current,vr=lr.clientX-Yt.current,wr=Nt.current+(Ct?-vr:vr),$r=nr.parentElement.getBoundingClientRect().width,xr=100*wr/$r;if(nr.classList.add("rpv-core__splitter--resizing"),et){var kr=$r-wr-Tr;if(!et({firstHalfPercentage:xr,firstHalfSize:wr,secondHalfPercentage:100*kr/$r,secondHalfSize:kr}))return}Sr.style.width="".concat(xr,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),Sr.classList.add("rpv-core__splitter-sibling--resizing"),fr.classList.add("rpv-core__splitter-sibling--resizing")}},tr=function(lr){var nr=Pt.current,Sr=Bt.current,fr=Ut.current;nr&&Sr&&fr&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),nr.classList.remove("rpv-core__splitter--resizing"),Sr.classList.remove("rpv-core__splitter-sibling--resizing"),fr.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",sr,zt),document.removeEventListener("mouseup",tr,zt))};return _.useEffect(function(){var lr=Pt.current;lr&&(Wt.current=lr.getBoundingClientRect().width,Bt.current=lr.previousElementSibling,Ut.current=lr.nextElementSibling)},[]),_.createElement("div",{ref:Pt,className:"rpv-core__splitter",onMouseDown:function(lr){var nr=Bt.current;nr&&(Yt.current=lr.clientX,qt.current=lr.clientY,Nt.current=nr.getBoundingClientRect().width,document.addEventListener("mousemove",sr,zt),document.addEventListener("mouseup",tr,zt))}})},c.TextBox=B,c.ThemeContext=Q,c.Tooltip=function(xe){var et=xe.ariaControlsSuffix,Ct=xe.content,Pt=xe.offset,Bt=xe.position,Ut=xe.target,Yt=St(!1),qt=Yt.opened,Nt=Yt.toggle,Wt=_.useRef(),zt=_.useRef(),sr=_.useMemo(function(){return et||"".concat(Se())},[]);it(function(){Wt.current&&document.activeElement&&Wt.current.contains(document.activeElement)&&lr()});var tr=function(){Nt(c.ToggleStatus.Open)},lr=function(){Nt(c.ToggleStatus.Close)};return _.createElement(_.Fragment,null,_.createElement("div",{ref:Wt,"aria-describedby":"rpv-core__tooltip-body-".concat(sr),onBlur:function(nr){nr.relatedTarget instanceof HTMLElement&&nr.currentTarget.parentElement&&nr.currentTarget.parentElement.contains(nr.relatedTarget)?zt.current&&(zt.current.style.display="none"):lr()},onFocus:tr,onMouseEnter:tr,onMouseLeave:lr},Ut),qt&&_.createElement(tt,{ariaControlsSuffix:sr,contentRef:zt,offset:Pt,position:Bt,targetRef:Wt},Ct()))},c.Viewer=function(xe){var et=xe.characterMap,Ct=xe.defaultScale,Pt=xe.fileUrl,Bt=xe.httpHeaders,Ut=Bt===void 0?{}:Bt,Yt=xe.initialPage,qt=Yt===void 0?0:Yt,Nt=xe.pageLayout,Wt=xe.initialRotation,zt=Wt===void 0?0:Wt,sr=xe.localization,tr=xe.plugins,lr=tr===void 0?[]:tr,nr=xe.renderError,Sr=xe.renderPage,fr=xe.renderLoader,Tr=xe.scrollMode,vr=Tr===void 0?c.ScrollMode.Vertical:Tr,wr=xe.transformGetDocumentParams,$r=xe.theme,xr=$r===void 0?{direction:c.TextDirection.LeftToRight,theme:"light"}:$r,kr=xe.withCredentials,Lr=kr!==void 0&&kr,sn=xe.onDocumentAskPassword,Kr=xe.onDocumentLoad,mn=Kr===void 0?function(){}:Kr,Yr=xe.onPageChange,pn=Yr===void 0?function(){}:Yr,ln=xe.onRotate,_n=ln===void 0?function(){}:ln,tn=xe.onRotatePage,un=tn===void 0?function(){}:tn,gn=xe.onSwitchTheme,En=gn===void 0?function(){}:gn,Fr=xe.onZoom,Ir=Fr===void 0?function(){}:Fr,Br=_.useState({data:Pt,name:typeof Pt=="string"?Pt:"",shouldLoad:!1}),Dr=Br[0],zr=Br[1],Qr=function(yn,on){zr({data:on,name:yn,shouldLoad:!0})},Hr=_.useState(!1),Sn=Hr[0],an=Hr[1],wn=Z(Dr);_.useEffect(function(){var yn,on,Dn,Un;yn=wn.data,Un=typeof(on=Pt),(Dn=typeof yn)=="string"&&Un==="string"&&yn===on||Dn==="object"&&Un==="object"&&yn.length===on.length&&yn.every(function($n,kn){return $n===on[kn]})||zr({data:Pt,name:typeof Pt=="string"?Pt:"",shouldLoad:Sn})},[Pt,Sn]);var An=W({onVisibilityChanged:function(yn){an(yn.isVisible),yn.isVisible&&zr(function(on){return Object.assign({},on,{shouldLoad:!0})})}}),Rn=typeof xr=="string"?{direction:c.TextDirection.LeftToRight,theme:xr}:xr,Pn=_.useState(sr||be),Jr=Pn[0],Cn=Pn[1],Tn={l10n:Jr,setL10n:Cn},qn=Object.assign({},{direction:Rn.direction},Bn(Rn.theme||"light",En));return _.useEffect(function(){sr&&Cn(sr)},[sr]),_.createElement(ae.Provider,{value:Tn},_.createElement(Q.Provider,{value:qn},_.createElement("div",{ref:An,className:"rpv-core__viewer rpv-core__viewer--".concat(qn.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},Dr.shouldLoad&&_.createElement(Wn,{characterMap:et,file:Dr.data,httpHeaders:Ut,render:function(yn){return _.createElement(nn,{defaultScale:Ct,doc:yn,render:function(on,Dn){return _.createElement(_r,{currentFile:{data:Dr.data,name:Dr.name},defaultScale:Ct,doc:yn,initialPage:qt,initialRotation:zt,initialScale:Dn,pageLayout:Nt,pageSizes:on,plugins:lr,renderPage:Sr,scrollMode:vr,viewerState:{file:Dr,pageIndex:-1,pageHeight:on[0].pageHeight,pageWidth:on[0].pageWidth,pagesRotation:new Map,rotation:zt,scale:Dn,scrollMode:vr},onDocumentLoad:mn,onOpenFile:Qr,onPageChange:pn,onRotate:_n,onRotatePage:un,onZoom:Ir})},scrollMode:vr})},renderError:nr,renderLoader:fr,transformGetDocumentParams:wr,withCredentials:Lr,onDocumentAskPassword:sn}))))},c.Worker=function(xe){var et=xe.children,Ct=xe.workerUrl;return E.GlobalWorkerOptions.workerSrc=Ct,_.createElement(_.Fragment,null,et)},c.classNames=ee,c.createStore=function(xe){var et=xe||{},Ct={},Pt=function(Ut,Yt){var qt;et=O(O({},et),((qt={})[Ut]=Yt,qt)),(Ct[Ut]||[]).forEach(function(Nt){return Nt(et[Ut])})},Bt=function(Ut){return et[Ut]};return{subscribe:function(Ut,Yt){Ct[Ut]=(Ct[Ut]||[]).concat(Yt)},unsubscribe:function(Ut,Yt){Ct[Ut]=(Ct[Ut]||[]).filter(function(qt){return qt!==Yt})},update:function(Ut,Yt){Pt(Ut,Yt)},updateCurrentValue:function(Ut,Yt){var qt=Bt(Ut);qt!==void 0&&Pt(Ut,Yt(qt))},get:function(Ut){return Bt(Ut)}}},c.getDestination=Qt,c.getPage=Zt,c.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},c.useIntersectionObserver=W,c.useIsMounted=j,c.useIsomorphicLayoutEffect=V,c.useRenderQueue=oe})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2022 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(c){c.exports=core_min})(lib);const index="";var libExports$1=requireLib(),buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(c){var d=c.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=c.indexOf("=");g===-1&&(g=d);var v=g===d?0:4-g%4;return[g,v]}function byteLength(c){var d=getLens(c),g=d[0],v=d[1];return(g+v)*3/4-v}function _byteLength(c,d,g){return(d+g)*3/4-g}function toByteArray(c){var d,g=getLens(c),v=g[0],b=g[1],_=new Arr(_byteLength(c,v,b)),E=0,R=b>0?v-4:v,M;for(M=0;M<R;M+=4)d=revLookup[c.charCodeAt(M)]<<18|revLookup[c.charCodeAt(M+1)]<<12|revLookup[c.charCodeAt(M+2)]<<6|revLookup[c.charCodeAt(M+3)],_[E++]=d>>16&255,_[E++]=d>>8&255,_[E++]=d&255;return b===2&&(d=revLookup[c.charCodeAt(M)]<<2|revLookup[c.charCodeAt(M+1)]>>4,_[E++]=d&255),b===1&&(d=revLookup[c.charCodeAt(M)]<<10|revLookup[c.charCodeAt(M+1)]<<4|revLookup[c.charCodeAt(M+2)]>>2,_[E++]=d>>8&255,_[E++]=d&255),_}function tripletToBase64(c){return lookup[c>>18&63]+lookup[c>>12&63]+lookup[c>>6&63]+lookup[c&63]}function encodeChunk(c,d,g){for(var v,b=[],_=d;_<g;_+=3)v=(c[_]<<16&16711680)+(c[_+1]<<8&65280)+(c[_+2]&255),b.push(tripletToBase64(v));return b.join("")}function fromByteArray(c){for(var d,g=c.length,v=g%3,b=[],_=16383,E=0,R=g-v;E<R;E+=_)b.push(encodeChunk(c,E,E+_>R?R:E+_));return v===1?(d=c[g-1],b.push(lookup[d>>2]+lookup[d<<4&63]+"==")):v===2&&(d=(c[g-2]<<8)+c[g-1],b.push(lookup[d>>10]+lookup[d>>4&63]+lookup[d<<2&63]+"=")),b.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(c,d,g,v,b){var _,E,R=b*8-v-1,M=(1<<R)-1,P=M>>1,O=-7,H=g?b-1:0,Q=g?-1:1,ee=c[d+H];for(H+=Q,_=ee&(1<<-O)-1,ee>>=-O,O+=R;O>0;_=_*256+c[d+H],H+=Q,O-=8);for(E=_&(1<<-O)-1,_>>=-O,O+=v;O>0;E=E*256+c[d+H],H+=Q,O-=8);if(_===0)_=1-P;else{if(_===M)return E?NaN:(ee?-1:1)*(1/0);E=E+Math.pow(2,v),_=_-P}return(ee?-1:1)*E*Math.pow(2,_-v)};ieee754.write=function(c,d,g,v,b,_){var E,R,M,P=_*8-b-1,O=(1<<P)-1,H=O>>1,Q=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,ee=v?0:_-1,V=v?1:-1,W=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(R=isNaN(d)?1:0,E=O):(E=Math.floor(Math.log(d)/Math.LN2),d*(M=Math.pow(2,-E))<1&&(E--,M*=2),E+H>=1?d+=Q/M:d+=Q*Math.pow(2,1-H),d*M>=2&&(E++,M/=2),E+H>=O?(R=0,E=O):E+H>=1?(R=(d*M-1)*Math.pow(2,b),E=E+H):(R=d*Math.pow(2,H-1)*Math.pow(2,b),E=0));b>=8;c[g+ee]=R&255,ee+=V,R/=256,b-=8);for(E=E<<b|R,P+=b;P>0;c[g+ee]=E&255,ee+=V,E/=256,P-=8);c[g+ee-V]|=W*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(c){var d=base64Js,g=ieee754,v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;c.Buffer=R,c.SlowBuffer=G,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,R.TYPED_ARRAY_SUPPORT=_(),!R.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function _(){try{var Z=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(Z,z),Z.foo()===42}catch{return!1}}Object.defineProperty(R.prototype,"parent",{enumerable:!0,get:function(){if(!!R.isBuffer(this))return this.buffer}}),Object.defineProperty(R.prototype,"offset",{enumerable:!0,get:function(){if(!!R.isBuffer(this))return this.byteOffset}});function E(Z){if(Z>b)throw new RangeError('The value "'+Z+'" is invalid for option "size"');var z=new Uint8Array(Z);return Object.setPrototypeOf(z,R.prototype),z}function R(Z,z,K){if(typeof Z=="number"){if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return H(Z)}return M(Z,z,K)}R.poolSize=8192;function M(Z,z,K){if(typeof Z=="string")return Q(Z,z);if(ArrayBuffer.isView(Z))return V(Z);if(Z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Z);if(kt(Z,ArrayBuffer)||Z&&kt(Z.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(kt(Z,SharedArrayBuffer)||Z&&kt(Z.buffer,SharedArrayBuffer)))return W(Z,z,K);if(typeof Z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ne=Z.valueOf&&Z.valueOf();if(ne!=null&&ne!==Z)return R.from(ne,z,K);var Ae=Y(Z);if(Ae)return Ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Z[Symbol.toPrimitive]=="function")return R.from(Z[Symbol.toPrimitive]("string"),z,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Z)}R.from=function(Z,z,K){return M(Z,z,K)},Object.setPrototypeOf(R.prototype,Uint8Array.prototype),Object.setPrototypeOf(R,Uint8Array);function P(Z){if(typeof Z!="number")throw new TypeError('"size" argument must be of type number');if(Z<0)throw new RangeError('The value "'+Z+'" is invalid for option "size"')}function O(Z,z,K){return P(Z),Z<=0?E(Z):z!==void 0?typeof K=="string"?E(Z).fill(z,K):E(Z).fill(z):E(Z)}R.alloc=function(Z,z,K){return O(Z,z,K)};function H(Z){return P(Z),E(Z<0?0:U(Z)|0)}R.allocUnsafe=function(Z){return H(Z)},R.allocUnsafeSlow=function(Z){return H(Z)};function Q(Z,z){if((typeof z!="string"||z==="")&&(z="utf8"),!R.isEncoding(z))throw new TypeError("Unknown encoding: "+z);var K=te(Z,z)|0,ne=E(K),Ae=ne.write(Z,z);return Ae!==K&&(ne=ne.slice(0,Ae)),ne}function ee(Z){for(var z=Z.length<0?0:U(Z.length)|0,K=E(z),ne=0;ne<z;ne+=1)K[ne]=Z[ne]&255;return K}function V(Z){if(kt(Z,Uint8Array)){var z=new Uint8Array(Z);return W(z.buffer,z.byteOffset,z.byteLength)}return ee(Z)}function W(Z,z,K){if(z<0||Z.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(Z.byteLength<z+(K||0))throw new RangeError('"length" is outside of buffer bounds');var ne;return z===void 0&&K===void 0?ne=new Uint8Array(Z):K===void 0?ne=new Uint8Array(Z,z):ne=new Uint8Array(Z,z,K),Object.setPrototypeOf(ne,R.prototype),ne}function Y(Z){if(R.isBuffer(Z)){var z=U(Z.length)|0,K=E(z);return K.length===0||Z.copy(K,0,0,z),K}if(Z.length!==void 0)return typeof Z.length!="number"||Zt(Z.length)?E(0):ee(Z);if(Z.type==="Buffer"&&Array.isArray(Z.data))return ee(Z.data)}function U(Z){if(Z>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return Z|0}function G(Z){return+Z!=Z&&(Z=0),R.alloc(+Z)}R.isBuffer=function(z){return z!=null&&z._isBuffer===!0&&z!==R.prototype},R.compare=function(z,K){if(kt(z,Uint8Array)&&(z=R.from(z,z.offset,z.byteLength)),kt(K,Uint8Array)&&(K=R.from(K,K.offset,K.byteLength)),!R.isBuffer(z)||!R.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===K)return 0;for(var ne=z.length,Ae=K.length,ut=0,Rt=Math.min(ne,Ae);ut<Rt;++ut)if(z[ut]!==K[ut]){ne=z[ut],Ae=K[ut];break}return ne<Ae?-1:Ae<ne?1:0},R.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},R.concat=function(z,K){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(z.length===0)return R.alloc(0);var ne;if(K===void 0)for(K=0,ne=0;ne<z.length;++ne)K+=z[ne].length;var Ae=R.allocUnsafe(K),ut=0;for(ne=0;ne<z.length;++ne){var Rt=z[ne];if(kt(Rt,Uint8Array))ut+Rt.length>Ae.length?R.from(Rt).copy(Ae,ut):Uint8Array.prototype.set.call(Ae,Rt,ut);else if(R.isBuffer(Rt))Rt.copy(Ae,ut);else throw new TypeError('"list" argument must be an Array of Buffers');ut+=Rt.length}return Ae};function te(Z,z){if(R.isBuffer(Z))return Z.length;if(ArrayBuffer.isView(Z)||kt(Z,ArrayBuffer))return Z.byteLength;if(typeof Z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Z);var K=Z.length,ne=arguments.length>2&&arguments[2]===!0;if(!ne&&K===0)return 0;for(var Ae=!1;;)switch(z){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return tt(Z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K*2;case"hex":return K>>>1;case"base64":return Vt(Z).length;default:if(Ae)return ne?-1:tt(Z).length;z=(""+z).toLowerCase(),Ae=!0}}R.byteLength=te;function B(Z,z,K){var ne=!1;if((z===void 0||z<0)&&(z=0),z>this.length||((K===void 0||K>this.length)&&(K=this.length),K<=0)||(K>>>=0,z>>>=0,K<=z))return"";for(Z||(Z="utf8");;)switch(Z){case"hex":return Lt(this,z,K);case"utf8":case"utf-8":return Tt(this,z,K);case"ascii":return St(this,z,K);case"latin1":case"binary":return $t(this,z,K);case"base64":return it(this,z,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Mt(this,z,K);default:if(ne)throw new TypeError("Unknown encoding: "+Z);Z=(Z+"").toLowerCase(),ne=!0}}R.prototype._isBuffer=!0;function j(Z,z,K){var ne=Z[z];Z[z]=Z[K],Z[K]=ne}R.prototype.swap16=function(){var z=this.length;if(z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var K=0;K<z;K+=2)j(this,K,K+1);return this},R.prototype.swap32=function(){var z=this.length;if(z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var K=0;K<z;K+=4)j(this,K,K+3),j(this,K+1,K+2);return this},R.prototype.swap64=function(){var z=this.length;if(z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var K=0;K<z;K+=8)j(this,K,K+7),j(this,K+1,K+6),j(this,K+2,K+5),j(this,K+3,K+4);return this},R.prototype.toString=function(){var z=this.length;return z===0?"":arguments.length===0?Tt(this,0,z):B.apply(this,arguments)},R.prototype.toLocaleString=R.prototype.toString,R.prototype.equals=function(z){if(!R.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z?!0:R.compare(this,z)===0},R.prototype.inspect=function(){var z="",K=c.INSPECT_MAX_BYTES;return z=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K&&(z+=" ... "),"<Buffer "+z+">"},v&&(R.prototype[v]=R.prototype.inspect),R.prototype.compare=function(z,K,ne,Ae,ut){if(kt(z,Uint8Array)&&(z=R.from(z,z.offset,z.byteLength)),!R.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(K===void 0&&(K=0),ne===void 0&&(ne=z?z.length:0),Ae===void 0&&(Ae=0),ut===void 0&&(ut=this.length),K<0||ne>z.length||Ae<0||ut>this.length)throw new RangeError("out of range index");if(Ae>=ut&&K>=ne)return 0;if(Ae>=ut)return-1;if(K>=ne)return 1;if(K>>>=0,ne>>>=0,Ae>>>=0,ut>>>=0,this===z)return 0;for(var Rt=ut-Ae,yt=ne-K,lt=Math.min(Rt,yt),at=this.slice(Ae,ut),ze=z.slice(K,ne),ct=0;ct<lt;++ct)if(at[ct]!==ze[ct]){Rt=at[ct],yt=ze[ct];break}return Rt<yt?-1:yt<Rt?1:0};function X(Z,z,K,ne,Ae){if(Z.length===0)return-1;if(typeof K=="string"?(ne=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),K=+K,Zt(K)&&(K=Ae?0:Z.length-1),K<0&&(K=Z.length+K),K>=Z.length){if(Ae)return-1;K=Z.length-1}else if(K<0)if(Ae)K=0;else return-1;if(typeof z=="string"&&(z=R.from(z,ne)),R.isBuffer(z))return z.length===0?-1:oe(Z,z,K,ne,Ae);if(typeof z=="number")return z=z&255,typeof Uint8Array.prototype.indexOf=="function"?Ae?Uint8Array.prototype.indexOf.call(Z,z,K):Uint8Array.prototype.lastIndexOf.call(Z,z,K):oe(Z,[z],K,ne,Ae);throw new TypeError("val must be string, number or Buffer")}function oe(Z,z,K,ne,Ae){var ut=1,Rt=Z.length,yt=z.length;if(ne!==void 0&&(ne=String(ne).toLowerCase(),ne==="ucs2"||ne==="ucs-2"||ne==="utf16le"||ne==="utf-16le")){if(Z.length<2||z.length<2)return-1;ut=2,Rt/=2,yt/=2,K/=2}function lt(Ot,Ht){return ut===1?Ot[Ht]:Ot.readUInt16BE(Ht*ut)}var at;if(Ae){var ze=-1;for(at=K;at<Rt;at++)if(lt(Z,at)===lt(z,ze===-1?0:at-ze)){if(ze===-1&&(ze=at),at-ze+1===yt)return ze*ut}else ze!==-1&&(at-=at-ze),ze=-1}else for(K+yt>Rt&&(K=Rt-yt),at=K;at>=0;at--){for(var ct=!0,Ze=0;Ze<yt;Ze++)if(lt(Z,at+Ze)!==lt(z,Ze)){ct=!1;break}if(ct)return at}return-1}R.prototype.includes=function(z,K,ne){return this.indexOf(z,K,ne)!==-1},R.prototype.indexOf=function(z,K,ne){return X(this,z,K,ne,!0)},R.prototype.lastIndexOf=function(z,K,ne){return X(this,z,K,ne,!1)};function be(Z,z,K,ne){K=Number(K)||0;var Ae=Z.length-K;ne?(ne=Number(ne),ne>Ae&&(ne=Ae)):ne=Ae;var ut=z.length;ne>ut/2&&(ne=ut/2);for(var Rt=0;Rt<ne;++Rt){var yt=parseInt(z.substr(Rt*2,2),16);if(Zt(yt))return Rt;Z[K+Rt]=yt}return Rt}function ae(Z,z,K,ne){return wt(tt(z,Z.length-K),Z,K,ne)}function ie(Z,z,K,ne){return wt(vt(z),Z,K,ne)}function Se(Z,z,K,ne){return wt(Vt(z),Z,K,ne)}function mt(Z,z,K,ne){return wt(It(z,Z.length-K),Z,K,ne)}R.prototype.write=function(z,K,ne,Ae){if(K===void 0)Ae="utf8",ne=this.length,K=0;else if(ne===void 0&&typeof K=="string")Ae=K,ne=this.length,K=0;else if(isFinite(K))K=K>>>0,isFinite(ne)?(ne=ne>>>0,Ae===void 0&&(Ae="utf8")):(Ae=ne,ne=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ut=this.length-K;if((ne===void 0||ne>ut)&&(ne=ut),z.length>0&&(ne<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");for(var Rt=!1;;)switch(Ae){case"hex":return be(this,z,K,ne);case"utf8":case"utf-8":return ae(this,z,K,ne);case"ascii":case"latin1":case"binary":return ie(this,z,K,ne);case"base64":return Se(this,z,K,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mt(this,z,K,ne);default:if(Rt)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),Rt=!0}},R.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function it(Z,z,K){return z===0&&K===Z.length?d.fromByteArray(Z):d.fromByteArray(Z.slice(z,K))}function Tt(Z,z,K){K=Math.min(Z.length,K);for(var ne=[],Ae=z;Ae<K;){var ut=Z[Ae],Rt=null,yt=ut>239?4:ut>223?3:ut>191?2:1;if(Ae+yt<=K){var lt,at,ze,ct;switch(yt){case 1:ut<128&&(Rt=ut);break;case 2:lt=Z[Ae+1],(lt&192)===128&&(ct=(ut&31)<<6|lt&63,ct>127&&(Rt=ct));break;case 3:lt=Z[Ae+1],at=Z[Ae+2],(lt&192)===128&&(at&192)===128&&(ct=(ut&15)<<12|(lt&63)<<6|at&63,ct>2047&&(ct<55296||ct>57343)&&(Rt=ct));break;case 4:lt=Z[Ae+1],at=Z[Ae+2],ze=Z[Ae+3],(lt&192)===128&&(at&192)===128&&(ze&192)===128&&(ct=(ut&15)<<18|(lt&63)<<12|(at&63)<<6|ze&63,ct>65535&&ct<1114112&&(Rt=ct))}}Rt===null?(Rt=65533,yt=1):Rt>65535&&(Rt-=65536,ne.push(Rt>>>10&1023|55296),Rt=56320|Rt&1023),ne.push(Rt),Ae+=yt}return Ye(ne)}var ht=4096;function Ye(Z){var z=Z.length;if(z<=ht)return String.fromCharCode.apply(String,Z);for(var K="",ne=0;ne<z;)K+=String.fromCharCode.apply(String,Z.slice(ne,ne+=ht));return K}function St(Z,z,K){var ne="";K=Math.min(Z.length,K);for(var Ae=z;Ae<K;++Ae)ne+=String.fromCharCode(Z[Ae]&127);return ne}function $t(Z,z,K){var ne="";K=Math.min(Z.length,K);for(var Ae=z;Ae<K;++Ae)ne+=String.fromCharCode(Z[Ae]);return ne}function Lt(Z,z,K){var ne=Z.length;(!z||z<0)&&(z=0),(!K||K<0||K>ne)&&(K=ne);for(var Ae="",ut=z;ut<K;++ut)Ae+=Qt[Z[ut]];return Ae}function Mt(Z,z,K){for(var ne=Z.slice(z,K),Ae="",ut=0;ut<ne.length-1;ut+=2)Ae+=String.fromCharCode(ne[ut]+ne[ut+1]*256);return Ae}R.prototype.slice=function(z,K){var ne=this.length;z=~~z,K=K===void 0?ne:~~K,z<0?(z+=ne,z<0&&(z=0)):z>ne&&(z=ne),K<0?(K+=ne,K<0&&(K=0)):K>ne&&(K=ne),K<z&&(K=z);var Ae=this.subarray(z,K);return Object.setPrototypeOf(Ae,R.prototype),Ae};function jt(Z,z,K){if(Z%1!==0||Z<0)throw new RangeError("offset is not uint");if(Z+z>K)throw new RangeError("Trying to access beyond buffer length")}R.prototype.readUintLE=R.prototype.readUIntLE=function(z,K,ne){z=z>>>0,K=K>>>0,ne||jt(z,K,this.length);for(var Ae=this[z],ut=1,Rt=0;++Rt<K&&(ut*=256);)Ae+=this[z+Rt]*ut;return Ae},R.prototype.readUintBE=R.prototype.readUIntBE=function(z,K,ne){z=z>>>0,K=K>>>0,ne||jt(z,K,this.length);for(var Ae=this[z+--K],ut=1;K>0&&(ut*=256);)Ae+=this[z+--K]*ut;return Ae},R.prototype.readUint8=R.prototype.readUInt8=function(z,K){return z=z>>>0,K||jt(z,1,this.length),this[z]},R.prototype.readUint16LE=R.prototype.readUInt16LE=function(z,K){return z=z>>>0,K||jt(z,2,this.length),this[z]|this[z+1]<<8},R.prototype.readUint16BE=R.prototype.readUInt16BE=function(z,K){return z=z>>>0,K||jt(z,2,this.length),this[z]<<8|this[z+1]},R.prototype.readUint32LE=R.prototype.readUInt32LE=function(z,K){return z=z>>>0,K||jt(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+this[z+3]*16777216},R.prototype.readUint32BE=R.prototype.readUInt32BE=function(z,K){return z=z>>>0,K||jt(z,4,this.length),this[z]*16777216+(this[z+1]<<16|this[z+2]<<8|this[z+3])},R.prototype.readIntLE=function(z,K,ne){z=z>>>0,K=K>>>0,ne||jt(z,K,this.length);for(var Ae=this[z],ut=1,Rt=0;++Rt<K&&(ut*=256);)Ae+=this[z+Rt]*ut;return ut*=128,Ae>=ut&&(Ae-=Math.pow(2,8*K)),Ae},R.prototype.readIntBE=function(z,K,ne){z=z>>>0,K=K>>>0,ne||jt(z,K,this.length);for(var Ae=K,ut=1,Rt=this[z+--Ae];Ae>0&&(ut*=256);)Rt+=this[z+--Ae]*ut;return ut*=128,Rt>=ut&&(Rt-=Math.pow(2,8*K)),Rt},R.prototype.readInt8=function(z,K){return z=z>>>0,K||jt(z,1,this.length),this[z]&128?(255-this[z]+1)*-1:this[z]},R.prototype.readInt16LE=function(z,K){z=z>>>0,K||jt(z,2,this.length);var ne=this[z]|this[z+1]<<8;return ne&32768?ne|4294901760:ne},R.prototype.readInt16BE=function(z,K){z=z>>>0,K||jt(z,2,this.length);var ne=this[z+1]|this[z]<<8;return ne&32768?ne|4294901760:ne},R.prototype.readInt32LE=function(z,K){return z=z>>>0,K||jt(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},R.prototype.readInt32BE=function(z,K){return z=z>>>0,K||jt(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},R.prototype.readFloatLE=function(z,K){return z=z>>>0,K||jt(z,4,this.length),g.read(this,z,!0,23,4)},R.prototype.readFloatBE=function(z,K){return z=z>>>0,K||jt(z,4,this.length),g.read(this,z,!1,23,4)},R.prototype.readDoubleLE=function(z,K){return z=z>>>0,K||jt(z,8,this.length),g.read(this,z,!0,52,8)},R.prototype.readDoubleBE=function(z,K){return z=z>>>0,K||jt(z,8,this.length),g.read(this,z,!1,52,8)};function Qe(Z,z,K,ne,Ae,ut){if(!R.isBuffer(Z))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>Ae||z<ut)throw new RangeError('"value" argument is out of bounds');if(K+ne>Z.length)throw new RangeError("Index out of range")}R.prototype.writeUintLE=R.prototype.writeUIntLE=function(z,K,ne,Ae){if(z=+z,K=K>>>0,ne=ne>>>0,!Ae){var ut=Math.pow(2,8*ne)-1;Qe(this,z,K,ne,ut,0)}var Rt=1,yt=0;for(this[K]=z&255;++yt<ne&&(Rt*=256);)this[K+yt]=z/Rt&255;return K+ne},R.prototype.writeUintBE=R.prototype.writeUIntBE=function(z,K,ne,Ae){if(z=+z,K=K>>>0,ne=ne>>>0,!Ae){var ut=Math.pow(2,8*ne)-1;Qe(this,z,K,ne,ut,0)}var Rt=ne-1,yt=1;for(this[K+Rt]=z&255;--Rt>=0&&(yt*=256);)this[K+Rt]=z/yt&255;return K+ne},R.prototype.writeUint8=R.prototype.writeUInt8=function(z,K,ne){return z=+z,K=K>>>0,ne||Qe(this,z,K,1,255,0),this[K]=z&255,K+1},R.prototype.writeUint16LE=R.prototype.writeUInt16LE=function(z,K,ne){return z=+z,K=K>>>0,ne||Qe(this,z,K,2,65535,0),this[K]=z&255,this[K+1]=z>>>8,K+2},R.prototype.writeUint16BE=R.prototype.writeUInt16BE=function(z,K,ne){return z=+z,K=K>>>0,ne||Qe(this,z,K,2,65535,0),this[K]=z>>>8,this[K+1]=z&255,K+2},R.prototype.writeUint32LE=R.prototype.writeUInt32LE=function(z,K,ne){return z=+z,K=K>>>0,ne||Qe(this,z,K,4,4294967295,0),this[K+3]=z>>>24,this[K+2]=z>>>16,this[K+1]=z>>>8,this[K]=z&255,K+4},R.prototype.writeUint32BE=R.prototype.writeUInt32BE=function(z,K,ne){return z=+z,K=K>>>0,ne||Qe(this,z,K,4,4294967295,0),this[K]=z>>>24,this[K+1]=z>>>16,this[K+2]=z>>>8,this[K+3]=z&255,K+4},R.prototype.writeIntLE=function(z,K,ne,Ae){if(z=+z,K=K>>>0,!Ae){var ut=Math.pow(2,8*ne-1);Qe(this,z,K,ne,ut-1,-ut)}var Rt=0,yt=1,lt=0;for(this[K]=z&255;++Rt<ne&&(yt*=256);)z<0&&lt===0&&this[K+Rt-1]!==0&&(lt=1),this[K+Rt]=(z/yt>>0)-lt&255;return K+ne},R.prototype.writeIntBE=function(z,K,ne,Ae){if(z=+z,K=K>>>0,!Ae){var ut=Math.pow(2,8*ne-1);Qe(this,z,K,ne,ut-1,-ut)}var Rt=ne-1,yt=1,lt=0;for(this[K+Rt]=z&255;--Rt>=0&&(yt*=256);)z<0&&lt===0&&this[K+Rt+1]!==0&&(lt=1),this[K+Rt]=(z/yt>>0)-lt&255;return K+ne},R.prototype.writeInt8=function(z,K,ne){return z=+z,K=K>>>0,ne||Qe(this,z,K,1,127,-128),z<0&&(z=255+z+1),this[K]=z&255,K+1},R.prototype.writeInt16LE=function(z,K,ne){return z=+z,K=K>>>0,ne||Qe(this,z,K,2,32767,-32768),this[K]=z&255,this[K+1]=z>>>8,K+2},R.prototype.writeInt16BE=function(z,K,ne){return z=+z,K=K>>>0,ne||Qe(this,z,K,2,32767,-32768),this[K]=z>>>8,this[K+1]=z&255,K+2},R.prototype.writeInt32LE=function(z,K,ne){return z=+z,K=K>>>0,ne||Qe(this,z,K,4,2147483647,-2147483648),this[K]=z&255,this[K+1]=z>>>8,this[K+2]=z>>>16,this[K+3]=z>>>24,K+4},R.prototype.writeInt32BE=function(z,K,ne){return z=+z,K=K>>>0,ne||Qe(this,z,K,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[K]=z>>>24,this[K+1]=z>>>16,this[K+2]=z>>>8,this[K+3]=z&255,K+4};function Pe(Z,z,K,ne,Ae,ut){if(K+ne>Z.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function Ee(Z,z,K,ne,Ae){return z=+z,K=K>>>0,Ae||Pe(Z,z,K,4),g.write(Z,z,K,ne,23,4),K+4}R.prototype.writeFloatLE=function(z,K,ne){return Ee(this,z,K,!0,ne)},R.prototype.writeFloatBE=function(z,K,ne){return Ee(this,z,K,!1,ne)};function nt(Z,z,K,ne,Ae){return z=+z,K=K>>>0,Ae||Pe(Z,z,K,8),g.write(Z,z,K,ne,52,8),K+8}R.prototype.writeDoubleLE=function(z,K,ne){return nt(this,z,K,!0,ne)},R.prototype.writeDoubleBE=function(z,K,ne){return nt(this,z,K,!1,ne)},R.prototype.copy=function(z,K,ne,Ae){if(!R.isBuffer(z))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),!Ae&&Ae!==0&&(Ae=this.length),K>=z.length&&(K=z.length),K||(K=0),Ae>0&&Ae<ne&&(Ae=ne),Ae===ne||z.length===0||this.length===0)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),z.length-K<Ae-ne&&(Ae=z.length-K+ne);var ut=Ae-ne;return this===z&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(K,ne,Ae):Uint8Array.prototype.set.call(z,this.subarray(ne,Ae),K),ut},R.prototype.fill=function(z,K,ne,Ae){if(typeof z=="string"){if(typeof K=="string"?(Ae=K,K=0,ne=this.length):typeof ne=="string"&&(Ae=ne,ne=this.length),Ae!==void 0&&typeof Ae!="string")throw new TypeError("encoding must be a string");if(typeof Ae=="string"&&!R.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(z.length===1){var ut=z.charCodeAt(0);(Ae==="utf8"&&ut<128||Ae==="latin1")&&(z=ut)}}else typeof z=="number"?z=z&255:typeof z=="boolean"&&(z=Number(z));if(K<0||this.length<K||this.length<ne)throw new RangeError("Out of range index");if(ne<=K)return this;K=K>>>0,ne=ne===void 0?this.length:ne>>>0,z||(z=0);var Rt;if(typeof z=="number")for(Rt=K;Rt<ne;++Rt)this[Rt]=z;else{var yt=R.isBuffer(z)?z:R.from(z,Ae),lt=yt.length;if(lt===0)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(Rt=0;Rt<ne-K;++Rt)this[Rt+K]=yt[Rt%lt]}return this};var st=/[^+/0-9A-Za-z-_]/g;function rt(Z){if(Z=Z.split("=")[0],Z=Z.trim().replace(st,""),Z.length<2)return"";for(;Z.length%4!==0;)Z=Z+"=";return Z}function tt(Z,z){z=z||1/0;for(var K,ne=Z.length,Ae=null,ut=[],Rt=0;Rt<ne;++Rt){if(K=Z.charCodeAt(Rt),K>55295&&K<57344){if(!Ae){if(K>56319){(z-=3)>-1&&ut.push(239,191,189);continue}else if(Rt+1===ne){(z-=3)>-1&&ut.push(239,191,189);continue}Ae=K;continue}if(K<56320){(z-=3)>-1&&ut.push(239,191,189),Ae=K;continue}K=(Ae-55296<<10|K-56320)+65536}else Ae&&(z-=3)>-1&&ut.push(239,191,189);if(Ae=null,K<128){if((z-=1)<0)break;ut.push(K)}else if(K<2048){if((z-=2)<0)break;ut.push(K>>6|192,K&63|128)}else if(K<65536){if((z-=3)<0)break;ut.push(K>>12|224,K>>6&63|128,K&63|128)}else if(K<1114112){if((z-=4)<0)break;ut.push(K>>18|240,K>>12&63|128,K>>6&63|128,K&63|128)}else throw new Error("Invalid code point")}return ut}function vt(Z){for(var z=[],K=0;K<Z.length;++K)z.push(Z.charCodeAt(K)&255);return z}function It(Z,z){for(var K,ne,Ae,ut=[],Rt=0;Rt<Z.length&&!((z-=2)<0);++Rt)K=Z.charCodeAt(Rt),ne=K>>8,Ae=K%256,ut.push(Ae),ut.push(ne);return ut}function Vt(Z){return d.toByteArray(rt(Z))}function wt(Z,z,K,ne){for(var Ae=0;Ae<ne&&!(Ae+K>=z.length||Ae>=Z.length);++Ae)z[Ae+K]=Z[Ae];return Ae}function kt(Z,z){return Z instanceof z||Z!=null&&Z.constructor!=null&&Z.constructor.name!=null&&Z.constructor.name===z.name}function Zt(Z){return Z!==Z}var Qt=function(){for(var Z="0123456789abcdef",z=new Array(256),K=0;K<16;++K)for(var ne=K*16,Ae=0;Ae<16;++Ae)z[ne+Ae]=Z[K]+Z[Ae];return z}()})(buffer);var main={exports:{}};(function(c,d){(function(g,v){c.exports=v(react.exports)})(commonjsGlobal,function(g){return function(v){var b={};function _(E){if(b[E])return b[E].exports;var R=b[E]={i:E,l:!1,exports:{}};return v[E].call(R.exports,R,R.exports,_),R.l=!0,R.exports}return _.m=v,_.c=b,_.d=function(E,R,M){_.o(E,R)||Object.defineProperty(E,R,{enumerable:!0,get:M})},_.r=function(E){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})},_.t=function(E,R){if(1&R&&(E=_(E)),8&R||4&R&&typeof E=="object"&&E&&E.__esModule)return E;var M=Object.create(null);if(_.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:E}),2&R&&typeof E!="string")for(var P in E)_.d(M,P,function(O){return E[O]}.bind(null,P));return M},_.n=function(E){var R=E&&E.__esModule?function(){return E.default}:function(){return E};return _.d(R,"a",R),R},_.o=function(E,R){return Object.prototype.hasOwnProperty.call(E,R)},_.p="",_(_.s=48)}([function(v,b){v.exports=g},function(v,b){var _=v.exports={version:"2.6.12"};typeof __e=="number"&&(__e=_)},function(v,b,_){var E=_(26)("wks"),R=_(17),M=_(3).Symbol,P=typeof M=="function";(v.exports=function(O){return E[O]||(E[O]=P&&M[O]||(P?M:R)("Symbol."+O))}).store=E},function(v,b){var _=v.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=_)},function(v,b,_){v.exports=!_(8)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(v,b){var _={}.hasOwnProperty;v.exports=function(E,R){return _.call(E,R)}},function(v,b,_){var E=_(7),R=_(16);v.exports=_(4)?function(M,P,O){return E.f(M,P,R(1,O))}:function(M,P,O){return M[P]=O,M}},function(v,b,_){var E=_(10),R=_(35),M=_(23),P=Object.defineProperty;b.f=_(4)?Object.defineProperty:function(O,H,Q){if(E(O),H=M(H,!0),E(Q),R)try{return P(O,H,Q)}catch{}if("get"in Q||"set"in Q)throw TypeError("Accessors not supported!");return"value"in Q&&(O[H]=Q.value),O}},function(v,b){v.exports=function(_){try{return!!_()}catch{return!0}}},function(v,b,_){var E=_(40),R=_(22);v.exports=function(M){return E(R(M))}},function(v,b,_){var E=_(11);v.exports=function(R){if(!E(R))throw TypeError(R+" is not an object!");return R}},function(v,b){v.exports=function(_){return typeof _=="object"?_!==null:typeof _=="function"}},function(v,b){v.exports={}},function(v,b,_){var E=_(39),R=_(27);v.exports=Object.keys||function(M){return E(M,R)}},function(v,b){v.exports=!0},function(v,b,_){var E=_(3),R=_(1),M=_(53),P=_(6),O=_(5),H=function(Q,ee,V){var W,Y,U,G=Q&H.F,te=Q&H.G,B=Q&H.S,j=Q&H.P,X=Q&H.B,oe=Q&H.W,be=te?R:R[ee]||(R[ee]={}),ae=be.prototype,ie=te?E:B?E[ee]:(E[ee]||{}).prototype;for(W in te&&(V=ee),V)(Y=!G&&ie&&ie[W]!==void 0)&&O(be,W)||(U=Y?ie[W]:V[W],be[W]=te&&typeof ie[W]!="function"?V[W]:X&&Y?M(U,E):oe&&ie[W]==U?function(Se){var mt=function(it,Tt,ht){if(this instanceof Se){switch(arguments.length){case 0:return new Se;case 1:return new Se(it);case 2:return new Se(it,Tt)}return new Se(it,Tt,ht)}return Se.apply(this,arguments)};return mt.prototype=Se.prototype,mt}(U):j&&typeof U=="function"?M(Function.call,U):U,j&&((be.virtual||(be.virtual={}))[W]=U,Q&H.R&&ae&&!ae[W]&&P(ae,W,U)))};H.F=1,H.G=2,H.S=4,H.P=8,H.B=16,H.W=32,H.U=64,H.R=128,v.exports=H},function(v,b){v.exports=function(_,E){return{enumerable:!(1&_),configurable:!(2&_),writable:!(4&_),value:E}}},function(v,b){var _=0,E=Math.random();v.exports=function(R){return"Symbol(".concat(R===void 0?"":R,")_",(++_+E).toString(36))}},function(v,b,_){var E=_(22);v.exports=function(R){return Object(E(R))}},function(v,b){b.f={}.propertyIsEnumerable},function(v,b,_){var E=_(52)(!0);_(34)(String,"String",function(R){this._t=String(R),this._i=0},function(){var R,M=this._t,P=this._i;return P>=M.length?{value:void 0,done:!0}:(R=E(M,P),this._i+=R.length,{value:R,done:!1})})},function(v,b){var _=Math.ceil,E=Math.floor;v.exports=function(R){return isNaN(R=+R)?0:(R>0?E:_)(R)}},function(v,b){v.exports=function(_){if(_==null)throw TypeError("Can't call method on  "+_);return _}},function(v,b,_){var E=_(11);v.exports=function(R,M){if(!E(R))return R;var P,O;if(M&&typeof(P=R.toString)=="function"&&!E(O=P.call(R))||typeof(P=R.valueOf)=="function"&&!E(O=P.call(R))||!M&&typeof(P=R.toString)=="function"&&!E(O=P.call(R)))return O;throw TypeError("Can't convert object to primitive value")}},function(v,b){var _={}.toString;v.exports=function(E){return _.call(E).slice(8,-1)}},function(v,b,_){var E=_(26)("keys"),R=_(17);v.exports=function(M){return E[M]||(E[M]=R(M))}},function(v,b,_){var E=_(1),R=_(3),M=R["__core-js_shared__"]||(R["__core-js_shared__"]={});(v.exports=function(P,O){return M[P]||(M[P]=O!==void 0?O:{})})("versions",[]).push({version:E.version,mode:_(14)?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},function(v,b){v.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(v,b,_){var E=_(7).f,R=_(5),M=_(2)("toStringTag");v.exports=function(P,O,H){P&&!R(P=H?P:P.prototype,M)&&E(P,M,{configurable:!0,value:O})}},function(v,b,_){_(62);for(var E=_(3),R=_(6),M=_(12),P=_(2)("toStringTag"),O="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),H=0;H<O.length;H++){var Q=O[H],ee=E[Q],V=ee&&ee.prototype;V&&!V[P]&&R(V,P,Q),M[Q]=M.Array}},function(v,b,_){b.f=_(2)},function(v,b,_){var E=_(3),R=_(1),M=_(14),P=_(30),O=_(7).f;v.exports=function(H){var Q=R.Symbol||(R.Symbol=M?{}:E.Symbol||{});H.charAt(0)=="_"||H in Q||O(Q,H,{value:P.f(H)})}},function(v,b){b.f=Object.getOwnPropertySymbols},function(v,b){v.exports=function(_,E,R){return Math.min(Math.max(_,E),R)}},function(v,b,_){var E=_(14),R=_(15),M=_(37),P=_(6),O=_(12),H=_(55),Q=_(28),ee=_(61),V=_(2)("iterator"),W=!([].keys&&"next"in[].keys()),Y=function(){return this};v.exports=function(U,G,te,B,j,X,oe){H(te,G,B);var be,ae,ie,Se=function(Mt){if(!W&&Mt in ht)return ht[Mt];switch(Mt){case"keys":case"values":return function(){return new te(this,Mt)}}return function(){return new te(this,Mt)}},mt=G+" Iterator",it=j=="values",Tt=!1,ht=U.prototype,Ye=ht[V]||ht["@@iterator"]||j&&ht[j],St=Ye||Se(j),$t=j?it?Se("entries"):St:void 0,Lt=G=="Array"&&ht.entries||Ye;if(Lt&&(ie=ee(Lt.call(new U)))!==Object.prototype&&ie.next&&(Q(ie,mt,!0),E||typeof ie[V]=="function"||P(ie,V,Y)),it&&Ye&&Ye.name!=="values"&&(Tt=!0,St=function(){return Ye.call(this)}),E&&!oe||!W&&!Tt&&ht[V]||P(ht,V,St),O[G]=St,O[mt]=Y,j)if(be={values:it?St:Se("values"),keys:X?St:Se("keys"),entries:$t},oe)for(ae in be)ae in ht||M(ht,ae,be[ae]);else R(R.P+R.F*(W||Tt),G,be);return be}},function(v,b,_){v.exports=!_(4)&&!_(8)(function(){return Object.defineProperty(_(36)("div"),"a",{get:function(){return 7}}).a!=7})},function(v,b,_){var E=_(11),R=_(3).document,M=E(R)&&E(R.createElement);v.exports=function(P){return M?R.createElement(P):{}}},function(v,b,_){v.exports=_(6)},function(v,b,_){var E=_(10),R=_(56),M=_(27),P=_(25)("IE_PROTO"),O=function(){},H=function(){var Q,ee=_(36)("iframe"),V=M.length;for(ee.style.display="none",_(60).appendChild(ee),ee.src="javascript:",(Q=ee.contentWindow.document).open(),Q.write("<script>document.F=Object<\/script>"),Q.close(),H=Q.F;V--;)delete H.prototype[M[V]];return H()};v.exports=Object.create||function(Q,ee){var V;return Q!==null?(O.prototype=E(Q),V=new O,O.prototype=null,V[P]=Q):V=H(),ee===void 0?V:R(V,ee)}},function(v,b,_){var E=_(5),R=_(9),M=_(57)(!1),P=_(25)("IE_PROTO");v.exports=function(O,H){var Q,ee=R(O),V=0,W=[];for(Q in ee)Q!=P&&E(ee,Q)&&W.push(Q);for(;H.length>V;)E(ee,Q=H[V++])&&(~M(W,Q)||W.push(Q));return W}},function(v,b,_){var E=_(24);v.exports=Object("z").propertyIsEnumerable(0)?Object:function(R){return E(R)=="String"?R.split(""):Object(R)}},function(v,b,_){var E=_(39),R=_(27).concat("length","prototype");b.f=Object.getOwnPropertyNames||function(M){return E(M,R)}},function(v,b,_){var E=_(24),R=_(2)("toStringTag"),M=E(function(){return arguments}())=="Arguments";v.exports=function(P){var O,H,Q;return P===void 0?"Undefined":P===null?"Null":typeof(H=function(ee,V){try{return ee[V]}catch{}}(O=Object(P),R))=="string"?H:M?E(O):(Q=E(O))=="Object"&&typeof O.callee=="function"?"Arguments":Q}},function(v,b){var _;_=function(){return this}();try{_=_||new Function("return this")()}catch{typeof window=="object"&&(_=window)}v.exports=_},function(v,b){var _=/-?\d+(\.\d+)?%?/g;v.exports=function(E){return E.match(_)}},function(v,b,_){Object.defineProperty(b,"__esModule",{value:!0}),b.getBase16Theme=b.createStyling=b.invertTheme=void 0;var E=Y(_(49)),R=Y(_(76)),M=Y(_(81)),P=Y(_(89)),O=Y(_(93)),H=function(ae){if(ae&&ae.__esModule)return ae;var ie={};if(ae!=null)for(var Se in ae)Object.prototype.hasOwnProperty.call(ae,Se)&&(ie[Se]=ae[Se]);return ie.default=ae,ie}(_(94)),Q=Y(_(132)),ee=Y(_(133)),V=Y(_(138)),W=_(139);function Y(ae){return ae&&ae.__esModule?ae:{default:ae}}var U=H.default,G=(0,P.default)(U),te=(0,V.default)(ee.default,W.rgb2yuv,function(ae){var ie,Se=(0,M.default)(ae,3),mt=Se[0],it=Se[1],Tt=Se[2];return[(ie=mt,ie<.25?1:ie<.5?.9-ie:1.1-ie),it,Tt]},W.yuv2rgb,Q.default),B=function(ae){return function(ie){return{className:[ie.className,ae.className].filter(Boolean).join(" "),style:(0,R.default)({},ie.style||{},ae.style||{})}}},j=function(ae,ie){var Se=(0,P.default)(ie);for(var mt in ae)Se.indexOf(mt)===-1&&Se.push(mt);return Se.reduce(function(it,Tt){return it[Tt]=function(ht,Ye){if(ht===void 0)return Ye;if(Ye===void 0)return ht;var St=ht===void 0?"undefined":(0,E.default)(ht),$t=Ye===void 0?"undefined":(0,E.default)(Ye);switch(St){case"string":switch($t){case"string":return[Ye,ht].filter(Boolean).join(" ");case"object":return B({className:ht,style:Ye});case"function":return function(Lt){for(var Mt=arguments.length,jt=Array(Mt>1?Mt-1:0),Qe=1;Qe<Mt;Qe++)jt[Qe-1]=arguments[Qe];return B({className:ht})(Ye.apply(void 0,[Lt].concat(jt)))}}case"object":switch($t){case"string":return B({className:Ye,style:ht});case"object":return(0,R.default)({},Ye,ht);case"function":return function(Lt){for(var Mt=arguments.length,jt=Array(Mt>1?Mt-1:0),Qe=1;Qe<Mt;Qe++)jt[Qe-1]=arguments[Qe];return B({style:ht})(Ye.apply(void 0,[Lt].concat(jt)))}}case"function":switch($t){case"string":return function(Lt){for(var Mt=arguments.length,jt=Array(Mt>1?Mt-1:0),Qe=1;Qe<Mt;Qe++)jt[Qe-1]=arguments[Qe];return ht.apply(void 0,[B(Lt)({className:Ye})].concat(jt))};case"object":return function(Lt){for(var Mt=arguments.length,jt=Array(Mt>1?Mt-1:0),Qe=1;Qe<Mt;Qe++)jt[Qe-1]=arguments[Qe];return ht.apply(void 0,[B(Lt)({style:Ye})].concat(jt))};case"function":return function(Lt){for(var Mt=arguments.length,jt=Array(Mt>1?Mt-1:0),Qe=1;Qe<Mt;Qe++)jt[Qe-1]=arguments[Qe];return ht.apply(void 0,[Ye.apply(void 0,[Lt].concat(jt))].concat(jt))}}}}(ae[Tt],ie[Tt]),it},{})},X=function(ae,ie){for(var Se=arguments.length,mt=Array(Se>2?Se-2:0),it=2;it<Se;it++)mt[it-2]=arguments[it];if(ie===null)return ae;Array.isArray(ie)||(ie=[ie]);var Tt=ie.map(function(Ye){return ae[Ye]}).filter(Boolean),ht=Tt.reduce(function(Ye,St){return typeof St=="string"?Ye.className=[Ye.className,St].filter(Boolean).join(" "):(St===void 0?"undefined":(0,E.default)(St))==="object"?Ye.style=(0,R.default)({},Ye.style,St):typeof St=="function"&&(Ye=(0,R.default)({},Ye,St.apply(void 0,[Ye].concat(mt)))),Ye},{className:"",style:{}});return ht.className||delete ht.className,(0,P.default)(ht.style).length===0&&delete ht.style,ht},oe=b.invertTheme=function(ae){return(0,P.default)(ae).reduce(function(ie,Se){return ie[Se]=/^base/.test(Se)?te(ae[Se]):Se==="scheme"?ae[Se]+":inverted":ae[Se],ie},{})},be=(b.createStyling=(0,O.default)(function(ae){for(var ie=arguments.length,Se=Array(ie>3?ie-3:0),mt=3;mt<ie;mt++)Se[mt-3]=arguments[mt];var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ht=it.defaultBase16,Ye=ht===void 0?U:ht,St=it.base16Themes,$t=St===void 0?null:St,Lt=be(Tt,$t);Lt&&(Tt=(0,R.default)({},Lt,Tt));var Mt=G.reduce(function(Ee,nt){return Ee[nt]=Tt[nt]||Ye[nt],Ee},{}),jt=(0,P.default)(Tt).reduce(function(Ee,nt){return G.indexOf(nt)===-1&&(Ee[nt]=Tt[nt]),Ee},{}),Qe=ae(Mt),Pe=j(jt,Qe);return(0,O.default)(X,2).apply(void 0,[Pe].concat(Se))},3),b.getBase16Theme=function(ae,ie){if(ae&&ae.extend&&(ae=ae.extend),typeof ae=="string"){var Se=ae.split(":"),mt=(0,M.default)(Se,2),it=mt[0],Tt=mt[1];ae=(ie||{})[it]||H[it],Tt==="inverted"&&(ae=oe(ae))}return ae&&ae.hasOwnProperty("base00")?ae:void 0})},function(v,b,_){var E,R=typeof Reflect=="object"?Reflect:null,M=R&&typeof R.apply=="function"?R.apply:function(B,j,X){return Function.prototype.apply.call(B,j,X)};E=R&&typeof R.ownKeys=="function"?R.ownKeys:Object.getOwnPropertySymbols?function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:function(B){return Object.getOwnPropertyNames(B)};var P=Number.isNaN||function(B){return B!=B};function O(){O.init.call(this)}v.exports=O,v.exports.once=function(B,j){return new Promise(function(X,oe){function be(){ae!==void 0&&B.removeListener("error",ae),X([].slice.call(arguments))}var ae;j!=="error"&&(ae=function(ie){B.removeListener(j,be),oe(ie)},B.once("error",ae)),B.once(j,be)})},O.EventEmitter=O,O.prototype._events=void 0,O.prototype._eventsCount=0,O.prototype._maxListeners=void 0;var H=10;function Q(B){if(typeof B!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof B)}function ee(B){return B._maxListeners===void 0?O.defaultMaxListeners:B._maxListeners}function V(B,j,X,oe){var be,ae,ie,Se;if(Q(X),(ae=B._events)===void 0?(ae=B._events=Object.create(null),B._eventsCount=0):(ae.newListener!==void 0&&(B.emit("newListener",j,X.listener?X.listener:X),ae=B._events),ie=ae[j]),ie===void 0)ie=ae[j]=X,++B._eventsCount;else if(typeof ie=="function"?ie=ae[j]=oe?[X,ie]:[ie,X]:oe?ie.unshift(X):ie.push(X),(be=ee(B))>0&&ie.length>be&&!ie.warned){ie.warned=!0;var mt=new Error("Possible EventEmitter memory leak detected. "+ie.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");mt.name="MaxListenersExceededWarning",mt.emitter=B,mt.type=j,mt.count=ie.length,Se=mt,console&&console.warn&&console.warn(Se)}return B}function W(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Y(B,j,X){var oe={fired:!1,wrapFn:void 0,target:B,type:j,listener:X},be=W.bind(oe);return be.listener=X,oe.wrapFn=be,be}function U(B,j,X){var oe=B._events;if(oe===void 0)return[];var be=oe[j];return be===void 0?[]:typeof be=="function"?X?[be.listener||be]:[be]:X?function(ae){for(var ie=new Array(ae.length),Se=0;Se<ie.length;++Se)ie[Se]=ae[Se].listener||ae[Se];return ie}(be):te(be,be.length)}function G(B){var j=this._events;if(j!==void 0){var X=j[B];if(typeof X=="function")return 1;if(X!==void 0)return X.length}return 0}function te(B,j){for(var X=new Array(j),oe=0;oe<j;++oe)X[oe]=B[oe];return X}Object.defineProperty(O,"defaultMaxListeners",{enumerable:!0,get:function(){return H},set:function(B){if(typeof B!="number"||B<0||P(B))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+B+".");H=B}}),O.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},O.prototype.setMaxListeners=function(B){if(typeof B!="number"||B<0||P(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this},O.prototype.getMaxListeners=function(){return ee(this)},O.prototype.emit=function(B){for(var j=[],X=1;X<arguments.length;X++)j.push(arguments[X]);var oe=B==="error",be=this._events;if(be!==void 0)oe=oe&&be.error===void 0;else if(!oe)return!1;if(oe){var ae;if(j.length>0&&(ae=j[0]),ae instanceof Error)throw ae;var ie=new Error("Unhandled error."+(ae?" ("+ae.message+")":""));throw ie.context=ae,ie}var Se=be[B];if(Se===void 0)return!1;if(typeof Se=="function")M(Se,this,j);else{var mt=Se.length,it=te(Se,mt);for(X=0;X<mt;++X)M(it[X],this,j)}return!0},O.prototype.addListener=function(B,j){return V(this,B,j,!1)},O.prototype.on=O.prototype.addListener,O.prototype.prependListener=function(B,j){return V(this,B,j,!0)},O.prototype.once=function(B,j){return Q(j),this.on(B,Y(this,B,j)),this},O.prototype.prependOnceListener=function(B,j){return Q(j),this.prependListener(B,Y(this,B,j)),this},O.prototype.removeListener=function(B,j){var X,oe,be,ae,ie;if(Q(j),(oe=this._events)===void 0)return this;if((X=oe[B])===void 0)return this;if(X===j||X.listener===j)--this._eventsCount==0?this._events=Object.create(null):(delete oe[B],oe.removeListener&&this.emit("removeListener",B,X.listener||j));else if(typeof X!="function"){for(be=-1,ae=X.length-1;ae>=0;ae--)if(X[ae]===j||X[ae].listener===j){ie=X[ae].listener,be=ae;break}if(be<0)return this;be===0?X.shift():function(Se,mt){for(;mt+1<Se.length;mt++)Se[mt]=Se[mt+1];Se.pop()}(X,be),X.length===1&&(oe[B]=X[0]),oe.removeListener!==void 0&&this.emit("removeListener",B,ie||j)}return this},O.prototype.off=O.prototype.removeListener,O.prototype.removeAllListeners=function(B){var j,X,oe;if((X=this._events)===void 0)return this;if(X.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):X[B]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete X[B]),this;if(arguments.length===0){var be,ae=Object.keys(X);for(oe=0;oe<ae.length;++oe)(be=ae[oe])!=="removeListener"&&this.removeAllListeners(be);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(j=X[B])=="function")this.removeListener(B,j);else if(j!==void 0)for(oe=j.length-1;oe>=0;oe--)this.removeListener(B,j[oe]);return this},O.prototype.listeners=function(B){return U(this,B,!0)},O.prototype.rawListeners=function(B){return U(this,B,!1)},O.listenerCount=function(B,j){return typeof B.listenerCount=="function"?B.listenerCount(j):G.call(B,j)},O.prototype.listenerCount=G,O.prototype.eventNames=function(){return this._eventsCount>0?E(this._events):[]}},function(v,b,_){v.exports.Dispatcher=_(140)},function(v,b,_){v.exports=_(142)},function(v,b,_){b.__esModule=!0;var E=P(_(50)),R=P(_(65)),M=typeof R.default=="function"&&typeof E.default=="symbol"?function(O){return typeof O}:function(O){return O&&typeof R.default=="function"&&O.constructor===R.default&&O!==R.default.prototype?"symbol":typeof O};function P(O){return O&&O.__esModule?O:{default:O}}b.default=typeof R.default=="function"&&M(E.default)==="symbol"?function(O){return O===void 0?"undefined":M(O)}:function(O){return O&&typeof R.default=="function"&&O.constructor===R.default&&O!==R.default.prototype?"symbol":O===void 0?"undefined":M(O)}},function(v,b,_){v.exports={default:_(51),__esModule:!0}},function(v,b,_){_(20),_(29),v.exports=_(30).f("iterator")},function(v,b,_){var E=_(21),R=_(22);v.exports=function(M){return function(P,O){var H,Q,ee=String(R(P)),V=E(O),W=ee.length;return V<0||V>=W?M?"":void 0:(H=ee.charCodeAt(V))<55296||H>56319||V+1===W||(Q=ee.charCodeAt(V+1))<56320||Q>57343?M?ee.charAt(V):H:M?ee.slice(V,V+2):Q-56320+(H-55296<<10)+65536}}},function(v,b,_){var E=_(54);v.exports=function(R,M,P){if(E(R),M===void 0)return R;switch(P){case 1:return function(O){return R.call(M,O)};case 2:return function(O,H){return R.call(M,O,H)};case 3:return function(O,H,Q){return R.call(M,O,H,Q)}}return function(){return R.apply(M,arguments)}}},function(v,b){v.exports=function(_){if(typeof _!="function")throw TypeError(_+" is not a function!");return _}},function(v,b,_){var E=_(38),R=_(16),M=_(28),P={};_(6)(P,_(2)("iterator"),function(){return this}),v.exports=function(O,H,Q){O.prototype=E(P,{next:R(1,Q)}),M(O,H+" Iterator")}},function(v,b,_){var E=_(7),R=_(10),M=_(13);v.exports=_(4)?Object.defineProperties:function(P,O){R(P);for(var H,Q=M(O),ee=Q.length,V=0;ee>V;)E.f(P,H=Q[V++],O[H]);return P}},function(v,b,_){var E=_(9),R=_(58),M=_(59);v.exports=function(P){return function(O,H,Q){var ee,V=E(O),W=R(V.length),Y=M(Q,W);if(P&&H!=H){for(;W>Y;)if((ee=V[Y++])!=ee)return!0}else for(;W>Y;Y++)if((P||Y in V)&&V[Y]===H)return P||Y||0;return!P&&-1}}},function(v,b,_){var E=_(21),R=Math.min;v.exports=function(M){return M>0?R(E(M),9007199254740991):0}},function(v,b,_){var E=_(21),R=Math.max,M=Math.min;v.exports=function(P,O){return(P=E(P))<0?R(P+O,0):M(P,O)}},function(v,b,_){var E=_(3).document;v.exports=E&&E.documentElement},function(v,b,_){var E=_(5),R=_(18),M=_(25)("IE_PROTO"),P=Object.prototype;v.exports=Object.getPrototypeOf||function(O){return O=R(O),E(O,M)?O[M]:typeof O.constructor=="function"&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?P:null}},function(v,b,_){var E=_(63),R=_(64),M=_(12),P=_(9);v.exports=_(34)(Array,"Array",function(O,H){this._t=P(O),this._i=0,this._k=H},function(){var O=this._t,H=this._k,Q=this._i++;return!O||Q>=O.length?(this._t=void 0,R(1)):R(0,H=="keys"?Q:H=="values"?O[Q]:[Q,O[Q]])},"values"),M.Arguments=M.Array,E("keys"),E("values"),E("entries")},function(v,b){v.exports=function(){}},function(v,b){v.exports=function(_,E){return{value:E,done:!!_}}},function(v,b,_){v.exports={default:_(66),__esModule:!0}},function(v,b,_){_(67),_(73),_(74),_(75),v.exports=_(1).Symbol},function(v,b,_){var E=_(3),R=_(5),M=_(4),P=_(15),O=_(37),H=_(68).KEY,Q=_(8),ee=_(26),V=_(28),W=_(17),Y=_(2),U=_(30),G=_(31),te=_(69),B=_(70),j=_(10),X=_(11),oe=_(18),be=_(9),ae=_(23),ie=_(16),Se=_(38),mt=_(71),it=_(72),Tt=_(32),ht=_(7),Ye=_(13),St=it.f,$t=ht.f,Lt=mt.f,Mt=E.Symbol,jt=E.JSON,Qe=jt&&jt.stringify,Pe=Y("_hidden"),Ee=Y("toPrimitive"),nt={}.propertyIsEnumerable,st=ee("symbol-registry"),rt=ee("symbols"),tt=ee("op-symbols"),vt=Object.prototype,It=typeof Mt=="function"&&!!Tt.f,Vt=E.QObject,wt=!Vt||!Vt.prototype||!Vt.prototype.findChild,kt=M&&Q(function(){return Se($t({},"a",{get:function(){return $t(this,"a",{value:7}).a}})).a!=7})?function(ct,Ze,Ot){var Ht=St(vt,Ze);Ht&&delete vt[Ze],$t(ct,Ze,Ot),Ht&&ct!==vt&&$t(vt,Ze,Ht)}:$t,Zt=function(ct){var Ze=rt[ct]=Se(Mt.prototype);return Ze._k=ct,Ze},Qt=It&&typeof Mt.iterator=="symbol"?function(ct){return typeof ct=="symbol"}:function(ct){return ct instanceof Mt},Z=function(ct,Ze,Ot){return ct===vt&&Z(tt,Ze,Ot),j(ct),Ze=ae(Ze,!0),j(Ot),R(rt,Ze)?(Ot.enumerable?(R(ct,Pe)&&ct[Pe][Ze]&&(ct[Pe][Ze]=!1),Ot=Se(Ot,{enumerable:ie(0,!1)})):(R(ct,Pe)||$t(ct,Pe,ie(1,{})),ct[Pe][Ze]=!0),kt(ct,Ze,Ot)):$t(ct,Ze,Ot)},z=function(ct,Ze){j(ct);for(var Ot,Ht=te(Ze=be(Ze)),Xt=0,ur=Ht.length;ur>Xt;)Z(ct,Ot=Ht[Xt++],Ze[Ot]);return ct},K=function(ct){var Ze=nt.call(this,ct=ae(ct,!0));return!(this===vt&&R(rt,ct)&&!R(tt,ct))&&(!(Ze||!R(this,ct)||!R(rt,ct)||R(this,Pe)&&this[Pe][ct])||Ze)},ne=function(ct,Ze){if(ct=be(ct),Ze=ae(Ze,!0),ct!==vt||!R(rt,Ze)||R(tt,Ze)){var Ot=St(ct,Ze);return!Ot||!R(rt,Ze)||R(ct,Pe)&&ct[Pe][Ze]||(Ot.enumerable=!0),Ot}},Ae=function(ct){for(var Ze,Ot=Lt(be(ct)),Ht=[],Xt=0;Ot.length>Xt;)R(rt,Ze=Ot[Xt++])||Ze==Pe||Ze==H||Ht.push(Ze);return Ht},ut=function(ct){for(var Ze,Ot=ct===vt,Ht=Lt(Ot?tt:be(ct)),Xt=[],ur=0;Ht.length>ur;)!R(rt,Ze=Ht[ur++])||Ot&&!R(vt,Ze)||Xt.push(rt[Ze]);return Xt};It||(O((Mt=function(){if(this instanceof Mt)throw TypeError("Symbol is not a constructor!");var ct=W(arguments.length>0?arguments[0]:void 0),Ze=function(Ot){this===vt&&Ze.call(tt,Ot),R(this,Pe)&&R(this[Pe],ct)&&(this[Pe][ct]=!1),kt(this,ct,ie(1,Ot))};return M&&wt&&kt(vt,ct,{configurable:!0,set:Ze}),Zt(ct)}).prototype,"toString",function(){return this._k}),it.f=ne,ht.f=Z,_(41).f=mt.f=Ae,_(19).f=K,Tt.f=ut,M&&!_(14)&&O(vt,"propertyIsEnumerable",K,!0),U.f=function(ct){return Zt(Y(ct))}),P(P.G+P.W+P.F*!It,{Symbol:Mt});for(var Rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),yt=0;Rt.length>yt;)Y(Rt[yt++]);for(var lt=Ye(Y.store),at=0;lt.length>at;)G(lt[at++]);P(P.S+P.F*!It,"Symbol",{for:function(ct){return R(st,ct+="")?st[ct]:st[ct]=Mt(ct)},keyFor:function(ct){if(!Qt(ct))throw TypeError(ct+" is not a symbol!");for(var Ze in st)if(st[Ze]===ct)return Ze},useSetter:function(){wt=!0},useSimple:function(){wt=!1}}),P(P.S+P.F*!It,"Object",{create:function(ct,Ze){return Ze===void 0?Se(ct):z(Se(ct),Ze)},defineProperty:Z,defineProperties:z,getOwnPropertyDescriptor:ne,getOwnPropertyNames:Ae,getOwnPropertySymbols:ut});var ze=Q(function(){Tt.f(1)});P(P.S+P.F*ze,"Object",{getOwnPropertySymbols:function(ct){return Tt.f(oe(ct))}}),jt&&P(P.S+P.F*(!It||Q(function(){var ct=Mt();return Qe([ct])!="[null]"||Qe({a:ct})!="{}"||Qe(Object(ct))!="{}"})),"JSON",{stringify:function(ct){for(var Ze,Ot,Ht=[ct],Xt=1;arguments.length>Xt;)Ht.push(arguments[Xt++]);if(Ot=Ze=Ht[1],(X(Ze)||ct!==void 0)&&!Qt(ct))return B(Ze)||(Ze=function(ur,cr){if(typeof Ot=="function"&&(cr=Ot.call(this,ur,cr)),!Qt(cr))return cr}),Ht[1]=Ze,Qe.apply(jt,Ht)}}),Mt.prototype[Ee]||_(6)(Mt.prototype,Ee,Mt.prototype.valueOf),V(Mt,"Symbol"),V(Math,"Math",!0),V(E.JSON,"JSON",!0)},function(v,b,_){var E=_(17)("meta"),R=_(11),M=_(5),P=_(7).f,O=0,H=Object.isExtensible||function(){return!0},Q=!_(8)(function(){return H(Object.preventExtensions({}))}),ee=function(W){P(W,E,{value:{i:"O"+ ++O,w:{}}})},V=v.exports={KEY:E,NEED:!1,fastKey:function(W,Y){if(!R(W))return typeof W=="symbol"?W:(typeof W=="string"?"S":"P")+W;if(!M(W,E)){if(!H(W))return"F";if(!Y)return"E";ee(W)}return W[E].i},getWeak:function(W,Y){if(!M(W,E)){if(!H(W))return!0;if(!Y)return!1;ee(W)}return W[E].w},onFreeze:function(W){return Q&&V.NEED&&H(W)&&!M(W,E)&&ee(W),W}}},function(v,b,_){var E=_(13),R=_(32),M=_(19);v.exports=function(P){var O=E(P),H=R.f;if(H)for(var Q,ee=H(P),V=M.f,W=0;ee.length>W;)V.call(P,Q=ee[W++])&&O.push(Q);return O}},function(v,b,_){var E=_(24);v.exports=Array.isArray||function(R){return E(R)=="Array"}},function(v,b,_){var E=_(9),R=_(41).f,M={}.toString,P=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];v.exports.f=function(O){return P&&M.call(O)=="[object Window]"?function(H){try{return R(H)}catch{return P.slice()}}(O):R(E(O))}},function(v,b,_){var E=_(19),R=_(16),M=_(9),P=_(23),O=_(5),H=_(35),Q=Object.getOwnPropertyDescriptor;b.f=_(4)?Q:function(ee,V){if(ee=M(ee),V=P(V,!0),H)try{return Q(ee,V)}catch{}if(O(ee,V))return R(!E.f.call(ee,V),ee[V])}},function(v,b){},function(v,b,_){_(31)("asyncIterator")},function(v,b,_){_(31)("observable")},function(v,b,_){b.__esModule=!0;var E,R=_(77),M=(E=R)&&E.__esModule?E:{default:E};b.default=M.default||function(P){for(var O=1;O<arguments.length;O++){var H=arguments[O];for(var Q in H)Object.prototype.hasOwnProperty.call(H,Q)&&(P[Q]=H[Q])}return P}},function(v,b,_){v.exports={default:_(78),__esModule:!0}},function(v,b,_){_(79),v.exports=_(1).Object.assign},function(v,b,_){var E=_(15);E(E.S+E.F,"Object",{assign:_(80)})},function(v,b,_){var E=_(4),R=_(13),M=_(32),P=_(19),O=_(18),H=_(40),Q=Object.assign;v.exports=!Q||_(8)(function(){var ee={},V={},W=Symbol(),Y="abcdefghijklmnopqrst";return ee[W]=7,Y.split("").forEach(function(U){V[U]=U}),Q({},ee)[W]!=7||Object.keys(Q({},V)).join("")!=Y})?function(ee,V){for(var W=O(ee),Y=arguments.length,U=1,G=M.f,te=P.f;Y>U;)for(var B,j=H(arguments[U++]),X=G?R(j).concat(G(j)):R(j),oe=X.length,be=0;oe>be;)B=X[be++],E&&!te.call(j,B)||(W[B]=j[B]);return W}:Q},function(v,b,_){b.__esModule=!0;var E=M(_(82)),R=M(_(85));function M(P){return P&&P.__esModule?P:{default:P}}b.default=function(P,O){if(Array.isArray(P))return P;if((0,E.default)(Object(P)))return function(H,Q){var ee=[],V=!0,W=!1,Y=void 0;try{for(var U,G=(0,R.default)(H);!(V=(U=G.next()).done)&&(ee.push(U.value),!Q||ee.length!==Q);V=!0);}catch(te){W=!0,Y=te}finally{try{!V&&G.return&&G.return()}finally{if(W)throw Y}}return ee}(P,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(v,b,_){v.exports={default:_(83),__esModule:!0}},function(v,b,_){_(29),_(20),v.exports=_(84)},function(v,b,_){var E=_(42),R=_(2)("iterator"),M=_(12);v.exports=_(1).isIterable=function(P){var O=Object(P);return O[R]!==void 0||"@@iterator"in O||M.hasOwnProperty(E(O))}},function(v,b,_){v.exports={default:_(86),__esModule:!0}},function(v,b,_){_(29),_(20),v.exports=_(87)},function(v,b,_){var E=_(10),R=_(88);v.exports=_(1).getIterator=function(M){var P=R(M);if(typeof P!="function")throw TypeError(M+" is not iterable!");return E(P.call(M))}},function(v,b,_){var E=_(42),R=_(2)("iterator"),M=_(12);v.exports=_(1).getIteratorMethod=function(P){if(P!=null)return P[R]||P["@@iterator"]||M[E(P)]}},function(v,b,_){v.exports={default:_(90),__esModule:!0}},function(v,b,_){_(91),v.exports=_(1).Object.keys},function(v,b,_){var E=_(18),R=_(13);_(92)("keys",function(){return function(M){return R(E(M))}})},function(v,b,_){var E=_(15),R=_(1),M=_(8);v.exports=function(P,O){var H=(R.Object||{})[P]||Object[P],Q={};Q[P]=O(H),E(E.S+E.F*M(function(){H(1)}),"Object",Q)}},function(v,b,_){(function(E){var R=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],M=/^\s+|\s+$/g,P=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,O=/\{\n\/\* \[wrapped with (.+)\] \*/,H=/,? & /,Q=/^[-+]0x[0-9a-f]+$/i,ee=/^0b[01]+$/i,V=/^\[object .+?Constructor\]$/,W=/^0o[0-7]+$/i,Y=/^(?:0|[1-9]\d*)$/,U=parseInt,G=typeof E=="object"&&E&&E.Object===Object&&E,te=typeof self=="object"&&self&&self.Object===Object&&self,B=G||te||Function("return this")();function j(at,ze,ct){switch(ct.length){case 0:return at.call(ze);case 1:return at.call(ze,ct[0]);case 2:return at.call(ze,ct[0],ct[1]);case 3:return at.call(ze,ct[0],ct[1],ct[2])}return at.apply(ze,ct)}function X(at,ze){return!!(at&&at.length)&&function(ct,Ze,Ot){if(Ze!=Ze)return function(ur,cr,A,re){for(var Ce=ur.length,ve=A+(re?1:-1);re?ve--:++ve<Ce;)if(cr(ur[ve],ve,ur))return ve;return-1}(ct,oe,Ot);for(var Ht=Ot-1,Xt=ct.length;++Ht<Xt;)if(ct[Ht]===Ze)return Ht;return-1}(at,ze,0)>-1}function oe(at){return at!=at}function be(at,ze){for(var ct=at.length,Ze=0;ct--;)at[ct]===ze&&Ze++;return Ze}function ae(at,ze){for(var ct=-1,Ze=at.length,Ot=0,Ht=[];++ct<Ze;){var Xt=at[ct];Xt!==ze&&Xt!=="__lodash_placeholder__"||(at[ct]="__lodash_placeholder__",Ht[Ot++]=ct)}return Ht}var ie,Se,mt,it=Function.prototype,Tt=Object.prototype,ht=B["__core-js_shared__"],Ye=(ie=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||""))?"Symbol(src)_1."+ie:"",St=it.toString,$t=Tt.hasOwnProperty,Lt=Tt.toString,Mt=RegExp("^"+St.call($t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jt=Object.create,Qe=Math.max,Pe=Math.min,Ee=(Se=Zt(Object,"defineProperty"),(mt=Zt.name)&&mt.length>2?Se:void 0);function nt(at){return Rt(at)?jt(at):{}}function st(at){return!(!Rt(at)||function(ze){return!!Ye&&Ye in ze}(at))&&(function(ze){var ct=Rt(ze)?Lt.call(ze):"";return ct=="[object Function]"||ct=="[object GeneratorFunction]"}(at)||function(ze){var ct=!1;if(ze!=null&&typeof ze.toString!="function")try{ct=!!(ze+"")}catch{}return ct}(at)?Mt:V).test(function(ze){if(ze!=null){try{return St.call(ze)}catch{}try{return ze+""}catch{}}return""}(at))}function rt(at,ze,ct,Ze){for(var Ot=-1,Ht=at.length,Xt=ct.length,ur=-1,cr=ze.length,A=Qe(Ht-Xt,0),re=Array(cr+A),Ce=!Ze;++ur<cr;)re[ur]=ze[ur];for(;++Ot<Xt;)(Ce||Ot<Ht)&&(re[ct[Ot]]=at[Ot]);for(;A--;)re[ur++]=at[Ot++];return re}function tt(at,ze,ct,Ze){for(var Ot=-1,Ht=at.length,Xt=-1,ur=ct.length,cr=-1,A=ze.length,re=Qe(Ht-ur,0),Ce=Array(re+A),ve=!Ze;++Ot<re;)Ce[Ot]=at[Ot];for(var Oe=Ot;++cr<A;)Ce[Oe+cr]=ze[cr];for(;++Xt<ur;)(ve||Ot<Ht)&&(Ce[Oe+ct[Xt]]=at[Ot++]);return Ce}function vt(at){return function(){var ze=arguments;switch(ze.length){case 0:return new at;case 1:return new at(ze[0]);case 2:return new at(ze[0],ze[1]);case 3:return new at(ze[0],ze[1],ze[2]);case 4:return new at(ze[0],ze[1],ze[2],ze[3]);case 5:return new at(ze[0],ze[1],ze[2],ze[3],ze[4]);case 6:return new at(ze[0],ze[1],ze[2],ze[3],ze[4],ze[5]);case 7:return new at(ze[0],ze[1],ze[2],ze[3],ze[4],ze[5],ze[6])}var ct=nt(at.prototype),Ze=at.apply(ct,ze);return Rt(Ze)?Ze:ct}}function It(at,ze,ct,Ze,Ot,Ht,Xt,ur,cr,A){var re=128&ze,Ce=1&ze,ve=2&ze,Oe=24&ze,pt=512&ze,Kt=ve?void 0:vt(at);return function rr(){for(var dr=arguments.length,Gt=Array(dr),or=dr;or--;)Gt[or]=arguments[or];if(Oe)var yr=kt(rr),mr=be(Gt,yr);if(Ze&&(Gt=rt(Gt,Ze,Ot,Oe)),Ht&&(Gt=tt(Gt,Ht,Xt,Oe)),dr-=mr,Oe&&dr<A){var Nr=ae(Gt,yr);return Vt(at,ze,It,rr.placeholder,ct,Gt,Nr,ur,cr,A-dr)}var Ar=Ce?ct:this,br=ve?Ar[at]:at;return dr=Gt.length,ur?Gt=K(Gt,ur):pt&&dr>1&&Gt.reverse(),re&&cr<dr&&(Gt.length=cr),this&&this!==B&&this instanceof rr&&(br=Kt||vt(br)),br.apply(Ar,Gt)}}function Vt(at,ze,ct,Ze,Ot,Ht,Xt,ur,cr,A){var re=8&ze;ze|=re?32:64,4&(ze&=~(re?64:32))||(ze&=-4);var Ce=ct(at,ze,Ot,re?Ht:void 0,re?Xt:void 0,re?void 0:Ht,re?void 0:Xt,ur,cr,A);return Ce.placeholder=Ze,ne(Ce,at,ze)}function wt(at,ze,ct,Ze,Ot,Ht,Xt,ur){var cr=2&ze;if(!cr&&typeof at!="function")throw new TypeError("Expected a function");var A=Ze?Ze.length:0;if(A||(ze&=-97,Ze=Ot=void 0),Xt=Xt===void 0?Xt:Qe(lt(Xt),0),ur=ur===void 0?ur:lt(ur),A-=Ot?Ot.length:0,64&ze){var re=Ze,Ce=Ot;Ze=Ot=void 0}var ve=[at,ze,ct,Ze,Ot,re,Ce,Ht,Xt,ur];if(at=ve[0],ze=ve[1],ct=ve[2],Ze=ve[3],Ot=ve[4],!(ur=ve[9]=ve[9]==null?cr?0:at.length:Qe(ve[9]-A,0))&&24&ze&&(ze&=-25),ze&&ze!=1)Oe=ze==8||ze==16?function(pt,Kt,rr){var dr=vt(pt);return function Gt(){for(var or=arguments.length,yr=Array(or),mr=or,Nr=kt(Gt);mr--;)yr[mr]=arguments[mr];var Ar=or<3&&yr[0]!==Nr&&yr[or-1]!==Nr?[]:ae(yr,Nr);if((or-=Ar.length)<rr)return Vt(pt,Kt,It,Gt.placeholder,void 0,yr,Ar,void 0,void 0,rr-or);var br=this&&this!==B&&this instanceof Gt?dr:pt;return j(br,this,yr)}}(at,ze,ur):ze!=32&&ze!=33||Ot.length?It.apply(void 0,ve):function(pt,Kt,rr,dr){var Gt=1&Kt,or=vt(pt);return function yr(){for(var mr=-1,Nr=arguments.length,Ar=-1,br=dr.length,qr=Array(br+Nr),en=this&&this!==B&&this instanceof yr?or:pt;++Ar<br;)qr[Ar]=dr[Ar];for(;Nr--;)qr[Ar++]=arguments[++mr];return j(en,Gt?rr:this,qr)}}(at,ze,ct,Ze);else var Oe=function(pt,Kt,rr){var dr=1&Kt,Gt=vt(pt);return function or(){var yr=this&&this!==B&&this instanceof or?Gt:pt;return yr.apply(dr?rr:this,arguments)}}(at,ze,ct);return ne(Oe,at,ze)}function kt(at){return at.placeholder}function Zt(at,ze){var ct=function(Ze,Ot){return Ze==null?void 0:Ze[Ot]}(at,ze);return st(ct)?ct:void 0}function Qt(at){var ze=at.match(O);return ze?ze[1].split(H):[]}function Z(at,ze){var ct=ze.length,Ze=ct-1;return ze[Ze]=(ct>1?"& ":"")+ze[Ze],ze=ze.join(ct>2?", ":" "),at.replace(P,`{
/* [wrapped with `+ze+`] */
`)}function z(at,ze){return!!(ze=ze==null?9007199254740991:ze)&&(typeof at=="number"||Y.test(at))&&at>-1&&at%1==0&&at<ze}function K(at,ze){for(var ct=at.length,Ze=Pe(ze.length,ct),Ot=function(Xt,ur){var cr=-1,A=Xt.length;for(ur||(ur=Array(A));++cr<A;)ur[cr]=Xt[cr];return ur}(at);Ze--;){var Ht=ze[Ze];at[Ze]=z(Ht,ct)?Ot[Ht]:void 0}return at}var ne=Ee?function(at,ze,ct){var Ze,Ot=ze+"";return Ee(at,"toString",{configurable:!0,enumerable:!1,value:(Ze=Z(Ot,Ae(Qt(Ot),ct)),function(){return Ze})})}:function(at){return at};function Ae(at,ze){return function(ct,Ze){for(var Ot=-1,Ht=ct?ct.length:0;++Ot<Ht&&Ze(ct[Ot],Ot,ct)!==!1;);}(R,function(ct){var Ze="_."+ct[0];ze&ct[1]&&!X(at,Ze)&&at.push(Ze)}),at.sort()}function ut(at,ze,ct){var Ze=wt(at,8,void 0,void 0,void 0,void 0,void 0,ze=ct?void 0:ze);return Ze.placeholder=ut.placeholder,Ze}function Rt(at){var ze=typeof at;return!!at&&(ze=="object"||ze=="function")}function yt(at){return at?(at=function(ze){if(typeof ze=="number")return ze;if(function(Ot){return typeof Ot=="symbol"||function(Ht){return!!Ht&&typeof Ht=="object"}(Ot)&&Lt.call(Ot)=="[object Symbol]"}(ze))return NaN;if(Rt(ze)){var ct=typeof ze.valueOf=="function"?ze.valueOf():ze;ze=Rt(ct)?ct+"":ct}if(typeof ze!="string")return ze===0?ze:+ze;ze=ze.replace(M,"");var Ze=ee.test(ze);return Ze||W.test(ze)?U(ze.slice(2),Ze?2:8):Q.test(ze)?NaN:+ze}(at))===1/0||at===-1/0?17976931348623157e292*(at<0?-1:1):at==at?at:0:at===0?at:0}function lt(at){var ze=yt(at),ct=ze%1;return ze==ze?ct?ze-ct:ze:0}ut.placeholder={},v.exports=ut}).call(this,_(43))},function(v,b,_){function E(tt){return tt&&tt.__esModule?tt.default:tt}b.__esModule=!0;var R=_(95);b.threezerotwofour=E(R);var M=_(96);b.apathy=E(M);var P=_(97);b.ashes=E(P);var O=_(98);b.atelierDune=E(O);var H=_(99);b.atelierForest=E(H);var Q=_(100);b.atelierHeath=E(Q);var ee=_(101);b.atelierLakeside=E(ee);var V=_(102);b.atelierSeaside=E(V);var W=_(103);b.bespin=E(W);var Y=_(104);b.brewer=E(Y);var U=_(105);b.bright=E(U);var G=_(106);b.chalk=E(G);var te=_(107);b.codeschool=E(te);var B=_(108);b.colors=E(B);var j=_(109);b.default=E(j);var X=_(110);b.eighties=E(X);var oe=_(111);b.embers=E(oe);var be=_(112);b.flat=E(be);var ae=_(113);b.google=E(ae);var ie=_(114);b.grayscale=E(ie);var Se=_(115);b.greenscreen=E(Se);var mt=_(116);b.harmonic=E(mt);var it=_(117);b.hopscotch=E(it);var Tt=_(118);b.isotope=E(Tt);var ht=_(119);b.marrakesh=E(ht);var Ye=_(120);b.mocha=E(Ye);var St=_(121);b.monokai=E(St);var $t=_(122);b.ocean=E($t);var Lt=_(123);b.paraiso=E(Lt);var Mt=_(124);b.pop=E(Mt);var jt=_(125);b.railscasts=E(jt);var Qe=_(126);b.shapeshifter=E(Qe);var Pe=_(127);b.solarized=E(Pe);var Ee=_(128);b.summerfruit=E(Ee);var nt=_(129);b.tomorrow=E(nt);var st=_(130);b.tube=E(st);var rt=_(131);b.twilight=E(rt)},function(v,b,_){b.__esModule=!0,b.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"brewer",author:"timoth\xE9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},v.exports=b.default},function(v,b,_){b.__esModule=!0,b.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},v.exports=b.default},function(v,b,_){var E=_(33);function R(M){var P=Math.round(E(M,0,255)).toString(16);return P.length==1?"0"+P:P}v.exports=function(M){var P=M.length===4?R(255*M[3]):"";return"#"+R(M[0])+R(M[1])+R(M[2])+P}},function(v,b,_){var E=_(134),R=_(135),M=_(136),P=_(137),O={"#":R,hsl:function(Q){var ee=E(Q),V=P(ee);return ee.length===4&&V.push(ee[3]),V},rgb:M};function H(Q){for(var ee in O)if(Q.indexOf(ee)===0)return O[ee](Q)}H.rgb=M,H.hsl=E,H.hex=R,v.exports=H},function(v,b,_){var E=_(44),R=_(33);function M(P,O){switch(P=parseFloat(P),O){case 0:return R(P,0,360);case 1:case 2:return R(P,0,100);case 3:return R(P,0,1)}}v.exports=function(P){return E(P).map(M)}},function(v,b){v.exports=function(_){_.length!==4&&_.length!==5||(_=function(M){for(var P="#",O=1;O<M.length;O++){var H=M.charAt(O);P+=H+H}return P}(_));var E=[parseInt(_.substring(1,3),16),parseInt(_.substring(3,5),16),parseInt(_.substring(5,7),16)];if(_.length===9){var R=parseFloat((parseInt(_.substring(7,9),16)/255).toFixed(2));E.push(R)}return E}},function(v,b,_){var E=_(44),R=_(33);function M(P,O){return O<3?P.indexOf("%")!=-1?Math.round(255*R(parseInt(P,10),0,100)/100):R(parseInt(P,10),0,255):R(parseFloat(P),0,1)}v.exports=function(P){return E(P).map(M)}},function(v,b){v.exports=function(_){var E,R,M,P,O,H=_[0]/360,Q=_[1]/100,ee=_[2]/100;if(Q==0)return[O=255*ee,O,O];E=2*ee-(R=ee<.5?ee*(1+Q):ee+Q-ee*Q),P=[0,0,0];for(var V=0;V<3;V++)(M=H+1/3*-(V-1))<0&&M++,M>1&&M--,O=6*M<1?E+6*(R-E)*M:2*M<1?R:3*M<2?E+(R-E)*(2/3-M)*6:E,P[V]=255*O;return P}},function(v,b,_){(function(E){var R=typeof E=="object"&&E&&E.Object===Object&&E,M=typeof self=="object"&&self&&self.Object===Object&&self,P=R||M||Function("return this")();function O(ae,ie,Se){switch(Se.length){case 0:return ae.call(ie);case 1:return ae.call(ie,Se[0]);case 2:return ae.call(ie,Se[0],Se[1]);case 3:return ae.call(ie,Se[0],Se[1],Se[2])}return ae.apply(ie,Se)}function H(ae,ie){for(var Se=-1,mt=ie.length,it=ae.length;++Se<mt;)ae[it+Se]=ie[Se];return ae}var Q=Object.prototype,ee=Q.hasOwnProperty,V=Q.toString,W=P.Symbol,Y=Q.propertyIsEnumerable,U=W?W.isConcatSpreadable:void 0,G=Math.max;function te(ae){return B(ae)||function(ie){return function(Se){return function(mt){return!!mt&&typeof mt=="object"}(Se)&&function(mt){return mt!=null&&function(it){return typeof it=="number"&&it>-1&&it%1==0&&it<=9007199254740991}(mt.length)&&!function(it){var Tt=function(ht){var Ye=typeof ht;return!!ht&&(Ye=="object"||Ye=="function")}(it)?V.call(it):"";return Tt=="[object Function]"||Tt=="[object GeneratorFunction]"}(mt)}(Se)}(ie)&&ee.call(ie,"callee")&&(!Y.call(ie,"callee")||V.call(ie)=="[object Arguments]")}(ae)||!!(U&&ae&&ae[U])}var B=Array.isArray,j,X,oe,be=(X=function(ae){var ie=(ae=function mt(it,Tt,ht,Ye,St){var $t=-1,Lt=it.length;for(ht||(ht=te),St||(St=[]);++$t<Lt;){var Mt=it[$t];Tt>0&&ht(Mt)?Tt>1?mt(Mt,Tt-1,ht,Ye,St):H(St,Mt):Ye||(St[St.length]=Mt)}return St}(ae,1)).length,Se=ie;for(j;Se--;)if(typeof ae[Se]!="function")throw new TypeError("Expected a function");return function(){for(var mt=0,it=ie?ae[mt].apply(this,arguments):arguments[0];++mt<ie;)it=ae[mt].call(this,it);return it}},oe=G(oe===void 0?X.length-1:oe,0),function(){for(var ae=arguments,ie=-1,Se=G(ae.length-oe,0),mt=Array(Se);++ie<Se;)mt[ie]=ae[oe+ie];ie=-1;for(var it=Array(oe+1);++ie<oe;)it[ie]=ae[ie];return it[oe]=mt,O(X,this,it)});v.exports=be}).call(this,_(43))},function(v,b,_){Object.defineProperty(b,"__esModule",{value:!0}),b.yuv2rgb=function(E){var R,M,P,O=E[0],H=E[1],Q=E[2];return R=1*O+0*H+1.13983*Q,M=1*O+-.39465*H+-.5806*Q,P=1*O+2.02311*H+0*Q,R=Math.min(Math.max(0,R),1),M=Math.min(Math.max(0,M),1),P=Math.min(Math.max(0,P),1),[255*R,255*M,255*P]},b.rgb2yuv=function(E){var R=E[0]/255,M=E[1]/255,P=E[2]/255;return[.299*R+.587*M+.114*P,-.14713*R+-.28886*M+.436*P,.615*R+-.51499*M+-.10001*P]}},function(v,b,_){function E(P,O,H){return O in P?Object.defineProperty(P,O,{value:H,enumerable:!0,configurable:!0,writable:!0}):P[O]=H,P}var R=_(141),M=function(){function P(){E(this,"_callbacks",void 0),E(this,"_isDispatching",void 0),E(this,"_isHandled",void 0),E(this,"_isPending",void 0),E(this,"_lastID",void 0),E(this,"_pendingPayload",void 0),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}var O=P.prototype;return O.register=function(H){var Q="ID_"+this._lastID++;return this._callbacks[Q]=H,Q},O.unregister=function(H){this._callbacks[H]||R(!1),delete this._callbacks[H]},O.waitFor=function(H){this._isDispatching||R(!1);for(var Q=0;Q<H.length;Q++){var ee=H[Q];this._isPending[ee]?this._isHandled[ee]||R(!1):(this._callbacks[ee]||R(!1),this._invokeCallback(ee))}},O.dispatch=function(H){this._isDispatching&&R(!1),this._startDispatching(H);try{for(var Q in this._callbacks)this._isPending[Q]||this._invokeCallback(Q)}finally{this._stopDispatching()}},O.isDispatching=function(){return this._isDispatching},O._invokeCallback=function(H){this._isPending[H]=!0,this._callbacks[H](this._pendingPayload),this._isHandled[H]=!0},O._startDispatching=function(H){for(var Q in this._callbacks)this._isPending[Q]=!1,this._isHandled[Q]=!1;this._pendingPayload=H,this._isDispatching=!0},O._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},P}();v.exports=M},function(v,b,_){v.exports=function(E,R){for(var M=arguments.length,P=new Array(M>2?M-2:0),O=2;O<M;O++)P[O-2]=arguments[O];if(!E){var H;if(R===void 0)H=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var Q=0;(H=new Error(R.replace(/%s/g,function(){return String(P[Q++])}))).name="Invariant Violation"}throw H.framesToPop=1,H}}},function(v,b,_){function E(Et,xt,ot){return xt in Et?Object.defineProperty(Et,xt,{value:ot,enumerable:!0,configurable:!0,writable:!0}):Et[xt]=ot,Et}function R(Et,xt){var ot=Object.keys(Et);if(Object.getOwnPropertySymbols){var bt=Object.getOwnPropertySymbols(Et);xt&&(bt=bt.filter(function(_t){return Object.getOwnPropertyDescriptor(Et,_t).enumerable})),ot.push.apply(ot,bt)}return ot}function M(Et){for(var xt=1;xt<arguments.length;xt++){var ot=arguments[xt]!=null?arguments[xt]:{};xt%2?R(Object(ot),!0).forEach(function(bt){E(Et,bt,ot[bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Et,Object.getOwnPropertyDescriptors(ot)):R(Object(ot)).forEach(function(bt){Object.defineProperty(Et,bt,Object.getOwnPropertyDescriptor(ot,bt))})}return Et}function P(Et,xt){if(!(Et instanceof xt))throw new TypeError("Cannot call a class as a function")}function O(Et,xt){for(var ot=0;ot<xt.length;ot++){var bt=xt[ot];bt.enumerable=bt.enumerable||!1,bt.configurable=!0,"value"in bt&&(bt.writable=!0),Object.defineProperty(Et,bt.key,bt)}}function H(Et,xt,ot){return xt&&O(Et.prototype,xt),ot&&O(Et,ot),Et}function Q(Et,xt){return(Q=Object.setPrototypeOf||function(ot,bt){return ot.__proto__=bt,ot})(Et,xt)}function ee(Et,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Super expression must either be null or a function");Et.prototype=Object.create(xt&&xt.prototype,{constructor:{value:Et,writable:!0,configurable:!0}}),xt&&Q(Et,xt)}function V(Et){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(xt){return xt.__proto__||Object.getPrototypeOf(xt)})(Et)}function W(Et){return(W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xt){return typeof xt}:function(xt){return xt&&typeof Symbol=="function"&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt})(Et)}function Y(Et){if(Et===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Et}function U(Et,xt){return!xt||W(xt)!=="object"&&typeof xt!="function"?Y(Et):xt}function G(Et){var xt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var ot,bt=V(Et);if(xt){var _t=V(this).constructor;ot=Reflect.construct(bt,arguments,_t)}else ot=bt.apply(this,arguments);return U(this,ot)}}_.r(b);var te=_(0),B=_.n(te);function j(){var Et=this.constructor.getDerivedStateFromProps(this.props,this.state);Et!=null&&this.setState(Et)}function X(Et){this.setState(function(xt){var ot=this.constructor.getDerivedStateFromProps(Et,xt);return ot!=null?ot:null}.bind(this))}function oe(Et,xt){try{var ot=this.props,bt=this.state;this.props=Et,this.state=xt,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(ot,bt)}finally{this.props=ot,this.state=bt}}function be(Et){var xt=Et.prototype;if(!xt||!xt.isReactComponent)throw new Error("Can only polyfill class components");if(typeof Et.getDerivedStateFromProps!="function"&&typeof xt.getSnapshotBeforeUpdate!="function")return Et;var ot=null,bt=null,_t=null;if(typeof xt.componentWillMount=="function"?ot="componentWillMount":typeof xt.UNSAFE_componentWillMount=="function"&&(ot="UNSAFE_componentWillMount"),typeof xt.componentWillReceiveProps=="function"?bt="componentWillReceiveProps":typeof xt.UNSAFE_componentWillReceiveProps=="function"&&(bt="UNSAFE_componentWillReceiveProps"),typeof xt.componentWillUpdate=="function"?_t="componentWillUpdate":typeof xt.UNSAFE_componentWillUpdate=="function"&&(_t="UNSAFE_componentWillUpdate"),ot!==null||bt!==null||_t!==null){var Ft=Et.displayName||Et.name,ft=typeof Et.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+Ft+" uses "+ft+" but also contains the following legacy lifecycles:"+(ot!==null?`
  `+ot:"")+(bt!==null?`
  `+bt:"")+(_t!==null?`
  `+_t:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof Et.getDerivedStateFromProps=="function"&&(xt.componentWillMount=j,xt.componentWillReceiveProps=X),typeof xt.getSnapshotBeforeUpdate=="function"){if(typeof xt.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");xt.componentWillUpdate=oe;var Dt=xt.componentDidUpdate;xt.componentDidUpdate=function(At,Jt,gr){var Er=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:gr;Dt.call(this,At,Jt,Er)}}return Et}function ae(Et,xt){if(Et==null)return{};var ot,bt,_t=function(ft,Dt){if(ft==null)return{};var At,Jt,gr={},Er=Object.keys(ft);for(Jt=0;Jt<Er.length;Jt++)At=Er[Jt],Dt.indexOf(At)>=0||(gr[At]=ft[At]);return gr}(Et,xt);if(Object.getOwnPropertySymbols){var Ft=Object.getOwnPropertySymbols(Et);for(bt=0;bt<Ft.length;bt++)ot=Ft[bt],xt.indexOf(ot)>=0||Object.prototype.propertyIsEnumerable.call(Et,ot)&&(_t[ot]=Et[ot])}return _t}function ie(Et){var xt=function(ot){return{}.toString.call(ot).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}(Et);return xt==="number"&&(xt=isNaN(Et)?"nan":(0|Et)!=Et?"float":"integer"),xt}j.__suppressDeprecationWarning=!0,X.__suppressDeprecationWarning=!0,oe.__suppressDeprecationWarning=!0;var Se={scheme:"rjv-default",author:"mac gainor",base00:"rgba(0, 0, 0, 0)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#d33682",base09:"#cb4b16",base0A:"#dc322f",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"#268bd2"},mt={scheme:"rjv-grey",author:"mac gainor",base00:"rgba(1, 1, 1, 0)",base01:"rgba(1, 1, 1, 0.1)",base02:"rgba(0, 0, 0, 0.2)",base03:"rgba(1, 1, 1, 0.3)",base04:"rgba(0, 0, 0, 0.4)",base05:"rgba(1, 1, 1, 0.5)",base06:"rgba(1, 1, 1, 0.6)",base07:"rgba(1, 1, 1, 0.7)",base08:"rgba(1, 1, 1, 0.8)",base09:"rgba(1, 1, 1, 0.8)",base0A:"rgba(1, 1, 1, 0.8)",base0B:"rgba(1, 1, 1, 0.8)",base0C:"rgba(1, 1, 1, 0.8)",base0D:"rgba(1, 1, 1, 0.8)",base0E:"rgba(1, 1, 1, 0.8)",base0F:"rgba(1, 1, 1, 0.8)"},it={white:"#fff",black:"#000",transparent:"rgba(1, 1, 1, 0)",globalFontFamily:"monospace",globalCursor:"default",indentBlockWidth:"5px",braceFontWeight:"bold",braceCursor:"pointer",ellipsisFontSize:"18px",ellipsisLineHeight:"10px",ellipsisCursor:"pointer",keyMargin:"0px 5px",keyLetterSpacing:"0.5px",keyFontStyle:"none",keyBorderRadius:"3px",keyColonWeight:"bold",keyVerticalAlign:"top",keyOpacity:"0.85",keyOpacityHover:"1",keyValPaddingTop:"3px",keyValPaddingBottom:"3px",keyValPaddingRight:"5px",keyValBorderLeft:"1px solid",keyValBorderHover:"2px solid",keyValPaddingHover:"3px 5px 3px 4px",pushedContentMarginLeft:"6px",variableValuePaddingRight:"6px",nullFontSize:"11px",nullFontWeight:"bold",nullPadding:"1px 2px",nullBorderRadius:"3px",nanFontSize:"11px",nanFontWeight:"bold",nanPadding:"1px 2px",nanBorderRadius:"3px",undefinedFontSize:"11px",undefinedFontWeight:"bold",undefinedPadding:"1px 2px",undefinedBorderRadius:"3px",dataTypeFontSize:"11px",dataTypeMarginRight:"4px",datatypeOpacity:"0.8",objectSizeBorderRadius:"3px",objectSizeFontStyle:"italic",objectSizeMargin:"0px 6px 0px 0px",clipboardCursor:"pointer",clipboardCheckMarginLeft:"-12px",metaDataPadding:"0px 0px 0px 10px",arrayGroupMetaPadding:"0px 0px 0px 4px",iconContainerWidth:"17px",tooltipPadding:"4px",editInputMinWidth:"130px",editInputBorderRadius:"2px",editInputPadding:"5px",editInputMarginRight:"4px",editInputFontFamily:"monospace",iconCursor:"pointer",iconFontSize:"15px",iconPaddingRight:"1px",dateValueMarginLeft:"2px",iconMarginRight:"3px",detectedRowPaddingTop:"3px",addKeyCoverBackground:"rgba(255, 255, 255, 0.3)",addKeyCoverPosition:"absolute",addKeyCoverPositionPx:"0px",addKeyModalWidth:"200px",addKeyModalMargin:"auto",addKeyModalPadding:"10px",addKeyModalRadius:"3px"},Tt=_(45),ht=function(Et){var xt=function(ot){return{backgroundColor:ot.base00,ellipsisColor:ot.base09,braceColor:ot.base07,expandedIcon:ot.base0D,collapsedIcon:ot.base0E,keyColor:ot.base07,arrayKeyColor:ot.base0C,objectSize:ot.base04,copyToClipboard:ot.base0F,copyToClipboardCheck:ot.base0D,objectBorder:ot.base02,dataTypes:{boolean:ot.base0E,date:ot.base0D,float:ot.base0B,function:ot.base0D,integer:ot.base0F,string:ot.base09,nan:ot.base08,null:ot.base0A,undefined:ot.base05,regexp:ot.base0A,background:ot.base02},editVariable:{editIcon:ot.base0E,cancelIcon:ot.base09,removeIcon:ot.base09,addIcon:ot.base0E,checkIcon:ot.base0E,background:ot.base01,color:ot.base0A,border:ot.base07},addKeyModal:{background:ot.base05,border:ot.base04,color:ot.base0A,labelColor:ot.base01},validationFailure:{background:ot.base09,iconColor:ot.base01,fontColor:ot.base01}}}(Et);return{"app-container":{fontFamily:it.globalFontFamily,cursor:it.globalCursor,backgroundColor:xt.backgroundColor,position:"relative"},ellipsis:{display:"inline-block",color:xt.ellipsisColor,fontSize:it.ellipsisFontSize,lineHeight:it.ellipsisLineHeight,cursor:it.ellipsisCursor},"brace-row":{display:"inline-block",cursor:"pointer"},brace:{display:"inline-block",cursor:it.braceCursor,fontWeight:it.braceFontWeight,color:xt.braceColor},"expanded-icon":{color:xt.expandedIcon},"collapsed-icon":{color:xt.collapsedIcon},colon:{display:"inline-block",margin:it.keyMargin,color:xt.keyColor,verticalAlign:"top"},objectKeyVal:function(ot,bt){return{style:M({paddingTop:it.keyValPaddingTop,paddingRight:it.keyValPaddingRight,paddingBottom:it.keyValPaddingBottom,borderLeft:it.keyValBorderLeft+" "+xt.objectBorder,":hover":{paddingLeft:bt.paddingLeft-1+"px",borderLeft:it.keyValBorderHover+" "+xt.objectBorder}},bt)}},"object-key-val-no-border":{padding:it.keyValPadding},"pushed-content":{marginLeft:it.pushedContentMarginLeft},variableValue:function(ot,bt){return{style:M({display:"inline-block",paddingRight:it.variableValuePaddingRight,position:"relative"},bt)}},"object-name":{display:"inline-block",color:xt.keyColor,letterSpacing:it.keyLetterSpacing,fontStyle:it.keyFontStyle,verticalAlign:it.keyVerticalAlign,opacity:it.keyOpacity,":hover":{opacity:it.keyOpacityHover}},"array-key":{display:"inline-block",color:xt.arrayKeyColor,letterSpacing:it.keyLetterSpacing,fontStyle:it.keyFontStyle,verticalAlign:it.keyVerticalAlign,opacity:it.keyOpacity,":hover":{opacity:it.keyOpacityHover}},"object-size":{color:xt.objectSize,borderRadius:it.objectSizeBorderRadius,fontStyle:it.objectSizeFontStyle,margin:it.objectSizeMargin,cursor:"default"},"data-type-label":{fontSize:it.dataTypeFontSize,marginRight:it.dataTypeMarginRight,opacity:it.datatypeOpacity},boolean:{display:"inline-block",color:xt.dataTypes.boolean},date:{display:"inline-block",color:xt.dataTypes.date},"date-value":{marginLeft:it.dateValueMarginLeft},float:{display:"inline-block",color:xt.dataTypes.float},function:{display:"inline-block",color:xt.dataTypes.function,cursor:"pointer",whiteSpace:"pre-line"},"function-value":{fontStyle:"italic"},integer:{display:"inline-block",color:xt.dataTypes.integer},string:{display:"inline-block",color:xt.dataTypes.string},nan:{display:"inline-block",color:xt.dataTypes.nan,fontSize:it.nanFontSize,fontWeight:it.nanFontWeight,backgroundColor:xt.dataTypes.background,padding:it.nanPadding,borderRadius:it.nanBorderRadius},null:{display:"inline-block",color:xt.dataTypes.null,fontSize:it.nullFontSize,fontWeight:it.nullFontWeight,backgroundColor:xt.dataTypes.background,padding:it.nullPadding,borderRadius:it.nullBorderRadius},undefined:{display:"inline-block",color:xt.dataTypes.undefined,fontSize:it.undefinedFontSize,padding:it.undefinedPadding,borderRadius:it.undefinedBorderRadius,backgroundColor:xt.dataTypes.background},regexp:{display:"inline-block",color:xt.dataTypes.regexp},"copy-to-clipboard":{cursor:it.clipboardCursor},"copy-icon":{color:xt.copyToClipboard,fontSize:it.iconFontSize,marginRight:it.iconMarginRight,verticalAlign:"top"},"copy-icon-copied":{color:xt.copyToClipboardCheck,marginLeft:it.clipboardCheckMarginLeft},"array-group-meta-data":{display:"inline-block",padding:it.arrayGroupMetaPadding},"object-meta-data":{display:"inline-block",padding:it.metaDataPadding},"icon-container":{display:"inline-block",width:it.iconContainerWidth},tooltip:{padding:it.tooltipPadding},removeVarIcon:{verticalAlign:"top",display:"inline-block",color:xt.editVariable.removeIcon,cursor:it.iconCursor,fontSize:it.iconFontSize,marginRight:it.iconMarginRight},addVarIcon:{verticalAlign:"top",display:"inline-block",color:xt.editVariable.addIcon,cursor:it.iconCursor,fontSize:it.iconFontSize,marginRight:it.iconMarginRight},editVarIcon:{verticalAlign:"top",display:"inline-block",color:xt.editVariable.editIcon,cursor:it.iconCursor,fontSize:it.iconFontSize,marginRight:it.iconMarginRight},"edit-icon-container":{display:"inline-block",verticalAlign:"top"},"check-icon":{display:"inline-block",cursor:it.iconCursor,color:xt.editVariable.checkIcon,fontSize:it.iconFontSize,paddingRight:it.iconPaddingRight},"cancel-icon":{display:"inline-block",cursor:it.iconCursor,color:xt.editVariable.cancelIcon,fontSize:it.iconFontSize,paddingRight:it.iconPaddingRight},"edit-input":{display:"inline-block",minWidth:it.editInputMinWidth,borderRadius:it.editInputBorderRadius,backgroundColor:xt.editVariable.background,color:xt.editVariable.color,padding:it.editInputPadding,marginRight:it.editInputMarginRight,fontFamily:it.editInputFontFamily},"detected-row":{paddingTop:it.detectedRowPaddingTop},"key-modal-request":{position:it.addKeyCoverPosition,top:it.addKeyCoverPositionPx,left:it.addKeyCoverPositionPx,right:it.addKeyCoverPositionPx,bottom:it.addKeyCoverPositionPx,backgroundColor:it.addKeyCoverBackground},"key-modal":{width:it.addKeyModalWidth,backgroundColor:xt.addKeyModal.background,marginLeft:it.addKeyModalMargin,marginRight:it.addKeyModalMargin,padding:it.addKeyModalPadding,borderRadius:it.addKeyModalRadius,marginTop:"15px",position:"relative"},"key-modal-label":{color:xt.addKeyModal.labelColor,marginLeft:"2px",marginBottom:"5px",fontSize:"11px"},"key-modal-input-container":{overflow:"hidden"},"key-modal-input":{width:"100%",padding:"3px 6px",fontFamily:"monospace",color:xt.addKeyModal.color,border:"none",boxSizing:"border-box",borderRadius:"2px"},"key-modal-cancel":{backgroundColor:xt.editVariable.removeIcon,position:"absolute",top:"0px",right:"0px",borderRadius:"0px 3px 0px 3px",cursor:"pointer"},"key-modal-cancel-icon":{color:xt.addKeyModal.labelColor,fontSize:it.iconFontSize,transform:"rotate(45deg)"},"key-modal-submit":{color:xt.editVariable.addIcon,fontSize:it.iconFontSize,position:"absolute",right:"2px",top:"3px",cursor:"pointer"},"function-ellipsis":{display:"inline-block",color:xt.ellipsisColor,fontSize:it.ellipsisFontSize,lineHeight:it.ellipsisLineHeight,cursor:it.ellipsisCursor},"validation-failure":{float:"right",padding:"3px 6px",borderRadius:"2px",cursor:"pointer",color:xt.validationFailure.fontColor,backgroundColor:xt.validationFailure.background},"validation-failure-label":{marginRight:"6px"},"validation-failure-clear":{position:"relative",verticalAlign:"top",cursor:"pointer",color:xt.validationFailure.iconColor,fontSize:it.iconFontSize,transform:"rotate(45deg)"}}};function Ye(Et,xt,ot){return Et||console.error("theme has not been set"),function(bt){var _t=Se;return bt!==!1&&bt!=="none"||(_t=mt),Object(Tt.createStyling)(ht,{defaultBase16:_t})(bt)}(Et)(xt,ot)}var St=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=(bt.rjvId,bt.type_name),Ft=bt.displayDataTypes,ft=bt.theme;return Ft?B.a.createElement("span",Object.assign({className:"data-type-label"},Ye(ft,"data-type-label")),_t):null}}]),ot}(B.a.PureComponent),$t=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props;return B.a.createElement("div",Ye(bt.theme,"boolean"),B.a.createElement(St,Object.assign({type_name:"bool"},bt)),bt.value?"true":"false")}}]),ot}(B.a.PureComponent),Lt=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props;return B.a.createElement("div",Ye(bt.theme,"date"),B.a.createElement(St,Object.assign({type_name:"date"},bt)),B.a.createElement("span",Object.assign({className:"date-value"},Ye(bt.theme,"date-value")),bt.value.toLocaleTimeString("en-us",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})))}}]),ot}(B.a.PureComponent),Mt=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props;return B.a.createElement("div",Ye(bt.theme,"float"),B.a.createElement(St,Object.assign({type_name:"float"},bt)),this.props.value)}}]),ot}(B.a.PureComponent);function jt(Et,xt){(xt==null||xt>Et.length)&&(xt=Et.length);for(var ot=0,bt=new Array(xt);ot<xt;ot++)bt[ot]=Et[ot];return bt}function Qe(Et,xt){if(Et){if(typeof Et=="string")return jt(Et,xt);var ot=Object.prototype.toString.call(Et).slice(8,-1);return ot==="Object"&&Et.constructor&&(ot=Et.constructor.name),ot==="Map"||ot==="Set"?Array.from(Et):ot==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ot)?jt(Et,xt):void 0}}function Pe(Et,xt){var ot;if(typeof Symbol>"u"||Et[Symbol.iterator]==null){if(Array.isArray(Et)||(ot=Qe(Et))||xt&&Et&&typeof Et.length=="number"){ot&&(Et=ot);var bt=0,_t=function(){};return{s:_t,n:function(){return bt>=Et.length?{done:!0}:{done:!1,value:Et[bt++]}},e:function(At){throw At},f:_t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ft,ft=!0,Dt=!1;return{s:function(){ot=Et[Symbol.iterator]()},n:function(){var At=ot.next();return ft=At.done,At},e:function(At){Dt=!0,Ft=At},f:function(){try{ft||ot.return==null||ot.return()}finally{if(Dt)throw Ft}}}}function Ee(Et){return function(xt){if(Array.isArray(xt))return jt(xt)}(Et)||function(xt){if(typeof Symbol<"u"&&Symbol.iterator in Object(xt))return Array.from(xt)}(Et)||Qe(Et)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var nt=_(46),st=new(_(47)).Dispatcher,rt=new(function(Et){ee(ot,Et);var xt=G(ot);function ot(){var bt;P(this,ot);for(var _t=arguments.length,Ft=new Array(_t),ft=0;ft<_t;ft++)Ft[ft]=arguments[ft];return(bt=xt.call.apply(xt,[this].concat(Ft))).objects={},bt.set=function(Dt,At,Jt,gr){bt.objects[Dt]===void 0&&(bt.objects[Dt]={}),bt.objects[Dt][At]===void 0&&(bt.objects[Dt][At]={}),bt.objects[Dt][At][Jt]=gr},bt.get=function(Dt,At,Jt,gr){return bt.objects[Dt]===void 0||bt.objects[Dt][At]===void 0||bt.objects[Dt][At][Jt]==null?gr:bt.objects[Dt][At][Jt]},bt.handleAction=function(Dt){var At=Dt.rjvId,Jt=Dt.data;switch(Dt.name){case"RESET":bt.emit("reset-"+At);break;case"VARIABLE_UPDATED":Dt.data.updated_src=bt.updateSrc(At,Jt),bt.set(At,"action","variable-update",M(M({},Jt),{},{type:"variable-edited"})),bt.emit("variable-update-"+At);break;case"VARIABLE_REMOVED":Dt.data.updated_src=bt.updateSrc(At,Jt),bt.set(At,"action","variable-update",M(M({},Jt),{},{type:"variable-removed"})),bt.emit("variable-update-"+At);break;case"VARIABLE_ADDED":Dt.data.updated_src=bt.updateSrc(At,Jt),bt.set(At,"action","variable-update",M(M({},Jt),{},{type:"variable-added"})),bt.emit("variable-update-"+At);break;case"ADD_VARIABLE_KEY_REQUEST":bt.set(At,"action","new-key-request",Jt),bt.emit("add-key-request-"+At)}},bt.updateSrc=function(Dt,At){var Jt=At.name,gr=At.namespace,Er=At.new_value,Cr=(At.existing_value,At.variable_removed);gr.shift();var Ur,_r=bt.get(Dt,"global","src"),jr=bt.deepCopy(_r,Ee(gr)),nn=jr,Or=Pe(gr);try{for(Or.s();!(Ur=Or.n()).done;)nn=nn[Ur.value]}catch(cn){Or.e(cn)}finally{Or.f()}return Cr?ie(nn)=="array"?nn.splice(Jt,1):delete nn[Jt]:Jt!==null?nn[Jt]=Er:jr=Er,bt.set(Dt,"global","src",jr),jr},bt.deepCopy=function(Dt,At){var Jt,gr=ie(Dt),Er=At.shift();return gr=="array"?Jt=Ee(Dt):gr=="object"&&(Jt=M({},Dt)),Er!==void 0&&(Jt[Er]=bt.deepCopy(Dt[Er],At)),Jt},bt}return ot}(nt.EventEmitter));st.register(rt.handleAction.bind(rt));var tt=rt,vt=function(Et){ee(ot,Et);var xt=G(ot);function ot(bt){var _t;return P(this,ot),(_t=xt.call(this,bt)).toggleCollapsed=function(){_t.setState({collapsed:!_t.state.collapsed},function(){tt.set(_t.props.rjvId,_t.props.namespace,"collapsed",_t.state.collapsed)})},_t.getFunctionDisplay=function(Ft){var ft=Y(_t).props;return Ft?B.a.createElement("span",null,_t.props.value.toString().slice(9,-1).replace(/\{[\s\S]+/,""),B.a.createElement("span",{className:"function-collapsed",style:{fontWeight:"bold"}},B.a.createElement("span",null,"{"),B.a.createElement("span",Ye(ft.theme,"ellipsis"),"..."),B.a.createElement("span",null,"}"))):_t.props.value.toString().slice(9,-1)},_t.state={collapsed:tt.get(bt.rjvId,bt.namespace,"collapsed",!0)},_t}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=this.state.collapsed;return B.a.createElement("div",Ye(bt.theme,"function"),B.a.createElement(St,Object.assign({type_name:"function"},bt)),B.a.createElement("span",Object.assign({},Ye(bt.theme,"function-value"),{className:"rjv-function-container",onClick:this.toggleCollapsed}),this.getFunctionDisplay(_t)))}}]),ot}(B.a.PureComponent),It=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){return B.a.createElement("div",Ye(this.props.theme,"nan"),"NaN")}}]),ot}(B.a.PureComponent),Vt=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){return B.a.createElement("div",Ye(this.props.theme,"null"),"NULL")}}]),ot}(B.a.PureComponent),wt=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props;return B.a.createElement("div",Ye(bt.theme,"integer"),B.a.createElement(St,Object.assign({type_name:"int"},bt)),this.props.value)}}]),ot}(B.a.PureComponent),kt=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props;return B.a.createElement("div",Ye(bt.theme,"regexp"),B.a.createElement(St,Object.assign({type_name:"regexp"},bt)),this.props.value.toString())}}]),ot}(B.a.PureComponent),Zt=function(Et){ee(ot,Et);var xt=G(ot);function ot(bt){var _t;return P(this,ot),(_t=xt.call(this,bt)).toggleCollapsed=function(){_t.setState({collapsed:!_t.state.collapsed},function(){tt.set(_t.props.rjvId,_t.props.namespace,"collapsed",_t.state.collapsed)})},_t.state={collapsed:tt.get(bt.rjvId,bt.namespace,"collapsed",!0)},_t}return H(ot,[{key:"render",value:function(){this.state.collapsed;var bt=this.props,_t=bt.collapseStringsAfterLength,Ft=bt.theme,ft=bt.value,Dt={style:{cursor:"default"}};return ie(_t)==="integer"&&ft.length>_t&&(Dt.style.cursor="pointer",this.state.collapsed&&(ft=B.a.createElement("span",null,ft.substring(0,_t),B.a.createElement("span",Ye(Ft,"ellipsis")," ...")))),B.a.createElement("div",Ye(Ft,"string"),B.a.createElement(St,Object.assign({type_name:"string"},bt)),B.a.createElement("span",Object.assign({className:"string-value"},Dt,{onClick:this.toggleCollapsed}),'"',ft,'"'))}}]),ot}(B.a.PureComponent),Qt=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){return B.a.createElement("div",Ye(this.props.theme,"undefined"),"undefined")}}]),ot}(B.a.PureComponent);function Z(){return(Z=Object.assign||function(Et){for(var xt=1;xt<arguments.length;xt++){var ot=arguments[xt];for(var bt in ot)Object.prototype.hasOwnProperty.call(ot,bt)&&(Et[bt]=ot[bt])}return Et}).apply(this,arguments)}var z=te.useLayoutEffect,K=function(Et){var xt=Object(te.useRef)(Et);return z(function(){xt.current=Et}),xt},ne=function(Et,xt){typeof Et!="function"?Et.current=xt:Et(xt)},Ae=function(Et,xt){var ot=Object(te.useRef)();return Object(te.useCallback)(function(bt){Et.current=bt,ot.current&&ne(ot.current,null),ot.current=xt,xt&&ne(xt,bt)},[xt])},ut={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Rt=function(Et){Object.keys(ut).forEach(function(xt){Et.style.setProperty(xt,ut[xt],"important")})},yt=null,lt=function(){},at=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],ze=!!document.documentElement.currentStyle,ct=function(Et,xt){var ot=Et.cacheMeasurements,bt=Et.maxRows,_t=Et.minRows,Ft=Et.onChange,ft=Ft===void 0?lt:Ft,Dt=Et.onHeightChange,At=Dt===void 0?lt:Dt,Jt=function(Or,cn){if(Or==null)return{};var xn,Nn,jn={},On=Object.keys(Or);for(Nn=0;Nn<On.length;Nn++)xn=On[Nn],cn.indexOf(xn)>=0||(jn[xn]=Or[xn]);return jn}(Et,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),gr,Er=Jt.value!==void 0,Cr=Object(te.useRef)(null),Ur=Ae(Cr,xt),_r=Object(te.useRef)(0),jr=Object(te.useRef)(),nn=function(){var Or=Cr.current,cn=ot&&jr.current?jr.current:function(On){var Wn=window.getComputedStyle(On);if(Wn===null)return null;var Bn,xe=(Bn=Wn,at.reduce(function(Ct,Pt){return Ct[Pt]=Bn[Pt],Ct},{})),et=xe.boxSizing;return et===""?null:(ze&&et==="border-box"&&(xe.width=parseFloat(xe.width)+parseFloat(xe.borderRightWidth)+parseFloat(xe.borderLeftWidth)+parseFloat(xe.paddingRight)+parseFloat(xe.paddingLeft)+"px"),{sizingStyle:xe,paddingSize:parseFloat(xe.paddingBottom)+parseFloat(xe.paddingTop),borderSize:parseFloat(xe.borderBottomWidth)+parseFloat(xe.borderTopWidth)})}(Or);if(cn){jr.current=cn;var xn=function(On,Wn,Bn,xe){Bn===void 0&&(Bn=1),xe===void 0&&(xe=1/0),yt||((yt=document.createElement("textarea")).setAttribute("tab-index","-1"),yt.setAttribute("aria-hidden","true"),Rt(yt)),yt.parentNode===null&&document.body.appendChild(yt);var et=On.paddingSize,Ct=On.borderSize,Pt=On.sizingStyle,Bt=Pt.boxSizing;Object.keys(Pt).forEach(function(Wt){var zt=Wt;yt.style[zt]=Pt[zt]}),Rt(yt),yt.value=Wn;var Ut=function(Wt,zt){var sr=Wt.scrollHeight;return zt.sizingStyle.boxSizing==="border-box"?sr+zt.borderSize:sr-zt.paddingSize}(yt,On);yt.value="x";var Yt=yt.scrollHeight-et,qt=Yt*Bn;Bt==="border-box"&&(qt=qt+et+Ct),Ut=Math.max(qt,Ut);var Nt=Yt*xe;return Bt==="border-box"&&(Nt=Nt+et+Ct),[Ut=Math.min(Nt,Ut),Yt]}(cn,Or.value||Or.placeholder||"x",_t,bt),Nn=xn[0],jn=xn[1];_r.current!==Nn&&(_r.current=Nn,Or.style.setProperty("height",Nn+"px","important"),At(Nn,{rowHeight:jn}))}};return Object(te.useLayoutEffect)(nn),gr=K(nn),Object(te.useLayoutEffect)(function(){var Or=function(cn){gr.current(cn)};return window.addEventListener("resize",Or),function(){window.removeEventListener("resize",Or)}},[]),Object(te.createElement)("textarea",Z({},Jt,{onChange:function(Or){Er||nn(),ft(Or)},ref:Ur}))},Ze=Object(te.forwardRef)(ct);function Ot(Et){Et=Et.trim();try{if((Et=JSON.stringify(JSON.parse(Et)))[0]==="[")return Ht("array",JSON.parse(Et));if(Et[0]==="{")return Ht("object",JSON.parse(Et));if(Et.match(/\-?\d+\.\d+/)&&Et.match(/\-?\d+\.\d+/)[0]===Et)return Ht("float",parseFloat(Et));if(Et.match(/\-?\d+e-\d+/)&&Et.match(/\-?\d+e-\d+/)[0]===Et)return Ht("float",Number(Et));if(Et.match(/\-?\d+/)&&Et.match(/\-?\d+/)[0]===Et)return Ht("integer",parseInt(Et));if(Et.match(/\-?\d+e\+\d+/)&&Et.match(/\-?\d+e\+\d+/)[0]===Et)return Ht("integer",Number(Et))}catch{}switch(Et=Et.toLowerCase()){case"undefined":return Ht("undefined",void 0);case"nan":return Ht("nan",NaN);case"null":return Ht("null",null);case"true":return Ht("boolean",!0);case"false":return Ht("boolean",!1);default:if(Et=Date.parse(Et))return Ht("date",new Date(Et))}return Ht(!1,null)}function Ht(Et,xt){return{type:Et,value:xt}}var Xt=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.style,Ft=ae(bt,["style"]);return B.a.createElement("span",Ft,B.a.createElement("svg",Object.assign({},Gt(_t),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),B.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,13H17V11H7"})))}}]),ot}(B.a.PureComponent),ur=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.style,Ft=ae(bt,["style"]);return B.a.createElement("span",Ft,B.a.createElement("svg",Object.assign({},Gt(_t),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),B.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})))}}]),ot}(B.a.PureComponent),cr=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.style,Ft=ae(bt,["style"]),ft=Gt(_t).style;return B.a.createElement("span",Ft,B.a.createElement("svg",{fill:ft.color,width:ft.height,height:ft.width,style:ft,viewBox:"0 0 1792 1792"},B.a.createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-832q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h832q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}]),ot}(B.a.PureComponent),A=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.style,Ft=ae(bt,["style"]),ft=Gt(_t).style;return B.a.createElement("span",Ft,B.a.createElement("svg",{fill:ft.color,width:ft.height,height:ft.width,style:ft,viewBox:"0 0 1792 1792"},B.a.createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-352v352q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23v-352h-352q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h352v-352q0-14 9-23t23-9h64q14 0 23 9t9 23v352h352q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}]),ot}(B.a.PureComponent),re=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.style,Ft=ae(bt,["style"]);return B.a.createElement("span",Ft,B.a.createElement("svg",{style:M(M({},Gt(_t).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},B.a.createElement("path",{d:"M0 14l6-6-6-6z"})))}}]),ot}(B.a.PureComponent),Ce=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.style,Ft=ae(bt,["style"]);return B.a.createElement("span",Ft,B.a.createElement("svg",{style:M(M({},Gt(_t).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},B.a.createElement("path",{d:"M0 5l6 6 6-6z"})))}}]),ot}(B.a.PureComponent),ve=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.style,Ft=ae(bt,["style"]);return B.a.createElement("span",Ft,B.a.createElement("svg",Object.assign({},Gt(_t),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),B.a.createElement("g",null,B.a.createElement("path",{d:"m30 35h-25v-22.5h25v7.5h2.5v-12.5c0-1.4-1.1-2.5-2.5-2.5h-7.5c0-2.8-2.2-5-5-5s-5 2.2-5 5h-7.5c-1.4 0-2.5 1.1-2.5 2.5v27.5c0 1.4 1.1 2.5 2.5 2.5h25c1.4 0 2.5-1.1 2.5-2.5v-5h-2.5v5z m-20-27.5h2.5s2.5-1.1 2.5-2.5 1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5 1.3 2.5 2.5 2.5h2.5s2.5 1.1 2.5 2.5h-20c0-1.5 1.1-2.5 2.5-2.5z m-2.5 20h5v-2.5h-5v2.5z m17.5-5v-5l-10 7.5 10 7.5v-5h12.5v-5h-12.5z m-17.5 10h7.5v-2.5h-7.5v2.5z m12.5-17.5h-12.5v2.5h12.5v-2.5z m-7.5 5h-5v2.5h5v-2.5z"}))))}}]),ot}(B.a.PureComponent),Oe=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.style,Ft=ae(bt,["style"]);return B.a.createElement("span",Ft,B.a.createElement("svg",Object.assign({},Gt(_t),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),B.a.createElement("g",null,B.a.createElement("path",{d:"m28.6 25q0-0.5-0.4-1l-4-4 4-4q0.4-0.5 0.4-1 0-0.6-0.4-1.1l-2-2q-0.4-0.4-1-0.4-0.6 0-1 0.4l-4.1 4.1-4-4.1q-0.4-0.4-1-0.4-0.6 0-1 0.4l-2 2q-0.5 0.5-0.5 1.1 0 0.5 0.5 1l4 4-4 4q-0.5 0.5-0.5 1 0 0.7 0.5 1.1l2 2q0.4 0.4 1 0.4 0.6 0 1-0.4l4-4.1 4.1 4.1q0.4 0.4 1 0.4 0.6 0 1-0.4l2-2q0.4-0.4 0.4-1z m8.7-5q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),ot}(B.a.PureComponent),pt=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.style,Ft=ae(bt,["style"]);return B.a.createElement("span",Ft,B.a.createElement("svg",Object.assign({},Gt(_t),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),B.a.createElement("g",null,B.a.createElement("path",{d:"m30.1 21.4v-2.8q0-0.6-0.4-1t-1-0.5h-5.7v-5.7q0-0.6-0.4-1t-1-0.4h-2.9q-0.6 0-1 0.4t-0.4 1v5.7h-5.7q-0.6 0-1 0.5t-0.5 1v2.8q0 0.6 0.5 1t1 0.5h5.7v5.7q0 0.5 0.4 1t1 0.4h2.9q0.6 0 1-0.4t0.4-1v-5.7h5.7q0.6 0 1-0.5t0.4-1z m7.2-1.4q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),ot}(B.a.PureComponent),Kt=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.style,Ft=ae(bt,["style"]);return B.a.createElement("span",Ft,B.a.createElement("svg",Object.assign({},Gt(_t),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),B.a.createElement("g",null,B.a.createElement("path",{d:"m31.6 21.6h-10v10h-3.2v-10h-10v-3.2h10v-10h3.2v10h10v3.2z"}))))}}]),ot}(B.a.PureComponent),rr=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.style,Ft=ae(bt,["style"]);return B.a.createElement("span",Ft,B.a.createElement("svg",Object.assign({},Gt(_t),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),B.a.createElement("g",null,B.a.createElement("path",{d:"m19.8 26.4l2.6-2.6-3.4-3.4-2.6 2.6v1.3h2.2v2.1h1.2z m9.8-16q-0.3-0.4-0.7 0l-7.8 7.8q-0.4 0.4 0 0.7t0.7 0l7.8-7.8q0.4-0.4 0-0.7z m1.8 13.2v4.3q0 2.6-1.9 4.5t-4.5 1.9h-18.6q-2.6 0-4.5-1.9t-1.9-4.5v-18.6q0-2.7 1.9-4.6t4.5-1.8h18.6q1.4 0 2.6 0.5 0.3 0.2 0.4 0.5 0.1 0.4-0.2 0.7l-1.1 1.1q-0.3 0.3-0.7 0.1-0.5-0.1-1-0.1h-18.6q-1.4 0-2.5 1.1t-1 2.5v18.6q0 1.4 1 2.5t2.5 1h18.6q1.5 0 2.5-1t1.1-2.5v-2.9q0-0.2 0.2-0.4l1.4-1.5q0.3-0.3 0.8-0.1t0.4 0.6z m-2.1-16.5l6.4 6.5-15 15h-6.4v-6.5z m9.9 3l-2.1 2-6.4-6.4 2.1-2q0.6-0.7 1.5-0.7t1.5 0.7l3.4 3.4q0.6 0.6 0.6 1.5t-0.6 1.5z"}))))}}]),ot}(B.a.PureComponent),dr=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.style,Ft=ae(bt,["style"]);return B.a.createElement("span",Ft,B.a.createElement("svg",Object.assign({},Gt(_t),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),B.a.createElement("g",null,B.a.createElement("path",{d:"m31.7 16.4q0-0.6-0.4-1l-2.1-2.1q-0.4-0.4-1-0.4t-1 0.4l-9.1 9.1-5-5q-0.5-0.4-1-0.4t-1 0.4l-2.1 2q-0.4 0.4-0.4 1 0 0.6 0.4 1l8.1 8.1q0.4 0.4 1 0.4 0.6 0 1-0.4l12.2-12.1q0.4-0.4 0.4-1z m5.6 3.6q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),ot}(B.a.PureComponent);function Gt(Et){return Et||(Et={}),{style:M(M({verticalAlign:"middle"},Et),{},{color:Et.color?Et.color:"#000000",height:"1em",width:"1em"})}}var or=function(Et){ee(ot,Et);var xt=G(ot);function ot(bt){var _t;return P(this,ot),(_t=xt.call(this,bt)).copiedTimer=null,_t.handleCopy=function(){var Ft=document.createElement("textarea"),ft=_t.props,Dt=ft.clickCallback,At=ft.src,Jt=ft.namespace;Ft.innerHTML=JSON.stringify(_t.clipboardValue(At),null,"  "),document.body.appendChild(Ft),Ft.select(),document.execCommand("copy"),document.body.removeChild(Ft),_t.copiedTimer=setTimeout(function(){_t.setState({copied:!1})},5500),_t.setState({copied:!0},function(){typeof Dt=="function"&&Dt({src:At,namespace:Jt,name:Jt[Jt.length-1]})})},_t.getClippyIcon=function(){var Ft=_t.props.theme;return _t.state.copied?B.a.createElement("span",null,B.a.createElement(ve,Object.assign({className:"copy-icon"},Ye(Ft,"copy-icon"))),B.a.createElement("span",Ye(Ft,"copy-icon-copied"),"\u2714")):B.a.createElement(ve,Object.assign({className:"copy-icon"},Ye(Ft,"copy-icon")))},_t.clipboardValue=function(Ft){switch(ie(Ft)){case"function":case"regexp":return Ft.toString();default:return Ft}},_t.state={copied:!1},_t}return H(ot,[{key:"componentWillUnmount",value:function(){this.copiedTimer&&(clearTimeout(this.copiedTimer),this.copiedTimer=null)}},{key:"render",value:function(){var bt=this.props,_t=(bt.src,bt.theme),Ft=bt.hidden,ft=bt.rowHovered,Dt=Ye(_t,"copy-to-clipboard").style,At="inline";return Ft&&(At="none"),B.a.createElement("span",{className:"copy-to-clipboard-container",title:"Copy to clipboard",style:{verticalAlign:"top",display:ft?"inline-block":"none"}},B.a.createElement("span",{style:M(M({},Dt),{},{display:At}),onClick:this.handleCopy},this.getClippyIcon()))}}]),ot}(B.a.PureComponent),yr=function(Et){ee(ot,Et);var xt=G(ot);function ot(bt){var _t;return P(this,ot),(_t=xt.call(this,bt)).getEditIcon=function(){var Ft=_t.props,ft=Ft.variable,Dt=Ft.theme;return B.a.createElement("div",{className:"click-to-edit",style:{verticalAlign:"top",display:_t.state.hovered?"inline-block":"none"}},B.a.createElement(rr,Object.assign({className:"click-to-edit-icon"},Ye(Dt,"editVarIcon"),{onClick:function(){_t.prepopInput(ft)}})))},_t.prepopInput=function(Ft){if(_t.props.onEdit!==!1){var ft=function(At){var Jt;switch(ie(At)){case"undefined":Jt="undefined";break;case"nan":Jt="NaN";break;case"string":Jt=At;break;case"date":case"function":case"regexp":Jt=At.toString();break;default:try{Jt=JSON.stringify(At,null,"  ")}catch{Jt=""}}return Jt}(Ft.value),Dt=Ot(ft);_t.setState({editMode:!0,editValue:ft,parsedInput:{type:Dt.type,value:Dt.value}})}},_t.getRemoveIcon=function(){var Ft=_t.props,ft=Ft.variable,Dt=Ft.namespace,At=Ft.theme,Jt=Ft.rjvId;return B.a.createElement("div",{className:"click-to-remove",style:{verticalAlign:"top",display:_t.state.hovered?"inline-block":"none"}},B.a.createElement(Oe,Object.assign({className:"click-to-remove-icon"},Ye(At,"removeVarIcon"),{onClick:function(){st.dispatch({name:"VARIABLE_REMOVED",rjvId:Jt,data:{name:ft.name,namespace:Dt,existing_value:ft.value,variable_removed:!0}})}})))},_t.getValue=function(Ft,ft){var Dt=!ft&&Ft.type,At=Y(_t).props;switch(Dt){case!1:return _t.getEditInput();case"string":return B.a.createElement(Zt,Object.assign({value:Ft.value},At));case"integer":return B.a.createElement(wt,Object.assign({value:Ft.value},At));case"float":return B.a.createElement(Mt,Object.assign({value:Ft.value},At));case"boolean":return B.a.createElement($t,Object.assign({value:Ft.value},At));case"function":return B.a.createElement(vt,Object.assign({value:Ft.value},At));case"null":return B.a.createElement(Vt,At);case"nan":return B.a.createElement(It,At);case"undefined":return B.a.createElement(Qt,At);case"date":return B.a.createElement(Lt,Object.assign({value:Ft.value},At));case"regexp":return B.a.createElement(kt,Object.assign({value:Ft.value},At));default:return B.a.createElement("div",{className:"object-value"},JSON.stringify(Ft.value))}},_t.getEditInput=function(){var Ft=_t.props.theme,ft=_t.state.editValue;return B.a.createElement("div",null,B.a.createElement(Ze,Object.assign({type:"text",inputRef:function(Dt){return Dt&&Dt.focus()},value:ft,className:"variable-editor",onChange:function(Dt){var At=Dt.target.value,Jt=Ot(At);_t.setState({editValue:At,parsedInput:{type:Jt.type,value:Jt.value}})},onKeyDown:function(Dt){switch(Dt.key){case"Escape":_t.setState({editMode:!1,editValue:""});break;case"Enter":(Dt.ctrlKey||Dt.metaKey)&&_t.submitEdit(!0)}Dt.stopPropagation()},placeholder:"update this value",minRows:2},Ye(Ft,"edit-input"))),B.a.createElement("div",Ye(Ft,"edit-icon-container"),B.a.createElement(Oe,Object.assign({className:"edit-cancel"},Ye(Ft,"cancel-icon"),{onClick:function(){_t.setState({editMode:!1,editValue:""})}})),B.a.createElement(dr,Object.assign({className:"edit-check string-value"},Ye(Ft,"check-icon"),{onClick:function(){_t.submitEdit()}})),B.a.createElement("div",null,_t.showDetected())))},_t.submitEdit=function(Ft){var ft=_t.props,Dt=ft.variable,At=ft.namespace,Jt=ft.rjvId,gr=_t.state,Er=gr.editValue,Cr=gr.parsedInput,Ur=Er;Ft&&Cr.type&&(Ur=Cr.value),_t.setState({editMode:!1}),st.dispatch({name:"VARIABLE_UPDATED",rjvId:Jt,data:{name:Dt.name,namespace:At,existing_value:Dt.value,new_value:Ur,variable_removed:!1}})},_t.showDetected=function(){var Ft=_t.props,ft=Ft.theme,Dt=(Ft.variable,Ft.namespace,Ft.rjvId,_t.state.parsedInput),At=(Dt.type,Dt.value,_t.getDetectedInput());if(At)return B.a.createElement("div",null,B.a.createElement("div",Ye(ft,"detected-row"),At,B.a.createElement(dr,{className:"edit-check detected",style:M({verticalAlign:"top",paddingLeft:"3px"},Ye(ft,"check-icon").style),onClick:function(){_t.submitEdit(!0)}})))},_t.getDetectedInput=function(){var Ft=_t.state.parsedInput,ft=Ft.type,Dt=Ft.value,At=Y(_t).props,Jt=At.theme;if(ft!==!1)switch(ft.toLowerCase()){case"object":return B.a.createElement("span",null,B.a.createElement("span",{style:M(M({},Ye(Jt,"brace").style),{},{cursor:"default"})},"{"),B.a.createElement("span",{style:M(M({},Ye(Jt,"ellipsis").style),{},{cursor:"default"})},"..."),B.a.createElement("span",{style:M(M({},Ye(Jt,"brace").style),{},{cursor:"default"})},"}"));case"array":return B.a.createElement("span",null,B.a.createElement("span",{style:M(M({},Ye(Jt,"brace").style),{},{cursor:"default"})},"["),B.a.createElement("span",{style:M(M({},Ye(Jt,"ellipsis").style),{},{cursor:"default"})},"..."),B.a.createElement("span",{style:M(M({},Ye(Jt,"brace").style),{},{cursor:"default"})},"]"));case"string":return B.a.createElement(Zt,Object.assign({value:Dt},At));case"integer":return B.a.createElement(wt,Object.assign({value:Dt},At));case"float":return B.a.createElement(Mt,Object.assign({value:Dt},At));case"boolean":return B.a.createElement($t,Object.assign({value:Dt},At));case"function":return B.a.createElement(vt,Object.assign({value:Dt},At));case"null":return B.a.createElement(Vt,At);case"nan":return B.a.createElement(It,At);case"undefined":return B.a.createElement(Qt,At);case"date":return B.a.createElement(Lt,Object.assign({value:new Date(Dt)},At))}},_t.state={editMode:!1,editValue:"",hovered:!1,renameKey:!1,parsedInput:{type:!1,value:null}},_t}return H(ot,[{key:"render",value:function(){var bt=this,_t=this.props,Ft=_t.variable,ft=_t.singleIndent,Dt=_t.type,At=_t.theme,Jt=_t.namespace,gr=_t.indentWidth,Er=_t.enableClipboard,Cr=_t.onEdit,Ur=_t.onDelete,_r=_t.onSelect,jr=_t.displayArrayKey,nn=_t.quotesOnKeys,Or=this.state.editMode;return B.a.createElement("div",Object.assign({},Ye(At,"objectKeyVal",{paddingLeft:gr*ft}),{onMouseEnter:function(){return bt.setState(M(M({},bt.state),{},{hovered:!0}))},onMouseLeave:function(){return bt.setState(M(M({},bt.state),{},{hovered:!1}))},className:"variable-row",key:Ft.name}),Dt=="array"?jr?B.a.createElement("span",Object.assign({},Ye(At,"array-key"),{key:Ft.name+"_"+Jt}),Ft.name,B.a.createElement("div",Ye(At,"colon"),":")):null:B.a.createElement("span",null,B.a.createElement("span",Object.assign({},Ye(At,"object-name"),{className:"object-key",key:Ft.name+"_"+Jt}),!!nn&&B.a.createElement("span",{style:{verticalAlign:"top"}},'"'),B.a.createElement("span",{style:{display:"inline-block"}},Ft.name),!!nn&&B.a.createElement("span",{style:{verticalAlign:"top"}},'"')),B.a.createElement("span",Ye(At,"colon"),":")),B.a.createElement("div",Object.assign({className:"variable-value",onClick:_r===!1&&Cr===!1?null:function(cn){var xn=Ee(Jt);(cn.ctrlKey||cn.metaKey)&&Cr!==!1?bt.prepopInput(Ft):_r!==!1&&(xn.shift(),_r(M(M({},Ft),{},{namespace:xn})))}},Ye(At,"variableValue",{cursor:_r===!1?"default":"pointer"})),this.getValue(Ft,Or)),Er?B.a.createElement(or,{rowHovered:this.state.hovered,hidden:Or,src:Ft.value,clickCallback:Er,theme:At,namespace:[].concat(Ee(Jt),[Ft.name])}):null,Cr!==!1&&Or==0?this.getEditIcon():null,Ur!==!1&&Or==0?this.getRemoveIcon():null)}}]),ot}(B.a.PureComponent),mr=function(Et){ee(ot,Et);var xt=G(ot);function ot(){var bt;P(this,ot);for(var _t=arguments.length,Ft=new Array(_t),ft=0;ft<_t;ft++)Ft[ft]=arguments[ft];return(bt=xt.call.apply(xt,[this].concat(Ft))).getObjectSize=function(){var Dt=bt.props,At=Dt.size,Jt=Dt.theme;if(Dt.displayObjectSize)return B.a.createElement("span",Object.assign({className:"object-size"},Ye(Jt,"object-size")),At," item",At===1?"":"s")},bt.getAddAttribute=function(Dt){var At=bt.props,Jt=At.theme,gr=At.namespace,Er=At.name,Cr=At.src,Ur=At.rjvId,_r=At.depth;return B.a.createElement("span",{className:"click-to-add",style:{verticalAlign:"top",display:Dt?"inline-block":"none"}},B.a.createElement(pt,Object.assign({className:"click-to-add-icon"},Ye(Jt,"addVarIcon"),{onClick:function(){var jr={name:_r>0?Er:null,namespace:gr.splice(0,gr.length-1),existing_value:Cr,variable_removed:!1,key_name:null};ie(Cr)==="object"?st.dispatch({name:"ADD_VARIABLE_KEY_REQUEST",rjvId:Ur,data:jr}):st.dispatch({name:"VARIABLE_ADDED",rjvId:Ur,data:M(M({},jr),{},{new_value:[].concat(Ee(Cr),[null])})})}})))},bt.getRemoveObject=function(Dt){var At=bt.props,Jt=At.theme,gr=(At.hover,At.namespace),Er=At.name,Cr=At.src,Ur=At.rjvId;if(gr.length!==1)return B.a.createElement("span",{className:"click-to-remove",style:{display:Dt?"inline-block":"none"}},B.a.createElement(Oe,Object.assign({className:"click-to-remove-icon"},Ye(Jt,"removeVarIcon"),{onClick:function(){st.dispatch({name:"VARIABLE_REMOVED",rjvId:Ur,data:{name:Er,namespace:gr.splice(0,gr.length-1),existing_value:Cr,variable_removed:!0}})}})))},bt.render=function(){var Dt=bt.props,At=Dt.theme,Jt=Dt.onDelete,gr=Dt.onAdd,Er=Dt.enableClipboard,Cr=Dt.src,Ur=Dt.namespace,_r=Dt.rowHovered;return B.a.createElement("div",Object.assign({},Ye(At,"object-meta-data"),{className:"object-meta-data",onClick:function(jr){jr.stopPropagation()}}),bt.getObjectSize(),Er?B.a.createElement(or,{rowHovered:_r,clickCallback:Er,src:Cr,theme:At,namespace:Ur}):null,gr!==!1?bt.getAddAttribute(_r):null,Jt!==!1?bt.getRemoveObject(_r):null)},bt}return ot}(B.a.PureComponent);function Nr(Et){var xt=Et.parent_type,ot=Et.namespace,bt=Et.quotesOnKeys,_t=Et.theme,Ft=Et.jsvRoot,ft=Et.name,Dt=Et.displayArrayKey,At=Et.name?Et.name:"";return!Ft||ft!==!1&&ft!==null?xt=="array"?Dt?B.a.createElement("span",Object.assign({},Ye(_t,"array-key"),{key:ot}),B.a.createElement("span",{className:"array-key"},At),B.a.createElement("span",Ye(_t,"colon"),":")):B.a.createElement("span",null):B.a.createElement("span",Object.assign({},Ye(_t,"object-name"),{key:ot}),B.a.createElement("span",{className:"object-key"},bt&&B.a.createElement("span",{style:{verticalAlign:"top"}},'"'),B.a.createElement("span",null,At),bt&&B.a.createElement("span",{style:{verticalAlign:"top"}},'"')),B.a.createElement("span",Ye(_t,"colon"),":")):B.a.createElement("span",null)}function Ar(Et){var xt=Et.theme;switch(Et.iconStyle){case"triangle":return B.a.createElement(Ce,Object.assign({},Ye(xt,"expanded-icon"),{className:"expanded-icon"}));case"square":return B.a.createElement(cr,Object.assign({},Ye(xt,"expanded-icon"),{className:"expanded-icon"}));default:return B.a.createElement(Xt,Object.assign({},Ye(xt,"expanded-icon"),{className:"expanded-icon"}))}}function br(Et){var xt=Et.theme;switch(Et.iconStyle){case"triangle":return B.a.createElement(re,Object.assign({},Ye(xt,"collapsed-icon"),{className:"collapsed-icon"}));case"square":return B.a.createElement(A,Object.assign({},Ye(xt,"collapsed-icon"),{className:"collapsed-icon"}));default:return B.a.createElement(ur,Object.assign({},Ye(xt,"collapsed-icon"),{className:"collapsed-icon"}))}}var qr=function(Et){ee(ot,Et);var xt=G(ot);function ot(bt){var _t;return P(this,ot),(_t=xt.call(this,bt)).toggleCollapsed=function(Ft){var ft=[];for(var Dt in _t.state.expanded)ft.push(_t.state.expanded[Dt]);ft[Ft]=!ft[Ft],_t.setState({expanded:ft})},_t.state={expanded:[]},_t}return H(ot,[{key:"getExpandedIcon",value:function(bt){var _t=this.props,Ft=_t.theme,ft=_t.iconStyle;return this.state.expanded[bt]?B.a.createElement(Ar,{theme:Ft,iconStyle:ft}):B.a.createElement(br,{theme:Ft,iconStyle:ft})}},{key:"render",value:function(){var bt=this,_t=this.props,Ft=_t.src,ft=_t.groupArraysAfterLength,Dt=(_t.depth,_t.name),At=_t.theme,Jt=_t.jsvRoot,gr=_t.namespace,Er=(_t.parent_type,ae(_t,["src","groupArraysAfterLength","depth","name","theme","jsvRoot","namespace","parent_type"])),Cr=0,Ur=5*this.props.indentWidth;Jt||(Cr=5*this.props.indentWidth);var _r=ft,jr=Math.ceil(Ft.length/_r);return B.a.createElement("div",Object.assign({className:"object-key-val"},Ye(At,Jt?"jsv-root":"objectKeyVal",{paddingLeft:Cr})),B.a.createElement(Nr,this.props),B.a.createElement("span",null,B.a.createElement(mr,Object.assign({size:Ft.length},this.props))),Ee(Array(jr)).map(function(nn,Or){return B.a.createElement("div",Object.assign({key:Or,className:"object-key-val array-group"},Ye(At,"objectKeyVal",{marginLeft:6,paddingLeft:Ur})),B.a.createElement("span",Ye(At,"brace-row"),B.a.createElement("div",Object.assign({className:"icon-container"},Ye(At,"icon-container"),{onClick:function(cn){bt.toggleCollapsed(Or)}}),bt.getExpandedIcon(Or)),bt.state.expanded[Or]?B.a.createElement(rn,Object.assign({key:Dt+Or,depth:0,name:!1,collapsed:!1,groupArraysAfterLength:_r,index_offset:Or*_r,src:Ft.slice(Or*_r,Or*_r+_r),namespace:gr,type:"array",parent_type:"array_group",theme:At},Er)):B.a.createElement("span",Object.assign({},Ye(At,"brace"),{onClick:function(cn){bt.toggleCollapsed(Or)},className:"array-group-brace"}),"[",B.a.createElement("div",Object.assign({},Ye(At,"array-group-meta-data"),{className:"array-group-meta-data"}),B.a.createElement("span",Object.assign({className:"object-size"},Ye(At,"object-size")),Or*_r," - ",Or*_r+_r>Ft.length?Ft.length:Or*_r+_r)),"]")))}))}}]),ot}(B.a.PureComponent),en=function(Et){ee(ot,Et);var xt=G(ot);function ot(bt){var _t;P(this,ot),(_t=xt.call(this,bt)).toggleCollapsed=function(){_t.setState({expanded:!_t.state.expanded},function(){tt.set(_t.props.rjvId,_t.props.namespace,"expanded",_t.state.expanded)})},_t.getObjectContent=function(ft,Dt,At){return B.a.createElement("div",{className:"pushed-content object-container"},B.a.createElement("div",Object.assign({className:"object-content"},Ye(_t.props.theme,"pushed-content")),_t.renderObjectContents(Dt,At)))},_t.getEllipsis=function(){return _t.state.size===0?null:B.a.createElement("div",Object.assign({},Ye(_t.props.theme,"ellipsis"),{className:"node-ellipsis",onClick:_t.toggleCollapsed}),"...")},_t.getObjectMetaData=function(ft){var Dt=_t.props,At=(Dt.rjvId,Dt.theme,_t.state),Jt=At.size,gr=At.hovered;return B.a.createElement(mr,Object.assign({rowHovered:gr,size:Jt},_t.props))},_t.renderObjectContents=function(ft,Dt){var At,Jt=_t.props,gr=Jt.depth,Er=Jt.parent_type,Cr=Jt.index_offset,Ur=Jt.groupArraysAfterLength,_r=Jt.namespace,jr=_t.state.object_type,nn=[],Or=Object.keys(ft||{});return _t.props.sortKeys&&jr!=="array"&&(Or=Or.sort()),Or.forEach(function(cn){if(At=new Wr(cn,ft[cn]),Er==="array_group"&&Cr&&(At.name=parseInt(At.name)+Cr),ft.hasOwnProperty(cn))if(At.type==="object")nn.push(B.a.createElement(rn,Object.assign({key:At.name,depth:gr+1,name:At.name,src:At.value,namespace:_r.concat(At.name),parent_type:jr},Dt)));else if(At.type==="array"){var xn=rn;Ur&&At.value.length>Ur&&(xn=qr),nn.push(B.a.createElement(xn,Object.assign({key:At.name,depth:gr+1,name:At.name,src:At.value,namespace:_r.concat(At.name),type:"array",parent_type:jr},Dt)))}else nn.push(B.a.createElement(yr,Object.assign({key:At.name+"_"+_r,variable:At,singleIndent:5,namespace:_r,type:_t.props.type},Dt)))}),nn};var Ft=ot.getState(bt);return _t.state=M(M({},Ft),{},{prevProps:{}}),_t}return H(ot,[{key:"getBraceStart",value:function(bt,_t){var Ft=this,ft=this.props,Dt=ft.src,At=ft.theme,Jt=ft.iconStyle;if(ft.parent_type==="array_group")return B.a.createElement("span",null,B.a.createElement("span",Ye(At,"brace"),bt==="array"?"[":"{"),_t?this.getObjectMetaData(Dt):null);var gr=_t?Ar:br;return B.a.createElement("span",null,B.a.createElement("span",Object.assign({onClick:function(Er){Ft.toggleCollapsed()}},Ye(At,"brace-row")),B.a.createElement("div",Object.assign({className:"icon-container"},Ye(At,"icon-container")),B.a.createElement(gr,{theme:At,iconStyle:Jt})),B.a.createElement(Nr,this.props),B.a.createElement("span",Ye(At,"brace"),bt==="array"?"[":"{")),_t?this.getObjectMetaData(Dt):null)}},{key:"render",value:function(){var bt=this,_t=this.props,Ft=_t.depth,ft=_t.src,Dt=(_t.namespace,_t.name,_t.type,_t.parent_type),At=_t.theme,Jt=_t.jsvRoot,gr=_t.iconStyle,Er=ae(_t,["depth","src","namespace","name","type","parent_type","theme","jsvRoot","iconStyle"]),Cr=this.state,Ur=Cr.object_type,_r=Cr.expanded,jr={};return Jt||Dt==="array_group"?Dt==="array_group"&&(jr.borderLeft=0,jr.display="inline"):jr.paddingLeft=5*this.props.indentWidth,B.a.createElement("div",Object.assign({className:"object-key-val",onMouseEnter:function(){return bt.setState(M(M({},bt.state),{},{hovered:!0}))},onMouseLeave:function(){return bt.setState(M(M({},bt.state),{},{hovered:!1}))}},Ye(At,Jt?"jsv-root":"objectKeyVal",jr)),this.getBraceStart(Ur,_r),_r?this.getObjectContent(Ft,ft,M({theme:At,iconStyle:gr},Er)):this.getEllipsis(),B.a.createElement("span",{className:"brace-row"},B.a.createElement("span",{style:M(M({},Ye(At,"brace").style),{},{paddingLeft:_r?"3px":"0px"})},Ur==="array"?"]":"}"),_r?null:this.getObjectMetaData(ft)))}}],[{key:"getDerivedStateFromProps",value:function(bt,_t){var Ft=_t.prevProps;return bt.src!==Ft.src||bt.collapsed!==Ft.collapsed||bt.name!==Ft.name||bt.namespace!==Ft.namespace||bt.rjvId!==Ft.rjvId?M(M({},ot.getState(bt)),{},{prevProps:bt}):null}}]),ot}(B.a.PureComponent);en.getState=function(Et){var xt=Object.keys(Et.src).length,ot=(Et.collapsed===!1||Et.collapsed!==!0&&Et.collapsed>Et.depth)&&(!Et.shouldCollapse||Et.shouldCollapse({name:Et.name,src:Et.src,type:ie(Et.src),namespace:Et.namespace})===!1)&&xt!==0;return{expanded:tt.get(Et.rjvId,Et.namespace,"expanded",ot),object_type:Et.type==="array"?"array":"object",parent_type:Et.type==="array"?"array":"object",size:xt,hovered:!1}};var Wr=function Et(xt,ot){P(this,Et),this.name=xt,this.value=ot,this.type=ie(ot)};be(en);var rn=en,Xr=function(Et){ee(ot,Et);var xt=G(ot);function ot(){var bt;P(this,ot);for(var _t=arguments.length,Ft=new Array(_t),ft=0;ft<_t;ft++)Ft[ft]=arguments[ft];return(bt=xt.call.apply(xt,[this].concat(Ft))).render=function(){var Dt=Y(bt).props,At=[Dt.name],Jt=rn;return Array.isArray(Dt.src)&&Dt.groupArraysAfterLength&&Dt.src.length>Dt.groupArraysAfterLength&&(Jt=qr),B.a.createElement("div",{className:"pretty-json-container object-container"},B.a.createElement("div",{className:"object-content"},B.a.createElement(Jt,Object.assign({namespace:At,depth:0,jsvRoot:!0},Dt))))},bt}return ot}(B.a.PureComponent),ir=function(Et){ee(ot,Et);var xt=G(ot);function ot(bt){var _t;return P(this,ot),(_t=xt.call(this,bt)).closeModal=function(){st.dispatch({rjvId:_t.props.rjvId,name:"RESET"})},_t.submit=function(){_t.props.submit(_t.state.input)},_t.state={input:bt.input?bt.input:""},_t}return H(ot,[{key:"render",value:function(){var bt=this,_t=this.props,Ft=_t.theme,ft=_t.rjvId,Dt=_t.isValid,At=this.state.input,Jt=Dt(At);return B.a.createElement("div",Object.assign({className:"key-modal-request"},Ye(Ft,"key-modal-request"),{onClick:this.closeModal}),B.a.createElement("div",Object.assign({},Ye(Ft,"key-modal"),{onClick:function(gr){gr.stopPropagation()}}),B.a.createElement("div",Ye(Ft,"key-modal-label"),"Key Name:"),B.a.createElement("div",{style:{position:"relative"}},B.a.createElement("input",Object.assign({},Ye(Ft,"key-modal-input"),{className:"key-modal-input",ref:function(gr){return gr&&gr.focus()},spellCheck:!1,value:At,placeholder:"...",onChange:function(gr){bt.setState({input:gr.target.value})},onKeyPress:function(gr){Jt&&gr.key==="Enter"?bt.submit():gr.key==="Escape"&&bt.closeModal()}})),Jt?B.a.createElement(dr,Object.assign({},Ye(Ft,"key-modal-submit"),{className:"key-modal-submit",onClick:function(gr){return bt.submit()}})):null),B.a.createElement("span",Ye(Ft,"key-modal-cancel"),B.a.createElement(Kt,Object.assign({},Ye(Ft,"key-modal-cancel-icon"),{className:"key-modal-cancel",onClick:function(){st.dispatch({rjvId:ft,name:"RESET"})}})))))}}]),ot}(B.a.PureComponent),Rr=function(Et){ee(ot,Et);var xt=G(ot);function ot(){var bt;P(this,ot);for(var _t=arguments.length,Ft=new Array(_t),ft=0;ft<_t;ft++)Ft[ft]=arguments[ft];return(bt=xt.call.apply(xt,[this].concat(Ft))).isValid=function(Dt){var At=bt.props.rjvId,Jt=tt.get(At,"action","new-key-request");return Dt!=""&&Object.keys(Jt.existing_value).indexOf(Dt)===-1},bt.submit=function(Dt){var At=bt.props.rjvId,Jt=tt.get(At,"action","new-key-request");Jt.new_value=M({},Jt.existing_value),Jt.new_value[Dt]=bt.props.defaultValue,st.dispatch({name:"VARIABLE_ADDED",rjvId:At,data:Jt})},bt}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.active,Ft=bt.theme,ft=bt.rjvId;return _t?B.a.createElement(ir,{rjvId:ft,theme:Ft,isValid:this.isValid,submit:this.submit}):null}}]),ot}(B.a.PureComponent),Vr=function(Et){ee(ot,Et);var xt=G(ot);function ot(){return P(this,ot),xt.apply(this,arguments)}return H(ot,[{key:"render",value:function(){var bt=this.props,_t=bt.message,Ft=bt.active,ft=bt.theme,Dt=bt.rjvId;return Ft?B.a.createElement("div",Object.assign({className:"validation-failure"},Ye(ft,"validation-failure"),{onClick:function(){st.dispatch({rjvId:Dt,name:"RESET"})}}),B.a.createElement("span",Ye(ft,"validation-failure-label"),_t),B.a.createElement(Kt,Ye(ft,"validation-failure-clear"))):null}}]),ot}(B.a.PureComponent),Zr=function(Et){ee(ot,Et);var xt=G(ot);function ot(bt){var _t;return P(this,ot),(_t=xt.call(this,bt)).rjvId=Date.now().toString(),_t.getListeners=function(){return{reset:_t.resetState,"variable-update":_t.updateSrc,"add-key-request":_t.addKeyRequest}},_t.updateSrc=function(){var Ft,ft=tt.get(_t.rjvId,"action","variable-update"),Dt=ft.name,At=ft.namespace,Jt=ft.new_value,gr=ft.existing_value,Er=(ft.variable_removed,ft.updated_src),Cr=ft.type,Ur=_t.props,_r=Ur.onEdit,jr=Ur.onDelete,nn=Ur.onAdd,Or={existing_src:_t.state.src,new_value:Jt,updated_src:Er,name:Dt,namespace:At,existing_value:gr};switch(Cr){case"variable-added":Ft=nn(Or);break;case"variable-edited":Ft=_r(Or);break;case"variable-removed":Ft=jr(Or)}Ft!==!1?(tt.set(_t.rjvId,"global","src",Er),_t.setState({src:Er})):_t.setState({validationFailure:!0})},_t.addKeyRequest=function(){_t.setState({addKeyRequest:!0})},_t.resetState=function(){_t.setState({validationFailure:!1,addKeyRequest:!1})},_t.state={addKeyRequest:!1,editKeyRequest:!1,validationFailure:!1,src:ot.defaultProps.src,name:ot.defaultProps.name,theme:ot.defaultProps.theme,validationMessage:ot.defaultProps.validationMessage,prevSrc:ot.defaultProps.src,prevName:ot.defaultProps.name,prevTheme:ot.defaultProps.theme},_t}return H(ot,[{key:"componentDidMount",value:function(){tt.set(this.rjvId,"global","src",this.state.src);var bt=this.getListeners();for(var _t in bt)tt.on(_t+"-"+this.rjvId,bt[_t]);this.setState({addKeyRequest:!1,editKeyRequest:!1})}},{key:"componentDidUpdate",value:function(bt,_t){_t.addKeyRequest!==!1&&this.setState({addKeyRequest:!1}),_t.editKeyRequest!==!1&&this.setState({editKeyRequest:!1}),bt.src!==this.state.src&&tt.set(this.rjvId,"global","src",this.state.src)}},{key:"componentWillUnmount",value:function(){var bt=this.getListeners();for(var _t in bt)tt.removeListener(_t+"-"+this.rjvId,bt[_t])}},{key:"render",value:function(){var bt=this.state,_t=bt.validationFailure,Ft=bt.validationMessage,ft=bt.addKeyRequest,Dt=bt.theme,At=bt.src,Jt=bt.name,gr=this.props,Er=gr.style,Cr=gr.defaultValue;return B.a.createElement("div",{className:"react-json-view",style:M(M({},Ye(Dt,"app-container").style),Er)},B.a.createElement(Vr,{message:Ft,active:_t,theme:Dt,rjvId:this.rjvId}),B.a.createElement(Xr,Object.assign({},this.props,{src:At,name:Jt,theme:Dt,type:ie(At),rjvId:this.rjvId})),B.a.createElement(Rr,{active:ft,theme:Dt,rjvId:this.rjvId,defaultValue:Cr}))}}],[{key:"getDerivedStateFromProps",value:function(bt,_t){if(bt.src!==_t.prevSrc||bt.name!==_t.prevName||bt.theme!==_t.prevTheme){var Ft={src:bt.src,name:bt.name,theme:bt.theme,validationMessage:bt.validationMessage,prevSrc:bt.src,prevName:bt.name,prevTheme:bt.theme};return ot.validateState(Ft)}return null}}]),ot}(B.a.PureComponent);Zr.defaultProps={src:{},name:"root",theme:"rjv-default",collapsed:!1,collapseStringsAfterLength:!1,shouldCollapse:!1,sortKeys:!1,quotesOnKeys:!0,groupArraysAfterLength:100,indentWidth:4,enableClipboard:!0,displayObjectSize:!0,displayDataTypes:!0,onEdit:!1,onDelete:!1,onAdd:!1,onSelect:!1,iconStyle:"triangle",style:{},validationMessage:"Validation Error",defaultValue:null,displayArrayKey:!0},Zr.validateState=function(Et){var xt={};return ie(Et.theme)!=="object"||function(ot){var bt=["base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F"];if(ie(ot)==="object"){for(var _t=0;_t<bt.length;_t++)if(!(bt[_t]in ot))return!1;return!0}return!1}(Et.theme)||(console.error("react-json-view error:","theme prop must be a theme name or valid base-16 theme object.",'defaulting to "rjv-default" theme'),xt.theme="rjv-default"),ie(Et.src)!=="object"&&ie(Et.src)!=="array"&&(console.error("react-json-view error:","src property must be a valid json object"),xt.name="ERROR",xt.src={message:"src property must be a valid json object"}),M(M({},Et),xt)},be(Zr),b.default=Zr}])})})(main);var XmlBeautify={exports:{}};/*! For license information please see XmlBeautify.js.LICENSE.txt */(function(c,d){(function(g,v){c.exports=v()})(commonjsGlobal,()=>(()=>{var g={d:(E,R)=>{for(var M in R)g.o(R,M)&&!g.o(E,M)&&Object.defineProperty(E,M,{enumerable:!0,get:R[M]})},o:(E,R)=>Object.prototype.hasOwnProperty.call(E,R)},v={};function b(E,R){for(var M=0;M<R.length;M++){var P=R[M];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(E,P.key,P)}}g.d(v,{default:()=>_});var _=function(){function E(P){(function(H,Q){if(!(H instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,E);var O=P||{};this.userExternalParser=!1,O.parser?(this.userExternalParser=!0,this.parser=new O.parser):this.parser=new DOMParser}var R,M;return R=E,(M=[{key:"hasXmlDef",value:function(P){return P.indexOf("<?xml")>=0}},{key:"getEncoding",value:function(P){if(!this.hasXmlDef(P))return null;var O=P.toLowerCase().indexOf('encoding="')+10,H=P.indexOf('"?>');return P.substr(O,H-O)}},{key:"_children",value:function(P){for(var O=[],H=P.childNodes.length,Q=0;Q<H;Q++)P.childNodes[Q].nodeType===1&&O.push(P.childNodes[Q]);return O}},{key:"beautify",value:function(P,O){var H=this,Q=H.parser.parseFromString(P,"text/xml"),ee="  ",V=!1;O&&(O.indent&&(ee=O.indent),O.useSelfClosingElement==1&&(V=O.useSelfClosingElement));var W=null;H.hasXmlDef(P)&&(W='<?xml version="1.0" encoding="'+H.getEncoding(P)+'"?>');var Y={indentText:ee,xmlText:"",useSelfClosingElement:V,indentLevel:0};H.userExternalParser?H._parseInternally(this._children(Q)[0],Y):H._parseInternally(Q.children[0],Y);var U="";return W&&(U+=W+`
`),U+=Y.xmlText}},{key:"_parseInternally",value:function(P,O){var H,Q=this,ee=P.textContent;ee.replace(/ /g,"").replace(/\r?\n/g,"").replace(/\n/g,"").replace(/\t/g,"").length==0&&(ee=""),H=Q.userExternalParser?!(Q._children(P).length>0):!(P.children.length>0);var V=ee&&ee.length>0,W=H&&V,Y=H&&!V,U=O.useSelfClosingElement,G="";if(W){var te=Q._getFirstCDATAChild(P),B=te.hasCDATAChild,j=te.content;G+=B?j:ee}for(var X,oe="",be=0;be<O.indentLevel;be++)oe+=O.indentText;O.xmlText+=oe,O.xmlText+="<"+P.tagName;for(var ae=0;ae<P.attributes.length;ae++){var ie=P.attributes[ae];O.xmlText+=" "+ie.name+'="'+ie.textContent+'"'}O.xmlText+=Y&&U?" />":">",W?O.xmlText+=G:Y&&!U||(O.xmlText+=`
`),O.indentLevel++,X=Q.userExternalParser?Q._children(P).length:P.children.length;for(var Se=0;Se<X;Se++){var mt=void 0;mt=Q.userExternalParser?Q._children(P)[Se]:P.children[Se],Q._parseInternally(mt,O)}if(O.indentLevel--,Y){if(!U){var it="</"+P.tagName+">";O.xmlText+=it,O.xmlText+=`
`}}else{var Tt="</"+P.tagName+">";H&&V||(O.xmlText+=oe),O.xmlText+=Tt,O.xmlText+=`
`}}},{key:"_getFirstCDATAChild",value:function(P){for(var O=P.childNodes.length,H="",Q=!1,ee=0;ee<O;ee++)P.childNodes[ee].nodeType===3?P.childNodes[ee].data.replace(/ /g,"").replace(/\r?\n/g,"").replace(/\n/g,"").replace(/\t/g,"").length>0&&(H+=P.childNodes[ee].data):P.childNodes[ee].nodeType===4&&(H+="<![CDATA[",H+=P.childNodes[ee].data,H+="]]>",Q=!0);return Q?{hasCDATAChild:!0,content:H}:{hasCDATAChild:!1}}}])&&b(R.prototype,M),Object.defineProperty(R,"prototype",{writable:!1}),E}();return v=v.default})())})(XmlBeautify);var xpath={};(function(c){var d=c;(function(g){function v(A){var re=Array.prototype.slice,Ce=A.length,ve=function(pt,Kt){return function(){return Kt.apply(this,pt.concat(re.call(arguments)))}},Oe=function(){var pt=re.call(arguments);return pt.length<Ce?ve(pt,Oe):A.apply(this,re.apply(arguments,[0,Ce]))};return Oe}var b=function(A,re){for(var Ce=0;Ce<re.length;Ce+=1)A(re[Ce],Ce,re)},_=function(A,re,Ce){var ve=re;return b(function(Oe,pt){ve=A(ve,Oe,pt)},Ce),ve},E=function(A,re){var Ce=new Array(re.length);return b(function(ve,Oe){Ce[Oe]=A(ve)},re),Ce},R=function(A,re){var Ce=[];return b(function(ve,Oe){A(ve,Oe)&&Ce.push(ve)},re),Ce},M=function(A,re){for(var Ce=0;Ce<A.length;Ce+=1)if(A[Ce]===re)return!0;return!1};function P(A){return function(){return A}}function O(A){return A.toString()}var H=function(A,re){return re.join(A)},Q=function(A,re,Ce){return A+Ce+re},ee=Array.prototype.concat,V=32767;function W(A){for(var re=[],Ce=0;Ce<A.length;Ce+=V){var ve=A.slice(Ce,Ce+V);re=ee.apply(re,ve)}return re}function Y(A,re){for(var Ce=Object(A),ve=1;ve<arguments.length;ve++){var Oe=arguments[ve];if(Oe!=null)for(var pt in Oe)Object.prototype.hasOwnProperty.call(Oe,pt)&&(Ce[pt]=Oe[pt])}return Ce}U.prototype=new Object,U.prototype.constructor=U,U.superclass=Object.prototype;function U(){this.init()}U.prototype.init=function(){this.reduceActions=[],this.reduceActions[3]=function(A){return new be(A[0],A[2])},this.reduceActions[5]=function(A){return new ae(A[0],A[2])},this.reduceActions[7]=function(A){return new ie(A[0],A[2])},this.reduceActions[8]=function(A){return new Se(A[0],A[2])},this.reduceActions[10]=function(A){return new mt(A[0],A[2])},this.reduceActions[11]=function(A){return new it(A[0],A[2])},this.reduceActions[12]=function(A){return new Tt(A[0],A[2])},this.reduceActions[13]=function(A){return new ht(A[0],A[2])},this.reduceActions[15]=function(A){return new Ye(A[0],A[2])},this.reduceActions[16]=function(A){return new St(A[0],A[2])},this.reduceActions[18]=function(A){return new $t(A[0],A[2])},this.reduceActions[19]=function(A){return new Lt(A[0],A[2])},this.reduceActions[20]=function(A){return new Mt(A[0],A[2])},this.reduceActions[22]=function(A){return new X(A[1])},this.reduceActions[24]=function(A){return new jt(A[0],A[2])},this.reduceActions[25]=function(A){return new Qe(void 0,void 0,A[0])},this.reduceActions[27]=function(A){return A[0].locationPath=A[2],A[0]},this.reduceActions[28]=function(A){return A[0].locationPath=A[2],A[0].locationPath.steps.unshift(new rt(rt.DESCENDANTORSELF,tt.nodeTest,[])),A[0]},this.reduceActions[29]=function(A){return new Qe(A[0],[],void 0)},this.reduceActions[30]=function(A){return ze.instance_of(A[0],Qe)?(A[0].filterPredicates==null&&(A[0].filterPredicates=[]),A[0].filterPredicates.push(A[1]),A[0]):new Qe(A[0],[A[1]],void 0)},this.reduceActions[32]=function(A){return A[1]},this.reduceActions[33]=function(A){return new wt(A[0])},this.reduceActions[34]=function(A){return new kt(A[0])},this.reduceActions[36]=function(A){return new It(A[0],[])},this.reduceActions[37]=function(A){return new It(A[0],A[2])},this.reduceActions[38]=function(A){return[A[0]]},this.reduceActions[39]=function(A){return A[2].unshift(A[0]),A[2]},this.reduceActions[43]=function(A){return new st(!0,[])},this.reduceActions[44]=function(A){return A[1].absolute=!0,A[1]},this.reduceActions[46]=function(A){return new st(!1,[A[0]])},this.reduceActions[47]=function(A){return A[0].steps.push(A[2]),A[0]},this.reduceActions[49]=function(A){return new rt(A[0],A[1],[])},this.reduceActions[50]=function(A){return new rt(rt.CHILD,A[0],[])},this.reduceActions[51]=function(A){return new rt(A[0],A[1],A[2])},this.reduceActions[52]=function(A){return new rt(rt.CHILD,A[0],A[1])},this.reduceActions[54]=function(A){return[A[0]]},this.reduceActions[55]=function(A){return A[1].unshift(A[0]),A[1]},this.reduceActions[56]=function(A){return A[0]=="ancestor"?rt.ANCESTOR:A[0]=="ancestor-or-self"?rt.ANCESTORORSELF:A[0]=="attribute"?rt.ATTRIBUTE:A[0]=="child"?rt.CHILD:A[0]=="descendant"?rt.DESCENDANT:A[0]=="descendant-or-self"?rt.DESCENDANTORSELF:A[0]=="following"?rt.FOLLOWING:A[0]=="following-sibling"?rt.FOLLOWINGSIBLING:A[0]=="namespace"?rt.NAMESPACE:A[0]=="parent"?rt.PARENT:A[0]=="preceding"?rt.PRECEDING:A[0]=="preceding-sibling"?rt.PRECEDINGSIBLING:A[0]=="self"?rt.SELF:-1},this.reduceActions[57]=function(A){return rt.ATTRIBUTE},this.reduceActions[59]=function(A){return A[0]=="comment"?tt.commentTest:A[0]=="text"?tt.textTest:A[0]=="processing-instruction"?tt.anyPiTest:A[0]=="node"?tt.nodeTest:new tt(-1,void 0)},this.reduceActions[60]=function(A){return new tt.PITest(A[2])},this.reduceActions[61]=function(A){return A[1]},this.reduceActions[63]=function(A){return A[1].absolute=!0,A[1].steps.unshift(new rt(rt.DESCENDANTORSELF,tt.nodeTest,[])),A[1]},this.reduceActions[64]=function(A){return A[0].steps.push(new rt(rt.DESCENDANTORSELF,tt.nodeTest,[])),A[0].steps.push(A[2]),A[0]},this.reduceActions[65]=function(A){return new rt(rt.SELF,tt.nodeTest,[])},this.reduceActions[66]=function(A){return new rt(rt.PARENT,tt.nodeTest,[])},this.reduceActions[67]=function(A){return new vt(A[1])},this.reduceActions[68]=function(A){return tt.nameTestAny},this.reduceActions[69]=function(A){return new tt.NameTestPrefixAny(A[0].split(":")[0])},this.reduceActions[70]=function(A){return new tt.NameTestQName(A[0])}},U.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "],U.actionTableNumber=[` 1 0        /.-,+*)('    & %$  #  "!`,"                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               ",` 1 0        /.-,+*)('    & %$  #  "!`,`K1  KKKKKKKK .  +*)('KKKKKK  KK# K" `,` 1 0        /.-,+*)('    & %$  #  "!`,"                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       ",` 1           .  +*)('          #  " `,"b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               ",` 1 0        /.-,+*)('    & %$m #  "!`,"_  f________         ______e __  _  ",` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('      %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1           .  +*)('          #  " `,` 1           .  +*)('          #  " `,">  >>>>>>>>>         >>>>>>> >> >>  ",` 1           .  +*)('          #  " `,` 1           .  +*)('          #  " `,"Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                             \x87      ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                             \x88      ","                             F\x89     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                 \x8A  ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  ",` 1 0        /.-,+*)('    & %$  #  "!`,"]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "],U.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         \x7F=>?@ AB  CDEFGH IJ ","\x80456789:;<=>?@ AB  CDEFGH IJ\x81","            \x82        EFGH IJ ","            \x83        EFGH IJ ","                             ","                     \x84 GH IJ ","                     \x85 GH IJ ","              i          \x86   ","              i          \x87   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ AB\x8CqCDEFGH IJ ","                             ","                             "],U.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]],U.DOUBLEDOT=2,U.DOUBLECOLON=3,U.DOUBLESLASH=4,U.NOTEQUAL=5,U.LESSTHANOREQUAL=6,U.GREATERTHANOREQUAL=7,U.AND=8,U.OR=9,U.MOD=10,U.DIV=11,U.MULTIPLYOPERATOR=12,U.FUNCTIONNAME=13,U.AXISNAME=14,U.LITERAL=15,U.NUMBER=16,U.ASTERISKNAMETEST=17,U.QNAME=18,U.NCNAMECOLONASTERISK=19,U.NODETYPE=20,U.PROCESSINGINSTRUCTIONWITHLITERAL=21,U.EQUALS=22,U.LESSTHAN=23,U.GREATERTHAN=24,U.PLUS=25,U.MINUS=26,U.BAR=27,U.SLASH=28,U.LEFTPARENTHESIS=29,U.RIGHTPARENTHESIS=30,U.COMMA=31,U.AT=32,U.LEFTBRACKET=33,U.RIGHTBRACKET=34,U.DOT=35,U.DOLLAR=36,U.prototype.tokenize=function(A){for(var re=[],Ce=[],ve=A+"\0",Oe=0,pt=ve.charAt(Oe++);;){for(;pt==" "||pt=="	"||pt=="\r"||pt==`
`;)pt=ve.charAt(Oe++);if(pt=="\0"||Oe>=ve.length)break;if(pt=="("){re.push(U.LEFTPARENTHESIS),Ce.push(pt),pt=ve.charAt(Oe++);continue}if(pt==")"){re.push(U.RIGHTPARENTHESIS),Ce.push(pt),pt=ve.charAt(Oe++);continue}if(pt=="["){re.push(U.LEFTBRACKET),Ce.push(pt),pt=ve.charAt(Oe++);continue}if(pt=="]"){re.push(U.RIGHTBRACKET),Ce.push(pt),pt=ve.charAt(Oe++);continue}if(pt=="@"){re.push(U.AT),Ce.push(pt),pt=ve.charAt(Oe++);continue}if(pt==","){re.push(U.COMMA),Ce.push(pt),pt=ve.charAt(Oe++);continue}if(pt=="|"){re.push(U.BAR),Ce.push(pt),pt=ve.charAt(Oe++);continue}if(pt=="+"){re.push(U.PLUS),Ce.push(pt),pt=ve.charAt(Oe++);continue}if(pt=="-"){re.push(U.MINUS),Ce.push(pt),pt=ve.charAt(Oe++);continue}if(pt=="="){re.push(U.EQUALS),Ce.push(pt),pt=ve.charAt(Oe++);continue}if(pt=="$"){re.push(U.DOLLAR),Ce.push(pt),pt=ve.charAt(Oe++);continue}if(pt=="."){if(pt=ve.charAt(Oe++),pt=="."){re.push(U.DOUBLEDOT),Ce.push(".."),pt=ve.charAt(Oe++);continue}if(pt>="0"&&pt<="9"){var Kt="."+pt;for(pt=ve.charAt(Oe++);pt>="0"&&pt<="9";)Kt+=pt,pt=ve.charAt(Oe++);re.push(U.NUMBER),Ce.push(Kt);continue}re.push(U.DOT),Ce.push(".");continue}if(pt=="'"||pt=='"'){for(var rr=pt,dr="";Oe<ve.length&&(pt=ve.charAt(Oe))!==rr;)dr+=pt,Oe+=1;if(pt!==rr)throw ct.fromMessage("Unterminated string literal: "+rr+dr);Oe+=1,re.push(U.LITERAL),Ce.push(dr),pt=ve.charAt(Oe++);continue}if(pt>="0"&&pt<="9"){var Kt=pt;for(pt=ve.charAt(Oe++);pt>="0"&&pt<="9";)Kt+=pt,pt=ve.charAt(Oe++);if(pt=="."&&ve.charAt(Oe)>="0"&&ve.charAt(Oe)<="9")for(Kt+=pt,Kt+=ve.charAt(Oe++),pt=ve.charAt(Oe++);pt>="0"&&pt<="9";)Kt+=pt,pt=ve.charAt(Oe++);re.push(U.NUMBER),Ce.push(Kt);continue}if(pt=="*"){if(re.length>0){var Gt=re[re.length-1];if(Gt!=U.AT&&Gt!=U.DOUBLECOLON&&Gt!=U.LEFTPARENTHESIS&&Gt!=U.LEFTBRACKET&&Gt!=U.AND&&Gt!=U.OR&&Gt!=U.MOD&&Gt!=U.DIV&&Gt!=U.MULTIPLYOPERATOR&&Gt!=U.SLASH&&Gt!=U.DOUBLESLASH&&Gt!=U.BAR&&Gt!=U.PLUS&&Gt!=U.MINUS&&Gt!=U.EQUALS&&Gt!=U.NOTEQUAL&&Gt!=U.LESSTHAN&&Gt!=U.LESSTHANOREQUAL&&Gt!=U.GREATERTHAN&&Gt!=U.GREATERTHANOREQUAL){re.push(U.MULTIPLYOPERATOR),Ce.push(pt),pt=ve.charAt(Oe++);continue}}re.push(U.ASTERISKNAMETEST),Ce.push(pt),pt=ve.charAt(Oe++);continue}if(pt==":"&&ve.charAt(Oe)==":"){re.push(U.DOUBLECOLON),Ce.push("::"),Oe++,pt=ve.charAt(Oe++);continue}if(pt=="/"){if(pt=ve.charAt(Oe++),pt=="/"){re.push(U.DOUBLESLASH),Ce.push("//"),pt=ve.charAt(Oe++);continue}re.push(U.SLASH),Ce.push("/");continue}if(pt=="!"&&ve.charAt(Oe)=="="){re.push(U.NOTEQUAL),Ce.push("!="),Oe++,pt=ve.charAt(Oe++);continue}if(pt=="<"){if(ve.charAt(Oe)=="="){re.push(U.LESSTHANOREQUAL),Ce.push("<="),Oe++,pt=ve.charAt(Oe++);continue}re.push(U.LESSTHAN),Ce.push("<"),pt=ve.charAt(Oe++);continue}if(pt==">"){if(ve.charAt(Oe)=="="){re.push(U.GREATERTHANOREQUAL),Ce.push(">="),Oe++,pt=ve.charAt(Oe++);continue}re.push(U.GREATERTHAN),Ce.push(">"),pt=ve.charAt(Oe++);continue}if(pt=="_"||ze.isLetter(pt.charCodeAt(0))){var or=pt;for(pt=ve.charAt(Oe++);ze.isNCNameChar(pt.charCodeAt(0));)or+=pt,pt=ve.charAt(Oe++);if(re.length>0){var Gt=re[re.length-1];if(Gt!=U.AT&&Gt!=U.DOUBLECOLON&&Gt!=U.LEFTPARENTHESIS&&Gt!=U.LEFTBRACKET&&Gt!=U.AND&&Gt!=U.OR&&Gt!=U.MOD&&Gt!=U.DIV&&Gt!=U.MULTIPLYOPERATOR&&Gt!=U.SLASH&&Gt!=U.DOUBLESLASH&&Gt!=U.BAR&&Gt!=U.PLUS&&Gt!=U.MINUS&&Gt!=U.EQUALS&&Gt!=U.NOTEQUAL&&Gt!=U.LESSTHAN&&Gt!=U.LESSTHANOREQUAL&&Gt!=U.GREATERTHAN&&Gt!=U.GREATERTHANOREQUAL){if(or=="and"){re.push(U.AND),Ce.push(or);continue}if(or=="or"){re.push(U.OR),Ce.push(or);continue}if(or=="mod"){re.push(U.MOD),Ce.push(or);continue}if(or=="div"){re.push(U.DIV),Ce.push(or);continue}}}if(pt==":"){if(ve.charAt(Oe)=="*"){re.push(U.NCNAMECOLONASTERISK),Ce.push(or+":*"),Oe++,pt=ve.charAt(Oe++);continue}if(ve.charAt(Oe)=="_"||ze.isLetter(ve.charCodeAt(Oe))){for(or+=":",pt=ve.charAt(Oe++);ze.isNCNameChar(pt.charCodeAt(0));)or+=pt,pt=ve.charAt(Oe++);if(pt=="("){re.push(U.FUNCTIONNAME),Ce.push(or);continue}re.push(U.QNAME),Ce.push(or);continue}if(ve.charAt(Oe)==":"){re.push(U.AXISNAME),Ce.push(or);continue}}if(pt=="("){if(or=="comment"||or=="text"||or=="node"){re.push(U.NODETYPE),Ce.push(or);continue}if(or=="processing-instruction"){ve.charAt(Oe)==")"?re.push(U.NODETYPE):re.push(U.PROCESSINGINSTRUCTIONWITHLITERAL),Ce.push(or);continue}re.push(U.FUNCTIONNAME),Ce.push(or);continue}re.push(U.QNAME),Ce.push(or);continue}throw new Error("Unexpected character "+pt)}return re.push(1),Ce.push("[EOF]"),[re,Ce]},U.SHIFT="s",U.REDUCE="r",U.ACCEPT="a",U.prototype.parse=function(dr){var re,Ce,ve=this.tokenize(dr);if(ve!=null){re=ve[0],Ce=ve[1];var Oe=0,pt=[],Kt=[],rr=[],dr,Gt,or;for(pt.push(0),Kt.push(1),rr.push("_S"),Gt=re[Oe],or=Ce[Oe++];;)switch(dr=pt[pt.length-1],U.actionTable[dr].charAt(Gt-1)){case U.SHIFT:Kt.push(-Gt),rr.push(or),pt.push(U.actionTableNumber[dr].charCodeAt(Gt-1)-32),Gt=re[Oe],or=Ce[Oe++];break;case U.REDUCE:for(var yr=U.productions[U.actionTableNumber[dr].charCodeAt(Gt-1)-32][1],mr=[],Nr=0;Nr<yr;Nr++)Kt.pop(),mr.unshift(rr.pop()),pt.pop();var Ar=pt[pt.length-1];Kt.push(U.productions[U.actionTableNumber[dr].charCodeAt(Gt-1)-32][0]),this.reduceActions[U.actionTableNumber[dr].charCodeAt(Gt-1)-32]==null?rr.push(mr[0]):rr.push(this.reduceActions[U.actionTableNumber[dr].charCodeAt(Gt-1)-32](mr)),pt.push(U.gotoTable[Ar].charCodeAt(U.productions[U.actionTableNumber[dr].charCodeAt(Gt-1)-32][0]-2)-33);break;case U.ACCEPT:return new G(rr.pop());default:throw new Error("XPath parse error")}}},G.prototype=new Object,G.prototype.constructor=G,G.superclass=Object.prototype;function G(A){this.expression=A}G.prototype.toString=function(){return this.expression.toString()};function te(A,re,Ce){re in A||(A[re]=Ce)}G.prototype.evaluate=function(A){return A.contextNode=A.expressionContextNode,A.contextSize=1,A.contextPosition=1,A.isHtml&&(te(A,"caseInsensitive",!0),te(A,"allowAnyNamespaceForNoPrefix",!0)),te(A,"caseInsensitive",!1),this.expression.evaluate(A)},G.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace",G.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/",B.prototype=new Object,B.prototype.constructor=B,B.superclass=Object.prototype;function B(){}B.prototype.init=function(){},B.prototype.toString=function(){return"<Expression>"},B.prototype.evaluate=function(A){throw new Error("Could not evaluate expression.")},j.prototype=new B,j.prototype.constructor=j,j.superclass=B.prototype;function j(A){arguments.length>0&&this.init(A)}j.prototype.init=function(A){this.rhs=A},X.prototype=new j,X.prototype.constructor=X,X.superclass=j.prototype;function X(A){arguments.length>0&&this.init(A)}X.prototype.init=function(A){X.superclass.init.call(this,A)},X.prototype.evaluate=function(A){return this.rhs.evaluate(A).number().negate()},X.prototype.toString=function(){return"-"+this.rhs.toString()},oe.prototype=new B,oe.prototype.constructor=oe,oe.superclass=B.prototype;function oe(A,re){arguments.length>0&&this.init(A,re)}oe.prototype.init=function(A,re){this.lhs=A,this.rhs=re},be.prototype=new oe,be.prototype.constructor=be,be.superclass=oe.prototype;function be(A,re){arguments.length>0&&this.init(A,re)}be.prototype.init=function(A,re){be.superclass.init.call(this,A,re)},be.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"},be.prototype.evaluate=function(A){var re=this.lhs.evaluate(A).bool();return re.booleanValue()?re:this.rhs.evaluate(A).bool()},ae.prototype=new oe,ae.prototype.constructor=ae,ae.superclass=oe.prototype;function ae(A,re){arguments.length>0&&this.init(A,re)}ae.prototype.init=function(A,re){ae.superclass.init.call(this,A,re)},ae.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"},ae.prototype.evaluate=function(A){var re=this.lhs.evaluate(A).bool();return re.booleanValue()?this.rhs.evaluate(A).bool():re},ie.prototype=new oe,ie.prototype.constructor=ie,ie.superclass=oe.prototype;function ie(A,re){arguments.length>0&&this.init(A,re)}ie.prototype.init=function(A,re){ie.superclass.init.call(this,A,re)},ie.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"},ie.prototype.evaluate=function(A){return this.lhs.evaluate(A).equals(this.rhs.evaluate(A))},Se.prototype=new oe,Se.prototype.constructor=Se,Se.superclass=oe.prototype;function Se(A,re){arguments.length>0&&this.init(A,re)}Se.prototype.init=function(A,re){Se.superclass.init.call(this,A,re)},Se.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"},Se.prototype.evaluate=function(A){return this.lhs.evaluate(A).notequal(this.rhs.evaluate(A))},mt.prototype=new oe,mt.prototype.constructor=mt,mt.superclass=oe.prototype;function mt(A,re){arguments.length>0&&this.init(A,re)}mt.prototype.init=function(A,re){mt.superclass.init.call(this,A,re)},mt.prototype.evaluate=function(A){return this.lhs.evaluate(A).lessthan(this.rhs.evaluate(A))},mt.prototype.toString=function(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"},it.prototype=new oe,it.prototype.constructor=it,it.superclass=oe.prototype;function it(A,re){arguments.length>0&&this.init(A,re)}it.prototype.init=function(A,re){it.superclass.init.call(this,A,re)},it.prototype.evaluate=function(A){return this.lhs.evaluate(A).greaterthan(this.rhs.evaluate(A))},it.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"},Tt.prototype=new oe,Tt.prototype.constructor=Tt,Tt.superclass=oe.prototype;function Tt(A,re){arguments.length>0&&this.init(A,re)}Tt.prototype.init=function(A,re){Tt.superclass.init.call(this,A,re)},Tt.prototype.evaluate=function(A){return this.lhs.evaluate(A).lessthanorequal(this.rhs.evaluate(A))},Tt.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"},ht.prototype=new oe,ht.prototype.constructor=ht,ht.superclass=oe.prototype;function ht(A,re){arguments.length>0&&this.init(A,re)}ht.prototype.init=function(A,re){ht.superclass.init.call(this,A,re)},ht.prototype.evaluate=function(A){return this.lhs.evaluate(A).greaterthanorequal(this.rhs.evaluate(A))},ht.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"},Ye.prototype=new oe,Ye.prototype.constructor=Ye,Ye.superclass=oe.prototype;function Ye(A,re){arguments.length>0&&this.init(A,re)}Ye.prototype.init=function(A,re){Ye.superclass.init.call(this,A,re)},Ye.prototype.evaluate=function(A){return this.lhs.evaluate(A).number().plus(this.rhs.evaluate(A).number())},Ye.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"},St.prototype=new oe,St.prototype.constructor=St,St.superclass=oe.prototype;function St(A,re){arguments.length>0&&this.init(A,re)}St.prototype.init=function(A,re){St.superclass.init.call(this,A,re)},St.prototype.evaluate=function(A){return this.lhs.evaluate(A).number().minus(this.rhs.evaluate(A).number())},St.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"},$t.prototype=new oe,$t.prototype.constructor=$t,$t.superclass=oe.prototype;function $t(A,re){arguments.length>0&&this.init(A,re)}$t.prototype.init=function(A,re){$t.superclass.init.call(this,A,re)},$t.prototype.evaluate=function(A){return this.lhs.evaluate(A).number().multiply(this.rhs.evaluate(A).number())},$t.prototype.toString=function(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"},Lt.prototype=new oe,Lt.prototype.constructor=Lt,Lt.superclass=oe.prototype;function Lt(A,re){arguments.length>0&&this.init(A,re)}Lt.prototype.init=function(A,re){Lt.superclass.init.call(this,A,re)},Lt.prototype.evaluate=function(A){return this.lhs.evaluate(A).number().div(this.rhs.evaluate(A).number())},Lt.prototype.toString=function(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"},Mt.prototype=new oe,Mt.prototype.constructor=Mt,Mt.superclass=oe.prototype;function Mt(A,re){arguments.length>0&&this.init(A,re)}Mt.prototype.init=function(A,re){Mt.superclass.init.call(this,A,re)},Mt.prototype.evaluate=function(A){return this.lhs.evaluate(A).number().mod(this.rhs.evaluate(A).number())},Mt.prototype.toString=function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"},jt.prototype=new oe,jt.prototype.constructor=jt,jt.superclass=oe.prototype;function jt(A,re){arguments.length>0&&this.init(A,re)}jt.prototype.init=function(A,re){jt.superclass.init.call(this,A,re)},jt.prototype.evaluate=function(A){return this.lhs.evaluate(A).nodeset().union(this.rhs.evaluate(A).nodeset())},jt.prototype.toString=function(){return E(O,[this.lhs,this.rhs]).join(" | ")},Qe.prototype=new B,Qe.prototype.constructor=Qe,Qe.superclass=B.prototype;function Qe(A,re,Ce){arguments.length>0&&this.init(A,re,Ce)}Qe.prototype.init=function(A,re,Ce){Qe.superclass.init.call(this),this.filter=A,this.filterPredicates=re,this.locationPath=Ce};function Pe(A){for(;A&&A.parentNode;)A=A.parentNode;return A}Qe.applyPredicates=function(A,re,Ce){if(A.length===0)return Ce;var ve=re.extend({});return _(function(Oe,pt){return ve.contextSize=Oe.length,R(function(Kt,rr){return ve.contextNode=Kt,ve.contextPosition=rr+1,Qe.predicateMatches(pt,ve)},Oe)},Ce,A)},Qe.getRoot=function(A,re){var Ce=re[0];if(Ce.nodeType===9)return Ce;if(A.virtualRoot)return A.virtualRoot;var ve=Ce.ownerDocument;if(ve)return ve;for(var Oe=Ce;Oe.parentNode!=null;)Oe=Oe.parentNode;return Oe},Qe.applyStep=function(A,re,Ce){var ve=[];switch(re.contextNode=Ce,A.axis){case rt.ANCESTOR:if(re.contextNode===re.virtualRoot)break;var Oe;for(re.contextNode.nodeType==2?Oe=Qe.getOwnerElement(re.contextNode):Oe=re.contextNode.parentNode;Oe!=null&&(A.nodeTest.matches(Oe,re)&&ve.push(Oe),Oe!==re.virtualRoot);)Oe=Oe.parentNode;break;case rt.ANCESTORORSELF:for(var Oe=re.contextNode;Oe!=null&&(A.nodeTest.matches(Oe,re)&&ve.push(Oe),Oe!==re.virtualRoot);Oe=Oe.nodeType==2?Qe.getOwnerElement(Oe):Oe.parentNode);break;case rt.ATTRIBUTE:var pt=re.contextNode.attributes;if(pt!=null)for(var Kt=0;Kt<pt.length;Kt++){var Oe=pt.item(Kt);A.nodeTest.matches(Oe,re)&&ve.push(Oe)}break;case rt.CHILD:for(var Oe=re.contextNode.firstChild;Oe!=null;Oe=Oe.nextSibling)A.nodeTest.matches(Oe,re)&&ve.push(Oe);break;case rt.DESCENDANT:for(var mr=[re.contextNode.firstChild];mr.length>0;)for(var Oe=mr.pop();Oe!=null;)A.nodeTest.matches(Oe,re)&&ve.push(Oe),Oe.firstChild!=null?(mr.push(Oe.nextSibling),Oe=Oe.firstChild):Oe=Oe.nextSibling;break;case rt.DESCENDANTORSELF:A.nodeTest.matches(re.contextNode,re)&&ve.push(re.contextNode);for(var mr=[re.contextNode.firstChild];mr.length>0;)for(var Oe=mr.pop();Oe!=null;)A.nodeTest.matches(Oe,re)&&ve.push(Oe),Oe.firstChild!=null?(mr.push(Oe.nextSibling),Oe=Oe.firstChild):Oe=Oe.nextSibling;break;case rt.FOLLOWING:if(re.contextNode===re.virtualRoot)break;var mr=[];re.contextNode.firstChild!=null?mr.unshift(re.contextNode.firstChild):mr.unshift(re.contextNode.nextSibling);for(var Oe=re.contextNode.parentNode;Oe!=null&&Oe.nodeType!=9&&Oe!==re.virtualRoot;Oe=Oe.parentNode)mr.unshift(Oe.nextSibling);do for(var Oe=mr.pop();Oe!=null;)A.nodeTest.matches(Oe,re)&&ve.push(Oe),Oe.firstChild!=null?(mr.push(Oe.nextSibling),Oe=Oe.firstChild):Oe=Oe.nextSibling;while(mr.length>0);break;case rt.FOLLOWINGSIBLING:if(re.contextNode===re.virtualRoot)break;for(var Oe=re.contextNode.nextSibling;Oe!=null;Oe=Oe.nextSibling)A.nodeTest.matches(Oe,re)&&ve.push(Oe);break;case rt.NAMESPACE:var rr={};if(re.contextNode.nodeType==1){rr.xml=G.XML_NAMESPACE_URI,rr.xmlns=G.XMLNS_NAMESPACE_URI;for(var Oe=re.contextNode;Oe!=null&&Oe.nodeType==1;Oe=Oe.parentNode)for(var Kt=0;Kt<Oe.attributes.length;Kt++){var dr=Oe.attributes.item(Kt),Gt=String(dr.name);if(Gt=="xmlns")rr[""]==null&&(rr[""]=dr.value);else if(Gt.length>6&&Gt.substring(0,6)=="xmlns:"){var or=Gt.substring(6,Gt.length);rr[or]==null&&(rr[or]=dr.value)}}for(var or in rr){var yr=new Ae(or,rr[or],re.contextNode);A.nodeTest.matches(yr,re)&&ve.push(yr)}}break;case rt.PARENT:Oe=null,re.contextNode!==re.virtualRoot&&(re.contextNode.nodeType==2?Oe=Qe.getOwnerElement(re.contextNode):Oe=re.contextNode.parentNode),Oe!=null&&A.nodeTest.matches(Oe,re)&&ve.push(Oe);break;case rt.PRECEDING:var mr;re.virtualRoot!=null?mr=[re.virtualRoot]:mr=[Pe(re.contextNode)];e:for(;mr.length>0;)for(var Oe=mr.pop();Oe!=null;){if(Oe==re.contextNode)break e;A.nodeTest.matches(Oe,re)&&ve.unshift(Oe),Oe.firstChild!=null?(mr.push(Oe.nextSibling),Oe=Oe.firstChild):Oe=Oe.nextSibling}break;case rt.PRECEDINGSIBLING:if(re.contextNode===re.virtualRoot)break;for(var Oe=re.contextNode.previousSibling;Oe!=null;Oe=Oe.previousSibling)A.nodeTest.matches(Oe,re)&&ve.push(Oe);break;case rt.SELF:A.nodeTest.matches(re.contextNode,re)&&ve.push(re.contextNode);break}return ve};function Ee(A,re,Ce){return Qe.applyPredicates(A.predicates,re,Qe.applyStep(A,re,Ce))}function nt(A,re,Ce){return W(E(Ee.bind(null,Ce,A),re))}Qe.applySteps=function(A,re,Ce){return _(nt.bind(null,re),Ce,A)},Qe.prototype.applyFilter=function(A,re){if(!this.filter)return{nodes:[A.contextNode]};var Ce=this.filter.evaluate(A);if(!ze.instance_of(Ce,ne)){if(this.filterPredicates!=null&&this.filterPredicates.length>0||this.locationPath!=null)throw new Error("Path expression filter must evaluate to a nodeset if predicates or location path are used");return{nonNodes:Ce}}return{nodes:Qe.applyPredicates(this.filterPredicates||[],re,Ce.toUnsortedArray())}},Qe.applyLocationPath=function(A,re,Ce){if(!A)return Ce;var ve=A.absolute?[Qe.getRoot(re,Ce)]:Ce;return Qe.applySteps(A.steps,re,ve)},Qe.prototype.evaluate=function(A){var re=Y(new ut,A),Ce=this.applyFilter(A,re);if("nonNodes"in Ce)return Ce.nonNodes;var ve=new ne;return ve.addArray(Qe.applyLocationPath(this.locationPath,re,Ce.nodes)),ve},Qe.predicateMatches=function(A,re){var Ce=A.evaluate(re);return ze.instance_of(Ce,kt)?re.contextPosition===Ce.numberValue():Ce.booleanValue()},Qe.predicateString=function(A){return Q("[","]",A.toString())},Qe.predicatesString=function(A){return H("",E(Qe.predicateString,A))},Qe.prototype.toString=function(){if(this.filter!=null){var A=O(this.filter);return ze.instance_of(this.filter,wt)?Q("'","'",A):this.filterPredicates!=null&&this.filterPredicates.length?Q("(",")",A)+Qe.predicatesString(this.filterPredicates):this.locationPath!=null?A+(this.locationPath.absolute?"":"/")+O(this.locationPath):A}return O(this.locationPath)},Qe.getOwnerElement=function(A){if(A.ownerElement)return A.ownerElement;try{if(A.selectSingleNode)return A.selectSingleNode("..")}catch{}for(var re=A.nodeType==9?A:A.ownerDocument,Ce=re.getElementsByTagName("*"),ve=0;ve<Ce.length;ve++)for(var Oe=Ce.item(ve),pt=Oe.attributes,Kt=0;Kt<pt.length;Kt++){var rr=pt.item(Kt);if(rr===A)return Oe}return null},st.prototype=new Object,st.prototype.constructor=st,st.superclass=Object.prototype;function st(A,re){arguments.length>0&&this.init(A,re)}st.prototype.init=function(A,re){this.absolute=A,this.steps=re},st.prototype.toString=function(){return(this.absolute?"/":"")+E(O,this.steps).join("/")},rt.prototype=new Object,rt.prototype.constructor=rt,rt.superclass=Object.prototype;function rt(A,re,Ce){arguments.length>0&&this.init(A,re,Ce)}rt.prototype.init=function(A,re,Ce){this.axis=A,this.nodeTest=re,this.predicates=Ce},rt.prototype.toString=function(){return rt.STEPNAMES[this.axis]+"::"+this.nodeTest.toString()+Qe.predicatesString(this.predicates)},rt.ANCESTOR=0,rt.ANCESTORORSELF=1,rt.ATTRIBUTE=2,rt.CHILD=3,rt.DESCENDANT=4,rt.DESCENDANTORSELF=5,rt.FOLLOWING=6,rt.FOLLOWINGSIBLING=7,rt.NAMESPACE=8,rt.PARENT=9,rt.PRECEDING=10,rt.PRECEDINGSIBLING=11,rt.SELF=12,rt.STEPNAMES=_(function(A,re){return A[re[0]]=re[1],A},{},[[rt.ANCESTOR,"ancestor"],[rt.ANCESTORORSELF,"ancestor-or-self"],[rt.ATTRIBUTE,"attribute"],[rt.CHILD,"child"],[rt.DESCENDANT,"descendant"],[rt.DESCENDANTORSELF,"descendant-or-self"],[rt.FOLLOWING,"following"],[rt.FOLLOWINGSIBLING,"following-sibling"],[rt.NAMESPACE,"namespace"],[rt.PARENT,"parent"],[rt.PRECEDING,"preceding"],[rt.PRECEDINGSIBLING,"preceding-sibling"],[rt.SELF,"self"]]),tt.prototype=new Object,tt.prototype.constructor=tt,tt.superclass=Object.prototype;function tt(A,re){arguments.length>0&&this.init(A,re)}tt.prototype.init=function(A,re){this.type=A,this.value=re},tt.prototype.toString=function(){return"<unknown nodetest type>"},tt.prototype.matches=function(A,re){console.warn("unknown node test type")},tt.NAMETESTANY=0,tt.NAMETESTPREFIXANY=1,tt.NAMETESTQNAME=2,tt.COMMENT=3,tt.TEXT=4,tt.PI=5,tt.NODE=6,tt.isNodeType=function(A){return function(re){return M(A,re.nodeType)}},tt.makeNodeTestType=function(A,re,Ce){var ve=Ce||function(){};return ve.prototype=new tt(A),ve.prototype.constructor=ve,Y(ve.prototype,re),ve},tt.makeNodeTypeTest=function(A,re,Ce){return new(tt.makeNodeTestType(A,{matches:tt.isNodeType(re),toString:P(Ce)}))},tt.hasPrefix=function(A){return A.prefix||(A.nodeName||A.tagName).indexOf(":")!==-1},tt.isElementOrAttribute=tt.isNodeType([1,2]),tt.nameSpaceMatches=function(A,re,Ce){var ve=Ce.namespaceURI||"";if(!A)return!ve||re.allowAnyNamespaceForNoPrefix&&!tt.hasPrefix(Ce);var Oe=re.namespaceResolver.getNamespace(A,re.expressionContextNode);if(Oe==null)throw new Error("Cannot resolve QName "+A);return Oe===ve},tt.localNameMatches=function(A,re,Ce){var ve=Ce.localName||Ce.nodeName;return re.caseInsensitive?A.toLowerCase()===ve.toLowerCase():A===ve},tt.NameTestPrefixAny=tt.makeNodeTestType(tt.NAMETESTPREFIXANY,{matches:function(A,re){return tt.isElementOrAttribute(A)&&tt.nameSpaceMatches(this.prefix,re,A)},toString:function(){return this.prefix+":*"}},function(re){this.prefix=re}),tt.NameTestQName=tt.makeNodeTestType(tt.NAMETESTQNAME,{matches:function(A,re){return tt.isNodeType([1,2,Ae.XPATH_NAMESPACE_NODE])(A)&&tt.nameSpaceMatches(this.prefix,re,A)&&tt.localNameMatches(this.localName,re,A)},toString:function(){return this.name}},function(re){var Ce=re.split(":");this.name=re,this.prefix=Ce.length>1?Ce[0]:null,this.localName=Ce[Ce.length>1?1:0]}),tt.PITest=tt.makeNodeTestType(tt.PI,{matches:function(A,re){return tt.isNodeType([7])(A)&&(A.target||A.nodeName)===this.name},toString:function(){return Q('processing-instruction("','")',this.name)}},function(A){this.name=A}),tt.nameTestAny=tt.makeNodeTypeTest(tt.NAMETESTANY,[1,2,Ae.XPATH_NAMESPACE_NODE],"*"),tt.textTest=tt.makeNodeTypeTest(tt.TEXT,[3,4],"text()"),tt.commentTest=tt.makeNodeTypeTest(tt.COMMENT,[8],"comment()"),tt.nodeTest=tt.makeNodeTypeTest(tt.NODE,[1,2,3,4,7,8,9],"node()"),tt.anyPiTest=tt.makeNodeTypeTest(tt.PI,[7],"processing-instruction()"),vt.prototype=new B,vt.prototype.constructor=vt,vt.superclass=B.prototype;function vt(A){arguments.length>0&&this.init(A)}vt.prototype.init=function(A){this.variable=A},vt.prototype.toString=function(){return"$"+this.variable},vt.prototype.evaluate=function(A){var re=ze.resolveQName(this.variable,A.namespaceResolver,A.contextNode,!1);if(re[0]==null)throw new Error("Cannot resolve QName "+fn);var Ce=A.variableResolver.getVariable(re[1],re[0]);if(!Ce)throw ct.fromMessage("Undeclared variable: "+this.toString());return Ce},It.prototype=new B,It.prototype.constructor=It,It.superclass=B.prototype;function It(A,re){arguments.length>0&&this.init(A,re)}It.prototype.init=function(A,re){this.functionName=A,this.arguments=re},It.prototype.toString=function(){for(var A=this.functionName+"(",re=0;re<this.arguments.length;re++)re>0&&(A+=", "),A+=this.arguments[re].toString();return A+")"},It.prototype.evaluate=function(A){var re=yt.getFunctionFromContext(this.functionName,A);if(!re)throw new Error("Unknown function "+this.functionName);var Ce=[A].concat(this.arguments);return re.apply(A.functionResolver.thisArg,Ce)};var Vt=new Object;Vt.equals=function(A,re){return A.equals(re)},Vt.notequal=function(A,re){return A.notequal(re)},Vt.lessthan=function(A,re){return A.lessthan(re)},Vt.greaterthan=function(A,re){return A.greaterthan(re)},Vt.lessthanorequal=function(A,re){return A.lessthanorequal(re)},Vt.greaterthanorequal=function(A,re){return A.greaterthanorequal(re)},wt.prototype=new B,wt.prototype.constructor=wt,wt.superclass=B.prototype;function wt(A){arguments.length>0&&this.init(A)}wt.prototype.init=function(A){this.str=String(A)},wt.prototype.toString=function(){return this.str},wt.prototype.evaluate=function(A){return this},wt.prototype.string=function(){return this},wt.prototype.number=function(){return new kt(this.str)},wt.prototype.bool=function(){return new Z(this.str)},wt.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset")},wt.prototype.stringValue=function(){return this.str},wt.prototype.numberValue=function(){return this.number().numberValue()},wt.prototype.booleanValue=function(){return this.bool().booleanValue()},wt.prototype.equals=function(A){return ze.instance_of(A,Z)?this.bool().equals(A):ze.instance_of(A,kt)?this.number().equals(A):ze.instance_of(A,ne)?A.compareWithString(this,Vt.equals):new Z(this.str==A.str)},wt.prototype.notequal=function(A){return ze.instance_of(A,Z)?this.bool().notequal(A):ze.instance_of(A,kt)?this.number().notequal(A):ze.instance_of(A,ne)?A.compareWithString(this,Vt.notequal):new Z(this.str!=A.str)},wt.prototype.lessthan=function(A){return this.number().lessthan(A)},wt.prototype.greaterthan=function(A){return this.number().greaterthan(A)},wt.prototype.lessthanorequal=function(A){return this.number().lessthanorequal(A)},wt.prototype.greaterthanorequal=function(A){return this.number().greaterthanorequal(A)},kt.prototype=new B,kt.prototype.constructor=kt,kt.superclass=B.prototype;function kt(A){arguments.length>0&&this.init(A)}kt.prototype.init=function(A){this.num=typeof A=="string"?this.parse(A):Number(A)},kt.prototype.numberFormat=/^\s*-?[0-9]*\.?[0-9]+\s*$/,kt.prototype.parse=function(A){return this.numberFormat.test(A)?parseFloat(A):Number.NaN};function Zt(A){for(var re=A.split("e-"),Ce=re[0].replace(".",""),ve=Number(re[1]),Oe=0;Oe<ve-1;Oe+=1)Ce="0"+Ce;return"0."+Ce}function Qt(A){for(var re=A.split("e"),Ce=re[0].replace(".",""),ve=Number(re[1]),Oe=ve+1-Ce.length,pt=0;pt<Oe;pt+=1)Ce+="0";return Ce}kt.prototype.toString=function(){var A=this.num.toString();return A.indexOf("e-")!==-1?Zt(A):A.indexOf("e")!==-1?Qt(A):A},kt.prototype.evaluate=function(A){return this},kt.prototype.string=function(){return new wt(this.toString())},kt.prototype.number=function(){return this},kt.prototype.bool=function(){return new Z(this.num)},kt.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset")},kt.prototype.stringValue=function(){return this.string().stringValue()},kt.prototype.numberValue=function(){return this.num},kt.prototype.booleanValue=function(){return this.bool().booleanValue()},kt.prototype.negate=function(){return new kt(-this.num)},kt.prototype.equals=function(A){return ze.instance_of(A,Z)?this.bool().equals(A):ze.instance_of(A,wt)?this.equals(A.number()):ze.instance_of(A,ne)?A.compareWithNumber(this,Vt.equals):new Z(this.num==A.num)},kt.prototype.notequal=function(A){return ze.instance_of(A,Z)?this.bool().notequal(A):ze.instance_of(A,wt)?this.notequal(A.number()):ze.instance_of(A,ne)?A.compareWithNumber(this,Vt.notequal):new Z(this.num!=A.num)},kt.prototype.lessthan=function(A){return ze.instance_of(A,ne)?A.compareWithNumber(this,Vt.greaterthan):ze.instance_of(A,Z)||ze.instance_of(A,wt)?this.lessthan(A.number()):new Z(this.num<A.num)},kt.prototype.greaterthan=function(A){return ze.instance_of(A,ne)?A.compareWithNumber(this,Vt.lessthan):ze.instance_of(A,Z)||ze.instance_of(A,wt)?this.greaterthan(A.number()):new Z(this.num>A.num)},kt.prototype.lessthanorequal=function(A){return ze.instance_of(A,ne)?A.compareWithNumber(this,Vt.greaterthanorequal):ze.instance_of(A,Z)||ze.instance_of(A,wt)?this.lessthanorequal(A.number()):new Z(this.num<=A.num)},kt.prototype.greaterthanorequal=function(A){return ze.instance_of(A,ne)?A.compareWithNumber(this,Vt.lessthanorequal):ze.instance_of(A,Z)||ze.instance_of(A,wt)?this.greaterthanorequal(A.number()):new Z(this.num>=A.num)},kt.prototype.plus=function(A){return new kt(this.num+A.num)},kt.prototype.minus=function(A){return new kt(this.num-A.num)},kt.prototype.multiply=function(A){return new kt(this.num*A.num)},kt.prototype.div=function(A){return new kt(this.num/A.num)},kt.prototype.mod=function(A){return new kt(this.num%A.num)},Z.prototype=new B,Z.prototype.constructor=Z,Z.superclass=B.prototype;function Z(A){arguments.length>0&&this.init(A)}Z.prototype.init=function(A){this.b=Boolean(A)},Z.prototype.toString=function(){return this.b.toString()},Z.prototype.evaluate=function(A){return this},Z.prototype.string=function(){return new wt(this.b)},Z.prototype.number=function(){return new kt(this.b)},Z.prototype.bool=function(){return this},Z.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset")},Z.prototype.stringValue=function(){return this.string().stringValue()},Z.prototype.numberValue=function(){return this.number().numberValue()},Z.prototype.booleanValue=function(){return this.b},Z.prototype.not=function(){return new Z(!this.b)},Z.prototype.equals=function(A){return ze.instance_of(A,wt)||ze.instance_of(A,kt)?this.equals(A.bool()):ze.instance_of(A,ne)?A.compareWithBoolean(this,Vt.equals):new Z(this.b==A.b)},Z.prototype.notequal=function(A){return ze.instance_of(A,wt)||ze.instance_of(A,kt)?this.notequal(A.bool()):ze.instance_of(A,ne)?A.compareWithBoolean(this,Vt.notequal):new Z(this.b!=A.b)},Z.prototype.lessthan=function(A){return this.number().lessthan(A)},Z.prototype.greaterthan=function(A){return this.number().greaterthan(A)},Z.prototype.lessthanorequal=function(A){return this.number().lessthanorequal(A)},Z.prototype.greaterthanorequal=function(A){return this.number().greaterthanorequal(A)},Z.true_=new Z(!0),Z.false_=new Z(!1),z.prototype=new Object,z.prototype.constructor=z,z.superclass=Object.prototype;function z(A){this.init(A)}z.prototype.init=function(A){this.left=null,this.right=null,this.node=A,this.depth=1},z.prototype.balance=function(){var A=this.left==null?0:this.left.depth,re=this.right==null?0:this.right.depth;if(A>re+1){var Ce=this.left.left==null?0:this.left.left.depth,ve=this.left.right==null?0:this.left.right.depth;Ce<ve&&this.left.rotateRR(),this.rotateLL()}else if(A+1<re){var Oe=this.right.right==null?0:this.right.right.depth,pt=this.right.left==null?0:this.right.left.depth;pt>Oe&&this.right.rotateLL(),this.rotateRR()}},z.prototype.rotateLL=function(){var A=this.node,re=this.right;this.node=this.left.node,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=re,this.right.node=A,this.right.updateInNewLocation(),this.updateInNewLocation()},z.prototype.rotateRR=function(){var A=this.node,re=this.left;this.node=this.right.node,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=re,this.left.node=A,this.left.updateInNewLocation(),this.updateInNewLocation()},z.prototype.updateInNewLocation=function(){this.getDepthFromChildren()},z.prototype.getDepthFromChildren=function(){this.depth=this.node==null?0:1,this.left!=null&&(this.depth=this.left.depth+1),this.right!=null&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1)};function K(A,re){if(A===re)return 0;if(A.compareDocumentPosition){var Ce=A.compareDocumentPosition(re);return Ce&1||Ce&10?1:Ce&20?-1:0}for(var ve=0,Oe=0,pt=A;pt!=null;pt=pt.parentNode||pt.ownerElement)ve++;for(var Kt=re;Kt!=null;Kt=Kt.parentNode||Kt.ownerElement)Oe++;if(ve>Oe){for(;ve>Oe;)A=A.parentNode||A.ownerElement,ve--;if(A===re)return 1}else if(Oe>ve){for(;Oe>ve;)re=re.parentNode||re.ownerElement,Oe--;if(A===re)return-1}for(var rr=A.parentNode||A.ownerElement,dr=re.parentNode||re.ownerElement;rr!==dr;)A=rr,re=dr,rr=A.parentNode||A.ownerElement,dr=re.parentNode||re.ownerElement;var Gt=ze.isAttribute(A),or=ze.isAttribute(re);if(Gt&&!or)return-1;if(!Gt&&or)return 1;if(rr)for(var yr=Gt?rr.attributes:rr.childNodes,mr=yr.length,Nr=0;Nr<mr;Nr+=1){var Ar=yr[Nr];if(Ar===A)return-1;if(Ar===re)return 1}throw new Error("Unexpected: could not determine node order")}z.prototype.add=function(A){if(A===this.node)return!1;var re=K(A,this.node),Ce=!1;return re==-1?this.left==null?(this.left=new z(A),Ce=!0):(Ce=this.left.add(A),Ce&&this.balance()):re==1&&(this.right==null?(this.right=new z(A),Ce=!0):(Ce=this.right.add(A),Ce&&this.balance())),Ce&&this.getDepthFromChildren(),Ce},ne.prototype=new B,ne.prototype.constructor=ne,ne.superclass=B.prototype;function ne(){this.init()}ne.prototype.init=function(){this.tree=null,this.nodes=[],this.size=0},ne.prototype.toString=function(){var A=this.first();return A==null?"":this.stringForNode(A)},ne.prototype.evaluate=function(A){return this},ne.prototype.string=function(){return new wt(this.toString())},ne.prototype.stringValue=function(){return this.toString()},ne.prototype.number=function(){return new kt(this.string())},ne.prototype.numberValue=function(){return Number(this.string())},ne.prototype.bool=function(){return new Z(this.booleanValue())},ne.prototype.booleanValue=function(){return!!this.size},ne.prototype.nodeset=function(){return this},ne.prototype.stringForNode=function(A){return A.nodeType==9||A.nodeType==1||A.nodeType===11?this.stringForContainerNode(A):A.nodeType===2?A.value||A.nodeValue:A.isNamespaceNode?A.namespace:A.nodeValue},ne.prototype.stringForContainerNode=function(A){for(var re="",Ce=A.firstChild;Ce!=null;Ce=Ce.nextSibling){var ve=Ce.nodeType;(ve===1||ve===3||ve===4||ve===9||ve===11)&&(re+=this.stringForNode(Ce))}return re},ne.prototype.buildTree=function(){if(!this.tree&&this.nodes.length){this.tree=new z(this.nodes[0]);for(var A=1;A<this.nodes.length;A+=1)this.tree.add(this.nodes[A])}return this.tree},ne.prototype.first=function(){var A=this.buildTree();if(A==null)return null;for(;A.left!=null;)A=A.left;return A.node},ne.prototype.add=function(A){for(var re=0;re<this.nodes.length;re+=1)if(A===this.nodes[re])return;this.tree=null,this.nodes.push(A),this.size+=1},ne.prototype.addArray=function(A){var re=this;b(function(Ce){re.add(Ce)},A)},ne.prototype.toArray=function(){var A=[];return this.toArrayRec(this.buildTree(),A),A},ne.prototype.toArrayRec=function(A,re){A!=null&&(this.toArrayRec(A.left,re),re.push(A.node),this.toArrayRec(A.right,re))},ne.prototype.toUnsortedArray=function(){return this.nodes.slice()},ne.prototype.compareWithString=function(A,re){for(var Ce=this.toUnsortedArray(),ve=0;ve<Ce.length;ve++){var Oe=Ce[ve],pt=new wt(this.stringForNode(Oe)),Kt=re(pt,A);if(Kt.booleanValue())return Kt}return new Z(!1)},ne.prototype.compareWithNumber=function(A,re){for(var Ce=this.toUnsortedArray(),ve=0;ve<Ce.length;ve++){var Oe=Ce[ve],pt=new kt(this.stringForNode(Oe)),Kt=re(pt,A);if(Kt.booleanValue())return Kt}return new Z(!1)},ne.prototype.compareWithBoolean=function(A,re){return re(this.bool(),A)},ne.prototype.compareWithNodeSet=function(A,re){for(var Ce=this.toUnsortedArray(),ve=function(rr,dr){return re(dr,rr)},Oe=0;Oe<Ce.length;Oe++){var pt=new wt(this.stringForNode(Ce[Oe])),Kt=A.compareWithString(pt,ve);if(Kt.booleanValue())return Kt}return new Z(!1)},ne.compareWith=v(function(A,re){return ze.instance_of(re,wt)?this.compareWithString(re,A):ze.instance_of(re,kt)?this.compareWithNumber(re,A):ze.instance_of(re,Z)?this.compareWithBoolean(re,A):this.compareWithNodeSet(re,A)}),ne.prototype.equals=ne.compareWith(Vt.equals),ne.prototype.notequal=ne.compareWith(Vt.notequal),ne.prototype.lessthan=ne.compareWith(Vt.lessthan),ne.prototype.greaterthan=ne.compareWith(Vt.greaterthan),ne.prototype.lessthanorequal=ne.compareWith(Vt.lessthanorequal),ne.prototype.greaterthanorequal=ne.compareWith(Vt.greaterthanorequal),ne.prototype.union=function(A){var re=new ne;return re.addArray(this.toUnsortedArray()),re.addArray(A.toUnsortedArray()),re},Ae.prototype=new Object,Ae.prototype.constructor=Ae,Ae.superclass=Object.prototype;function Ae(A,re,Ce){this.isXPathNamespace=!0,this.ownerDocument=Ce.ownerDocument,this.nodeName="#namespace",this.prefix=A,this.localName=A,this.namespaceURI=re,this.nodeValue=re,this.ownerElement=Ce,this.nodeType=Ae.XPATH_NAMESPACE_NODE}Ae.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'},ut.prototype=new Object,ut.prototype.constructor=ut,ut.superclass=Object.prototype;function ut(A,re,Ce){this.variableResolver=A!=null?A:new Rt,this.namespaceResolver=re!=null?re:new lt,this.functionResolver=Ce!=null?Ce:new yt}ut.prototype.extend=function(A){return Y(new ut,this,A)},Rt.prototype=new Object,Rt.prototype.constructor=Rt,Rt.superclass=Object.prototype;function Rt(){}Rt.prototype.getVariable=function(A,re){return null},yt.prototype=new Object,yt.prototype.constructor=yt,yt.superclass=Object.prototype;function yt(A){this.thisArg=A!=null?A:at,this.functions=new Object,this.addStandardFunctions()}yt.prototype.addStandardFunctions=function(){this.functions["{}last"]=at.last,this.functions["{}position"]=at.position,this.functions["{}count"]=at.count,this.functions["{}id"]=at.id,this.functions["{}local-name"]=at.localName,this.functions["{}namespace-uri"]=at.namespaceURI,this.functions["{}name"]=at.name,this.functions["{}string"]=at.string,this.functions["{}concat"]=at.concat,this.functions["{}starts-with"]=at.startsWith,this.functions["{}contains"]=at.contains,this.functions["{}substring-before"]=at.substringBefore,this.functions["{}substring-after"]=at.substringAfter,this.functions["{}substring"]=at.substring,this.functions["{}string-length"]=at.stringLength,this.functions["{}normalize-space"]=at.normalizeSpace,this.functions["{}translate"]=at.translate,this.functions["{}boolean"]=at.boolean_,this.functions["{}not"]=at.not,this.functions["{}true"]=at.true_,this.functions["{}false"]=at.false_,this.functions["{}lang"]=at.lang,this.functions["{}number"]=at.number,this.functions["{}sum"]=at.sum,this.functions["{}floor"]=at.floor,this.functions["{}ceiling"]=at.ceiling,this.functions["{}round"]=at.round},yt.prototype.addFunction=function(A,re,Ce){this.functions["{"+A+"}"+re]=Ce},yt.getFunctionFromContext=function(A,re){var Ce=ze.resolveQName(A,re.namespaceResolver,re.contextNode,!1);if(Ce[0]===null)throw new Error("Cannot resolve QName "+name);return re.functionResolver.getFunction(Ce[1],Ce[0])},yt.prototype.getFunction=function(A,re){return this.functions["{"+re+"}"+A]},lt.prototype=new Object,lt.prototype.constructor=lt,lt.superclass=Object.prototype;function lt(){}lt.prototype.getNamespace=function(A,re){if(A=="xml")return G.XML_NAMESPACE_URI;if(A=="xmlns")return G.XMLNS_NAMESPACE_URI;for(re.nodeType==9?re=re.documentElement:re.nodeType==2?re=Qe.getOwnerElement(re):re.nodeType!=1&&(re=re.parentNode);re!=null&&re.nodeType==1;){for(var Ce=re.attributes,ve=0;ve<Ce.length;ve++){var Oe=Ce.item(ve),pt=Oe.name||Oe.nodeName;if(pt==="xmlns"&&A===""||pt==="xmlns:"+A)return String(Oe.value||Oe.nodeValue)}re=re.parentNode}return null};var at=new Object;at.last=function(A){if(arguments.length!=1)throw new Error("Function last expects ()");return new kt(A.contextSize)},at.position=function(A){if(arguments.length!=1)throw new Error("Function position expects ()");return new kt(A.contextPosition)},at.count=function(){var A=arguments[0],re;if(arguments.length!=2||!ze.instance_of(re=arguments[1].evaluate(A),ne))throw new Error("Function count expects (node-set)");return new kt(re.size)},at.id=function(){var A=arguments[0],re;if(arguments.length!=2)throw new Error("Function id expects (object)");re=arguments[1].evaluate(A),ze.instance_of(re,ne)?re=re.toArray().join(" "):re=re.stringValue();for(var Ce=re.split(/[\x0d\x0a\x09\x20]+/),ve=new ne,Oe=A.contextNode.nodeType==9?A.contextNode:A.contextNode.ownerDocument,pt=0;pt<Ce.length;pt++){var Kt;Oe.getElementById?Kt=Oe.getElementById(Ce[pt]):Kt=ze.getElementById(Oe,Ce[pt]),Kt!=null&&ve.add(Kt)}return ve},at.localName=function(A,re){var Ce;if(arguments.length==1)Ce=A.contextNode;else if(arguments.length==2)Ce=re.evaluate(A).first();else throw new Error("Function local-name expects (node-set?)");return Ce==null?new wt(""):new wt(Ce.localName||Ce.baseName||Ce.target||Ce.nodeName||"")},at.namespaceURI=function(){var A=arguments[0],re;if(arguments.length==1)re=A.contextNode;else if(arguments.length==2)re=arguments[1].evaluate(A).first();else throw new Error("Function namespace-uri expects (node-set?)");return re==null?new wt(""):new wt(re.namespaceURI)},at.name=function(){var A=arguments[0],re;if(arguments.length==1)re=A.contextNode;else if(arguments.length==2)re=arguments[1].evaluate(A).first();else throw new Error("Function name expects (node-set?)");return re==null?new wt(""):re.nodeType==1?new wt(re.nodeName):re.nodeType==2?new wt(re.name||re.nodeName):re.nodeType===7?new wt(re.target||re.nodeName):re.localName==null?new wt(""):new wt(re.localName)},at.string=function(){var A=arguments[0];if(arguments.length==1)return new wt(ne.prototype.stringForNode(A.contextNode));if(arguments.length==2)return arguments[1].evaluate(A).string();throw new Error("Function string expects (object?)")},at.concat=function(A){if(arguments.length<3)throw new Error("Function concat expects (string, string[, string]*)");for(var re="",Ce=1;Ce<arguments.length;Ce++)re+=arguments[Ce].evaluate(A).stringValue();return new wt(re)},at.startsWith=function(){var A=arguments[0];if(arguments.length!=3)throw new Error("Function startsWith expects (string, string)");var re=arguments[1].evaluate(A).stringValue(),Ce=arguments[2].evaluate(A).stringValue();return new Z(re.substring(0,Ce.length)==Ce)},at.contains=function(){var A=arguments[0];if(arguments.length!=3)throw new Error("Function contains expects (string, string)");var re=arguments[1].evaluate(A).stringValue(),Ce=arguments[2].evaluate(A).stringValue();return new Z(re.indexOf(Ce)!==-1)},at.substringBefore=function(){var A=arguments[0];if(arguments.length!=3)throw new Error("Function substring-before expects (string, string)");var re=arguments[1].evaluate(A).stringValue(),Ce=arguments[2].evaluate(A).stringValue();return new wt(re.substring(0,re.indexOf(Ce)))},at.substringAfter=function(){var A=arguments[0];if(arguments.length!=3)throw new Error("Function substring-after expects (string, string)");var re=arguments[1].evaluate(A).stringValue(),Ce=arguments[2].evaluate(A).stringValue();if(Ce.length==0)return new wt(re);var ve=re.indexOf(Ce);return ve==-1?new wt(""):new wt(re.substring(ve+Ce.length))},at.substring=function(){var A=arguments[0];if(!(arguments.length==3||arguments.length==4))throw new Error("Function substring expects (string, number, number?)");var re=arguments[1].evaluate(A).stringValue(),Ce=Math.round(arguments[2].evaluate(A).numberValue())-1,ve=arguments.length==4?Ce+Math.round(arguments[3].evaluate(A).numberValue()):void 0;return new wt(re.substring(Ce,ve))},at.stringLength=function(){var A=arguments[0],re;if(arguments.length==1)re=ne.prototype.stringForNode(A.contextNode);else if(arguments.length==2)re=arguments[1].evaluate(A).stringValue();else throw new Error("Function string-length expects (string?)");return new kt(re.length)},at.normalizeSpace=function(){var A=arguments[0],re;if(arguments.length==1)re=ne.prototype.stringForNode(A.contextNode);else if(arguments.length==2)re=arguments[1].evaluate(A).stringValue();else throw new Error("Function normalize-space expects (string?)");for(var Ce=0,ve=re.length-1;ze.isSpace(re.charCodeAt(ve));)ve--;for(var Oe="";Ce<=ve&&ze.isSpace(re.charCodeAt(Ce));)Ce++;for(;Ce<=ve;)if(ze.isSpace(re.charCodeAt(Ce)))for(Oe+=" ";Ce<=ve&&ze.isSpace(re.charCodeAt(Ce));)Ce++;else Oe+=re.charAt(Ce),Ce++;return new wt(Oe)},at.translate=function(A,re,Ce,ve){if(arguments.length!=4)throw new Error("Function translate expects (string, string, string)");var Oe=re.evaluate(A).stringValue(),pt=Ce.evaluate(A).stringValue(),Kt=ve.evaluate(A).stringValue(),rr=_(function(Gt,or,yr){return or in Gt||(Gt[or]=yr>Kt.length?"":Kt[yr]),Gt},{},pt),dr=H("",E(function(Gt){return Gt in rr?rr[Gt]:Gt},Oe));return new wt(dr)},at.boolean_=function(){var A=arguments[0];if(arguments.length!=2)throw new Error("Function boolean expects (object)");return arguments[1].evaluate(A).bool()},at.not=function(A,re){if(arguments.length!=2)throw new Error("Function not expects (object)");return re.evaluate(A).bool().not()},at.true_=function(){if(arguments.length!=1)throw new Error("Function true expects ()");return Z.true_},at.false_=function(){if(arguments.length!=1)throw new Error("Function false expects ()");return Z.false_},at.lang=function(){var A=arguments[0];if(arguments.length!=2)throw new Error("Function lang expects (string)");for(var re,Ce=A.contextNode;Ce!=null&&Ce.nodeType!=9;Ce=Ce.parentNode){var ve=Ce.getAttributeNS(G.XML_NAMESPACE_URI,"lang");if(ve!=null){re=String(ve);break}}if(re==null)return Z.false_;var Oe=arguments[1].evaluate(A).stringValue();return new Z(re.substring(0,Oe.length)==Oe&&(re.length==Oe.length||re.charAt(Oe.length)=="-"))},at.number=function(){var A=arguments[0];if(!(arguments.length==1||arguments.length==2))throw new Error("Function number expects (object?)");return arguments.length==1?new kt(ne.prototype.stringForNode(A.contextNode)):arguments[1].evaluate(A).number()},at.sum=function(){var A=arguments[0],re;if(arguments.length!=2||!ze.instance_of(re=arguments[1].evaluate(A),ne))throw new Error("Function sum expects (node-set)");re=re.toUnsortedArray();for(var Ce=0,ve=0;ve<re.length;ve++)Ce+=new kt(ne.prototype.stringForNode(re[ve])).numberValue();return new kt(Ce)},at.floor=function(){var A=arguments[0];if(arguments.length!=2)throw new Error("Function floor expects (number)");return new kt(Math.floor(arguments[1].evaluate(A).numberValue()))},at.ceiling=function(){var A=arguments[0];if(arguments.length!=2)throw new Error("Function ceiling expects (number)");return new kt(Math.ceil(arguments[1].evaluate(A).numberValue()))},at.round=function(){var A=arguments[0];if(arguments.length!=2)throw new Error("Function round expects (number)");return new kt(Math.round(arguments[1].evaluate(A).numberValue()))};var ze=new Object;ze.isAttribute=function(A){return A&&(A.nodeType===2||A.ownerElement)},ze.splitQName=function(A){var re=A.indexOf(":");return re==-1?[null,A]:[A.substring(0,re),A.substring(re+1)]},ze.resolveQName=function(A,re,Ce,ve){var Oe=ze.splitQName(A);return Oe[0]!=null?Oe[0]=re.getNamespace(Oe[0],Ce):ve?(Oe[0]=re.getNamespace("",Ce),Oe[0]==null&&(Oe[0]="")):Oe[0]="",Oe},ze.isSpace=function(A){return A==9||A==13||A==10||A==32},ze.isLetter=function(A){return A>=65&&A<=90||A>=97&&A<=122||A>=192&&A<=214||A>=216&&A<=246||A>=248&&A<=255||A>=256&&A<=305||A>=308&&A<=318||A>=321&&A<=328||A>=330&&A<=382||A>=384&&A<=451||A>=461&&A<=496||A>=500&&A<=501||A>=506&&A<=535||A>=592&&A<=680||A>=699&&A<=705||A==902||A>=904&&A<=906||A==908||A>=910&&A<=929||A>=931&&A<=974||A>=976&&A<=982||A==986||A==988||A==990||A==992||A>=994&&A<=1011||A>=1025&&A<=1036||A>=1038&&A<=1103||A>=1105&&A<=1116||A>=1118&&A<=1153||A>=1168&&A<=1220||A>=1223&&A<=1224||A>=1227&&A<=1228||A>=1232&&A<=1259||A>=1262&&A<=1269||A>=1272&&A<=1273||A>=1329&&A<=1366||A==1369||A>=1377&&A<=1414||A>=1488&&A<=1514||A>=1520&&A<=1522||A>=1569&&A<=1594||A>=1601&&A<=1610||A>=1649&&A<=1719||A>=1722&&A<=1726||A>=1728&&A<=1742||A>=1744&&A<=1747||A==1749||A>=1765&&A<=1766||A>=2309&&A<=2361||A==2365||A>=2392&&A<=2401||A>=2437&&A<=2444||A>=2447&&A<=2448||A>=2451&&A<=2472||A>=2474&&A<=2480||A==2482||A>=2486&&A<=2489||A>=2524&&A<=2525||A>=2527&&A<=2529||A>=2544&&A<=2545||A>=2565&&A<=2570||A>=2575&&A<=2576||A>=2579&&A<=2600||A>=2602&&A<=2608||A>=2610&&A<=2611||A>=2613&&A<=2614||A>=2616&&A<=2617||A>=2649&&A<=2652||A==2654||A>=2674&&A<=2676||A>=2693&&A<=2699||A==2701||A>=2703&&A<=2705||A>=2707&&A<=2728||A>=2730&&A<=2736||A>=2738&&A<=2739||A>=2741&&A<=2745||A==2749||A==2784||A>=2821&&A<=2828||A>=2831&&A<=2832||A>=2835&&A<=2856||A>=2858&&A<=2864||A>=2866&&A<=2867||A>=2870&&A<=2873||A==2877||A>=2908&&A<=2909||A>=2911&&A<=2913||A>=2949&&A<=2954||A>=2958&&A<=2960||A>=2962&&A<=2965||A>=2969&&A<=2970||A==2972||A>=2974&&A<=2975||A>=2979&&A<=2980||A>=2984&&A<=2986||A>=2990&&A<=2997||A>=2999&&A<=3001||A>=3077&&A<=3084||A>=3086&&A<=3088||A>=3090&&A<=3112||A>=3114&&A<=3123||A>=3125&&A<=3129||A>=3168&&A<=3169||A>=3205&&A<=3212||A>=3214&&A<=3216||A>=3218&&A<=3240||A>=3242&&A<=3251||A>=3253&&A<=3257||A==3294||A>=3296&&A<=3297||A>=3333&&A<=3340||A>=3342&&A<=3344||A>=3346&&A<=3368||A>=3370&&A<=3385||A>=3424&&A<=3425||A>=3585&&A<=3630||A==3632||A>=3634&&A<=3635||A>=3648&&A<=3653||A>=3713&&A<=3714||A==3716||A>=3719&&A<=3720||A==3722||A==3725||A>=3732&&A<=3735||A>=3737&&A<=3743||A>=3745&&A<=3747||A==3749||A==3751||A>=3754&&A<=3755||A>=3757&&A<=3758||A==3760||A>=3762&&A<=3763||A==3773||A>=3776&&A<=3780||A>=3904&&A<=3911||A>=3913&&A<=3945||A>=4256&&A<=4293||A>=4304&&A<=4342||A==4352||A>=4354&&A<=4355||A>=4357&&A<=4359||A==4361||A>=4363&&A<=4364||A>=4366&&A<=4370||A==4412||A==4414||A==4416||A==4428||A==4430||A==4432||A>=4436&&A<=4437||A==4441||A>=4447&&A<=4449||A==4451||A==4453||A==4455||A==4457||A>=4461&&A<=4462||A>=4466&&A<=4467||A==4469||A==4510||A==4520||A==4523||A>=4526&&A<=4527||A>=4535&&A<=4536||A==4538||A>=4540&&A<=4546||A==4587||A==4592||A==4601||A>=7680&&A<=7835||A>=7840&&A<=7929||A>=7936&&A<=7957||A>=7960&&A<=7965||A>=7968&&A<=8005||A>=8008&&A<=8013||A>=8016&&A<=8023||A==8025||A==8027||A==8029||A>=8031&&A<=8061||A>=8064&&A<=8116||A>=8118&&A<=8124||A==8126||A>=8130&&A<=8132||A>=8134&&A<=8140||A>=8144&&A<=8147||A>=8150&&A<=8155||A>=8160&&A<=8172||A>=8178&&A<=8180||A>=8182&&A<=8188||A==8486||A>=8490&&A<=8491||A==8494||A>=8576&&A<=8578||A>=12353&&A<=12436||A>=12449&&A<=12538||A>=12549&&A<=12588||A>=44032&&A<=55203||A>=19968&&A<=40869||A==12295||A>=12321&&A<=12329},ze.isNCNameChar=function(A){return A>=48&&A<=57||A>=1632&&A<=1641||A>=1776&&A<=1785||A>=2406&&A<=2415||A>=2534&&A<=2543||A>=2662&&A<=2671||A>=2790&&A<=2799||A>=2918&&A<=2927||A>=3047&&A<=3055||A>=3174&&A<=3183||A>=3302&&A<=3311||A>=3430&&A<=3439||A>=3664&&A<=3673||A>=3792&&A<=3801||A>=3872&&A<=3881||A==46||A==45||A==95||ze.isLetter(A)||A>=768&&A<=837||A>=864&&A<=865||A>=1155&&A<=1158||A>=1425&&A<=1441||A>=1443&&A<=1465||A>=1467&&A<=1469||A==1471||A>=1473&&A<=1474||A==1476||A>=1611&&A<=1618||A==1648||A>=1750&&A<=1756||A>=1757&&A<=1759||A>=1760&&A<=1764||A>=1767&&A<=1768||A>=1770&&A<=1773||A>=2305&&A<=2307||A==2364||A>=2366&&A<=2380||A==2381||A>=2385&&A<=2388||A>=2402&&A<=2403||A>=2433&&A<=2435||A==2492||A==2494||A==2495||A>=2496&&A<=2500||A>=2503&&A<=2504||A>=2507&&A<=2509||A==2519||A>=2530&&A<=2531||A==2562||A==2620||A==2622||A==2623||A>=2624&&A<=2626||A>=2631&&A<=2632||A>=2635&&A<=2637||A>=2672&&A<=2673||A>=2689&&A<=2691||A==2748||A>=2750&&A<=2757||A>=2759&&A<=2761||A>=2763&&A<=2765||A>=2817&&A<=2819||A==2876||A>=2878&&A<=2883||A>=2887&&A<=2888||A>=2891&&A<=2893||A>=2902&&A<=2903||A>=2946&&A<=2947||A>=3006&&A<=3010||A>=3014&&A<=3016||A>=3018&&A<=3021||A==3031||A>=3073&&A<=3075||A>=3134&&A<=3140||A>=3142&&A<=3144||A>=3146&&A<=3149||A>=3157&&A<=3158||A>=3202&&A<=3203||A>=3262&&A<=3268||A>=3270&&A<=3272||A>=3274&&A<=3277||A>=3285&&A<=3286||A>=3330&&A<=3331||A>=3390&&A<=3395||A>=3398&&A<=3400||A>=3402&&A<=3405||A==3415||A==3633||A>=3636&&A<=3642||A>=3655&&A<=3662||A==3761||A>=3764&&A<=3769||A>=3771&&A<=3772||A>=3784&&A<=3789||A>=3864&&A<=3865||A==3893||A==3895||A==3897||A==3902||A==3903||A>=3953&&A<=3972||A>=3974&&A<=3979||A>=3984&&A<=3989||A==3991||A>=3993&&A<=4013||A>=4017&&A<=4023||A==4025||A>=8400&&A<=8412||A==8417||A>=12330&&A<=12335||A==12441||A==12442||A==183||A==720||A==721||A==903||A==1600||A==3654||A==3782||A==12293||A>=12337&&A<=12341||A>=12445&&A<=12446||A>=12540&&A<=12542},ze.coalesceText=function(A){for(var re=A.firstChild;re!=null;re=re.nextSibling)if(re.nodeType==3||re.nodeType==4){var Ce=re.nodeValue,ve=re;for(re=re.nextSibling;re!=null&&(re.nodeType==3||re.nodeType==4);){Ce+=re.nodeValue;var Oe=re;re=re.nextSibling,Oe.parentNode.removeChild(Oe)}if(ve.nodeType==4){var pt=ve.parentNode;if(ve.nextSibling==null)pt.removeChild(ve),pt.appendChild(pt.ownerDocument.createTextNode(Ce));else{var Kt=ve.nextSibling;pt.removeChild(ve),pt.insertBefore(pt.ownerDocument.createTextNode(Ce),Kt)}}else ve.nodeValue=Ce;if(re==null)break}else re.nodeType==1&&ze.coalesceText(re)},ze.instance_of=function(A,re){for(;A!=null;){if(A.constructor===re)return!0;if(A===Object)return!1;A=A.constructor.superclass}return!1},ze.getElementById=function(A,re){if(A.nodeType==1&&(A.getAttribute("id")==re||A.getAttributeNS(null,"id")==re))return A;for(var Ce=A.firstChild;Ce!=null;Ce=Ce.nextSibling){var ve=ze.getElementById(Ce,re);if(ve!=null)return ve}return null};var ct=function(){function A(Ce,ve){var Oe=ve?": "+ve.toString():"";switch(Ce){case re.INVALID_EXPRESSION_ERR:return"Invalid expression"+Oe;case re.TYPE_ERR:return"Type error"+Oe}return null}function re(Ce,ve,Oe){var pt=Error.call(this,A(Ce,ve)||Oe);return pt.code=Ce,pt.exception=ve,pt}return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re.superclass=Error,re.prototype.toString=function(){return this.message},re.fromMessage=function(Ce,ve){return new re(null,ve,Ce)},re.INVALID_EXPRESSION_ERR=51,re.TYPE_ERR=52,re}();Ze.prototype={},Ze.prototype.constructor=Ze,Ze.superclass=Object.prototype;function Ze(A,re,Ce){this.xpath=Ce.parse(A),this.context=new ut,this.context.namespaceResolver=new Ot(re)}Ze.getOwnerDocument=function(A){return A.nodeType===9?A:A.ownerDocument},Ze.detectHtmlDom=function(A){if(!A)return!1;var re=Ze.getOwnerDocument(A);try{return re.implementation.hasFeature("HTML","2.0")}catch{return!0}},Ze.prototype.evaluate=function(A,re,Ce){this.context.expressionContextNode=A,this.context.caseInsensitive=Ze.detectHtmlDom(A);var ve=this.xpath.evaluate(this.context);return new Xt(ve,re)},Ot.prototype={},Ot.prototype.constructor=Ot,Ot.superclass=Object.prototype;function Ot(A){this.xpathNSResolver=A}Ot.prototype.getNamespace=function(A,re){return this.xpathNSResolver==null?null:this.xpathNSResolver.lookupNamespaceURI(A)},Ht.prototype={},Ht.prototype.constructor=Ht,Ht.superclass=Object.prototype;function Ht(A){this.node=A,this.namespaceResolver=new lt}Ht.prototype.lookupNamespaceURI=function(A){return this.namespaceResolver.getNamespace(A,this.node)},Xt.prototype={},Xt.prototype.constructor=Xt,Xt.superclass=Object.prototype;function Xt(A,re){switch(re==Xt.ANY_TYPE&&(A.constructor===wt?re=Xt.STRING_TYPE:A.constructor===kt?re=Xt.NUMBER_TYPE:A.constructor===Z?re=Xt.BOOLEAN_TYPE:A.constructor===ne&&(re=Xt.UNORDERED_NODE_ITERATOR_TYPE)),this.resultType=re,re){case Xt.NUMBER_TYPE:this.numberValue=A.numberValue();return;case Xt.STRING_TYPE:this.stringValue=A.stringValue();return;case Xt.BOOLEAN_TYPE:this.booleanValue=A.booleanValue();return;case Xt.ANY_UNORDERED_NODE_TYPE:case Xt.FIRST_ORDERED_NODE_TYPE:if(A.constructor===ne){this.singleNodeValue=A.first();return}break;case Xt.UNORDERED_NODE_ITERATOR_TYPE:case Xt.ORDERED_NODE_ITERATOR_TYPE:if(A.constructor===ne){this.invalidIteratorState=!1,this.nodes=A.toArray(),this.iteratorIndex=0;return}break;case Xt.UNORDERED_NODE_SNAPSHOT_TYPE:case Xt.ORDERED_NODE_SNAPSHOT_TYPE:if(A.constructor===ne){this.nodes=A.toArray(),this.snapshotLength=this.nodes.length;return}break}throw new ct(ct.TYPE_ERR)}Xt.prototype.iterateNext=function(){if(this.resultType!=Xt.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=Xt.ORDERED_NODE_ITERATOR_TYPE)throw new ct(ct.TYPE_ERR);return this.nodes[this.iteratorIndex++]},Xt.prototype.snapshotItem=function(A){if(this.resultType!=Xt.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=Xt.ORDERED_NODE_SNAPSHOT_TYPE)throw new ct(ct.TYPE_ERR);return this.nodes[A]},Xt.ANY_TYPE=0,Xt.NUMBER_TYPE=1,Xt.STRING_TYPE=2,Xt.BOOLEAN_TYPE=3,Xt.UNORDERED_NODE_ITERATOR_TYPE=4,Xt.ORDERED_NODE_ITERATOR_TYPE=5,Xt.UNORDERED_NODE_SNAPSHOT_TYPE=6,Xt.ORDERED_NODE_SNAPSHOT_TYPE=7,Xt.ANY_UNORDERED_NODE_TYPE=8,Xt.FIRST_ORDERED_NODE_TYPE=9;function ur(A,re){A.createExpression=function(Ce,ve){try{return new Ze(Ce,ve,re)}catch(Oe){throw new ct(ct.INVALID_EXPRESSION_ERR,Oe)}},A.createNSResolver=function(Ce){return new Ht(Ce)},A.evaluate=function(Ce,ve,Oe,pt,Kt){if(pt<0||pt>9)throw{code:0,toString:function(){return"Request type not supported"}};return A.createExpression(Ce,Oe,re).evaluate(ve,pt,Kt)}}try{var cr=!0;try{document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)&&(cr=!1)}catch{}cr&&ur(document,new U)}catch{}ur(g,new U),function(){var A=new U,re=new lt,Ce=new yt,ve=new Rt;function Oe(ir){return{getNamespace:function(Rr,Vr){var Zr=ir(Rr,Vr);return Zr||re.getNamespace(Rr,Vr)}}}function pt(ir){return Oe(ir.getNamespace.bind(ir))}function Kt(ir){return Oe(function(Rr){return ir[Rr]})}function rr(ir){return ir&&typeof ir.getNamespace=="function"?pt(ir):typeof ir=="function"?Oe(ir):typeof ir=="object"?Kt(ir):re}function dr(ir){if(ir===null||typeof ir>"u"||ir instanceof wt||ir instanceof Z||ir instanceof kt||ir instanceof ne)return ir;switch(typeof ir){case"string":return new wt(ir);case"boolean":return new Z(ir);case"number":return new kt(ir)}var Rr=new ne;return Rr.addArray([].concat(ir)),Rr}function Gt(ir){return function(Rr){var Vr=Array.prototype.slice.call(arguments,1).map(function(Et){return Et.evaluate(Rr)}),Zr=ir.apply(this,[].concat(Rr,Vr));return dr(Zr)}}function or(ir){return{getFunction:function(Rr,Vr){var Zr=ir(Rr,Vr);return Zr?Gt(Zr):Ce.getFunction(Rr,Vr)}}}function yr(ir){return or(ir.getFunction.bind(ir))}function mr(ir){return or(function(Rr){return ir[Rr]})}function Nr(ir){return ir&&typeof ir.getFunction=="function"?yr(ir):typeof ir=="function"?or(ir):typeof ir=="object"?mr(ir):Ce}function Ar(ir){return{getVariable:function(Rr,Vr){var Zr=ir(Rr,Vr);return dr(Zr)}}}function br(ir){if(ir){if(typeof ir.getVariable=="function")return Ar(ir.getVariable.bind(ir));if(typeof ir=="function")return Ar(ir);if(typeof ir=="object")return Ar(function(Rr){return ir[Rr]})}return ve}function qr(ir,Rr,Vr){ir in Vr&&(Rr[ir]=Vr[ir])}function en(ir){var Rr=new ut;return ir?(Rr.namespaceResolver=rr(ir.namespaces),Rr.functionResolver=Nr(ir.functions),Rr.variableResolver=br(ir.variables),Rr.expressionContextNode=ir.node,qr("allowAnyNamespaceForNoPrefix",Rr,ir),qr("isHtml",Rr,ir)):Rr.namespaceResolver=re,Rr}function Wr(ir,Rr){var Vr=en(Rr);return ir.evaluate(Vr)}var rn={evaluate:function(ir){return Wr(this.expression,ir)},evaluateNumber:function(ir){return this.evaluate(ir).numberValue()},evaluateString:function(ir){return this.evaluate(ir).stringValue()},evaluateBoolean:function(ir){return this.evaluate(ir).booleanValue()},evaluateNodeSet:function(ir){return this.evaluate(ir).nodeset()},select:function(ir){return this.evaluateNodeSet(ir).toArray()},select1:function(ir){return this.select(ir)[0]}};function Xr(ir){var Rr=A.parse(ir);return Object.create(rn,{expression:{value:Rr}})}g.parse=Xr}(),Y(g,{XPath:G,XPathParser:U,XPathResult:Xt,Step:rt,PathExpr:Qe,NodeTest:tt,LocationPath:st,OrOperation:be,AndOperation:ae,BarOperation:jt,EqualsOperation:ie,NotEqualOperation:Se,LessThanOperation:mt,GreaterThanOperation:it,LessThanOrEqualOperation:Tt,GreaterThanOrEqualOperation:ht,PlusOperation:Ye,MinusOperation:St,MultiplyOperation:$t,DivOperation:Lt,ModOperation:Mt,UnaryMinusOperation:X,FunctionCall:It,VariableReference:vt,XPathContext:ut,XNodeSet:ne,XBoolean:Z,XString:wt,XNumber:kt,NamespaceResolver:lt,FunctionResolver:yt,VariableResolver:Rt,Utilities:ze}),g.select=function(A,re,Ce){return g.selectWithResolver(A,re,null,Ce)},g.useNamespaces=function(A){var re={mappings:A||{},lookupNamespaceURI:function(Ce){return this.mappings[Ce]}};return function(Ce,ve,Oe){return g.selectWithResolver(Ce,ve,re,Oe)}},g.selectWithResolver=function(A,re,Ce,ve){var Oe=new Ze(A,Ce,new U),pt=Xt.ANY_TYPE,Kt=Oe.evaluate(re,pt,null);return Kt.resultType==Xt.STRING_TYPE?Kt=Kt.stringValue:Kt.resultType==Xt.NUMBER_TYPE?Kt=Kt.numberValue:Kt.resultType==Xt.BOOLEAN_TYPE?Kt=Kt.booleanValue:(Kt=Kt.nodes,ve&&(Kt=Kt[0])),Kt},g.select1=function(A,re){return g.select(A,re,!0)}})(d)})(xpath);const styles="",BasicRow=({dataChunk:c,indexKey:d,chunkSize:g})=>{var _,E;if(!c[0].value&&!((_=c[1])!=null&&_.value)&&!((E=c[2])!=null&&E.value))return null;let v=null,b=c;return g===3&&(b=c.slice(0,2),[v]=c.slice(2)),React.createElement(React.Fragment,null,React.createElement("tr",null,b.map((R,M)=>{var O,H;if(!R.value)return null;let P=1;return(M===0&&(!b[M+1]||!b[M+1].value)||M===1&&(!b[M-1]||!b[M-1].value))&&(P=3),React.createElement(React.Fragment,{key:`${b[0].label}-${String(b[0].value)}-${M}-${d}-${((O=b[1])==null?void 0:O.label)||""}-${((H=b[1])==null?void 0:H.value)||""}`},React.createElement("td",{className:"ctw-ccda-common-td1",rowSpan:v&&v.value&&M===0?2:1},R.label.replace(/:/g,"")),React.createElement("td",{className:"ctw-ccda-common-td2",colSpan:P,rowSpan:v&&v.value&&M===0?2:1},R.value))})),v&&v.value&&React.createElement("tr",null,React.createElement("td",{className:"ctw-ccda-common-td1"},v.label.replace(/:/g,"")),React.createElement("td",{className:"ctw-ccda-common-td2"},v.value)))};try{BasicRow.displayName="BasicRow",BasicRow.__docgenInfo={description:"",displayName:"BasicRow",props:{dataChunk:{defaultValue:null,description:"",name:"dataChunk",required:!0,type:{name:"TableInfo[]"}},indexKey:{defaultValue:null,description:"",name:"indexKey",required:!0,type:{name:"number"}},chunkSize:{defaultValue:null,description:"",name:"chunkSize",required:!1,type:{name:"enum",value:[{value:"2"},{value:"3"}]}}}}}catch(c){}const TupleRow=({tuple:c,indexKey:d})=>!c[0].value&&!c[1].value?null:React.createElement("tr",null,c.map((g,v)=>{if(!g.value)return null;let b=1;return(v===0&&!c[1].value||v===1&&!c[0].value)&&(b=3),React.createElement(React.Fragment,{key:`${c[0].label}-${c[0].value}-${v}-${d}-${c[1].label||""}-${c[1].value}`},React.createElement("td",{className:"ctw-ccda-common-td1"},g.label.replace(/:/g,"")),React.createElement("td",{className:"ctw-ccda-common-td2",colSpan:b},g.value))}));try{TupleRow.displayName="TupleRow",TupleRow.__docgenInfo={description:"",displayName:"TupleRow",props:{tuple:{defaultValue:null,description:"",name:"tuple",required:!0,type:{name:"[TableInfo, TableInfo]"}},indexKey:{defaultValue:null,description:"",name:"indexKey",required:!0,type:{name:"number"}}}}}catch(c){}const Table=({data:c,chunkSize:d=2})=>{const[g,v]=lodash.exports.partition(c,_=>!lodash.exports.isArray(_)),b=lodash.exports.chunk(g,d);return React.createElement("table",{className:"ctw-ccda-common-table"},React.createElement("tbody",null,b.map((_,E)=>React.createElement(BasicRow,{key:`${_[0].label}-${E}`,dataChunk:_,chunkSize:d,indexKey:E})),v.map((_,E)=>React.createElement(TupleRow,{key:`${_[0].label}-${_[1].label}-${E}`,tuple:_,indexKey:E}))))};try{Table.displayName="Table",Table.__docgenInfo={description:"",displayName:"Table",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"(TableInfo | [TableInfo, TableInfo])[]"}},chunkSize:{defaultValue:{value:"2"},description:"",name:"chunkSize",required:!1,type:{name:"enum",value:[{value:"2"},{value:"3"}]}}}}}catch(c){}const addressParser=c=>{var g;if(c.text)return c.text;let d="";return d+=c.use?`${lodash.exports.capitalize(c.use)}: `:"",d+=lodash.exports.isEmpty(c.line)?"":`${(g=c.line)==null?void 0:g.join(`
`)}
`,d+=c.city?`${c.city}, `:"",d+=c.state?`${c.state} `:"",d+=c.postalCode||"",d+=c.country?`
${c.country}`:"",d},displayForAddress=c=>lodash.exports.isEmpty(c)?"":lodash.exports.isArray(c)?c.map(addressParser).join(`
`):addressParser(c);function isHumanNameArray(c){return lodash.exports.isArray(c)&&c.every(d=>typeof d=="object")}function isStringArray(c){return lodash.exports.isArray(c)&&c.every(d=>typeof d=="string")}const nameParser=c=>{if(c.text)return c.text;let d="";return c.given&&c.given.length>0&&(d=c.given.join(" "),c.family&&(d=`${d} ${c.family}`)),c.prefix&&c.prefix.length>0&&(d=`${c.prefix.join(" ")} ${d}`),d},displayForName=c=>lodash.exports.isEmpty(c)?"":typeof c=="string"?c:isStringArray(c)?c.reduce((d,g,v)=>`${d}${v===0?"":`
`}${g}`,""):isHumanNameArray(c)?c.map(nameParser).join(", "):nameParser(c),telecomParser=({use:c,system:d,value:g})=>{const v=c?` (${c})`:"";return`${d?`${lodash.exports.capitalize(d)}${v}:`:""} ${g}`.trim()},displayForTelecom=c=>lodash.exports.isEmpty(c)?"":lodash.exports.isArray(c)?c.map(telecomParser).join(`
`):telecomParser(c),addressUseMap={BAD:"bad",DIR:"direct",H:"home",HP:"primary home",HV:"vacation home",PHYS:"physical",PST:"postal",PUB:"public",TMP:"temporary",WP:"work",CONF:"confidential"},getAddress=c=>{if(!c)return"";const d=g=>{const v=String(xpath.select1("string(@use)",g)),b={line:lodash.exports.map(xpath.select("*[name()='streetAddressLine']",g),_=>String(xpath.select("string(text())",_))).filter(Boolean),city:String(xpath.select("string(*[name()='city'])",g)),state:String(xpath.select("string(*[name()='state'])",g)),postalCode:String(xpath.select("string(*[name()='postalCode'])",g)),country:String(xpath.select("string(*[name()='country'])",g)),use:addressUseMap[v]};return displayForAddress(b)};return lodash.exports.isArray(c)?c.map(d).join(`
`):d(c)},contactPointUseMap={BAD:"bad",CONF:"confidential",OLD:"old",H:"home",HP:"primary home",HV:"vacation Home",TMP:"temporary",WP:"work",DIR:"direct",PUB:"public",AS:"answering service",EC:"emergency:",MC:"mobile",PG:"pager"},contactPointTelecomMap={tel:"phone",mailto:"email"},getTelecom=c=>{if(!c)return"";const d=g=>{const b=String(xpath.select1("string(@value)",g)).split(":");let _,E;if(b.length===2&&([_,E]=b),b.length===1&&([E]=b),!E)return"";const R=E.includes("@")?contactPointTelecomMap.mailto:contactPointTelecomMap.tel,P={system:contactPointTelecomMap[_]||R,value:E,use:contactPointUseMap[String(xpath.select1("string(@use)",g))]};return displayForTelecom(P)};return lodash.exports.isArray(c)?c.map(d).join(`
`):d(c)},getContactDetails=(c,d)=>{const g=getAddress(c),v=getTelecom(d);return`${g||""}${g&&v?`
`:""}${v||""}`},humanNameUseMap={A:"Artist/Stage",ABC:"Alphabetic",ASGN:"Assigned",C:"License",I:"Indigenous/Tribal",IDE:"Ideographic",L:"Legal",P:"Pseudonym",PHON:"Phonetic",R:"Religious",SNDX:"Soundex",SRCH:"Search",SYL:"Syllabic"},getHumanName=c=>{if(!c)return"";const d=g=>{const v={use:humanNameUseMap[String(xpath.select("string(@use)",g))],given:lodash.exports.map(xpath.select("(*[name()='given'])",g),b=>String(xpath.select1("string(text())",b))),family:String(xpath.select1("string(*[name()='family']/text())",g)),prefix:lodash.exports.map(xpath.select("(*[name()='prefix'])",g),b=>String(xpath.select1("string(text())",b))),suffix:lodash.exports.map(xpath.select("(*[name()='suffix'])",g),b=>String(xpath.select1("string(text())",b)))};return displayForName(v)};return lodash.exports.isArray(c)?c.map(d).join(`
`):d(c)},getId=c=>{if(!c)return"";const d=String(xpath.select1("string(@root)",c)),g=String(xpath.select1("string(@extension)",c));return`${g}${g?" (":""}${d}${g?")":""}`},getPeriod=c=>{if(!c)return{};const d=String(xpath.select1("string(*[name()='low']/@value)",c)),g=String(xpath.select1("string(*[name()='high']/@value)",c));if(!d&&!g)return{};if(d&&!g)return{start:displayDateTimeasString(ccdaDatetimeToISO(d))};if(!d&&g)return{end:displayDateTimeasString(ccdaDatetimeToISO(g))};let v=displayDateTimeasString(ccdaDatetimeToISO(d)),b=displayDateTimeasString(ccdaDatetimeToISO(g));return(v.includes("T")||b.includes("T"))&&(v=displayDateTimeasString(ccdaDatetimeToISO(v)),b=displayDateTimeasString(ccdaDatetimeToISO(b))),isBefore(new Date(v),new Date(b))||isEqual(new Date(v),new Date(b))?{start:v,end:b}:{start:v}},replaceInXML=(c,d,g,v=!0)=>{if(lodash.exports.isArray(d))return d.reduce((_,E)=>replaceInXML(_,E,g),c);const b=v?lodash.exports.escapeRegExp:lodash.exports.identity;return c.replace(new RegExp(b(d),"g"),g)},replaceTag=(c,d,g)=>{const v=[`</${d}>`,`<${d}>`,`</${d}`,`<${d}`],b=[`</${g}>`,`<${g}>`,`</${g}`,`<${g}`];return v.reduce((_,E,R)=>replaceInXML(_,v[R],b[R]),c)},fixHtml=c=>{let d=c.toString();return d=replaceInXML(d,["<list/>","<item/>","<content/>","<paragraph/>","<section/>","<br/>",'<text xmlns="urn:hl7-org:v3">',"<text />","<text/>"],""),d=replaceInXML(d,' styleCode="(.*?)"',"",!1),d=replaceTag(d,"section","div"),d=replaceTag(d,"list","ul"),d=replaceTag(d,"item","li"),d=replaceTag(d,"content","div"),d=replaceTag(d,"paragraph","p"),d},isGeneralInfoExist=c=>!!c,isExtendedGeneralInfoExist=c=>!!c,getAuthenticatorData=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='authenticator']",c);if(!lodash.exports.isEmpty(d))return d.map(g=>{const v=xpath.select1("*[name()='assignedEntity']",g);if(!v)return;const b=xpath.select1("*[name()='assignedPerson']",v),_=getHumanName(xpath.select("*[name()='name']",b)),E=getContactDetails(xpath.select("*[name()='addr']",v),xpath.select("*[name()='telecom']",v)),R=displayDateTimeasString(ccdaDatetimeToISO(String(xpath.select1("string(*[name()='time']/@value)",g))));return{name:_,contactDetails:E,time:R}}).filter(isExtendedGeneralInfoExist)},Authenticator=({document:c})=>{const d=getAuthenticatorData(c);if(!d||lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Authenticator",value:`${v.name||"Unknown"}${v.time?` signed at ${v.time}`:""}`},{label:"Contact Details",value:v.contactDetails}]);return React.createElement(Table,{data:g})};try{Authenticator.displayName="Authenticator",Authenticator.__docgenInfo={description:"",displayName:"Authenticator",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getAuthor=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='author']",c);return lodash.exports.isEmpty(d)?void 0:d.map(v=>{const b=xpath.select1("*[name()='assignedAuthor']/*[name()='assignedPerson']/*[name()='name']",v),_=xpath.select1("*[name()='assignedAuthor']/*[name()='assignedAuthoringDevice']",v);let E="";if(b)E=getHumanName(b);else if(_){const P=String(xpath.select1("string(*[name()='manufacturerModelName'])",_)),O=String(xpath.select1("string(*[name()='softwareName'])",_));E=[P,O].filter(Boolean).join("; ")}const R=String(xpath.select1("string(*[name()='assignedAuthor']/*[name()='representedOrganization']/*[name()='name'])",v)),M=displayDateTimeasString(ccdaDatetimeToISO(String(xpath.select1("string(*[name()='time'])",v))));return[{label:"Name:",value:E},{label:"Organization:",value:R},{label:"Authored on",value:M}]}).reduce((v,b,_)=>({...v,[`author${_+1}`]:b}),{})},getAuthorData=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='author']",c);if(lodash.exports.isEmpty(d))return;const g=getAuthor(c);return d.map((v,b)=>{const _=xpath.select1("*[name()='assignedAuthor']",v),E=getContactDetails(xpath.select("*[name()='addr']",_),xpath.select("*[name()='telecom']",_)),R=xpath.select1("*[name()='representedOrganization']",_),M={name:g[`author${b+1}`][0].value,contactDetails:E,organization:{name:g[`author${b+1}`][1].value,contactDetails:""}};if(R){const P=getContactDetails(xpath.select("*[name()='addr']",R),xpath.select("*[name()='telecom']",R));return{...M,organization:{...M.organization,contactDetails:P}}}return M})},Author=({document:c})=>{const d=getAuthorData(c);if(!d||lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Author",value:`${v.name||"Unknown"}${v.organization.name?`, Organization: ${v.organization.name}`:""}`},{label:"Contact Details",value:v.contactDetails},{label:"Contact Details (Organization)",value:v.organization.contactDetails}]);return React.createElement(Table,{data:g,chunkSize:3})};try{Author.displayName="Author",Author.__docgenInfo={description:"",displayName:"Author",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getConsent=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='authorization']/*[name()='consent']",c);return lodash.exports.isEmpty(d)?void 0:d.map(v=>{const b=getId(xpath.select1("*[name()='id']",v)),_=String(xpath.select1("string(*[name()='code']/@displayName)",v)),E=String(xpath.select1("string(*[name()='statusCode']/@code)",v));return[{label:"ID:",value:b},{label:"Code:",value:_},{label:"Status:",value:E}]}).reduce((v,b,_)=>({...v,[`consent${_+1}`]:b}),{})},getAuthorizationData=c=>{const d=getConsent(c);return Object.values(d||{})},Authorization=({document:c})=>{const d=getAuthorizationData(c);if(lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Consent",value:`Order: ${v[0].value||"Unknown"}, ${v[1].value||"Unknown"}, ${v[2].value||"Unknown"}`},{label:"",value:""}]);return React.createElement(Table,{data:g})};try{Authorization.displayName="Authorization",Authorization.__docgenInfo={description:"",displayName:"Authorization",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getCustodianData=c=>{const d=xpath.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']",c);if(!d)return;const g=String(xpath.select1("string(*[name()='name'])",d)),v=getContactDetails(xpath.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']/*[name()='addr']",c),xpath.select1("*[name()='ClinicalDocument']/*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']/*[name()='telecom']",c));return{name:g,contactDetails:v}},Custodian=({document:c})=>{const d=getCustodianData(c);if(!d)return null;const{name:g,contactDetails:v}=d,b=[{label:"Custodian",value:g},{label:"Contact Details",value:v}];return React.createElement(Table,{data:b})};try{Custodian.displayName="Custodian",Custodian.__docgenInfo={description:"",displayName:"Custodian",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getDataEntererData=c=>{const d=xpath.select1("*[name()='ClinicalDocument']/*[name()='dataEnterer']/*[name()='assignedEntity']",c);if(!d)return;const g=xpath.select1("*[name()='assignedPerson']",d),v=getHumanName(xpath.select("*[name()='name']",g)),b=getContactDetails(xpath.select("*[name()='addr']",d),xpath.select("*[name()='telecom']",d));return{name:v,contactDetails:b}},DataEnterer=({document:c})=>{const d=getDataEntererData(c);if(!d)return null;const{name:g,contactDetails:v}=d,b=[{label:"Data Enterer",value:g},{label:"Contact Details",value:v}];return React.createElement(Table,{data:b})};try{DataEnterer.displayName="DataEnterer",DataEnterer.__docgenInfo={description:"",displayName:"DataEnterer",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const confidentialityCodeMap={N:"normal",R:"restricted",V:"very restricted"},getDocumentData=c=>{const d=getId(xpath.select1("*[name()='ClinicalDocument']/*[name()='id']",c)),v=displayDateTimeasString(ccdaDatetimeToISO(String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='effectiveTime']/@value)",c)))),b=String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='versionNumber']/@value)",c)),_=getId(xpath.select1("*[name()='ClinicalDocument']/*[name()='setId']",c)),E=confidentialityCodeMap[String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='confidentialityCode']/@code)",c))],R=String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='code']/@displayName)",c)),M=String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='languageCode']/@code)",c));return{id:d,createdOn:v,version:b,setId:_,confidentialityCode:E,code:R,languageCode:M}},Document=({document:c})=>{const{id:d,createdOn:g,version:v,setId:b,confidentialityCode:_,code:E,languageCode:R}=getDocumentData(c),M=[{label:"Document",value:React.createElement(React.Fragment,null,React.createElement("b",null,"ID: "),d,b&&React.createElement(React.Fragment,null,React.createElement("br",null),React.createElement("b",null,"Set ID: "),b))},{label:"Created on",value:g},{label:"Version",value:v||"Unknown"},{label:"Confidentiality",value:_},{label:"Code",value:E},{label:"Language",value:R}];return React.createElement(Table,{data:M})};try{Document.displayName="Document",Document.__docgenInfo={description:"",displayName:"Document",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getDocumentationOf=c=>{const d=xpath.select("//*[name()='documentationOf']/*[name()='serviceEvent']",c);return lodash.exports.isEmpty(d)?void 0:d.map(v=>{const b=xpath.select1("*[name()='effectiveTime']",v),_=getPeriod(b),R=xpath.select("*[name()='performer']/*[name()='assignedEntity']/*[name()='assignedPerson']/*[name()='name']",v).map(M=>getHumanName(M));return[{label:"Date/Time:",value:_.start||_.end?`from ${_.start?displayDateTimeasString(ccdaDatetimeToISO(_.start)):"unknown"} to ${_.end?displayDateTimeasString(ccdaDatetimeToISO(_.end)):"unknown"}`:""},...R.map(M=>({label:"Performer:",value:M}))]}).reduce((v,b,_)=>({...v,[`documentationOf${_+1}`]:b}),{})},getDocumentationOfData=c=>{const d=xpath.select("//*[name()='documentationOf']/*[name()='serviceEvent']",c);if(lodash.exports.isEmpty(d))return;const g=getDocumentationOf(c);return d.map((v,b)=>{const E=xpath.select("*[name()='performer']",v).map((R,M)=>{const P=String(xpath.select1("string(*[name()='functionCode']/@displayName)",R)),O=lodash.exports.get(g,`documentationOf${b+1}[${M+1}].value`),H=getContactDetails(xpath.select("*[name()='assignedEntity']/*[name()='addr']",R),xpath.select("*[name()='assignedEntity']/*[name()='telecom']",R));if(!(!O&&!P&&!H))return{functionCode:P,name:O,contactDetails:H}});return{dateTime:lodash.exports.get(g,`documentationOf${b+1}[0].value`),finalPerformers:E.filter(isGeneralInfoExist)}})},DocumentationOf=({document:c})=>{const d=getDocumentationOfData(c);if(!d||lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Documentation of - Date/Time",value:v.dateTime},{label:"",value:""},...v.finalPerformers.flatMap(b=>[{label:"Performer",value:`${b.name||"Unknown"}${b.functionCode?` - ${b.functionCode}`:""}`},{label:"Contact Details",value:b.contactDetails}])]);return React.createElement(Table,{data:g})};try{DocumentationOf.displayName="DocumentationOf",DocumentationOf.__docgenInfo={description:"",displayName:"DocumentationOf",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getEncounter=c=>{const d=xpath.select1("*[name()='ClinicalDocument']/*[name()='componentOf']/*[name()='encompassingEncounter']",c);if(!d)return;const g=getId(xpath.select1("*[name()='id']",d)),v=String(xpath.select1("string(*[name()='code']/@displayName)",d)),b=getPeriod(xpath.select1("*[name()='effectiveTime']",d));return[{label:"ID:",value:b.start||b.end||g?g||"Unknown":""},{label:"Type:",value:v},{label:"Date/Time:",value:b.start||b.end?`from ${b.start?displayDateTimeasString(ccdaDatetimeToISO(b.start)):"unknown"} to ${b.end?displayDateTimeasString(ccdaDatetimeToISO(b.end)):"unknown"}`:""}]},getEncounterData=c=>{const d=xpath.select1("*[name()='ClinicalDocument']/*[name()='componentOf']/*[name()='encompassingEncounter']",c);if(!d)return;const g=getEncounter(c),v=String(xpath.select1("string(*[name()='dischargeDispositionCode']/@displayName)",d)),b=getId(xpath.select1("*[name()='location']/*[name()='healthCareFacility']/*[name()='id']",d));return{id:g[0],type:g[1],dateTime:g[2],dischargeDisposition:v,encounterLocation:b?`ID: ${b}`:null}},Encounter=({document:c})=>{const d=getEncounterData(c);if(!d)return null;const{dischargeDisposition:g,encounterLocation:v,id:b,type:_,dateTime:E}=d,R=[{label:"Encounter",value:E.value||g||v||b.value?React.createElement(React.Fragment,null,React.createElement("b",null,"ID: "),b.value||"Unknown",_.value&&React.createElement(React.Fragment,null,React.createElement("br",null),React.createElement("b",null,"Type: "),_.value)):null},{label:"Date/Time",value:E.value},{label:"Discharge Disposition",value:g},{label:"Encounter Location",value:v}];return React.createElement(Table,{data:R})};try{Encounter.displayName="Encounter",Encounter.__docgenInfo={description:"",displayName:"Encounter",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getInformantData=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='informant']",c);if(!lodash.exports.isEmpty(d))return d.map(g=>{const v=xpath.select1("*[name()='assignedEntity']",g);if(v){const _=xpath.select1("*[name()='assignedPerson']",v),E=getHumanName(xpath.select("*[name()='name']",_)),R=getContactDetails(xpath.select("*[name()='addr']",v),xpath.select("*[name()='telecom']",v));return{name:E,contactDetails:R,relationship:""}}const b=xpath.select1("*[name()='relatedEntity']",g);if(b){const _=xpath.select1("*[name()='relatedPerson']",b),E=getHumanName(xpath.select("*[name()='name']",_)),R=getContactDetails(xpath.select("*[name()='addr']",b),xpath.select("*[name()='telecom']",b)),M=String(xpath.select1("string(*[name()='code']/@displayName)",b)).toLowerCase();return{name:E,contactDetails:R,relationship:M}}}).filter(isExtendedGeneralInfoExist)},Informant=({document:c})=>{const d=getInformantData(c);if(!d||lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Informant",value:`${v.name||"Unknown"}${v.relationship?` - ${v.relationship}`:""}`},{label:"Contact Details",value:v.contactDetails}]);return React.createElement(Table,{data:g})};try{Informant.displayName="Informant",Informant.__docgenInfo={description:"",displayName:"Informant",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getInformationRecipientData=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='informationRecipient']/*[name()='intendedRecipient']",c);if(!lodash.exports.isEmpty(d))return d.map(g=>{const v=xpath.select1("*[name()='informationRecipient']",g),b=xpath.select1("*[name()='receivedOrganization']",g);if(v){const M=getHumanName(xpath.select1("*[name()='name']",v)),P=String(xpath.select1("string(*[name()='name']/node())",b));return{name:M,contactDetails:"",organization:{name:P,contactDetails:""}}}const _=xpath.select("*[name()='id']",g).map(getId).join(", "),E=getContactDetails(xpath.select("*[name()='addr']",g),xpath.select("*[name()='telecom']",g)),R={name:_,contactDetails:E,organization:{name:"",contactDetails:""}};if(b){const M=String(xpath.select1("string(*[name()='name']/node())",b)),P=getContactDetails(xpath.select("*[name()='addr']",b),xpath.select("*[name()='telecom']",b));return{...R,organization:{name:M,contactDetails:P}}}return R})},InformationRecipient=({document:c})=>{const d=getInformationRecipientData(c);if(!d||lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Information Recipient",value:v.name},{label:"Contact Details",value:v.contactDetails},{label:"Organization",value:v.organization.name},{label:"Contact Details (Organization)",value:v.organization.contactDetails}]);return React.createElement(Table,{data:g})};try{InformationRecipient.displayName="InformationRecipient",InformationRecipient.__docgenInfo={description:"",displayName:"InformationRecipient",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getInFulfillmentOf=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='inFulfillmentOf']/*[name()='order']",c);return lodash.exports.isEmpty(d)?void 0:d.map(v=>{const b=getId(xpath.select1("*[name()='id']",v)),_=String(xpath.select1("string(*[name()='code']/@displayName)",v));return[{label:"Order ID:",value:b},{label:"Code:",value:_}]}).reduce((v,b,_)=>({...v,[`inFulfillmentOf${_+1}`]:b}),{})},getInFulfillmentOfData=c=>{const d=getInFulfillmentOf(c);return Object.values(d||{})},InFulfillmentOf=({document:c})=>{const d=getInFulfillmentOfData(c);if(lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"In Fulfillment Of",value:`Order: ${v[0].value||"Unknown"}, ${v[1].value||"Unknown"}`},{label:"",value:""}]);return React.createElement(Table,{data:g})};try{InFulfillmentOf.displayName="InFulfillmentOf",InFulfillmentOf.__docgenInfo={description:"",displayName:"InFulfillmentOf",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getLegalAuthenticatorData=c=>{const d=xpath.select1("*[name()='ClinicalDocument']/*[name()='legalAuthenticator']",c);if(!d)return;const g=xpath.select1("*[name()='assignedEntity']",d),v=xpath.select1("*[name()='assignedPerson']",g),b=getHumanName(xpath.select("*[name()='name']",v)),_=getContactDetails(xpath.select("*[name()='addr']",g),xpath.select("*[name()='telecom']",g)),E=displayDateTimeasString(ccdaDatetimeToISO(String(xpath.select1("string(*[name()='time']/@value)",d))));return{name:b,contactDetails:_,time:E}},LegalAuthenticator=({document:c})=>{const d=getLegalAuthenticatorData(c);if(!d)return null;const{name:g,time:v,contactDetails:b}=d,_=v?` signed at ${v}`:"",E=[{label:"Legal Authenticator",value:`${g}${_}`},{label:"Contact Details",value:b}];return React.createElement(Table,{data:E})};try{LegalAuthenticator.displayName="LegalAuthenticator",LegalAuthenticator.__docgenInfo={description:"",displayName:"LegalAuthenticator",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getParticipantData=c=>{const d=xpath.select("*[name()='ClinicalDocument']/*[name()='participant']",c);if(!lodash.exports.isEmpty(d))return d.map(g=>{const v=xpath.select1("*[name()='associatedEntity']",g);if(v){const b=xpath.select1("*[name()='associatedPerson']",v),_=getHumanName(xpath.select("*[name()='name']",b)),E=getContactDetails(xpath.select("*[name()='addr']",v),xpath.select("*[name()='telecom']",v)),R=xpath.select1("*[name()='time']",g),M=getPeriod(R),P=String(xpath.select1("string(*[name()='code']/@displayName)",v)).toLowerCase();return{name:_,contactDetails:E,time:`from ${M.start} to ${M.end}`,relationship:P}}}).filter(isExtendedGeneralInfoExist)},Participant=({document:c})=>{const d=getParticipantData(c);if(!d||lodash.exports.isEmpty(d))return null;const g=d.flatMap(v=>[{label:"Participant",value:`${v.name}${v.relationship?` - ${v.relationship}`:""}`},{label:"Contact Details",value:v.contactDetails}]);return React.createElement(Table,{data:g})};try{Participant.displayName="Participant",Participant.__docgenInfo={description:"",displayName:"Participant",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getGuardian$1=c=>{const d=xpath.select("*[name()='patient']/*[name()='guardian']",c);if(!lodash.exports.isEmpty(d))return d.map(g=>{const v=xpath.select1("*[name()='guardianPerson']",g),b=String(xpath.select1("string(*[name()='code']/@displayName)",g)),_=getHumanName(xpath.select("*[name()='name']",v)),E=b?` - ${b}`:"";return{label:"",value:`${_}${E}`}})},getPatient=c=>{const g=xpath.select("*[name()='ClinicalDocument']/*[name()='recordTarget']/*[name()='patientRole']",c).map(v=>{const b=xpath.select1("*[name()='patient']",v),_=getHumanName(xpath.select1("*[name()='name']",b)),E=xpath.select("*[name()='id']",v).map(getId).join(", "),R=String(xpath.select1("string(*[name()='administrativeGenderCode']/@displayName)",b)),M=ccdaDatetimeToISO(String(xpath.select1("string(*[name()='birthTime']/@value)",b)))||new Date,P=ccdaDatetimeToISO(String(xpath.select1("string(*[name()='sdtc:deceasedTime']/@value)",b)))||new Date,O=String(xpath.select1("string(*[name()='sdtc:deceasedInd']/@value)",b))==="true",H=O?"deceased":differenceInYears(isValid$1(P)?P:new Date,M),Q=`${format(M,"MMMM dd, yyyy")} (${H}${O?"":" yr"}${isValid$1(P)?" - deceased":""})`,ee=getGuardian$1(v);return{patient:[{label:"Name:",value:_},{label:"ID:",value:E},{label:"Date of birth:",value:Q},{label:"Gender:",value:R}],guardian:ee}});return lodash.exports.map(g,v=>[v.patient,v.guardian]).reduce((v,b,_)=>({...v,[`patient${_+1}`]:b[0],[`guardian${_+1}`]:b[1]}),{})},getBirthPlace=c=>{const d=xpath.select1("*[name()='birthplace']/*[name()='place']/*[name()='addr']",c);return d?getAddress(d):""},getEthnicity=c=>{const d=xpath.select1("*[name()='ethnicGroupCode']",c);if(d)return String(xpath.select1("string(@displayName)",d));const g=xpath.select("*[name()='sdtc:ethnicGroupCode']",c);return lodash.exports.isEmpty(g)?"":String(xpath.select1("string(@displayName)",g[0]))},getGuardian=c=>{const d=xpath.select("//*[name()='patientRole']/*[name()='patient']/*[name()='guardian']",document);if(!d||lodash.exports.isEmpty(d))return;const g=getGuardian$1(c);return d.map((v,b)=>{const _=getContactDetails(xpath.select("*[name()='addr']",v),xpath.select("*[name()='telecom']",v));return{name:g[b].value,contactDetails:_}})},getLanguage=c=>xpath.select("*[name()='languageCommunication']",c).reduce((g,v,b)=>{const _=String(xpath.select1("string(*[name()='languageCode']/@code)",v));if(!_)return g;const E=String(xpath.select1("string(*[name()='preferenceInd']/@value)",v)),R=b===0?"":`
`,M=E!==""?`, preferred: ${E}`:"";return`${g}${R}${_}${M}`},""),getMaritalStatus=c=>String(xpath.select1("string(*[name()='maritalStatusCode']/@displayName)",c)),getProviderOrganization=c=>{const d=xpath.select1("*[name()='providerOrganization']",c),g=xpath.select1("//*[name()='custodian']/*[name()='assignedCustodian']/*[name()='representedCustodianOrganization']",c),v=d||g,b=xpath.select("*[name()='id']",v).map(getId).join(", "),_=displayForName(xpath.select("string(*[name()='name'])",v)),E=getContactDetails(xpath.select("*[name()='addr']",v),xpath.select("*[name()='telecom']",v)),R=_?`
${_}`:"";return{name:`${b}${R}`,contactDetails:E}},getRace=c=>{const d=xpath.select1("*[name()='raceCode']",c);if(d)return String(xpath.select1("string(@displayName)",d));const g=xpath.select("*[name()='sdtc:raceCode']",c);return lodash.exports.isEmpty(g)?"":String(xpath.select1("string(@displayName)",g[0]))},getReligion=c=>String(xpath.select1("string(*[name()='religiousAffiliationCode']/@displayName)",c)),getPatientData=c=>{const d=xpath.select("//*[name()='patientRole']",c);if(!d||lodash.exports.isEmpty(d))return;const g=getPatient(c),v=Object.entries(g).reduce((b,[_,E])=>({...b,[_]:E==null?void 0:E.reduce((R,M)=>({...R,[lodash.exports.camelCase(M.label)]:M.value}),{})}),{});return d.map((b,_)=>{const E=xpath.select1("*[name()='patient']",b),R=getRace(E),M=getEthnicity(E),P=getContactDetails(xpath.select("*[name()='addr']",b),xpath.select("*[name()='telecom']",b)),O=getLanguage(E),H=getProviderOrganization(b),Q=getGuardian(b),ee=getMaritalStatus(E),V=getReligion(E),W=getBirthPlace(E);return{name:v[`patient${_+1}`].name,contactDetails:P,dateOfBirth:v[`patient${_+1}`].dateOfBirth,gender:v[`patient${_+1}`].gender,race:R,ethnicity:M,patientId:v[`patient${_+1}`].id,language:O,maritalStatus:ee,religion:V,birthPlace:W,guardian:Q||[],providerOrganization:H.name,providerOrganizationContactDetails:H.contactDetails}})},Patient=({document:c})=>{const d=getPatientData(c);return!d||lodash.exports.isEmpty(d)?null:React.createElement(React.Fragment,null,d.map(g=>{const v=[{label:"Patient",value:g.name},{label:"Contact Details",value:g.contactDetails},{label:"Date Of Birth",value:g.dateOfBirth},{label:"Gender",value:g.gender},{label:"Race",value:g.race},{label:"Ethnicity",value:g.ethnicity},{label:"Patient ID",value:g.patientId},{label:"Language",value:g.language},{label:"Marital Status",value:g.maritalStatus},{label:"Religion",value:g.religion},{label:"Birth Place",value:g.birthPlace},...g.guardian.map(b=>[{label:"Guardian",value:b.name},{label:"Contact Details",value:b.contactDetails}]),[{label:"Provider Organization",value:g.providerOrganization},{label:"Contact Details (Organization)",value:g.providerOrganizationContactDetails}]];return React.createElement(Table,{key:`${g.patientId}-${g.name}-${g.dateOfBirth}`,data:v.filter(b=>lodash.exports.isArray(b)||b.value)})}))};try{Patient.displayName="Patient",Patient.__docgenInfo={description:"",displayName:"Patient",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const DocumentDetails=({document:c})=>React.createElement("div",{className:"ctw-ccda-document-details"},React.createElement(Document,{document:c}),React.createElement(Custodian,{document:c}),React.createElement(Patient,{document:c}),React.createElement(Author,{document:c}),React.createElement(DataEnterer,{document:c}),React.createElement(Informant,{document:c}),React.createElement(InformationRecipient,{document:c}),React.createElement(LegalAuthenticator,{document:c}),React.createElement(Authenticator,{document:c}),React.createElement(Participant,{document:c}),React.createElement(DocumentationOf,{document:c}),React.createElement(InFulfillmentOf,{document:c}),React.createElement(Authorization,{document:c}),React.createElement(Encounter,{document:c}));try{DocumentDetails.displayName="DocumentDetails",DocumentDetails.__docgenInfo={description:"",displayName:"DocumentDetails",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const getTitle=c=>{const d=String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='title']/text())",c)),g=ccdaDatetimeToISO(String(xpath.select1("string(*[name()='ClinicalDocument']/*[name()='effectiveTime']/@value)",c)));return`${d} (${displayDateTimeasString(g)})`},getHeaderData=c=>{const d=getTitle(c),g=getPatient(c),v=getDocumentationOf(c),b=getAuthor(c),_=getEncounter(c),E=getInFulfillmentOf(c),R=getConsent(c);return{title:d,labelTypeData:{...g,...R||{},...v||{},...b||{},encounter:_||[],...E||{}}}},Header=({document:c})=>{const{title:d,labelTypeData:g}=getHeaderData(c);return React.createElement("div",{className:"ctw-ccda-header-container"},React.createElement("h2",{className:"ctw-ccda-header-title"},d),React.createElement("table",{className:"ctw-ccda-common-table"},React.createElement("tbody",null,lodash.exports.map(g,(v,b)=>{if(!v)return null;const _=v.filter(E=>E.value);return lodash.exports.isEmpty(_)?null:React.createElement("tr",{key:b},React.createElement("td",{className:"ctw-ccda-common-td1"},lodash.exports.startCase(b.replace(/\d/g,""))),React.createElement("td",{className:"ctw-ccda-common-td2"},_.map((E,R)=>React.createElement("span",{key:`${b}-${R}`},E.label&&React.createElement("b",null,E.label," "),E.value))))}))))};try{Header.displayName="Header",Header.__docgenInfo={description:"",displayName:"Header",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}/*! @license DOMPurify 2.4.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.1/LICENSE */function _typeof(c){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},_typeof(c)}function _setPrototypeOf(c,d){return _setPrototypeOf=Object.setPrototypeOf||function(v,b){return v.__proto__=b,v},_setPrototypeOf(c,d)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(c,d,g){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(b,_,E){var R=[null];R.push.apply(R,_);var M=Function.bind.apply(b,R),P=new M;return E&&_setPrototypeOf(P,E.prototype),P},_construct.apply(null,arguments)}function _toConsumableArray(c){return _arrayWithoutHoles(c)||_iterableToArray(c)||_unsupportedIterableToArray(c)||_nonIterableSpread()}function _arrayWithoutHoles(c){if(Array.isArray(c))return _arrayLikeToArray(c)}function _iterableToArray(c){if(typeof Symbol<"u"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}function _unsupportedIterableToArray(c,d){if(!!c){if(typeof c=="string")return _arrayLikeToArray(c,d);var g=Object.prototype.toString.call(c).slice(8,-1);if(g==="Object"&&c.constructor&&(g=c.constructor.name),g==="Map"||g==="Set")return Array.from(c);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return _arrayLikeToArray(c,d)}}function _arrayLikeToArray(c,d){(d==null||d>c.length)&&(d=c.length);for(var g=0,v=new Array(d);g<d;g++)v[g]=c[g];return v}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hasOwnProperty=Object.hasOwnProperty,setPrototypeOf=Object.setPrototypeOf,isFrozen=Object.isFrozen,getPrototypeOf=Object.getPrototypeOf,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,freeze=Object.freeze,seal=Object.seal,create=Object.create,_ref=typeof Reflect<"u"&&Reflect,apply=_ref.apply,construct=_ref.construct;apply||(apply=function(d,g,v){return d.apply(g,v)});freeze||(freeze=function(d){return d});seal||(seal=function(d){return d});construct||(construct=function(d,g){return _construct(d,_toConsumableArray(g))});var arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(c){return function(d){for(var g=arguments.length,v=new Array(g>1?g-1:0),b=1;b<g;b++)v[b-1]=arguments[b];return apply(c,d,v)}}function unconstruct(c){return function(){for(var d=arguments.length,g=new Array(d),v=0;v<d;v++)g[v]=arguments[v];return construct(c,g)}}function addToSet(c,d,g){g=g||stringToLowerCase,setPrototypeOf&&setPrototypeOf(c,null);for(var v=d.length;v--;){var b=d[v];if(typeof b=="string"){var _=g(b);_!==b&&(isFrozen(d)||(d[v]=_),b=_)}c[b]=!0}return c}function clone(c){var d=create(null),g;for(g in c)apply(hasOwnProperty,c,[g])&&(d[g]=c[g]);return d}function lookupGetter(c,d){for(;c!==null;){var g=getOwnPropertyDescriptor(c,d);if(g){if(g.get)return unapply(g.get);if(typeof g.value=="function")return unapply(g.value)}c=getPrototypeOf(c)}function v(b){return console.warn("fallback value for",b),null}return v}var html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text=freeze(["#text"]),html=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\${[\w\W]*}/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),getGlobal=function c(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function c(d,g){if(_typeof(d)!=="object"||typeof d.createPolicy!="function")return null;var v=null,b="data-tt-policy-suffix";g.currentScript&&g.currentScript.hasAttribute(b)&&(v=g.currentScript.getAttribute(b));var _="dompurify"+(v?"#"+v:"");try{return d.createPolicy(_,{createHTML:function(R){return R},createScriptURL:function(R){return R}})}catch{return console.warn("TrustedTypes policy "+_+" could not be created."),null}};function createDOMPurify(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal(),d=function(ft){return createDOMPurify(ft)};if(d.version="2.4.1",d.removed=[],!c||!c.document||c.document.nodeType!==9)return d.isSupported=!1,d;var g=c.document,v=c.document,b=c.DocumentFragment,_=c.HTMLTemplateElement,E=c.Node,R=c.Element,M=c.NodeFilter,P=c.NamedNodeMap,O=P===void 0?c.NamedNodeMap||c.MozNamedAttrMap:P,H=c.HTMLFormElement,Q=c.DOMParser,ee=c.trustedTypes,V=R.prototype,W=lookupGetter(V,"cloneNode"),Y=lookupGetter(V,"nextSibling"),U=lookupGetter(V,"childNodes"),G=lookupGetter(V,"parentNode");if(typeof _=="function"){var te=v.createElement("template");te.content&&te.content.ownerDocument&&(v=te.content.ownerDocument)}var B=_createTrustedTypesPolicy(ee,g),j=B?B.createHTML(""):"",X=v,oe=X.implementation,be=X.createNodeIterator,ae=X.createDocumentFragment,ie=X.getElementsByTagName,Se=g.importNode,mt={};try{mt=clone(v).documentMode?v.documentMode:{}}catch{}var it={};d.isSupported=typeof G=="function"&&oe&&typeof oe.createHTMLDocument<"u"&&mt!==9;var Tt=MUSTACHE_EXPR,ht=ERB_EXPR,Ye=TMPLIT_EXPR,St=DATA_ATTR,$t=ARIA_ATTR,Lt=IS_SCRIPT_OR_DATA,Mt=ATTR_WHITESPACE,jt=IS_ALLOWED_URI,Qe=null,Pe=addToSet({},[].concat(_toConsumableArray(html$1),_toConsumableArray(svg$1),_toConsumableArray(svgFilters),_toConsumableArray(mathMl$1),_toConsumableArray(text))),Ee=null,nt=addToSet({},[].concat(_toConsumableArray(html),_toConsumableArray(svg),_toConsumableArray(mathMl),_toConsumableArray(xml))),st=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),rt=null,tt=null,vt=!0,It=!0,Vt=!1,wt=!1,kt=!1,Zt=!1,Qt=!1,Z=!1,z=!1,K=!1,ne=!0,Ae=!1,ut="user-content-",Rt=!0,yt=!1,lt={},at=null,ze=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ct=null,Ze=addToSet({},["audio","video","img","source","image","track"]),Ot=null,Ht=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xt="http://www.w3.org/1998/Math/MathML",ur="http://www.w3.org/2000/svg",cr="http://www.w3.org/1999/xhtml",A=cr,re=!1,Ce=null,ve=addToSet({},[Xt,ur,cr],stringToString),Oe,pt=["application/xhtml+xml","text/html"],Kt="text/html",rr,dr=null,Gt=v.createElement("form"),or=function(ft){return ft instanceof RegExp||ft instanceof Function},yr=function(ft){dr&&dr===ft||((!ft||_typeof(ft)!=="object")&&(ft={}),ft=clone(ft),Oe=pt.indexOf(ft.PARSER_MEDIA_TYPE)===-1?Oe=Kt:Oe=ft.PARSER_MEDIA_TYPE,rr=Oe==="application/xhtml+xml"?stringToString:stringToLowerCase,Qe="ALLOWED_TAGS"in ft?addToSet({},ft.ALLOWED_TAGS,rr):Pe,Ee="ALLOWED_ATTR"in ft?addToSet({},ft.ALLOWED_ATTR,rr):nt,Ce="ALLOWED_NAMESPACES"in ft?addToSet({},ft.ALLOWED_NAMESPACES,stringToString):ve,Ot="ADD_URI_SAFE_ATTR"in ft?addToSet(clone(Ht),ft.ADD_URI_SAFE_ATTR,rr):Ht,ct="ADD_DATA_URI_TAGS"in ft?addToSet(clone(Ze),ft.ADD_DATA_URI_TAGS,rr):Ze,at="FORBID_CONTENTS"in ft?addToSet({},ft.FORBID_CONTENTS,rr):ze,rt="FORBID_TAGS"in ft?addToSet({},ft.FORBID_TAGS,rr):{},tt="FORBID_ATTR"in ft?addToSet({},ft.FORBID_ATTR,rr):{},lt="USE_PROFILES"in ft?ft.USE_PROFILES:!1,vt=ft.ALLOW_ARIA_ATTR!==!1,It=ft.ALLOW_DATA_ATTR!==!1,Vt=ft.ALLOW_UNKNOWN_PROTOCOLS||!1,wt=ft.SAFE_FOR_TEMPLATES||!1,kt=ft.WHOLE_DOCUMENT||!1,Z=ft.RETURN_DOM||!1,z=ft.RETURN_DOM_FRAGMENT||!1,K=ft.RETURN_TRUSTED_TYPE||!1,Qt=ft.FORCE_BODY||!1,ne=ft.SANITIZE_DOM!==!1,Ae=ft.SANITIZE_NAMED_PROPS||!1,Rt=ft.KEEP_CONTENT!==!1,yt=ft.IN_PLACE||!1,jt=ft.ALLOWED_URI_REGEXP||jt,A=ft.NAMESPACE||cr,ft.CUSTOM_ELEMENT_HANDLING&&or(ft.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(st.tagNameCheck=ft.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ft.CUSTOM_ELEMENT_HANDLING&&or(ft.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(st.attributeNameCheck=ft.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ft.CUSTOM_ELEMENT_HANDLING&&typeof ft.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(st.allowCustomizedBuiltInElements=ft.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),wt&&(It=!1),z&&(Z=!0),lt&&(Qe=addToSet({},_toConsumableArray(text)),Ee=[],lt.html===!0&&(addToSet(Qe,html$1),addToSet(Ee,html)),lt.svg===!0&&(addToSet(Qe,svg$1),addToSet(Ee,svg),addToSet(Ee,xml)),lt.svgFilters===!0&&(addToSet(Qe,svgFilters),addToSet(Ee,svg),addToSet(Ee,xml)),lt.mathMl===!0&&(addToSet(Qe,mathMl$1),addToSet(Ee,mathMl),addToSet(Ee,xml))),ft.ADD_TAGS&&(Qe===Pe&&(Qe=clone(Qe)),addToSet(Qe,ft.ADD_TAGS,rr)),ft.ADD_ATTR&&(Ee===nt&&(Ee=clone(Ee)),addToSet(Ee,ft.ADD_ATTR,rr)),ft.ADD_URI_SAFE_ATTR&&addToSet(Ot,ft.ADD_URI_SAFE_ATTR,rr),ft.FORBID_CONTENTS&&(at===ze&&(at=clone(at)),addToSet(at,ft.FORBID_CONTENTS,rr)),Rt&&(Qe["#text"]=!0),kt&&addToSet(Qe,["html","head","body"]),Qe.table&&(addToSet(Qe,["tbody"]),delete rt.tbody),freeze&&freeze(ft),dr=ft)},mr=addToSet({},["mi","mo","mn","ms","mtext"]),Nr=addToSet({},["foreignobject","desc","title","annotation-xml"]),Ar=addToSet({},["title","style","font","a","script"]),br=addToSet({},svg$1);addToSet(br,svgFilters),addToSet(br,svgDisallowed);var qr=addToSet({},mathMl$1);addToSet(qr,mathMlDisallowed);var en=function(ft){var Dt=G(ft);(!Dt||!Dt.tagName)&&(Dt={namespaceURI:A,tagName:"template"});var At=stringToLowerCase(ft.tagName),Jt=stringToLowerCase(Dt.tagName);return Ce[ft.namespaceURI]?ft.namespaceURI===ur?Dt.namespaceURI===cr?At==="svg":Dt.namespaceURI===Xt?At==="svg"&&(Jt==="annotation-xml"||mr[Jt]):Boolean(br[At]):ft.namespaceURI===Xt?Dt.namespaceURI===cr?At==="math":Dt.namespaceURI===ur?At==="math"&&Nr[Jt]:Boolean(qr[At]):ft.namespaceURI===cr?Dt.namespaceURI===ur&&!Nr[Jt]||Dt.namespaceURI===Xt&&!mr[Jt]?!1:!qr[At]&&(Ar[At]||!br[At]):!!(Oe==="application/xhtml+xml"&&Ce[ft.namespaceURI]):!1},Wr=function(ft){arrayPush(d.removed,{element:ft});try{ft.parentNode.removeChild(ft)}catch{try{ft.outerHTML=j}catch{ft.remove()}}},rn=function(ft,Dt){try{arrayPush(d.removed,{attribute:Dt.getAttributeNode(ft),from:Dt})}catch{arrayPush(d.removed,{attribute:null,from:Dt})}if(Dt.removeAttribute(ft),ft==="is"&&!Ee[ft])if(Z||z)try{Wr(Dt)}catch{}else try{Dt.setAttribute(ft,"")}catch{}},Xr=function(ft){var Dt,At;if(Qt)ft="<remove></remove>"+ft;else{var Jt=stringMatch(ft,/^[\r\n\t ]+/);At=Jt&&Jt[0]}Oe==="application/xhtml+xml"&&A===cr&&(ft='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ft+"</body></html>");var gr=B?B.createHTML(ft):ft;if(A===cr)try{Dt=new Q().parseFromString(gr,Oe)}catch{}if(!Dt||!Dt.documentElement){Dt=oe.createDocument(A,"template",null);try{Dt.documentElement.innerHTML=re?"":gr}catch{}}var Er=Dt.body||Dt.documentElement;return ft&&At&&Er.insertBefore(v.createTextNode(At),Er.childNodes[0]||null),A===cr?ie.call(Dt,kt?"html":"body")[0]:kt?Dt.documentElement:Er},ir=function(ft){return be.call(ft.ownerDocument||ft,ft,M.SHOW_ELEMENT|M.SHOW_COMMENT|M.SHOW_TEXT,null,!1)},Rr=function(ft){return ft instanceof H&&(typeof ft.nodeName!="string"||typeof ft.textContent!="string"||typeof ft.removeChild!="function"||!(ft.attributes instanceof O)||typeof ft.removeAttribute!="function"||typeof ft.setAttribute!="function"||typeof ft.namespaceURI!="string"||typeof ft.insertBefore!="function"||typeof ft.hasChildNodes!="function")},Vr=function(ft){return _typeof(E)==="object"?ft instanceof E:ft&&_typeof(ft)==="object"&&typeof ft.nodeType=="number"&&typeof ft.nodeName=="string"},Zr=function(ft,Dt,At){!it[ft]||arrayForEach(it[ft],function(Jt){Jt.call(d,Dt,At,dr)})},Et=function(ft){var Dt;if(Zr("beforeSanitizeElements",ft,null),Rr(ft)||regExpTest(/[\u0080-\uFFFF]/,ft.nodeName))return Wr(ft),!0;var At=rr(ft.nodeName);if(Zr("uponSanitizeElement",ft,{tagName:At,allowedTags:Qe}),ft.hasChildNodes()&&!Vr(ft.firstElementChild)&&(!Vr(ft.content)||!Vr(ft.content.firstElementChild))&&regExpTest(/<[/\w]/g,ft.innerHTML)&&regExpTest(/<[/\w]/g,ft.textContent)||At==="select"&&regExpTest(/<template/i,ft.innerHTML))return Wr(ft),!0;if(!Qe[At]||rt[At]){if(!rt[At]&&ot(At)&&(st.tagNameCheck instanceof RegExp&&regExpTest(st.tagNameCheck,At)||st.tagNameCheck instanceof Function&&st.tagNameCheck(At)))return!1;if(Rt&&!at[At]){var Jt=G(ft)||ft.parentNode,gr=U(ft)||ft.childNodes;if(gr&&Jt)for(var Er=gr.length,Cr=Er-1;Cr>=0;--Cr)Jt.insertBefore(W(gr[Cr],!0),Y(ft))}return Wr(ft),!0}return ft instanceof R&&!en(ft)||(At==="noscript"||At==="noembed")&&regExpTest(/<\/no(script|embed)/i,ft.innerHTML)?(Wr(ft),!0):(wt&&ft.nodeType===3&&(Dt=ft.textContent,Dt=stringReplace(Dt,Tt," "),Dt=stringReplace(Dt,ht," "),Dt=stringReplace(Dt,Ye," "),ft.textContent!==Dt&&(arrayPush(d.removed,{element:ft.cloneNode()}),ft.textContent=Dt)),Zr("afterSanitizeElements",ft,null),!1)},xt=function(ft,Dt,At){if(ne&&(Dt==="id"||Dt==="name")&&(At in v||At in Gt))return!1;if(!(It&&!tt[Dt]&&regExpTest(St,Dt))){if(!(vt&&regExpTest($t,Dt))){if(!Ee[Dt]||tt[Dt]){if(!(ot(ft)&&(st.tagNameCheck instanceof RegExp&&regExpTest(st.tagNameCheck,ft)||st.tagNameCheck instanceof Function&&st.tagNameCheck(ft))&&(st.attributeNameCheck instanceof RegExp&&regExpTest(st.attributeNameCheck,Dt)||st.attributeNameCheck instanceof Function&&st.attributeNameCheck(Dt))||Dt==="is"&&st.allowCustomizedBuiltInElements&&(st.tagNameCheck instanceof RegExp&&regExpTest(st.tagNameCheck,At)||st.tagNameCheck instanceof Function&&st.tagNameCheck(At))))return!1}else if(!Ot[Dt]){if(!regExpTest(jt,stringReplace(At,Mt,""))){if(!((Dt==="src"||Dt==="xlink:href"||Dt==="href")&&ft!=="script"&&stringIndexOf(At,"data:")===0&&ct[ft])){if(!(Vt&&!regExpTest(Lt,stringReplace(At,Mt,"")))){if(At)return!1}}}}}}return!0},ot=function(ft){return ft.indexOf("-")>0},bt=function(ft){var Dt,At,Jt,gr;Zr("beforeSanitizeAttributes",ft,null);var Er=ft.attributes;if(!!Er){var Cr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ee};for(gr=Er.length;gr--;){Dt=Er[gr];var Ur=Dt,_r=Ur.name,jr=Ur.namespaceURI;if(At=_r==="value"?Dt.value:stringTrim(Dt.value),Jt=rr(_r),Cr.attrName=Jt,Cr.attrValue=At,Cr.keepAttr=!0,Cr.forceKeepAttr=void 0,Zr("uponSanitizeAttribute",ft,Cr),At=Cr.attrValue,!Cr.forceKeepAttr&&(rn(_r,ft),!!Cr.keepAttr)){if(regExpTest(/\/>/i,At)){rn(_r,ft);continue}wt&&(At=stringReplace(At,Tt," "),At=stringReplace(At,ht," "),At=stringReplace(At,Ye," "));var nn=rr(ft.nodeName);if(!!xt(nn,Jt,At)){if(Ae&&(Jt==="id"||Jt==="name")&&(rn(_r,ft),At=ut+At),B&&_typeof(ee)==="object"&&typeof ee.getAttributeType=="function"&&!jr)switch(ee.getAttributeType(nn,Jt)){case"TrustedHTML":At=B.createHTML(At);break;case"TrustedScriptURL":At=B.createScriptURL(At);break}try{jr?ft.setAttributeNS(jr,_r,At):ft.setAttribute(_r,At),arrayPop(d.removed)}catch{}}}}Zr("afterSanitizeAttributes",ft,null)}},_t=function Ft(ft){var Dt,At=ir(ft);for(Zr("beforeSanitizeShadowDOM",ft,null);Dt=At.nextNode();)Zr("uponSanitizeShadowNode",Dt,null),!Et(Dt)&&(Dt.content instanceof b&&Ft(Dt.content),bt(Dt));Zr("afterSanitizeShadowDOM",ft,null)};return d.sanitize=function(Ft){var ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dt,At,Jt,gr,Er;if(re=!Ft,re&&(Ft="<!-->"),typeof Ft!="string"&&!Vr(Ft)){if(typeof Ft.toString!="function")throw typeErrorCreate("toString is not a function");if(Ft=Ft.toString(),typeof Ft!="string")throw typeErrorCreate("dirty is not a string, aborting")}if(!d.isSupported){if(_typeof(c.toStaticHTML)==="object"||typeof c.toStaticHTML=="function"){if(typeof Ft=="string")return c.toStaticHTML(Ft);if(Vr(Ft))return c.toStaticHTML(Ft.outerHTML)}return Ft}if(Zt||yr(ft),d.removed=[],typeof Ft=="string"&&(yt=!1),yt){if(Ft.nodeName){var Cr=rr(Ft.nodeName);if(!Qe[Cr]||rt[Cr])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(Ft instanceof E)Dt=Xr("<!---->"),At=Dt.ownerDocument.importNode(Ft,!0),At.nodeType===1&&At.nodeName==="BODY"||At.nodeName==="HTML"?Dt=At:Dt.appendChild(At);else{if(!Z&&!wt&&!kt&&Ft.indexOf("<")===-1)return B&&K?B.createHTML(Ft):Ft;if(Dt=Xr(Ft),!Dt)return Z?null:K?j:""}Dt&&Qt&&Wr(Dt.firstChild);for(var Ur=ir(yt?Ft:Dt);Jt=Ur.nextNode();)Jt.nodeType===3&&Jt===gr||Et(Jt)||(Jt.content instanceof b&&_t(Jt.content),bt(Jt),gr=Jt);if(gr=null,yt)return Ft;if(Z){if(z)for(Er=ae.call(Dt.ownerDocument);Dt.firstChild;)Er.appendChild(Dt.firstChild);else Er=Dt;return Ee.shadowroot&&(Er=Se.call(g,Er,!0)),Er}var _r=kt?Dt.outerHTML:Dt.innerHTML;return kt&&Qe["!doctype"]&&Dt.ownerDocument&&Dt.ownerDocument.doctype&&Dt.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,Dt.ownerDocument.doctype.name)&&(_r="<!DOCTYPE "+Dt.ownerDocument.doctype.name+`>
`+_r),wt&&(_r=stringReplace(_r,Tt," "),_r=stringReplace(_r,ht," "),_r=stringReplace(_r,Ye," ")),B&&K?B.createHTML(_r):_r},d.setConfig=function(Ft){yr(Ft),Zt=!0},d.clearConfig=function(){dr=null,Zt=!1},d.isValidAttribute=function(Ft,ft,Dt){dr||yr({});var At=rr(Ft),Jt=rr(ft);return xt(At,Jt,Dt)},d.addHook=function(Ft,ft){typeof ft=="function"&&(it[Ft]=it[Ft]||[],arrayPush(it[Ft],ft))},d.removeHook=function(Ft){if(it[Ft])return arrayPop(it[Ft])},d.removeHooks=function(Ft){it[Ft]&&(it[Ft]=[])},d.removeAllHooks=function(){it={}},d}var purify=createDOMPurify();const Section=({title:c,humanReadable:d})=>{const[g,v]=react.exports.useState(!0);if(!d)return null;const b=()=>v(!g);return React.createElement("div",{className:"ctw-ccda-section-container"},React.createElement("div",{className:"ctw-ccda-section-header-wrapper"},React.createElement("button",{type:"button",className:"ctw-ccda-section-arrow",onClick:b},g?"\u25BC":"\u25B6"),React.createElement("h3",null,c)),g&&React.createElement("div",{className:"ctw-ccda-section-wrapper"},React.createElement("div",{dangerouslySetInnerHTML:{__html:purify.sanitize(fixHtml(d))}})))};try{Section.displayName="Section",Section.__docgenInfo={description:"",displayName:"Section",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},humanReadable:{defaultValue:null,description:"",name:"humanReadable",required:!1,type:{name:"Document"}}}}}catch(c){}const CcdaViewer=({document:c})=>{const g=xpath.select("//*[name()='component']/*[name()='section']",c).map(v=>{const b=String(xpath.select1("string(*[name()='title'])",v)),_=xpath.select1("*[name()='text']",v),E=String(xpath.select1("string(*[name()='code']/@code)",v));return{title:b,humanReadable:_,code:E}});return React.createElement("div",{className:cx({width:"calc(100vw - 200px - 24px - 24px - 16px - 16px - 2px)"})},React.createElement(Header,{document:c}),React.createElement(DocumentDetails,{document:c}),g.map(({title:v,humanReadable:b,code:_})=>React.createElement(Section,{key:`el-text-${_}`,title:v,humanReadable:b})))};try{CcdaViewer.displayName="CcdaViewer",CcdaViewer.__docgenInfo={description:"",displayName:"CcdaViewer",props:{document:{defaultValue:null,description:"",name:"document",required:!0,type:{name:"Document"}}}}}catch(c){}const xmlTypes=["/xml","/xhtml+xml","application/xml"],isSpecificContentType=(c,d)=>c.some(g=>d.includes(g)),Base64BinaryField=({value:c,record:d,contentType:g})=>{const[v,b]=react.exports.useState(!0),[_,E]=react.exports.useState(!0);react.exports.useEffect(()=>{v||E(!1)},[v]);const R=Q=>E(Q.target.checked),M=react.exports.useMemo(()=>{if(!isSpecificContentType(xmlTypes,g))return;const Q=new libExports$1.DOMParser({locator:{},errorHandler:ee=>null}).parseFromString(buffer.Buffer.from(c,"base64").toString("utf8"),g);if(xpath.select1("//*[name()='patientRole']",Q))return Q},[g,c]),P=[{label:"Parsed",value:_,event:R,disabled:!v,display:Boolean(M)}],O=_?M:void 0,H=()=>O?React.createElement(CcdaViewer,{document:O}):React.createElement("div",{className:"ctw-ccda-base64-binary-text"},c);return React.createElement("div",{className:"ctw-ccda-container"},React.createElement("div",{className:"ctw-ccda-switch-container"},P.map(Q=>Q.display&&React.createElement("div",{key:Q.label,className:"ctw-cda-switch-wrapper"},React.createElement("span",{className:"ctw-flex"},React.createElement(Toggle,{inputProps:{value:Q.label,checked:Q.value,disabled:Q.disabled},name:Q.label,text:Q.label,onChange:Q.event}))))),H())};try{Base64BinaryField.displayName="Base64BinaryField",Base64BinaryField.__docgenInfo={description:"",displayName:"Base64BinaryField",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},record:{defaultValue:null,description:"",name:"record",required:!0,type:{name:"Binary"}},contentType:{defaultValue:null,description:"",name:"contentType",required:!0,type:{name:"string"}}}}}catch(c){}const CCDAModal=({rawBinary:c,onClose:d,...g})=>{var _;const[v,b]=react.exports.useState(!1);return react.exports.useEffect(()=>{c.isBinary&&b(!0)},[v,c.isBinary]),React.createElement(Modal,{...g},v&&((_=c.xmlBinary)==null?void 0:_.data)&&React.createElement("div",{className:"ctw-flex ctw-w-full ctw-space-x-4"},React.createElement(Base64BinaryField,{record:c.xmlBinary,value:c.xmlBinary.data,contentType:c.xmlBinary.contentType}),React.createElement("div",{className:"ctw-ml-3 ctw-flex ctw-h-7 ctw-items-center"},React.createElement("button",{type:"button","aria-label":"close",onClick:d,className:"ctw-btn-clear"},React.createElement("span",{className:"ctw-sr-only"},"Close panel"),React.createElement(XIcon,{className:"ctw-h-6 ctw-w-6","aria-hidden":"true"})))))};try{CCDAModal.displayName="CCDAModal",CCDAModal.__docgenInfo={description:"",displayName:"CCDAModal",props:{rawBinary:{defaultValue:null,description:"",name:"rawBinary",required:!0,type:{name:"BinaryDocumentData"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}}}}}catch(c){}const NotesList=({notes:c})=>React.createElement("div",{className:"ctw-flex ctw-flex-col ctw-space-y-4"},c.map(d=>React.createElement("div",{key:d},React.createElement("div",null,d))));try{NotesList.displayName="NotesList",NotesList.__docgenInfo={description:"",displayName:"NotesList",props:{notes:{defaultValue:null,description:"",name:"notes",required:!0,type:{name:"string[]"}}}}}catch(c){}const DocumentButton=({onClick:c})=>React.createElement("button",{type:"button",className:"ctw-btn-default ctw-flex ctw-space-x-2 ctw-align-middle",onClick:c},React.createElement("div",null," Source Document"),React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:12,className:"ctw-mt-1 ctw-fill-content-light"},React.createElement("path",{d:"M352 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h50.7L297.4 169.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V160c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32H352zM214.6 297.4c-12.5-12.5-32.8-12.5-45.3 0L64 402.7V352c0-17.7-14.3-32-32-32s-32 14.3-32 32V480c0 17.7 14.3 32 32 32H160c17.7 0 32-14.3 32-32s-14.3-32-32-32H109.3L214.6 342.6c12.5-12.5 12.5-32.8 0-45.3z"})));try{DocumentButton.displayName="DocumentButton",DocumentButton.__docgenInfo={description:"",displayName:"DocumentButton",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLButtonElement>"}}}}}catch(c){}const RenderDocumentButton=({idMap:c,entry:d,setIsModalOpen:g,setRawBinary:v})=>{var b;return React.createElement(React.Fragment,null,c.get(d.id)&&((b=c.get(d.id))==null?void 0:b.isBinary)&&React.createElement(DocumentButton,{onClick:()=>{g(!0),v(c.get(d.id))}}))};try{RenderDocumentButton.displayName="RenderDocumentButton",RenderDocumentButton.__docgenInfo={description:"",displayName:"RenderDocumentButton",props:{idMap:{defaultValue:null,description:"",name:"idMap",required:!0,type:{name:"SourceDocumentMap"}},entry:{defaultValue:null,description:"",name:"entry",required:!0,type:{name:"CollapsibleDataListProps"}},setIsModalOpen:{defaultValue:null,description:"",name:"setIsModalOpen",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}},setRawBinary:{defaultValue:null,description:"",name:"setRawBinary",required:!0,type:{name:"Dispatch<SetStateAction<BinaryDocumentData | undefined>>"}}}}}catch(c){}const CONDITION_HISTORY_LIMIT=10,conditionData=c=>{var d,g;return[{label:"Recorder",value:c.recorder},{label:"Recorded Date",value:c.recordedDate},{label:"Provider Organization",value:(g=(d=c.patient)==null?void 0:d.organization)==null?void 0:g.name},{label:"Clinical Status",value:lodash.exports.capitalize(c.clinicalStatus)},{label:"Verification Status",value:lodash.exports.capitalize(c.verificationStatus)},{label:"Onset Date",value:c.onset},{label:"Abatement Date",value:c.abatement},{label:"Note",value:c.notes.length!==0&&React.createElement(NotesList,{notes:c.notes})}]};function setupData(c){var g,v;const d=[{label:"Recorder",value:c.recorder},{label:"Clinical Status",value:lodash.exports.capitalize(c.clinicalStatus)},{label:"Verification Status",value:lodash.exports.capitalize(c.verificationStatus)},{label:"Recorded Date",value:c.recordedDate},{label:"Category",value:lodash.exports.startCase(c.categories[0])},{label:"Note",value:c.notes.length!==0&&React.createElement(NotesList,{notes:c.notes})},{label:"Code",value:React.createElement(CodingList,{codings:c.knownCodings})},{label:"Onset Date",value:c.onset},{label:"Abatement Date",value:c.abatement},{label:"Encounter",value:c.encounter}];return{id:c.id,date:c.recordedDate,title:lodash.exports.startCase(c.categories[0]),subtitle:(v=(g=c.patient)==null?void 0:g.organization)==null?void 0:v.name,data:d}}function ConditionHistory({condition:c,onClose:d,onEdit:g}){const[v,b]=react.exports.useState([]),[_,E]=react.exports.useState([]),[R,M]=react.exports.useState(!0),[P,O]=react.exports.useState(!0),[H,Q]=react.exports.useState(),ee=useConditionHistory(H),{getRequestContext:V}=useCTW(),[W,Y]=react.exports.useState(!1),[U,G]=react.exports.useState(),[te,B]=react.exports.useState(!1),[j,X]=react.exports.useState(new Map);react.exports.useEffect(()=>{let be=[];async function ae(){if(Q(c),ee.data){const Se=getIncludedResources(ee.data.bundle),mt=ee.data.conditions.map(ht=>new ConditionModel(ht,Se)),Tt=lodash.exports.orderBy(mt,ht=>{var Ye;return(Ye=ht.resource.recordedDate)!=null?Ye:""},"desc").filter(ht=>ht.verificationStatus!=="entered-in-error");be=lodash.exports.uniqWith(Tt.map(ht=>setupData(ht)),(ht,Ye)=>lodash.exports.isEqual(ht.data,Ye.data)),b(be.filter(ht=>ht.date)),E(be.filter(ht=>!ht.date)),M(!1)}}async function ie(){var ht;const Se=await V(),it=[setupData(c),...be],Tt=await getBinary(Se,it);X(Tt),(ht=Tt.get(c.id))!=null&&ht.isBinary&&(Y(!0),G(Tt.get(c.id))),O(!1)}return ae(),ie(),function(){b([]),E([]),M(!0),O(!0)}},[c,V,ee.data,W,g]);function oe(){return v.length===0&&_.length===0&&!R?React.createElement("div",null,"No history found."):R?React.createElement(Loading,{message:"Loading condition history..."}):React.createElement(React.Fragment,null,W&&U&&React.createElement(CCDAModal,{isOpen:te,rawBinary:U,onClose:()=>B(!1)}),React.createElement("div",{className:"ctw-space-y-6"},React.createElement(ConditionHeader,{condition:c}),g&&React.createElement(Details,{data:conditionData(c),readOnly:!g,onEdit:()=>{d(),setTimeout(g,400)}}),React.createElement(CollapsibleDataListStack,{entries:v.map(be=>({...be,documentButton:React.createElement(RenderDocumentButton,{idMap:j,entry:be,setIsModalOpen:B,setRawBinary:G})})),limit:CONDITION_HISTORY_LIMIT}),_.length!==0&&React.createElement("div",{className:"ctw-space-y-2"},React.createElement("div",{className:"ctw-font-medium"},"Records with no date:"),React.createElement(CollapsibleDataListStack,{entries:_.map(be=>({...be,documentButton:React.createElement(RenderDocumentButton,{idMap:j,entry:be,setIsModalOpen:B,setRawBinary:G})})),limit:CONDITION_HISTORY_LIMIT}))))}return oe()}try{ConditionHistory.displayName="ConditionHistory",ConditionHistory.__docgenInfo={description:"",displayName:"ConditionHistory",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"(() => void)"}}}}}catch(c){}function ConditionHistoryDrawer({className:c,condition:d,isOpen:g,onClose:v,onEdit:b}){const _="Condition History";return React.createElement(Drawer,{className:c,title:_,isOpen:g,onClose:v},React.createElement(Drawer.Body,null,d&&React.createElement(ConditionHistory,{condition:d,onClose:v,onEdit:b})),React.createElement(Drawer.Footer,null,React.createElement("div",{className:"ctw-flex ctw-justify-end ctw-space-x-3 ctw-text-black "},React.createElement("button",{type:"button",className:"ctw-btn-default ctw-font-semibold ctw-outline-bg-light",onClick:v},"Close"))))}try{ConditionHistoryDrawer.displayName="ConditionHistoryDrawer",ConditionHistoryDrawer.__docgenInfo={description:"",displayName:"ConditionHistoryDrawer",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},condition:{defaultValue:null,description:"",name:"condition",required:!1,type:{name:"ConditionModel"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"(() => void)"}}}}}catch(c){}function ConditionsNoPatient({className:c}){return React.createElement("div",{className:cx("ctw-conditions",c)},React.createElement("div",{className:"ctw-heading-container"},React.createElement("div",{className:"ctw-title"},"Conditions")),React.createElement("div",{className:"ctw-p-5"},React.createElement(CautionAlert,{header:"Conditions Unavailable"},React.createElement("div",null,"We are unable to access Condition information for this patient."),React.createElement("div",null,"Contact your system administrator or customer service for assistance."))))}try{ConditionsNoPatient.displayName="ConditionsNoPatient",ConditionsNoPatient.__docgenInfo={description:"",displayName:"ConditionsNoPatient",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch(c){}const conditions="",filterOtherConditions=(c,d,g)=>c.filter(v=>{var b;return v.isArchived&&!g||["FAC","XXX"].includes((b=v.ccsChapterCode)!=null?b:"")?!1:!d.some(_=>{const E=v.resource.recordedDate,R=_.resource.recordedDate,M=v.knownCodingsMatch(_),P=_.verificationStatus==="entered-in-error",O=!E||R&&E<=R,H=v.clinicalStatus===_.clinicalStatus;return M&&!P&&(O||H)})}),getAutoCompleteConditions=async(c,d)=>{const{authToken:g,contextBuilderId:v}=c;return(await(await ctwFetch(`${getFormsConditionsUrl(c.env)}?display=${d}`,{headers:{Authorization:`Bearer ${g}`,...v&&{"Zus-Account":v}}})).json()).conditionsList},ConditionsAutoComplete=({defaultCoding:c,readonly:d,...g})=>{const{getRequestContext:v}=useCTW(),[b,_]=react.exports.useState(!1),[E,R]=react.exports.useState(),M=async P=>{_(!0);const O=await v(),H=await getAutoCompleteConditions(O,P);H&&R(H.map(Q=>({value:Q,label:Q.display}))),_(!1)};return React.createElement(ComboboxField,{options:E||[],isLoading:b,name:`${g.name}`,defaultSearchTerm:g.defaultValue,readonly:d,onSearchChange:M,defaultValue:c})};try{ConditionsAutoComplete.displayName="ConditionsAutoComplete",ConditionsAutoComplete.__docgenInfo={description:"",displayName:"ConditionsAutoComplete",props:{defaultCoding:{defaultValue:null,description:"",name:"defaultCoding",required:!1,type:{name:"Coding"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean | undefined"}}}}}catch(c){}const getAddConditionData=({condition:c})=>[{label:"Condition",field:"condition",value:c.display,readonly:!1,render:(d,g)=>{var v;return React.createElement(ConditionsAutoComplete,{readonly:d,...g,defaultCoding:(v=c.preferredCoding)!=null?v:{}})}},...sharedFields(c)],getEditingPatientConditionData=({condition:c})=>[{label:"id",value:c.id,field:"id",readonly:!0,hidden:!0},...sharedFields(c)],sharedFields=c=>[{label:"subject",value:c.subjectID,field:"subjectID",readonly:!0,hidden:!0},{label:"Clinical Status",value:levelTwoToOneMapping(c.clinicalStatus),field:"clinicalStatus"},{label:"Verification Status",value:levelTwoToOneMapping(c.verificationStatus),field:"verificationStatus"},{label:"Onset",value:c.onset,field:"onset"},{label:"Abatement",value:c.abatement,field:"abatement"},{label:"Note",value:c.notes,lines:3,field:"note"}],conditionSchema=mod.object({id:mod.string().optional(),subjectID:mod.string({required_error:"Condition subjectID must be specified."}),clinicalStatus:mod.enum(["active","inactive"]),onset:mod.date().max(new Date,{message:"Onset cannot be a future date."}).optional(),abatement:mod.date().max(new Date,{message:"Abatement cannot be a future date."}).optional(),note:mod.string().optional()}),conditionRefinement=(c,d)=>{c.abatement&&c.clinicalStatus==="active"&&d.addIssue({code:mod.ZodIssueCode.custom,message:"Clinical status must be inactive.",path:["abatement"]}),c.abatement&&c.onset&&c.abatement<c.onset&&d.addIssue({code:mod.ZodIssueCode.custom,message:"Abatement date must be after onset date.",path:["abatement"]})},conditionEditSchema=conditionSchema.extend({verificationStatus:mod.enum(["unconfirmed","confirmed","refuted","entered-in-error"])}).superRefine((c,d)=>conditionRefinement(c,d)),conditionAddSchema=conditionSchema.extend({condition:mod.object({code:mod.string({required_error:"Please choose a condition."}),display:mod.string().optional(),system:mod.string().optional()}),verificationStatus:mod.enum(["confirmed","unconfirmed"])}).superRefine((c,d)=>conditionRefinement(c,d));function levelTwoToOneMapping(c){switch(c){case"recurrence":case"relapse":return"active";case"remission":case"resolved":return"inactive";case"provisional":case"differential":return"unconfirmed";default:return c}}try{getAddConditionData.displayName="getAddConditionData",getAddConditionData.__docgenInfo={description:"",displayName:"getAddConditionData",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch(c){}try{getEditingPatientConditionData.displayName="getEditingPatientConditionData",getEditingPatientConditionData.__docgenInfo={description:"",displayName:"getEditingPatientConditionData",props:{condition:{defaultValue:null,description:"",name:"condition",required:!0,type:{name:"ConditionModel"}}}}}catch(c){}const getRequestData=c=>{var d,g,v,b,_;return[{label:"treating-provider",render:()=>React.createElement("div",{className:"ctw-font-medium"},"Who is the treating provider for this patient?")},{label:"Practitioner Name",field:"name",value:"",readonly:!1},[{label:"NPI",field:"npi",value:"",readonly:!1},{label:"Role",field:"role",value:"",readonly:!1}],{label:"patient-information",render:()=>React.createElement("div",null,React.createElement("div",{className:"ctw-font-medium"},"Is the patient information below correct and up-to-date?"),React.createElement("div",null,"Complete as many fields as possible to increase matching results."))},{label:"First Name",field:"firstName",value:c.firstName,readonly:!1},{label:"Last Name",field:"lastName",value:c.lastName,readonly:!1},[{label:"Date of Birth",field:"dateOfBirth",value:c.dob,readonly:!1},{label:"Gender",field:"gender",value:c.gender,readonly:!1}],{label:"Address",field:"address",value:(g=(d=c.homeAddress)==null?void 0:d.line)==null?void 0:g.join(", "),readonly:!1},{label:"City",field:"city",value:(v=c.homeAddress)==null?void 0:v.city,readonly:!1},[{label:"State",field:"state",value:(b=c.homeAddress)==null?void 0:b.state,readonly:!1},{label:"Zip",field:"zipCode",value:(_=c.homeAddress)==null?void 0:_.postalCode,readonly:!1}],{label:"Phone",field:"phone",value:c.phoneNumber,readonly:!1},{label:"Email",field:"email",value:c.email,readonly:!1}]},requestHistorySchema=mod.object({name:mod.string({required_error:"Practitioner name must be specified."}),npi:mod.string({required_error:"NPI must be specified."}).length(10),role:mod.enum(["Doctor","Nurse","Other"]),firstName:mod.string({required_error:"First name must be specified."}),lastName:mod.string({required_error:"Last name must be specified."}),dateOfBirth:mod.date().max(new Date,{message:"Date of birth cannot be a future date."}),gender:mod.enum(["-","male","female","other","unknown"]),address:mod.string({required_error:"Address must be specified."}),city:mod.string({required_error:"City must be specified."}),state:mod.string({required_error:"State must be specified."}),zipCode:mod.string({required_error:"Zip code must be specified."}),phone:mod.string().optional(),email:mod.string().optional()});try{getRequestData.displayName="getRequestData",getRequestData.__docgenInfo={description:"",displayName:"getRequestData",props:{active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean | undefined"}},contact:{defaultValue:null,description:"",name:"contact",required:!0,type:{name:"PatientContact[] | undefined"}},dob:{defaultValue:null,description:"",name:"dob",required:!0,type:{name:"string | undefined"}},age:{defaultValue:null,description:"",name:"age",required:!0,type:{name:"number | undefined"}},gender:{defaultValue:null,description:"",name:"gender",required:!0,type:{name:"string | undefined"}},maritalStatus:{defaultValue:null,description:"",name:"maritalStatus",required:!0,type:{name:"string | undefined"}},organization:{defaultValue:null,description:"",name:"organization",required:!0,type:{name:"OrganizationModel | undefined"}},use:{defaultValue:null,description:"",name:"use",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"usual"'},{value:'"official"'},{value:'"temp"'},{value:'"nickname"'},{value:'"anonymous"'},{value:'"old"'},{value:'"maiden"'}]}},UPID:{defaultValue:null,description:"",name:"UPID",required:!0,type:{name:"string"}},getPhoneNumber:{defaultValue:null,description:"",name:"getPhoneNumber",required:!0,type:{name:'(use?: "temp" | "old" | "home" | "work" | "mobile" | undefined) => string | undefined'}},phoneNumber:{defaultValue:null,description:"",name:"phoneNumber",required:!0,type:{name:"string | undefined"}},email:{defaultValue:null,description:"",name:"email",required:!0,type:{name:"string | undefined"}},bestHomeAddress:{defaultValue:null,description:"",name:"bestHomeAddress",required:!0,type:{name:"Address | undefined"}},homeAddress:{defaultValue:null,description:"",name:"homeAddress",required:!0,type:{name:"Address | undefined"}},bestName:{defaultValue:null,description:"",name:"bestName",required:!0,type:{name:"HumanName"}},additionalNames:{defaultValue:null,description:"",name:"additionalNames",required:!0,type:{name:"string | undefined"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"string"}},firstName:{defaultValue:null,description:"",name:"firstName",required:!0,type:{name:"string"}},fullName:{defaultValue:null,description:"",name:"fullName",required:!0,type:{name:"string"}},lastName:{defaultValue:null,description:"",name:"lastName",required:!0,type:{name:"string | undefined"}},nickname:{defaultValue:null,description:"",name:"nickname",required:!0,type:{name:"string | undefined"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!0,type:{name:"string | undefined"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!0,type:{name:"string | undefined"}},resource:{defaultValue:null,description:"",name:"resource",required:!0,type:{name:"Patient"}},includedResources:{defaultValue:null,description:"",name:"includedResources",required:!1,type:{name:"ResourceMap"}},revIncludes:{defaultValue:null,description:"",name:"revIncludes",required:!1,type:{name:"Resource[]"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isSummaryResource:{defaultValue:null,description:"",name:"isSummaryResource",required:!0,type:{name:"boolean"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"string"}},getBasicResourceByAction:{defaultValue:null,description:"",name:"getBasicResourceByAction",required:!0,type:{name:"(profileAction: string) => Basic | undefined"}},toString:{defaultValue:null,description:"",name:"toString",required:!1,type:{name:"() => string"}}}}}catch(c){}const schedulePatientHistory=async(c,d,g)=>{const v=`${getZusApiBaseUrl(c.env)}/patient-history/patient/${d}/refresh?consent=1`;try{return await(await ctwFetch(v,{method:"POST",headers:{Authorization:`Bearer ${c.authToken}`,"practitioner-npi":g.npi,"practitioner-role":g.role.toLocaleLowerCase(),"practitioner-name":g.name,...c.contextBuilderId&&{"Zus-Account":c.contextBuilderId}}})).json()}catch{throw Error(`Error scheduling patient history job with id of ${d}`)}},PatientHistoryRequestDrawer=({patient:c,header:d,isOpen:g,onClose:v,setClinicalHistoryExists:b})=>{const _=useHandlePatientSave(c),E=async(R,M)=>{try{await _(R)}catch(H){const{requestErrors:Q,responseIsSuccess:ee}=getFormResponseErrors(H);return ee?new Error("Failed to save patient data."):new Error(Q.join(","))}const P=await M(),O=await schedulePatientHistory(P,c.id,R);if("errors"in O){const H=[O.errors.map(Q=>Q.details)];return new Error(H.join(","))}return b(!0),O};return React.createElement(DrawerFormWithFields,{header:d,title:"Request Records",action:E,data:getRequestData(c),schema:requestHistorySchema,isOpen:g,onClose:v})};try{PatientHistoryRequestDrawer.displayName="PatientHistoryRequestDrawer",PatientHistoryRequestDrawer.__docgenInfo={description:"",displayName:"PatientHistoryRequestDrawer",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},header:{defaultValue:null,description:"",name:"header",required:!1,type:{name:"ReactNode"}},patient:{defaultValue:null,description:"",name:"patient",required:!0,type:{name:"PatientModel"}},setClinicalHistoryExists:{defaultValue:null,description:"",name:"setClinicalHistoryExists",required:!0,type:{name:"Dispatch<SetStateAction<boolean | undefined>>"}}}}}catch(c){}const PatientHistoryMessage=({onClick:c})=>React.createElement("div",{className:"ctw-flex ctw-justify-center ctw-space-x-2 ctw-border ctw-border-solid ctw-border-divider-light ctw-p-5"},React.createElement("div",{className:"ctw-flex ctw-justify-center ctw-text-icon-default"},"Retrieve patient clinical history."),React.createElement("button",{type:"button",className:"ctw-btn-clear ctw-link",onClick:c},"Request Records"));try{PatientHistoryMessage.displayName="PatientHistoryMessage",PatientHistoryMessage.__docgenInfo={description:"",displayName:"PatientHistoryMessage",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLButtonElement>"}}}}}catch(c){}async function recordProfileAction(c,d,g,v){var E;if(!d.id)throw new Error(`Tried to ${v} a resource that hasn't been created yet.`);if(!d.isSummaryResource)throw new Error(`Tried to ${v} a patient record resource.`);if(c){const R=lodash.exports.filter((E=c.meta)==null?void 0:E.tag,{system:SYSTEM_ZUS_PROFILE_ACTION});try{await deleteMetaTags(c,g,R)}catch{throw new Error(`There was an error setting ${v} for a resource.`)}}const b={resourceType:"Basic",id:c==null?void 0:c.id,meta:{tag:[{system:SYSTEM_ZUS_PROFILE_ACTION,code:v}]},code:{coding:[{system:SYSTEM_BASIC_RESOURCE_TYPE,code:"adminact",display:"Administrative Activity"}],text:"Administrative Activity"},subject:{reference:`${d.resourceType}/${d.id}`,type:d.resourceType},author:await getUsersPractitionerReference(g)};if(!(await createOrEditFhirResource(b,g)).id)throw new Error(`Failed to ${v} resource with id of ${d.id}`)}async function getPatientRefreshHistoryMessages(c,d){const g=`${getZusApiBaseUrl(c.env)}/patient-history/messages?patient-id=${d}`;try{const b=await(await ctwFetch(g,{headers:{Authorization:`Bearer ${c.authToken}`,...c.contextBuilderId&&{"Zus-Account":c.contextBuilderId}}})).json();return Object.values(b.data)}catch(v){throw errorResponse("Failed fetching patient refresh history messages",v)}}async function hasFetchedPatientHistory(c,d){return(await getPatientRefreshHistoryMessages(c,d)).length!==0}const EMPTY_MESSAGE_PATIENT_RECORD="There are no conditions in this patient's record.",EMPTY_MESSAGE_PROVIDER="There are no conditions available.",ERROR_MSG="There was an error fetching conditions for this patient. Refresh the page or contact your organization's technical support if this issue persists.";function Conditions({className:c,readOnly:d=!1}){const g=react.exports.useRef(null),v=useBreakpoints(g),[b,_]=react.exports.useState(!1),[E,R]=react.exports.useState(!1),[M,P]=react.exports.useState(!1),[O,H]=react.exports.useState(!1),[Q,ee]=react.exports.useState([]),[V,W]=react.exports.useState([]),[Y,U]=react.exports.useState(!1),[G,te]=react.exports.useState("Add"),[B,j]=react.exports.useState(conditionAddSchema),[X,oe]=react.exports.useState(),[be,ae]=react.exports.useState(),ie=usePatient(),Se=usePatientConditions(),mt=useOtherProviderConditions(),{getRequestContext:it}=useCTW(),[Tt,ht]=react.exports.useState(),[Ye,St]=react.exports.useState(),$t=Se.isError?ERROR_MSG:EMPTY_MESSAGE_PATIENT_RECORD,Lt=mt.isError?ERROR_MSG:EMPTY_MESSAGE_PROVIDER,Mt=()=>{if(be&&Q.some(vt=>vt.id===be.id))return()=>jt(be)},jt=vt=>{ie.data&&(_(!0),te("Edit"),j(conditionEditSchema),oe(getEditingPatientConditionData({condition:vt})),ae(vt))},Qe=vt=>{R(!0),ae(vt)},Pe=async vt=>{const It=await it(),Vt=vt.getBasicResourceByAction("archive")||vt.getBasicResourceByAction("unarchive"),wt=vt.isArchived?"unarchive":"archive";await recordProfileAction(Vt,vt,It,wt),await queryClient.invalidateQueries([QUERY_KEY_OTHER_PROVIDER_CONDITIONS])},Ee=vt=>{const It=getAddConditionWithDefaults(vt.resource);ie.data&&(j(conditionAddSchema),_(!0),te("Add"),oe(getAddConditionData({condition:new ConditionModel(It)})))},nt=()=>{if(!ie.data)return;const vt=getNewCondition(ie.data.id);_(!0),j(conditionAddSchema),oe(getAddConditionData({condition:new ConditionModel(vt)}))},st=React.createElement("button",{className:"ctw-btn-primary",type:"button",onClick:nt},"Add Condition"),rt=Ye||mt.data&&mt.data.length>0,tt=async vt=>{const It=await it(),Vt=await hasFetchedPatientHistory(It,vt);St(Vt)};return react.exports.useEffect(()=>{var It;async function vt(){const Vt=Se.data,wt=mt.data;Vt&&(ee(Vt.filter(kt=>kt.active||Y)),W(wt?filterOtherConditions(wt,Vt,Y):[])),Se.error&&(ee([]),W([]))}vt(),((It=ie.data)==null?void 0:It.id)&&Ye===void 0&&tt(ie.data.id)},[Y,ie.data,Se.data,mt.data,Ye,Se.error]),ie.isError?React.createElement(ConditionsNoPatient,{className:c}):React.createElement("div",{ref:g,className:cx("ctw-conditions",c,{"ctw-conditions-stacked":v.sm})},!d&&React.createElement("div",{className:"ctw-conditions-heading-container"},React.createElement("div",{className:"ctw-title"},"Conditions"),React.createElement("button",{type:"button",className:"ctw-btn-clear ctw-link",onClick:nt},"+ Add Condition")),React.createElement("div",{className:"ctw-conditions-body-container"},React.createElement("div",{className:"ctw-space-y-3"},React.createElement("div",{className:"ctw-conditions-title-container"},React.createElement("div",{className:"ctw-title"},"Patient Record"),React.createElement(ToggleControl,{onFormChange:()=>U(!Y),toggleProps:{name:"conditions",text:"Include Inactive"}})),React.createElement(ConditionsTableBase,{stacked:v.sm,conditions:Q,isLoading:Se.isLoading,hideMenu:d,sort:Tt,onSort:vt=>ht(vt),message:React.createElement(React.Fragment,null,React.createElement("div",null,$t),!Se.isError&&!d&&React.createElement("div",{className:"ctw-mt-5"},st)),rowMenuActions:vt=>[{name:"Edit",action:async()=>{jt(vt)}},{name:"View History",action:async()=>{P(!0),ae(vt)}},{name:"Delete",className:"dangerous",action:async()=>{Qe(vt)}}]})),React.createElement("div",{className:"ctw-space-y-3"},React.createElement("div",{className:"ctw-conditions-title-container"},React.createElement("div",{className:"ctw-title"},"Other Provider Records"),rt&&React.createElement("button",{type:"button",className:"ctw-btn-clear ctw-link",onClick:()=>H(!0)},"Request Records")),rt?React.createElement(ConditionsTableBase,{className:"ctw-conditions-not-reviewed",stacked:v.sm,conditions:V,sort:Tt,onSort:vt=>ht(vt),isLoading:mt.isLoading||Se.isLoading,hideMenu:d,message:Lt,rowMenuActions:vt=>[{name:"Add",action:async()=>{Ee(vt)}},{name:"View History",action:async()=>{P(!0),ae(vt)}},{name:vt.isArchived?"Un-Archive":"Archive",action:async()=>{await Pe(vt)}}]}):React.createElement(PatientHistoryMessage,{onClick:()=>H(!0)}))),ie.data&&React.createElement(DrawerFormWithFields,{title:`${G} Condition`,header:G==="Edit"&&be&&React.createElement(ConditionHeader,{condition:be}),action:lodash.exports.curry(createOrEditCondition)(be,ie.data.id),data:X,schema:B,isOpen:b,onClose:()=>_(!1)}),ie.data&&React.createElement(PatientHistoryRequestDrawer,{header:React.createElement("div",{className:"ctw-pt-0 ctw-text-base"},"Request patient clinical history from 70K+ providers across the nation. No changes will be made to your patient record."),patient:ie.data,isOpen:O,onClose:()=>H(!1),setClinicalHistoryExists:St}),React.createElement(ConditionHistoryDrawer,{isOpen:M,onClose:()=>P(!1),condition:be,onEdit:Mt()}),be&&ie.data&&React.createElement(ModalConfirmDelete,{resource:be,resourceName:be.display||"unnamed condition",onClose:()=>R(!1),isOpen:E,onDelete:async()=>{const vt=await it();await onConditionDelete(be.resource,vt)}}))}try{Conditions.displayName="Conditions",Conditions.__docgenInfo={description:"",displayName:"Conditions",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch(c){}var libExports=requireLib$1();export{Badge as B,Conditions as C,DrawerFormWithFields as D,ModalConfirmDelete as M,OtherProviderMedsTable as O,PatientProvider as P,SYSTEM_ZUS_UNIVERSAL_ID as S,Toggle as T,CTWProvider as a,SYSTEM_SUMMARY as b,ConditionModel as c,getAddConditionData as d,createOrEditCondition as e,conditionAddSchema as f,getNewCondition as g,conditionEditSchema as h,getEditingPatientConditionData as i,useBreakpoints as j,usePatientConditions as k,libExports as l,useOtherProviderConditions as m,useCTW as n,filterOtherConditions as o,ConditionHistoryDrawer as p,ConditionHeader as q,onConditionDelete as r,MedicationHistory as s,MedicationStatementModel as t,usePatient as u,v4 as v,PatientMedications as w,ProviderMedsTable as x,PatientsTable as y};
//# sourceMappingURL=index.111f341f.js.map
